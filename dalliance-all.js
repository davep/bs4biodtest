(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// bam.js: indexed binary alignments
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var bin = require('./bin');
    var readInt = bin.readInt;
    var readShort = bin.readShort;
    var readByte = bin.readByte;
    var readInt64 = bin.readInt64;
    var readFloat = bin.readFloat;

    var lh3utils = require('./lh3utils');
    var readVob = lh3utils.readVob;
    var unbgzf = lh3utils.unbgzf;
    var reg2bins = lh3utils.reg2bins;
    var Chunk = lh3utils.Chunk;
}

var BAM_MAGIC = 0x14d4142;
var BAI_MAGIC = 0x1494142;

var BamFlags = {
    MULTIPLE_SEGMENTS: 0x1,
    ALL_SEGMENTS_ALIGN: 0x2,
    SEGMENT_UNMAPPED: 0x4,
    NEXT_SEGMENT_UNMAPPED: 0x8,
    REVERSE_COMPLEMENT: 0x10,
    NEXT_REVERSE_COMPLEMENT: 0x20,
    FIRST_SEGMENT: 0x40,
    LAST_SEGMENT: 0x80,
    SECONDARY_ALIGNMENT: 0x100,
    QC_FAIL: 0x200,
    DUPLICATE: 0x400,
    SUPPLEMENTARY: 0x800
};

function BamFile() {}

// Calculate the length (in bytes) of the BAI ref starting at offset.
// Returns {nbin, length, minBlockIndex}
function _getBaiRefLength(uncba, offset) {
    var p = offset;
    var nbin = readInt(uncba, p);p += 4;
    for (var b = 0; b < nbin; ++b) {
        var bin = readInt(uncba, p);
        var nchnk = readInt(uncba, p + 4);
        p += 8 + nchnk * 16;
    }
    var nintv = readInt(uncba, p);p += 4;

    var minBlockIndex = 1000000000;
    var q = p;
    for (var i = 0; i < nintv; ++i) {
        var v = readVob(uncba, q);q += 8;
        if (v) {
            var bi = v.block;
            if (v.offset > 0) bi += 65536;

            if (bi < minBlockIndex) minBlockIndex = bi;
            break;
        }
    }
    p += nintv * 8;

    return {
        minBlockIndex: minBlockIndex,
        nbin: nbin,
        length: p - offset
    };
}

function makeBam(data, bai, indexChunks, callback, attempted) {
    // Do an initial probe on the BAM file to catch any mixed-content errors.
    data.slice(0, 10).fetch(function (header) {
        if (header) {
            return makeBam2(data, bai, indexChunks, callback, attempted);
        } else {
            return callback(null, "Couldn't access BAM.");
        }
    }, { timeout: 5000 });
}

function makeBam2(data, bai, indexChunks, callback, attempted) {
    var bam = new BamFile();
    bam.data = data;
    bam.bai = bai;
    bam.indexChunks = indexChunks;

    var minBlockIndex = bam.indexChunks ? bam.indexChunks.minBlockIndex : 1000000000;

    // Fills out bam.chrToIndex and bam.indexToChr based on the first few bytes of the BAM.
    function parseBamHeader(r) {
        if (!r) {
            return callback(null, "Couldn't access BAM");
        }

        var unc = unbgzf(r, r.byteLength);
        var uncba = new Uint8Array(unc);

        var magic = readInt(uncba, 0);
        if (magic != BAM_MAGIC) {
            return callback(null, "Not a BAM file, magic=0x" + magic.toString(16));
        }
        var headLen = readInt(uncba, 4);
        var header = '';
        for (var i = 0; i < headLen; ++i) {
            header += String.fromCharCode(uncba[i + 8]);
        }

        var nRef = readInt(uncba, headLen + 8);
        var p = headLen + 12;

        bam.chrToIndex = {};
        bam.indexToChr = [];
        for (var i = 0; i < nRef; ++i) {
            var lName = readInt(uncba, p);
            var name = '';
            for (var j = 0; j < lName - 1; ++j) {
                name += String.fromCharCode(uncba[p + 4 + j]);
            }
            var lRef = readInt(uncba, p + lName + 4);
            bam.chrToIndex[name] = i;
            if (name.indexOf('chr') == 0) {
                bam.chrToIndex[name.substring(3)] = i;
            } else {
                bam.chrToIndex['chr' + name] = i;
            }
            bam.indexToChr.push(name);

            p = p + 8 + lName;
        }

        if (bam.indices) {
            return callback(bam);
        }
    }

    function parseBai(header) {
        if (!header) {
            return "Couldn't access BAI";
        }

        var uncba = new Uint8Array(header);
        var baiMagic = readInt(uncba, 0);
        if (baiMagic != BAI_MAGIC) {
            return callback(null, 'Not a BAI file, magic=0x' + baiMagic.toString(16));
        }

        var nref = readInt(uncba, 4);

        bam.indices = [];

        var p = 8;
        for (var ref = 0; ref < nref; ++ref) {
            var blockStart = p;
            var o = _getBaiRefLength(uncba, blockStart);
            p += o.length;

            minBlockIndex = Math.min(o.minBlockIndex, minBlockIndex);

            var nbin = o.nbin;

            if (nbin > 0) {
                bam.indices[ref] = new Uint8Array(header, blockStart, p - blockStart);
            }
        }

        return true;
    }

    if (!bam.indexChunks) {
        bam.bai.fetch(function (header) {
            // Do we really need to fetch the whole thing? :-(
            var result = parseBai(header);
            if (result !== true) {
                if (bam.bai.url && typeof attempted === "undefined") {
                    // Already attempted x.bam.bai not there so now trying x.bai
                    bam.bai.url = bam.data.url.replace(new RegExp('.bam$'), '.bai');

                    // True lets us know we are making a second attempt
                    makeBam2(data, bam.bai, indexChunks, callback, true);
                } else {
                    // We've attempted x.bam.bai & x.bai and nothing worked
                    callback(null, result);
                }
            } else {
                bam.data.slice(0, minBlockIndex).fetch(parseBamHeader);
            }
        }); // Timeout on first request to catch Chrome mixed-content error.
    } else {
        var chunks = bam.indexChunks.chunks;
        bam.indices = [];
        for (var i = 0; i < chunks.length; i++) {
            bam.indices[i] = null; // To be filled out lazily as needed
        }
        bam.data.slice(0, minBlockIndex).fetch(parseBamHeader);
    }
}

BamFile.prototype.blocksForRange = function (refId, min, max) {
    var index = this.indices[refId];
    if (!index) {
        return [];
    }

    var intBinsL = reg2bins(min, max);
    var intBins = [];
    for (var i = 0; i < intBinsL.length; ++i) {
        intBins[intBinsL[i]] = true;
    }
    var leafChunks = [],
        otherChunks = [];

    var nbin = readInt(index, 0);
    var p = 4;
    for (var b = 0; b < nbin; ++b) {
        var bin = readInt(index, p);
        var nchnk = readInt(index, p + 4);
        //        dlog('bin=' + bin + '; nchnk=' + nchnk);
        p += 8;
        if (intBins[bin]) {
            for (var c = 0; c < nchnk; ++c) {
                var cs = readVob(index, p);
                var ce = readVob(index, p + 8);
                (bin < 4681 ? otherChunks : leafChunks).push(new Chunk(cs, ce));
                p += 16;
            }
        } else {
            p += nchnk * 16;
        }
    }
    // console.log('leafChunks = ' + JSON.stringify(leafChunks));
    // console.log('otherChunks = ' + JSON.stringify(otherChunks));

    var nintv = readInt(index, p);
    // console.log('nintv=' + nintv);
    var lowest = null;
    var minLin = Math.min(min >> 14, nintv - 1),
        maxLin = Math.min(max >> 14, nintv - 1);
    for (var i = minLin; i <= maxLin; ++i) {
        var lb = readVob(index, p + 4 + i * 8);
        if (!lb) {
            continue;
        }
        if (!lowest || lb.block < lowest.block || lb.block == lowest.block && lb.offset < lowest.offset) {
            lowest = lb;
        }
    }
    // console.log('Lowest LB = ' + lowest);

    var prunedOtherChunks = [];
    if (lowest != null) {
        for (var i = 0; i < otherChunks.length; ++i) {
            var chnk = otherChunks[i];
            if (chnk.maxv.block > lowest.block || chnk.maxv.block == lowest.block && chnk.maxv.offset >= lowest.offset) {
                prunedOtherChunks.push(chnk);
            }
        }
    }
    // console.log('prunedOtherChunks = ' + JSON.stringify(prunedOtherChunks));
    otherChunks = prunedOtherChunks;

    var intChunks = [];
    for (var i = 0; i < otherChunks.length; ++i) {
        intChunks.push(otherChunks[i]);
    }
    for (var i = 0; i < leafChunks.length; ++i) {
        intChunks.push(leafChunks[i]);
    }

    intChunks.sort(function (c0, c1) {
        var dif = c0.minv.block - c1.minv.block;
        if (dif != 0) {
            return dif;
        } else {
            return c0.minv.offset - c1.minv.offset;
        }
    });
    var mergedChunks = [];
    if (intChunks.length > 0) {
        var cur = intChunks[0];
        for (var i = 1; i < intChunks.length; ++i) {
            var nc = intChunks[i];
            if (nc.minv.block == cur.maxv.block /* && nc.minv.offset == cur.maxv.offset */) {
                    // no point splitting mid-block
                    cur = new Chunk(cur.minv, nc.maxv);
                } else {
                mergedChunks.push(cur);
                cur = nc;
            }
        }
        mergedChunks.push(cur);
    }
    // console.log('mergedChunks = ' + JSON.stringify(mergedChunks));

    return mergedChunks;
};

BamFile.prototype.fetch = function (chr, min, max, callback, opts) {
    var thisB = this;
    opts = opts || {};

    var chrId = this.chrToIndex[chr];
    var chunks;
    if (chrId === undefined) {
        chunks = [];
    } else {
        // Fetch this portion of the BAI if it hasn't been loaded yet.
        if (this.indices[chrId] === null && this.indexChunks.chunks[chrId]) {
            var start_stop = this.indexChunks.chunks[chrId];
            return this.bai.slice(start_stop[0], start_stop[1]).fetch(function (data) {
                var buffer = new Uint8Array(data);
                this.indices[chrId] = buffer;
                return this.fetch(chr, min, max, callback, opts);
            }.bind(this));
        }

        chunks = this.blocksForRange(chrId, min, max);
        if (!chunks) {
            callback(null, 'Error in index fetch');
        }
    }

    var records = [];
    var index = 0;
    var data;

    function tramp() {
        if (index >= chunks.length) {
            return callback(records);
        } else if (!data) {
            var c = chunks[index];
            var fetchMin = c.minv.block;
            var fetchMax = c.maxv.block + (1 << 16); // *sigh*
            // console.log('fetching ' + fetchMin + ':' + fetchMax);
            thisB.data.slice(fetchMin, fetchMax - fetchMin).fetch(function (r) {
                data = unbgzf(r, c.maxv.block - c.minv.block + 1);
                return tramp();
            });
        } else {
            var ba = new Uint8Array(data);
            var finished = thisB.readBamRecords(ba, chunks[index].minv.offset, records, min, max, chrId, opts);
            data = null;
            ++index;
            if (finished) return callback(records);else return tramp();
        }
    }
    tramp();
};

var SEQRET_DECODER = ['=', 'A', 'C', 'x', 'G', 'x', 'x', 'x', 'T', 'x', 'x', 'x', 'x', 'x', 'x', 'N'];
var CIGAR_DECODER = ['M', 'I', 'D', 'N', 'S', 'H', 'P', '=', 'X', '?', '?', '?', '?', '?', '?', '?'];

function BamRecord() {}

BamFile.prototype.readBamRecords = function (ba, offset, sink, min, max, chrId, opts) {
    while (true) {
        var blockSize = readInt(ba, offset);
        var blockEnd = offset + blockSize + 4;
        if (blockEnd > ba.length) {
            return false;
        }

        var record = new BamRecord();

        var refID = readInt(ba, offset + 4);
        var pos = readInt(ba, offset + 8);

        var bmn = readInt(ba, offset + 12);
        var bin = (bmn & 0xffff0000) >> 16;
        var mq = (bmn & 0xff00) >> 8;
        var nl = bmn & 0xff;

        var flag_nc = readInt(ba, offset + 16);
        var flag = (flag_nc & 0xffff0000) >> 16;
        var nc = flag_nc & 0xffff;

        var lseq = readInt(ba, offset + 20);

        var nextRef = readInt(ba, offset + 24);
        var nextPos = readInt(ba, offset + 28);

        var tlen = readInt(ba, offset + 32);

        record.segment = this.indexToChr[refID];
        record.flag = flag;
        record.pos = pos;
        record.mq = mq;
        if (opts.light) record.seqLength = lseq;

        if (!opts.light || opts.includeName) {
            var readName = '';
            for (var j = 0; j < nl - 1; ++j) {
                readName += String.fromCharCode(ba[offset + 36 + j]);
            }
            record.readName = readName;
        }

        if (!opts.light) {
            if (nextRef >= 0) {
                record.nextSegment = this.indexToChr[nextRef];
                record.nextPos = nextPos;
            }

            var p = offset + 36 + nl;

            var cigar = '';
            for (var c = 0; c < nc; ++c) {
                var cigop = readInt(ba, p);
                cigar = cigar + (cigop >> 4) + CIGAR_DECODER[cigop & 0xf];
                p += 4;
            }
            record.cigar = cigar;

            var seq = '';
            var seqBytes = lseq + 1 >> 1;
            for (var j = 0; j < seqBytes; ++j) {
                var sb = ba[p + j];
                seq += SEQRET_DECODER[(sb & 0xf0) >> 4];
                if (seq.length < lseq) seq += SEQRET_DECODER[sb & 0x0f];
            }
            p += seqBytes;
            record.seq = seq;

            var qseq = '';
            for (var j = 0; j < lseq; ++j) {
                qseq += String.fromCharCode(ba[p + j] + 33);
            }
            p += lseq;
            record.quals = qseq;

            while (p < blockEnd) {
                var tag = String.fromCharCode(ba[p], ba[p + 1]);
                var type = String.fromCharCode(ba[p + 2]);
                var value;

                if (type == 'A') {
                    value = String.fromCharCode(ba[p + 3]);
                    p += 4;
                } else if (type == 'i' || type == 'I') {
                    value = readInt(ba, p + 3);
                    p += 7;
                } else if (type == 'c' || type == 'C') {
                    value = ba[p + 3];
                    p += 4;
                } else if (type == 's' || type == 'S') {
                    value = readShort(ba, p + 3);
                    p += 5;
                } else if (type == 'f') {
                    value = readFloat(ba, p + 3);
                    p += 7;
                } else if (type == 'Z' || type == 'H') {
                    p += 3;
                    value = '';
                    for (;;) {
                        var cc = ba[p++];
                        if (cc == 0) {
                            break;
                        } else {
                            value += String.fromCharCode(cc);
                        }
                    }
                } else if (type == 'B') {
                    var atype = String.fromCharCode(ba[p + 3]);
                    var alen = readInt(ba, p + 4);
                    var elen;
                    var reader;
                    if (atype == 'i' || atype == 'I' || atype == 'f') {
                        elen = 4;
                        if (atype == 'f') reader = readFloat;else reader = readInt;
                    } else if (atype == 's' || atype == 'S') {
                        elen = 2;
                        reader = readShort;
                    } else if (atype == 'c' || atype == 'C') {
                        elen = 1;
                        reader = readByte;
                    } else {
                        throw 'Unknown array type ' + atype;
                    }

                    p += 8;
                    value = [];
                    for (var i = 0; i < alen; ++i) {
                        value.push(reader(ba, p));
                        p += elen;
                    }
                } else {
                    throw 'Unknown type ' + type;
                }
                record[tag] = value;
            }
        }

        if (!min || record.pos <= max && record.pos + lseq >= min) {
            if (chrId === undefined || refID == chrId) {
                sink.push(record);
            }
        }
        if (record.pos > max) {
            return true;
        }
        offset = blockEnd;
    }

    // Exits via top of loop.
};

if (typeof module !== 'undefined') {
    module.exports = {
        makeBam: makeBam,
        BAM_MAGIC: BAM_MAGIC,
        BAI_MAGIC: BAI_MAGIC,
        BamFlags: BamFlags
    };
}

},{"./bin":4,"./lh3utils":26,"./spans":40}],2:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// bedwig.js
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var sa = require('./sourceadapters');
    var dalliance_registerParserFactory = sa.registerParserFactory;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
}

function BedWigParser(type) {
    this.type = type;
}

BedWigParser.prototype.createSession = function (sink) {
    if (this.type == 'wig') return new WigParseSession(this, sink);else return new BedParseSession(this, sink);
};

var __KV_REGEXP = /([^=]+)=(.+)/;
var __SPACE_REGEXP = /\s+/;
var BED_COLOR_REGEXP = new RegExp("^[0-9]+,[0-9]+,[0-9]+");

function BedParseSession(parser, sink) {
    this.parser = parser;
    this.sink = sink;
}

BedParseSession.prototype.parse = function (line) {
    var toks = line.split(__SPACE_REGEXP);
    if (toks.length < 3) return;

    var start = parseInt(toks[1]) + 1;
    var end = parseInt(toks[2]);

    var f = { segment: toks[0],
        min: start,
        max: end };

    if (toks.length > 3 && toks[3] !== '.') {
        f.label = toks[3];
    }

    if (toks.length > 4) {
        f.score = parseFloat(toks[4]);
    }

    if (toks.length > 5) {
        f.orientation = toks[5];
    }

    if (toks.length > 8) {
        var color = toks[8];
        if (BED_COLOR_REGEXP.test(color)) {
            f.itemRgb = 'rgb(' + color + ')';
        }
    }

    if (toks.length >= 12) {
        var thickStart = parseInt(toks[6]);
        var thickEnd = parseInt(toks[7]);
        var blockCount = parseInt(toks[9]);
        var blockSizes = toks[10].split(',').map(function (x) {
            return parseInt(x);
        });
        var blockStarts = toks[11].split(',').map(function (x) {
            return parseInt(x);
        });

        // Only handle "block" data if things look reasonably sane.
        if (blockSizes.length == blockStarts.length && blockSizes.length == blockCount) {
            f.type = 'transcript';
            var grp = new DASGroup();
            grp.id = toks[3];
            grp.type = 'transcript';
            grp.notes = [];
            f.groups = [grp];

            if (toks.length > 12) {
                var geneId = toks[12];
                var geneName = geneId;
                if (toks.length > 13) {
                    geneName = toks[13];
                }
                var gg = new DASGroup();
                gg.id = geneId;
                gg.label = geneName;
                gg.type = 'gene';
                f.groups.push(gg);
            }

            var spans = null;
            for (var b = 0; b < blockCount; ++b) {
                var bmin = blockStarts[b] + start;
                var bmax = bmin + blockSizes[b] - 1;
                var span = new Range(bmin, bmax);
                if (spans) {
                    spans = union(spans, span);
                } else {
                    spans = span;
                }
            }

            var tsList = spans.ranges();
            for (var s = 0; s < tsList.length; ++s) {
                var ts = tsList[s];
                var bf = shallowCopy(f);
                bf.min = ts.min();
                bf.max = ts.max();
                this.sink(bf);
            }

            if (thickEnd > thickStart) {
                var codingRegion = f.orientation == '+' ? new Range(thickStart, thickEnd + 3) : new Range(thickStart - 3, thickEnd);
                // +/- 3 to account for stop codon

                var tl = intersection(spans, codingRegion);
                if (tl) {
                    f.type = 'translation';
                    var tlList = tl.ranges();
                    var readingFrame = 0;
                    for (var s = 0; s < tlList.length; ++s) {
                        // Record reading frame for every exon
                        var index = s;
                        if (f.orientation == '-') index = tlList.length - s - 1;
                        var ts = tlList[index];
                        var bf = shallowCopy(f);
                        bf.min = ts.min();
                        bf.max = ts.max();
                        f.readframe = readingFrame;
                        var length = ts.max() - ts.min();
                        readingFrame = (readingFrame + length) % 3;
                        this.sink(bf);
                    }
                }
            }

            return;
        }
    }

    this.sink(f);
};

BedParseSession.prototype.flush = function () {};

function WigParseSession(parser, sink) {
    this.parser = parser;
    this.sink = sink;
    this.wigState = null;
}

WigParseSession.prototype.parse = function (line) {
    var toks = line.split(__SPACE_REGEXP);

    if (toks[0] == 'fixedStep') {
        this.wigState = 'fixedStep';
        this.chr = this.pos = this.step = null;
        this.span = 1;

        for (var ti = 1; ti < toks.length; ++ti) {
            var m = __KV_REGEXP.exec(toks[ti]);
            if (m) {
                if (m[1] == 'chrom') {
                    this.chr = m[2];
                } else if (m[1] == 'start') {
                    this.pos = parseInt(m[2]);
                } else if (m[1] == 'step') {
                    this.step = parseInt(m[2]);
                } else if (m[1] == 'span') {
                    this.span = parseInt(m[2]);
                }
            }
        }
    } else if (toks[0] == 'variableStep') {
        this.wigState = 'variableStep';
        this.chr = null;
        this.span = 1;

        for (var ti = 1; ti < toks.length; ++ti) {
            var m = __KV_REGEXP.exec(toks[ti]);
            if (m[1] == 'chrom') {
                this.chr = m[2];
            } else if (m[1] == 'span') {
                this.span = parseInt(m[2]);
            }
        }
    } else {
        if (!this.wigState) {
            if (toks.length < 4) return;

            var f = { segment: toks[0],
                min: parseInt(toks[1]) + 1,
                max: parseInt(toks[2]),
                score: parseFloat(toks[3]) };

            this.sink(f);
        } else if (this.wigState == 'fixedStep') {
            if (toks.length != 1) return;
            var score = parseFloat(toks[0]);
            var f = { segment: this.chr, min: this.pos, max: this.pos + this.span - 1, score: score };
            this.pos += this.step;
            this.sink(f);
        } else if (this.wigState == 'variableStep') {
            if (toks.length != 2) return;
            var pos = parseInt(toks[0]);
            var score = parseFloat(toks[1]);
            var f = { segment: this.chr, min: pos, max: pos + this.span - 1, score: score };
            this.sink(f);
        }
    }
};

WigParseSession.prototype.flush = function () {};

BedWigParser.prototype.getStyleSheet = function (callback) {
    var thisB = this;
    var stylesheet = new DASStylesheet();

    if (this.type == 'wig') {
        var wigStyle = new DASStyle();
        wigStyle.glyph = 'HISTOGRAM';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
    } else {
        var wigStyle = new DASStyle();
        wigStyle.glyph = 'BOX';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 8;
        wigStyle.BUMP = true;
        wigStyle.LABEL = true;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'default' }, null, wigStyle);

        var wigStyle = new DASStyle();
        wigStyle.glyph = 'BOX';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'red';
        wigStyle.HEIGHT = 10;
        wigStyle.BUMP = true;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'translation' }, null, wigStyle);

        var tsStyle = new DASStyle();
        tsStyle.glyph = 'BOX';
        tsStyle.FGCOLOR = 'black';
        tsStyle.BGCOLOR = 'white';
        tsStyle.HEIGHT = 10;
        tsStyle.ZINDEX = 10;
        tsStyle.BUMP = true;
        tsStyle.LABEL = true;
        stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

        var densStyle = new DASStyle();
        densStyle.glyph = 'HISTOGRAM';
        densStyle.COLOR1 = 'white';
        densStyle.COLOR2 = 'black';
        densStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'density' }, null, densStyle);
    }

    return callback(stylesheet);
};

dalliance_registerParserFactory('bed', function (t) {
    return new BedWigParser(t);
});
dalliance_registerParserFactory('wig', function (t) {
    return new BedWigParser(t);
});

},{"./das":10,"./sourceadapters":38,"./spans":40,"./utils":55}],3:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// bigwig.js: indexed binary WIG (and BED) files
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var das = require('./das');
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var bin = require('./bin');
    var readInt = bin.readInt;

    var jszlib = require('jszlib');
    var jszlib_inflate_buffer = jszlib.inflateBuffer;
    var arrayCopy = jszlib.arrayCopy;
}

var BIG_WIG_MAGIC = 0x888FFC26;
var BIG_WIG_MAGIC_BE = 0x26FC8F88;
var BIG_BED_MAGIC = 0x8789F2EB;
var BIG_BED_MAGIC_BE = 0xEBF28987;

var BIG_WIG_TYPE_GRAPH = 1;
var BIG_WIG_TYPE_VSTEP = 2;
var BIG_WIG_TYPE_FSTEP = 3;

var M1 = 256;
var M2 = 256 * 256;
var M3 = 256 * 256 * 256;
var M4 = 256 * 256 * 256 * 256;

var BED_COLOR_REGEXP = new RegExp("^[0-9]+,[0-9]+,[0-9]+");

function bwg_readOffset(ba, o) {
    var offset = ba[o] + ba[o + 1] * M1 + ba[o + 2] * M2 + ba[o + 3] * M3 + ba[o + 4] * M4;
    return offset;
}

function BigWig() {}

BigWig.prototype.readChromTree = function (callback) {
    var thisB = this;
    this.chromsToIDs = {};
    this.idsToChroms = {};
    this.maxID = 0;

    var udo = this.unzoomedDataOffset;
    var eb = udo - this.chromTreeOffset & 3;
    udo = udo + 4 - eb;

    this.data.slice(this.chromTreeOffset, udo - this.chromTreeOffset).fetch(function (bpt) {
        var ba = new Uint8Array(bpt);
        var sa = new Int16Array(bpt);
        var la = new Int32Array(bpt);
        var bptMagic = la[0];
        var blockSize = la[1];
        var keySize = la[2];
        var valSize = la[3];
        var itemCount = bwg_readOffset(ba, 16);
        var rootNodeOffset = 32;

        var bptReadNode = function bptReadNode(offset) {
            var nodeType = ba[offset];
            var cnt = sa[offset / 2 + 1];
            offset += 4;
            for (var n = 0; n < cnt; ++n) {
                if (nodeType == 0) {
                    offset += keySize;
                    var childOffset = bwg_readOffset(ba, offset);
                    offset += 8;
                    childOffset -= thisB.chromTreeOffset;
                    bptReadNode(childOffset);
                } else {
                    var key = '';
                    for (var ki = 0; ki < keySize; ++ki) {
                        var charCode = ba[offset++];
                        if (charCode != 0) {
                            key += String.fromCharCode(charCode);
                        }
                    }
                    var chromId = ba[offset + 3] << 24 | ba[offset + 2] << 16 | ba[offset + 1] << 8 | ba[offset + 0];
                    var chromSize = ba[offset + 7] << 24 | ba[offset + 6] << 16 | ba[offset + 5] << 8 | ba[offset + 4];
                    offset += 8;

                    thisB.chromsToIDs[key] = chromId;
                    if (key.indexOf('chr') == 0) {
                        thisB.chromsToIDs[key.substr(3)] = chromId;
                    }
                    thisB.idsToChroms[chromId] = key;
                    thisB.maxID = Math.max(thisB.maxID, chromId);
                }
            }
        };
        bptReadNode(rootNodeOffset);

        callback(thisB);
    });
};

function BigWigView(bwg, cirTreeOffset, cirTreeLength, isSummary) {
    this.bwg = bwg;
    this.cirTreeOffset = cirTreeOffset;
    this.cirTreeLength = cirTreeLength;
    this.isSummary = isSummary;
}

BigWigView.prototype.readWigData = function (chrName, min, max, callback) {
    var chr = this.bwg.chromsToIDs[chrName];
    if (chr === undefined) {
        // Not an error because some .bwgs won't have data for all chromosomes.
        return callback([]);
    } else {
        this.readWigDataById(chr, min, max, callback);
    }
};

BigWigView.prototype.readWigDataById = function (chr, min, max, callback) {
    var thisB = this;
    if (!this.cirHeader) {
        this.bwg.data.slice(this.cirTreeOffset, 48).fetch(function (result) {
            thisB.cirHeader = result;
            var la = new Int32Array(thisB.cirHeader);
            thisB.cirBlockSize = la[1];
            thisB.readWigDataById(chr, min, max, callback);
        });
        return;
    }

    var blocksToFetch = [];
    var outstanding = 0;

    var beforeBWG = Date.now();

    var filter = function filter(chromId, fmin, fmax, toks) {
        return (chr < 0 || chromId == chr) && fmin <= max && fmax >= min;
    };

    var cirFobRecur = function cirFobRecur(offset, level) {
        if (thisB.bwg.instrument) console.log('level=' + level + '; offset=' + offset + '; time=' + (Date.now() | 0));

        outstanding += offset.length;

        if (offset.length == 1 && offset[0] - thisB.cirTreeOffset == 48 && thisB.cachedCirRoot) {
            cirFobRecur2(thisB.cachedCirRoot, 0, level);
            --outstanding;
            if (outstanding == 0) {
                thisB.fetchFeatures(filter, blocksToFetch, callback);
            }
            return;
        }

        var maxCirBlockSpan = 4 + thisB.cirBlockSize * 32; // Upper bound on size, based on a completely full leaf node.
        var spans;
        for (var i = 0; i < offset.length; ++i) {
            var blockSpan = new Range(offset[i], offset[i] + maxCirBlockSpan);
            spans = spans ? union(spans, blockSpan) : blockSpan;
        }

        var fetchRanges = spans.ranges();
        for (var r = 0; r < fetchRanges.length; ++r) {
            var fr = fetchRanges[r];
            cirFobStartFetch(offset, fr, level);
        }
    };

    var cirFobStartFetch = function cirFobStartFetch(offset, fr, level, attempts) {
        var length = fr.max() - fr.min();
        thisB.bwg.data.slice(fr.min(), fr.max() - fr.min()).fetch(function (resultBuffer) {
            for (var i = 0; i < offset.length; ++i) {
                if (fr.contains(offset[i])) {
                    cirFobRecur2(resultBuffer, offset[i] - fr.min(), level);

                    if (offset[i] - thisB.cirTreeOffset == 48 && offset[i] - fr.min() == 0) thisB.cachedCirRoot = resultBuffer;

                    --outstanding;
                    if (outstanding == 0) {
                        thisB.fetchFeatures(filter, blocksToFetch, callback);
                    }
                }
            }
        });
    };

    var cirFobRecur2 = function cirFobRecur2(cirBlockData, offset, level) {
        var ba = new Uint8Array(cirBlockData);
        var sa = new Int16Array(cirBlockData);
        var la = new Int32Array(cirBlockData);

        var isLeaf = ba[offset];
        var cnt = sa[offset / 2 + 1];
        offset += 4;

        if (isLeaf != 0) {
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = bwg_readOffset(ba, offset + 16);
                var blockSize = bwg_readOffset(ba, offset + 24);
                if ((chr < 0 || startChrom < chr || startChrom == chr && startBase <= max) && (chr < 0 || endChrom > chr || endChrom == chr && endBase >= min)) {
                    blocksToFetch.push({ offset: blockOffset, size: blockSize });
                }
                offset += 32;
            }
        } else {
            var recurOffsets = [];
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = bwg_readOffset(ba, offset + 16);
                if ((chr < 0 || startChrom < chr || startChrom == chr && startBase <= max) && (chr < 0 || endChrom > chr || endChrom == chr && endBase >= min)) {
                    recurOffsets.push(blockOffset);
                }
                offset += 24;
            }
            if (recurOffsets.length > 0) {
                cirFobRecur(recurOffsets, level + 1);
            }
        }
    };

    cirFobRecur([thisB.cirTreeOffset + 48], 1);
};

BigWigView.prototype.fetchFeatures = function (filter, blocksToFetch, callback) {
    var thisB = this;

    blocksToFetch.sort(function (b0, b1) {
        return (b0.offset | 0) - (b1.offset | 0);
    });

    if (blocksToFetch.length == 0) {
        callback([]);
    } else {
        var features = [];
        var createFeature = function createFeature(chr, fmin, fmax, opts) {
            if (!opts) {
                opts = {};
            }

            var f = new DASFeature();
            f._chromId = chr;
            f.segment = thisB.bwg.idsToChroms[chr];
            f.min = fmin;
            f.max = fmax;
            f.type = thisB.bwg.type;

            for (var k in opts) {
                f[k] = opts[k];
            }

            features.push(f);
        };

        var tramp = function tramp() {
            if (blocksToFetch.length == 0) {
                var afterBWG = Date.now();
                // dlog('BWG fetch took ' + (afterBWG - beforeBWG) + 'ms');
                callback(features);
                return; // just in case...
            } else {
                var block = blocksToFetch[0];
                if (block.data) {
                    thisB.parseFeatures(block.data, createFeature, filter);
                    blocksToFetch.splice(0, 1);
                    tramp();
                } else {
                    var fetchStart = block.offset;
                    var fetchSize = block.size;
                    var bi = 1;
                    while (bi < blocksToFetch.length && blocksToFetch[bi].offset == fetchStart + fetchSize) {
                        fetchSize += blocksToFetch[bi].size;
                        ++bi;
                    }

                    thisB.bwg.data.slice(fetchStart, fetchSize).fetch(function (result) {
                        var offset = 0;
                        var bi = 0;
                        while (offset < fetchSize) {
                            var fb = blocksToFetch[bi];

                            var data;
                            if (thisB.bwg.uncompressBufSize > 0) {
                                data = jszlib_inflate_buffer(result, offset + 2, fb.size - 2);
                            } else {
                                var tmp = new Uint8Array(fb.size); // FIXME is this really the best we can do?
                                arrayCopy(new Uint8Array(result, offset, fb.size), 0, tmp, 0, fb.size);
                                data = tmp.buffer;
                            }
                            fb.data = data;

                            offset += fb.size;
                            ++bi;
                        }
                        tramp();
                    });
                }
            }
        };
        tramp();
    }
};

BigWigView.prototype.parseFeatures = function (data, createFeature, filter) {
    var ba = new Uint8Array(data);

    if (this.isSummary) {
        var sa = new Int16Array(data);
        var la = new Int32Array(data);
        var fa = new Float32Array(data);

        var itemCount = data.byteLength / 32;
        for (var i = 0; i < itemCount; ++i) {
            var chromId = la[i * 8];
            var start = la[i * 8 + 1];
            var end = la[i * 8 + 2];
            var validCnt = la[i * 8 + 3];
            var minVal = fa[i * 8 + 4];
            var maxVal = fa[i * 8 + 5];
            var sumData = fa[i * 8 + 6];
            var sumSqData = fa[i * 8 + 7];

            if (filter(chromId, start + 1, end)) {
                var summaryOpts = { type: 'bigwig', score: sumData / validCnt, maxScore: maxVal };
                if (this.bwg.type == 'bigbed') {
                    summaryOpts.type = 'density';
                }
                createFeature(chromId, start + 1, end, summaryOpts);
            }
        }
    } else if (this.bwg.type == 'bigwig') {
        var sa = new Int16Array(data);
        var la = new Int32Array(data);
        var fa = new Float32Array(data);

        var chromId = la[0];
        var blockStart = la[1];
        var blockEnd = la[2];
        var itemStep = la[3];
        var itemSpan = la[4];
        var blockType = ba[20];
        var itemCount = sa[11];

        if (blockType == BIG_WIG_TYPE_FSTEP) {
            for (var i = 0; i < itemCount; ++i) {
                var score = fa[i + 6];
                var fmin = blockStart + i * itemStep + 1,
                    fmax = blockStart + i * itemStep + itemSpan;
                if (filter(chromId, fmin, fmax)) createFeature(chromId, fmin, fmax, { score: score });
            }
        } else if (blockType == BIG_WIG_TYPE_VSTEP) {
            for (var i = 0; i < itemCount; ++i) {
                var start = la[i * 2 + 6] + 1;
                var end = start + itemSpan - 1;
                var score = fa[i * 2 + 7];
                if (filter(chromId, start, end)) createFeature(chromId, start, end, { score: score });
            }
        } else if (blockType == BIG_WIG_TYPE_GRAPH) {
            for (var i = 0; i < itemCount; ++i) {
                var start = la[i * 3 + 6] + 1;
                var end = la[i * 3 + 7];
                var score = fa[i * 3 + 8];
                if (start > end) {
                    start = end;
                }
                if (filter(chromId, start, end)) createFeature(chromId, start, end, { score: score });
            }
        } else {
            console.log('Currently not handling bwgType=' + blockType);
        }
    } else if (this.bwg.type == 'bigbed') {
        var offset = 0;
        var dfc = this.bwg.definedFieldCount;
        var schema = this.bwg.schema;

        while (offset < ba.length) {
            var chromId = ba[offset + 3] << 24 | ba[offset + 2] << 16 | ba[offset + 1] << 8 | ba[offset + 0];
            var start = ba[offset + 7] << 24 | ba[offset + 6] << 16 | ba[offset + 5] << 8 | ba[offset + 4];
            var end = ba[offset + 11] << 24 | ba[offset + 10] << 16 | ba[offset + 9] << 8 | ba[offset + 8];
            offset += 12;
            var rest = '';
            while (true) {
                var ch = ba[offset++];
                if (ch != 0) {
                    rest += String.fromCharCode(ch);
                } else {
                    break;
                }
            }

            var featureOpts = {};

            var bedColumns;
            if (rest.length > 0) {
                bedColumns = rest.split('\t');
            } else {
                bedColumns = [];
            }
            if (bedColumns.length > 0 && dfc > 3) {
                featureOpts.label = bedColumns[0];
            }
            if (bedColumns.length > 1 && dfc > 4) {
                var score = parseInt(bedColumns[1]);
                if (!isNaN(score)) featureOpts.score = score;
            }
            if (bedColumns.length > 2 && dfc > 5) {
                featureOpts.orientation = bedColumns[2];
            }
            if (bedColumns.length > 5 && dfc > 8) {
                var color = bedColumns[5];
                if (BED_COLOR_REGEXP.test(color)) {
                    featureOpts.itemRgb = 'rgb(' + color + ')';
                }
            }

            if (bedColumns.length > dfc - 3 && schema) {
                for (var col = dfc - 3; col < bedColumns.length; ++col) {
                    featureOpts[schema.fields[col + 3].name] = bedColumns[col];
                }
            }

            if (filter(chromId, start + 1, end, bedColumns)) {
                if (dfc < 12) {
                    createFeature(chromId, start + 1, end, featureOpts);
                } else {
                    var thickStart = bedColumns[3] | 0;
                    var thickEnd = bedColumns[4] | 0;
                    var blockCount = bedColumns[6] | 0;
                    var blockSizes = bedColumns[7].split(',');
                    var blockStarts = bedColumns[8].split(',');

                    if (featureOpts.exonFrames) {
                        var exonFrames = featureOpts.exonFrames.split(',');
                        featureOpts.exonFrames = undefined;
                    }

                    featureOpts.type = 'transcript';
                    var grp = new DASGroup();
                    for (var k in featureOpts) {
                        grp[k] = featureOpts[k];
                    }
                    grp.id = bedColumns[0];
                    grp.segment = this.bwg.idsToChroms[chromId];
                    grp.min = start + 1;
                    grp.max = end;
                    grp.notes = [];
                    featureOpts.groups = [grp];

                    // Moving towards using bigGenePred model, but will
                    // still support old Dalliance-style BED12+gene-name for the
                    // foreseeable future.
                    if (bedColumns.length > 9) {
                        var geneId = featureOpts.geneName || bedColumns[9];
                        var geneName = geneId;
                        if (bedColumns.length > 10) {
                            geneName = bedColumns[10];
                        }
                        if (featureOpts.geneName2) geneName = featureOpts.geneName2;

                        var gg = shallowCopy(grp);
                        gg.id = geneId;
                        gg.label = geneName;
                        gg.type = 'gene';
                        featureOpts.groups.push(gg);
                    }

                    var spanList = [];
                    for (var b = 0; b < blockCount; ++b) {
                        var bmin = (blockStarts[b] | 0) + start;
                        var bmax = bmin + (blockSizes[b] | 0);
                        var span = new Range(bmin, bmax);
                        spanList.push(span);
                    }
                    var spans = union(spanList);

                    var tsList = spans.ranges();
                    for (var s = 0; s < tsList.length; ++s) {
                        var ts = tsList[s];
                        createFeature(chromId, ts.min() + 1, ts.max(), featureOpts);
                    }

                    if (thickEnd > thickStart) {
                        var codingRegion = featureOpts.orientation == '+' ? new Range(thickStart, thickEnd + 3) : new Range(thickStart - 3, thickEnd);
                        // +/- 3 to account for stop codon

                        var tl = intersection(spans, codingRegion);
                        if (tl) {
                            featureOpts.type = 'translation';
                            var tlList = tl.ranges();
                            var readingFrame = 0;

                            var tlOffset = 0;
                            while (tlList[0].min() > tsList[tlOffset].max()) {
                                tlOffset++;
                            }for (var s = 0; s < tlList.length; ++s) {
                                // Record reading frame for every exon
                                var index = s;
                                if (featureOpts.orientation == '-') index = tlList.length - s - 1;
                                var ts = tlList[index];
                                featureOpts.readframe = readingFrame;
                                if (exonFrames) {
                                    var brf = parseInt(exonFrames[index + tlOffset]);
                                    if (typeof brf === 'number' && brf >= 0 && brf <= 2) {
                                        featureOpts.readframe = brf;
                                        featureOpts.readframeExplicit = true;
                                    }
                                }
                                var length = ts.max() - ts.min();
                                readingFrame = (readingFrame + length) % 3;
                                createFeature(chromId, ts.min() + 1, ts.max(), featureOpts);
                            }
                        }
                    }
                }
            }
        }
    } else {
        throw Error("Don't know what to do with " + this.bwg.type);
    }
};

//
// nasty cut/paste, should roll back in!
//

BigWigView.prototype.getFirstAdjacent = function (chrName, pos, dir, callback) {
    var chr = this.bwg.chromsToIDs[chrName];
    if (chr === undefined) {
        // Not an error because some .bwgs won't have data for all chromosomes.
        return callback([]);
    } else {
        this.getFirstAdjacentById(chr, pos, dir, callback);
    }
};

BigWigView.prototype.getFirstAdjacentById = function (chr, pos, dir, callback) {
    var thisB = this;
    if (!this.cirHeader) {
        this.bwg.data.slice(this.cirTreeOffset, 48).fetch(function (result) {
            thisB.cirHeader = result;
            var la = new Int32Array(thisB.cirHeader);
            thisB.cirBlockSize = la[1];
            thisB.getFirstAdjacentById(chr, pos, dir, callback);
        });
        return;
    }

    var blockToFetch = null;
    var bestBlockChr = -1;
    var bestBlockOffset = -1;

    var outstanding = 0;

    var beforeBWG = Date.now();

    var cirFobRecur = function cirFobRecur(offset, level) {
        outstanding += offset.length;

        var maxCirBlockSpan = 4 + thisB.cirBlockSize * 32; // Upper bound on size, based on a completely full leaf node.
        var spans;
        for (var i = 0; i < offset.length; ++i) {
            var blockSpan = new Range(offset[i], offset[i] + maxCirBlockSpan);
            spans = spans ? union(spans, blockSpan) : blockSpan;
        }

        var fetchRanges = spans.ranges();
        for (var r = 0; r < fetchRanges.length; ++r) {
            var fr = fetchRanges[r];
            cirFobStartFetch(offset, fr, level);
        }
    };

    var cirFobStartFetch = function cirFobStartFetch(offset, fr, level, attempts) {
        var length = fr.max() - fr.min();
        thisB.bwg.data.slice(fr.min(), fr.max() - fr.min()).fetch(function (resultBuffer) {
            for (var i = 0; i < offset.length; ++i) {
                if (fr.contains(offset[i])) {
                    cirFobRecur2(resultBuffer, offset[i] - fr.min(), level);
                    --outstanding;
                    if (outstanding == 0) {
                        if (!blockToFetch) {
                            if (dir > 0 && (chr != 0 || pos > 0)) {
                                return thisB.getFirstAdjacentById(0, 0, dir, callback);
                            } else if (dir < 0 && (chr != thisB.bwg.maxID || pos < 1000000000)) {
                                return thisB.getFirstAdjacentById(thisB.bwg.maxID, 1000000000, dir, callback);
                            }
                            return callback([]);
                        }

                        thisB.fetchFeatures(function (chrx, fmin, fmax, toks) {
                            return dir < 0 && (chrx < chr || fmax < pos) || dir > 0 && (chrx > chr || fmin > pos);
                        }, [blockToFetch], function (features) {
                            var bestFeature = null;
                            var bestChr = -1;
                            var bestPos = -1;
                            for (var fi = 0; fi < features.length; ++fi) {
                                var f = features[fi];
                                var chrx = f._chromId,
                                    fmin = f.min,
                                    fmax = f.max;
                                if (bestFeature == null || dir < 0 && (chrx > bestChr || fmax > bestPos) || dir > 0 && (chrx < bestChr || fmin < bestPos)) {
                                    bestFeature = f;
                                    bestPos = dir < 0 ? fmax : fmin;
                                    bestChr = chrx;
                                }
                            }

                            if (bestFeature != null) return callback([bestFeature]);else return callback([]);
                        });
                    }
                }
            }
        });
    };

    var cirFobRecur2 = function cirFobRecur2(cirBlockData, offset, level) {
        var ba = new Uint8Array(cirBlockData);
        var sa = new Int16Array(cirBlockData);
        var la = new Int32Array(cirBlockData);

        var isLeaf = ba[offset];
        var cnt = sa[offset / 2 + 1];
        offset += 4;

        if (isLeaf != 0) {
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = bwg_readOffset(ba, offset + 16);
                var blockSize = bwg_readOffset(ba, offset + 24);
                if (dir < 0 && (startChrom < chr || startChrom == chr && startBase <= pos) || dir > 0 && (endChrom > chr || endChrom == chr && endBase >= pos)) {
                    // console.log('Got an interesting block: startBase=' + startChrom + ':' + startBase + '; endBase=' + endChrom + ':' + endBase + '; offset=' + blockOffset + '; size=' + blockSize);
                    if (/_random/.exec(thisB.bwg.idsToChroms[startChrom])) {
                        // dlog('skipping random: ' + thisB.bwg.idsToChroms[startChrom]);
                    } else if (blockToFetch == null || dir < 0 && (endChrom > bestBlockChr || endChrom == bestBlockChr && endBase > bestBlockOffset) || dir > 0 && (startChrom < bestBlockChr || startChrom == bestBlockChr && startBase < bestBlockOffset)) {
                        //                        dlog('best is: startBase=' + startChrom + ':' + startBase + '; endBase=' + endChrom + ':' + endBase + '; offset=' + blockOffset + '; size=' + blockSize);
                        blockToFetch = { offset: blockOffset, size: blockSize };
                        bestBlockOffset = dir < 0 ? endBase : startBase;
                        bestBlockChr = dir < 0 ? endChrom : startChrom;
                    }
                }
                offset += 32;
            }
        } else {
            var bestRecur = -1;
            var bestPos = -1;
            var bestChr = -1;
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = la[lo + 4] << 32 | la[lo + 5];
                if (dir < 0 && (startChrom < chr || startChrom == chr && startBase <= pos) && endChrom >= chr || dir > 0 && (endChrom > chr || endChrom == chr && endBase >= pos) && startChrom <= chr) {
                    if (bestRecur < 0 || endBase > bestPos) {
                        bestRecur = blockOffset;
                        bestPos = dir < 0 ? endBase : startBase;
                        bestChr = dir < 0 ? endChrom : startChrom;
                    }
                }
                offset += 24;
            }
            if (bestRecur >= 0) {
                cirFobRecur([bestRecur], level + 1);
            }
        }
    };

    cirFobRecur([thisB.cirTreeOffset + 48], 1);
};

BigWig.prototype.readWigData = function (chrName, min, max, callback) {
    this.getUnzoomedView().readWigData(chrName, min, max, callback);
};

BigWig.prototype.getUnzoomedView = function () {
    if (!this.unzoomedView) {
        var cirLen = 4000;
        var nzl = this.zoomLevels[0];
        if (nzl) {
            cirLen = this.zoomLevels[0].dataOffset - this.unzoomedIndexOffset;
        }
        this.unzoomedView = new BigWigView(this, this.unzoomedIndexOffset, cirLen, false);
    }
    return this.unzoomedView;
};

BigWig.prototype.getZoomedView = function (z) {
    var zh = this.zoomLevels[z];
    if (!zh.view) {
        zh.view = new BigWigView(this, zh.indexOffset, /* this.zoomLevels[z + 1].dataOffset - zh.indexOffset */4000, true);
    }
    return zh.view;
};

function makeBwg(data, callback, name) {
    var bwg = new BigWig();
    bwg.data = data;
    bwg.name = name;
    bwg.data.slice(0, 512).salted().fetch(function (result) {
        if (!result) {
            return callback(null, "Couldn't fetch file");
        }

        var header = result;
        var ba = new Uint8Array(header);
        var sa = new Int16Array(header);
        var la = new Int32Array(header);
        var magic = ba[0] + M1 * ba[1] + M2 * ba[2] + M3 * ba[3];
        if (magic == BIG_WIG_MAGIC) {
            bwg.type = 'bigwig';
        } else if (magic == BIG_BED_MAGIC) {
            bwg.type = 'bigbed';
        } else if (magic == BIG_WIG_MAGIC_BE || magic == BIG_BED_MAGIC_BE) {
            return callback(null, "Currently don't support big-endian BBI files");
        } else {
            return callback(null, "Not a supported format, magic=0x" + magic.toString(16));
        }

        bwg.version = sa[2]; // 4
        bwg.numZoomLevels = sa[3]; // 6
        bwg.chromTreeOffset = bwg_readOffset(ba, 8);
        bwg.unzoomedDataOffset = bwg_readOffset(ba, 16);
        bwg.unzoomedIndexOffset = bwg_readOffset(ba, 24);
        bwg.fieldCount = sa[16]; // 32
        bwg.definedFieldCount = sa[17]; // 34
        bwg.asOffset = bwg_readOffset(ba, 36);
        bwg.totalSummaryOffset = bwg_readOffset(ba, 44);
        bwg.uncompressBufSize = la[13]; // 52
        bwg.extHeaderOffset = bwg_readOffset(ba, 56);

        bwg.zoomLevels = [];
        for (var zl = 0; zl < bwg.numZoomLevels; ++zl) {
            var zlReduction = la[zl * 6 + 16];
            var zlData = bwg_readOffset(ba, zl * 24 + 72);
            var zlIndex = bwg_readOffset(ba, zl * 24 + 80);
            bwg.zoomLevels.push({ reduction: zlReduction, dataOffset: zlData, indexOffset: zlIndex });
        }

        bwg.readChromTree(function () {
            bwg.getAutoSQL(function (as) {
                bwg.schema = as;
                return callback(bwg);
            });
        });
    }, { timeout: 5000 }); // Potential timeout on first request to catch mixed-content errors on
    // Chromium.
}

BigWig.prototype._tsFetch = function (zoom, chr, min, max, callback) {
    var bwg = this;
    if (zoom >= this.zoomLevels.length - 1) {
        if (!this.topLevelReductionCache) {
            this.getZoomedView(this.zoomLevels.length - 1).readWigDataById(-1, 0, 300000000, function (feats) {
                bwg.topLevelReductionCache = feats;
                return bwg._tsFetch(zoom, chr, min, max, callback);
            });
        } else {
            var f = [];
            var c = this.topLevelReductionCache;
            for (var fi = 0; fi < c.length; ++fi) {
                if (c[fi]._chromId == chr) {
                    f.push(c[fi]);
                }
            }
            return callback(f);
        }
    } else {
        var view;
        if (zoom < 0) {
            view = this.getUnzoomedView();
        } else {
            view = this.getZoomedView(zoom);
        }
        return view.readWigDataById(chr, min, max, callback);
    }
};

BigWig.prototype.thresholdSearch = function (chrName, referencePoint, dir, threshold, callback) {
    dir = dir < 0 ? -1 : 1;
    var bwg = this;
    var initialChr = this.chromsToIDs[chrName];
    var candidates = [{ chrOrd: 0, chr: initialChr, zoom: bwg.zoomLevels.length - 4, min: 0, max: 300000000, fromRef: true }];
    for (var i = 1; i <= this.maxID + 1; ++i) {
        var chrId = (initialChr + dir * i) % (this.maxID + 1);
        if (chrId < 0) chrId += this.maxID + 1;
        candidates.push({ chrOrd: i, chr: chrId, zoom: bwg.zoomLevels.length - 1, min: 0, max: 300000000 });
    }

    function fbThresholdSearchRecur() {
        if (candidates.length == 0) {
            return callback(null);
        }
        candidates.sort(function (c1, c2) {
            var d = c1.zoom - c2.zoom;
            if (d != 0) return d;

            d = c1.chrOrd - c2.chrOrd;
            if (d != 0) return d;else return c1.min - c2.min * dir;
        });

        var candidate = candidates.splice(0, 1)[0];
        bwg._tsFetch(candidate.zoom, candidate.chr, candidate.min, candidate.max, function (feats) {
            var rp = dir > 0 ? 0 : 300000000;
            if (candidate.fromRef) rp = referencePoint;

            for (var fi = 0; fi < feats.length; ++fi) {
                var f = feats[fi];
                var score;
                if (f.maxScore != undefined) score = f.maxScore;else score = f.score;

                if (dir > 0) {
                    if (score > threshold) {
                        if (candidate.zoom < 0) {
                            if (f.min > rp) return callback(f);
                        } else if (f.max > rp) {
                            candidates.push({ chr: candidate.chr, chrOrd: candidate.chrOrd, zoom: candidate.zoom - 2, min: f.min, max: f.max, fromRef: candidate.fromRef });
                        }
                    }
                } else {
                    if (score > threshold) {
                        if (candidate.zoom < 0) {
                            if (f.max < rp) return callback(f);
                        } else if (f.min < rp) {
                            candidates.push({ chr: candidate.chr, chrOrd: candidate.chrOrd, zoom: candidate.zoom - 2, min: f.min, max: f.max, fromRef: candidate.fromRef });
                        }
                    }
                }
            }
            fbThresholdSearchRecur();
        });
    }

    fbThresholdSearchRecur();
};

BigWig.prototype.getAutoSQL = function (callback) {
    var thisB = this;
    if (!this.asOffset) return callback(null);

    this.data.slice(this.asOffset, 2048).fetch(function (result) {
        var ba = new Uint8Array(result);
        var s = '';
        for (var i = 0; i < ba.length; ++i) {
            if (ba[i] == 0) break;
            s += String.fromCharCode(ba[i]);
        }

        /* 
         * Quick'n'dirty attempt to parse autoSql format.
         * See: http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/059/5949/5949l2.html
         */

        var header_re = /(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/;
        var field_re = /([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g;

        var headerMatch = header_re.exec(s);
        if (headerMatch) {
            var as = {
                declType: headerMatch[1],
                name: headerMatch[2],
                comment: headerMatch[4],

                fields: []
            };

            s = s.substring(headerMatch[0]);
            for (var m = field_re.exec(s); m != null; m = field_re.exec(s)) {
                as.fields.push({ type: m[1],
                    name: m[2],
                    comment: m[4] });
            }

            return callback(as);
        }
    });
};

BigWig.prototype.getExtraIndices = function (callback) {
    var thisB = this;
    if (this.version < 4 || this.extHeaderOffset == 0 || this.type != 'bigbed') {
        return callback(null);
    } else {
        this.data.slice(this.extHeaderOffset, 64).fetch(function (result) {
            if (!result) {
                return callback(null, "Couldn't fetch extension header");
            }

            var ba = new Uint8Array(result);
            var sa = new Int16Array(result);
            var la = new Int32Array(result);

            var extHeaderSize = sa[0];
            var extraIndexCount = sa[1];
            var extraIndexListOffset = bwg_readOffset(ba, 4);

            if (extraIndexCount == 0) {
                return callback(null);
            }

            // FIXME 20byte records only make sense for single-field indices.
            // Right now, these seem to be the only things around, but the format
            // is actually more general.
            thisB.data.slice(extraIndexListOffset, extraIndexCount * 20).fetch(function (eil) {
                if (!eil) {
                    return callback(null, "Couldn't fetch index info");
                }

                var ba = new Uint8Array(eil);
                var sa = new Int16Array(eil);
                var la = new Int32Array(eil);

                var indices = [];
                for (var ii = 0; ii < extraIndexCount; ++ii) {
                    var eiType = sa[ii * 10];
                    var eiFieldCount = sa[ii * 10 + 1];
                    var eiOffset = bwg_readOffset(ba, ii * 20 + 4);
                    var eiField = sa[ii * 10 + 8];
                    var index = new BBIExtraIndex(thisB, eiType, eiFieldCount, eiOffset, eiField);
                    indices.push(index);
                }
                callback(indices);
            });
        });
    }
};

function BBIExtraIndex(bbi, type, fieldCount, offset, field) {
    this.bbi = bbi;
    this.type = type;
    this.fieldCount = fieldCount;
    this.offset = offset;
    this.field = field;
}

BBIExtraIndex.prototype.lookup = function (name, callback) {
    var thisB = this;

    this.bbi.data.slice(this.offset, 32).fetch(function (bpt) {
        var ba = new Uint8Array(bpt);
        var sa = new Int16Array(bpt);
        var la = new Int32Array(bpt);
        var bptMagic = la[0];
        var blockSize = la[1];
        var keySize = la[2];
        var valSize = la[3];
        var itemCount = bwg_readOffset(ba, 16);
        var rootNodeOffset = 32;

        function bptReadNode(nodeOffset) {
            thisB.bbi.data.slice(nodeOffset, 4 + blockSize * (keySize + valSize)).fetch(function (node) {
                var ba = new Uint8Array(node);
                var sa = new Uint16Array(node);
                var la = new Uint32Array(node);

                var nodeType = ba[0];
                var cnt = sa[1];

                var offset = 4;
                if (nodeType == 0) {
                    var lastChildOffset = null;
                    for (var n = 0; n < cnt; ++n) {
                        var key = '';
                        for (var ki = 0; ki < keySize; ++ki) {
                            var charCode = ba[offset++];
                            if (charCode != 0) {
                                key += String.fromCharCode(charCode);
                            }
                        }

                        var childOffset = bwg_readOffset(ba, offset);
                        offset += 8;

                        if (name.localeCompare(key) < 0 && lastChildOffset) {
                            bptReadNode(lastChildOffset);
                            return;
                        }
                        lastChildOffset = childOffset;
                    }
                    bptReadNode(lastChildOffset);
                } else {
                    for (var n = 0; n < cnt; ++n) {
                        var key = '';
                        for (var ki = 0; ki < keySize; ++ki) {
                            var charCode = ba[offset++];
                            if (charCode != 0) {
                                key += String.fromCharCode(charCode);
                            }
                        }

                        // Specific for EI case.
                        if (key == name) {
                            var start = bwg_readOffset(ba, offset);
                            var length = readInt(ba, offset + 8);

                            return thisB.bbi.getUnzoomedView().fetchFeatures(function (chr, min, max, toks) {
                                if (toks && toks.length > thisB.field - 3) return toks[thisB.field - 3] == name;
                            }, [{ offset: start, size: length }], callback);
                        }
                        offset += valSize;
                    }
                    return callback([]);
                }
            });
        }

        bptReadNode(thisB.offset + rootNodeOffset);
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        makeBwg: makeBwg,
        BIG_BED_MAGIC: BIG_BED_MAGIC,
        BIG_WIG_MAGIC: BIG_WIG_MAGIC
    };
}

},{"./bin":4,"./das":10,"./spans":40,"./utils":55,"jszlib":60}],4:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// bin.js general binary data support
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var sha1 = require('./sha1');
    var b64_sha1 = sha1.b64_sha1;

    var Promise = require('es6-promise').Promise;
}

function BlobFetchable(b) {
    this.blob = b;
}

BlobFetchable.prototype.slice = function (start, length) {
    var b;

    if (this.blob.slice) {
        if (length) {
            b = this.blob.slice(start, start + length);
        } else {
            b = this.blob.slice(start);
        }
    } else {
        if (length) {
            b = this.blob.webkitSlice(start, start + length);
        } else {
            b = this.blob.webkitSlice(start);
        }
    }
    return new BlobFetchable(b);
};

BlobFetchable.prototype.salted = function () {
    return this;
};

if (typeof FileReader !== 'undefined') {
    // console.log('defining async BlobFetchable.fetch');

    BlobFetchable.prototype.fetch = function (callback) {
        var reader = new FileReader();
        reader.onloadend = function (ev) {
            callback(bstringToBuffer(reader.result));
        };
        reader.readAsBinaryString(this.blob);
    };
} else {
    // if (console && console.log)
    //    console.log('defining sync BlobFetchable.fetch');

    BlobFetchable.prototype.fetch = function (callback) {
        var reader = new FileReaderSync();
        try {
            var res = reader.readAsArrayBuffer(this.blob);
            callback(res);
        } catch (e) {
            callback(null, e);
        }
    };
}

function URLFetchable(url, start, end, opts) {
    if (!opts) {
        if ((typeof start === 'undefined' ? 'undefined' : _typeof(start)) === 'object') {
            opts = start;
            start = undefined;
        } else {
            opts = {};
        }
    }

    this.url = url;
    this.start = start || 0;
    if (end) {
        this.end = end;
    }
    this.opts = opts;
}

URLFetchable.prototype.slice = function (s, l) {
    if (s < 0) {
        throw 'Bad slice ' + s;
    }

    var ns = this.start,
        ne = this.end;
    if (ns && s) {
        ns = ns + s;
    } else {
        ns = s || ns;
    }
    if (l && ns) {
        ne = ns + l - 1;
    } else {
        ne = ne || l - 1;
    }
    return new URLFetchable(this.url, ns, ne, this.opts);
};

var seed = 0;
var isSafari = typeof navigator !== 'undefined' && navigator.userAgent.indexOf('Safari') >= 0 && navigator.userAgent.indexOf('Chrome') < 0;

URLFetchable.prototype.fetchAsText = function (callback) {
    var thisB = this;

    this.getURL().then(function (url) {
        try {
            var req = new XMLHttpRequest();
            var length;
            if ((isSafari || thisB.opts.salt) && url.indexOf('?') < 0) {
                url = url + '?salt=' + b64_sha1('' + Date.now() + ',' + ++seed);
            }
            req.open('GET', url, true);

            if (thisB.end) {
                if (thisB.end - thisB.start > 100000000) {
                    throw 'Monster fetch!';
                }
                req.setRequestHeader('Range', 'bytes=' + thisB.start + '-' + thisB.end);
                length = thisB.end - thisB.start + 1;
            }

            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (req.status == 200 || req.status == 206) {
                        return callback(req.responseText);
                    } else {
                        return callback(null);
                    }
                }
            };
            if (thisB.opts.credentials) {
                req.withCredentials = true;
            }
            req.send();
        } catch (e) {
            return callback(null);
        }
    }).catch(function (err) {
        console.log(err);
        return callback(null, err);
    });
};

URLFetchable.prototype.salted = function () {
    var o = shallowCopy(this.opts);
    o.salt = true;
    return new URLFetchable(this.url, this.start, this.end, o);
};

URLFetchable.prototype.getURL = function () {
    if (this.opts.resolver) {
        return this.opts.resolver(this.url).then(function (urlOrObj) {
            if (typeof urlOrObj === 'string') {
                return urlOrObj;
            } else {
                return urlOrObj.url;
            }
        });
    } else {
        return Promise.resolve(this.url);
    }
};

URLFetchable.prototype.fetch = function (callback, opts) {
    var thisB = this;

    opts = opts || {};
    var attempt = opts.attempt || 1;
    var truncatedLength = opts.truncatedLength;
    if (attempt > 3) {
        return callback(null);
    }

    this.getURL().then(function (url) {
        try {
            var timeout;
            if (opts.timeout && !thisB.opts.credentials) {
                timeout = setTimeout(function () {
                    console.log('timing out ' + url);
                    req.abort();
                    return callback(null, 'Timeout');
                }, opts.timeout);
            }

            var req = new XMLHttpRequest();
            var length;
            if ((isSafari || thisB.opts.salt) && url.indexOf('?') < 0) {
                url = url + '?salt=' + b64_sha1('' + Date.now() + ',' + ++seed);
            }
            req.open('GET', url, true);
            req.overrideMimeType('text/plain; charset=x-user-defined');
            if (thisB.end) {
                if (thisB.end - thisB.start > 100000000) {
                    throw 'Monster fetch!';
                }
                req.setRequestHeader('Range', 'bytes=' + thisB.start + '-' + thisB.end);
                length = thisB.end - thisB.start + 1;
            }
            req.responseType = 'arraybuffer';
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (timeout) clearTimeout(timeout);
                    if (req.status == 200 || req.status == 206) {
                        if (req.response) {
                            var bl = req.response.byteLength;
                            if (length && length != bl && (!truncatedLength || bl != truncatedLength)) {
                                return thisB.fetch(callback, { attempt: attempt + 1, truncatedLength: bl });
                            } else {
                                return callback(req.response);
                            }
                        } else if (req.mozResponseArrayBuffer) {
                            return callback(req.mozResponseArrayBuffer);
                        } else {
                            var r = req.responseText;
                            if (length && length != r.length && (!truncatedLength || r.length != truncatedLength)) {
                                return thisB.fetch(callback, { attempt: attempt + 1, truncatedLength: r.length });
                            } else {
                                return callback(bstringToBuffer(req.responseText));
                            }
                        }
                    } else {
                        return thisB.fetch(callback, { attempt: attempt + 1 });
                    }
                }
            };
            if (thisB.opts.credentials) {
                req.withCredentials = true;
            }
            req.send();
        } catch (e) {
            return callback(null);
        }
    }).catch(function (err) {
        console.log(err);
        return callback(null, err);
    });
};

function bstringToBuffer(result) {
    if (!result) {
        return null;
    }

    var ba = new Uint8Array(result.length);
    for (var i = 0; i < ba.length; ++i) {
        ba[i] = result.charCodeAt(i);
    }
    return ba.buffer;
}

// Read from Uint8Array

var convertBuffer = new ArrayBuffer(8);
var ba = new Uint8Array(convertBuffer);
var fa = new Float32Array(convertBuffer);

function readFloat(buf, offset) {
    ba[0] = buf[offset];
    ba[1] = buf[offset + 1];
    ba[2] = buf[offset + 2];
    ba[3] = buf[offset + 3];
    return fa[0];
}

function readInt64(ba, offset) {
    return ba[offset + 7] << 24 | ba[offset + 6] << 16 | ba[offset + 5] << 8 | ba[offset + 4];
}

var M1 = 256,
    M2 = M1 * 256,
    M3 = M2 * 256,
    M4 = M3 * 256,
    M5 = M4 * 256;

function readInt64LE(ba, offset) {
    return ba[offset] + ba[offset + 1] * M1 + ba[offset + 2] * M2 + ba[offset + 3] * M3 + ba[offset + 4] * M4 + ba[offset + 5] * M5;
}

function readInt64BE(ba, offset) {
    return ba[offset + 7] + ba[offset + 6] * M1 + ba[offset + 5] * M2 + ba[offset + 4] * M3 + ba[offset + 3] * M4 + ba[offset + 2] * M5;
}

function readInt(ba, offset) {
    return ba[offset + 3] << 24 | ba[offset + 2] << 16 | ba[offset + 1] << 8 | ba[offset];
}

function readShort(ba, offset) {
    return ba[offset + 1] << 8 | ba[offset];
}

function readByte(ba, offset) {
    return ba[offset];
}

function readIntBE(ba, offset) {
    return ba[offset] << 24 | ba[offset + 1] << 16 | ba[offset + 2] << 8 | ba[offset + 3];
}

// Exports if we are being used as a module

if (typeof module !== 'undefined') {
    module.exports = {
        BlobFetchable: BlobFetchable,
        URLFetchable: URLFetchable,

        readInt: readInt,
        readIntBE: readIntBE,
        readInt64: readInt64,
        readInt64LE: readInt64LE,
        readInt64BE: readInt64BE,
        readShort: readShort,
        readByte: readByte,
        readFloat: readFloat
    };
}

},{"./sha1":37,"./utils":55,"es6-promise":59}],5:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// browser-us.js: standard UI wiring
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;

    var nf = require('./numformats');
    var formatLongInt = nf.formatLongInt;

    var makeZoomSlider = require('./zoomslider');

    // For side effects

    require('./tier-edit');
    require('./export-config');
    require('./export-ui');
    require('./export-image');
    require('./svg-export');
    require('./session');
}

/*
 * Quite a bit of this ought to be done using a templating system, but
 * since web-components isn't quite ready for prime time yet we'll stick
 * with constructing it all in Javascript for now...
 */

Browser.prototype.initUI = function (holder, genomePanel) {
    if (!this.noSourceCSS) {
        ['bootstrap-scoped.css', 'dalliance-scoped.css', 'font-awesome.min.css'].forEach(function (path) {
            document.head.appendChild(makeElement('link', '', {
                rel: 'stylesheet',
                href: this.resolveURL('$$css/' + path)
            }));
        }.bind(this));
    }

    var b = this;

    if (!b.disableDefaultFeaturePopup) {
        this.addFeatureListener(function (ev, feature, hit, tier) {
            b.featurePopup(ev, feature, hit, tier, { disableDrag: b.disableFeaturePopupDrag });
        });
    }

    holder.classList.add('dalliance');
    var toolbar = b.toolbar = makeElement('div', null, { className: 'btn-toolbar toolbar' });

    var title = b.coordSystem.speciesName + ' ' + b.nameForCoordSystem(b.coordSystem);
    if (this.setDocumentTitle) {
        document.title = title + ' :: dalliance';
    }

    var locField = makeElement('input', '', { className: 'loc-field' });
    b.makeTooltip(locField, 'Enter a genomic location or gene name');
    var locStatusField = makeElement('p', '', { className: 'loc-status' });

    var zoomInBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-search-plus' })], { className: 'btn' });
    var zoomSlider = new makeZoomSlider({ width: b.zoomSliderWidth });
    b.makeTooltip(zoomSlider, "Highlighted button shows current zoom level, gray button shows inactive zoom level (click or tap SPACE to toggle).");

    var zoomOutBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-search-minus' })], { className: 'btn' });

    var clearHighlightsButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-eraser' })], { className: 'btn' });

    var addTrackBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-plus' })], { className: 'btn' });
    var favBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-bookmark' })], { className: 'btn' });
    var svgBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-print' })], { className: 'btn' });
    var resetBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-refresh' })], { className: 'btn' });
    var optsButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-cogs' })], { className: 'btn' });
    var helpButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-question' })], { className: 'btn' });

    var tierEditButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-road' })], { className: 'btn' });
    b.makeTooltip(tierEditButton, 'Configure currently selected track(s) (E)');

    var leapLeftButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-angle-left' })], { className: 'btn' }, { width: '5px' });
    var leapRightButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-angle-right' })], { className: 'btn pull-right' }, { width: '5px' });

    var modeButtons = makeElement('div', null, { className: 'btn-group pull-right' });
    if (!this.noTrackAdder) modeButtons.appendChild(addTrackBtn);
    if (!this.noTrackEditor) modeButtons.appendChild(tierEditButton);
    if (!this.noExport) modeButtons.appendChild(svgBtn);
    if (!this.noOptions) modeButtons.appendChild(optsButton);
    if (!this.noHelp) modeButtons.appendChild(helpButton);

    this.setUiMode = function (m) {
        this.uiMode = m;
        var mb = { help: helpButton, add: addTrackBtn, opts: optsButton, 'export': svgBtn, tier: tierEditButton };
        for (var x in mb) {
            if (x == m) mb[x].classList.add('active');else mb[x].classList.remove('active');
        }
    };

    if (!this.noLeapButtons) toolbar.appendChild(leapRightButton);

    if (modeButtons.firstChild) toolbar.appendChild(modeButtons);

    if (!this.noLeapButtons) toolbar.appendChild(leapLeftButton);
    if (!this.noTitle) {
        toolbar.appendChild(makeElement('div', makeElement('h4', title, {}, { margin: '0px' }), { className: 'btn-group title' }));
    }
    if (!this.noLocationField) toolbar.appendChild(makeElement('div', [locField, locStatusField], { className: 'btn-group loc-group' }));
    if (!this.noClearHighlightsButton) toolbar.appendChild(clearHighlightsButton);

    if (!this.noZoomSlider) {
        toolbar.appendChild(makeElement('div', [zoomInBtn, makeElement('span', zoomSlider, { className: 'btn' }), zoomOutBtn], { className: 'btn-group' }));
    }

    if (this.toolbarBelow) {
        holder.appendChild(genomePanel);
        holder.appendChild(toolbar);
    } else {
        holder.appendChild(toolbar);
        holder.appendChild(genomePanel);
    }

    var lt2 = Math.log(2) / Math.log(10);
    var lt5 = Math.log(5) / Math.log(10);
    var roundSliderValue = function roundSliderValue(x) {
        var ltx = (x / b.zoomExpt + Math.log(b.zoomBase)) / Math.log(10);

        var whole = ltx | 0;
        var frac = ltx - whole;
        var rounded;

        if (frac < 0.01) rounded = whole;else if (frac <= lt2 + 0.01) rounded = whole + lt2;else if (frac <= lt5 + 0.01) rounded = whole + lt5;else {
            rounded = whole + 1;
        }

        return (rounded * Math.log(10) - Math.log(b.zoomBase)) * b.zoomExpt;
    };

    var markSlider = function markSlider(x) {
        zoomSlider.addLabel(x, humanReadableScale(Math.exp(x / b.zoomExpt) * b.zoomBase));
    };

    this.addViewListener(function (chr, min, max, _oldZoom, zoom) {
        locField.value = chr + ':' + formatLongInt(min) + '..' + formatLongInt(max);
        zoomSlider.min = zoom.min | 0;
        zoomSlider.max = zoom.max | 0;
        if (zoom.isSnapZooming) {
            zoomSlider.value = zoom.alternate;
            zoomSlider.value2 = zoom.current;
            zoomSlider.active = 2;
        } else {
            zoomSlider.value = zoom.current;
            zoomSlider.value2 = zoom.alternate;
            zoomSlider.active = 1;
        }

        if (zoom.current == zoom.min) zoomInBtn.classList.add('disabled');else zoomInBtn.classList.remove('disabled');

        if (zoom.current == zoom.max) zoomOutBtn.classList.add('disabled');else zoomOutBtn.classList.remove('disabled');

        zoomSlider.removeLabels();
        var zmin = zoom.min;
        var zmax = zoom.max;
        var zrange = zmax - zmin;

        var numSliderTicks = 4;
        if (b.zoomSliderWidth && b.zoomSliderWidth < 150) numSliderTicks = 3;
        markSlider(roundSliderValue(zmin));
        for (var sti = 1; sti < numSliderTicks - 1; ++sti) {
            markSlider(roundSliderValue(zmin + 1.0 * sti * zrange / (numSliderTicks - 1)));
        }
        markSlider(roundSliderValue(zmax));

        if (b.storeStatus) {
            b.storeViewStatus();
        }

        if (b.highlights.length > 0) {
            clearHighlightsButton.style.display = 'inline-block';
        } else {
            clearHighlightsButton.style.display = 'none';
        }
    });

    this.addTierListener(function () {
        if (b.storeStatus) {
            b.storeTierStatus();
        }
    });

    locField.addEventListener('keydown', function (ev) {
        if (ev.keyCode == 40) {
            ev.preventDefault();ev.stopPropagation();
            b.setSelectedTier(0);
        }if (ev.keyCode == 10 || ev.keyCode == 13) {
            ev.preventDefault();

            var g = locField.value;
            b.search(g, function (err) {
                if (err) {
                    locStatusField.textContent = '' + err;
                } else {
                    locStatusField.textContent = '';
                }
            });
        }
    }, false);

    var trackAddPopup;
    addTrackBtn.addEventListener('click', function (ev) {
        b.showTrackAdder(ev);
    }, false);
    b.makeTooltip(addTrackBtn, 'Add a new track from the registry or an indexed file. (A)');

    zoomInBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        b.zoomStep(-10);
    }, false);
    b.makeTooltip(zoomInBtn, 'Zoom in (+)');

    zoomOutBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        b.zoomStep(10);
    }, false);
    b.makeTooltip(zoomOutBtn, 'Zoom out (-)');

    zoomSlider.addEventListener('change', function (ev) {
        var wantSnap = zoomSlider.active == 2;
        if (wantSnap != b.isSnapZooming) {
            b.savedZoom = b.zoomSliderValue - b.zoomMin;
            b.isSnapZooming = wantSnap;
        }
        var activeZSV = zoomSlider.active == 1 ? zoomSlider.value : zoomSlider.value2;

        b.zoomSliderValue = 1.0 * activeZSV;
        b.zoom(Math.exp(1.0 * activeZSV / b.zoomExpt));
    }, false);

    favBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
    }, false);
    b.makeTooltip(favBtn, 'Favourite regions');

    svgBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        b.openExportPanel();
    }, false);
    b.makeTooltip(svgBtn, 'Export publication-quality SVG. (X)');

    var optsPopup;
    optsButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        b.toggleOptsPopup(ev);
    }, false);
    b.makeTooltip(optsButton, 'Configure options.');

    helpButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        b.toggleHelpPopup(ev);
    });
    b.makeTooltip(helpButton, 'Help; Keyboard shortcuts. (H)');

    tierEditButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        if (b.selectedTiers.length == 1) {
            b.openTierPanel(b.tiers[b.selectedTiers[0]]);
        }
    }, false);

    leapLeftButton.addEventListener('click', function (ev) {
        b.leap(b.reverseKeyScrolling ? -1 : 1, false);
    }, false);

    leapRightButton.addEventListener('click', function (ev) {
        b.leap(b.reverseKeyScrolling ? 1 : -1, false);
    }, false);

    b.addTierSelectionListener(function () {
        var st = b.getSelectedTier();
        var tier;
        if (st >= 0) tier = b.tiers[st];

        var canLeap = false;
        if (tier && tier.featureSource) {
            if (b.sourceAdapterIsCapable(tier.featureSource, 'quantLeap') && typeof tier.quantLeapThreshold == 'number') {
                canLeap = true;
                leapLeftButton.title = 'Jump to the next feature in the selected track "' + (tier.config.name || tier.dasSource.name) + '" (ctrl+LEFT)';
                leapRightButton.title = 'Jump to the next region with a score above the threshold in the selected track "' + (tier.config.name || tier.dasSource.name) + '"" (ctrl+RIGHT)';
            } else if (b.sourceAdapterIsCapable(tier.featureSource, 'leap')) {
                leapLeftButton.title = 'Jump to the next feature in the selected track "' + (tier.config.name || tier.dasSource.name) + '" (ctrl+LEFT)';
                leapRightButton.title = 'Jump to the next feature in the selected track "' + (tier.config.name || tier.dasSource.name) + '" (ctrl+RIGHT)';
                canLeap = true;
            } else {
                leapLeftButton.title = 'Jump left (shift+LEFT)';
                leapRightButton.title = 'Jump right (shift+RIGHT)';
            }
        }

        leapLeftButton.firstChild.className = canLeap ? 'fa fa-angle-double-left' : 'fa fa-angle-left';
        leapRightButton.firstChild.className = canLeap ? 'fa fa-angle-double-right' : 'fa fa-angle-right';
    });

    clearHighlightsButton.addEventListener('click', function (ev) {
        b.clearHighlights();
    }, false);
    b.makeTooltip(clearHighlightsButton, 'Clear highlights (C)');

    b.addTierSelectionWrapListener(function (dir) {
        if (dir < 0) {
            b.setSelectedTier(null);
            locField.focus();
        }
    });

    b.addTierSelectionListener(function (sel) {
        if (b.uiMode === 'tier') {
            if (sel.length == 0) {
                b.hideToolPanel();
                b.manipulatingTier = null;
                b.uiMode = 'none';
            } else {
                var ft = b.tiers[sel[0]];
                if (ft != b.manipulatingTier) {
                    b.openTierPanel(ft);
                }
            }
        }
    });

    var uiKeyHandler = function uiKeyHandler(ev) {
        // console.log('bukh: ' + ev.keyCode);
        if (ev.keyCode == 65 || ev.keyCode == 97) {
            // a
            ev.preventDefault();ev.stopPropagation();
            b.showTrackAdder();
        } else if (ev.keyCode == 72 || ev.keyCode == 104) {
            // h
            ev.stopPropagation();ev.preventDefault();
            b.toggleHelpPopup(ev);
        } else if (ev.keyCode == 69 || ev.keyCode == 101) {
            //e
            ev.stopPropagation();ev.preventDefault();
            if (b.selectedTiers.length == 1) {
                b.openTierPanel(b.tiers[b.selectedTiers[0]]);
            }
        } else if (ev.keyCode == 88 || ev.keyCode == 120) {
            // x
            ev.stopPropagation();ev.preventDefault();
            b.openExportPanel();
        } else if (ev.keyCode == 67 || ev.keyCode == 99) {
            // c
            ev.stopPropagation();ev.preventDefault();
            b.clearHighlights();
        }
    };

    holder.addEventListener('focus', function (ev) {
        holder.addEventListener('keydown', uiKeyHandler, false);
    }, false);
    holder.addEventListener('blur', function (ev) {
        holder.removeEventListener('keydown', uiKeyHandler, false);
    }, false);

    holder.addEventListener('keydown', function (ev) {
        if (ev.keyCode === 27) {
            if (b.uiMode !== 'none') {
                // Only consume event if tool panel is open.
                ev.preventDefault();
                ev.stopPropagation();
                b.setUiMode('none');
                b.hideToolPanel();

                if (b.selectedTiers && b.selectedTiers.length > 0) {
                    b.browserHolder.focus();
                }
            }
        }
    }, false);
};

Browser.prototype.showToolPanel = function (panel, nowrap) {
    var thisB = this;

    if (this.activeToolPanel) {
        this.activeToolPanel.parentElement.removeChild(this.activeToolPanel);
    }

    var content;
    if (nowrap) content = panel;else content = makeElement('div', panel, {}, { overflowY: 'auto', width: '100%' });

    var divider = makeElement('div', makeElement('i', null, { className: 'fa fa-caret-right' }), { className: 'tool-divider' });
    divider.addEventListener('click', function (ev) {
        thisB.hideToolPanel();
        thisB.setUiMode('none');
    }, false);
    this.makeTooltip(divider, 'Close tool panel (ESC)');
    this.activeToolPanel = makeElement('div', [divider, content], { className: 'tool-holder' });
    this.svgHolder.appendChild(this.activeToolPanel);
    this.resizeViewer();

    var thisB = this;
};

Browser.prototype.hideToolPanel = function () {
    if (this.activeToolPanel) {
        this.activeToolPanel.parentElement.removeChild(this.activeToolPanel);
    }
    this.svgHolder.style.width = '100%';
    this.activeToolPanel = null;
    this.resizeViewer();
};

Browser.prototype.toggleHelpPopup = function (ev) {
    if (this.uiMode === 'help') {
        this.hideToolPanel();
        this.setUiMode('none');
    } else {
        var helpFrame = makeElement('iframe', null, { scrolling: 'yes', seamless: 'seamless', src: this.resolveURL('$$help/index.html'), className: 'help-panel' });
        this.showToolPanel(helpFrame, false);
        this.setUiMode('help');
    }
};

Browser.prototype.toggleOptsPopup = function (ev) {
    var b = this;

    if (this.uiMode === 'opts') {
        this.hideToolPanel();
        this.setUiMode('none');
    } else {
        var optsForm = makeElement('div', null, { className: 'form-horizontal' }, { boxSizing: 'border-box', MozBoxSizing: 'border-box', display: 'inline-block', verticalAlign: 'top' });
        var optsTable = makeElement('table');
        optsTable.cellPadding = 5;

        var scrollModeButton = makeElement('input', '', { type: 'checkbox', checked: b.reverseScrolling });
        scrollModeButton.addEventListener('change', function (ev) {
            b.reverseScrolling = scrollModeButton.checked;
            b.storeStatus();
        }, false);
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Reverse trackpad scrolling', { align: 'right' }), makeElement('td', scrollModeButton)]));

        var scrollKeyButton = makeElement('input', '', { type: 'checkbox', checked: b.reverseKeyScrolling });
        scrollKeyButton.addEventListener('change', function (ev) {
            b.reverseKeyScrolling = scrollKeyButton.checked;
            b.storeStatus();
        }, false);
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Reverse scrolling buttons and keys', { align: 'right' }), makeElement('td', scrollKeyButton)]));

        var rulerSelect = makeElement('select');
        rulerSelect.appendChild(makeElement('option', 'Left', { value: 'left' }));
        rulerSelect.appendChild(makeElement('option', 'Center', { value: 'center' }));
        rulerSelect.appendChild(makeElement('option', 'Right', { value: 'right' }));
        rulerSelect.appendChild(makeElement('option', 'None', { value: 'none' }));
        rulerSelect.value = b.rulerLocation;
        rulerSelect.addEventListener('change', function (ev) {
            b.rulerLocation = rulerSelect.value;
            b.positionRuler();
            for (var ti = 0; ti < b.tiers.length; ++ti) {
                b.tiers[ti].paintQuant();
            }
            b.storeStatus();
        }, false);
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Vertical guideline', { align: 'right' }), makeElement('td', rulerSelect)]));

        var singleBaseHighlightButton = makeElement('input', '', { type: 'checkbox', checked: b.singleBaseHighlight });
        singleBaseHighlightButton.addEventListener('change', function (ev) {
            b.singleBaseHighlight = singleBaseHighlightButton.checked;
            b.positionRuler();
            b.storeStatus();
        }, false);
        singleBaseHighlightButton.setAttribute('id', 'singleBaseHightlightButton'); // making this because access is required when the key 'u' is pressed and the options are visible
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Display and highlight current genome location', { align: 'right' }), makeElement('td', singleBaseHighlightButton)]));

        optsForm.appendChild(optsTable);

        var resetButton = makeElement('button', 'Reset browser', { className: 'btn' }, { marginLeft: 'auto', marginRight: 'auto', display: 'block' });
        resetButton.addEventListener('click', function (ev) {
            b.reset();
        }, false);
        optsForm.appendChild(resetButton);

        this.showToolPanel(optsForm);
        this.setUiMode('opts');
    }
};

function humanReadableScale(x) {
    var suffix = 'bp';
    if (x > 1000000000) {
        x /= 1000000000;
        suffix = 'Gb';
    } else if (x > 1000000) {
        x /= 1000000;
        suffix = 'Mb';
    } else if (x > 1000) {
        x /= 1000;
        suffix = 'kb';
    }
    return '' + Math.round(x) + suffix;
}

},{"./cbrowser":6,"./export-config":16,"./export-image":17,"./export-ui":18,"./numformats":29,"./session":36,"./svg-export":43,"./tier-edit":50,"./utils":55,"./zoomslider":58}],6:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// cbrowser.js: canvas browser container
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var Observed = utils.Observed;
    var Awaited = utils.Awaited;
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
    var miniJSONify = utils.miniJSONify;
    var shallowCopy = utils.shallowCopy;
    var textXHR = utils.textXHR;
    var arrayEquals = utils.arrayEquals;

    var tier = require('./tier');
    var DasTier = tier.DasTier;

    var sha1 = require('./sha1');
    var hex_sha1 = sha1.hex_sha1;

    var thub = require('./thub');
    var connectTrackHub = thub.connectTrackHub;

    var VERSION = require('./version');

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
    var formatLongInt = nf.formatLongInt;

    var Chainset = require('./chainset').Chainset;

    var Promise = require('es6-promise').Promise;

    var sourcecompare = require('./sourcecompare');
    var sourcesAreEqual = sourcecompare.sourcesAreEqual;
    var sourcesAreEqualModuloStyle = sourcecompare.sourcesAreEqualModuloStyle;
    var sourceDataURI = sourcecompare.sourceDataURI;
    var sourceStyleURI = sourcecompare.sourceStyleURI;

    var DefaultRenderer = require('./default-renderer');

    var MultiRenderer = require('./multi-renderer');
    var SubRenderer = require('./sub-renderer');

    var DummyRenderer = require('./dummy-renderer');
}

function Region(chr, min, max) {
    this.min = min;
    this.max = max;
    this.chr = chr;
}

function Browser(opts) {
    if (!opts) {
        opts = {};
    }

    this.renderers = { 'default': DefaultRenderer,
        'dummy': DummyRenderer,
        'multi': MultiRenderer,
        'sub': SubRenderer
    };

    this.defaultRenderer = opts.renderer || DefaultRenderer;

    this.prefix = '//www.biodalliance.org/release-0.14/';

    this.sources = [];
    this.tiers = [];
    this.tierGroups = {};

    this.searchOnlySources = [];
    this.searchOnlySourceHolders = [];

    this.featureListeners = [];
    this.featureHoverListeners = [];
    this.viewListeners = [];
    this.regionSelectListeners = [];
    this.tierListeners = [];
    this.tierSelectionListeners = [];
    this.tierSelectionWrapListeners = [];

    this.cookieKey = 'browser';

    this.chains = {};

    this.pageName = 'svgHolder';
    this.zoomFactor = 1.0;
    this.maxPixelsPerBase = 10;
    this.origin = 0;
    this.targetQuantRes = 1.0;
    this.featurePanelWidth = 750;
    this.zoomBase = 100;
    this.zoomExpt = 30.0; // Back to being fixed....
    this.zoomSliderValue = 100;
    this.entryPoints = null;
    this.currentSeqMax = -1; // init once EPs are fetched.

    this.highlights = [];
    this.selectedTiers = [1];

    this.maxViewWidth = 500000;
    this.defaultSubtierMax = 100;

    this.highZoomThreshold = 0.2;
    this.mediumZoomThreshold = 0.01;

    this.minExtraWidth = 100.0;
    this.maxExtraWidth = 1000.0;

    // Options.

    this.reverseScrolling = false;
    this.rulerLocation = 'center';
    this.defaultHighlightFill = 'red';
    this.defaultHighlightAlpha = 0.3;
    this.exportHighlights = true;
    this.exportRuler = true;
    this.exportBanner = true;
    this.exportRegion = true;
    this.singleBaseHighlight = true;

    // Visual config.

    // this.tierBackgroundColors = ["rgb(245,245,245)", "rgb(230,230,250)" /* 'white' */];
    this.tierBackgroundColors = ["rgb(245,245,245)", 'white'];
    this.minTierHeight = 20;
    this.noDefaultLabels = false;
    this.disableFeaturePopupDrag = opts.disableFeaturePopupDrag;

    // Registry

    this.availableSources = new Observed();
    this.defaultSources = [];
    this.mappableSources = {};

    // Central DAS Registry no longer available 2015-05

    this.registry = null; // '//www.dasregistry.org/das/sources';
    this.noRegistryTabs = true;

    this.defaultTrackAdderTab = null;

    this.hubs = [];
    this.hubObjects = [];

    this.sourceCache = new SourceCache();

    this.retina = true;

    this.useFetchWorkers = true;
    this.maxWorkers = 2;
    this.workerPath = '$$worker-all.js';
    this.resolvers = {};
    this.resolverSeed = 1;

    this.assemblyNamePrimary = true;
    this.assemblyNameUcsc = true;

    this.defaultSearchRegionPadding = 10000;

    // HTTP warning support

    this.httpCanaryURL = 'http://www.biodalliance.org/http-canary.txt';
    this.httpWarningURL = '//www.biodalliance.org/https.html';

    this.initListeners = [];

    if (opts.baseColors) {
        this.baseColors = opts.baseColors;
    } else {
        this.baseColors = {
            A: 'green',
            C: 'blue',
            G: 'orange',
            T: 'red',
            '-': 'hotpink', // deletion
            'I': 'red' // insertion
        };
    }

    if (opts.viewStart !== undefined && typeof opts.viewStart !== 'number') {
        throw Error('viewStart must be an integer');
    }
    if (opts.viewEnd !== undefined && typeof opts.viewEnd !== 'number') {
        throw Error('viewEnd must be an integer');
    }
    if (opts.offscreenInitWidth !== undefined && typeof opts.offscreenInitWidth !== 'number') {
        throw Error('offscreenInitWidth must be an integer');
    }

    for (var k in opts) {
        this[k] = opts[k];
    }

    if (typeof opts.uiPrefix === 'string' && typeof opts.prefix !== 'string') {
        this.prefix = opts.uiPrefix;
    }
    // If the prefix only starts with a single '/' this is relative to the current
    // site, so we need to prefix the prefix with //{hostname}
    if (this.prefix.indexOf('//') < 0 && this.prefix.indexOf('/') === 0) {
        var location = window.location.hostname;
        if (window.location.port) {
            location += ':' + window.location.port;
        };
        this.prefix = '//' + location + this.prefix;
    }
    if (this.prefix.indexOf('//') === 0) {
        var proto = window.location.protocol;
        if (proto == 'http:' || proto == 'https:') {
            // Protocol-relative URLs okay.
        } else {
            console.log(window.location.protocol);
            console.log('WARNING: prefix is set to a protocol-relative URL (' + this.prefix + ' when loading from a non-HTTP source');
            this.prefix = 'http:' + this.prefix;
        }
    }

    if (!this.coordSystem) {
        throw Error('Coordinate system must be configured');
    }

    if (this.chr === undefined || this.viewStart === undefined || this.viewEnd === undefined) {
        throw Error('Viewed region (chr:start..end) must be defined');
    }

    var thisB = this;

    if (document.readyState === 'complete') {
        thisB.realInit();
    } else {
        var loadListener = function loadListener(ev) {
            window.removeEventListener('load', loadListener, false);
            thisB.realInit();
        };
        window.addEventListener('load', loadListener, false);
    }
}

Browser.prototype.resolveURL = function (url) {
    return url.replace('$$', this.prefix);
};

Browser.prototype.destroy = function () {
    window.removeEventListener('resize', this.resizeListener, false);
    if (this.fetchWorkers) {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
            for (var _iterator = this.fetchWorkers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                var worker = _step.value;

                worker.terminate();
            }
        } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
        } finally {
            try {
                if (!_iteratorNormalCompletion && _iterator.return) {
                    _iterator.return();
                }
            } finally {
                if (_didIteratorError) {
                    throw _iteratorError;
                }
            }
        }
    }
};

Browser.prototype.realInit = function () {
    var self = this;
    var thisB = this;

    if (this.wasInitialized) {
        console.log('Attemping to call realInit on an already-initialized Dalliance instance');
        return;
    }

    this.wasInitialized = true;

    if (typeof navigator !== 'undefined') {
        var ua = navigator.userAgent || 'dummy';
        if (ua.indexOf('Trident') >= 0 && ua.indexOf('rv:11') >= 0) {
            // console.log('Detected IE11, disabling tier pinning.');
            this.disablePinning = true;
        }
    }

    this.defaultChr = this.chr;
    this.defaultStart = this.viewStart;
    this.defaultEnd = this.viewEnd;
    this.defaultSources = [];
    for (var i = 0; i < this.sources.length; ++i) {
        var s = this.sources[i];
        if (s) this.defaultSources.push(s);
    }

    if (this.restoreStatus) {
        this.statusRestored = this.restoreStatus();
    }

    if (this.injectionPoint && this.injectionPoint instanceof Element) {
        this.browserHolderHolder = this.injectionPoint;
    } else if (this.injectionPoint) {
        this.browserHolderHolder = document.getElementById(this.injectionPoint);
        if (!this.browserHolderHolder) {
            throw Error('injectionPoint must point to a valid DOM element of element ID');
        }
    } else {
        this.browserHolderHolder = document.getElementById(this.pageName);
        if (!this.browserHolderHolder) {
            throw Error('pageName must be a valid element ID (or use the injectionPoint option instead)');
        }
    }

    this.browserHolderHolder.classList.add('dalliance-injection-point');
    this.browserHolder = makeElement('div', null, { className: 'dalliance dalliance-root', tabIndex: -1 });
    if (this.maxHeight) {
        this.browserHolder.style.maxHeight = this.maxHeight + 'px';
    } else if (this.maxHeight != undefined) {
        this.browserHolder.style.maxHeight = null;
    }
    removeChildren(this.browserHolderHolder);
    this.browserHolderHolder.appendChild(this.browserHolder);
    this.svgHolder = makeElement('div', null, { className: 'main-holder' });

    this.initUI(this.browserHolder, this.svgHolder);

    this.pinnedTierHolder = makeElement('div', null, { className: 'tier-holder tier-holder-pinned' });
    this.tierHolder = makeElement('div', this.makeLoader(24), { className: 'tier-holder tier-holder-rest' });

    this.locSingleBase = makeElement('span', '', { className: 'loc-single-base' });
    var locSingleBaseHolder = makeElement('div', this.locSingleBase, { className: 'loc-single-base-holder' });
    // Add listener to update single base location
    this.addViewListener(function (chr, minFloor, maxFloor, zoomSliderValue, zoomSliderDict, min, max) {
        // Just setting textContent causes layout flickering in Blink.
        // This approach means that the element is never empty.
        var loc = Math.round((max + min) / 2);
        self.locSingleBase.appendChild(document.createTextNode(chr + ':' + formatLongInt(loc)));
        self.locSingleBase.removeChild(self.locSingleBase.firstChild);
    });

    if (this.disablePinning) {
        this.tierHolderHolder = this.tierHolder;
    } else {
        this.tierHolderHolder = makeElement('div', [locSingleBaseHolder, this.pinnedTierHolder, this.tierHolder], { className: 'tier-holder-holder' });
        this.svgHolder.appendChild(this.tierHolderHolder);
    }
    this.svgHolder.appendChild(this.tierHolderHolder);

    this.bhtmlRoot = makeElement('div');
    if (!this.disablePoweredBy) {
        this.bhtmlRoot.appendChild(makeElement('span', ['Powered by ', makeElement('a', 'Biodalliance', { href: 'http://www.biodalliance.org/' }), ' ' + VERSION], { className: 'powered-by' }));
    }
    this.browserHolder.appendChild(this.bhtmlRoot);

    this.resizeListener = function (ev) {
        thisB.resizeViewer();
    };

    this.ruler = makeElement('div', null, { className: 'guideline' });
    this.ruler2 = makeElement('div', null, { className: 'single-base-guideline' });
    this.tierHolderHolder.appendChild(this.ruler);
    this.tierHolderHolder.appendChild(this.ruler2);
    this.chainConfigs = this.chains || {};
    this.chains = {};
    for (var k in this.chainConfigs) {
        var cc = this.chainConfigs[k];
        if (cc instanceof Chainset) {
            console.log('WARNING: Should no longer use "new Chainset" in Biodalliance configurations.');
        }
        this.chains[k] = new Chainset(cc);
    }

    var promisedWorkers;
    if (this.maxWorkers > 0) {
        var pw = [];
        for (var fi = 0; fi < this.maxWorkers; ++fi) {
            pw.push(makeFetchWorker(this));
        }promisedWorkers = Promise.all(pw);
    } else {
        promisedWorkers = Promise.resolve([]);
    }

    this.fetchWorkers = null;
    this.nextWorker = 0;
    promisedWorkers.then(function (v) {
        console.log('Booted ' + v.length + ' workers');
        thisB.fetchWorkers = v;
    }, function (v) {
        console.log('Failed to boot workers', v);
    }).then(function () {
        if (self.offscreenInitWidth || window.getComputedStyle(thisB.browserHolderHolder).display != 'none' && thisB.tierHolder.getBoundingClientRect().width > 0) {
            setTimeout(function () {
                thisB.realInit2();
            }, 1);
        } else {
            var pollInterval = setInterval(function () {
                if (window.getComputedStyle(thisB.browserHolderHolder).display != 'none' && thisB.tierHolder.getBoundingClientRect().width > 0) {
                    clearInterval(pollInterval);
                    thisB.realInit2();
                }
            }, 300);
        }
    });
};

Browser.prototype.realInit2 = function () {
    var _this = this;

    var thisB = this;

    // Remove the loader icon, if needed
    removeChildren(this.tierHolder);
    removeChildren(this.pinnedTierHolder);

    this.featurePanelWidth = this.tierHolder.getBoundingClientRect().width | thisB.offscreenInitWidth | 0;
    window.addEventListener('resize', this.resizeListener, false);

    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);
    if (!this.zoomMax) {
        this.zoomMax = this.zoomExpt * Math.log(this.maxViewWidth / this.zoomBase);
        this.zoomMin = this.zoomExpt * Math.log(this.featurePanelWidth / this.maxPixelsPerBase / this.zoomBase);
    }
    this.zoomSliderValue = this.zoomExpt * Math.log((this.viewEnd - this.viewStart + 1) / this.zoomBase);

    // Event handlers

    this.tierHolderHolder.addEventListener('mousewheel', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        if (ev.wheelDeltaX) {
            var delta = ev.wheelDeltaX / 5;
            if (!thisB.reverseScrolling) {
                delta = -delta;
            }
            thisB.move(delta);
        }

        if (ev.wheelDeltaY) {
            var delta = ev.wheelDeltaY;
            if (thisB.reverseScrolling) {
                delta = -delta;
            }
            thisB.tierHolder.scrollTop += delta;
        }
    }, false);

    this.tierHolderHolder.addEventListener('MozMousePixelScroll', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        if (ev.axis == 1) {
            if (ev.detail != 0) {
                var delta = ev.detail / 4;
                if (thisB.reverseScrolling) {
                    delta = -delta;
                }
                thisB.move(delta);
            }
        } else {
            var delta = ev.detail;
            if (!thisB.reverseScrolling) {
                delta = -delta;
            }

            thisB.tierHolder.scrollTop += delta;
        }
    }, false);

    this.tierHolderHolder.addEventListener('touchstart', function (ev) {
        return thisB.touchStartHandler(ev);
    }, false);
    this.tierHolderHolder.addEventListener('touchmove', function (ev) {
        return thisB.touchMoveHandler(ev);
    }, false);
    this.tierHolderHolder.addEventListener('touchend', function (ev) {
        return thisB.touchEndHandler(ev);
    }, false);
    this.tierHolderHolder.addEventListener('touchcancel', function (ev) {
        return thisB.touchCancelHandler(ev);
    }, false);

    var keyHandler = function keyHandler(ev) {
        // console.log('cbkh: ' + ev.keyCode);
        if (ev.keyCode == 13) {
            // enter
            var layoutsChanged = false;
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                var t = thisB.tiers[ti];
                if (t.wantedLayoutHeight && t.wantedLayoutHeight != t.layoutHeight) {
                    t.layoutHeight = t.wantedLayoutHeight;
                    t.clipTier();
                    layoutsChanged = true;
                }
            }
            if (layoutsChanged) {
                thisB.arrangeTiers();
            }
        } else if (ev.keyCode == 32 || ev.charCode == 32) {
            // space
            if (!thisB.isSnapZooming) {
                thisB.isSnapZooming = true;
                var newZoom = (thisB.savedZoom || 0.0) + thisB.zoomMin;
                thisB.savedZoom = thisB.zoomSliderValue - thisB.zoomMin;
                thisB.zoomSliderValue = newZoom;
                thisB.zoom(Math.exp(1.0 * newZoom / thisB.zoomExpt));
            } else {
                thisB.isSnapZooming = false;
                var newZoom = (thisB.savedZoom || 20.0) + thisB.zoomMin;
                thisB.savedZoom = thisB.zoomSliderValue - thisB.zoomMin;
                thisB.zoomSliderValue = newZoom;
                thisB.zoom(Math.exp(1.0 * newZoom / thisB.zoomExpt));
            }
            ev.stopPropagation();ev.preventDefault();
        } else if (ev.keyCode == 85) {
            // u
            if (thisB.uiMode === 'opts') {
                // if the options are visible, toggle the checkbox too
                var check = document.getElementById("singleBaseHightlightButton").checked;
                document.getElementById("singleBaseHightlightButton").checked = !check;
            }
            thisB.singleBaseHighlight = !thisB.singleBaseHighlight;
            thisB.positionRuler();
            ev.stopPropagation();ev.preventDefault();
        } else if (ev.keyCode == 39) {
            // right arrow
            ev.stopPropagation();ev.preventDefault();
            thisB.scrollArrowKey(ev, -1);
        } else if (ev.keyCode == 37) {
            // left arrow
            ev.stopPropagation();ev.preventDefault();
            thisB.scrollArrowKey(ev, 1);
        } else if (ev.keyCode == 38 || ev.keyCode == 87) {
            // up arrow | w
            ev.stopPropagation();ev.preventDefault();

            if (ev.shiftKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];
                var ch = tt.forceHeight || tt.subtiers[0].height;
                if (ch >= 40) {
                    tt.mergeConfig({ height: ch - 10 });
                }
            } else if (ev.ctrlKey || ev.metaKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];

                if (tt.quantLeapThreshold) {
                    var th = tt.subtiers[0].height;
                    var tq = tt.subtiers[0].quant;
                    if (!tq) return;

                    var qmin = 1.0 * tq.min;
                    var qmax = 1.0 * tq.max;

                    var qscale = (qmax - qmin) / th;
                    tt.mergeConfig({ quantLeapThreshold: qmin + ((Math.round((tt.quantLeapThreshold - qmin) / qscale) | 0) + 1) * qscale });

                    tt.notify('Threshold: ' + formatQuantLabel(tt.quantLeapThreshold));
                }
            } else if (ev.altKey) {
                var cnt = thisB.selectedTiers.length;
                if (cnt == 0) return;

                var st = thisB.selectedTiers[0];
                var contiguous = true;
                var mt = [];
                for (var si = 0; si < thisB.selectedTiers.length; ++si) {
                    mt.push(thisB.tiers[thisB.selectedTiers[si]]);
                    if (si > 0 && thisB.selectedTiers[si] - thisB.selectedTiers[si - 1] != 1) contiguous = false;
                }

                if (contiguous && st <= 0) return;

                for (var si = thisB.selectedTiers.length - 1; si >= 0; --si) {
                    thisB.tiers.splice(thisB.selectedTiers[si], 1);
                }thisB.selectedTiers.splice(0, cnt);

                var ip = contiguous ? st - 1 : st;
                for (var si = 0; si < mt.length; ++si) {
                    thisB.tiers.splice(ip + si, 0, mt[si]);
                    thisB.selectedTiers.push(ip + si);
                }

                thisB.withPreservedSelection(thisB._ensureTiersGrouped);
                thisB.markSelectedTiers();
                thisB.notifyTierSelection();
                thisB.reorderTiers();
                thisB.notifyTier("selected", st);
            } else {
                var st = thisB.getSelectedTier();
                if (st > 0) {
                    thisB.setSelectedTier(st - 1);
                    var nst = thisB.tiers[thisB.getSelectedTier()];
                    var top = nst.row.offsetTop,
                        bottom = top + nst.row.offsetHeight;
                    if (top < thisB.tierHolder.scrollTop || bottom > thisB.tierHolder.scrollTop + thisB.tierHolder.offsetHeight) {
                        thisB.tierHolder.scrollTop = top;
                    }
                } else {
                    thisB.notifyTierSelectionWrap(-1);
                }
            }
        } else if (ev.keyCode == 40 || ev.keyCode == 83) {
            // down arrow | s
            ev.stopPropagation();ev.preventDefault();

            if (ev.shiftKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];
                var ch = tt.forceHeight || tt.subtiers[0].height;
                tt.mergeConfig({ height: ch + 10 });
            } else if (ev.ctrlKey || ev.metaKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];

                if (tt.quantLeapThreshold) {
                    var th = tt.subtiers[0].height;
                    var tq = tt.subtiers[0].quant;
                    if (!tq) return;

                    var qmin = 1.0 * tq.min;
                    var qmax = 1.0 * tq.max;
                    var qscale = (qmax - qmin) / th;

                    var it = Math.round((tt.quantLeapThreshold - qmin) / qscale) | 0;
                    if (it > 1) {
                        tt.mergeConfig({ quantLeapThreshold: qmin + (it - 1) * qscale });
                        tt.notify('Threshold: ' + formatQuantLabel(tt.quantLeapThreshold));
                    }
                }
            } else if (ev.altKey) {
                var cnt = thisB.selectedTiers.length;
                if (cnt == 0) return;

                var st = thisB.selectedTiers[0];
                var discontig = 0;
                var mt = [];
                for (var si = 0; si < thisB.selectedTiers.length; ++si) {
                    mt.push(thisB.tiers[thisB.selectedTiers[si]]);
                    if (si > 0) discontig += thisB.selectedTiers[si] - thisB.selectedTiers[si - 1] - 1;
                }
                var contiguous = discontig == 0;

                if (contiguous && st + cnt >= thisB.tiers.length) return;

                for (var si = thisB.selectedTiers.length - 1; si >= 0; --si) {
                    thisB.tiers.splice(thisB.selectedTiers[si], 1);
                }thisB.selectedTiers.splice(0, cnt);

                var ip = contiguous ? st + 1 : st + discontig;
                for (var si = 0; si < mt.length; ++si) {
                    thisB.tiers.splice(ip + si, 0, mt[si]);
                    thisB.selectedTiers.push(ip + si);
                }

                thisB.withPreservedSelection(function () {
                    thisB._ensureTiersGrouped(true);
                });
                thisB.markSelectedTiers();
                thisB.notifyTierSelection();
                thisB.reorderTiers();
                thisB.notifyTier("selected", st);
            } else {
                var st = thisB.getSelectedTier();
                if (st < thisB.tiers.length - 1) {
                    thisB.setSelectedTier(st + 1);
                    var nst = thisB.tiers[thisB.getSelectedTier()];
                    var top = nst.row.offsetTop,
                        bottom = top + nst.row.offsetHeight;
                    if (top < thisB.tierHolder.scrollTop || bottom > thisB.tierHolder.scrollTop + thisB.tierHolder.offsetHeight) {
                        thisB.tierHolder.scrollTop = Math.min(top, bottom - thisB.tierHolder.offsetHeight);
                    }
                }
            }
        } else if (ev.keyCode == 187 || ev.keyCode == 61) {
            // +
            ev.stopPropagation();ev.preventDefault();
            thisB.zoomStep(-10);
        } else if (ev.keyCode == 189 || ev.keyCode == 173) {
            // -
            ev.stopPropagation();ev.preventDefault();
            thisB.zoomStep(10);
        } else if (ev.keyCode == 73 || ev.keyCode == 105) {
            // i
            ev.stopPropagation();ev.preventDefault();
            var st = thisB.getSelectedTier();
            if (st < 0) return;
            var t = thisB.tiers[st];
            if (!t.infoVisible) {
                t.infoElement.style.display = 'block';
                t.updateHeight();
                t.infoVisible = true;
            } else {
                t.infoElement.style.display = 'none';
                t.updateHeight();
                t.infoVisible = false;
            }
        } else if (ev.keyCode == 84 || ev.keyCode == 116) {
            // t
            var bumpStatus;
            if (ev.shiftKey) {
                ev.stopPropagation();ev.preventDefault();
                for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                    var t = thisB.tiers[ti];
                    if (t.dasSource.collapseSuperGroups) {
                        if (bumpStatus === undefined) {
                            bumpStatus = !t.bumped;
                        }
                        t.mergeConfig({ bumped: bumpStatus });
                    }
                }
            } else if (!ev.ctrlKey && !ev.metaKey) {
                ev.stopPropagation();ev.preventDefault();
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var t = thisB.tiers[st];

                if (t.dasSource.collapseSuperGroups) {
                    if (bumpStatus === undefined) {
                        bumpStatus = !t.bumped;
                    }
                    t.mergeConfig({ bumped: bumpStatus });
                }
            }
        } else if (ev.keyCode == 77 || ev.keyCode == 109) {
            // m
            ev.stopPropagation();ev.preventDefault();
            if ((ev.ctrlKey || ev.metaKey) && thisB.selectedTiers.length > 1) {
                thisB.mergeSelectedTiers();
            }
        } else if (ev.keyCode == 68 || ev.keyCode == 100) {
            // d
            ev.stopPropagation();ev.preventDefault();
            if (ev.ctrlKey || ev.metaKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                thisB.addTier(thisB.tiers[st].dasSource);
            }
        } else if (ev.keyCode == 80 || ev.keyCode == 112) {
            // p
            if (ev.ctrlKey || ev.metaKey) {
                // Need to be careful because order of tiers could change
                // once we start updating pinning.
                var tt = [];
                for (var st = 0; st < thisB.selectedTiers.length; ++st) {
                    tt.push(thisB.tiers[thisB.selectedTiers[st]]);
                }
                for (var ti = 0; ti < tt.length; ++ti) {
                    tt[ti].mergeConfig({ pinned: !tt[ti].pinned });
                }
            }
        } else {
            // console.log('key: ' + ev.keyCode + '; char: ' + ev.charCode);
        }
    };

    this.browserHolder.addEventListener('focus', function (ev) {
        thisB.browserHolder.addEventListener('keydown', keyHandler, false);
    }, false);
    this.browserHolder.addEventListener('blur', function (ev) {
        thisB.browserHolder.removeEventListener('keydown', keyHandler, false);
    }, false);

    // Popup support (does this really belong here? FIXME)
    this.hPopupHolder = makeElement('div');
    this.hPopupHolder.style['font-family'] = 'helvetica';
    this.hPopupHolder.style['font-size'] = '12pt';
    this.hPopupHolder.classList.add('dalliance');
    document.body.appendChild(this.hPopupHolder);
    this.popups = [];

    var tierCreationPromises = [];
    for (var t = 0; t < this.sources.length; ++t) {
        var source = this.sources[t];
        if (!source) continue;

        var config = {};
        if (this.restoredConfigs) {
            config = this.restoredConfigs[t];
        }

        if (!source.disabled) {
            tierCreationPromises.push(this.makeTier(source, config));
        }
    }

    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;
    var _iteratorError2 = undefined;

    try {
        for (var _iterator2 = this.searchOnlySources[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
            var _source = _step2.value;

            if (!_source.disabled) {
                var _createSources = this.createSources(_source),
                    features = _createSources.features;

                if (features) {
                    this.searchOnlySourceHolders.push({
                        dasSource: _source,
                        featureSource: features
                    });
                }
            }
        }
    } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
    } finally {
        try {
            if (!_iteratorNormalCompletion2 && _iterator2.return) {
                _iterator2.return();
            }
        } finally {
            if (_didIteratorError2) {
                throw _iteratorError2;
            }
        }
    }

    if (this.onFirstRender) {
        Promise.all(this.tiers.map(function (t) {
            return t.firstRenderPromise;
        })).then(function () {
            return _this.onFirstRender();
        }).catch(function (err) {
            return console.log(err);
        });
    }

    thisB._ensureTiersGrouped();
    thisB.arrangeTiers();
    thisB.reorderTiers();

    var ss = this.getSequenceSource();
    if (ss) {
        ss.getSeqInfo(this.chr, function (si) {
            if (si) thisB.currentSeqMax = si.length;else thisB.currentSeqMax = -1;
        });
    }

    this.queryRegistry();
    for (var m in this.chains) {
        this.queryRegistry(m, true);
    }

    if (this.hubs) {
        for (var hi = 0; hi < this.hubs.length; ++hi) {
            var hc = this.hubs[hi];
            if (typeof hc == 'string') {
                hc = { url: hc };
            };

            (function (hc) {
                connectTrackHub(hc.url, function (hub, err) {
                    if (err) {
                        console.log(err);
                    } else {
                        var tdb;
                        if (hc.genome) tdb = hub.genomes[hc.genome];else tdb = hub.genomes[thisB.coordSystem.ucscName];

                        if (tdb) {
                            if (hc.mapping) tdb.mapping = hc.mapping;
                            if (hc.label) tdb.hub.altLabel = hc.label;
                            thisB.hubObjects.push(tdb);
                        }
                    }
                }, hc);
            })(hc);
        }
    }

    if (this.fullScreen) {
        this.setFullScreenHeight();
    }

    if (!this.statusRestored && this.storeStatus) {
        this.storeStatus();
    }

    thisB.setLocation(this.chr, this.viewStart, this.viewEnd, function () {
        tierCreationPromises.forEach(function (p) {
            return p.then(function (t) {
                thisB.refreshTier(t, null, true);
            });
        });
        thisB.setSelectedTier(1);

        // Ping any init listeners.
        for (var ii = 0; ii < thisB.initListeners.length; ++ii) {
            try {
                thisB.initListeners[ii].call(thisB);
            } catch (e) {
                console.log(e);
            }
        }
    }, false, true);
};

//
// Touch event support
//

Browser.prototype.touchStartHandler = function (ev) {
    // Events not consumed so they can be interpretted as clicks as well.

    this.touchOriginX = ev.touches[0].pageX;
    this.touchOriginY = ev.touches[0].pageY;
    if (ev.touches.length == 2) {
        var sep = Math.abs(ev.touches[0].pageX - ev.touches[1].pageX);
        this.zooming = true;
        this.zoomLastSep = this.zoomInitialSep = sep;
        this.zoomInitialScale = this.scale;
    }
};

Browser.prototype.touchMoveHandler = function (ev) {
    // These events *are* consumed to ensure we never get any dragging that
    // we don't manage ourselves.

    ev.stopPropagation();ev.preventDefault();

    if (ev.touches.length == 1) {
        var touchX = ev.touches[0].pageX;
        var touchY = ev.touches[0].pageY;
        if (this.touchOriginX && touchX != this.touchOriginX) {
            this.move(touchX - this.touchOriginX);
        }
        if (this.touchOriginY && touchY != this.touchOriginY) {
            this.tierHolder.scrollTop -= touchY - this.touchOriginY;
        }
        this.touchOriginX = touchX;
        this.touchOriginY = touchY;
    } else if (this.zooming && ev.touches.length == 2) {
        var sep = Math.abs(ev.touches[0].pageX - ev.touches[1].pageX);
        if (sep != this.zoomLastSep) {
            var cp = (ev.touches[0].pageX + ev.touches[1].pageX) / 2;
            var scp = this.viewStart + cp / this.scale | 0;
            this.scale = this.zoomInitialScale * (sep / this.zoomInitialSep);
            this.viewStart = scp - cp / this.scale | 0;
            for (var i = 0; i < this.tiers.length; ++i) {
                this.getTierRenderer(tiers[i]).drawTier(tiers[i]);
            }
        }
        this.zoomLastSep = sep;
    }
};

Browser.prototype.touchEndHandler = function (ev) {};

Browser.prototype.touchCancelHandler = function (ev) {};

Browser.prototype.makeTier = function (source, config) {
    try {
        return this.realMakeTier(source, config);
    } catch (e) {
        console.log('Error initializing', source);
        console.log(e.stack || e);
    }
};

Browser.prototype.realMakeTier = function (source, config) {
    var thisB = this;
    var background = null;
    if (this.tierBackgroundColors) {
        background = this.tierBackgroundColors[this.tiers.length % this.tierBackgroundColors.length];
    }

    var tier = new DasTier(this, source, config, background);
    tier.oorigin = this.viewStart;

    var isDragging = false;
    var dragOrigin, dragMoveOrigin;
    var hoverTimeout;

    var featureLookup = function featureLookup(rx, ry) {
        var renderer = thisB.getTierRenderer(tier);
        if (renderer.featureLookup) return renderer.featureLookup(tier, rx, ry);
    };

    var dragMoveHandler = function dragMoveHandler(ev) {
        ev.preventDefault();ev.stopPropagation();
        var rx = ev.clientX;
        if (rx != dragMoveOrigin) {
            thisB.move(rx - dragMoveOrigin, true);
            dragMoveOrigin = rx;
        }
        thisB.isDragging = true;
    };

    var dragUpHandler = function dragUpHandler(ev) {
        window.removeEventListener('mousemove', dragMoveHandler, true);
        window.removeEventListener('mouseup', dragUpHandler, true);
        thisB.move(ev.clientX - dragMoveOrigin); // Snap back (FIXME: consider animation)
    };

    tier.viewport.addEventListener('mousedown', function (ev) {
        thisB.browserHolder.focus();
        ev.preventDefault();
        var br = tier.row.getBoundingClientRect();
        var rx = ev.clientX,
            ry = ev.clientY;

        window.addEventListener('mousemove', dragMoveHandler, true);
        window.addEventListener('mouseup', dragUpHandler, true);
        dragOrigin = dragMoveOrigin = rx;
        thisB.isDragging = false; // Not dragging until a movement event arrives.
    }, false);

    tier.viewport.addEventListener('mousemove', function (ev) {
        var br = tier.row.getBoundingClientRect();
        var rx = ev.clientX - br.left,
            ry = ev.clientY - br.top;

        var hit = featureLookup(rx, ry);
        if (hit && hit.length > 0) {
            tier.row.style.cursor = 'pointer';
        } else {
            tier.row.style.cursor = 'default';
        }

        if (hoverTimeout) {
            clearTimeout(hoverTimeout);
        }

        if (isDragging) {
            // if (tier.dasSource.tier_type !== 'sequence' && rx != dragMoveOrigin) {
            //    thisB.move((rx - dragMoveOrigin));
            //    dragMoveOrigin = rx;
            // }
        } else {
            if (hit !== thisB._overFeatures && !arrayEquals(hit, thisB._overFeatures)) {
                thisB._overFeatures = hit;
                if (hit && hit.length > 0) {
                    thisB.notifyImmediateFeatureHover(ev, hit[hit.length - 1], hit, tier);
                } else {
                    thisB.notifyImmediateFeatureHover(ev, undefined, undefined, tier);
                }
            }

            hoverTimeout = setTimeout(function () {
                var hit = featureLookup(rx, ry);
                if (hit && hit.length > 0) {
                    // flag, that there is something hovered on this tier
                    tier.hovered = true;
                    thisB.notifyDeferredFeatureHover(ev, hit[hit.length - 1], hit, tier);
                } else if (tier.hovered) {
                    tier.hovered = false;
                    thisB.notifyDeferredFeatureHover(ev, undefined, undefined, tier);
                }
            }, 1000);
        }
    });

    var doubleClickTimeout = null;
    tier.viewport.addEventListener('mouseup', function (ev) {
        var br = tier.row.getBoundingClientRect();
        var rx = ev.clientX - br.left,
            ry = ev.clientY - br.top;

        var hit = featureLookup(rx, ry);
        if (hit && hit.length > 0 && !thisB.isDragging) {
            if (doubleClickTimeout) {
                clearTimeout(doubleClickTimeout);
                doubleClickTimeout = null;
                thisB.featureDoubleClick(hit, rx, ry);
            } else {
                doubleClickTimeout = setTimeout(function () {
                    doubleClickTimeout = null;
                    thisB.notifyFeature(ev, hit[hit.length - 1], hit, tier);
                }, 500);
            }
        }

        if (thisB.isDragging && rx != dragOrigin && tier.sequenceSource) {
            var a = thisB.viewStart + rx / thisB.scale;
            var b = thisB.viewStart + dragOrigin / thisB.scale;

            var min, max;
            if (a < b) {
                min = a | 0;max = b | 0;
            } else {
                min = b | 0;max = a | 0;
            }

            thisB.notifyRegionSelect(thisB.chr, min, max);
        }
        thisB.isDragging = false;
    }, false);

    tier.viewport.addEventListener('mouseout', function (ev) {
        isDragging = false;
    });

    tier.removeButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        for (var ti = 0; ti < thisB.tiers.length; ++ti) {
            if (thisB.tiers[ti] === tier) {
                thisB.removeTier({ index: ti });
                break;
            }
        }
    }, false);
    tier.nameButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        if (ev.shiftKey) {
            var hitTier = -1;
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] === tier) {
                    hitTier = ti;
                    break;
                }
            }
            if (hitTier >= 0) {
                var i = thisB.selectedTiers.indexOf(hitTier);
                if (i >= 0) {
                    thisB.selectedTiers.splice(i, 1);
                } else {
                    thisB.selectedTiers.push(hitTier);
                    thisB.selectedTiers.sort();
                }
                thisB.markSelectedTiers();
                thisB.notifyTierSelection();

                if (thisB.selectedTiers.length > 0) {
                    thisB.browserHolder.focus();
                } else {
                    thisB.notifyTierSelectionWrap(-1);
                }
            }
        } else {
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] === tier) {
                    thisB.browserHolder.focus();
                    if (thisB.selectedTiers.length != 1 || thisB.selectedTiers[0] != ti) {
                        thisB.setSelectedTier(ti);
                        return;
                    }
                }
            }

            if (!tier.infoVisible) {
                tier.infoElement.style.display = 'block';
                tier.updateHeight();
                tier.infoVisible = true;
            } else {
                tier.infoElement.style.display = 'none';
                tier.updateHeight();
                tier.infoVisible = false;
            }
        }
    }, false);
    tier.bumpButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        var bumpStatus;
        var t = tier;
        if (t.dasSource.collapseSuperGroups) {
            if (bumpStatus === undefined) {
                bumpStatus = !t.bumped;
            }
            t.mergeConfig({ bumped: bumpStatus });
        }
    }, false);

    var dragLabel;
    var dragTierHolder;
    var dragTierHolderScrollLimit;
    var tierOrdinal;
    var yAtLastReorder;
    var tiersWereReordered = false;

    var labelDragHandler = function labelDragHandler(ev) {
        var label = tier.label;

        ev.stopPropagation();ev.preventDefault();
        if (!dragLabel) {
            if (tier.pinned) {
                dragTierHolder = thisB.pinnedTierHolder;
            } else {
                dragTierHolder = thisB.tierHolder;
            }
            dragTierHolderScrollLimit = dragTierHolder.scrollHeight - dragTierHolder.offsetHeight;

            dragLabel = label.cloneNode(true);
            dragLabel.style.cursor = 'pointer';
            dragTierHolder.appendChild(dragLabel);
            label.style.visibility = 'hidden';

            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] === tier) {
                    tierOrdinal = ti;
                    break;
                }
            }

            yAtLastReorder = ev.clientY;
        }

        var holderBCR = dragTierHolder.getBoundingClientRect();
        dragLabel.style.left = label.getBoundingClientRect().left - holderBCR.left + 'px';
        dragLabel.style.top = ev.clientY - holderBCR.top + dragTierHolder.scrollTop - 10 + 'px';

        var pty = ev.clientY - holderBCR.top + dragTierHolder.scrollTop;
        for (var ti = 0; ti < thisB.tiers.length; ++ti) {
            var tt = thisB.tiers[ti];
            if (tt.pinned ^ tier.pinned) continue;

            var ttr = tt.row.getBoundingClientRect();
            pty -= ttr.bottom - ttr.top;
            if (pty < 0) {
                if (ti < tierOrdinal && ev.clientY < yAtLastReorder || ti > tierOrdinal && ev.clientY > yAtLastReorder) {
                    thisB.withPreservedSelection(function () {
                        thisB.tiers.splice(tierOrdinal, 1);
                        thisB.tiers.splice(ti, 0, tier);
                        thisB._ensureTiersGrouped(ti > tierOrdinal);
                    });

                    for (var tix = 0; tix < thisB.tiers.length; ++tix) {
                        if (thisB.tiers[tix] == tier) tierOrdinal = tix;
                    }yAtLastReorder = ev.clientY;
                    thisB.reorderTiers();
                    dragTierHolder.appendChild(dragLabel); // Because reorderTiers removes all children.
                    tiersWereReordered = true;
                }
                break;
            }
        }

        if (dragLabel.offsetTop < dragTierHolder.scrollTop) {
            dragTierHolder.scrollTop -= dragTierHolder.scrollTop - dragLabel.offsetTop;
        } else if (dragLabel.offsetTop + dragLabel.offsetHeight > dragTierHolder.scrollTop + dragTierHolder.offsetHeight) {
            dragTierHolder.scrollTop = Math.min(dragTierHolder.scrollTop + (dragLabel.offsetTop + dragLabel.offsetHeight) - (dragTierHolder.scrollTop + dragTierHolder.offsetHeight), dragTierHolderScrollLimit);
        }
    };

    var labelReleaseHandler = function labelReleaseHandler(ev) {
        var label = tier.label;

        ev.stopPropagation();ev.preventDefault();
        if (dragLabel) {
            dragLabel.style.cursor = 'auto';
            dragTierHolder.removeChild(dragLabel);
            dragLabel = null;
            label.style.visibility = 'visible';
        }
        document.removeEventListener('mousemove', labelDragHandler, false);
        document.removeEventListener('mouseup', labelReleaseHandler, false);

        if (tiersWereReordered) {
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] == tier) {
                    thisB.setSelectedTier(ti);
                    break;
                }
            }
            thisB.notifyTier("reordered", tier);
        }
    };

    tier.label.addEventListener('mousedown', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        tiersWereReordered = false;
        document.addEventListener('mousemove', labelDragHandler, false);
        document.addEventListener('mouseup', labelReleaseHandler, false);
    }, false);

    this.tiers.push(tier); // NB this currently tells any extant knownSpace about the new tier.

    // fetches stylesheet
    return tier.init().then(function (updatedTier) {
        updatedTier.currentlyHeight = 50;
        thisB.updateHeight();
        updatedTier.updateLabel();

        thisB.withPreservedSelection(thisB._ensureTiersGrouped);
        updatedTier._updateFromConfig();
        thisB.reorderTiers();

        return updatedTier;
    });
};

Browser.prototype.reorderTiers = function () {
    removeChildren(this.tierHolder);
    removeChildren(this.pinnedTierHolder);
    if (this.disablePinning) {
        this.tierHolder.appendChild(this.ruler);
        this.tierHolder.appendChild(this.ruler2);
    }
    var hasPinned = false;
    var pinnedTiers = [],
        unpinnedTiers = [];
    for (var i = 0; i < this.tiers.length; ++i) {
        var t = this.tiers[i];
        var visible = ['sub', 'dummy'].indexOf(this.tiers[i].dasSource.renderer) === -1;
        if (t.pinned && !this.disablePinning) {
            pinnedTiers.push(t);
            if (visible) this.pinnedTierHolder.appendChild(this.tiers[i].row);
            hasPinned = true;
        } else {
            unpinnedTiers.push(t);
            if (visible) this.tierHolder.appendChild(this.tiers[i].row);
        }
    }

    this.withPreservedSelection(function () {
        this.tiers.splice(0, this.tiers.length);
        for (var i = 0; i < pinnedTiers.length; ++i) {
            this.tiers.push(pinnedTiers[i]);
        }for (var i = 0; i < unpinnedTiers.length; ++i) {
            this.tiers.push(unpinnedTiers[i]);
        }
    });

    if (hasPinned) this.pinnedTierHolder.classList.add('tier-holder-pinned-full');else this.pinnedTierHolder.classList.remove('tier-holder-pinned-full');

    this.arrangeTiers();
};

Browser.prototype.withPreservedSelection = function (f) {
    var st = [];
    for (var xi = 0; xi < this.selectedTiers.length; ++xi) {
        st.push(this.tiers[this.selectedTiers[xi]]);
    }

    f.call(this);

    this.selectedTiers = [];
    for (var sti = 0; sti < this.tiers.length; ++sti) {
        if (st.indexOf(this.tiers[sti]) >= 0) this.selectedTiers.push(sti);
    }
};

Browser.prototype.refreshTier = function (tier, tierCallback, noInvalidate) {
    var renderer = this.getTierRenderer(tier);
    if (tier.dasSource.renderer === 'multi') {
        renderer.drawTier(tier);
    } else {
        var renderCallback = tierCallback || renderer.renderTier;
        if (this.knownSpace) {
            if (noInvalidate) {
                if (this.knownSpace.pool) this.knownSpace.startFetchesForTiers([tier]);
            } else {
                this.knownSpace.invalidate(tier, renderCallback);
            }
        }
    }
};

Browser.prototype.getTierRenderer = function (tier) {
    var renderer = tier.dasSource.renderer || this.defaultRenderer;
    if (typeof renderer === 'string') {
        return this.renderers[renderer];
    } else if (typeof renderer.renderTier === 'function' && typeof renderer.drawTier === 'function') {
        return renderer;
    } else {
        console.log("Tier doesn't have a renderer");
    }
};

/* Internal use only, assumes selection is being managed elsewhere... */

Browser.prototype._ensureTiersGrouped = function (down) {
    var groupedTiers = {};
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (t.dasSource.tierGroup) {
            pusho(groupedTiers, t.dasSource.tierGroup, t);
        }
    }

    var newTiers = [];
    if (down) this.tiers.reverse();
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (t.dasSource.tierGroup) {
            var nt = groupedTiers[t.dasSource.tierGroup];
            if (nt) {
                if (down) nt.reverse();
                for (var nti = 0; nti < nt.length; ++nti) {
                    newTiers.push(nt[nti]);
                }groupedTiers[t.dasSource.tierGroup] = null;
            }
        } else {
            newTiers.push(t);
        }
    }
    if (down) newTiers.reverse();
    this.tiers.splice(0, this.tiers.length);
    for (var nti = 0; nti < newTiers.length; ++nti) {
        this.tiers.push(newTiers[nti]);
    }
};

Browser.prototype.arrangeTiers = function () {
    var arrangedTiers = [];
    var groupedTiers = {};

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (t.pinned) {
            arrangedTiers.push(t);
            if (t.dasSource.tierGroup) {
                pusho(groupedTiers, t.dasSource.tierGroup, t);
            }
        }
    }
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (!t.pinned) {
            arrangedTiers.push(t);
            if (t.dasSource.tierGroup) {
                pusho(groupedTiers, t.dasSource.tierGroup, t);
            }
        }
    }

    for (var g in groupedTiers) {
        var tiers = groupedTiers[g];
        var tierGroup = this.tierGroups[g];
        if (!tierGroup) {
            tierGroup = {
                element: makeElement('div', makeElement('span', g, { className: 'tier-group-label' }), { className: "tier-group" })
            };
            this.tierGroups[g] = tierGroup;
        }

        if (tierGroup.element.parentNode) tierGroup.element.parentNode.removeChild(tierGroup.element);

        var holder = tiers[0].pinned ? this.pinnedTierHolder : this.tierHolder;
        var min = 10000000,
            max = 0;
        for (var ti = 0; ti < tiers.length; ++ti) {
            var row = tiers[ti].row;
            min = Math.min(min, row.offsetTop);
            max = Math.max(max, row.offsetTop + row.offsetHeight);
        }
        tierGroup.element.style.top = min + 'px';
        tierGroup.element.style.left = '0px';
        tierGroup.element.style.height = max - min + 'px';
        holder.appendChild(tierGroup.element);
    }

    if (this.tierBackgroundColors) {
        for (var ti = 0; ti < arrangedTiers.length; ++ti) {
            var t = arrangedTiers[ti];
            t.setBackground(this.tierBackgroundColors[ti % this.tierBackgroundColors.length]);
            if (t.dasSource.tierGroup) t.label.style.left = '18px';else t.label.style.left = '2px';
            t.background = this.tierBackgroundColors[ti % this.tierBackgroundColors.length];
        }
    }
};

Browser.prototype.refresh = function (noStartFetches) {
    this.retrieveTierData(this.tiers, noStartFetches);
    this.drawOverlays();
    this.positionRuler();
};

var defaultTierRenderer = function defaultTierRenderer(status, tier) {
    console.log("DEPRECATED!");
};

Browser.prototype.retrieveTierData = function (tiers, noStartFetches) {
    this.notifyLocation();
    var width = this.viewEnd - this.viewStart + 1;
    var minExtraW = this.minExtraWidth / this.scale | 0;
    var maxExtraW = this.maxExtraWidth / this.scale | 0;

    var newOrigin = (this.viewStart + this.viewEnd) / 2;
    var oh = newOrigin - this.origin;
    this.origin = newOrigin;
    this.scaleAtLastRedraw = this.scale;
    for (var t = 0; t < tiers.length; ++t) {
        var od = oh;
        if (tiers[t].originHaxx) {
            od += tiers[t].originHaxx;
        }
        tiers[t].originHaxx = od;
    }

    var scaledQuantRes = this.targetQuantRes / this.scale;

    var innerDrawnStart = Math.max(1, (this.viewStart | 0) - minExtraW);
    var innerDrawnEnd = Math.min((this.viewEnd | 0) + minExtraW, (this.currentSeqMax | 0) > 0 ? this.currentSeqMax | 0 : 1000000000);
    var outerDrawnStart = Math.max(1, (this.viewStart | 0) - maxExtraW);
    var outerDrawnEnd = Math.min((this.viewEnd | 0) + maxExtraW, (this.currentSeqMax | 0) > 0 ? this.currentSeqMax | 0 : 1000000000);

    if (!this.knownSpace || this.knownSpace.chr !== this.chr) {
        var ss = this.getSequenceSource();
        if (this.knownSpace) this.knownSpace.cancel();
        // known space is created based on the entire tier list, for future caching purposes, even if only a subset of the tiers are needed to be rendered now.
        this.knownSpace = new KnownSpace(this.tiers, this.chr, outerDrawnStart, outerDrawnEnd, scaledQuantRes, ss);
    }

    var seg = this.knownSpace.bestCacheOverlapping(this.chr, innerDrawnStart, innerDrawnEnd);
    if (seg && seg.min <= innerDrawnStart && seg.max >= innerDrawnEnd) {
        this.drawnStart = Math.max(seg.min, outerDrawnStart);
        this.drawnEnd = Math.min(seg.max, outerDrawnEnd);
    } else {
        this.drawnStart = outerDrawnStart;
        this.drawnEnd = outerDrawnEnd;
    }
    // send in the subset of tiers to retrieve.
    this.knownSpace.retrieveFeatures(tiers, this.chr, this.drawnStart, this.drawnEnd, scaledQuantRes, noStartFetches);
};

function setSources(msh, availableSources, maybeMapping) {
    if (maybeMapping) {
        for (var s = 0; s < availableSources.length; ++s) {
            availableSources[s].mapping = maybeMapping;
        }
    }
    msh.set(availableSources);
}

Browser.prototype.queryRegistry = function (maybeMapping, tryCache) {
    if (!this.registry) return;

    var thisB = this;
    var coords, msh;
    if (maybeMapping) {
        coords = this.chains[maybeMapping].coords;
        if (!thisB.mappableSources[maybeMapping]) {
            thisB.mappableSources[maybeMapping] = new Observed();
        }
        msh = thisB.mappableSources[maybeMapping];
    } else {
        coords = this.coordSystem;
        msh = this.availableSources;
    }
    var cacheHash = hex_sha1(miniJSONify(coords));
    if (tryCache) {
        var cacheTime = localStorage['dalliance.registry.' + cacheHash + '.last_queried'];
        if (cacheTime) {
            try {
                setSources(msh, JSON.parse(localStorage['dalliance.registry.' + cacheHash + '.sources']), maybeMapping);
                var cacheAge = (Date.now() | 0) - (cacheTime | 0);
                if (cacheAge < 12 * 60 * 60 * 1000) {
                    return;
                }
            } catch (rex) {
                console.log('Bad registry cache: ' + rex);
            }
        }
    }

    var rurl = this.registry;
    if (rurl.indexOf('//') == 0) {
        var proto = window.location.protocol;
        if (proto != 'https:' && proto != 'http:') rurl = 'http:' + rurl;
    }
    new DASRegistry(rurl).sources(function (sources) {
        var availableSources = [];
        for (var s = 0; s < sources.length; ++s) {
            var source = sources[s];
            if (!source.coords || source.coords.length == 0) {
                continue;
            }
            var scoords = source.coords[0];
            if (scoords.taxon != coords.taxon || scoords.auth != coords.auth || scoords.version != coords.version) {
                continue;
            }
            availableSources.push(source);
        }

        localStorage['dalliance.registry.' + cacheHash + '.sources'] = JSON.stringify(availableSources);
        localStorage['dalliance.registry.' + cacheHash + '.last_queried'] = '' + Date.now();

        setSources(msh, availableSources, maybeMapping);
    }, function (error) {
        // msh.set(null);
    }, coords);
};

//
// Navigation
//

Browser.prototype.move = function (pos, soft) {
    var wid = this.viewEnd - this.viewStart;
    var nStart = this.viewStart - 1.0 * pos / this.scale;
    var nEnd = nStart + wid;

    if (!soft) {
        if (this.currentSeqMax > 0 && nEnd > this.currentSeqMax) {
            nEnd = this.currentSeqMax;
            nStart = this.viewEnd - wid;
        }
        if (nStart < 1) {
            nStart = 1;
            nEnd = nStart + wid;
        }
    }

    this.setLocation(null, nStart, nEnd, null, soft);
};

Browser.prototype.zoomStep = function (delta) {
    var oz = 1.0 * this.zoomSliderValue;
    var nz = oz + delta;
    if (nz < this.zoomMin) {
        nz = this.zoomMin;
    }
    if (nz > this.zoomMax) {
        nz = this.zoomMax;
    }

    if (nz != oz) {
        this.zoomSliderValue = nz; // FIXME maybe ought to set inside zoom!
        this.zoom(Math.exp(1.0 * nz / this.zoomExpt));
    }
};

Browser.prototype.zoom = function (factor) {
    this.zoomFactor = factor;
    var viewCenter = Math.round((this.viewStart + this.viewEnd) / 2.0) | 0;
    this.viewStart = viewCenter - this.zoomBase * this.zoomFactor / 2;
    this.viewEnd = viewCenter + this.zoomBase * this.zoomFactor / 2;
    if (this.currentSeqMax > 0 && this.viewEnd > this.currentSeqMax + 5) {
        var len = this.viewEnd - this.viewStart + 1;
        this.viewEnd = this.currentSeqMax;
        this.viewStart = this.viewEnd - len + 1;
    }
    if (this.viewStart < 1) {
        var len = this.viewEnd - this.viewStart + 1;
        this.viewStart = 1;
        this.viewEnd = this.viewStart + len - 1;
    }
    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);
    var width = this.viewEnd - this.viewStart + 1;

    var scaleRat = this.scale / this.scaleAtLastRedraw;

    this.notifyLocation();
    this.refresh();
};

Browser.prototype.spaceCheck = function (dontRefresh) {
    if (!this.knownSpace || this.knownSpace.chr !== this.chr) {
        this.refresh(dontRefresh);
        return;
    }

    var width = (this.viewEnd - this.viewStart | 0) + 1;
    var minExtraW = this.minExtraWidth / this.scale | 0;
    var maxExtraW = this.maxExtraWidth / this.scale | 0;

    if ((this.drawnStart | 0) > Math.max(1, (this.viewStart | 0) - minExtraW | 0) || (this.drawnEnd | 0) < Math.min((this.viewEnd | 0) + minExtraW, (this.currentSeqMax | 0) > 0 ? this.currentSeqMax | 0 : 1000000000)) {
        this.refresh(dontRefresh);
    }
};

Browser.prototype.resizeViewer = function (skipRefresh) {
    var width = this.tierHolder.getBoundingClientRect().width | 0;
    if (width == 0) return;

    var oldFPW = Math.max(this.featurePanelWidth, 300); // Can get silly values stored
    // when the browser is hidden.
    this.featurePanelWidth = width | 0;

    if (oldFPW != this.featurePanelWidth) {
        this.zoomMax = this.zoomExpt * Math.log(this.maxViewWidth / this.zoomBase);
        this.zoomMin = this.zoomExpt * Math.log(this.featurePanelWidth / this.maxPixelsPerBase / this.zoomBase); // FIXME hard-coded minimum.
        this.zoomSliderValue = this.zoomExpt * Math.log((this.viewEnd - this.viewStart + 1) / this.zoomBase);

        var viewWidth = this.viewEnd - this.viewStart;
        var nve = this.viewStart + viewWidth * this.featurePanelWidth / oldFPW;

        this.viewEnd = nve;

        var wid = this.viewEnd - this.viewStart + 1;
        if (this.currentSeqMax > 0 && this.viewEnd > this.currentSeqMax) {
            this.viewEnd = this.currentSeqMax;
            this.viewStart = this.viewEnd - wid + 1;
        }
        if (this.viewStart < 1) {
            this.viewStart = 1;
            this.viewEnd = this.viewStart + wid - 1;
        }

        this.positionRuler();

        if (!skipRefresh) {
            this.spaceCheck();
        }
        this.notifyLocation();
    }

    if (this.fullScreen) {
        this.setFullScreenHeight();
    }
};

Browser.prototype.setFullScreenHeight = function () {
    var rest = document.body.offsetHeight - this.browserHolder.offsetHeight;
    this.browserHolder.style.maxHeight = Math.max(300, window.innerHeight - rest - 20) + 'px';
};

Browser.prototype.addTier = function (conf) {
    var thisB = this;
    conf = shallowCopy(conf);
    conf.disabled = false;

    return this.makeTier(conf).then(function (tier) {
        thisB.refreshTier(tier);
        thisB.markSelectedTiers();
        thisB.positionRuler();
        thisB.notifyTier("added", tier);
        return tier;
    });
};

Browser.prototype.removeTier = function (conf, force) {
    var target = -1;

    if (typeof conf.index !== 'undefined' && conf.index >= 0 && conf.index < this.tiers.length) {
        target = conf.index;
    } else {
        for (var ti = 0; ti < this.tiers.length; ++ti) {
            var ts = this.tiers[ti].dasSource;

            if (sourcesAreEqual(conf, ts)) {
                target = ti;break;
            }
        }
    }

    if (target < 0) {
        throw "Couldn't find requested tier";
    }

    var targetTier = this.tiers[target];
    this.tiers.splice(target, 1);

    var nst = [];
    for (var sti = 0; sti < this.selectedTiers.length; ++sti) {
        var st = this.selectedTiers[sti];
        if (st < target) {
            nst.push(st);
        } else if (st > target) {
            nst.push(st - 1);
        }
    }
    this.selectedTiers = nst;
    this.markSelectedTiers();

    targetTier.destroy();
    if (this.knownSpace) {
        this.knownSpace.featureCache[targetTier] = null;
    }

    this.reorderTiers();
    this.notifyTier("removed", targetTier);
};

Browser.prototype.removeAllTiers = function () {
    var thisB = this;
    this.selectedTiers = [];
    this.markSelectedTiers();
    this.tiers.forEach(function (targetTier) {
        targetTier.destroy();
        if (thisB.knownSpace) {
            thisB.knownSpace.featureCache[targetTier] = null;
        }
    });
    this.tiers.length = 0;
    this.reorderTiers();
    this.notifyTier("removedAll", null);
};

Browser.prototype.getSequenceSource = function () {
    if (this._sequenceSource === undefined) this._sequenceSource = this._getSequenceSource();
    return this._sequenceSource;
};

Browser.prototype._getSequenceSource = function () {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (this.tiers[ti].sequenceSource) {
            return this.tiers[ti].sequenceSource;
        }
    }

    for (var si = 0; si < this.defaultSources.length; ++si) {
        var s = this.defaultSources[si];
        if (s.provides_entrypoints || s.tier_type == 'sequence' || s.twoBitURI || s.twoBitBlob) {
            if (s.twoBitURI || s.twoBitBlob) {
                return new TwoBitSequenceSource(s);
            } else if (s.ensemblURI) {
                return new EnsemblSequenceSource(s);
            } else {
                return new DASSequenceSource(s);
            }
        }
    }
};

Browser.prototype.setLocation = function (newChr, newMin, newMax, callback, soft, noRefresh) {
    if (typeof newMin !== 'number') {
        throw Error('minimum must be a number (got ' + JSON.stringify(newMin) + ')');
    }
    if (typeof newMax !== 'number') {
        throw Error('maximum must be a number (got ' + JSON.stringify(newMax) + ')');
    }

    if (newMin > newMax) {
        var oldNewMin = newMin;
        newMin = newMax;
        newMax = oldNewMin;
    } else if (newMin === newMax) {
        newMax += 1;
    }

    if (!callback) {
        callback = function callback(err) {
            if (err) {
                throw err;
            }
        };
    }
    var thisB = this;

    if ((!newChr || newChr == this.chr) && this.currentSeqMax > 0) {
        return this._setLocation(null, newMin, newMax, null, callback, soft, noRefresh);
    } else {
        var ss = this.getSequenceSource();
        if (!ss) {
            return callback('Need a sequence source');
        }

        var findChr = newChr || this.chr;
        ss.getSeqInfo(findChr, function (si) {
            if (!si) {
                var altChr;
                if (findChr.indexOf('chr') == 0) {
                    altChr = findChr.substr(3);
                } else {
                    altChr = 'chr' + findChr;
                }
                ss.getSeqInfo(altChr, function (si2) {
                    if (!si2 && newChr) {
                        return callback("Couldn't find sequence '" + newChr + "'");
                    } else if (!si2) {
                        return thisB._setLocation(null, newMin, newMax, null, callback, soft, noRefresh);
                    } else {
                        return thisB._setLocation(altChr, newMin, newMax, si2, callback, soft, noRefresh);
                    }
                });
            } else {
                return thisB._setLocation(newChr, newMin, newMax, si, callback, soft, noRefresh);
            }
        });
    }
};

Browser.prototype._setLocation = function (newChr, newMin, newMax, newChrInfo, callback, soft, noRefresh) {
    var chrChanged = false;
    if (newChr) {
        if (newChr.indexOf('chr') == 0) newChr = newChr.substring(3);

        if (this.chr != newChr) chrChanged = true;
        this.chr = newChr;
        this.currentSeqMax = newChrInfo.length;
    }

    newMin = parseFloat(newMin);newMax = parseFloat(newMax);

    var newWidth = Math.max(10, newMax - newMin + 1);

    if (!soft) {
        var csm = this.currentSeqMax;
        if (csm <= 0) csm = 1000000000000;
        if (newMin < 1) {
            newMin = 1;newMax = newMin + newWidth - 1;
        }
        if (newMax > csm) {
            newMax = csm;
            newMin = Math.max(1, newMax - newWidth + 1);
        }
    }

    this.viewStart = newMin;
    this.viewEnd = newMax;
    var newScale = Math.max(this.featurePanelWidth || this.offscreenInitWidth, 50) / (this.viewEnd - this.viewStart);
    var oldScale = this.scale;
    var scaleChanged = Math.abs(newScale - oldScale) > 0.000001;
    this.scale = newScale;

    var newZS, oldZS;
    oldZS = this.zoomSliderValue;
    this.zoomSliderValue = newZS = this.zoomExpt * Math.log((this.viewEnd - this.viewStart + 1) / this.zoomBase);

    if (scaleChanged || chrChanged) {
        for (var i = 0; i < this.tiers.length; ++i) {
            this.tiers[i].viewportHolder.style.left = '5000px';
            this.tiers[i].overlay.style.left = '5000px';
        }

        if (!noRefresh) this.refresh(noRefresh);

        if (this.savedZoom) {
            newZS -= this.zoomMin;
            oldZS -= this.zoomMin;
            var difToActive = newZS - oldZS;
            var difToSaved = newZS - this.savedZoom;
            if (Math.abs(difToActive) > Math.abs(difToSaved)) {
                this.isSnapZooming = !this.isSnapZooming;
                this.savedZoom = oldZS;
            }
        } else {
            this.isSnapZooming = false;
            this.savedZoom = null;
        }
    } else {
        var viewCenter = (this.viewStart + this.viewEnd) / 2;

        for (var i = 0; i < this.tiers.length; ++i) {
            var offset = (this.viewStart - this.tiers[i].norigin) * this.scale;
            this.tiers[i].viewportHolder.style.left = '' + ((-offset | 0) - 1000) + 'px';
            this.tiers[i].drawOverlay();
        }
    }

    this.notifyLocation();

    this.spaceCheck(noRefresh);
    if (this.instrumentActivity) this.activityStartTime = Date.now() | 0;
    return callback();
};

Browser.prototype.setCenterLocation = function (newChr, newCenterLoc) {
    var halfWidth = (this.viewEnd - this.viewStart) / 2,
        newMin = newCenterLoc - halfWidth,
        newMax = newCenterLoc + halfWidth;
    this.setLocation(newChr, newMin, newMax);
};

Browser.prototype.pingActivity = function () {
    if (!this.instrumentActivity || !this.activityStartTime) return;

    var activity = 0;
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (this.tiers[ti].loaderButton.style.display !== 'none') ++activity;
    }

    if (activity == 0) {
        var now = Date.now() | 0;
        console.log('Loading took ' + (now - this.activityStartTime) + 'ms');
        this.activityStartTime = null;
    }
};

Browser.prototype.addInitListener = function (handler) {
    this.initListeners.push(handler);
};

Browser.prototype.addFeatureListener = function (handler, opts) {
    opts = opts || {};
    this.featureListeners.push(handler);
};

Browser.prototype.removeFeatureListener = function (handler, opts) {
    var idx = arrayIndexOf(this.featureListeners, handler);
    if (idx >= 0) {
        this.featureListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyFeature = function (ev, feature, hit, tier) {
    for (var fli = 0; fli < this.featureListeners.length; ++fli) {
        try {
            if (this.featureListeners[fli](ev, feature, hit, tier)) return;
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addFeatureHoverListener = function (handler, opts) {
    opts = opts || {};
    this.featureHoverListeners.push(Object.assign({ handler: handler }, opts));
};

Browser.prototype.removeFeatureHoverListener = function (handler, opts) {
    for (var i = 0; i < this.featureHoverListeners.length; ++i) {
        if (this.featureHoverListeners[i].handler == handler) {
            this.featureHoverListeners.splice(idx, 1);
            return;
        }
    }
};

Browser.prototype.notifyImmediateFeatureHover = function (ev, feature, hit, tier) {
    for (var fli = 0; fli < this.featureHoverListeners.length; ++fli) {
        if (this.featureHoverListeners[fli].immediate) {
            try {
                this.featureHoverListeners[fli].handler(ev, feature, hit, tier);
            } catch (ex) {
                console.log(ex.stack);
            }
        }
    }
};

Browser.prototype.notifyDeferredFeatureHover = function (ev, feature, hit, tier) {
    for (var fli = 0; fli < this.featureHoverListeners.length; ++fli) {
        if (!this.featureHoverListeners[fli].immediate) {
            try {
                this.featureHoverListeners[fli].handler(ev, feature, hit, tier);
            } catch (ex) {
                console.log(ex.stack);
            }
        }
    }
};

Browser.prototype.addViewListener = function (handler, opts) {
    opts = opts || {};
    this.viewListeners.push(handler);
};

Browser.prototype.removeViewListener = function (handler, opts) {
    var idx = arrayIndexOf(this.viewListeners, handler);
    if (idx >= 0) {
        this.viewListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyLocation = function () {
    var nvs = Math.max(1, this.viewStart | 0);
    var nve = this.viewEnd | 0;
    if (this.currentSeqMax > 0 && nve > this.currentSeqMax) nve = this.currentSeqMax;

    for (var lli = 0; lli < this.viewListeners.length; ++lli) {
        try {
            this.viewListeners[lli](this.chr, nvs, nve, this.zoomSliderValue, { current: this.zoomSliderValue,
                alternate: this.savedZoom + this.zoomMin || this.zoomMin,
                isSnapZooming: this.isSnapZooming,
                min: this.zoomMin,
                max: this.zoomMax }, this.viewStart, this.viewEnd);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addTierListener = function (handler) {
    this.tierListeners.push(handler);
};

Browser.prototype.removeTierListener = function (handler) {
    var idx = arrayIndexOf(this.tierListeners, handler);
    if (idx >= 0) {
        this.tierListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyTier = function (status, tier) {
    for (var tli = 0; tli < this.tierListeners.length; ++tli) {
        try {
            this.tierListeners[tli](status, tier);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addRegionSelectListener = function (handler) {
    this.regionSelectListeners.push(handler);
};

Browser.prototype.removeRegionSelectListener = function (handler) {
    var idx = arrayIndexOf(this.regionSelectListeners, handler);
    if (idx >= 0) {
        this.regionSelectListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyRegionSelect = function (chr, min, max) {
    for (var rli = 0; rli < this.regionSelectListeners.length; ++rli) {
        try {
            this.regionSelectListeners[rli](chr, min, max);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.highlightRegion = function (chr, min, max) {
    var thisB = this;

    if (chr == this.chr) {
        return this._highlightRegion(chr, min, max);
    }

    var ss = this.getSequenceSource();
    if (!ss) {
        throw 'Need a sequence source';
    }

    ss.getSeqInfo(chr, function (si) {
        if (!si) {
            var altChr;
            if (chr.indexOf('chr') == 0) {
                altChr = chr.substr(3);
            } else {
                altChr = 'chr' + chr;
            }
            ss.getSeqInfo(altChr, function (si2) {
                if (!si2) {
                    // Fail silently.
                } else {
                    return thisB._highlightRegion(altChr, min, max);
                }
            });
        } else {
            return thisB._highlightRegion(chr, min, max);
        }
    });
};

Browser.prototype._highlightRegion = function (chr, min, max) {
    for (var hi = 0; hi < this.highlights.length; ++hi) {
        var h = this.highlights[hi];
        if (h.chr == chr && h.min == min && h.max == max) return;
    }

    this.highlights.push(new Region(chr, min, max));
    var visStart = this.viewStart - 1000 / this.scale;
    var visEnd = this.viewEnd + 1000 / this.scale;
    if ((chr == this.chr || chr == 'chr' + this.chr) && min < visEnd && max > visStart) {
        this.drawOverlays();
    }

    this.notifyLocation();
};

Browser.prototype.clearHighlights = function () {
    this.highlights = [];
    this.drawOverlays();
    this.notifyLocation();
};

Browser.prototype.drawOverlays = function () {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        this.tiers[ti].drawOverlay();
    }
};

Browser.prototype.featuresInRegion = function (chr, min, max) {
    var features = [];
    if (chr !== this.chr) {
        return [];
    }

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var fl = this.tiers[ti].currentFeatures || [];
        for (var fi = 0; fi < fl.length; ++fi) {
            var f = fl[fi];
            if (f.min <= max && f.max >= min) {
                features.push(f);
            }
        }
    }
    return features;
};

Browser.prototype.getSelectedTier = function () {
    if (this.selectedTiers.length > 0) return this.selectedTiers[0];else return -1;
};

Browser.prototype.setSelectedTier = function (t) {
    if (t == null) {
        this.selectedTiers = [];
    } else {
        this.selectedTiers = [t];
    }
    this.markSelectedTiers();
    this.notifyTierSelection();
};

Browser.prototype.markSelectedTiers = function () {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var button = this.tiers[ti].nameButton;

        if (this.selectedTiers.indexOf(ti) >= 0) {
            button.classList.add('active');
        } else {
            button.classList.remove('active');
        }
    }
    if (this.selectedTiers.length > 0) {
        var browserMid = this.browserHolder.offsetTop + this.browserHolder.offsetHeight / 2;
        if (browserMid > document.body.scrollTop && browserMid + 100 < document.body.scrollTop + window.innerHeight) this.browserHolder.focus();
    }
};

Browser.prototype.addTierSelectionListener = function (handler) {
    this.tierSelectionListeners.push(handler);
};

Browser.prototype.removeTierSelectionListener = function (handler) {
    var idx = arrayIndexOf(this.tierSelectionListeners, handler);
    if (idx >= 0) {
        this.tierSelectionListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyTierSelection = function () {
    for (var fli = 0; fli < this.tierSelectionListeners.length; ++fli) {
        try {
            this.tierSelectionListeners[fli](this.selectedTiers);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addTierSelectionWrapListener = function (f) {
    this.tierSelectionWrapListeners.push(f);
};

Browser.prototype.removeTierSelectionWrapListener = function (handler) {
    var idx = arrayIndexOf(this.tierSelectionWrapListeners, handler);
    if (idx >= 0) {
        this.tierSelectionWrapListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyTierSelectionWrap = function (i) {
    for (var fli = 0; fli < this.tierSelectionWrapListeners.length; ++fli) {
        try {
            this.tierSelectionWrapListeners[fli](i);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.positionRuler = function () {
    var display = 'none';
    var left = '';
    var right = '';

    if (this.rulerLocation == 'center') {
        display = 'block';
        left = '' + (this.featurePanelWidth / 2 | 0) + 'px';
    } else if (this.rulerLocation == 'left') {
        display = 'block';
        left = '0px';
    } else if (this.rulerLocation == 'right') {
        display = 'block';
        right = '0px';
    } else {
        display = 'none';
    }

    this.ruler.style.display = display;
    this.ruler.style.left = left;
    this.ruler.style.right = right;

    if (this.singleBaseHighlight) {
        this.ruler2.style.display = 'block';
        this.ruler2.style.borderWidth = '1px';
        if (this.scale < 1) {
            this.ruler2.style.width = '0px';
            this.ruler2.style.borderRightWidth = '0px';
        } else {
            this.ruler2.style.width = this.scale + 'px';
            this.ruler2.style.borderRightWidth = '1px';
        }
        // Position accompanying single base location text
        this.locSingleBase.style.visibility = 'visible';
        var centreOffset = this.featurePanelWidth / 2 - this.locSingleBase.offsetWidth / 2 + this.ruler2.offsetWidth / 2;
        this.locSingleBase.style.left = '' + (centreOffset | 0) + 'px';
    } else {
        this.locSingleBase.style.visibility = 'hidden';
        this.ruler2.style.width = '1px';
        this.ruler2.style.borderWidth = '0px';
        this.ruler2.style.display = this.rulerLocation == 'center' ? 'none' : 'block';
    }

    this.ruler2.style.left = '' + (this.featurePanelWidth / 2 | 0) + 'px';

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var tier = this.tiers[ti];
        var q = tier.quantOverlay;

        var quant;
        if (tier.subtiers && tier.subtiers.length > 0) quant = tier.subtiers[0].quant;

        if (q) {
            q.style.display = quant ? display : 'none';
            q.style.left = left;
            q.style.right = right;
        }
    }
};

Browser.prototype.featureDoubleClick = function (hit, rx, ry) {
    if (!hit || hit.length == 0) return;

    var f = hit[hit.length - 1];

    if (!f.min || !f.max) {
        return;
    }

    var fstart = ((f.min | 0) - (this.viewStart | 0)) * this.scale;
    var fwidth = (f.max - f.min + 1) * this.scale;

    var newMid = ((f.min | 0) + (f.max | 0)) / 2;
    if (fwidth > 10) {
        var frac = 1.0 * (rx - fstart) / fwidth;
        if (frac < 0.3) {
            newMid = f.min | 0;
        } else if (frac > 0.7) {
            newMid = (f.max | 0) + 1;
        }
    }

    var width = this.viewEnd - this.viewStart;
    this.setLocation(null, newMid - width / 2, newMid + width / 2);
};

Browser.prototype.zoomForScale = function (scale) {
    var ssScale;
    if (scale > this.highZoomThreshold) {
        ssScale = 'high';
    } else if (scale > this.mediumZoomThreshold) {
        ssScale = 'medium';
    } else {
        ssScale = 'low';
    }
    return ssScale;
};

Browser.prototype.zoomForCurrentScale = function () {
    return this.zoomForScale(this.scale);
};

Browser.prototype.updateHeight = function () {
    var tierTotal = 0;
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        tierTotal += this.tiers[ti].currentHeight || 30;
    }this.ruler.style.height = '' + tierTotal + 'px';
    this.ruler2.style.height = '' + tierTotal + 'px';
    this.browserHolder.style.display = 'block';
    this.browserHolder.style.display = '-webkit-flex';
    this.browserHolder.style.display = 'flex';
    // this.svgHolder.style.maxHeight = '' + Math.max(tierTotal, 500) + 'px';
};

Browser.prototype.scrollArrowKey = function (ev, dir) {
    if (this.reverseKeyScrolling) dir = -dir;

    if (ev.ctrlKey || ev.metaKey) {
        var fedge = false;
        if (ev.shiftKey) {
            fedge = true;
        }

        this.leap(dir, fedge);
    } else if (this.scale > 1) {
        // per-base scrolling mode, tries to perfectly center.
        var mid = (this.viewStart + this.viewEnd) / 2;
        var err = mid - Math.round(mid);
        var n = 1;
        if (ev.shiftKey) n *= 10;
        if (dir > 0) {
            n = -n;
            n -= err;
            if (err > 0) n += 1;
        } else {
            n -= err;
            if (err < 0) n -= 1;
        }
        this.setLocation(null, this.viewStart + n, this.viewEnd + n);
    } else {
        this.move(ev.shiftKey ? 100 * dir : 25 * dir);
    }
};

Browser.prototype.leap = function (dir, fedge) {
    var thisB = this;
    var pos = (thisB.viewStart + thisB.viewEnd + 1) / 2 | 0;
    if (dir > 0 && thisB.viewStart <= 1) {
        pos -= 100000000;
    } else if (dir < 0 && thisB.viewEnd >= thisB.currentSeqMax) {
        pos += 100000000;
    }

    var st = thisB.getSelectedTier();
    if (st < 0) return;
    var tier = thisB.tiers[st];

    if (tier && (tier.featureSource && this.sourceAdapterIsCapable(tier.featureSource, 'quantLeap') && typeof tier.quantLeapThreshold == 'number' || tier.featureSource && this.sourceAdapterIsCapable(tier.featureSource, 'leap'))) {
        tier.findNextFeature(thisB.chr, pos, -dir, fedge, function (nxt) {
            if (nxt) {
                var nmin = nxt.min;
                var nmax = nxt.max;
                if (fedge) {
                    if (dir > 0) {
                        if (nmin > pos + 1) {
                            nmax = nmin;
                        } else {
                            nmax++;
                            nmin = nmax;
                        }
                    } else {
                        if (nmax < pos - 1) {
                            nmax++;
                            nmin = nmax;
                        } else {
                            nmax = nmin;
                        }
                    }
                }
                var wid = thisB.viewEnd - thisB.viewStart + 1;
                if (parseFloat(wid / 2) == parseInt(wid / 2)) {
                    wid--;
                }
                var newStart = (nmin + nmax - wid) / 2 + 1;
                var newEnd = newStart + wid - 1;
                var pos2 = pos;
                thisB.setLocation(nxt.segment, newStart, newEnd);
            } else {
                alert('no next feature'); // FIXME better reporting would be nice!
            }
        });
    } else {
        this.move(100 * dir);
    }
};

Browser.prototype.nameForCoordSystem = function (cs) {
    var primary = null,
        ucsc = null;
    if (this.assemblyNamePrimary) {
        primary = '' + cs.auth;
        if (typeof cs.version !== 'undefined') primary += cs.version;
    }
    if (this.assemblyNameUcsc) {
        ucsc = cs.ucscName;
    }
    if (primary != null && ucsc != null) return primary + '/' + ucsc;else return primary || ucsc || 'unknown';
};

Browser.prototype.makeLoader = function (size) {
    size = size || 16;
    var retina = window.devicePixelRatio > 1;
    if (size < 20) {
        return makeElement('img', null, { src: this.resolveURL('$$img/spinner_' + (retina ? 16 : 32) + '.gif'), width: '16', height: '16' });
    } else {
        return makeElement('img', null, { src: this.resolveURL('$$img/spinner_' + (retina ? 24 : 48) + '.gif'), width: '24', height: '24' });
    }
};

Browser.prototype.canFetchPlainHTTP = function () {
    var self = this;
    if (!this._plainHTTPPromise) {
        var worker = this.getWorker();
        if (worker) {
            this._plainHTTPPromise = new Promise(function (resolve, reject) {
                worker.postCommand({ command: 'textxhr',
                    uri: self.httpCanaryURL }, function (result, err) {
                    if (result) {
                        resolve(true);
                    } else {
                        resolve(false);
                    }
                });
            });
        } else {
            this._plainHTTPPromise = new Promise(function (resolve, reject) {
                textXHR(self.httpCanaryURL, function (result, err) {
                    if (result) {
                        resolve(true);
                    } else {
                        resolve(false);
                    }
                }, { timeout: 2000 });
            });
        }
    }
    return this._plainHTTPPromise;
};

Browser.prototype.getWorker = function () {
    if (!this.useFetchWorkers || !this.fetchWorkers || this.fetchWorkers.length == 0) return null;

    if (this.nextWorker >= this.fetchWorkers.length) this.nextWorker = 0;
    return this.fetchWorkers[this.nextWorker++];
};

Browser.prototype.registerResolver = function (resolver) {
    var id = 'res' + ++this.resolverSeed;
    this.resolvers[id] = resolver;
    return id;
};

function FetchWorker(browser, worker) {
    var thisB = this;
    this.tagSeed = 0;
    this.callbacks = {};
    this.browser = browser;
    this.worker = worker;

    this.worker.onmessage = function (ev) {
        var data = ev.data;

        if (!data.cmd) {
            var cb = thisB.callbacks[data.tag];
            if (cb) {
                cb(data.result, data.error);
                delete thisB.callbacks[data.tag];
            }
        } else if (data.cmd == 'resolve') {
            var resolver = thisB.browser.resolvers[data.resolver];
            if (resolver) {
                resolver(data.url).then(function (url) {
                    thisB.worker.postMessage({
                        tag: data.tag,
                        url: url
                    });
                }).catch(function (err) {
                    console.log(err);
                    thisB.worker.postMessage({
                        tag: data.tag,
                        err: err.toString()
                    });
                });
            } else {
                console.log('No resolver ' + data.resolver);
            }
        } else {
            console.log('Bad worker callback ' + data.cmd);
        }
    };
}

function makeFetchWorker(browser) {
    var wurl = browser.resolveURL(browser.workerPath);
    if (wurl.indexOf('//') == 0) {
        var proto = window.location.protocol;
        if (proto == 'https:') wurl = 'https:' + wurl;else wurl = 'http:' + wurl;
    }

    var wscript = 'importScripts("' + wurl + '?version=' + VERSION + '");';
    var wblob = new Blob([wscript], { type: 'application/javascript' });

    return new Promise(function (resolve, reject) {
        var worker = new Worker(URL.createObjectURL(wblob));

        worker.onmessage = function (ev) {
            if (ev.data.tag === 'init') {
                console.log('Worker initialized');
                resolve(new FetchWorker(browser, worker));
            }
        };

        worker.onerror = function (ev) {
            reject(ev.message);
        };
    });
}

FetchWorker.prototype.postCommand = function (cmd, callback, transfer) {
    var tag = 'x' + ++this.tagSeed;
    cmd.tag = tag;
    this.callbacks[tag] = callback;
    this.worker.postMessage(cmd, transfer);
};

FetchWorker.prototype.terminate = function () {
    this.worker.terminate();
};

if (typeof module !== 'undefined') {
    module.exports = {
        Browser: Browser
    };

    // Required because they add stuff to Browser.prototype
    require('./browser-ui');
    require('./track-adder');
    require('./feature-popup');
    require('./tier-actions');
    require('./domui');
    require('./search');

    var sa = require('./sourceadapters');
    var TwoBitSequenceSource = sa.TwoBitSequenceSource;
    var EnsemblSequenceSource = sa.EnsemblSequenceSource;
    var DASSequenceSource = sa.DASSequenceSource;

    var KnownSpace = require('./kspace').KnownSpace;

    var DASRegistry = require('./das').DASRegistry;
}

function SourceCache() {
    this.sourcesByURI = {};
}

SourceCache.prototype.get = function (conf) {
    var scb = this.sourcesByURI[sourceDataURI(conf)];
    if (scb) {
        for (var si = 0; si < scb.configs.length; ++si) {
            if (sourcesAreEqualModuloStyle(scb.configs[si], conf)) {
                return scb.sources[si];
            }
        }
    }
};

SourceCache.prototype.put = function (conf, source) {
    var uri = sourceDataURI(conf);
    var scb = this.sourcesByURI[uri];
    if (!scb) {
        scb = { configs: [], sources: [] };
        this.sourcesByURI[uri] = scb;
    }
    scb.configs.push(conf);
    scb.sources.push(source);
};

},{"./browser-ui":5,"./chainset":7,"./das":10,"./default-renderer":11,"./domui":12,"./dummy-renderer":13,"./feature-popup":21,"./kspace":25,"./multi-renderer":28,"./numformats":29,"./search":34,"./sha1":37,"./sourceadapters":38,"./sourcecompare":39,"./sub-renderer":42,"./thub":48,"./tier":51,"./tier-actions":49,"./track-adder":52,"./utils":55,"./version":57,"es6-promise":59}],7:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// chainset.js: liftover support
//

"use strict";

if (typeof require !== 'undefined') {
    var das = require('./das');
    var DASSource = das.DASSource;
    var DASSegment = das.DASSegment;

    var utils = require('./utils');
    var pusho = utils.pusho;
    var shallowCopy = utils.shallowCopy;

    var parseCigar = require('./cigar').parseCigar;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;

    var bbi = require('./bigwig');
    var makeBwg = bbi.makeBwg;

    var Promise = require('es6-promise').Promise;
}

function Chainset(conf, srcTag, destTag, coords) {
    if (typeof conf == 'string') {
        this.uri = conf;
        this.srcTag = srcTag;
        this.destTag = destTag;
        this.coords = coords;
    } else {
        this.uri = conf.uri;
        this.srcTag = conf.srcTag;
        this.destTag = conf.destTag;
        this.coords = shallowCopy(conf.coords);
        this.type = conf.type;
        this.credentials = conf.credentials;
    }

    this.chainsBySrc = {};
    this.chainsByDest = {};
    this.postFetchQueues = {};
    this.fetchedTiles = {};
    this.granularity = 1000000; // size in bases of tile to fetch

    if (this.type == 'bigbed') {
        this.chainFetcher = new BBIChainFetcher(this.uri, this.credentials);
    } else if (this.type == 'alias') {
        this.chainFetcher = new AliasChainFetcher(conf);
    } else {
        this.chainFetcher = new DASChainFetcher(this.uri, this.srcTag, this.destTag);
    }
};

Chainset.prototype.exportConfig = function () {
    return {
        uri: this.uri,
        srcTag: this.srcTag,
        destTag: this.destTag,
        coords: this.coords,
        type: this.type,
        credentials: this.credentials
    };
};

Chainset.prototype.mapPoint = function (chr, pos) {
    var chains = this.chainsBySrc[chr] || [];
    for (var ci = 0; ci < chains.length; ++ci) {
        var c = chains[ci];
        if (pos >= c.srcMin && pos <= c.srcMax) {
            var cpos;
            if (c.srcOri == '-') {
                cpos = c.srcMax - pos;
            } else {
                cpos = pos - c.srcMin;
            }
            var blocks = c.blocks;
            for (var bi = 0; bi < blocks.length; ++bi) {
                var b = blocks[bi];
                var bSrc = b[0];
                var bDest = b[1];
                var bSize = b[2];
                if (cpos >= bSrc && cpos <= bSrc + bSize) {
                    var apos = cpos - bSrc;

                    var dpos;
                    if (c.destOri == '-') {
                        dpos = c.destMax - bDest - apos;
                    } else {
                        dpos = apos + bDest + c.destMin;
                    }
                    return { seq: c.destChr, pos: dpos, flipped: c.srcOri != c.destOri };
                }
            }
        }
    }
    return null;
};

Chainset.prototype.mapSegment = function (chr, min, max) {
    var chains = this.chainsBySrc[chr] || [];
    var mappings = [];
    for (var ci = 0; ci < chains.length; ++ci) {
        var c = chains[ci];
        if (max >= c.srcMin && min <= c.srcMax) {
            var cmin, cmax;
            if (c.srcOri == '-') {
                cmin = c.srcMax - max;
                cmax = c.srcMax - min;
            } else {
                cmin = min - c.srcMin;
                cmax = max - c.srcMin;
            }
            var blocks = c.blocks;
            for (var bi = 0; bi < blocks.length; ++bi) {
                var b = blocks[bi];
                var bSrc = b[0];
                var bDest = b[1];
                var bSize = b[2];
                if (cmax >= bSrc && cmin <= bSrc + bSize) {
                    var m = {
                        segment: c.destChr,
                        flipped: c.srcOri == '-' ^ c.destOri == '-' };

                    if (c.destOri == '-') {
                        if (cmin >= bSrc) {
                            m.max = c.destMax - bDest - cmin + bSrc;
                        } else {
                            m.max = c.destMax - bDest;
                            m.partialMax = bSrc - cmin;
                        }
                        if (cmax <= bSrc + bSize) {
                            m.min = c.destMax - bDest - cmax + bSrc;
                        } else {
                            m.min = c.destMax - bDest - bSize;
                            m.partialMin = cmax - bSrc - bSize;
                        }
                    } else {
                        if (cmin >= bSrc) {
                            m.min = c.destMin + bDest + cmin - bSrc;
                        } else {
                            m.min = c.destMin + bDest;
                            m.partialMin = bSrc - cmin;
                        }
                        if (cmax <= bSrc + bSize) {
                            m.max = c.destMin + bDest + cmax - bSrc;
                        } else {
                            m.max = c.destMin + bDest + bSize;
                            m.partialMax = cmax - bSrc - bSize;
                        }
                    }
                    mappings.push(m);
                }
            }
        }
    }
    return mappings;
};

Chainset.prototype.unmapPoint = function (chr, pos) {
    var chains = this.chainsByDest[chr] || [];
    for (var ci = 0; ci < chains.length; ++ci) {
        var c = chains[ci];
        if (pos >= c.destMin && pos <= c.destMax) {
            var cpos;
            if (c.srcOri == '-') {
                cpos = c.destMax - pos;
            } else {
                cpos = pos - c.destMin;
            }

            var blocks = c.blocks;
            for (var bi = 0; bi < blocks.length; ++bi) {
                var b = blocks[bi];
                var bSrc = b[0];
                var bDest = b[1];
                var bSize = b[2];

                if (cpos >= bDest && cpos <= bDest + bSize) {
                    var apos = cpos - bDest;

                    var dpos = apos + bSrc + c.srcMin;
                    var dpos;
                    if (c.destOri == '-') {
                        dpos = c.srcMax - bSrc - apos;
                    } else {
                        dpos = apos + bSrc + c.srcMin;
                    }
                    return { seq: c.srcChr, pos: dpos, flipped: c.srcOri != c.destOri };
                }
            }
            // return null;
        }
    }
    return null;
};

Chainset.prototype.sourceBlocksForRange = function (chr, min, max, callback) {
    var STATE_PENDING = 1;
    var STATE_FETCHED = 2;

    var thisCS = this;
    var minTile = min / this.granularity | 0;
    var maxTile = max / this.granularity | 0;

    var needsNewOrPending = false;
    var needsNewFetch = false;
    for (var t = minTile; t <= maxTile; ++t) {
        var tn = chr + '_' + t;
        if (this.fetchedTiles[tn] != STATE_FETCHED) {
            needsNewOrPending = true;
            if (this.fetchedTiles[tn] != STATE_PENDING) {
                this.fetchedTiles[tn] = STATE_PENDING;
                needsNewFetch = true;
            }
        }
    }

    if (needsNewOrPending) {
        if (!this.postFetchQueues[chr]) {
            this.chainFetcher.fetchChains(chr, minTile * this.granularity, (maxTile + 1) * this.granularity - 1).then(function (chains) {
                if (!thisCS.chainsByDest) thisCS.chainsByDest[chr] = [];
                for (var ci = 0; ci < chains.length; ++ci) {
                    var chain = chains[ci];

                    {
                        var cbs = thisCS.chainsBySrc[chain.srcChr];
                        if (!cbs) {
                            thisCS.chainsBySrc[chain.srcChr] = [chain];
                        } else {
                            var present = false;
                            for (var oci = 0; oci < cbs.length; ++oci) {
                                var oc = cbs[oci];
                                if (oc.srcMin == chain.srcMin && oc.srcMax == chain.srcMax) {
                                    present = true;
                                    break;
                                }
                            }
                            if (!present) cbs.push(chain);
                        }
                    }

                    {
                        var cbd = thisCS.chainsByDest[chain.destChr];
                        if (!cbd) {
                            thisCS.chainsByDest[chain.destChr] = [chain];
                        } else {
                            var present = false;
                            for (var oci = 0; oci < cbd.length; ++oci) {
                                var oc = cbd[oci];
                                if (oc.destMin == chain.destMin && oc.destMax == chain.destMax) {
                                    present = true;
                                    break;
                                }
                            }
                            if (!present) cbd.push(chain);
                        }
                    }
                }
                for (var t = minTile; t <= maxTile; ++t) {
                    var tn = chr + '_' + t;
                    thisCS.fetchedTiles[tn] = STATE_FETCHED;
                }
                if (thisCS.postFetchQueues[chr]) {
                    var pfq = thisCS.postFetchQueues[chr];
                    for (var i = 0; i < pfq.length; ++i) {
                        pfq[i]();
                    }
                    thisCS.postFetchQueues[chr] = null;
                }
            }).catch(function (err) {
                console.log(err);
            });
        }

        pusho(this.postFetchQueues, chr, function () {
            // Will either succeed if the tiles that are needed have already been fetched,
            // or queue up a new fetch.

            thisCS.sourceBlocksForRange(chr, min, max, callback);
        });
    } else {
        var srcBlocks = [];
        var chains = this.chainsByDest[chr] || [];
        for (var ci = 0; ci < chains.length; ++ci) {
            var c = chains[ci];
            if (min <= c.destMax && max >= c.destMin) {
                var cmin, cmax;
                if (c.srcOri == '-') {
                    cmin = c.destMax - max;
                    cmax = c.destMax - min;
                } else {
                    cmin = min - c.destMin;
                    cmax = max - c.destMin;
                }

                var blocks = c.blocks;
                for (var bi = 0; bi < blocks.length; ++bi) {
                    var b = blocks[bi];
                    var bSrc = b[0];
                    var bDest = b[1];
                    var bSize = b[2];

                    if (cmax >= bDest && cmin <= bDest + bSize) {
                        var amin = Math.max(cmin, bDest) - bDest;
                        var amax = Math.min(cmax, bDest + bSize) - bDest;

                        if (c.destOri == '-') {
                            srcBlocks.push(new DASSegment(c.srcChr, c.srcMax - bSrc - amax, c.srcMax - bSrc - amin));
                        } else {
                            srcBlocks.push(new DASSegment(c.srcChr, c.srcMin + amin + bSrc, c.srcMin + amax + bSrc));
                        }
                    }
                }
            }
        }
        callback(srcBlocks);
    }
};

function DASChainFetcher(uri, srcTag, destTag) {
    this.source = new DASSource(uri);
    this.srcTag = srcTag;
    this.destTag = destTag;
}

DASChainFetcher.prototype.fetchChains = function (chr, _min, _max) {
    var thisCS = this;

    return new Promise(function (resolve, reject) {
        thisCS.source.alignments(chr, {}, function (aligns) {
            var chains = [];

            for (var ai = 0; ai < aligns.length; ++ai) {
                var aln = aligns[ai];
                for (var bi = 0; bi < aln.blocks.length; ++bi) {
                    var block = aln.blocks[bi];
                    var srcSeg, destSeg;
                    for (var si = 0; si < block.segments.length; ++si) {
                        var seg = block.segments[si];
                        var obj = aln.objects[seg.object];
                        if (obj.dbSource === thisCS.srcTag) {
                            srcSeg = seg;
                        } else if (obj.dbSource === thisCS.destTag) {
                            destSeg = seg;
                        }
                    }
                    if (srcSeg && destSeg) {
                        var chain = {
                            srcChr: aln.objects[srcSeg.object].accession,
                            srcMin: srcSeg.min | 0,
                            srcMax: srcSeg.max | 0,
                            srcOri: srcSeg.strand,
                            destChr: aln.objects[destSeg.object].accession,
                            destMin: destSeg.min | 0,
                            destMax: destSeg.max | 0,
                            destOri: destSeg.strand,
                            blocks: []
                        };

                        var srcops = parseCigar(srcSeg.cigar),
                            destops = parseCigar(destSeg.cigar);

                        var srcOffset = 0,
                            destOffset = 0;
                        var srci = 0,
                            desti = 0;
                        while (srci < srcops.length && desti < destops.length) {
                            if (srcops[srci].op == 'M' && destops[desti].op == 'M') {
                                var blockLen = Math.min(srcops[srci].cnt, destops[desti].cnt);
                                chain.blocks.push([srcOffset, destOffset, blockLen]);
                                if (srcops[srci].cnt == blockLen) {
                                    ++srci;
                                } else {
                                    srcops[srci].cnt -= blockLen;
                                }
                                if (destops[desti].cnt == blockLen) {
                                    ++desti;
                                } else {
                                    destops[desti] -= blockLen;
                                }
                                srcOffset += blockLen;
                                destOffset += blockLen;
                            } else if (srcops[srci].op == 'I') {
                                destOffset += srcops[srci++].cnt;
                            } else if (destops[desti].op == 'I') {
                                srcOffset += destops[desti++].cnt;
                            }
                        }

                        chains.push(chain);
                    }
                }
            }
            resolve(chains);
        });
    });
};

function BBIChainFetcher(uri, credentials) {
    var self = this;
    this.uri = uri;
    this.credentials = credentials;

    this.bwg = new Promise(function (resolve, reject) {
        makeBwg(new URLFetchable(self.uri, { credentials: self.credentials,
            resolver: self.resolver }), function (bwg, err) {
            if (bwg) {
                resolve(bwg);
            } else {
                reject(err);
            }
        });
    });

    this.bwg.then(function (bwg, err) {
        if (err) console.log(err);
    });
}

function pi(x) {
    return parseInt(x);
}

function cleanChr(c) {
    if (c.indexOf('chr') == 0) return c.substr(3);else return c;
}

function bbiFeatureToChain(feature) {
    var chain = {
        srcChr: cleanChr(feature.srcChrom),
        srcMin: parseInt(feature.srcStart),
        srcMax: parseInt(feature.srcEnd),
        srcOri: feature.srcOri,
        destChr: cleanChr(feature.segment),
        destMin: feature.min - 1, // Convert back from bigbed parser
        destMax: feature.max,
        destOri: feature.ori,
        blocks: []
    };
    var srcStarts = feature.srcStarts.split(',').map(pi);
    var destStarts = feature.destStarts.split(',').map(pi);
    var blockLengths = feature.blockLens.split(',').map(pi);
    for (var bi = 0; bi < srcStarts.length; ++bi) {
        chain.blocks.push([srcStarts[bi], destStarts[bi], blockLengths[bi]]);
    }

    return chain;
}

BBIChainFetcher.prototype.fetchChains = function (chr, min, max) {
    return this.bwg.then(function (bwg, err) {
        if (!bwg) throw Error("No BWG");

        return new Promise(function (resolve, reject) {
            bwg.getUnzoomedView().readWigData(chr, min, max, function (feats) {
                resolve(feats.map(bbiFeatureToChain));
            });
        });
    });
};

function AliasChainFetcher(conf) {
    this.conf = conf;
    this.forwardAliases = {};
    var sa = conf.sequenceAliases || [];
    for (var ai = 0; ai < sa.length; ++ai) {
        var al = sa[ai];
        if (al.length < 2) continue;

        var fa = [];
        for (var i = 0; i < al.length - 1; ++i) {
            fa.push(al[i]);
        }this.forwardAliases[al[al.length - 1]] = fa;
    }
}

AliasChainFetcher.prototype.fetchChains = function (chr, min, max) {
    var resp = [];
    var fa = this.forwardAliases[chr] || [];
    for (var i = 0; i < fa.length; ++i) {
        resp.push({
            srcChr: fa[i],
            srcMin: 1,
            srcMax: 1000000000,
            srcOri: '+',
            destChr: chr,
            destMin: 1,
            destMax: 1000000000,
            destOri: '+',
            blocks: [[1, 1, 1000000000]]
        });
    }

    return Promise.resolve(resp);
};

if (typeof module !== 'undefined') {
    module.exports = {
        Chainset: Chainset
    };
}

},{"./bigwig":3,"./bin":4,"./cigar":8,"./das":10,"./utils":55,"es6-promise":59}],8:[function(require,module,exports){
'use strict';

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// chainset.js: liftover support
//

var CIGAR_REGEXP = new RegExp('([0-9]*)([MIDS])', 'g');

function parseCigar(cigar) {
    var cigops = [];
    var match;
    while ((match = CIGAR_REGEXP.exec(cigar)) != null) {
        var count = match[1];
        if (count.length == 0) {
            count = 1;
        }
        cigops.push({ cnt: count | 0, op: match[2] });
    }
    return cigops;
}

if (typeof module !== 'undefined') {
    module.exports = {
        parseCigar: parseCigar
    };
}

},{}],9:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// color.js
//

"use strict";

function DColour(red, green, blue, name) {
    this.red = red | 0;
    this.green = green | 0;
    this.blue = blue | 0;
    if (name) {
        this.name = name;
    }
}

DColour.prototype.toSvgString = function () {
    if (!this.name) {
        this.name = "rgb(" + this.red + "," + this.green + "," + this.blue + ")";
    }

    return this.name;
};

function hex2(x) {
    var y = '00' + x.toString(16);
    return y.substring(y.length - 2);
}

DColour.prototype.toHexString = function () {
    return '#' + hex2(this.red) + hex2(this.green) + hex2(this.blue);
};

var palette = {
    red: new DColour(255, 0, 0, 'red'),
    green: new DColour(0, 255, 0, 'green'),
    blue: new DColour(0, 0, 255, 'blue'),
    yellow: new DColour(255, 255, 0, 'yellow'),
    white: new DColour(255, 255, 255, 'white'),
    black: new DColour(0, 0, 0, 'black'),
    gray: new DColour(180, 180, 180, 'gray'),
    grey: new DColour(180, 180, 180, 'grey'),
    lightskyblue: new DColour(135, 206, 250, 'lightskyblue'),
    lightsalmon: new DColour(255, 160, 122, 'lightsalmon'),
    hotpink: new DColour(255, 105, 180, 'hotpink')
};

var COLOR_RE = new RegExp('^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$');
var CSS_COLOR_RE = /rgb\(([0-9]+),([0-9]+),([0-9]+)\)/;

function dasColourForName(name) {
    var c = palette[name];
    if (!c) {
        var match = COLOR_RE.exec(name);
        if (match) {
            c = new DColour('0x' + match[1] | 0, '0x' + match[2] | 0, '0x' + match[3] | 0, name);
            palette[name] = c;
        } else {
            match = CSS_COLOR_RE.exec(name);
            if (match) {
                c = new DColour(match[1] | 0, match[2] | 0, match[3] | 0, name);
                palette[name] = c;
            } else {
                console.log("couldn't handle color: " + name);
                c = palette.black;
                palette[name] = c;
            }
        }
    }
    return c;
}

function makeColourSteps(steps, stops, colours) {
    var dcolours = [];
    for (var ci = 0; ci < colours.length; ++ci) {
        dcolours.push(dasColourForName(colours[ci]));
    }

    var grad = [];
    STEP_LOOP: for (var si = 0; si < steps; ++si) {
        var rs = 1.0 * si / (steps - 1);
        var score = stops[0] + (stops[stops.length - 1] - stops[0]) * rs;
        for (var i = 0; i < stops.length - 1; ++i) {
            if (score >= stops[i] && score <= stops[i + 1]) {
                var frac = (score - stops[i]) / (stops[i + 1] - stops[i]);
                var ca = dcolours[i];
                var cb = dcolours[i + 1];

                var fill = new DColour(ca.red * (1.0 - frac) + cb.red * frac | 0, ca.green * (1.0 - frac) + cb.green * frac | 0, ca.blue * (1.0 - frac) + cb.blue * frac | 0).toSvgString();
                grad.push(fill);

                continue STEP_LOOP;
            }
        }
        throw 'Bad step';
    }

    return grad;
}

function makeGradient(steps, color1, color2, color3) {
    if (color3) {
        return makeColourSteps(steps, [0, 0.5, 1], [color1, color2, color3]);
    } else {
        return makeColourSteps(steps, [0, 1], [color1, color2]);
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        makeColourSteps: makeColourSteps,
        makeGradient: makeGradient,
        dasColourForName: dasColourForName
    };
}

},{}],10:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// das.js: queries and low-level data model.
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
    var pusho = utils.pusho;

    var color = require('./color');
    var makeColourSteps = color.makeColourSteps;
}

var dasLibErrorHandler = function dasLibErrorHandler(errMsg) {
    alert(errMsg);
};
var dasLibRequestQueue = new Array();

function DASSegment(name, start, end, description) {
    this.name = name;
    this.start = start;
    this.end = end;
    this.description = description;
}
DASSegment.prototype.toString = function () {
    return this.name + ':' + this.start + '..' + this.end;
};
DASSegment.prototype.isBounded = function () {
    return this.start && this.end;
};
DASSegment.prototype.toDASQuery = function () {
    var q = 'segment=' + this.name;
    if (this.start && this.end) {
        q += ':' + this.start + ',' + this.end;
    }
    return q;
};

function DASSource(a1, a2) {
    var options;
    if (typeof a1 == 'string') {
        this.uri = a1;
        options = a2 || {};
    } else {
        options = a1 || {};
    }
    for (var k in options) {
        this[k] = options[k];
    }

    if (!this.coords) {
        this.coords = [];
    }
    if (!this.props) {
        this.props = {};
    }

    this.dasBaseURI = this.uri;
    if (this.dasBaseURI && this.dasBaseURI.substr(this.uri.length - 1) != '/') {
        this.dasBaseURI = this.dasBaseURI + '/';
    }
}

DASSource.prototype.getURI = function (uri) {
    if (this.resolver) {
        return this.resolver(uri).then(function (urlOrObj) {
            if (typeof urlOrObj === 'string') {
                return urlOrObj;
            } else {
                return urlOrObj.url;
            }
        });
    } else {
        return Promise.resolve(uri);
    }
};

function DASCoords() {}

function coordsMatch(c1, c2) {
    return c1.taxon == c2.taxon && c1.auth == c2.auth && c1.version == c2.version;
}

//
// DAS 1.6 entry_points command
//

DASSource.prototype.entryPoints = function (callback) {
    var dasURI = this.dasBaseURI + 'entry_points';
    this.doCrossDomainRequest(dasURI, function (responseXML) {
        if (!responseXML) {
            return callback([]);
        }

        var entryPoints = new Array();

        var segs = responseXML.getElementsByTagName('SEGMENT');
        for (var i = 0; i < segs.length; ++i) {
            var seg = segs[i];
            var segId = seg.getAttribute('id');

            var segSize = seg.getAttribute('size');
            var segMin, segMax;
            if (segSize) {
                segMin = 1;segMax = segSize | 0;
            } else {
                segMin = seg.getAttribute('start');
                if (segMin) {
                    segMin |= 0;
                }
                segMax = seg.getAttribute('stop');
                if (segMax) {
                    segMax |= 0;
                }
            }
            var segDesc = null;
            if (seg.firstChild) {
                segDesc = seg.firstChild.nodeValue;
            }
            entryPoints.push(new DASSegment(segId, segMin, segMax, segDesc));
        }
        callback(entryPoints);
    });
};

//
// DAS 1.6 sequence command
// Do we need an option to fall back to the dna command?
//

function DASSequence(name, start, end, alpha, seq) {
    this.name = name;
    this.start = start;
    this.end = end;
    this.alphabet = alpha;
    this.seq = seq;
}

DASSource.prototype.sequence = function (segment, callback) {
    var dasURI = this.dasBaseURI + 'sequence?' + segment.toDASQuery();
    this.doCrossDomainRequest(dasURI, function (responseXML) {
        if (!responseXML) {
            callback([]);
            return;
        } else {
            var seqs = new Array();

            var segs = responseXML.getElementsByTagName('SEQUENCE');
            for (var i = 0; i < segs.length; ++i) {
                var seg = segs[i];
                var segId = seg.getAttribute('id');
                var segMin = seg.getAttribute('start');
                var segMax = seg.getAttribute('stop');
                var segAlpha = 'DNA';
                var segSeq = null;
                if (seg.firstChild) {
                    var rawSeq = seg.firstChild.nodeValue;
                    segSeq = '';
                    var idx = 0;
                    while (true) {
                        var space = rawSeq.indexOf('\n', idx);
                        if (space >= 0) {
                            segSeq += rawSeq.substring(idx, space).toUpperCase();
                            idx = space + 1;
                        } else {
                            segSeq += rawSeq.substring(idx).toUpperCase();
                            break;
                        }
                    }
                }
                seqs.push(new DASSequence(segId, segMin, segMax, segAlpha, segSeq));
            }

            callback(seqs);
        }
    });
};

//
// DAS 1.6 features command
//

function DASFeature() {}

function DASGroup(id) {
    if (id) this.id = id;
}

function DASLink(desc, uri) {
    this.desc = desc;
    this.uri = uri;
}

DASSource.prototype.features = function (segment, options, callback) {
    options = options || {};
    var thisB = this;

    var dasURI;
    if (this.features_uri) {
        dasURI = this.features_uri;
    } else {
        var filters = [];

        if (segment) {
            filters.push(segment.toDASQuery());
        } else if (options.group) {
            var g = options.group;
            if (typeof g == 'string') {
                filters.push('group_id=' + g);
            } else {
                for (var gi = 0; gi < g.length; ++gi) {
                    filters.push('group_id=' + g[gi]);
                }
            }
        }

        if (options.adjacent) {
            var adj = options.adjacent;
            if (typeof adj == 'string') {
                adj = [adj];
            }
            for (var ai = 0; ai < adj.length; ++ai) {
                filters.push('adjacent=' + adj[ai]);
            }
        }

        if (options.type) {
            if (typeof options.type == 'string') {
                filters.push('type=' + options.type);
            } else {
                for (var ti = 0; ti < options.type.length; ++ti) {
                    filters.push('type=' + options.type[ti]);
                }
            }
        }

        if (options.maxbins) {
            filters.push('maxbins=' + options.maxbins);
        }

        if (filters.length > 0) {
            dasURI = this.dasBaseURI + 'features?' + filters.join(';');
        } else {
            callback([], 'No filters specified');
        }
    }

    this.doCrossDomainRequest(dasURI, function (responseXML, req) {
        if (!responseXML) {
            var msg;
            if (req.status == 0) {
                msg = 'server may not support CORS';
            } else {
                msg = 'status=' + req.status;
            }
            callback([], 'Failed request: ' + msg);
            return;
        }
        /*      if (req) {
                    var caps = req.getResponseHeader('X-DAS-Capabilties');
                    if (caps) {
                        alert(caps);
                    }
                } */

        var features = new Array();
        var segmentMap = {};

        var segs = responseXML.getElementsByTagName('SEGMENT');
        for (var si = 0; si < segs.length; ++si) {
            var segmentXML = segs[si];
            var segmentID = segmentXML.getAttribute('id');
            segmentMap[segmentID] = {
                min: segmentXML.getAttribute('start'),
                max: segmentXML.getAttribute('stop')
            };

            var featureXMLs = segmentXML.getElementsByTagName('FEATURE');
            for (var i = 0; i < featureXMLs.length; ++i) {
                var feature = featureXMLs[i];
                var dasFeature = new DASFeature();

                dasFeature.segment = segmentID;
                dasFeature.id = feature.getAttribute('id');
                dasFeature.label = feature.getAttribute('label');

                /*
                                var childNodes = feature.childNodes;
                                for (var c = 0; c < childNodes.length; ++c) {
                                    var cn = childNodes[c];
                                    if (cn.nodeType == Node.ELEMENT_NODE) {
                                        var key = cn.tagName;
                                        //var val = null;
                                        //if (cn.firstChild) {
                                        //   val = cn.firstChild.nodeValue;
                                        //}
                                        dasFeature[key] = 'x';
                                    }
                                } */

                var spos = elementValue(feature, "START");
                var epos = elementValue(feature, "END");
                if ((spos | 0) > (epos | 0)) {
                    dasFeature.min = epos | 0;
                    dasFeature.max = spos | 0;
                } else {
                    dasFeature.min = spos | 0;
                    dasFeature.max = epos | 0;
                }
                {
                    var tec = feature.getElementsByTagName('TYPE');
                    if (tec.length > 0) {
                        var te = tec[0];
                        if (te.firstChild) {
                            dasFeature.type = te.firstChild.nodeValue;
                        }
                        dasFeature.typeId = te.getAttribute('id');
                        dasFeature.typeCv = te.getAttribute('cvId');
                    }
                }
                dasFeature.type = elementValue(feature, "TYPE");
                if (!dasFeature.type && dasFeature.typeId) {
                    dasFeature.type = dasFeature.typeId; // FIXME?
                }

                dasFeature.method = elementValue(feature, "METHOD");
                {
                    var ori = elementValue(feature, "ORIENTATION");
                    if (!ori) {
                        ori = '0';
                    }
                    dasFeature.orientation = ori;
                }
                dasFeature.score = elementValue(feature, "SCORE");
                dasFeature.links = dasLinksOf(feature);
                dasFeature.notes = dasNotesOf(feature);

                var groups = feature.getElementsByTagName("GROUP");
                for (var gi = 0; gi < groups.length; ++gi) {
                    var groupXML = groups[gi];
                    var dasGroup = new DASGroup();
                    dasGroup.type = groupXML.getAttribute('type');
                    dasGroup.id = groupXML.getAttribute('id');
                    dasGroup.links = dasLinksOf(groupXML);
                    dasGroup.notes = dasNotesOf(groupXML);
                    if (!dasFeature.groups) {
                        dasFeature.groups = new Array(dasGroup);
                    } else {
                        dasFeature.groups.push(dasGroup);
                    }
                }

                // Magic notes.  Check with TAD before changing this.
                if (dasFeature.notes) {
                    for (var ni = 0; ni < dasFeature.notes.length; ++ni) {
                        var n = dasFeature.notes[ni];
                        if (n.indexOf('Genename=') == 0) {
                            var gg = new DASGroup();
                            gg.type = 'gene';
                            gg.id = n.substring(9);
                            if (!dasFeature.groups) {
                                dasFeature.groups = new Array(gg);
                            } else {
                                dasFeature.groups.push(gg);
                            }
                        }
                    }
                }

                {
                    var pec = feature.getElementsByTagName('PART');
                    if (pec.length > 0) {
                        var parts = [];
                        for (var pi = 0; pi < pec.length; ++pi) {
                            parts.push(pec[pi].getAttribute('id'));
                        }
                        dasFeature.parts = parts;
                    }
                }
                {
                    var pec = feature.getElementsByTagName('PARENT');
                    if (pec.length > 0) {
                        var parents = [];
                        for (var pi = 0; pi < pec.length; ++pi) {
                            parents.push(pec[pi].getAttribute('id'));
                        }
                        dasFeature.parents = parents;
                    }
                }

                features.push(dasFeature);
            }
        }

        callback(features, undefined, segmentMap);
    }, function (err) {
        callback([], err);
    });
};

function DASAlignment(type) {
    this.type = type;
    this.objects = {};
    this.blocks = [];
}

DASSource.prototype.alignments = function (segment, options, callback) {
    var dasURI = this.dasBaseURI + 'alignment?query=' + segment;
    this.doCrossDomainRequest(dasURI, function (responseXML) {
        if (!responseXML) {
            callback([], 'Failed request ' + dasURI);
            return;
        }

        var alignments = [];
        var aliXMLs = responseXML.getElementsByTagName('alignment');
        for (var ai = 0; ai < aliXMLs.length; ++ai) {
            var aliXML = aliXMLs[ai];
            var ali = new DASAlignment(aliXML.getAttribute('alignType'));
            var objXMLs = aliXML.getElementsByTagName('alignObject');
            for (var oi = 0; oi < objXMLs.length; ++oi) {
                var objXML = objXMLs[oi];
                var obj = {
                    id: objXML.getAttribute('intObjectId'),
                    accession: objXML.getAttribute('dbAccessionId'),
                    version: objXML.getAttribute('objectVersion'),
                    dbSource: objXML.getAttribute('dbSource'),
                    dbVersion: objXML.getAttribute('dbVersion')
                };
                ali.objects[obj.id] = obj;
            }

            var blockXMLs = aliXML.getElementsByTagName('block');
            for (var bi = 0; bi < blockXMLs.length; ++bi) {
                var blockXML = blockXMLs[bi];
                var block = {
                    order: blockXML.getAttribute('blockOrder'),
                    segments: []
                };
                var segXMLs = blockXML.getElementsByTagName('segment');
                for (var si = 0; si < segXMLs.length; ++si) {
                    var segXML = segXMLs[si];
                    var seg = {
                        object: segXML.getAttribute('intObjectId'),
                        min: segXML.getAttribute('start'),
                        max: segXML.getAttribute('end'),
                        strand: segXML.getAttribute('strand'),
                        cigar: elementValue(segXML, 'cigar')
                    };
                    block.segments.push(seg);
                }
                ali.blocks.push(block);
            }

            alignments.push(ali);
        }
        callback(alignments);
    });
};

function DASStylesheet() {
    this.styles = [];
}

DASStylesheet.prototype.pushStyle = function (filters, zoom, style) {
    if (!filters) {
        filters = { type: 'default' };
    }
    var styleHolder = shallowCopy(filters);
    if (zoom) {
        styleHolder.zoom = zoom;
    }
    styleHolder.style = style;
    this.styles.push(styleHolder);
};

function DASStyle() {}

function parseGradient(grad) {
    var steps = grad.getAttribute('steps');
    if (steps) {
        steps = steps | 0;
    } else {
        steps = 50;
    }

    var stops = [];
    var colors = [];
    var se = grad.getElementsByTagName('STOP');
    for (var si = 0; si < se.length; ++si) {
        var stop = se[si];
        stops.push(1.0 * stop.getAttribute('score'));
        colors.push(stop.firstChild.nodeValue);
    }

    return makeColourSteps(steps, stops, colors);
}

DASSource.prototype.stylesheet = function (successCB, failureCB) {
    var dasURI,
        creds = this.credentials;
    if (this.stylesheet_uri) {
        dasURI = this.stylesheet_uri;
        creds = false;
    } else {
        dasURI = this.dasBaseURI + 'stylesheet';
    }

    this.getURI(dasURI).then(function (dasURI) {
        doCrossDomainRequest(dasURI, function (responseXML) {
            if (!responseXML) {
                if (failureCB) {
                    failureCB();
                }
                return;
            }
            var stylesheet = new DASStylesheet();
            var typeXMLs = responseXML.getElementsByTagName('TYPE');
            for (var i = 0; i < typeXMLs.length; ++i) {
                var typeStyle = typeXMLs[i];

                var filter = {};
                filter.type = typeStyle.getAttribute('id'); // Am I right in thinking that this makes DASSTYLE XML invalid?  Ugh.
                filter.label = typeStyle.getAttribute('label');
                filter.method = typeStyle.getAttribute('method');
                var glyphXMLs = typeStyle.getElementsByTagName('GLYPH');
                for (var gi = 0; gi < glyphXMLs.length; ++gi) {
                    var glyphXML = glyphXMLs[gi];
                    var zoom = glyphXML.getAttribute('zoom');
                    var glyph = childElementOf(glyphXML);
                    var style = new DASStyle();
                    style.glyph = glyph.localName;
                    var child = glyph.firstChild;

                    while (child) {
                        if (child.nodeType == Node.ELEMENT_NODE) {
                            if (child.localName == 'BGGRAD') {
                                style[child.localName] = parseGradient(child);
                            } else {
                                style[child.localName] = child.firstChild.nodeValue;
                            }
                        }
                        child = child.nextSibling;
                    }
                    stylesheet.pushStyle(filter, zoom, style);
                }
            }
            successCB(stylesheet);
        }, creds);
    }).catch(function (err) {
        console.log(err);
        failureCB();
    });
};

//
// sources command
// 

function DASRegistry(uri, opts) {
    opts = opts || {};
    this.uri = uri;
    this.opts = opts;
}

DASRegistry.prototype.sources = function (callback, failure, opts) {
    if (!opts) {
        opts = {};
    }

    var filters = [];
    if (opts.taxon) {
        filters.push('organism=' + opts.taxon);
    }
    if (opts.auth) {
        filters.push('authority=' + opts.auth);
    }
    if (opts.version) {
        filters.push('version=' + opts.version);
    }
    var quri = this.uri;
    if (filters.length > 0) {
        quri = quri + '?' + filters.join('&'); // '&' as a separator to hack around dasregistry.org bug.
    }

    doCrossDomainRequest(quri, function (responseXML) {
        if (!responseXML && failure) {
            failure();
            return;
        }

        var sources = [];
        var sourceXMLs = responseXML.getElementsByTagName('SOURCE');
        for (var si = 0; si < sourceXMLs.length; ++si) {
            var sourceXML = sourceXMLs[si];
            var versionXMLs = sourceXML.getElementsByTagName('VERSION');
            if (versionXMLs.length < 1) {
                continue;
            }
            var versionXML = versionXMLs[0];

            var coordXMLs = versionXML.getElementsByTagName('COORDINATES');
            var coords = [];
            for (var ci = 0; ci < coordXMLs.length; ++ci) {
                var coordXML = coordXMLs[ci];
                var coord = new DASCoords();
                coord.auth = coordXML.getAttribute('authority');
                coord.taxon = coordXML.getAttribute('taxid');
                coord.version = coordXML.getAttribute('version');
                coords.push(coord);
            }

            var caps = [];
            var capXMLs = versionXML.getElementsByTagName('CAPABILITY');
            var uri;
            for (var ci = 0; ci < capXMLs.length; ++ci) {
                var capXML = capXMLs[ci];

                caps.push(capXML.getAttribute('type'));

                if (capXML.getAttribute('type') == 'das1:features') {
                    var fep = capXML.getAttribute('query_uri');
                    uri = fep.substring(0, fep.length - 'features'.length);
                }
            }

            var props = {};
            var propXMLs = versionXML.getElementsByTagName('PROP');
            for (var pi = 0; pi < propXMLs.length; ++pi) {
                pusho(props, propXMLs[pi].getAttribute('name'), propXMLs[pi].getAttribute('value'));
            }

            if (uri) {
                var source = new DASSource(uri, {
                    source_uri: sourceXML.getAttribute('uri'),
                    name: sourceXML.getAttribute('title'),
                    desc: sourceXML.getAttribute('description'),
                    coords: coords,
                    props: props,
                    capabilities: caps
                });
                sources.push(source);
            }
        }

        callback(sources);
    });
};

//
// Utility functions
//

function elementValue(element, tag) {
    var children = element.getElementsByTagName(tag);
    if (children.length > 0 && children[0].firstChild) {
        var c = children[0];
        if (c.childNodes.length == 1) {
            return c.firstChild.nodeValue;
        } else {
            var s = '';
            for (var ni = 0; ni < c.childNodes.length; ++ni) {
                s += c.childNodes[ni].nodeValue;
            }
            return s;
        }
    } else {
        return null;
    }
}

function childElementOf(element) {
    if (element.hasChildNodes()) {
        var child = element.firstChild;
        do {
            if (child.nodeType == Node.ELEMENT_NODE) {
                return child;
            }
            child = child.nextSibling;
        } while (child != null);
    }
    return null;
}

function dasLinksOf(element) {
    var links = new Array();
    var maybeLinkChilden = element.getElementsByTagName('LINK');
    for (var ci = 0; ci < maybeLinkChilden.length; ++ci) {
        var linkXML = maybeLinkChilden[ci];
        if (linkXML.parentNode == element) {
            links.push(new DASLink(linkXML.firstChild ? linkXML.firstChild.nodeValue : 'Unknown', linkXML.getAttribute('href')));
        }
    }

    return links;
}

function dasNotesOf(element) {
    var notes = [];
    var maybeNotes = element.getElementsByTagName('NOTE');
    for (var ni = 0; ni < maybeNotes.length; ++ni) {
        if (maybeNotes[ni].firstChild) {
            notes.push(maybeNotes[ni].firstChild.nodeValue);
        }
    }
    return notes;
}

function doCrossDomainRequest(url, handler, credentials, custAuth) {
    // TODO: explicit error handlers?

    if (window.XDomainRequest) {
        var req = new XDomainRequest();
        req.onload = function () {
            var dom = new ActiveXObject("Microsoft.XMLDOM");
            dom.async = false;
            dom.loadXML(req.responseText);
            handler(dom);
        };
        req.open("get", url);
        req.send();
    } else {
        try {
            var req = new XMLHttpRequest();
            var timeout = setTimeout(function () {
                console.log('timing out ' + url);
                req.abort();
                handler(null, req);
            }, 5000);

            req.ontimeout = function () {
                console.log('timeout on ' + url);
            };

            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    clearTimeout(timeout);
                    if (req.status >= 200 || req.status == 0) {
                        handler(req.responseXML, req);
                    }
                }
            };
            req.open("get", url, true);
            // IE10/11 fix: The timeout property may be set only in the time interval between a call to the open method
            //              and the first call to the send method.
            req.timeout = 5000;
            if (credentials) {
                req.withCredentials = true;
            }
            if (custAuth) {
                req.setRequestHeader('X-DAS-Authorisation', custAuth);
            }
            req.overrideMimeType('text/xml');
            req.setRequestHeader('Accept', 'application/xml,*/*');
            req.send();
        } catch (e) {
            handler(null, req, e);
        }
    }
}

DASSource.prototype.doCrossDomainRequest = function (url, handler, errHandler) {
    var custAuth;
    if (this.xUser) {
        custAuth = 'Basic ' + btoa(this.xUser + ':' + this.xPass);
    }

    try {
        return doCrossDomainRequest(url, handler, this.credentials, custAuth);
    } catch (err) {
        if (errHandler) {
            errHandler(err);
        } else {
            throw err;
        }
    }
};

function isDasBooleanTrue(s) {
    s = ('' + s).toLowerCase();
    return s === 'yes' || s === 'true';
}

function isDasBooleanNotFalse(s) {
    if (!s) return false;

    s = ('' + s).toLowerCase();
    return s !== 'no' || s !== 'false';
}

function copyStylesheet(ss) {
    var nss = shallowCopy(ss);
    nss.styles = [];
    for (var si = 0; si < ss.styles.length; ++si) {
        var sh = nss.styles[si] = shallowCopy(ss.styles[si]);
        sh._methodRE = sh._labelRE = sh._typeRE = undefined;
        sh.style = shallowCopy(sh.style);
        sh.style.id = undefined;
        sh.style._gradient = undefined;
    }
    return nss;
}

if (typeof module !== 'undefined') {
    module.exports = {
        DASGroup: DASGroup,
        DASFeature: DASFeature,
        DASStylesheet: DASStylesheet,
        DASStyle: DASStyle,
        DASSource: DASSource,
        DASSegment: DASSegment,
        DASRegistry: DASRegistry,
        DASSequence: DASSequence,
        DASLink: DASLink,

        isDasBooleanTrue: isDasBooleanTrue,
        isDasBooleanNotFalse: isDasBooleanNotFalse,
        copyStylesheet: copyStylesheet,
        coordsMatch: coordsMatch
    };
}

},{"./color":9,"./utils":55}],11:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.featureLookup = exports.paintQuant = exports.createQuantOverlay = exports.clearViewport = exports.drawUnmapped = exports.paint = exports.prepareViewport = exports.prepareSubtiers = exports.drawTier = exports.renderTier = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _featureDraw = require("./feature-draw.js");

var _sequenceDraw = require("./sequence-draw.js");

var _spans = require("./spans.js");

var _utils = require("./utils.js");

var _glyphs = require("./glyphs.js");

var Glyphs = _interopRequireWildcard(_glyphs);

var _das = require("./das.js");

var _color = require("./color.js");

var _cigar = require("./cigar.js");

var _numformats = require("./numformats");

var _ramda = require("ramda");

var R = _interopRequireWildcard(_ramda);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

// The only functions that must be exported by a renderer are renderTier
// and drawTier, the rest are exported for use in other renderers.
exports.renderTier = renderTier;
exports.drawTier = drawTier;
exports.prepareSubtiers = prepareSubtiers;
exports.prepareViewport = prepareViewport;
exports.paint = paint;
exports.drawUnmapped = drawUnmapped;
exports.clearViewport = clearViewport;
exports.createQuantOverlay = createQuantOverlay;
exports.paintQuant = paintQuant;
exports.featureLookup = featureLookup;


function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

function drawTier(tier) {
    var canvas = tier.viewport.getContext("2d");
    var retina = tier.browser.retina && window.devicePixelRatio > 1;

    if (tier.sequenceSource) {
        var sequence = tier.currentSequence;
        (0, _sequenceDraw.drawSeqTier)(tier, sequence);
    } else if (tier.currentFeatures) {
        prepareSubtiers(tier, canvas);
    } else {
        console.log("No sequence or features in tier!");
    }

    if (tier.subtiers) {
        var vOffset = R.defaultTo(0, tier.dasSource.vOffset);

        prepareViewport(tier, canvas, retina, true, vOffset); // NB calls canvas.save
        paint(tier, canvas, vOffset);
        canvas.restore();
    }

    tier.drawOverlay();
    tier.paintQuant();

    if (typeof tier.dasSource.drawCallback === "function") {
        tier.dasSource.drawCallback(canvas, tier);
    }

    tier.originHaxx = 0;
    tier.browser.arrangeTiers();
}

function glyphsForGroup(canvas, features, y, groupElement, tier) {
    var gstyle = tier.styleForFeature(groupElement);
    var label = void 0;
    var labelWanted = false;

    var glyphs = [];
    var strand = null;

    features.forEach(function (f) {
        if (f.orientation && strand === null) {
            strand = f.orientation;
        }

        if (!label && f.label) {
            label = f.label;
        }

        var style = tier.styleForFeature(f);
        if (style && !f.parts) {
            if ((0, _das.isDasBooleanTrue)(style.LABEL)) labelWanted = true;

            var glyph = glyphForFeature(canvas, f, y, style, tier, null, true);
            if (glyph) glyphs.push(glyph);
        }
    });

    if (glyphs.length === 0) return null;

    var connector = 'flat';
    if (gstyle && gstyle.glyph === 'LINE') {
        // Stick with flat...
    } else {
        if (tier.dasSource.collapseSuperGroups && !tier.bumped) {
            if (strand === '+' || strand === '-') {
                connector = 'collapsed' + strand;
            }
        } else {
            if (strand === '+' || strand === '-') {
                connector = 'hat' + strand;
            }
        }
    }

    var labelText = null;
    if (label && labelWanted || gstyle && ((0, _das.isDasBooleanTrue)(gstyle.LABEL) || (0, _das.isDasBooleanTrue)(gstyle.LABELS))) {
        // HACK, LABELS should work.
        labelText = groupElement.label || label;
    }

    glyphs.sort(function (g1, g2) {
        return (g1.zindex || 0) - (g2.zindex || 0);
    });

    var groupGlyph = new Glyphs.GroupGlyph(glyphs, connector);
    if (labelText) {
        if (strand === '+') {
            labelText = '>' + labelText;
        } else if (strand === '-') {
            labelText = '<' + labelText;
        }
        groupGlyph = new Glyphs.LabelledGlyph(canvas, groupGlyph, labelText, false);
    }
    groupGlyph.bump = true;
    return groupGlyph;
}

function glyphForFeature(canvas, feature, y, style, tier, forceHeight, noLabel) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;
    var glyphType = style.glyph || 'BOX';

    var min = feature.min;
    var max = feature.max;
    var strand = feature.orientation;
    var score = feature.score;
    var label = feature.label || feature.id;

    // Hide glyphs that are smaller than a pixel in width.
    if (tier.dasSource.hideSubpixelGlyphs && (max - min) * scale < 1) return null;

    var minPos = (min - origin) * scale;
    var rawMaxPos = (max - origin + 1) * scale;
    var maxPos = Math.max(rawMaxPos, minPos + 1);

    forceHeight = forceHeight * 1.0;
    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;
    height = height * 1.0;
    var bump = style.BUMP && (0, _das.isDasBooleanTrue)(style.BUMP);

    var glyph = void 0;
    var quant = void 0;

    // Create the glyph
    if (glyphType === 'CROSS' || glyphType === 'EX' || glyphType === 'TRIANGLE' || glyphType === 'DOT' || glyphType === 'SQUARE' || glyphType === 'STAR' || glyphType === 'PLIMSOLL') {
        var glyphHolder = featureToCrossLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight, noLabel);
        if (glyphHolder) {
            var _glyphHolder = _slicedToArray(glyphHolder, 2);

            glyph = _glyphHolder[0];
            quant = _glyphHolder[1];
        }
    } else if (glyphType === 'HISTOGRAM' || glyphType === 'GRADIENT' && score !== 'undefined') {
        var _featureToGradientLik = featureToGradientLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight);

        var _featureToGradientLik2 = _slicedToArray(_featureToGradientLik, 2);

        glyph = _featureToGradientLik2[0];
        quant = _featureToGradientLik2[1];
    } else if (glyphType === 'HIDDEN') {
        glyph = new Glyphs.PaddedGlyph(null, minPos, maxPos);
        noLabel = true;
    } else if (glyphType === 'ARROW') {
        var color = style.FGCOLOR || 'purple';
        var parallel = (0, _das.isDasBooleanTrue)(style.PARALLEL);
        var sw = (0, _das.isDasBooleanTrue)(style.SOUTHWEST);
        var ne = (0, _das.isDasBooleanTrue)(style.NORTHEAST);
        glyph = new Glyphs.ArrowGlyph(minPos, maxPos, height, color, parallel, sw, ne);
    } else if (glyphType === 'ANCHORED_ARROW') {
        var stroke = style.FGCOLOR || 'none';
        var fill = style.BGCOLOR || 'green';
        glyph = new Glyphs.AArrowGlyph(minPos, maxPos, height, fill, stroke, strand);
        glyph.bump = true;
    } else if (glyphType === 'SPAN') {
        var _stroke = style.FGCOLOR || 'black';
        glyph = new Glyphs.SpanGlyph(minPos, maxPos, height, _stroke);
    } else if (glyphType === 'LINE') {
        var _stroke2 = style.FGCOLOR || 'black';
        var lineStyle = style.STYLE || 'solid';
        glyph = new Glyphs.LineGlyph(minPos, maxPos, height, lineStyle, strand, _stroke2);
    } else if (glyphType === 'PRIMERS') {
        var _stroke3 = style.FGCOLOR || 'black';
        var _fill = style.BGCOLOR || 'red';
        glyph = new Glyphs.PrimersGlyph(minPos, maxPos, height, _fill, _stroke3);
    } else if (glyphType === 'TEXT') {
        var string = style.STRING || 'text';
        var _fill2 = style.FGCOLOR || 'black';
        glyph = new Glyphs.TextGlyph(canvas, minPos, maxPos, height, _fill2, string);
    } else if (glyphType === 'TOOMANY') {
        var _stroke4 = style.FGCOLOR || 'gray';
        var _fill3 = style.BGCOLOR || 'orange';
        glyph = new Glyphs.TooManyGlyph(minPos, maxPos, height, _fill3, _stroke4);
    } else if (glyphType === 'POINT') {
        var _featureToPointGlyph = featureToPointGlyph(tier, feature, style);

        var _featureToPointGlyph2 = _slicedToArray(_featureToPointGlyph, 2);

        glyph = _featureToPointGlyph2[0];
        quant = _featureToPointGlyph2[1];
    } else if (glyphType === '__SEQUENCE') {
        glyph = sequenceGlyph(canvas, tier, feature, style, forceHeight);
    } else if (glyphType === '__INSERTION') {
        var insertionLabels = true;
        if (style.__INSERTIONS !== undefined) insertionLabels = (0, _das.isDasBooleanNotFalse)(style.__INSERTIONS);
        glyph = new Glyphs.TriangleGlyph(minPos, 5, 'S', 5, tier.browser.baseColors['I']);
        if (insertionLabels) glyph = new Glyphs.LabelledGlyph(canvas, glyph, feature.insertion || feature.altAlleles[0], false, 'center', 'above', '7px sans-serif');

        if (maxPos - minPos > 1) {
            var _stroke5 = style.FGCOLOR || 'red';
            var _fill4 = style.BGCOLOR || style.COLOR1 || 'green';
            var bg = new Glyphs.BoxGlyph(minPos, 5, maxPos - minPos, height, _fill4, _stroke5);
            glyph = new Glyphs.GroupGlyph([bg, glyph]);
        }
    } else if (glyphType === '__NONE') {
        return null;
    } else if (glyphType === 'BOX') {
        var _stroke6 = style.FGCOLOR || null;
        var _fill5 = style.BGCOLOR || style.COLOR1 || 'green';
        if (style.BGITEM && feature.itemRgb) _fill5 = feature.itemRgb;
        var _scale = (maxPos - minPos) / (max - min);
        if (feature.type == 'translation' && (feature.method == 'protein_coding' || feature.readframeExplicit) && (!feature.tags || feature.tags.indexOf('cds_start_NF') < 0 || feature.readframeExplicit) && (!tier.dasSource.collapseSuperGroups || tier.bumped) && _scale >= 0.5) {
            var refSeq = getRefSeq(tier, min, max);
            glyph = new Glyphs.AminoAcidGlyph(minPos, maxPos, height, _fill5, refSeq, feature.orientation, feature.readframe);
        } else {
            glyph = new Glyphs.BoxGlyph(minPos, 0, maxPos - minPos, height, _fill5, _stroke6);
        }
    }

    if (!glyph) return;

    if (((0, _das.isDasBooleanTrue)(style.LABEL) || feature.forceLabel) && label && !noLabel) {
        glyph = new Glyphs.LabelledGlyph(canvas, glyph, label, false);
    }

    if (bump) {
        glyph.bump = true;
    }

    glyph.feature = feature;

    if ((0, _das.isDasBooleanTrue)(style["HIDEAXISLABEL"])) quant = null;

    if (quant) {
        glyph.quant = quant;
    }

    if (style.ZINDEX) {
        glyph.zindex = style.ZINDEX | 0;
    }

    return glyph;
}

function groupFeatures(tier, canvas, y) {
    var glyphs = [];
    var gbsFeatures = {};
    var gbsStyles = {};
    var stackedFeatures = [];

    R.map(function (features) {
        features.forEach(function (feature) {
            var style = tier.styleForFeature(feature);

            if (feature.parts || !style) return;

            if (style.glyph === 'LINEPLOT') {
                (0, _utils.pusho)(gbsFeatures, style.id, feature);
                gbsStyles[style.id] = style;
            } else if (style.glyph === 'STACKED') {
                stackedFeatures.push(feature);
            } else {
                var glyph = glyphForFeature(canvas, feature, y, style, tier);
                if (glyph) glyphs.push(glyph);
            }
        });
    }, tier.ungroupedFeatures);

    if (stackedFeatures.length > 0) {
        glyphs = glyphs.concat(makeStackedBars(stackedFeatures, tier));
    }

    for (var gbs in gbsFeatures) {
        var gf = gbsFeatures[gbs];
        var style = gbsStyles[gbs];
        if (style.glyph === 'LINEPLOT') {
            var lineGraphGlyphs = makeLinePlot(gf, style, tier, y);
            lineGraphGlyphs.forEach(function (g) {
                return glyphs.push(g);
            });
        }
    }

    return glyphs;
}

function glyphifyGroups(tier, canvas, glyphs, y) {
    var groupIds = Object.keys(tier.groupedFeatures);
    var groupGlyphs = {};

    groupIds.sort(function (g1, g2) {
        return tier.groupedFeatures[g2][0].score - tier.groupedFeatures[g1][0].score;
    });

    groupIds.forEach(function (gId) {
        var glyphs = glyphsForGroup(canvas, tier.groupedFeatures[gId], y, tier.groups[gId], tier, tier.dasSource.collapseSuperGroups && !tier.bumped ? 'collapsed_gene' : 'tent');

        if (glyphs) {
            glyphs.group = tier.groups[gId];
            groupGlyphs[gId] = glyphs;
        }
    });

    return groupGlyphs;
}

function bumpSubtiers(tier, glyphs, grid, gridOffset, gridSpacing) {
    var subtierMax = tier.subtierMax || tier.dasSource.subtierMax || tier.browser.defaultSubtierMax;

    var subtiersExceeded = false;

    var unbumpedST = new _featureDraw.SubTier(true);
    var bumpedSTs = [];

    // We want to add each glyph to either the subtier
    // containing unbumped subtiers, or to the first bumped subtier.
    glyphs.forEach(function (glyph) {
        // if the glyph is to be bumped...
        if (glyph.bump && (tier.bumped || tier.dasSource.collapseSuperGroups)) {

            var glyphTier = bumpedSTs.find(function (st) {
                return st.hasSpaceFor(glyph);
            });

            if (glyphTier) {
                glyphTier.add(glyph);
            } else if (bumpedSTs.length >= subtierMax) {
                subtiersExceeded = true;
            } else {
                var subtier = new _featureDraw.SubTier();
                subtier.add(glyph);
                bumpedSTs.push(subtier);
            }
        } else {
            unbumpedST.add(glyph);
        }
    });

    unbumpedST.glyphs.sort(function (g1, g2) {
        return g1.min() - g2.min();
    });

    if (unbumpedST.glyphs.length > 0) {
        bumpedSTs = [unbumpedST].concat(bumpedSTs);
    }

    // Simple hack to make the horizontal grid in bumped subtiers (e.g. lineplots)
    // optional and configurable.
    if (grid) {
        bumpedSTs.forEach(function (subtier) {
            if (subtier.quant) {
                subtier.glyphs.unshift(new Glyphs.GridGlyph(subtier.height, gridOffset, gridSpacing));
            }
        });
    }

    bumpedSTs.forEach(function (subtier) {
        subtier.glyphs.sort(function (g1, g2) {
            return (g1.zindex || 0) - (g2.zindex || 0);
        });
    });

    return [bumpedSTs, subtiersExceeded];
}

// The whole tier is translated downward on its canvas by y pixels
function prepareSubtiers(tier, canvas) {
    var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
    var grid = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;


    var MIN_PADDING = 3;
    tier.padding = typeof tier.dasSource.padding === 'number' ? tier.dasSource.padding : MIN_PADDING;

    tier.scaleVertical = typeof tier.dasSource.scaleVertical === 'boolean' ? tier.dasSource.scaleVertical : false;

    var glyphs = groupFeatures(tier, canvas, y);

    // Merge supergroups
    if (tier.dasSource.collapseSuperGroups && !tier.bumped) {
        var _loop = function _loop(sgId) {
            var sgGroup = tier.superGroups[sgId];
            tier.groups[sgId] = (0, _utils.shallowCopy)(tier.groups[sgId]);
            var group = tier.groups[sgId];
            group.isSuperGroup = true;
            var featuresByType = {};

            var sgMin = 10000000000,
                sgMax = -10000000000;
            var sgSeg = null;

            sgGroup.forEach(function (g, i) {
                var groupedFeature = tier.groupedFeatures[sgGroup[i]];
                if (!groupedFeature) return;

                groupedFeature.forEach(function (feature) {
                    (0, _utils.pusho)(featuresByType, feature.type, feature);
                    sgMin = Math.min(feature.min, sgMin);
                    sgMax = Math.max(feature.max, sgMax);
                    if (feature.segment && !sgSeg) sgSeg = feature.segment;
                });

                if (group && !group.links || group.links.length === 0) {
                    group.links = tier.groups[sgGroup[0]].links;
                }

                delete tier.groupedFeatures[sgGroup[i]];
            });

            tier.groups[sgId].max = sgMax;
            tier.groups[sgId].min = sgMin;
            tier.groups[sgId].segment = sgSeg;

            R.map(function (features) {

                var template = features[0];
                var loc = null;

                features.forEach(function (feature) {
                    var fl = new _spans.Range(feature.min, feature.max);
                    loc = loc ? (0, _spans.union)(loc, fl) : fl;
                });

                var mergedRanges = loc.ranges();

                mergedRanges.forEach(function (range) {
                    var posCoverage = ((range.max() | 0) - (range.min() | 0) + 1) * sgGroup.length;
                    var actCoverage = 0;

                    features.forEach(function (feature) {
                        var fmin = feature.min || 0;
                        var fmax = feature.max || 0;
                        if (fmin <= range.max() && fmax >= range.min()) {

                            actCoverage += Math.min(fmax, range.max()) - Math.max(fmin, range.min()) + 1;
                        }
                    });

                    var newFeature = new _das.DASFeature();
                    for (var key in template) {
                        newFeature[key] = template[key];
                    }

                    newFeature.min = range.min();
                    newFeature.max = range.max();
                    if (newFeature.label && sgGroup.length > 1) {
                        newFeature.label += ' (' + sgGroup.length + ' vars)';
                    }

                    newFeature.visualWeight = 1.0 * actCoverage / posCoverage;

                    (0, _utils.pusho)(tier.groupedFeatures, sgId, newFeature);
                });
            }, featuresByType);

            delete tier.superGroups[sgId]; // Do we want this?
        };

        for (var sgId in tier.superGroups) {
            _loop(sgId);
        }
    }

    // Glyphify groups.
    var groupGlyphs = glyphifyGroups(tier, canvas, glyphs, y);

    R.map(function (superGroup) {
        var sgGlyphs = [];
        var sgMin = 10000000000;
        var sgMax = -10000000000;

        superGroup.forEach(function (glyphs) {
            var gGlyphs = groupGlyphs[glyphs];
            if (gGlyphs) {
                sgGlyphs.push(gGlyphs);
                sgMin = Math.min(sgMin, gGlyphs.min());
                sgMax = Math.max(sgMax, gGlyphs.max());
            }
        });

        sgGlyphs.forEach(function (glyph) {
            glyphs.push(new Glyphs.PaddedGlyph(glyph, sgMin, sgMax));
        });
    }, tier.superGroups);

    R.map(function (glyph) {
        return glyphs.push(glyph);
    }, groupGlyphs);

    var _bumpSubtiers = bumpSubtiers(tier, glyphs, grid, y),
        _bumpSubtiers2 = _slicedToArray(_bumpSubtiers, 2),
        subtiers = _bumpSubtiers2[0],
        subtiersExceeded = _bumpSubtiers2[1];

    tier.glyphCacheOrigin = tier.browser.viewStart;

    if (subtiersExceeded) tier.updateStatus('Bumping limit exceeded, use the track editor to see more features');else tier.updateStatus();

    tier.subtiers = subtiers;
}

// Fills out areas that haven't been fetched as gray blocks
function drawUnmapped(tier, canvas, padding) {
    var drawStart = tier.browser.viewStart - 1000.0 / tier.browser.scale;
    var drawEnd = tier.browser.viewEnd + 1000.0 / tier.browser.scale;
    var unmappedBlocks = [];
    if (tier.knownCoverage) {
        var knownRanges = tier.knownCoverage.ranges();
        knownRanges.forEach(function (range, index) {
            if (index === 0) {
                if (range.min() > drawStart) unmappedBlocks.push({ min: drawStart, max: range.min() - 1 });
            } else {
                unmappedBlocks.push({ min: knownRanges[index - 1].max() + 1, max: range.min() - 1 });
            }

            if (index == knownRanges.length - 1 && range.max() < drawEnd) {
                unmappedBlocks.push({ min: range.max() + 1, max: drawEnd });
            }
        });
    }
    if (unmappedBlocks.length > 0) {
        canvas.fillStyle = 'gray';
        unmappedBlocks.forEach(function (block) {
            var min = (block.min - tier.browser.viewStart) * tier.browser.scale + 1000;
            var max = (block.max - tier.browser.viewStart) * tier.browser.scale + 1000;
            canvas.fillRect(min, 0, max - min, padding);
        });
    }
}

function clearViewport(canvas, width, height) {
    canvas.clearRect(0, 0, width, height);
}

// Make the viewport & canvas the correct size for the tier
function prepareViewport(tier, canvas, retina) {
    var clear = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
    var vOffset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;

    var desiredWidth = tier.browser.featurePanelWidth + 2000;
    if (retina) {
        desiredWidth *= 2;
    }

    var fpw = tier.viewport.width | 0;
    if (fpw < desiredWidth - 50) {
        tier.viewport.width = fpw = desiredWidth;
    }

    var lh = tier.padding + vOffset;

    tier.subtiers.forEach(function (s) {
        return lh += s.height + tier.padding;
    });

    lh += 6;
    lh = Math.max(lh, tier.browser.minTierHeight);

    var canvasHeight = lh;
    if (retina) {
        canvasHeight *= 2;
    }

    if (canvasHeight != tier.viewport.height) {
        tier.viewport.height = canvasHeight;
    }

    tier.viewportHolder.style.left = '-1000px';
    tier.viewport.style.width = retina ? '' + fpw / 2 + 'px' : '' + fpw + 'px';
    tier.viewport.style.height = '' + lh + 'px';
    tier.layoutHeight = Math.max(lh, tier.browser.minTierHeight);

    tier.updateHeight();
    tier.norigin = tier.browser.viewStart;

    canvas.save();
    if (retina) {
        canvas.scale(2, 2);
    }

    if (clear) {
        clearViewport(canvas, fpw, canvasHeight);
    }

    drawUnmapped(tier, canvas, lh);
}

function paint(tier, canvas) {
    var vOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

    var overlayLabelCanvas = new Glyphs.OverlayLabelCanvas();
    var offset = (tier.glyphCacheOrigin - tier.browser.viewStart) * tier.browser.scale + 1000;
    canvas.translate(offset, vOffset + tier.padding);
    overlayLabelCanvas.translate(0, tier.padding);

    tier.paintToContext(canvas, overlayLabelCanvas, offset);

    if (overlayLabelCanvas.glyphs.length > 0) tier.overlayLabelCanvas = overlayLabelCanvas;else tier.overlayLabelCanvas = null;

    canvas.restore();
}

function getScoreMinMax(tier, style) {
    var smin = tier.quantMin(style);
    var smax = tier.quantMax(style);

    if (!smax) {
        if (smin < 0) {
            smax = 0;
        } else {
            smax = 10;
        }
    }
    if (!smin) {
        smin = 0;
    }
    return [smin, smax];
}

function relScoreOrigin(score, smin, smax) {
    var relScore = (1.0 * score - smin) / (smax - smin);
    var relOrigin = -1.0 * smin / (smax - smin);

    return [relScore, relOrigin];
}

function getRefSeq(tier, min, max) {
    var refSeq = null;
    if (tier.currentSequence) {
        var csStart = tier.currentSequence.start | 0;
        var csEnd = tier.currentSequence.end | 0;
        if (csStart <= max && csEnd >= min) {
            var sfMin = Math.max(min, csStart);
            var sfMax = Math.min(max, csEnd);

            refSeq = tier.currentSequence.seq.substr(sfMin - csStart, sfMax - sfMin + 1);
            while (min < sfMin) {
                refSeq = 'N' + refSeq;
                sfMin--;
            }
            while (max > sfMax) {
                refSeq = refSeq + 'N';
                sfMax++;
            }
        }
    }
    return refSeq;
}

function featureToCrossLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight, noLabel) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var score = feature.score;
    var label = feature.label || feature.id;

    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;
    var requiredHeight = height;

    var glyph = null;
    var quant = null;

    var stroke = style.FGCOLOR || 'black';
    var fill = style.BGCOLOR || 'none';
    var outline = style.STROKECOLOR;

    if (style.BGITEM && feature.itemRgb) {
        stroke = feature.itemRgb;
    } else if ((0, _das.isDasBooleanTrue)(style.COLOR_BY_SCORE2)) {
        var grad = style.BGGRAD || style._gradient;
        if (!grad) {
            grad = (0, _color.makeGradient)(50, style.COLOR1, style.COLOR2, style.COLOR3);
            style._gradient = grad;
        }

        var score2 = feature.score2;
        if (score2 !== undefined || !stroke) {
            score2 = score2 || 0;

            var smin2 = style.MIN2 ? 1.0 * style.MIN2 : 0.0;
            var smax2 = style.MAX2 ? 1.0 * style.MAX2 : 1.0;
            var relScore2 = (1.0 * score2 - smin2) / (smax2 - smin2);

            var step = relScore2 * grad.length | 0;
            R.clamp(0, step, grad.length - 1);
            stroke = grad[step];
        }
    }

    var size = style.SIZE || height;
    if (style.RSIZE) {
        size = 1.0 * style.RSIZE * height;
    }

    if (style.STROKETHRESHOLD) {
        if (size < 1.0 * style.STROKETHRESHOLD) outline = null;
    }

    var mid = (minPos + maxPos) / 2;

    if (glyphType === 'EX') {
        glyph = new Glyphs.ExGlyph(mid, size, stroke);
    } else if (glyphType === 'TRIANGLE') {
        var dir = style.DIRECTION || 'N';
        var width = style.LINEWIDTH || size;
        glyph = new Glyphs.TriangleGlyph(mid, size, dir, width, stroke, outline);
    } else if (glyphType === 'DOT') {
        glyph = new Glyphs.DotGlyph(mid, size, stroke, outline);
    } else if (glyphType === 'PLIMSOLL') {
        glyph = new Glyphs.PlimsollGlyph(mid, size, 0.2 * size, stroke, outline);
    } else if (glyphType === 'SQUARE') {
        glyph = new Glyphs.BoxGlyph(mid - size / 2, 0, size, size, stroke, outline);
    } else if (glyphType === 'STAR') {
        var points = style.POINTS || 5;
        glyph = new Glyphs.StarGlyph(mid, size / 2, points, stroke, outline);
    } else {
        glyph = new Glyphs.CrossGlyph(mid, size, stroke);
    }

    if (fill && fill !== 'none' && maxPos - minPos > 5) {
        var boxGlyph = new Glyphs.BoxGlyph(minPos, 0, maxPos - minPos, size, fill);
        glyph = new Glyphs.GroupGlyph([boxGlyph, glyph]);
    }

    if ((0, _das.isDasBooleanTrue)(style.SCATTER)) {
        var _getScoreMinMax = getScoreMinMax(tier, style),
            _getScoreMinMax2 = _slicedToArray(_getScoreMinMax, 2),
            smin = _getScoreMinMax2[0],
            smax = _getScoreMinMax2[1];

        var _relScoreOrigin = relScoreOrigin(score, smin, smax),
            _relScoreOrigin2 = _slicedToArray(_relScoreOrigin, 2),
            relScore = _relScoreOrigin2[0],
            relOrigin = _relScoreOrigin2[1];
        // console.log(score, relScore, relOrigin);

        if (relScore < 0.0 || relScore > 1.0) {
            // Glyph is out of bounds.
            // Should we allow for "partially showing" glyphs?

            return null;
        } else {
            y = (1.0 - relScore) * requiredHeight;

            quant = { min: smin, max: smax };

            var heightFudge = 0;
            var featureLabel = R.defaultTo(style.LABEL, feature.forceLabel);

            if ((0, _das.isDasBooleanNotFalse)(featureLabel) && label && !noLabel) {
                glyph = new Glyphs.LabelledGlyph(canvas, glyph, label, true, null, featureLabel == 'above' ? 'above' : 'below');
                if (featureLabel === 'above') {
                    heightFudge = glyph.textHeight + 2;
                }
                noLabel = true;
            }
            glyph = new Glyphs.TranslatedGlyph(glyph, 0, y - size / 2 - heightFudge, requiredHeight);
        }
    }

    return [glyph, quant];
}

function featureToGradientLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var score = feature.score;

    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;
    var requiredHeight = height * 1.0;

    var glyph = null;
    var quant = null;

    var centerOnAxis = (0, _das.isDasBooleanTrue)(style["AXISCENTER"]);

    var _getScoreMinMax3 = getScoreMinMax(tier, style),
        _getScoreMinMax4 = _slicedToArray(_getScoreMinMax3, 2),
        smin = _getScoreMinMax4[0],
        smax = _getScoreMinMax4[1];

    // AUTOMIN & AUTOMAX respectively set the lower and upper bounds


    if ((0, _das.isDasBooleanTrue)(style.AUTOMIN)) {
        smin = tier.currentFeaturesMinScore * 0.95;
        console.log("smin:\t" + smin);
    }
    if ((0, _das.isDasBooleanTrue)(style.AUTOMAX)) {
        smax = tier.currentFeaturesMaxScore * 1.05;
        console.log("smax:\t" + smax);
    }

    if (1.0 * score < 1.0 * smin) {
        score = smin;
    }
    if (1.0 * score > 1.0 * smax) {
        score = smax;
    }

    // Shift smin/smax in case we want to center the histogram
    // on the horizontal axis
    if (centerOnAxis) {
        var tmin = tier.quantMin(style);
        var tmax = tier.quantMax(style);

        if ((0, _das.isDasBooleanTrue)(style.AUTOMIN)) {
            tmin = tier.currentFeaturesMinScore * 0.95;
        }
        if ((0, _das.isDasBooleanTrue)(style.AUTOMAX)) {
            tmax = tier.currentFeaturesMaxScore * 1.05;
        }

        smin = tmin - (tmax - tmin) / 2;
        smax = tmax - (tmax - tmin) / 2;
    }

    var _relScoreOrigin3 = relScoreOrigin(score, smin, smax),
        _relScoreOrigin4 = _slicedToArray(_relScoreOrigin3, 2),
        relScore = _relScoreOrigin4[0],
        relOrigin = _relScoreOrigin4[1];

    if (glyphType === 'HISTOGRAM') {
        var originShift = function originShift(x) {
            return x - Math.max(0, relOrigin);
        };
        height = Math.abs(originShift(relScore)) * requiredHeight;
        y = y + originShift(1.0) * requiredHeight;

        if (relScore >= relOrigin) y -= height;

        if (centerOnAxis) y += height / 2;

        if ((0, _das.isDasBooleanTrue)(style["HIDEAXISLABEL"])) quant = null;else quant = { min: smin, max: smax };
    }

    var stroke = style.FGCOLOR || null;
    var fill = style.BGCOLOR || style.COLOR1 || 'green';
    if (style.BGITEM && feature.itemRgb) fill = feature.itemRgb;
    var alpha = style.ALPHA ? 1.0 * style.ALPHA : null;

    if (style.BGGRAD) {
        var grad = style.BGGRAD;
        var step = relScore * grad.length | 0;
        step = R.clamp(0, step, grad.length - 1);
        fill = grad[step];
    }

    if (style.COLOR2) {
        var _grad = style._gradient;
        if (!_grad) {
            _grad = (0, _color.makeGradient)(50, style.COLOR1, style.COLOR2, style.COLOR3);
            style._gradient = _grad;
        }

        var _step = relScore * _grad.length | 0;
        _step = R.clamp(0, _step, _grad.length - 1);
        fill = _grad[_step];
    }

    var tempGlyph = new Glyphs.BoxGlyph(minPos, y, maxPos - minPos, height, fill, stroke, alpha);
    glyph = new Glyphs.TranslatedGlyph(tempGlyph, 0, 0, requiredHeight);

    return [glyph, quant];
}

function featureToPointGlyph(tier, feature, style) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var score = feature.score;

    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = tier.forceHeight || style.HEIGHT || 30;

    var glyph = null;
    var quant = null;

    var _getScoreMinMax5 = getScoreMinMax(tier, style),
        _getScoreMinMax6 = _slicedToArray(_getScoreMinMax5, 2),
        smin = _getScoreMinMax6[0],
        smax = _getScoreMinMax6[1];

    var yscale = 1.0 * height / (smax - smin);
    var relScore = (1.0 * score - smin) / (smax - smin);
    var sc = (score - 1.0 * smin) * yscale | 0;
    quant = { min: smin, max: smax };

    var fill = style.FGCOLOR || style.COLOR1 || 'black';
    if (style.COLOR2) {
        var grad = style._gradient;
        if (!grad) {
            grad = (0, _color.makeGradient)(50, style.COLOR1, style.COLOR2, style.COLOR3);
            style._gradient = grad;
        }

        var step = relScore * grad.length | 0;
        step = R.clamp(0, step, grad.length - 1);
        fill = grad[step];
    }

    glyph = new Glyphs.PointGlyph((minPos + maxPos) / 2, height - sc, height, fill);

    return [glyph, quant];
}

function sequenceGlyph(canvas, tier, feature, style, forceHeight) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var min = feature.min;
    var max = feature.max;
    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;

    var glyph = null;

    var rawseq = feature.seq;
    var seq = rawseq;
    var rawquals = feature.quals;
    var quals = rawquals;
    var insertionLabels = (0, _das.isDasBooleanTrue)(style.__INSERTIONS);

    var indels = [];
    if (feature.cigar) {
        var ops = (0, _cigar.parseCigar)(feature.cigar);
        seq = '';
        quals = '';
        var cursor = 0;

        ops.forEach(function (co) {
            if (co.op === 'M') {
                seq += rawseq.substr(cursor, co.cnt);
                quals += rawquals.substr(cursor, co.cnt);
                cursor += co.cnt;
            } else if (co.op === 'D') {
                seq += "-".repeat(co.cnt);
                quals += "Z".repeat(co.cnt);
            } else if (co.op === 'I') {
                var inseq = rawseq.substr(cursor, co.cnt);
                var ig = new Glyphs.TranslatedGlyph(new Glyphs.TriangleGlyph(minPos + seq.length * scale, 6, 'S', 5, tier.browser.baseColors['I']), 0, -2, 0);
                if (insertionLabels) ig = new Glyphs.LabelledGlyph(canvas, ig, inseq, false, 'center', 'above', '7px sans-serif');
                ig.feature = { label: 'Insertion: ' + inseq, type: 'insertion', method: 'insertion' };
                indels.push(ig);

                cursor += co.cnt;
            } else if (co.op === 'S') {
                cursor += co.cnt;
            } else {
                console.log('unknown cigop' + co.op);
            }
        });
    }

    var refSeq = getRefSeq(tier, min, max);
    if (seq && refSeq && (style.__SEQCOLOR === 'mismatch' || style.__SEQCOLOR === 'mismatch-all')) {
        var mismatchSeq = [];
        var match = feature.orientation === '-' ? ',' : '.';
        for (var i = 0; i < seq.length; ++i) {
            mismatchSeq.push(seq[i] == refSeq[i] ? match : seq[i]);
        }
        seq = mismatchSeq.join('');
    }

    var strandColor = feature.orientation === '-' ? style._minusColor || 'lightskyblue' : style._plusColor || 'lightsalmon';

    if (style.__disableQuals) quals = false;

    glyph = new Glyphs.SequenceGlyph(tier.browser.baseColors, strandColor, minPos, maxPos, height, seq, refSeq, style.__SEQCOLOR, quals, !(0, _das.isDasBooleanTrue)(style.__CLEARBG), tier.scaleVertical);

    if (insertionLabels) glyph = new Glyphs.TranslatedGlyph(glyph, 0, 7);

    if (indels.length > 0) {
        indels.splice(0, 0, glyph);
        glyph = new Glyphs.GroupGlyph(indels);
    }

    return glyph;
}

function makeLinePlot(features, style, tier, yshift) {
    yshift = yshift || 0;

    var origin = tier.browser.viewStart,
        scale = tier.browser.scale;
    var height = tier.forceHeight || style.HEIGHT || 30;
    var min = tier.quantMin(style);
    var max = tier.quantMax(style);

    // AUTOMIN & AUTOMAX respectively set the lower and upper bounds
    if ((0, _das.isDasBooleanTrue)(style.AUTOMIN)) {
        // add some basically arbitrary padding
        min = tier.currentFeaturesMinScore * 0.95;
    }
    if ((0, _das.isDasBooleanTrue)(style.AUTOMAX)) {
        max = tier.currentFeaturesMaxScore * 1.05;
    }

    var yscale = 1.0 * height / (max - min);
    var color = style.FGCOLOR || style.COLOR1 || 'black';

    var prevSign = 1;
    var curSign = null;

    var curGlyphPoints = [];
    var glyphSequences = [];

    var prevPoint = null;

    features.forEach(function (f) {
        var px = (((f.min | 0) + (f.max | 0)) / 2 - origin) * scale;
        var sc = (f.score - 1.0 * min) * yscale | 0;

        // Additive tracks are always above the x-axis, and are colored
        // depending on whether the score is positive or negative.
        if ((0, _das.isDasBooleanTrue)(style.ADDITIVE)) {
            curSign = f.score < 0 ? -1 : 1;

            if (curSign !== prevSign) {
                glyphSequences.push({
                    points: curGlyphPoints,
                    color: prevSign === 1 ? style.POSCOLOR : style.NEGCOLOR
                });
                curGlyphPoints = [];
                // Need to add the previous point to this sequence,
                // otherwise there is a gap in the resulting plot
                curGlyphPoints.push(prevPoint);
            }
            prevSign = curSign;
        } else {
            curSign = 1;
        }

        var py = height - sc * curSign + yshift;
        prevPoint = { x: px, y: py };
        curGlyphPoints.push(prevPoint);
    });

    // Need to add the final sequence of points as well.
    if ((0, _das.isDasBooleanTrue)(style.ADDITIVE)) {
        color = curSign === 1 ? style.POSCOLOR : style.NEGCOLOR;
    }
    glyphSequences.push({
        points: curGlyphPoints,
        color: color
    });

    var lggs = glyphSequences.map(function (gs) {
        var lgg = new Glyphs.LineGraphGlyph(gs.points, gs.color, height);
        lgg.quant = { min: min, max: max };

        if (style.ZINDEX) lgg.zindex = style.ZINDEX | 0;

        return lgg;
    });

    return lggs;
}

function makeStackedBars(features, tier) {
    var glyphs = [];

    var posStacks = [],
        negStacks = [];

    var scale = tier.browser.scale,
        origin = tier.browser.viewStart;
    for (var fi = 0; fi < features.length; ++fi) {
        var feature = features[fi];
        var style = tier.styleForFeature(feature);
        var score = feature.score * 1.0;

        var height = tier.forceHeight || style.HEIGHT || 12;
        var requiredHeight = height = 1.0 * height;

        var min = feature.min;
        var max = feature.max;

        var minPos = (min - origin) * scale;
        var rawMaxPos = (max - origin + 1) * scale;
        var maxPos = Math.max(rawMaxPos, minPos + 1);

        // This should somewhat match the 'HISTOGRAM' path.

        var smin = tier.quantMin(style);
        var smax = tier.quantMax(style);

        if (!smax) {
            if (smin < 0) {
                smax = 0;
            } else {
                smax = 10;
            }
        } else {
            smax = smax * 1.0;
        }

        if (!smin) {
            smin = 0;
        } else {
            smin = smin * 1.0;
        }

        var stackOrigin;
        if (score >= 0) {
            stackOrigin = posStacks[min] || 0;
            posStacks[min] = stackOrigin + score;
        } else {
            stackOrigin = negStacks[min] || 0;
            negStacks[min] = stackOrigin + score;
        }

        if (stackOrigin > smax || stackOrigin < smin) {
            // Stack has extended outside of range.
            continue;
        }

        if (stackOrigin + score < smin) {
            score = smin - stackOrigin;
        }
        if (stackOrigin + score > smax) {
            score = smax - stackOrigin;
        }

        var relScoreEnd = (score + stackOrigin - smin) / (smax - smin);
        var relScoreStart = (stackOrigin - smin) / (smax - smin);
        var relScoreMax = Math.max(relScoreStart, relScoreEnd);
        var relScoreMin = Math.min(relScoreStart, relScoreEnd);

        height = (relScoreMax - relScoreMin) * requiredHeight;
        var y = (1.0 - relScoreMax) * requiredHeight;

        var stroke = style.FGCOLOR || null;
        var fill = style.BGCOLOR || style.COLOR1 || 'green';
        if (style.BGITEM && feature.itemRgb) fill = feature.itemRgb;
        var alpha = style.ALPHA ? 1.0 * style.ALPHA : null;

        var gg = new Glyphs.BoxGlyph(minPos, y, maxPos - minPos, height, fill, stroke, alpha);
        gg = new Glyphs.TranslatedGlyph(gg, 0, 0, requiredHeight);
        gg.feature = feature;
        gg.quant = {
            min: smin, max: smax
        };
        if (style.ZINDEX) {
            gg.zindex = style.ZINDEX | 0;
        }
        glyphs.push(gg);
    }
    return glyphs;
}

// height is subtier height
function createQuantOverlay(tier, height) {
    var retina = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

    var width = 50;

    tier.quantOverlay.height = height;
    tier.quantOverlay.width = retina ? width * 2 : width;
    tier.quantOverlay.style.height = '' + (retina ? height / 2 : height) + 'px';
    tier.quantOverlay.style.width = '' + width + 'px';
    tier.quantOverlay.style.display = 'block';

    var canvas = tier.quantOverlay.getContext('2d');

    if (retina) {
        canvas.scale(2, 2);
    }

    return canvas;
}

function paintQuant(canvas, tier, quant, tics) {
    canvas.save();

    var h = tier.quantOverlay.height;
    var w = 100;

    var ticSpacing = (h + tier.padding * 2) / tics;
    var ticInterval = (quant.max - quant.min) / tics;

    canvas.fillStyle = 'white';
    canvas.globalAlpha = 0.6;
    if (tier.browser.rulerLocation == 'right') {
        canvas.fillRect(w - 30, 0, 30, h + tier.padding * 2);
    } else {
        canvas.fillRect(0, 0, 30, h + tier.padding * 2);
    }
    canvas.globalAlpha = 1.0;

    canvas.strokeStyle = 'black';
    canvas.lineWidth = 1;
    canvas.beginPath();
    if (tier.browser.rulerLocation == 'right') {
        canvas.moveTo(w - 8, tier.padding);
        canvas.lineTo(w, tier.padding);
        canvas.lineTo(w, h + tier.padding);
        canvas.lineTo(w - 8, h + tier.padding);

        for (var t = 1; t < tics - 1; t++) {
            var ty = t * ticSpacing;
            canvas.moveTo(w, ty);
            canvas.lineTo(w - 5, ty);
        }
    } else {
        canvas.moveTo(8, tier.padding);
        canvas.lineTo(0, tier.padding);
        canvas.lineTo(0, h + tier.padding);
        canvas.lineTo(8, h + tier.padding);

        for (var _t = 1; _t < tics - 1; _t++) {
            var _ty = _t * ticSpacing;
            canvas.moveTo(0, _ty);
            canvas.lineTo(5, _ty);
        }
    }
    canvas.stroke();

    canvas.fillStyle = 'black';

    if (tier.browser.rulerLocation == 'right') {
        canvas.textAlign = 'right';
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.max), w - 9, 8);
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.min), w - 9, h + tier.padding);

        for (var _t2 = 1; _t2 < tics - 1; _t2++) {
            var _ty2 = _t2 * ticSpacing;
            canvas.fillText((0, _numformats.formatQuantLabel)(1.0 * quant.max - _t2 * ticInterval), w - 9, _ty2 + 3);
        }
    } else {
        canvas.textAlign = 'left';
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.max), 9, 8);
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.min), 9, h + tier.padding);

        for (var _t3 = 1; _t3 < tics - 1; _t3++) {
            var _ty3 = _t3 * ticSpacing;
            canvas.fillText((0, _numformats.formatQuantLabel)(1.0 * quant.max - _t3 * ticInterval), 9, _ty3 + 3);
        }
    }

    canvas.restore();
}

function featureLookup(tier, rx, ry) {
    var st = tier.subtiers;
    if (!st) {
        return;
    }

    var sti = 0;
    ry -= tier.padding;
    while (sti < st.length && ry > st[sti].height && sti < st.length - 1) {
        ry = ry - st[sti].height - tier.padding;
        ++sti;
    }
    if (sti >= st.length) {
        return;
    }

    var glyphs = st[sti].glyphs;
    var viewCenter = (tier.browser.viewStart + tier.browser.viewEnd) / 2;
    var offset = (tier.glyphCacheOrigin - tier.browser.viewStart) * tier.browser.scale;
    rx -= offset;

    return glyphLookup(glyphs, rx, ry);
}

function glyphLookup(glyphs, rx, ry, matches) {
    matches = matches || [];

    for (var gi = glyphs.length - 1; gi >= 0; --gi) {
        var g = glyphs[gi];
        if (!g.notSelectable && g.min() <= rx && g.max() >= rx) {
            if (g.minY) {
                if (ry < g.minY() || ry > g.maxY()) continue;
            }

            if (g.feature) {
                matches.push(g.feature);
            } else if (g.group) {
                matches.push(g.group);
            }

            if (g.glyphs) {
                return glyphLookup(g.glyphs, rx, ry, matches);
            } else if (g.glyph) {
                return glyphLookup([g.glyph], rx, ry, matches);
            } else {
                return matches;
            }
        }
    }
    return matches;
}

},{"./cigar.js":8,"./color.js":9,"./das.js":10,"./feature-draw.js":20,"./glyphs.js":23,"./numformats":29,"./sequence-draw.js":35,"./spans.js":40,"./utils.js":55,"ramda":62}],12:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// domui.js: SVG UI components
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
}

Browser.prototype.removeAllPopups = function () {
    for (var pi = 0; pi < this.popups.length; ++pi) {
        var popup = this.popups[pi];
        if (popup.onClose) {
            try {
                popup.onClose();
            } catch (ex) {
                console.log(ex);
            }
        }
        this.hPopupHolder.removeChild(popup.component);
    }
    this.popups = [];
};

Browser.prototype.makeTooltip = function (ele, text) {
    ele.title = text;
};

Browser.prototype.popit = function (ev, name, ele, opts) {
    var thisB = this;
    if (!opts) opts = {};
    if (!ev) ev = {};

    var width = opts.width || 200;

    var mx, my;

    if (ev.clientX) {
        var mx = ev.clientX,
            my = ev.clientY;
    } else {
        mx = 500;my = 50;
    }
    mx += document.documentElement.scrollLeft || document.body.scrollLeft;
    my += document.documentElement.scrollTop || document.body.scrollTop;
    var winWidth = window.innerWidth;

    var top = my;
    var left = Math.min(mx - width / 2 - 4, winWidth - width - 30);

    var popup = makeElement('div');
    popup.className = 'popover fade ' + (ev.clientX ? 'bottom ' : '') + 'in';
    popup.style.display = 'block';
    popup.style.position = 'absolute';
    popup.style.top = '' + top + 'px';
    popup.style.left = '' + left + 'px';
    popup.style.width = width + 'px';
    if (width > 276) {
        // HACK Bootstrappification...
        popup.style.maxWidth = width + 'px';
    }

    popup.appendChild(makeElement('div', null, { className: 'arrow' }));

    if (name) {
        var closeButton = makeElement('button', '', { className: 'close' });
        closeButton.innerHTML = '&times;';

        closeButton.addEventListener('mouseover', function (ev) {
            closeButton.style.color = 'red';
        }, false);
        closeButton.addEventListener('mouseout', function (ev) {
            closeButton.style.color = 'black';
        }, false);
        closeButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            thisB.removeAllPopups();
        }, false);
        var tbar = makeElement('h4', [makeElement('span', name, null, { maxWidth: '200px' }), closeButton], {/*className: 'popover-title' */}, { paddingLeft: '10px', paddingRight: '10px' });

        if (!opts.disableDrag) {
            var dragOX, dragOY;
            var moveHandler, _upHandler;
            moveHandler = function moveHandler(ev) {
                ev.stopPropagation();ev.preventDefault();
                left = left + (ev.clientX - dragOX);
                if (left < 8) {
                    left = 8;
                }if (left > winWidth - width - 32) {
                    left = winWidth - width - 26;
                }
                top = top + (ev.clientY - dragOY);
                top = Math.max(10, top);
                popup.style.top = '' + top + 'px';
                popup.style.left = '' + Math.min(left, winWidth - width - 10) + 'px';
                dragOX = ev.clientX;dragOY = ev.clientY;
            };
            _upHandler = function upHandler(ev) {
                ev.stopPropagation();ev.preventDefault();
                window.removeEventListener('mousemove', moveHandler, false);
                window.removeEventListener('mouseup', _upHandler, false);
            };
            tbar.addEventListener('mousedown', function (ev) {
                ev.preventDefault();ev.stopPropagation();
                dragOX = ev.clientX;dragOY = ev.clientY;
                window.addEventListener('mousemove', moveHandler, false);
                window.addEventListener('mouseup', _upHandler, false);
            }, false);
        }

        popup.appendChild(tbar);
    }

    popup.appendChild(makeElement('div', ele, { className: 'popover-content' }, {
        padding: '0px'
    }));
    this.hPopupHolder.appendChild(popup);

    this.popups.push({
        component: popup,
        onClose: opts.onClose
    });
};

function makeTreeTableSection(title, content, visible) {

    var ttButton = makeElement('i');
    function update() {
        if (visible) {
            ttButton.className = 'fa fa-caret-down';
            content.style.display = 'table';
        } else {
            ttButton.className = 'fa fa-caret-right';
            content.style.display = 'none';
        }
    }
    update();

    var showHide = function showHide(ev) {
        ev.preventDefault();ev.stopPropagation();
        visible = !visible;
        update();
    };

    ttButton.addEventListener('click', showHide, false);

    var heading = makeElement('h6', [ttButton, ' ', title], {}, { display: 'block', background: 'gray', color: 'white', width: '100%', padding: '5px 2px', margin: '0px' });
    heading.addEventListener('click', showHide, false);

    return makeElement('div', [heading, content], {});
}

if (typeof module !== 'undefined') {
    module.exports = {
        makeTreeTableSection: makeTreeTableSection
    };
}

},{"./cbrowser":6,"./utils":55}],13:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.drawTier = exports.renderTier = undefined;

var _defaultRenderer = require("./default-renderer");

var DefaultRenderer = _interopRequireWildcard(_defaultRenderer);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.renderTier = renderTier;
exports.drawTier = drawTier;


function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

function drawTier(tier) {
    var canvas = tier.viewport.getContext("2d");
    var retina = tier.browser.retina && window.devicePixelRatio > 1;
    if (retina) {
        canvas.scale(2, 2);
    }

    var features = tier.currentFeatures;
    var sequence = tier.currentSequence;
    if (tier.sequenceSource) {
        DefaultRenderer.drawSeqTier(tier, sequence);
    } else if (features) {
        DefaultRenderer.prepareSubtiers(tier, canvas);
    } else {
        console.log("No sequence or features in tier!");
    }

    if (tier.subtiers) {
        DefaultRenderer.prepareViewport(tier, canvas, retina, true);
    }

    tier.drawOverlay();
    tier.paintQuant();

    if (typeof tier.dasSource.drawCallback === "function") {
        tier.dasSource.drawCallback(canvas, tier);
    }

    tier.originHaxx = 0;
    tier.browser.arrangeTiers();
}

},{"./default-renderer":11}],14:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// encode.js: interface for ENCODE DCC services
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var Promise = require('es6-promise').Promise;
}

function lookupEncodeURI(uri, json) {
    if (uri.indexOf('?') < 0) uri = uri + '?soft=true';

    return new Promise(function (accept, reject) {
        var req = new XMLHttpRequest();
        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (req.status >= 300) {
                    reject('Error code ' + req.status);
                } else {
                    var resp = JSON.parse(req.response);
                    accept(json ? resp : resp.location);
                }
            }
        };

        req.open('GET', uri, true);
        req.setRequestHeader('Accept', 'application/json');
        req.responseType = 'text';
        req.send();
    });
}

function EncodeURLHolder(url) {
    this.rawurl = url;
}

EncodeURLHolder.prototype.getURLPromise = function () {
    if (this.urlPromise && this.urlPromiseValidity > Date.now()) {
        return this.urlPromise;
    } else {
        this.urlPromise = lookupEncodeURI(this.rawurl, true).then(function (resp) {
            return resp.location;
        });
        this.urlPromiseValidity = Date.now() + 12 * 3600 * 1000;
        return this.urlPromise;
    }
};

function EncodeFetchable(url, start, end, opts) {
    if (!opts) {
        if ((typeof start === 'undefined' ? 'undefined' : _typeof(start)) === 'object') {
            opts = start;
            start = undefined;
        } else {
            opts = {};
        }
    }

    this.url = typeof url === 'string' ? new EncodeURLHolder(url) : url;
    this.start = start || 0;
    if (end) {
        this.end = end;
    }
    this.opts = opts;
}

EncodeFetchable.prototype.slice = function (s, l) {
    if (s < 0) {
        throw 'Bad slice ' + s;
    }

    var ns = this.start,
        ne = this.end;
    if (ns && s) {
        ns = ns + s;
    } else {
        ns = s || ns;
    }
    if (l && ns) {
        ne = ns + l - 1;
    } else {
        ne = ne || l - 1;
    }
    return new EncodeFetchable(this.url, ns, ne, this.opts);
};

EncodeFetchable.prototype.fetchAsText = function (callback) {
    var self = this;
    var req = new XMLHttpRequest();
    var length;
    self.url.getURLPromise().then(function (url) {
        req.open('GET', url, true);

        if (self.end) {
            if (self.end - self.start > 100000000) {
                throw 'Monster fetch!';
            }
            req.setRequestHeader('Range', 'bytes=' + self.start + '-' + self.end);
            length = self.end - self.start + 1;
        }

        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (req.status == 200 || req.status == 206) {
                    return callback(req.responseText);
                } else {
                    return callback(null);
                }
            }
        };
        if (self.opts.credentials) {
            req.withCredentials = true;
        }
        req.send();
    }).catch(function (err) {
        console.log(err);
        return callback(null);
    });
};

EncodeFetchable.prototype.salted = function () {
    return this;
};

EncodeFetchable.prototype.fetch = function (callback, attempt, truncatedLength) {
    var self = this;

    attempt = attempt || 1;
    if (attempt > 3) {
        return callback(null);
    }

    self.url.getURLPromise().then(function (url) {
        var req = new XMLHttpRequest();
        var length;
        req.open('GET', url, true);
        req.overrideMimeType('text/plain; charset=x-user-defined');
        if (self.end) {
            if (self.end - self.start > 100000000) {
                throw 'Monster fetch!';
            }
            req.setRequestHeader('Range', 'bytes=' + self.start + '-' + self.end);
            length = self.end - self.start + 1;
        }
        req.responseType = 'arraybuffer';
        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (req.status == 200 || req.status == 206) {
                    if (req.response) {
                        var bl = req.response.byteLength;
                        if (length && length != bl && (!truncatedLength || bl != truncatedLength)) {
                            return self.fetch(callback, attempt + 1, bl);
                        } else {
                            return callback(req.response);
                        }
                    } else if (req.mozResponseArrayBuffer) {
                        return callback(req.mozResponseArrayBuffer);
                    } else {
                        var r = req.responseText;
                        if (length && length != r.length && (!truncatedLength || r.length != truncatedLength)) {
                            return self.fetch(callback, attempt + 1, r.length);
                        } else {
                            return callback(bstringToBuffer(req.responseText));
                        }
                    }
                } else {
                    return self.fetch(callback, attempt + 1);
                }
            }
        };
        if (self.opts.credentials) {
            req.withCredentials = true;
        }
        req.send();
    }).catch(function (err) {
        console.log(err);
    });
};

function bstringToBuffer(result) {
    if (!result) {
        return null;
    }

    var ba = new Uint8Array(result.length);
    for (var i = 0; i < ba.length; ++i) {
        ba[i] = result.charCodeAt(i);
    }
    return ba.buffer;
}

if (typeof module !== 'undefined') {
    module.exports = {
        lookupEncodeURI: lookupEncodeURI,
        EncodeFetchable: EncodeFetchable
    };
}

},{"es6-promise":59}],15:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// ensembljson.js -- query the Ensembl REST API.
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
    var FeatureSourceBase = sa.FeatureSourceBase;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;
}

function EnsemblFeatureSource(source) {
    FeatureSourceBase.call(this);
    this.source = source;
    this.base = source.uri || '//rest.ensembl.org';
    if (this.base.indexOf('//') === 0) {
        var proto = window.location.protocol;
        if (proto == 'http:' || proto == 'https:') {
            // Protocol-relative URLs okay.
        } else {
            this.base = 'http:' + this.base;
        }
    }
    this.species = source.species || 'human';

    if (typeof source.type === 'string') {
        this.type = [source.type];
    } else {
        this.type = source.type || ['regulatory'];
    }
}

EnsemblFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);
EnsemblFeatureSource.prototype.constructor = EnsemblFeatureSource;

EnsemblFeatureSource.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();

    var tsStyle = new DASStyle();
    tsStyle.glyph = '__NONE';
    if (this.type.indexOf('exon') >= 0) stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);
    if (this.type.indexOf('exon') >= 0 || this.type.indexOf('transcript') >= 0) stylesheet.pushStyle({ type: 'gene' }, null, tsStyle);

    var cdsStyle = new DASStyle();
    cdsStyle.glyph = 'BOX';
    cdsStyle.FGCOLOR = 'black';
    cdsStyle.BGCOLOR = 'red';
    cdsStyle.HEIGHT = 8;
    cdsStyle.BUMP = true;
    cdsStyle.LABEL = true;
    cdsStyle.ZINDEX = 10;
    stylesheet.pushStyle({ type: 'cds' }, null, cdsStyle);

    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'SQUARE';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: '.+_UTR_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'S';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: 'missense_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'N';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: 'splice_.+_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'STAR';
        varStyle.POINTS = 6;
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: 'regulatory_region_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'rgb(50,80,255)';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'variation' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'SQUARE';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: '.+_UTR_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'S';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: 'missense_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'N';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: 'splice_.+_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'STAR';
        varStyle.POINTS = 6;
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: 'regulatory_region_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'indel' }, null, varStyle);
    }

    var wigStyle = new DASStyle();
    wigStyle.glyph = 'BOX';
    wigStyle.FGCOLOR = 'black';
    wigStyle.BGCOLOR = 'orange';
    wigStyle.HEIGHT = 8;
    wigStyle.BUMP = true;
    wigStyle.LABEL = true;
    wigStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
    return callback(stylesheet);
};

EnsemblFeatureSource.prototype.getScales = function () {
    return [];
};

EnsemblFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;
    var url = this.base + '/overlap/region/' + this.species + '/' + chr + ':' + min + '-' + max;

    var filters = [];
    for (var ti = 0; ti < this.type.length; ++ti) {
        filters.push('feature=' + this.type[ti]);
    }
    filters.push('content-type=application/json');
    url = url + '?' + filters.join(';');

    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            thisB.busy--;
            thisB.notifyActivity();

            if (req.status >= 300) {
                var err = 'Error code ' + req.status;
                try {
                    var jr = JSON.parse(req.response);
                    if (jr.error) {
                        err = jr.error;
                    }
                } catch (ex) {};

                callback(err, null);
            } else {
                var jf = JSON.parse(req.response);
                var features = [];
                for (var fi = 0; fi < jf.length; ++fi) {
                    var j = jf[fi];

                    var notes = [];
                    var f = new DASFeature();
                    f.segment = chr;
                    f.min = j['start'] | 0;
                    f.max = j['end'] | 0;
                    f.type = j.feature_type || 'unknown';
                    f.id = j.ID;

                    if (j.Parent) {
                        var grp = new DASGroup();
                        grp.id = j.Parent;
                        f.groups = [grp];
                    }

                    if (j.strand) {
                        if (j.strand < 0) f.orientation = '-';else if (j.strand > 0) f.orientation = '+';
                    }

                    if (j.consequence_type) f.method = j.consequence_type;

                    if (j.alt_alleles) {
                        notes.push('Alleles=' + j.alt_alleles.join('/'));
                        if (j.alt_alleles.length > 1) {
                            if (j.alt_alleles[1].length != j.alt_alleles[0].length || j.alt_alleles[1] == '-') {
                                f.type = 'indel';
                            }
                        }
                    }

                    if (notes.length > 0) {
                        f.notes = notes;
                    }
                    features.push(f);
                }
                callback(null, features);
            }
        }
    };

    thisB.busy++;
    thisB.notifyActivity();

    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

EnsemblFeatureSource.prototype.capabilities = function () {
    var caps = {};
    if (this.type && this.type.indexOf('transcript') >= 0) {
        caps.search = ['gene'];
    }
    return caps;
};

EnsemblFeatureSource.prototype.search = function (query, callback) {
    var url = this.base + '/lookup/symbol/' + this.species + '/' + query + '?content-type=application/json';
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) if (req.status >= 300 || req.status < 200) {
            var err = 'Error code ' + req.status;
            try {
                var jr = JSON.parse(req.response);
                if (jr.error) {
                    err = jr.error;
                }
            } catch (ex) {};

            if (req.status == 400) // E! returns an error if the lookup fails.  Who knows?
                return callback([]);else return callback(null, err);
        } else {
            var resp = JSON.parse(req.response);
            var result = [];

            if (resp && resp.seq_region_name) {
                result.push({
                    segment: resp.seq_region_name,
                    min: resp.start,
                    max: resp.end
                });
            }

            return callback(result);
        }
    };

    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

dalliance_registerSourceAdapterFactory('ensembl', function (source) {
    return { features: new EnsemblFeatureSource(source) };
});

},{"./das":10,"./sourceadapters":38}],16:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// export-config.js
//

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var sha1 = require('./sha1');
    var hex_sha1 = sha1.hex_sha1;

    var das = require('./das');
    var copyStylesheet = das.copyStylesheet;
}

Browser.prototype.exportFullConfig = function (opts) {
    opts = opts || {};

    var config = {
        chr: this.chr,
        viewStart: this.viewStart | 0,
        viewEnd: this.viewEnd | 0,
        cookieKey: 'dalliance_' + hex_sha1(Date.now()),

        coordSystem: this.coordSystem,

        sources: this.exportSourceConfig(),

        chains: this.exportChains()
    };

    if (this.prefix) config.prefix = this.prefix;

    return config;
};

Browser.prototype.exportChains = function () {
    var cc = {};
    var cs = this.chains || {};
    for (var k in cs) {
        cc[k] = cs[k].exportConfig();
    }
    return cc;
};

Browser.prototype.exportSourceConfig = function (opts) {
    opts = opts || {};

    var sourceConfig = [];
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var tier = this.tiers[ti];
        var source = shallowCopy(tier.dasSource);

        if (source.noPersist) continue;

        source.coords = undefined;
        source.props = undefined;
        if (!source.disabled) source.disabled = undefined;

        if (tier.config.stylesheet) {
            source.style = copyStylesheet(tier.config.stylesheet).styles;
            source.stylesheet_uri = undefined;
        } else if (source.style) {
            source.style = copyStylesheet({ styles: source.style }).styles;
        }

        if (typeof tier.config.name === 'string') {
            source.name = tier.config.name;
        }

        if (tier.config.height !== undefined) {
            source.forceHeight = tier.config.height;
        }
        if (tier.config.forceMin !== undefined) {
            source.forceMin = tier.config.forceMin;
        }
        if (tier.config.forceMinDynamic) source.forceMinDynamic = tier.config.forceMinDynamic;
        if (tier.config.forceMax !== undefined) {
            source.forceMax = tier.config.forceMax;
        }
        if (tier.config.bumped !== undefined) {
            source.bumped = tier.config.bumped;
        }
        if (tier.config.forceMaxDynamic) source.forceMaxDynamic = tier.config.forceMaxDynamic;

        sourceConfig.push(source);
    }

    return sourceConfig;
};

Browser.prototype.exportPageTemplate = function (opts) {
    opts = opts || {};
    var template = '<html>\n' + '  <head>\n' + '    <script language="javascript" src="' + this.resolveURL('$$dalliance-compiled.js') + '"></script>\n' + '    <script language="javascript">\n' + '      var dalliance_browser = new Browser(' + JSON.stringify(this.exportFullConfig(opts), null, 2) + ');\n' + '    </script>\n' + '  </head>\n' + '  <body>\n' + '    <div id="svgHolder">Dalliance goes here</div>\n' + '  </body>\n' + '<html>\n';

    return template;
};

},{"./cbrowser":6,"./das":10,"./sha1":37,"./utils":55}],17:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// export-image.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var g = require('./glyphs');
    var OverlayLabelCanvas = g.OverlayLabelCanvas;

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
    var formatLongInt = nf.formatLongInt;

    var makeElement = require('./utils').makeElement;

    var VERSION = require('./version');

    var drawSeqTierGC = require('./sequence-draw').drawSeqTierGC;
}

function fillTextRightJustified(g, text, x, y) {
    g.fillText(text, x - g.measureText(text).width, y);
}

Browser.prototype.exportImage = function (opts) {
    opts = opts || {};

    var fpw = opts.width || this.featurePanelWidth;
    var padding = 3;
    var ypos = 0;
    if (opts.banner || opts.region) {
        ypos = 40;
    }

    var backupFPW = this.featurePanelWidth;
    var backupScale = this.scale;
    this.featurePanelWidth = fpw;
    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);

    var totHeight = ypos;
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (ti > 0) totHeight += padding;
        var tier = this.tiers[ti];

        tier.backupSubtiers = tier.subtiers;
        tier.backupOriginHaxx = tier.originHaxx;
        tier.backupLayoutHeight = tier.layoutHeight;

        if (tier.subtiers) {
            var renderer = this.getTierRenderer(tier);
            if (renderer && renderer.prepareSubtiers) {
                renderer.prepareSubtiers(tier, tier.viewport.getContext('2d'));
            }

            if (tier.subtiers) {
                var lh = tier.padding;
                for (var s = 0; s < tier.subtiers.length; ++s) {
                    lh = lh + tier.subtiers[s].height + tier.padding;
                }
                lh += 6;
                tier.layoutHeight = Math.max(lh, this.minTierHeight);
            }
        }

        if (tier.layoutHeight !== undefined) totHeight += tier.layoutHeight;
    }
    var mult = opts.resolutionMultiplier || 1.0;
    var font = '10px sans-serif';
    var margin = 200;

    {
        var tmpCanvas = makeElement('canvas', null, 1, 1);
        var tmpG = tmpCanvas.getContext('2d');
        tmpG.font = font;
        for (var ti = 0; ti < this.tiers.length; ++ti) {
            var tier = this.tiers[ti];
            var labelName;
            if (typeof tier.config.name === 'string') labelName = tier.config.name;else labelName = tier.dasSource.name;
            var labelWidth = tmpG.measureText(labelName).width;
            labelWidth += 32;
            if (labelWidth > margin) margin = labelWidth;
        }
    }

    var cw = (fpw + margin) * mult | 0;
    var ch = totHeight * mult | 0;
    var c = makeElement('canvas', null, { width: cw, height: ch });
    var g = c.getContext('2d');
    g.fillStyle = 'white';
    g.fillRect(0, 0, cw, ch);

    g.scale(mult, mult);

    if (opts.region) {
        g.save();
        g.fillStyle = 'black';
        g.font = '12pt sans-serif';
        g.fillText(this.chr + ':' + formatLongInt(this.viewStart) + '..' + formatLongInt(this.viewEnd), margin + 100, 28);
        g.restore();
    }

    if (opts.banner) {
        g.save();
        g.fillStyle = 'black';
        g.font = '12pt sans-serif';
        fillTextRightJustified(g, 'Graphics from Biodalliance ' + VERSION, margin + fpw - 100, 28);
        g.restore();
    }

    g.font = font;

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var tier = this.tiers[ti];
        var offset = (tier.glyphCacheOrigin - this.viewStart) * this.scale;

        var oc = new OverlayLabelCanvas();
        g.save(); // 1
        g.translate(0, ypos);

        g.save(); // 2
        g.beginPath();
        g.moveTo(margin, 0);
        g.lineTo(margin + fpw, 0);
        g.lineTo(margin + fpw, tier.layoutHeight);
        g.lineTo(margin, tier.layoutHeight);
        g.closePath();
        g.clip();
        g.translate(margin, 0);

        g.save(); // 3
        g.translate(offset, 0);
        if (tier.subtiers) {
            tier.paintToContext(g, oc, offset + 1000);
        } else {
            drawSeqTierGC(tier, tier.currentSequence, g);
        }
        g.restore(); // 2

        g.save(); // 3
        g.translate(offset, 0);
        oc.draw(g, -offset, fpw - offset);
        g.restore(); // 2
        g.restore(); // 1

        var hasQuant = false;
        var pos = 0;
        var subtiers = tier.subtiers || [];
        for (var sti = 0; sti < subtiers.length; ++sti) {
            var subtier = subtiers[sti];

            if (subtier.quant) {
                hasQuant = true;
                var q = subtier.quant;
                var h = subtier.height;

                var numTics = 2;
                if (h > 40) {
                    numTics = 1 + (h / 20 | 0);
                }
                var ticSpacing = h / (numTics - 1);
                var ticInterval = (q.max - q.min) / (numTics - 1);

                g.beginPath();
                g.moveTo(margin + 5, pos);
                g.lineTo(margin, pos);
                g.lineTo(margin, pos + subtier.height);
                g.lineTo(margin + 5, pos + subtier.height);
                for (var t = 1; t < numTics - 1; ++t) {
                    var ty = t * ticSpacing;
                    g.moveTo(margin, pos + ty);
                    g.lineTo(margin + 3, pos + ty);
                }
                g.strokeStyle = 'black';
                g.strokeWidth = 2;
                g.stroke();

                g.fillStyle = 'black';
                fillTextRightJustified(g, formatQuantLabel(q.max), margin - 3, pos + 7);
                fillTextRightJustified(g, formatQuantLabel(q.min), margin - 3, pos + subtier.height);
                for (var t = 1; t < numTics - 1; ++t) {
                    var ty = t * ticSpacing;
                    fillTextRightJustified(g, formatQuantLabel(1.0 * q.max - t * ticInterval), margin - 3, pos + ty + 3);
                }
            }

            pos += subtier.height + padding;
        }

        var labelName;
        if (typeof tier.config.name === 'string') labelName = tier.config.name;else labelName = tier.dasSource.name;
        var labelWidth = g.measureText(labelName).width;
        g.fillStyle = 'black';
        g.fillText(labelName, margin - (hasQuant ? 28 : 12) - labelWidth, (tier.layoutHeight + 3) / 2);

        g.restore(); // 0

        ypos += tier.layoutHeight + padding;

        tier.subtiers = tier.backupSubtiers;
        tier.originHaxx = tier.backupOriginHaxx;
        tier.layoutHeight = tier.backupLayoutHeight;
    }

    if (opts.highlights) {
        g.save();

        g.beginPath();
        g.moveTo(margin, 0);
        g.lineTo(margin + fpw, 0);
        g.lineTo(margin + fpw, ypos);
        g.lineTo(margin, ypos);
        g.closePath();
        g.clip();

        g.translate(margin + offset, 0);
        var origin = this.viewStart;
        var visStart = this.viewStart;
        var visEnd = this.viewEnd;

        for (var hi = 0; hi < this.highlights.length; ++hi) {
            var h = this.highlights[hi];
            if ((h.chr === this.chr || h.chr === 'chr' + this.chr) && h.min < visEnd && h.max > visStart) {
                g.globalAlpha = this.defaultHighlightAlpha;
                g.fillStyle = this.defaultHighlightFill;
                g.fillRect((h.min - origin) * this.scale, 0, (h.max - h.min) * this.scale, ypos);
            }
        }
        g.restore();
    }

    var rulerPos = -1;
    if (opts.ruler == 'center') {
        rulerPos = margin + (this.viewEnd - this.viewStart + 1) * this.scale / 2;
    } else if (opts.ruler == 'left') {
        rulerPos = margin;
    } else if (opts.ruler == 'right') {
        rulerPos = margin + (this.viewEnd - this.viewStart + 1) * this.scale;
    }
    if (rulerPos >= 0) {
        g.strokeStyle = 'blue';
        g.beginPath();
        g.moveTo(rulerPos, 0);
        g.lineTo(rulerPos, ypos);
        g.stroke();
    }

    this.featurePanelWidth = backupFPW;
    this.scale = backupScale;

    if (opts.blobCallback) {
        return c.toBlob(opts.blobCallback, 'image/png');
    } else {
        return c.toDataURL('image/png');
    }
};

},{"./cbrowser":6,"./glyphs":23,"./numformats":29,"./sequence-draw":35,"./utils":55,"./version":57}],18:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// export-ui.js
//

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
}

Browser.prototype.openExportPanel = function () {
    var b = this;
    if (this.uiMode === 'export') {
        this.hideToolPanel();
        this.setUiMode('none');
    } else {
        var exportForm = makeElement('div', null, { className: 'export-form' });
        var exportSelect = makeElement('select');
        exportSelect.appendChild(makeElement('option', 'SVG', { value: 'svg' }));
        exportSelect.appendChild(makeElement('option', 'Image', { value: 'png' }));
        exportSelect.appendChild(makeElement('option', 'Dalliance config', { value: 'config' }));
        exportSelect.appendChild(makeElement('option', 'Dalliance sources', { value: 'sources' }));
        exportSelect.appendChild(makeElement('option', 'Dalliance page', { value: 'page' }));
        exportSelect.value = 'svg';

        exportSelect.addEventListener('change', function (ev) {
            removeChildren(exportContent);
            setupEOT();
        }, false);
        exportForm.appendChild(makeElement('p', ['Export as: ', exportSelect]));

        var exportHighlightsToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportHighlights });
        exportHighlightsToggle.addEventListener('change', function (ev) {
            b.exportHighlights = exportHighlightsToggle.checked;
            b.storeStatus();
        }, false);
        var exportRulerToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportRuler });
        exportRulerToggle.addEventListener('change', function (ev) {
            b.exportRuler = exportRulerToggle.checked;
            b.storeStatus();
        }, false);
        var exportRegionToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportRegion });
        exportRegionToggle.addEventListener('change', function (ev) {
            b.exportRegion = exportRegionToggle.checked;
            b.storeStatus();
        }, false);
        var exportBannerToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportBanner });
        exportBannerToggle.addEventListener('change', function (ev) {
            b.exportBanner = exportBannerToggle.checked;
            b.storeStatus();
        }, false);
        var exportScale = makeElement('input', null, { type: 'text', value: '1.0' });
        var exportWidth = makeElement('input', null, { type: 'text', value: '800' });

        var exportButton = makeElement('button', 'Export', { className: 'btn btn-primary' });

        var exportDone = function exportDone(blobURL, note, type, name) {
            if (blobURL) {
                var downloadLink = makeElement('a', '[Download]', {
                    href: blobURL,
                    download: name,
                    type: type
                });

                var previewLink = makeElement('a', '[Preview in browser]', {
                    href: blobURL,
                    type: type,
                    target: '_new'
                });

                exportContent.appendChild(makeElement('p', ['' + note + ' created: ', downloadLink, previewLink]));
            }
        };

        exportButton.addEventListener('click', function (ev) {
            removeChildren(exportContent);

            var blobURL;
            if (exportSelect.value === 'svg') {
                blobURL = URL.createObjectURL(b.makeSVG({ highlights: exportHighlightsToggle.checked,
                    banner: b.exportBanner,
                    region: b.exportRegion,
                    ruler: exportRulerToggle.checked ? b.rulerLocation : 'none',
                    width: parseInt(exportWidth.value) || 800 }));
                exportDone(blobURL, 'SVG', 'image/svg', 'dalliance-view.svg');
            } else if (exportSelect.value === 'png') {
                var mult = parseFloat(exportScale.value);
                if (mult < 0.1 || mult > 10) {
                    alert('bad scale ' + mult);
                    return;
                }

                b.exportImage({
                    highlights: exportHighlightsToggle.checked,
                    banner: b.exportBanner,
                    region: b.exportRegion,
                    ruler: exportRulerToggle.checked ? b.rulerLocation : 'none',
                    resolutionMultiplier: mult,
                    width: parseInt(exportWidth.value) || 800,
                    blobCallback: function blobCallback(blob) {
                        exportDone(URL.createObjectURL(blob), 'Image', 'image/png', 'dalliance-view.png');
                    }
                });
            } else if (exportSelect.value === 'config') {
                var config = JSON.stringify(b.exportFullConfig(), null, 2);
                var blob = new Blob([config], { type: 'text/plain' });
                exportDone(URL.createObjectURL(blob), 'Configuration', 'text/plain', 'dalliance-config.json');
            } else if (exportSelect.value === 'sources') {
                var config = JSON.stringify(b.exportSourceConfig(), null, 2);
                var blob = new Blob([config], { type: 'text/plain' });
                exportDone(blobURL = URL.createObjectURL(blob), 'Source array', 'text/plain', 'dalliance-sources.json');
            } else if (exportSelect.value === 'page') {
                var page = b.exportPageTemplate();
                var type = 'text/html';
                var blob = new Blob([page], { type: type });
                exportDone(URL.createObjectURL(blob), 'Page template', 'text/html', 'dalliance-view.html');
            }
        }, false);

        b.addViewListener(function () {
            removeChildren(exportContent);
        });
        b.addTierListener(function () {
            removeChildren(exportContent);
        });

        var exportContent = makeElement('p', '');

        var eotHighlights = makeElement('tr', [makeElement('th', 'Include highlights', {}, { width: '400px', textAlign: 'right' }), makeElement('td', exportHighlightsToggle)]);
        var eotGuideline = makeElement('tr', [makeElement('th', 'Include vertical guideline', {}, { textAlign: 'right' }), makeElement('td', exportRulerToggle)]);
        var eotScale = makeElement('tr', [makeElement('th', 'Scale multiplier', {}, { textAlign: 'right' }), makeElement('td', exportScale)]);
        var eotWidth = makeElement('tr', [makeElement('th', 'Width (logical px)', {}, { textAlign: 'right' }), makeElement('td', exportWidth)]);
        var eotRegion = makeElement('tr', [makeElement('th', 'Label with genomic coordinates', {}, { textAlign: 'right' }), makeElement('td', exportRegionToggle)]);
        var eotBanner = makeElement('tr', [makeElement('th', 'Include banner', {}, { textAlign: 'right' }), makeElement('td', exportBannerToggle)]);

        var exportOptsTable = makeElement('table', [eotHighlights, eotGuideline, eotWidth, eotScale, eotRegion], null, { width: '500px' });
        var setupEOT = function setupEOT() {
            var es = exportSelect.value;
            eotHighlights.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotGuideline.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotScale.style.display = es == 'png' ? 'table-row' : 'none';
            eotWidth.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotRegion.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotBanner.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
        };
        setupEOT();

        exportForm.appendChild(exportOptsTable);
        exportForm.appendChild(exportButton);
        exportForm.appendChild(exportContent);

        if (this.uiMode !== 'none') this.hideToolPanel();
        this.browserHolder.insertBefore(exportForm, this.svgHolder);
        this.activeToolPanel = exportForm;

        this.setUiMode('export');
    }
};

},{"./cbrowser":6,"./utils":55}],19:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// exports.js: shim to export symbols into global namespace for ease of embedding
//

var browser = require('./cbrowser');
var chainset = require('./chainset');
var sa = require('./sourceadapters');
var utils = require('./utils');
var das = require('./das');
var sc = require('./sourcecompare');

window.Browser = browser.Browser;
window.sourcesAreEqual = sc.sourcesAreEqual;
window.Chainset = chainset.Chainset; // Pre-0.12 configurations need this.

// Useful for info plugins.  Should be reconsidered in the future.
window.makeElement = utils.makeElement;

// Allow source plugins to be loaded separately.
window.dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
window.dalliance_registerParserFactory = sa.registerParserFactory;
window.dalliance_makeParser = sa.makeParser;

// DAS* objects for some plugins -- remove when plugin API changes...

window.DASSequence = das.DASSequence;
window.DASFeature = das.DASFeature;
window.DASGroup = das.DASGroup;
window.DASStylesheet = das.DASStylesheet;
window.DASStyle = das.DASStyle;
window.DASSource = das.DASSource; // Pre-0.8 configurations used this.  Still some around...

var ruler = require("./rulers");
window.Ruler = ruler.Ruler;
window.rulerDrawCallback = ruler.rulerDrawCallback;

},{"./cbrowser":6,"./chainset":7,"./das":10,"./rulers":32,"./sourceadapters":38,"./sourcecompare":39,"./utils":55}],20:[function(require,module,exports){
//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// feature-draw.js: new feature-tier renderer
//

"use strict";

if (typeof require !== 'undefined') {
    var tier = require('./tier');
    var DasTier = tier.DasTier;

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
}

function SubTier(direct) {
    this.glyphs = [];
    this.height = 0;
    this.quant = null;
    this.direct = direct;
}

SubTier.prototype.indexFor = function (glyph) {
    var gmin = glyph.min();
    var lb = 0,
        ub = this.glyphs.length;
    while (ub > lb) {
        var mid = (lb + ub) / 2 | 0;
        if (mid >= this.glyphs.length) return this.glyphs.length;
        var mg = this.glyphs[mid];
        if (gmin < mg.min()) {
            ub = mid;
        } else {
            lb = mid + 1;
        }
    }
    return ub;
};

SubTier.prototype.add = function (glyph) {
    if (this.direct) {
        this.glyphs.push(glyph);
    } else {
        var ind = this.indexFor(glyph);
        this.glyphs.splice(ind, 0, glyph);
    }
    this.height = Math.max(this.height, glyph.height());
    if (glyph.quant && this.quant == null) {
        this.quant = glyph.quant;
    }
};

SubTier.prototype.hasSpaceFor = function (glyph) {
    if (this.direct) throw Error('Probing in direct-addition subtier');

    var ind = this.indexFor(glyph);
    if (ind > 0 && this.glyphs[ind - 1].max() >= glyph.min()) return false;
    if (ind < this.glyphs.length && this.glyphs[ind].min() <= glyph.max()) return false;

    return true;
};

DasTier.prototype.paintToContext = function (gc, oc, offset) {
    var subtiers = this.subtiers;
    var fpw = this.viewport.width | 0;

    gc.save();
    for (var s = 0; s < subtiers.length; ++s) {
        var quant = null;
        var glyphs = subtiers[s].glyphs;
        for (var i = 0; i < glyphs.length; ++i) {
            var glyph = glyphs[i];
            if (glyph.min() < fpw - offset && glyph.max() > -offset) {
                var glyph = glyphs[i];
                glyph.draw(gc, oc);
                if (glyph.quant) {
                    quant = glyph.quant;
                }
            }
        }

        if (quant && quant.min < 0 && quant.max > 0 && this.dasSource.zeroLine) {
            var ry = subtiers[0].height * (quant.max / (quant.max - quant.min));
            gc.save();
            gc.strokeStyle = this.dasSource.zeroLine;
            gc.lineWidth = 0.5;
            gc.beginPath();
            gc.moveTo(-1000, ry);
            gc.lineTo(fpw + 1000, ry);
            gc.stroke();
            gc.restore();
        }

        if (this.scaleVertical) {
            var scale = this.browser.scale;
            gc.translate(0, scale + this.padding);
            oc.translate(0, scale + this.padding);
        } else {
            gc.translate(0, subtiers[s].height + this.padding);
            oc.translate(0, subtiers[s].height + this.padding);
        }
    }
    gc.restore();

    if (quant && this.quantLeapThreshold && this.featureSource && this.browser.sourceAdapterIsCapable(this.featureSource, 'quantLeap')) {
        var ry = subtiers[0].height * (1.0 - (this.quantLeapThreshold - quant.min) / (quant.max - quant.min));

        gc.save();
        gc.strokeStyle = 'red';
        gc.lineWidth = 0.3;
        gc.beginPath();
        gc.moveTo(-1000, ry);
        gc.lineTo(fpw + 1000, ry);
        gc.stroke();
        gc.restore();
    }
};

DasTier.prototype.paintQuant = function () {
    if (!this.quantOverlay) return;

    var retina = this.browser.retina && window.devicePixelRatio > 1;

    var quant;
    if (this.subtiers && this.subtiers.length > 0) quant = this.subtiers[0].quant;

    if (quant) {
        var h = this.subtiers[0].height;
        var w = 50;
        this.quantOverlay.height = this.viewport.height;
        this.quantOverlay.width = retina ? w * 2 : w;
        this.quantOverlay.style.height = '' + (retina ? this.quantOverlay.height / 2 : this.quantOverlay.height) + 'px';
        this.quantOverlay.style.width = '' + w + 'px';
        this.quantOverlay.style.display = 'block';
        var ctx = this.quantOverlay.getContext('2d');
        if (retina) ctx.scale(2, 2);

        var numTics = 2;
        if (h > 40) {
            numTics = 1 + (h / 20 | 0);
        }
        var ticSpacing = (h + this.padding * 2) / (numTics - 1);
        var ticInterval = (quant.max - quant.min) / (numTics - 1);

        ctx.fillStyle = 'white';
        ctx.globalAlpha = 0.6;
        if (this.browser.rulerLocation == 'right') {
            ctx.fillRect(w - 30, 0, 30, h + this.padding * 2);
        } else {
            ctx.fillRect(0, 0, 30, h + this.padding * 2);
        }
        ctx.globalAlpha = 1.0;

        ctx.strokeStyle = 'black';
        ctx.lineWidth = 1;
        ctx.beginPath();

        if (this.browser.rulerLocation == 'right') {
            ctx.moveTo(w - 8, this.padding);
            ctx.lineTo(w, this.padding);
            ctx.lineTo(w, h + this.padding);
            ctx.lineTo(w - 8, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.moveTo(w, ty);
                ctx.lineTo(w - 5, ty);
            }
        } else {
            ctx.moveTo(8, this.padding);
            ctx.lineTo(0, this.padding);
            ctx.lineTo(0, h + this.padding);
            ctx.lineTo(8, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.moveTo(0, ty);
                ctx.lineTo(5, ty);
            }
        }
        ctx.stroke();

        ctx.fillStyle = 'black';

        if (this.browser.rulerLocation == 'right') {
            ctx.textAlign = 'right';
            ctx.fillText(formatQuantLabel(quant.max), w - 9, 8);
            ctx.fillText(formatQuantLabel(quant.min), w - 9, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.fillText(formatQuantLabel(1.0 * quant.max - t * ticInterval), w - 9, ty + 3);
            }
        } else {
            ctx.textAlign = 'left';
            ctx.fillText(formatQuantLabel(quant.max), 9, 8);
            ctx.fillText(formatQuantLabel(quant.min), 9, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.fillText(formatQuantLabel(1.0 * quant.max - t * ticInterval), 9, ty + 3);
            }
        }
    } else {
        this.quantOverlay.style.display = 'none';
    }
};

DasTier.prototype.styleForFeature = function (f) {
    var ssScale = this.browser.zoomForCurrentScale();

    if (!this.stylesheet) {
        return null;
    }

    var maybe = null;
    var ss = this.stylesheet.styles;
    for (var si = 0; si < ss.length; ++si) {
        var sh = ss[si];
        if (sh.zoom && sh.zoom != ssScale) {
            continue;
        }

        if (sh.orientation) {
            if (sh.orientation != f.orientation) {
                continue;
            }
        }

        var labelRE = sh._labelRE;
        if (!labelRE || !labelRE.test) {
            labelRE = new RegExp('^' + sh.label + '$');
            sh._labelRE = labelRE;
        }
        if (sh.label && !labelRE.test(f.label)) {
            continue;
        }
        var methodRE = sh._methodRE;
        if (!methodRE || !methodRE.test) {
            methodRE = new RegExp('^' + sh.method + '$');
            sh._methodRE = methodRE;
        }
        if (sh.method && !methodRE.test(f.method)) {
            continue;
        }
        if (sh.type) {
            if (sh.type == 'default') {
                if (!maybe) {
                    maybe = sh.style;
                }
                continue;
            } else {
                var typeRE = sh._typeRE;
                if (!typeRE || !typeRE.test) {
                    typeRE = new RegExp('^' + sh.type + '$');
                    sh._typeRE = typeRE;
                }
                if (!typeRE.test(f.type)) continue;
            }
        }
        return sh.style;
    }
    return maybe;
};

DasTier.prototype.quantMin = function (style) {
    if (this.forceMinDynamic) {
        return this.currentFeaturesMinScore || 0;
    } else if (typeof this.forceMin === 'number') {
        return this.forceMin;
    } else {
        var softMin = typeof style.SOFTMIN !== 'undefined' ? style.SOFTMIN : Number.MAX_VALUE;
        return style.MIN || Math.min(softMin, this.currentFeaturesMinScore || 0);
    }
};

DasTier.prototype.quantMax = function (style) {
    if (this.forceMaxDynamic) {
        return this.currentFeaturesMaxScore || 0;
    } else if (typeof this.forceMax === 'number') {
        return this.forceMax;
    } else {
        var softMax = typeof style.SOFTMAX !== 'undefined' ? style.SOFTMAX : Number.MIN_VALUE;
        return style.MAX || Math.max(softMax, this.currentFeaturesMaxScore || 0);
    }
};

if (typeof module !== 'undefined') {
    module.exports = {
        SubTier: SubTier
    };
}

},{"./numformats":29,"./tier":51}],21:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// feature-popup.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var pick = utils.pick;
    var pushnew = utils.pushnew;
    var makeElement = utils.makeElement;
}

var TAGVAL_NOTE_RE = new RegExp('^([A-Za-z_-]+)=(.+)');

Browser.prototype.addFeatureInfoPlugin = function (handler) {
    if (!this.featureInfoPlugins) {
        this.featureInfoPlugins = [];
    }
    this.featureInfoPlugins.push(handler);
};

function FeatureInfo(hit, feature, group) {
    var name = pick(group.type, feature.type);
    var fid = pick(group.label, feature.label, group.id, feature.id);
    if (fid && fid.indexOf('__dazzle') != 0) {
        /* <syn:2018-01-29> */
        // name = name + ': ' + fid;
        name = fid;
        /* </syn:2018-01-29> */
    }

    this.hit = hit;
    this.feature = feature;
    this.group = group;
    this.title = name;
    this.sections = [];
    this.closeListeners = [];
    this._inhibitPopup = false;
}

FeatureInfo.prototype.setTitle = function (t) {
    this.title = t;
};

FeatureInfo.prototype.add = function (label, info) {
    if (typeof info === 'string') {
        info = makeElement('span', info);
    }
    this.sections.push({ label: label, info: info });
};

FeatureInfo.prototype.inhibitPopup = function () {
    this._inhibitPopup = true;
};

FeatureInfo.prototype.addCloseListener = function (f) {
    this.closeListeners.push(f);
};

FeatureInfo.prototype._notifyClose = function () {
    for (var cli = 0; cli < this.closeListeners.length; ++cli) {
        try {
            this.closeListeners[cli]();
        } catch (ex) {
            console.log(ex);
        }
    }
};

Browser.prototype.featurePopup = function (ev, __ignored_feature, hit, tier, opts) {
    if (!opts) {
        opts = {};
    }

    var hi = hit.length;
    var feature = --hi >= 0 ? hit[hi] : {};
    var group = --hi >= 0 ? hit[hi] : {};

    var featureInfo = new FeatureInfo(hit, feature, group);
    featureInfo.tier = tier;
    var fips = this.featureInfoPlugins || [];
    for (var fipi = 0; fipi < fips.length; ++fipi) {
        try {
            fips[fipi](feature, featureInfo);
        } catch (e) {
            console.log(e.stack || e);
        }
    }
    fips = tier.featureInfoPlugins || [];
    for (fipi = 0; fipi < fips.length; ++fipi) {
        try {
            fips[fipi](feature, featureInfo);
        } catch (e) {
            console.log(e.stack || e);
        }
    }

    if (featureInfo._inhibitPopup) {
        // This is effectively an "instant close", so notify any FIPs that care.
        featureInfo._notifyClose();
        return;
    }

    this.removeAllPopups();

    var table = makeElement('table', null, { className: 'table table-striped table-condensed' });
    table.style.width = '100%';
    table.style.margin = '0px';

    var idx = 0;
    if (feature.method && !tier.dasSource.suppressMethod) {
        var row = makeElement('tr', [makeElement('th', 'Method'), makeElement('td', feature.method)]);
        table.appendChild(row);
        ++idx;
    }
    {
        var loc;
        if (group.segment) {
            loc = group;
        } else {
            loc = feature;
        }
        var row = makeElement('tr', [makeElement('th', 'Location'), makeElement('td', loc.segment + ':' + loc.min + '-' + loc.max, {}, { minWidth: '200px' })]);
        table.appendChild(row);
        ++idx;
    }
    if (feature.score !== undefined && feature.score !== null && feature.score != '-' && !feature.suppressScore && !tier.dasSource.suppressScore) {
        var row = makeElement('tr', [makeElement('th', 'Score'), makeElement('td', '' + feature.score)]);
        table.appendChild(row);
        ++idx;
    }
    {
        var links = maybeConcat(group.links, feature.links);
        if (links && links.length > 0) {
            var row = makeElement('tr', [makeElement('th', 'Links'), makeElement('td', links.map(function (l) {
                return makeElement('div', makeElement('a', l.desc, { href: l.uri, target: '_new' }));
            }))]);
            table.appendChild(row);
            ++idx;
        }
    }
    {
        var notes = maybeConcat(group.notes, feature.notes);
        for (var ni = 0; ni < notes.length; ++ni) {
            var k = 'Note';
            var v = notes[ni];
            var m = v.match(TAGVAL_NOTE_RE);
            if (m) {
                k = m[1];
                v = m[2];
            }

            var row = makeElement('tr', [makeElement('th', k), makeElement('td', v)]);
            table.appendChild(row);
            ++idx;
        }
    }

    for (var fisi = 0; fisi < featureInfo.sections.length; ++fisi) {
        var section = featureInfo.sections[fisi];
        table.appendChild(makeElement('tr', [makeElement('th', section.label), makeElement('td', section.info)]));
    }

    this.popit(ev, featureInfo.title || 'Feature', table, {
        width: 450,
        onClose: featureInfo._notifyClose.bind(featureInfo),
        disableDrag: opts.disableDrag
    });
};

function maybeConcat(a, b) {
    var l = [];
    if (a) {
        for (var i = 0; i < a.length; ++i) {
            pushnew(l, a[i]);
        }
    }
    if (b) {
        for (var i = 0; i < b.length; ++i) {
            pushnew(l, b[i]);
        }
    }
    return l;
}

},{"./cbrowser":6,"./utils":55}],22:[function(require,module,exports){
"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var pusho = utils.pusho;
    var pushnewo = utils.pushnewo;
}

function sortFeatures(tier) {
    var dmin = tier.browser.drawnStart,
        dmax = tier.browser.drawnEnd;
    var ungroupedFeatures = {};
    var groupedFeatures = {};
    var drawnGroupedFeatures = {};
    var groupMins = {},
        groupMaxes = {};
    var groups = {};
    var superGroups = {};
    var groupsToSupers = {};
    var nonPositional = [];
    var minScore, maxScore;
    var fbid;

    var init_fbid = function init_fbid() {
        fbid = {};
        for (var fi = 0; fi < tier.currentFeatures.length; ++fi) {
            var f = tier.currentFeatures[fi];
            if (f.id) {
                fbid[f.id] = f;
            }
        }
    };

    var superParentsOf = function superParentsOf(f) {
        // FIXME: should recur.
        var spids = [];
        if (f.parents) {
            for (var pi = 0; pi < f.parents.length; ++pi) {
                var pid = f.parents[pi];
                var p = fbid[pid];
                if (!p) {
                    continue;
                }
                // alert(p.type + ':' + p.typeCv);
                if (p.typeCv == 'SO:0000704') {
                    pushnew(spids, pid);
                }
            }
        }
        return spids;
    };

    for (var fi = 0; fi < tier.currentFeatures.length; ++fi) {
        var f = tier.currentFeatures[fi];
        if (f.parts) {
            continue;
        }

        var drawn = f.min <= dmax && f.max >= dmin;

        if (!f.min || !f.max) {
            nonPositional.push(f);
            continue;
        }

        if (f.score && f.score != '.' && f.score != '-') {
            var sc = 1.0 * f.score;
            if (!minScore || sc < minScore) {
                minScore = sc;
            }
            if (!maxScore || sc > maxScore) {
                maxScore = sc;
            }
        }

        var fGroups = [];
        var fSuperGroup = null;
        if (f.groups) {
            for (var gi = 0; gi < f.groups.length; ++gi) {
                var g = f.groups[gi];
                var gid = g.id;
                if (g.type == 'gene') {
                    // Like a super-grouper...
                    fSuperGroup = gid;
                    groups[gid] = g;
                } else if (g.type == 'translation') {
                    // have to ignore this to get sensible results from bj-e :-(.
                } else {
                    pusho(groupedFeatures, gid, f);
                    groups[gid] = g;
                    fGroups.push(gid);

                    var ogm = groupMins[gid];
                    if (!ogm || f.min < ogm) groupMins[gid] = f.min;

                    ogm = groupMaxes[gid];
                    if (!ogm || f.max > ogm) groupMaxes[gid] = f.max;
                }
            }
        }

        if (f.parents) {
            if (!fbid) {
                init_fbid();
            }
            for (var pi = 0; pi < f.parents.length; ++pi) {
                var pid = f.parents[pi];
                var p = fbid[pid];
                if (!p) {
                    // alert("couldn't find " + pid);
                    continue;
                }
                if (!p.parts) {
                    p.parts = [f];
                }
                pushnewo(groupedFeatures, pid, p);
                pusho(groupedFeatures, pid, f);

                if (!groups[pid]) {
                    groups[pid] = {
                        type: p.type,
                        id: p.id,
                        label: p.label || p.id
                    };
                }
                fGroups.push(pid);

                var ogm = groupMins[pid];
                if (!ogm || f.min < ogm) groupMins[pid] = f.min;

                ogm = groupMaxes[pid];
                if (!ogm || f.max > ogm) groupMaxes[pid] = f.max;

                var sgs = superParentsOf(p);
                if (sgs.length > 0) {
                    fSuperGroup = sgs[0];
                    var sp = fbid[sgs[0]];
                    groups[sgs[0]] = {
                        type: sp.type,
                        id: sp.id,
                        label: sp.label || sp.id
                    };
                    if (!tier.dasSource.collapseSuperGroups) {
                        tier.dasSource.collapseSuperGroups = true;
                    }
                }
            }
        }

        if (fGroups.length == 0) {
            if (drawn) pusho(ungroupedFeatures, f.type, f);
        } else if (fSuperGroup) {
            for (var g = 0; g < fGroups.length; ++g) {
                var gid = fGroups[g];
                pushnewo(superGroups, fSuperGroup, gid);
                groupsToSupers[gid] = fSuperGroup;
            }
        }
    }

    for (var gid in groupedFeatures) {
        var group = groups[gid];
        if (typeof group.min !== 'number') group.min = groupMins[gid];
        if (typeof group.max !== 'number') group.max = groupMaxes[gid];

        if (groupMaxes[gid] >= dmin && groupMins[gid] <= dmax) drawnGroupedFeatures[gid] = groupedFeatures[gid];
    }

    tier.ungroupedFeatures = ungroupedFeatures;
    tier.groupedFeatures = drawnGroupedFeatures;
    tier.groups = groups;
    tier.superGroups = superGroups;
    tier.groupsToSupers = groupsToSupers;

    if (minScore) {
        if (minScore > 0) {
            minScore = 0;
        } else if (maxScore < 0) {
            maxScore = 0;
        }
        tier.currentFeaturesMinScore = minScore;
        tier.currentFeaturesMaxScore = maxScore;
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        sortFeatures: sortFeatures
    };
}

},{"./utils":55}],23:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// glyphs.js: components which know how to draw themselves
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var union = spans.union;
    var Range = spans.Range;

    var utils = require('./utils');
    var makeElementNS = utils.makeElementNS;
    var AMINO_ACID_TRANSLATION = utils.AMINO_ACID_TRANSLATION;

    var svgu = require('./svg-utils');
    var NS_SVG = svgu.NS_SVG;
    var NS_XLINK = svgu.NS_XLINK;
    var SVGPath = svgu.SVGPath;
}

function PathGlyphBase(stroke, fill) {
    this._stroke = stroke;
    this._fill = fill;
}

PathGlyphBase.prototype.draw = function (g) {
    g.beginPath();
    this.drawPath(g);

    if (this._fill) {
        g.fillStyle = this._fill;
        g.fill();
    }
    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.stroke();
    }
};

PathGlyphBase.prototype.toSVG = function () {
    var g = new SVGPath();
    this.drawPath(g);

    return makeElementNS(NS_SVG, 'path', null, { d: g.toPathData(),
        fill: this._fill || 'none',
        stroke: this._stroke || 'none' });
};

PathGlyphBase.prototype.drawPath = function (g) {
    throw 'drawPath method on PathGlyphBase must be overridden';
};

function BoxGlyph(x, y, width, height, fill, stroke, alpha, radius) {
    this.x = x;
    this.y = y;
    this._width = width;
    this._height = height;
    this.fill = fill;
    this.stroke = stroke;
    this._alpha = alpha;
    this._radius = radius || 0;
}

BoxGlyph.prototype.draw = function (g) {
    var r = this._radius;

    if (r > 0) {
        g.beginPath();
        g.moveTo(this.x + r, this.y);
        g.lineTo(this.x + this._width - r, this.y);
        g.arcTo(this.x + this._width, this.y, this.x + this._width, this.y + r, r);
        g.lineTo(this.x + this._width, this.y + this._height - r);
        g.arcTo(this.x + this._width, this.y + this._height, this.x + this._width - r, this.y + this._height, r);
        g.lineTo(this.x + r, this.y + this._height);
        g.arcTo(this.x, this.y + this._height, this.x, this.y + this._height - r, r);
        g.lineTo(this.x, this.y + r);
        g.arcTo(this.x, this.y, this.x + r, this.y, r);
        g.closePath();

        if (this._alpha != null) {
            g.save();
            g.globalAlpha = this._alpha;
        }

        if (this.fill) {
            g.fillStyle = this.fill;
            g.fill();
        }
        if (this.stroke) {
            g.strokeStyle = this.stroke;
            g.lineWidth = 0.5;
            g.stroke();
        }

        if (this._alpha != null) {
            g.restore();
        }
    } else {
        if (this._alpha != null) {
            g.save();
            g.globalAlpha = this._alpha;
        }

        if (this.fill) {
            g.fillStyle = this.fill;
            g.fillRect(this.x, this.y, this._width, this._height);
        }

        if (this.stroke) {
            g.strokeStyle = this.stroke;
            g.lineWidth = 0.5;
            g.strokeRect(this.x, this.y, this._width, this._height);
        }

        if (this._alpha != null) {
            g.restore();
        }
    }
};

BoxGlyph.prototype.toSVG = function () {
    var s = makeElementNS(NS_SVG, 'rect', null, { x: this.x,
        y: this.y,
        width: this._width,
        height: this._height,
        stroke: this.stroke || 'none',
        strokeWidth: 0.5,
        fill: this.fill || 'none' });
    if (this._alpha != null) {
        s.setAttribute('opacity', this._alpha);
    }

    return s;
};

BoxGlyph.prototype.min = function () {
    return this.x;
};

BoxGlyph.prototype.max = function () {
    return this.x + this._width;
};

BoxGlyph.prototype.height = function () {
    return this.y + this._height;
};

function GroupGlyph(glyphs, connector) {
    this.glyphs = glyphs;
    this.connector = connector;
    this.h = glyphs[0].height();

    var covList = [];
    for (var g = 0; g < glyphs.length; ++g) {
        var gg = glyphs[g];
        covList.push(new Range(gg.min(), gg.max()));
        this.h = Math.max(this.h, gg.height());
    }
    this.coverage = union(covList);
}

GroupGlyph.prototype.drawConnectors = function (g) {
    var ranges = this.coverage.ranges();
    for (var r = 1; r < ranges.length; ++r) {
        var gl = ranges[r];
        var last = ranges[r - 1];
        if (last && gl.min() > last.max()) {
            var start = last.max();
            var end = gl.min();
            var mid = (start + end) / 2;

            if (this.connector === 'hat+') {
                g.moveTo(start, this.h / 2);
                g.lineTo(mid, 0);
                g.lineTo(end, this.h / 2);
            } else if (this.connector === 'hat-') {
                g.moveTo(start, this.h / 2);
                g.lineTo(mid, this.h);
                g.lineTo(end, this.h / 2);
            } else if (this.connector === 'collapsed+') {
                g.moveTo(start, this.h / 2);
                g.lineTo(end, this.h / 2);
                if (end - start > 4) {
                    g.moveTo(mid - 2, this.h / 2 - 3);
                    g.lineTo(mid + 2, this.h / 2);
                    g.lineTo(mid - 2, this.h / 2 + 3);
                }
            } else if (this.connector === 'collapsed-') {
                g.moveTo(start, this.h / 2);
                g.lineTo(end, this.h / 2);
                if (end - start > 4) {
                    g.moveTo(mid + 2, this.h / 2 - 3);
                    g.lineTo(mid - 2, this.h / 2);
                    g.lineTo(mid + 2, this.h / 2 + 3);
                }
            } else {
                g.moveTo(start, this.h / 2);
                g.lineTo(end, this.h / 2);
            }
        }
        last = gl;
    }
};

GroupGlyph.prototype.draw = function (g, oc) {
    for (var i = 0; i < this.glyphs.length; ++i) {
        var gl = this.glyphs[i];
        gl.draw(g, oc);
    }

    g.strokeStyle = 'black';
    g.beginPath();
    this.drawConnectors(g);
    g.stroke();
};

GroupGlyph.prototype.toSVG = function () {
    var g = makeElementNS(NS_SVG, 'g');
    for (var i = 0; i < this.glyphs.length; ++i) {
        g.appendChild(this.glyphs[i].toSVG());
    }

    var p = new SVGPath();
    this.drawConnectors(p);

    var pathData = p.toPathData();
    if (pathData.length > 0) {
        var path = makeElementNS(NS_SVG, 'path', null, { d: p.toPathData(),
            fill: 'none',
            stroke: 'black',
            strokeWidth: 0.5 });
        g.appendChild(path);
    }

    return g;
};

GroupGlyph.prototype.min = function () {
    return this.coverage.min();
};

GroupGlyph.prototype.max = function () {
    return this.coverage.max();
};

GroupGlyph.prototype.height = function () {
    return this.h;
};

function LineGraphGlyph(points, color, height) {
    this.points = points;
    this.color = color;
    this._height = height || 50;
}

LineGraphGlyph.prototype.min = function () {
    return this.points[0].x;
    // return this.points[0];
};

LineGraphGlyph.prototype.max = function () {
    return this.points[this.points.length - 1].x;
    // return this.points[this.points.length - 2];
};

LineGraphGlyph.prototype.height = function () {
    return this._height;
};

LineGraphGlyph.prototype.draw = function (g) {
    g.save();
    g.strokeStyle = this.color;
    g.lineWidth = 2;
    g.beginPath();
    this.points.forEach(function (p, i) {
        if (i === 0) g.moveTo(p.x, p.y);else g.lineTo(p.x, p.y);
    });
    g.stroke();
    g.restore();
};

LineGraphGlyph.prototype.toSVG = function () {
    var p = new SVGPath();
    for (var i = 0; i < this.points.length; ++i) {
        var x = this.points[i].x;
        var y = this.points[i].y;
        if (i == 0) {
            p.moveTo(x, y);
        } else {
            p.lineTo(x, y);
        }
    }

    return makeElementNS(NS_SVG, 'path', null, { d: p.toPathData(),
        fill: 'none',
        stroke: this.color,
        strokeWidth: '2px' });
};

function LabelledGlyph(GLOBAL_GC, glyph, text, unmeasured, anchor, align, font) {
    this.glyph = glyph;
    this.text = text;
    this.anchor = anchor || 'left';
    this.align = align || 'below';
    if (font) {
        this.font = font;
    }
    if (this.font) {
        GLOBAL_GC.save();
        GLOBAL_GC.font = this.font;
    }
    var metrics = GLOBAL_GC.measureText(text);
    if (this.font) {
        GLOBAL_GC.restore();
    }
    this.textLen = metrics.width;
    this.textHeight = 5;
    this.bump = glyph.bump;
    this.measured = !unmeasured;
}

LabelledGlyph.prototype.toSVG = function () {
    var child = this.glyph.toSVG();
    var opts = {};

    if (this.align == 'above') {
        child = makeElementNS(NS_SVG, 'g', child, { transform: "translate(0, " + (this.textHeight | 0 + 2) + ")" });
        opts.y = this.textHeight;
    } else {
        opts.y = this.glyph.height() + 15;
    }

    if (this.font) {
        opts.fontSize = 7;
    }

    if ('center' == this.anchor) {
        opts.x = (this.glyph.min() + this.glyph.max() - this.textLen) / 2;
    } else {
        opts.x = this.glyph.min();
    }

    return makeElementNS(NS_SVG, 'g', [child, makeElementNS(NS_SVG, 'text', this.text, opts)]);
};

LabelledGlyph.prototype.min = function () {
    return this.glyph.min();
};

LabelledGlyph.prototype.max = function () {
    if (this.measured) return Math.max(this.glyph.max(), 1.0 * this.glyph.min() + this.textLen + 10);else return this.glyph.max();
};

LabelledGlyph.prototype.height = function () {
    var h = this.glyph.height();
    if (this.measured) {
        if (this.align == 'above') {
            h += this.textHeight + 2;
        } else {
            h += 20;
        }
    }
    return h;
};

LabelledGlyph.prototype.draw = function (g, oc) {
    if (this.align == 'above') {
        g.save();
        g.translate(0, this.textHeight + 2);
    }
    this.glyph.draw(g);
    if (this.align == 'above') {
        g.restore();
    }

    oc.registerGlyph(this);
};

LabelledGlyph.prototype.drawOverlay = function (g, minVisible, maxVisible) {
    g.fillStyle = 'black';
    if (this.font) {
        g.save();
        g.font = this.font;
    }
    var p;
    if ('center' == this.anchor) {
        p = (this.glyph.min() + this.glyph.max() - this.textLen) / 2;
    } else {
        p = this.glyph.min();
        if (p < minVisible) {
            p = Math.min(minVisible, this.glyph.max() - this.textLen);
        }
    }
    g.fillText(this.text, p, this.align == 'above' ? this.textHeight : this.glyph.height() + 15);
    if (this.font) {
        g.restore();
    }
};

function CrossGlyph(x, height, stroke) {
    this._x = x;
    this._height = height;
    this._stroke = stroke;
}

CrossGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;

    g.beginPath();
    g.moveTo(this._x, 0);
    g.lineTo(this._x, this._height);
    g.moveTo(this._x - hh, hh);
    g.lineTo(this._x + hh, hh);

    g.strokeStyle = this._stroke;
    g.lineWidth = 1;

    g.stroke();
};

CrossGlyph.prototype.toSVG = function () {
    var hh = this._height / 2;

    var g = new SVGPath();
    g.moveTo(this._x, 0);
    g.lineTo(this._x, this._height);
    g.moveTo(this._x - hh, hh);
    g.lineTo(this._x + hh, hh);

    return makeElementNS(NS_SVG, 'path', null, { d: g.toPathData(),
        fill: 'none',
        stroke: this._stroke,
        strokeWidth: '1px' });
};

CrossGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

CrossGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

CrossGlyph.prototype.height = function () {
    return this._height;
};

function ExGlyph(x, height, stroke) {
    this._x = x;
    this._height = height;
    this._stroke = stroke;
}

ExGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;

    g.beginPath();
    g.moveTo(this._x - hh, 0);
    g.lineTo(this._x + hh, this._height);
    g.moveTo(this._x - hh, this._height);
    g.lineTo(this._x + hh, 0);

    g.strokeStyle = this._stroke;
    g.lineWidth = 1;

    g.stroke();
};

ExGlyph.prototype.toSVG = function () {
    var hh = this._height / 2;

    var g = new SVGPath();
    g.moveTo(this._x - hh, 0);
    g.lineTo(this._x + hh, this._height);
    g.moveTo(this._x - hh, this._height);
    g.lineTo(this._x + hh, 0);

    return makeElementNS(NS_SVG, 'path', null, { d: g.toPathData(),
        fill: 'none',
        stroke: this._stroke,
        strokeWidth: '1px' });
};

ExGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

ExGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

ExGlyph.prototype.height = function () {
    return this._height;
};

function TriangleGlyph(x, height, dir, width, fill, stroke) {
    PathGlyphBase.call(this, stroke, fill);

    this._x = x;
    this._height = height;
    this._dir = dir;
    this._width = width;
}

TriangleGlyph.prototype = Object.create(PathGlyphBase.prototype);

TriangleGlyph.prototype.drawPath = function (g) {
    var hh = this._height / 2;
    var hw = this._width / 2;

    if (this._dir === 'S') {
        g.moveTo(this._x, this._height);
        g.lineTo(this._x - hw, 0);
        g.lineTo(this._x + hw, 0);
    } else if (this._dir === 'W') {
        g.moveTo(this._x + hw, hh);
        g.lineTo(this._x - hw, 0);
        g.lineTo(this._x - hw, this._height);
    } else if (this._dir === 'E') {
        g.moveTo(this._x - hw, hh);
        g.lineTo(this._x + hw, 0);
        g.lineTo(this._x + hw, this._height);
    } else {
        g.moveTo(this._x, 0);
        g.lineTo(this._x + hw, this._height);
        g.lineTo(this._x - hw, this._height);
    }

    g.closePath();
};

TriangleGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

TriangleGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

TriangleGlyph.prototype.height = function () {
    return this._height;
};

function DotGlyph(x, height, fill, stroke) {
    this._x = x;
    this._height = height;
    this._fill = fill;
    this._stroke = stroke;
}

DotGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;
    g.fillStyle = this._stroke;
    g.beginPath();
    g.arc(this._x, hh, hh, 0, 6.29);

    if (this._fill) {
        g.fillStyle = this._fill;
        g.fill();
    }

    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.stroke();
    }
};

DotGlyph.prototype.toSVG = function () {
    var hh = this._height / 2;
    return makeElementNS(NS_SVG, 'circle', null, { cx: this._x, cy: hh, r: hh,
        fill: this._fill || 'none',
        stroke: this._stroke || 'none',
        strokeWidth: '1px' });
};

DotGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

DotGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

DotGlyph.prototype.height = function () {
    return this._height;
};

function PaddedGlyph(glyph, minp, maxp) {
    this.glyph = glyph;
    this._min = minp;
    this._max = maxp;
    if (glyph) {
        this.bump = glyph.bump;
    }
}

PaddedGlyph.prototype.draw = function (g, oc) {
    if (this.glyph) this.glyph.draw(g, oc);
};

PaddedGlyph.prototype.toSVG = function () {
    if (this.glyph) {
        return this.glyph.toSVG();
    } else {
        return makeElementNS(NS_SVG, 'g');
    }
};

PaddedGlyph.prototype.min = function () {
    return this._min;
};

PaddedGlyph.prototype.max = function () {
    return this._max;
};

PaddedGlyph.prototype.height = function () {
    if (this.glyph) {
        return this.glyph.height();
    } else {
        return 1;
    }
};

function AArrowGlyph(min, max, height, fill, stroke, ori) {
    PathGlyphBase.call(this, stroke, fill);
    this._min = min;
    this._max = max;
    this._height = height;
    this._ori = ori;
}

AArrowGlyph.prototype = Object.create(PathGlyphBase.prototype);

AArrowGlyph.prototype.min = function () {
    return this._min;
};

AArrowGlyph.prototype.max = function () {
    return this._max;
};

AArrowGlyph.prototype.height = function () {
    return this._height;
};

AArrowGlyph.prototype.drawPath = function (g) {
    var maxPos = this._max;
    var minPos = this._min;
    var height = this._height;
    var lInset = 0;
    var rInset = 0;
    var minLength = this._height + 2;
    var instep = 0.333333 * this._height;
    var y = 0;

    if (this._ori) {
        if (this._ori === '+') {
            rInset = 0.5 * this._height;
        } else if (this._ori === '-') {
            lInset = 0.5 * this._height;
        }
    }

    if (maxPos - minPos < minLength) {
        minPos = (maxPos + minPos - minLength) / 2;
        maxPos = minPos + minLength;
    }

    g.moveTo(minPos + lInset, y + instep);
    g.lineTo(maxPos - rInset, y + instep);
    g.lineTo(maxPos - rInset, y);
    g.lineTo(maxPos, y + this._height / 2);
    g.lineTo(maxPos - rInset, y + height);
    g.lineTo(maxPos - rInset, y + instep + instep);
    g.lineTo(minPos + lInset, y + instep + instep);
    g.lineTo(minPos + lInset, y + height);
    g.lineTo(minPos, y + height / 2);
    g.lineTo(minPos + lInset, y);
    g.lineTo(minPos + lInset, y + instep);
};

function SpanGlyph(min, max, height, stroke) {
    PathGlyphBase.call(this, stroke, null);
    this._min = min;
    this._max = max;
    this._height = height;
}

SpanGlyph.prototype = Object.create(PathGlyphBase.prototype);

SpanGlyph.prototype.min = function () {
    return this._min;
};
SpanGlyph.prototype.max = function () {
    return this._max;
};
SpanGlyph.prototype.height = function () {
    return this._height;
};

SpanGlyph.prototype.drawPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;
    g.moveTo(minPos, hh);
    g.lineTo(maxPos, hh);
    g.moveTo(minPos, 0);
    g.lineTo(minPos, height);
    g.moveTo(maxPos, 0);
    g.lineTo(maxPos, height);
};

function LineGlyph(min, max, height, style, strand, stroke) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._style = style;
    this._strand = strand;
    this._stroke = stroke;
}

LineGlyph.prototype.min = function () {
    return this._min;
};
LineGlyph.prototype.max = function () {
    return this._max;
};
LineGlyph.prototype.height = function () {
    return this._height;
};

LineGlyph.prototype.drawPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;

    if (this._style === 'hat') {
        g.moveTo(minPos, hh);
        g.lineTo((minPos + maxPos) / 2, this._strand === '-' ? height : 0);
        g.lineTo(maxPos, hh);
    } else {
        g.moveTo(minPos, hh);
        g.lineTo(maxPos, hh);
    }
};

LineGlyph.prototype.draw = function (g) {
    g.beginPath();
    this.drawPath(g);
    g.strokeStyle = this._stroke;
    if (this._style === 'dashed' && g.setLineDash) {
        g.save();
        g.setLineDash([3]);
        g.stroke();
        g.restore();
    } else {
        g.stroke();
    }
};

LineGlyph.prototype.toSVG = function () {
    var g = new SVGPath();
    this.drawPath(g);

    var opts = { d: g.toPathData(),
        stroke: this._stroke || 'none' };
    if (this._style === 'dashed') {
        opts['strokeDasharray'] = '3';
    }

    return makeElementNS(NS_SVG, 'path', null, opts);
};

function PrimersGlyph(min, max, height, fill, stroke) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._stroke = stroke;
}

PrimersGlyph.prototype.min = function () {
    return this._min;
};
PrimersGlyph.prototype.max = function () {
    return this._max;
};
PrimersGlyph.prototype.height = function () {
    return this._height;
};

PrimersGlyph.prototype.drawStemPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;
    g.moveTo(minPos, hh);
    g.lineTo(maxPos, hh);
};

PrimersGlyph.prototype.drawTrigsPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;
    g.moveTo(minPos, 0);
    g.lineTo(minPos + height, hh);
    g.lineTo(minPos, height);
    g.lineTo(minPos, 0);
    g.moveTo(maxPos, 0);
    g.lineTo(maxPos - height, hh);
    g.lineTo(maxPos, height);
    g.lineTo(maxPos, 0);
};

PrimersGlyph.prototype.draw = function (g) {
    g.beginPath();
    this.drawStemPath(g);
    g.strokeStyle = this._stroke;
    g.stroke();
    g.beginPath();
    this.drawTrigsPath(g);
    g.fillStyle = this._fill;
    g.fill();
};

PrimersGlyph.prototype.toSVG = function () {
    var s = new SVGPath();
    this.drawStemPath(s);
    var t = new SVGPath();
    this.drawTrigsPath(t);

    return makeElementNS(NS_SVG, 'g', [makeElementNS(NS_SVG, 'path', null, { d: s.toPathData(),
        stroke: this._stroke || 'none' }), makeElementNS(NS_SVG, 'path', null, { d: t.toPathData(),
        fill: this._fill || 'none' })]);
};

function ArrowGlyph(min, max, height, color, parallel, sw, ne) {
    PathGlyphBase.call(this, null, color);
    this._min = min;
    this._max = max;
    this._height = height;
    this._color = color;
    this._parallel = parallel;
    this._sw = sw;
    this._ne = ne;
}

ArrowGlyph.prototype = Object.create(PathGlyphBase.prototype);

ArrowGlyph.prototype.min = function () {
    return this._min;
};
ArrowGlyph.prototype.max = function () {
    return this._max;
};
ArrowGlyph.prototype.height = function () {
    return this._height;
};

ArrowGlyph.prototype.drawPath = function (g) {
    var min = this._min,
        max = this._max,
        height = this._height;

    if (this._parallel) {
        var hh = height / 2;
        var instep = 0.4 * height;
        if (this._sw) {
            g.moveTo(min + hh, height - instep);
            g.lineTo(min + hh, height);
            g.lineTo(min, hh);
            g.lineTo(min + hh, 0);
            g.lineTo(min + hh, instep);
        } else {
            g.moveTo(min, height - instep);
            g.lineTo(min, instep);
        }
        if (this._ne) {
            g.lineTo(max - hh, instep);
            g.lineTo(max - hh, 0);
            g.lineTo(max, hh);
            g.lineTo(max - hh, height);
            g.lineTo(max - hh, height - instep);
        } else {
            g.lineTo(max, instep);
            g.lineTo(max, height - instep);
        }
        g.closePath();
    } else {
        var mid = (min + max) / 2;
        var instep = 0.4 * (max - min);
        var th = height / 3;

        if (this._ne) {
            g.moveTo(min + instep, th);
            g.lineTo(min, th);
            g.lineTo(mid, 0);
            g.lineTo(max, th);
            g.lineTo(max - instep, th);
        } else {
            g.moveTo(min + instep, 0);
            g.lineTo(max - instep, 0);
        }
        if (this._sw) {
            g.lineTo(max - instep, height - th);
            g.lineTo(max, height - th);
            g.lineTo(mid, height);
            g.lineTo(min, height - th);
            g.lineTo(min + instep, height - th);
        } else {
            g.lineTo(max - instep, height);
            g.lineTo(min + instep, height);
        }
        g.closePath();
    }
};

function TooManyGlyph(min, max, height, fill, stroke) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._stroke = stroke;
}

TooManyGlyph.prototype.min = function () {
    return this._min;
};
TooManyGlyph.prototype.max = function () {
    return this._max;
};
TooManyGlyph.prototype.height = function () {
    return this._height;
};

TooManyGlyph.prototype.toSVG = function () {
    return makeElementNS(NS_SVG, 'rect', null, { x: this._min,
        y: 0,
        width: this._max - this._min,
        height: this._height,
        stroke: this._stroke || 'none',
        fill: this._fill || 'none' });
};

TooManyGlyph.prototype.draw = function (g) {
    if (this._fill) {
        g.fillStyle = this._fill;
        g.fillRect(this._min, 0, this._max - this._min, this._height);
    }
    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.strokeRect(this._min, 0, this._max - this._min, this._height);
        g.beginPath();
        for (var n = 2; n < this._height; n += 3) {
            g.moveTo(this._min, n);
            g.lineTo(this._max, n);
        }
        g.stroke();
    }
};

function TextGlyph(GLOBAL_GC, min, max, height, fill, string) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._string = string;
    this._textLen = GLOBAL_GC.measureText(string).width;
}

TextGlyph.prototype.min = function () {
    return this._min;
};
TextGlyph.prototype.max = function () {
    return Math.max(this._max, this._min + this._textLen);
};
TextGlyph.prototype.height = function () {
    return this._height;
};

TextGlyph.prototype.draw = function (g) {
    g.fillStyle = this._fill;
    g.fillText(this._string, this._min, this._height - 4);
};

TextGlyph.prototype.toSVG = function () {
    return makeElementNS(NS_SVG, 'text', this._string, { x: this._min, y: this._height - 4 });
};

function aminoTileColor(aa, start, color) {
    var ALTERNATE_COLOR = {
        'red': 'darkred',
        'purple': 'mediumpurple',
        'blue': 'darkblue',
        'green': 'darkgreen'
    };
    var color2 = ALTERNATE_COLOR[color.toLowerCase()];
    var tileColors;
    if (!color2) tileColors = ['rgb(73, 68, 149)', 'rgb(9, 0, 103)'];
    // default to UCSC colors
    else tileColors = [color, color2];

    if (aa == '?') return 'black';else if (aa == 'M') return 'greenyellow';else if (aa == '*') return 'crimson';else return tileColors[start % 2];
}

function reverseComplement(sequence) {
    var seq_dict = { 'A': 'T', 'T': 'A', 'G': 'C', 'C': 'G' };
    var rev_seq = sequence.split('').reverse().join('');
    var rev_compl_seq = [];
    for (var b = 0; b < rev_seq.length; ++b) {
        var base = rev_seq.substr(b, 1).toUpperCase();
        rev_compl_seq.push(base in seq_dict ? seq_dict[base] : 'N');
    }
    return rev_compl_seq.join('');
}

function AminoAcidGlyph(min, max, height, fill, seq, orientation, readframe) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._seq = seq;
    this._orientation = orientation;
    this._readframe = readframe;
}

AminoAcidGlyph.prototype.min = function () {
    return this._min;
};
AminoAcidGlyph.prototype.max = function () {
    return this._max;
};
AminoAcidGlyph.prototype.height = function () {
    return this._height;
};

AminoAcidGlyph.prototype.draw = function (gc) {
    var seq = this._seq;
    var color = this._fill;

    if (!seq) return;

    var scale = (this._max - this._min + 1) / seq.length;

    var prevOverhang = (3 - this._readframe) % 3;
    var nextOverhang = (seq.length - prevOverhang) % 3;
    var leftOverhang = this._orientation == '+' ? prevOverhang : nextOverhang;

    if (leftOverhang > 0) {
        gc.fillStyle = color;
        gc.fillRect(this._min, 0, scale * leftOverhang, this._height);
    }

    for (var p = leftOverhang; p < seq.length; p += 3) {
        var codon = seq.substr(p, 3).toUpperCase();
        if (this._orientation == '-') codon = reverseComplement(codon);
        var aa = codon in AMINO_ACID_TRANSLATION ? AMINO_ACID_TRANSLATION[codon] : '?';
        color = codon.length == 3 ? aminoTileColor(aa, p, this._fill) : this._fill;
        gc.fillStyle = color;
        gc.fillRect(this._min + p * scale, 0, scale * codon.length, this._height);

        if (scale >= 8 && codon.length == 3) {
            gc.fillStyle = 'white';
            gc.fillText(aa, this._min + (p + 1) * scale, this._height);
        }
    }
};

AminoAcidGlyph.prototype.toSVG = function () {
    var g = makeElementNS(NS_SVG, 'g');
    var seq = this._seq;
    var color = this._fill;

    if (!seq) return g;

    var scale = (this._max - this._min + 1) / seq.length;

    var prevOverhang = (3 - this._readframe) % 3;
    var nextOverhang = (seq.length - prevOverhang) % 3;
    var leftOverhang = this._orientation == '+' ? prevOverhang : nextOverhang;

    if (leftOverhang > 0) {
        g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
            x: this._min,
            y: 0,
            width: scale * leftOverhang,
            height: this._height,
            fill: color }));
    }
    for (var p = leftOverhang; p < seq.length; p += 3) {
        var codon = seq.substr(p, 3).toUpperCase();
        if (this._orientation == '-') codon = reverseComplement(codon);
        var aa = codon in AMINO_ACID_TRANSLATION ? AMINO_ACID_TRANSLATION[codon] : '?';
        color = codon.length == 3 ? aminoTileColor(aa, p, this._fill) : this._fill;
        g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
            x: this._min + p * scale,
            y: 0,
            width: scale * codon.length,
            height: this._height,
            fill: color }));

        if (scale >= 8 && codon.length == 3) {
            g.appendChild(makeElementNS(NS_SVG, 'text', aa, {
                x: this._min + (p + 1) * scale,
                y: this._height,
                fill: 'white' }));
        }
    }
    return g;
};

var isRetina = typeof window !== 'undefined' && window.devicePixelRatio > 1;
var __dalliance_SequenceGlyphCache = {};
var altPattern = new RegExp('^[ACGT-]$');
var isCloseUp = function isCloseUp(scale) {
    return scale >= 8;
};

function SequenceGlyph(baseColors, strandColor, min, max, height, seq, ref, scheme, quals, fillbg, scaleVertical) {
    this.baseColors = baseColors;
    this._strandColor = strandColor;
    this._min = min;
    this._max = max;
    this._height = height;
    this._seq = seq;
    this._ref = ref;
    this._scheme = scheme;
    this._quals = quals;
    this._fillbg = fillbg;
    this._scaleVertical = scaleVertical;
}

SequenceGlyph.prototype.min = function () {
    return this._min;
};
SequenceGlyph.prototype.max = function () {
    return this._max;
};
SequenceGlyph.prototype.height = function () {
    return this._height;
};

SequenceGlyph.prototype.alphaForQual = function (qual) {
    return 0.1 + 0.9 * Math.max(0.0, Math.min(1.0 * qual / 30.0, 1.0));
};

SequenceGlyph.prototype.draw = function (gc) {
    var seq = this._seq;
    var ref = this._ref;
    var mismatch = this._scheme === 'mismatch' || this._scheme === 'mismatch-all';
    var all = this._scheme === 'mismatch-all';

    var seqLength = seq ? seq.length : this._max - this._min + 1;
    var scale = (this._max - this._min + 1) / seqLength;

    if (mismatch && !isCloseUp(scale)) {
        gc.fillStyle = this._strandColor;
        if (this._scaleVertical) gc.fillRect(this._min, scale, this._max - this._min, scale);else gc.fillRect(this._min, this._height / 4, this._max - this._min, this._height / 2);
    }

    for (var p = 0; p < seqLength; ++p) {
        var base = seq ? seq.substr(p, 1).toUpperCase() : 'N';

        if (!altPattern.test(base) && !isCloseUp(scale)) continue;

        var color = this.baseColors[base];

        if (this._quals) {
            var qc = this._quals.charCodeAt(p) - 33;
            var oldAlpha = gc.globalAlpha; // NB hoisted!
            gc.globalAlpha = this.alphaForQual(qc);
        }

        if (!color) {
            var refBase = ref ? ref.substr(p, 1).toUpperCase() : 'N';
            if (base == 'N' || refBase == 'N') color = 'gray';else color = this._strandColor;

            if (all) base = refBase;
        }

        gc.fillStyle = color;

        var alt = altPattern.test(base);
        if (this._fillbg || !isCloseUp(scale) || !alt) {
            if (this._scaleVertical) gc.fillRect(this._min + p * scale, scale, scale, scale);else gc.fillRect(this._min + p * scale, 0, scale, this._height);
        }
        if (isCloseUp(scale) && alt) {
            var key = color + '_' + base;
            var img = __dalliance_SequenceGlyphCache[key];
            if (!img) {
                img = document.createElement('canvas');
                if (isRetina) {
                    img.width = 16;
                    img.height = 20;
                } else {
                    img.width = 8;
                    img.height = 10;
                }
                var imgGc = img.getContext('2d');
                if (isRetina) {
                    imgGc.scale(2, 2);
                }
                imgGc.fillStyle = this._fillbg ? 'black' : color;
                var w = imgGc.measureText(base).width;
                imgGc.fillText(base, 0.5 * (8.0 - w), 8);
                __dalliance_SequenceGlyphCache[key] = img;
            }
            var dy = this._scaleVertical ? scale : 0;
            if (isRetina) gc.drawImage(img, this._min + p * scale + 0.5 * (scale - 8), dy, 8, 10);else gc.drawImage(img, this._min + p * scale + 0.5 * (scale - 8), dy);
        }

        if (this._quals) {
            gc.globalAlpha = oldAlpha;
        }
    }
};

SequenceGlyph.prototype.toSVG = function () {
    var seq = this._seq;
    var ref = this._ref;
    var mismatch = this._scheme === 'mismatch' || this._scheme === 'mismatch-all';
    var all = this._scheme === 'mismatch-all';
    var scale = (this._max - this._min + 1) / this._seq.length;
    var g = makeElementNS(NS_SVG, 'g');

    for (var p = 0; p < seq.length; ++p) {
        var base = seq ? seq.substr(p, 1).toUpperCase() : 'N';
        var color = this.baseColors[base];

        if (!color) {
            var refBase = ref ? ref.substr(p, 1).toUpperCase() : 'N';
            if (base == 'N' || refBase == 'N') color = 'gray';else color = this._strandColor;

            if (all) base = refBase;
        }

        var alpha = 1.0;
        if (this._quals) {
            var qc = this._quals.charCodeAt(p) - 33;
            alpha = this.alphaForQual(qc);
        }

        var alt = altPattern.test(base);
        if (this._fillbg || !isCloseUp(scale) || !alt) {
            g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
                x: this._min + p * scale,
                y: 0,
                width: scale,
                height: this._height,
                fill: color,
                fillOpacity: alpha }));
        }

        if (isCloseUp(scale) && alt) {
            g.appendChild(makeElementNS(NS_SVG, 'text', base, {
                x: this._min + (0.5 + p) * scale,
                y: 8,
                textAnchor: 'middle',
                fill: this._fillbg ? 'black' : color,
                fillOpacity: alpha }));
        }
    }

    return g;
};

function TranslatedGlyph(glyph, x, y, height) {
    this.glyph = glyph;
    this._height = height;
    this._x = x;
    this._y = y;
}

TranslatedGlyph.prototype.height = function () {
    if (this._height) {
        return this._height;
    } else {
        return this.glyph.height() + this._y;
    }
};

TranslatedGlyph.prototype.min = function () {
    return this.glyph.min() + this._x;
};

TranslatedGlyph.prototype.max = function () {
    return this.glyph.max() + this._x;
};

TranslatedGlyph.prototype.minY = function () {
    return this._y;
};

TranslatedGlyph.prototype.maxY = function () {
    return this._y + this.glyph.height();
};

TranslatedGlyph.prototype.draw = function (g, o) {
    g.save();
    g.translate(this._x, this._y);
    this.glyph.draw(g, o);
    g.restore();
};

TranslatedGlyph.prototype.toSVG = function () {
    var s = this.glyph.toSVG();
    s.setAttribute('transform', 'translate(' + this._x + ',' + this._y + ')');
    return s;
};

function PointGlyph(x, y, height, fill) {
    this._x = x;
    this._y = y;
    this._height = height;
    this._fill = fill;
}

PointGlyph.prototype.min = function () {
    return this._x - 2;
};

PointGlyph.prototype.max = function () {
    return this._x + 2;
};

PointGlyph.prototype.height = function () {
    return this._height;
};

PointGlyph.prototype.draw = function (g) {
    g.save();
    g.globalAlpha = 0.3;
    g.fillStyle = this._fill;
    g.beginPath();
    g.arc(this._x, this._y, 1.5, 0, 6.29);
    g.fill();
    g.restore();
};

PointGlyph.prototype.toSVG = function () {
    return makeElementNS(NS_SVG, 'circle', null, { cx: this._x, cy: this._y, r: 2,
        fill: this._fill,
        stroke: 'none' });
};

function GridGlyph(height, yOffset, spacing) {
    this._height = height || 50;
    this.yOffset = yOffset || 0;
    this.spacing = spacing || 10;
}

GridGlyph.prototype.notSelectable = true;

GridGlyph.prototype.min = function () {
    return -100000;
};

GridGlyph.prototype.max = function () {
    return 100000;
};

GridGlyph.prototype.height = function () {
    return this._height;
};

GridGlyph.prototype.draw = function (g) {
    g.save();
    g.strokeStyle = 'black';
    g.lineWidth = 0.1;

    g.beginPath();
    for (var y = this.yOffset; y <= this._height + this.yOffset; y += this.spacing) {
        // for (var y = 0; y <= this._height; y += 10) {
        g.moveTo(-5000, y);
        g.lineTo(5000, y);
    }
    g.stroke();
    g.restore();
};

GridGlyph.prototype.toSVG = function () {
    var p = new SVGPath();
    for (var y = 0; y <= this._height; y += 10) {
        p.moveTo(-5000, y);
        p.lineTo(5000, y);
    }

    return makeElementNS(NS_SVG, 'path', null, { d: p.toPathData(),
        fill: 'none',
        stroke: 'black',
        strokeWidth: '0.1px' });
};

function StarGlyph(x, r, points, fill, stroke) {
    PathGlyphBase.call(this, stroke, fill);
    this._x = x;
    this._r = r;
    this._points = points;
}

StarGlyph.prototype = Object.create(PathGlyphBase.prototype);

StarGlyph.prototype.min = function () {
    return this._x - this._r;
};

StarGlyph.prototype.max = function () {
    return this._x + this._r;
};

StarGlyph.prototype.height = function () {
    return 2 * this._r;
};

StarGlyph.prototype.drawPath = function (g) {
    var midX = this._x,
        midY = this._r,
        r = this._r;
    for (var p = 0; p < this._points; ++p) {
        var theta = p * 6.28 / this._points;
        var px = midX + r * Math.sin(theta);
        var py = midY - r * Math.cos(theta);
        if (p == 0) {
            g.moveTo(px, py);
        } else {
            g.lineTo(px, py);
        }
        theta = (p + 0.5) * 6.28 / this._points;
        px = midX + 0.4 * r * Math.sin(theta);
        py = midY - 0.4 * r * Math.cos(theta);
        g.lineTo(px, py);
    }
    g.closePath();
};

function PlimsollGlyph(x, height, overhang, fill, stroke) {
    this._x = x;
    this._height = height;
    this._overhang = overhang;
    this._fill = fill;
    this._stroke = stroke;
    this._hh = height / 2;
}

PlimsollGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;
    g.fillStyle = this._stroke;
    g.beginPath();
    g.arc(this._x, hh, hh - this._overhang, 0, 6.29);
    g.moveTo(this._x, 0);
    g.lineTo(this._x, this._height);

    if (this._fill) {
        g.fillStyle = this._fill;
        g.fill();
    }

    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.stroke();
    }
};

PlimsollGlyph.prototype.toSVG = function () {
    var hh = this._hh;
    return makeElementNS(NS_SVG, 'g', [makeElementNS(NS_SVG, 'circle', null, { cx: this._x, cy: hh, r: hh - this._overhang }), makeElementNS(NS_SVG, 'line', null, { x1: this._x, y1: 0, x2: this._x, y2: this._height })], { fill: this._fill || 'none',
        stroke: this._stroke || 'none',
        strokeWidth: '1px' });
};

PlimsollGlyph.prototype.min = function () {
    return this._x - this._hh;
};

PlimsollGlyph.prototype.max = function () {
    return this._x + this._hh;
};

PlimsollGlyph.prototype.height = function () {
    return this._height;
};

function OverlayLabelCanvas() {
    this.ox = 0;
    this.oy = 0;
    this.glyphs = [];
}

OverlayLabelCanvas.prototype.translate = function (x, y) {
    this.ox += x;
    this.oy += y;
};

OverlayLabelCanvas.prototype.registerGlyph = function (g) {
    this.glyphs.push({
        x: this.ox,
        y: this.oy,
        glyph: g
    });
};

OverlayLabelCanvas.prototype.draw = function (g, minVisible, maxVisible) {
    for (var gi = 0; gi < this.glyphs.length; ++gi) {
        var gg = this.glyphs[gi];
        g.save();
        g.translate(gg.x, gg.y);
        gg.glyph.drawOverlay(g, minVisible, maxVisible);
        g.restore();
    }
};

if (typeof module !== 'undefined') {
    module.exports = {
        BoxGlyph: BoxGlyph,
        GroupGlyph: GroupGlyph,
        LineGraphGlyph: LineGraphGlyph,
        LabelledGlyph: LabelledGlyph,
        CrossGlyph: CrossGlyph,
        ExGlyph: ExGlyph,
        TriangleGlyph: TriangleGlyph,
        DotGlyph: DotGlyph,
        PaddedGlyph: PaddedGlyph,
        AArrowGlyph: AArrowGlyph,
        SpanGlyph: SpanGlyph,
        LineGlyph: LineGlyph,
        PrimersGlyph: PrimersGlyph,
        ArrowGlyph: ArrowGlyph,
        TooManyGlyph: TooManyGlyph,
        TextGlyph: TextGlyph,
        SequenceGlyph: SequenceGlyph,
        AminoAcidGlyph: AminoAcidGlyph,
        TranslatedGlyph: TranslatedGlyph,
        GridGlyph: GridGlyph,
        StarGlyph: StarGlyph,
        PointGlyph: PointGlyph,
        PlimsollGlyph: PlimsollGlyph,

        OverlayLabelCanvas: OverlayLabelCanvas
    };
}

},{"./spans":40,"./svg-utils":44,"./utils":55}],24:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// jbjson.js -- query JBrowse-style REST data stores
//

if (typeof require !== 'undefined') {
    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;
}

function JBrowseStore(base, query) {
    this.base = base;
    this.query = query;
}

function jbori(strand) {
    if (strand > 0) return '+';else if (strand < 0) return '-';
}

JBrowseStore.prototype.features = function (segment, opts, callback) {
    opts = opts || {};

    url = this.base + '/features/' + segment.name;

    var filters = [];
    if (this.query) {
        filters.push(this.query);
    }
    if (segment.isBounded) {
        filters.push('start=' + segment.start);
        filters.push('end=' + segment.end);
    }
    if (filters.length > 0) {
        url = url + '?' + filters.join('&');
    }

    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            if (req.status >= 300) {
                callback(null, 'Error code ' + req.status);
            } else {
                var jf = JSON.parse(req.response)['features'];
                var features = [];
                for (fi = 0; fi < jf.length; ++fi) {
                    var j = jf[fi];

                    var f = new DASFeature();
                    f.segment = segment.name;
                    f.min = (j['start'] | 0) + 1;
                    f.max = j['end'] | 0;
                    if (j.name) {
                        f.label = j.name;
                    }
                    if (j.strand) f.orientation = jbori(j.strand);
                    f.type = j.type || 'unknown';

                    if (j.subfeatures && j.subfeatures.length > 0) {
                        f.id = j.uniqueID;

                        var blocks = [];
                        var cds = [];
                        var all = [];

                        for (var si = 0; si < j.subfeatures.length; ++si) {
                            var sj = j.subfeatures[si];
                            var sf = shallowCopy(f);
                            sf.min = sj.start + 1;
                            sf.max = sj.end;
                            sf.groups = [f];

                            all.push(sf);
                            blocks.push(new Range(sf.min, sf.max));
                            if (sj.type === 'CDS') cds.push(sf);
                        }

                        if (cds.length > 0) {
                            spans = union(blocks);
                            var txGroup = shallowCopy(f);
                            txGroup.type = 'transcript';
                            spans.ranges().forEach(function (exon) {
                                features.push({
                                    segment: segment.name,
                                    min: exon.min(),
                                    max: exon.max(),
                                    orientation: f.orientation,
                                    groups: [txGroup],
                                    type: 'transcript'
                                });
                            });

                            var tlGroup = shallowCopy(f);
                            cds.forEach(function (cdsExon) {
                                cdsExon.type = 'translation';
                                cdsExon.groups = [tlGroup];
                                features.push(cdsExon);
                            });
                        } else {
                            all.forEach(function (f) {
                                features.push(f);
                            });
                        }
                    } else {
                        features.push(f);
                    }
                }
                callback(features);
            }
        }
    };

    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

if (typeof module !== 'undefined') {
    module.exports = {
        JBrowseStore: JBrowseStore
    };
}

},{"./das":10,"./spans":40,"./utils":55}],25:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// kspace.js
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var Awaited = utils.Awaited;
    var pusho = utils.pusho;

    var sa = require('./sourceadapters');
    var MappedFeatureSource = sa.MappedFeatureSource;
    var CachingFeatureSource = sa.CachingFeatureSource;
    var BWGFeatureSource = sa.BWGFeatureSource;
    var RemoteBWGFeatureSource = sa.RemoteBWGFeatureSource;
    var BAMFeatureSource = sa.BAMFeatureSource;
    var RemoteBAMFeatureSource = sa.RemoteBAMFeatureSource;
    var DummySequenceSource = sa.DummySequenceSource;
    var DummyFeatureSource = sa.DummyFeatureSource;

    var OverlayFeatureSource = require('./overlay').OverlayFeatureSource;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var sample = require('./sample');
    var downsample = sample.downsample;
    var getBaseCoverage = sample.getBaseCoverage;

    var das = require('./das');
    var DASSequence = das.DASSequence;

    var Promise = require('es6-promise').Promise;
}

function FetchPool() {
    var self = this;
    this.reqs = [];
    this.awaitedFeatures = {};
    this.requestsIssued = new Promise(function (resolve, reject) {
        self.notifyRequestsIssued = resolve;
    });
}

FetchPool.prototype.addRequest = function (xhr) {
    this.reqs.push(xhr);
};

FetchPool.prototype.abortAll = function () {
    for (var i = 0; i < this.reqs.length; ++i) {
        this.reqs[i].abort();
    }
};

function KSCacheBaton(chr, min, max, scale, features, status, coverage) {
    this.chr = chr;
    this.min = min;
    this.max = max;
    this.coverage = coverage;
    this.scale = scale;
    this.features = features || [];
    this.status = status;
}

KSCacheBaton.prototype.toString = function () {
    return this.chr + ":" + this.min + ".." + this.max + ";scale=" + this.scale;
};

function KnownSpace(tierMap, chr, min, max, scale, seqSource) {
    this.tierMap = tierMap;
    this.chr = chr;
    this.min = min;
    this.max = max;
    this.scale = scale;
    this.seqSource = seqSource || new DummySequenceSource();
    this.viewCount = 0;

    this.featureCache = {};
    this.latestViews = {};
}

KnownSpace.prototype.cancel = function () {
    this.cancelled = true;
};

KnownSpace.prototype.bestCacheOverlapping = function (chr, min, max) {
    var baton = this.featureCache[this.tierMap[0]];
    if (baton) {
        return baton;
    } else {
        return null;
    }
};

KnownSpace.prototype.retrieveFeatures = function (tiers, chr, min, max, scale, noStartFetches) {
    if (scale != scale) {
        throw "retrieveFeatures called with silly scale";
    }

    if (chr != this.chr) {
        throw "Can't extend Known Space to a new chromosome";
    }
    if (min < 1) {
        min = 1;
    }

    this.min = min;
    this.max = max;
    this.scale = scale;

    if (this.pool) {
        this.pool.abortAll();
    }
    this.pool = new FetchPool();
    this.awaitedSeq = new Awaited();
    this.seqWasFetched = false;
    this.viewCount++;

    if (!noStartFetches) {
        this.startFetchesForTiers(tiers);
    }
    this.pool.notifyRequestsIssued();
};

function filterFeatures(features, min, max) {
    var ff = [];
    var featuresByGroup = {};

    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        if (!f.min || !f.max) {
            ff.push(f);
        } else if (f.groups && f.groups.length > 0) {
            pusho(featuresByGroup, f.groups[0].id, f);
        } else if (f.min <= max && f.max >= min) {
            ff.push(f);
        }
    }

    for (var gid in featuresByGroup) {
        var gf = featuresByGroup[gid];
        var gmin = 100000000000,
            gmax = -100000000000;
        for (var fi = 0; fi < gf.length; ++fi) {
            var f = gf[fi];
            gmin = Math.min(gmin, f.min);
            gmax = Math.max(gmax, f.max);
        }
        if (gmin <= max || gmax >= min) {
            for (var fi = 0; fi < gf.length; ++fi) {
                ff.push(gf[fi]);
            }
        }
    }

    return ff;
}

KnownSpace.prototype.invalidate = function (tier) {
    if (!this.pool) {
        return;
    }

    this.featureCache[tier] = null;
    this.startFetchesForTiers([tier]);
};

KnownSpace.prototype.startFetchesForTiers = function (tiers) {
    var thisB = this;

    var awaitedSeq = this.awaitedSeq;
    var needSeq = false;

    var gex;

    for (var t = 0; t < tiers.length; ++t) {
        var tierRenderer = tiers[t].browser.getTierRenderer(tiers[t]);
        try {
            if (this.startFetchesFor(tiers[t], awaitedSeq)) {
                needSeq = true;
            }
        } catch (ex) {
            var tier = tiers[t];

            tier.currentFeatures = [];
            tier.currentSequence = null;
            console.log('Error fetching tier source');
            console.log(ex);
            gex = ex;
            console.log(ex.stack);
            tierRenderer.renderTier(ex, tier);
            tier.wasRendered();
        }
    }

    if (needSeq && !this.seqWasFetched) {
        this.seqWasFetched = true;
        var smin = this.min,
            smax = this.max;

        if (this.cs) {
            if (this.cs.start <= smin && this.cs.end >= smax) {
                var cachedSeq;
                if (this.cs.start == smin && this.cs.end == smax) {
                    cachedSeq = this.cs;
                } else {
                    cachedSeq = new DASSequence(this.cs.name, smin, smax, this.cs.alphabet, this.cs.seq.substring(smin - this.cs.start, smax + 1 - this.cs.start));
                }
                return awaitedSeq.provide(cachedSeq);
            }
        }

        this.seqSource.fetch(this.chr, smin, smax, this.pool, function (err, seq) {
            if (seq) {
                if (!thisB.cs || smin <= thisB.cs.start && smax >= thisB.cs.end || smin >= thisB.cs.end || smax <= thisB.cs.start || smax - smin > thisB.cs.end - thisB.cs.start) {
                    thisB.cs = seq;
                }
                awaitedSeq.provide(seq);
            } else {
                console.log('Sequence loading failed', err);
                awaitedSeq.provide(null);
            }
        });
    }

    if (gex) throw gex;
};

KnownSpace.prototype.startFetchesFor = function (tier, awaitedSeq) {
    var thisB = this;

    var viewID = this.viewCount;
    var source = tier.getSource() || new DummyFeatureSource();
    var needsSeq = tier.needsSequence(this.scale);
    var baton = thisB.featureCache[tier];
    var styleFilters = tier.getActiveStyleFilters(this.scale);
    var wantedTypes;
    if (styleFilters) wantedTypes = styleFilters.typeList();
    var chr = this.chr,
        min = this.min,
        max = this.max;

    if (wantedTypes === undefined) {
        return false;
    }
    if (baton && baton.chr === this.chr && baton.min <= min && baton.max >= max) {
        var cachedFeatures = baton.features;
        if (baton.min < min || baton.max > max) {
            cachedFeatures = filterFeatures(cachedFeatures, min, max);
        }

        thisB.provision(tier, baton.chr, intersection(baton.coverage, new Range(min, max)), baton.scale, wantedTypes, cachedFeatures, baton.status, needsSeq ? awaitedSeq : null);

        var availableScales = source.getScales();

        if (baton.scale <= this.scale || !availableScales) {
            return needsSeq;
        }
    }

    if (source.instrument) console.log('Starting  fetch ' + viewID + ' (' + min + ', ' + max + ')');

    source.fetch(chr, min, max, this.scale, wantedTypes, this.pool, function (status, features, scale, coverage) {
        if (source.instrument) console.log('Finishing fetch ' + viewID);

        var latestViewID = thisB.latestViews[tier] || -1;
        if (thisB.cancelled || latestViewID > viewID) {
            return;
        }

        if (!coverage) {
            coverage = new Range(min, max);
        }

        if (!baton || min < baton.min || max > baton.max) {
            // FIXME should be merging in some cases?
            thisB.featureCache[tier] = new KSCacheBaton(chr, min, max, scale, features, status, coverage);
        }

        thisB.latestViews[tier] = viewID;
        thisB.provision(tier, chr, coverage, scale, wantedTypes, features, status, needsSeq ? awaitedSeq : null);
    }, styleFilters);
    return needsSeq;
};

KnownSpace.prototype.provision = function (tier, chr, coverage, actualScale, wantedTypes, features, status, awaitedSeq) {
    var tierRenderer = tier.browser.getTierRenderer(tier);
    if (status) {
        tier.setFeatures(chr, coverage, actualScale, [], null);
        if (!features) {
            var e = new Error(status);
            status = "Error fetching data: " + status + "; see browser console";
            console.log("Error fetching data for tier " + tier.dasSource.name + ":");
            console.log(tier.dasSource);
            console.log("Stack trace:");
            console.log(e.stack);
        }
        tierRenderer.renderTier(status, tier);
        tier.wasRendered();
    } else {
        var mayDownsample = false;
        var needBaseComposition = false;
        var src = tier.getSource();
        while (MappedFeatureSource.prototype.isPrototypeOf(src) || CachingFeatureSource.prototype.isPrototypeOf(src) || OverlayFeatureSource.prototype.isPrototypeOf(src)) {

            if (OverlayFeatureSource.prototype.isPrototypeOf(src)) {
                src = src.sources[0];
            } else {
                src = src.source;
            }
        }
        if (BWGFeatureSource.prototype.isPrototypeOf(src) || RemoteBWGFeatureSource.prototype.isPrototypeOf(src) || BAMFeatureSource.prototype.isPrototypeOf(src) || RemoteBAMFeatureSource.prototype.isPrototypeOf(src)) {

            mayDownsample = true;
        }

        if (!src.opts || !src.opts.forceReduction && !src.opts.noDownsample) {
            if ( /* (actualScale < (this.scale/2) && features.length > 200)  || */
            mayDownsample && wantedTypes && wantedTypes.length == 1 && wantedTypes.indexOf('density') >= 0) {
                features = downsample(features, this.scale);
            }
        }

        if (wantedTypes && wantedTypes.length == 1 && wantedTypes.indexOf('base-coverage') >= 0) {
            // Base-composition coverage track
            needBaseComposition = true;
        }

        if (awaitedSeq) {
            awaitedSeq.await(function (seq) {
                if (needBaseComposition) {
                    features = getBaseCoverage(features, seq, tier.browser.baseColors);
                }
                tier.setFeatures(chr, coverage, actualScale, features, seq);
                tierRenderer.renderTier(status, tier);
                tier.wasRendered();
            });
        } else {
            tier.setFeatures(chr, coverage, actualScale, features);
            tierRenderer.renderTier(status, tier);
            tier.wasRendered();
        }
    }
};

if (typeof module !== 'undefined') {
    module.exports = {
        KnownSpace: KnownSpace
    };
}

},{"./das":10,"./overlay":30,"./sample":33,"./sourceadapters":38,"./spans":40,"./utils":55,"es6-promise":59}],26:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// lh3utils.js: common support for lh3's file formats
//

if (typeof require !== 'undefined') {
    var jszlib = require('jszlib');
    var jszlib_inflate_buffer = jszlib.inflateBuffer;
    var arrayCopy = jszlib.arrayCopy;
}

function Vob(b, o) {
    this.block = b;
    this.offset = o;
}

Vob.prototype.toString = function () {
    return '' + this.block + ':' + this.offset;
};

function readVob(ba, offset, allowZero) {
    var block = (ba[offset + 6] & 0xff) * 0x100000000 + (ba[offset + 5] & 0xff) * 0x1000000 + (ba[offset + 4] & 0xff) * 0x10000 + (ba[offset + 3] & 0xff) * 0x100 + (ba[offset + 2] & 0xff);
    var bint = ba[offset + 1] << 8 | ba[offset];
    if (block == 0 && bint == 0 && !allowZero) {
        return null; // Should only happen in the linear index?
    } else {
        return new Vob(block, bint);
    }
}

function unbgzf(data, lim) {
    lim = Math.min(lim || 1, data.byteLength - 50);
    var oBlockList = [];
    var ptr = [0];
    var totalSize = 0;

    while (ptr[0] < lim) {
        var ba = new Uint8Array(data, ptr[0], 12); // FIXME is this enough for all credible BGZF block headers?
        var xlen = ba[11] << 8 | ba[10];
        // dlog('xlen[' + (ptr[0]) +']=' + xlen);
        var unc = jszlib_inflate_buffer(data, 12 + xlen + ptr[0], Math.min(65536, data.byteLength - 12 - xlen - ptr[0]), ptr);
        ptr[0] += 8;
        totalSize += unc.byteLength;
        oBlockList.push(unc);
    }

    if (oBlockList.length == 1) {
        return oBlockList[0];
    } else {
        var out = new Uint8Array(totalSize);
        var cursor = 0;
        for (var i = 0; i < oBlockList.length; ++i) {
            var b = new Uint8Array(oBlockList[i]);
            arrayCopy(b, 0, out, cursor, b.length);
            cursor += b.length;
        }
        return out.buffer;
    }
}

function Chunk(minv, maxv) {
    this.minv = minv;this.maxv = maxv;
}

//
// Binning (transliterated from SAM1.3 spec)
//

/* calculate bin given an alignment covering [beg,end) (zero-based, half-close-half-open) */
function reg2bin(beg, end) {
    --end;
    if (beg >> 14 == end >> 14) return ((1 << 15) - 1) / 7 + (beg >> 14);
    if (beg >> 17 == end >> 17) return ((1 << 12) - 1) / 7 + (beg >> 17);
    if (beg >> 20 == end >> 20) return ((1 << 9) - 1) / 7 + (beg >> 20);
    if (beg >> 23 == end >> 23) return ((1 << 6) - 1) / 7 + (beg >> 23);
    if (beg >> 26 == end >> 26) return ((1 << 3) - 1) / 7 + (beg >> 26);
    return 0;
}

/* calculate the list of bins that may overlap with region [beg,end) (zero-based) */
var MAX_BIN = ((1 << 18) - 1) / 7;
function reg2bins(beg, end) {
    var i = 0,
        k,
        list = [];
    --end;
    list.push(0);
    for (k = 1 + (beg >> 26); k <= 1 + (end >> 26); ++k) {
        list.push(k);
    }for (k = 9 + (beg >> 23); k <= 9 + (end >> 23); ++k) {
        list.push(k);
    }for (k = 73 + (beg >> 20); k <= 73 + (end >> 20); ++k) {
        list.push(k);
    }for (k = 585 + (beg >> 17); k <= 585 + (end >> 17); ++k) {
        list.push(k);
    }for (k = 4681 + (beg >> 14); k <= 4681 + (end >> 14); ++k) {
        list.push(k);
    }return list;
}

if (typeof module !== 'undefined') {
    module.exports = {
        unbgzf: unbgzf,
        readVob: readVob,
        reg2bin: reg2bin,
        reg2bins: reg2bins,
        Chunk: Chunk
    };
}

},{"jszlib":60}],27:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// memstore.js
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
    var dalliance_makeParser = sa.makeParser;
    var FeatureSourceBase = sa.FeatureSourceBase;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var Awaited = utils.Awaited;
    var textXHR = utils.textXHR;
}

function MemStore() {
    this.featuresByChr = {};
    this.maxLength = 1;
    this.chrRing = null;
}

MemStore.prototype.addFeatures = function (features) {
    var dirty = {};
    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        var chr = f.segment || f.chr;
        var fa = this.featuresByChr[chr];
        if (!fa) {
            fa = [];
            this.featuresByChr[chr] = fa;
        }
        fa.push(f);
        dirty[chr] = true;

        var len = f.max - f.min + 1;
        if (len > this.maxLength) this.maxLength = len;
    }

    for (chr in dirty) {
        var fa = this.featuresByChr[chr];
        fa.sort(function (f1, f2) {
            var d = f1.min - f2.min;
            if (d != 0) return d;
            return f1.max - f2.max;
        });
    }
    this.chrRing = null;
};

MemStore.prototype._indexFor = function (fa, p) {
    var lb = 0,
        ub = fa.length;
    while (ub > lb) {
        var mid = (lb + ub) / 2 | 0;
        if (mid >= fa.length) return fa.length;
        var mg = fa[mid];
        if (p < mg.min) {
            ub = mid;
        } else {
            lb = mid + 1;
        }
    }
    return ub;
};

MemStore.prototype.fetch = function (chr, min, max) {
    var fa = this.featuresByChr[chr];
    if (!fa) {
        if (chr.indexOf('chr') == 0) fa = this.featuresByChr[chr.substring(3)];else fa = this.featuresByChr['chr' + chr];
    }
    if (!fa) return [];

    var mini = Math.max(0, this._indexFor(fa, min - this.maxLength - 1));
    var maxi = Math.min(fa.length - 1, this._indexFor(fa, max));

    var res = [];
    for (var fi = mini; fi <= maxi; ++fi) {
        var f = fa[fi];
        if (f.min <= max && f.max >= min) res.push(f);
    }
    return res;
};

MemStore.prototype.findNextFeature = function (chr, pos, dir) {
    if (this.chrRing == null) {
        this.chrRing = [];
        for (var chr in this.featuresByChr) {
            this.chrRing.push(chr);
        }
        this.chrRing.sort();
    }

    var fa = this.featuresByChr[chr];
    if (!fa) {
        if (chr.indexOf('chr') == 0) {
            chr = chr.substring(3);
            fa = this.featuresByChr[chr];
        } else {
            chr = 'chr' + chr;
            fa = this.featuresByChr[chr];
        }
    }
    if (!fa) return null;

    var i = Math.max(0, Math.min(this._indexFor(fa, pos), fa.length - 1));
    if (dir > 0) {
        while (i < fa.length) {
            var f = fa[i++];
            if (f.min > pos) return f;
        }
        var chrInd = this.chrRing.indexOf(chr) + 1;
        if (chrInd >= this.chrRing.length) chrInd = 0;
        return this.findNextFeature(this.chrRing[chrInd], 0, dir);
    } else {
        while (i >= 0) {
            var f = fa[i--];
            if (f.max < pos) return f;
        }
        var chrInd = this.chrRing.indexOf(chr) - 1;
        if (chrInd < 0) chrInd = this.chrRing.length - 1;
        return this.findNextFeature(this.chrRing[chrInd], 10000000000, dir);
    }
};

function MemStoreFeatureSource(source) {
    this.source = source;
    FeatureSourceBase.call(this);
    this.storeHolder = new Awaited();
    this.parser = dalliance_makeParser(source.payload);
    if (!this.parser) {
        throw "Unsupported memstore payload: " + source.payload;
    }

    var thisB = this;
    this._load(function (resp, err) {
        if (err) {
            thisB.error = err;
            thisB.storeHolder.provide(null);
        } else {
            var store = new MemStore();
            var features = [];
            var lines = resp.split('\n');

            var session = thisB.parser.createSession(function (f) {
                features.push(f);
            });
            for (var li = 0; li < lines.length; ++li) {
                var line = lines[li];
                if (line.length > 0) {
                    session.parse(line);
                }
            }
            session.flush();

            store.addFeatures(features);

            thisB.storeHolder.provide(store);
        }
    });
}

MemStoreFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

MemStoreFeatureSource.prototype._load = function (callback) {
    if (this.source.blob) {
        var r = new FileReader();
        r.onloadend = function () {
            return callback(r.result, r.error);
        };
        r.readAsText(this.source.blob);
    } else {
        if (this.source.credentials) var opts = { credentials: this.source.credentials };
        textXHR(this.source.uri, callback, opts);
    }
};

MemStoreFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, cnt) {
    var thisB = this;
    this.storeHolder.await(function (store) {
        if (store) {
            var f = store.fetch(chr, min, max);
            return cnt(null, f, 100000000);
        } else {
            return cnt(thisB.error);
        }
    });
};

MemStoreFeatureSource.prototype.getStyleSheet = function (callback) {
    if (this.parser && this.parser.getStyleSheet) this.parser.getStyleSheet(callback);
};

MemStoreFeatureSource.prototype.getDefaultFIPs = function (callback, tier) {
    if (this.parser && this.parser.getDefaultFIPs) this.parser.getDefaultFIPs(callback, tier);
};

MemStoreFeatureSource.prototype.getScales = function () {
    return 100000000;
};

MemStoreFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    var thisB = this;
    this.storeHolder.await(function (store) {
        if (store) {
            return callback(store.findNextFeature(chr, pos, dir));
        } else {
            return callback(null, thisB.error);
        }
    });
};

MemStoreFeatureSource.prototype.capabilities = function () {
    var caps = { leap: true };
    return caps;
};

dalliance_registerSourceAdapterFactory('memstore', function (source) {
    return { features: new MemStoreFeatureSource(source) };
});

},{"./das":10,"./sourceadapters":38,"./utils":55}],28:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.drawTier = exports.renderTier = undefined;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _sequenceDraw = require("./sequence-draw.js");

var _glyphs = require("./glyphs.js");

var _defaultRenderer = require("./default-renderer");

var DefaultRenderer = _interopRequireWildcard(_defaultRenderer);

var _ramda = require("ramda");

var R = _interopRequireWildcard(_ramda);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.renderTier = renderTier;
exports.drawTier = drawTier;

/* Renders multiple tiers in a single track.
   Works by simply drawing several tiers to a single canvas.
   Actual rendering is done using default-renderer.es6.
   A multi-tier renderer is configured by adding the following to a tier's
   configuration:
   renderer: 'multi',
   multi: {
       multi_id: "multi_1",
   }

   All subtiers with the "multi_1" multi_id will be drawn to this tier's canvas.
 */

function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

function drawTier(multiTier) {
    var multiConfig = multiTier.dasSource.multi;
    var getSubConfig = function getSubConfig(t) {
        return t.dasSource.sub;
    };

    // Padding is used for finding the correct canvas size and must be set
    if (!multiTier.padding) multiTier.padding = 3;

    var canvas = multiTier.viewport.getContext("2d");
    var retina = multiTier.browser.retina && window.devicePixelRatio > 1;
    if (retina) {
        canvas.scale(2, 2);
    }

    // Filter out only tiers that are to be drawn in this multitier,
    // and also have fetched data.
    var tiers = multiTier.browser.tiers.filter(function (tier) {
        return _typeof(getSubConfig(tier)) === "object" && getSubConfig(tier).multi_id === multiConfig.multi_id && (tier.currentFeatures || tier.currentSequence);
    });

    // The shortest distance from the top of the canvas to a subtier
    var minOffset = R.pipe(R.map(function (tier) {
        return tier.dasSource.sub.offset;
    }), R.reduce(function (acc, offset) {
        return offset < acc ? offset : acc;
    }, 0))(tiers);

    tiers.forEach(function (tier) {
        if (tier.sequenceSource) {
            (0, _sequenceDraw.drawSeqTier)(tier, tier.currentSequence);
        } else {
            // Shift subtiers up by the minimum offset,
            // so that there's no empty space at the top
            DefaultRenderer.prepareSubtiers(tier, canvas, getSubConfig(tier).offset - minOffset, false);
        }

        // Must be set for painting to work
        if (!multiTier.glyphCacheOrigin) multiTier.glyphCacheOrigin = tier.glyphCacheOrigin;
    });

    // The canvas should fit all subtiers, including offsets, but no more
    var canvasHeight = R.pipe(R.map(function (tier) {
        return R.map(function (subtier) {
            return subtier.height + getSubConfig(tier).offset;
        }, tier.subtiers);
    }), R.flatten, R.reduce(function (acc, h) {
        return h > acc ? h : acc;
    }, -Infinity), R.add(-minOffset))(tiers);

    prepareViewport(multiTier, canvas, retina, canvasHeight, true);

    tiers.sort(function (t1, t2) {
        return getSubConfig(t1).z > getSubConfig(t2).z;
    });

    // TODO: make it add the glyph on to the first available tier;
    // crashes if last tier is empty...
    if (multiConfig.grid && tiers && tiers[tiers.length - 1] && tiers[tiers.length - 1].subtiers[0]) {
        var grid = new _glyphs.GridGlyph(canvasHeight, multiConfig.grid_offset, multiConfig.grid_spacing);
        // pretty hacky way of adding the grid, but it works (mostly)
        tiers[tiers.length - 1].subtiers[0].glyphs.unshift(grid);
    }

    tiers.forEach(function (tier) {
        // Need to save and restore canvas to make sure that the subtiers are
        // drawn on top of one another, if not shifted...
        canvas.save();
        DefaultRenderer.paint(tier, canvas, retina, true);
        canvas.restore();
    });

    multiTier.drawOverlay();

    if (multiConfig.quant) {
        var quantCanvas = DefaultRenderer.createQuantOverlay(multiTier, canvasHeight + multiTier.padding * 2, retina);
        DefaultRenderer.paintQuant(quantCanvas, multiTier, multiConfig.quant, 10);
    }

    if (typeof multiTier.dasSource.drawCallback === "function") {
        multiTier.dasSource.drawCallback(canvas, multiTier);
    }

    multiTier.originHaxx = 0;
    multiTier.browser.arrangeTiers();
}

function prepareViewport(tier, canvas, retina, canvasHeight) {
    var clear = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;

    var desiredWidth = tier.browser.featurePanelWidth + 2000;
    if (retina) {
        desiredWidth *= 2;
    }

    var fpw = tier.viewport.width | 0;
    if (fpw < desiredWidth - 50) {
        tier.viewport.width = fpw = desiredWidth;
    }

    canvasHeight += 2 * tier.padding;
    canvasHeight = Math.max(canvasHeight, tier.browser.minTierHeight);

    if (canvasHeight != tier.viewport.height) {
        tier.viewport.height = canvasHeight;

        if (retina) {
            tier.viewport.height *= 2;
        }
    }

    tier.viewportHolder.style.left = '-1000px';
    tier.viewport.style.width = retina ? '' + fpw / 2 + 'px' : '' + fpw + 'px';
    tier.viewport.style.height = '' + canvasHeight + 'px';
    tier.layoutHeight = Math.max(canvasHeight, tier.browser.minTierHeight);

    tier.updateHeight();
    tier.norigin = tier.browser.viewStart;

    if (clear) {
        DefaultRenderer.clearViewport(canvas, fpw, canvasHeight);
    }

    DefaultRenderer.drawUnmapped(tier, canvas, canvasHeight);
}

},{"./default-renderer":11,"./glyphs.js":23,"./sequence-draw.js":35,"ramda":62}],29:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// memstore.js
//

function formatLongInt(n) {
    return (n | 0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

function formatQuantLabel(v) {
    var t = '' + v;
    var dot = t.indexOf('.');
    if (dot < 0) {
        return t;
    } else {
        var dotThreshold = 2;
        if (t.substring(0, 1) == '-') {
            ++dotThreshold;
        }

        if (dot >= dotThreshold) {
            return t.substring(0, dot);
        } else {
            return t.substring(0, dot + 2);
        }
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        formatLongInt: formatLongInt,
        formatQuantLabel: formatQuantLabel
    };
}

},{}],30:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// overlay.js: featuresources composed from multiple underlying sources
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
    var arrayIndexOf = utils.arrayIndexOf;
}

function OverlayFeatureSource(sources, opts) {
    this.sources = sources;
    this.opts = opts || {};
    this.activityListeners = [];
    this.readinessListeners = [];
    this.changeListeners = [];
    this.business = [];
    this.readiness = [];

    for (var i = 0; i < this.sources.length; ++i) {
        this.initN(i);
    }

    if (typeof opts.merge === 'function') {
        this.merge = opts.merge;
    } else if (opts.merge == 'concat') {
        this.merge = OverlayFeatureSource_merge_concat;
    } else if (opts.merge == 'alternates') {
        this.merge = OverlayFeatureSource_merge_concat;
        this.filterDispatchOnMethod = true;
    } else {
        this.merge = OverlayFeatureSource_merge_byKey;
    }
}

OverlayFeatureSource.prototype.initN = function (n) {
    var s = this.sources[n];
    var thisB = this;
    this.business[n] = 0;

    if (s.addActivityListener) {
        s.addActivityListener(function (b) {
            thisB.business[n] = b;
            thisB.notifyActivity();
        });
    }
    if (s.addChangeListener) {
        s.addChangeListener(function () {
            thisB.notifyChange();
        });
    }
    if (s.addReadinessListener) {
        s.addReadinessListener(function (r) {
            thisB.readiness[n] = r;
            thisB.notifyReadiness();
        });
    }
};

OverlayFeatureSource.prototype.addReadinessListener = function (l) {
    this.readinessListeners.push(l);
    this.notifyReadinessListener(l);
};

OverlayFeatureSource.prototype.removeReadinessListener = function (l) {
    var idx = arrayIndexOf(this.readinessListeners, l);
    if (idx >= 0) {
        this.readinessListeners.splice(idx, 1);
    }
};

OverlayFeatureSource.prototype.notifyReadiness = function () {
    for (var i = 0; i < this.readinessListeners.length; ++i) {
        this.notifyReadinessListener(this.readinessListeners[i]);
    }
};

OverlayFeatureSource.prototype.notifyReadinessListener = function (l) {
    var r = null;
    for (var i = 0; i < this.readiness.length; ++i) {
        if (this.readiness[i] != null) {
            r = this.readiness[i];break;
        }
    }
    try {
        l(r);
    } catch (e) {
        console.log(e);
    }
};

OverlayFeatureSource.prototype.addActivityListener = function (l) {
    this.activityListeners.push(l);
};

OverlayFeatureSource.prototype.removeActivityListener = function (l) {
    var idx = arrayIndexOf(this.activityListeners, l);
    if (idx >= 0) {
        this.activityListeners.splice(idx, 1);
    }
};

OverlayFeatureSource.prototype.notifyActivity = function () {
    var busy = 0;
    for (var i = 0; i < this.business.length; ++i) {
        busy += this.business[i];
    }

    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](busy);
        } catch (e) {
            console.log(e);
        }
    }
};

OverlayFeatureSource.prototype.addChangeListener = function (listener) {
    this.changeListeners.push(listener);
};

OverlayFeatureSource.prototype.removeChangeListener = function (l) {
    var idx = arrayIndexOf(this.changeListeners, l);
    if (idx >= 0) {
        this.changeListeners.splice(idx, 1);
    }
};

OverlayFeatureSource.prototype.notifyChange = function () {
    for (var li = 0; li < this.changeListeners.length; ++li) {
        try {
            this.changeListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

OverlayFeatureSource.prototype.getScales = function () {
    return this.sources[0].getScales();
};

OverlayFeatureSource.prototype.getStyleSheet = function (callback) {
    return this.sources[0].getStyleSheet(callback);
};

OverlayFeatureSource.prototype.capabilities = function () {
    var caps = {};
    var s0 = this.sources[0];
    if (s0.capabilities) caps = shallowCopy(s0.capabilities());

    for (var i = 1; i < this.sources.length; ++i) {
        var si = this.sources[i];
        if (si.capabilities) {
            var co = si.capabilities();
            if (co.search) {
                caps.search = co.search;
            }
        }
    }

    return caps;
};

OverlayFeatureSource.prototype.search = function (query, callback) {
    for (var i = 0; i < this.sources.length; ++i) {
        if (_sourceAdapterIsCapable(this.sources[i], 'search')) {
            return this.sources[i].search(query, callback);
        }
    }
};

OverlayFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback, styleFilters) {
    var sources;
    if (this.filterDispatchOnMethod) {
        sources = [];
        var sfl = styleFilters.list();
        for (var si = 0; si < this.sources.length; ++si) {
            var source = this.sources[si];
            for (var fi = 0; fi < sfl.length; ++fi) {
                var filter = sfl[fi];
                if (!filter.method || filter.method == source.name) {
                    sources.push(source);
                    break;
                }
            }
        }
    } else {
        sources = this.sources;
    }

    var baton = new OverlayBaton(this, callback, sources);
    for (var si = 0; si < sources.length; ++si) {
        this.fetchN(baton, si, sources[si], chr, min, max, scale, types, pool, styleFilters);
    }
};

OverlayFeatureSource.prototype.fetchN = function (baton, si, source, chr, min, max, scale, types, pool, styleFilters) {
    // FIXME should we try to prune styleFilters?
    source.fetch(chr, min, max, scale, types, pool, function (status, features, scale) {
        return baton.completed(si, status, features, scale);
    }, styleFilters);
};

OverlayFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    return this.sources[0].quantFindNextFeature(chr, pos, dir, threshold, callback);
};

OverlayFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    return this.sources[0].findNextFeature(chr, pos, dir, callback);
};

function OverlayBaton(source, callback, sources) {
    this.source = source;
    this.callback = callback;
    this.sources = sources;
    this.count = sources.length;

    this.returnCount = 0;
    this.statusCount = 0;
    this.returns = [];
    this.features = [];
    this.statuses = [];
    this.scale = null;
}

OverlayBaton.prototype.completed = function (index, status, features, scale) {
    if (this.scale == null || index == 0) this.scale = scale;

    if (this.returns[index]) throw 'Multiple returns for source ' + index;

    this.returns[index] = true;
    this.returnCount++;

    this.features[index] = features;

    if (status) {
        this.statuses[index] = status;
        this.statusCount++;
    }

    if (this.returnCount == this.count) {
        if (this.statusCount > 0) {
            var message = '';
            for (var si = 0; si < this.count; ++si) {
                var s = this.statuses[si];
                if (s) {
                    if (message.length > 0) message += ', ';
                    message += s;
                }
            }
            return this.callback(message, null, this.scale);
        } else {
            this.callback(null, this.source.merge(this.features, this.sources), this.scale);
        }
    }
};

OverlayFeatureSource.prototype.getDefaultFIPs = function (callback) {
    for (var si = 0; si < this.sources.length; ++si) {
        var s = this.sources[si];
        if (s.getDefaultFIPs) s.getDefaultFIPs(callback);
    }
};

OverlayFeatureSource.prototype.keyForFeature = function (feature) {
    return '' + feature.min + '..' + feature.max;
};

function OverlayFeatureSource_merge_byKey(featureSets) {
    var omaps = [];

    for (var fsi = 1; fsi < featureSets.length; ++fsi) {
        var om = {};
        var of = featureSets[fsi];
        for (var fi = 0; fi < of.length; ++fi) {
            om[this.keyForFeature(of[fi])] = of[fi];
        }
        omaps.push(om);
    }

    var mf = [];
    var fl = featureSets[0];
    for (var fi = 0; fi < fl.length; ++fi) {
        var f = fl[fi];

        for (var oi = 0; oi < omaps.length; ++oi) {
            var om = omaps[oi];
            of = om[this.keyForFeature(f)];
            if (of) {
                for (var k in of) {
                    if (k === 'score') {
                        f.score2 = of.score;
                    } else if (k === 'min' || k === 'max' || k === 'segment' || k === '_cachedStyle') {
                        // do nothing
                    } else {
                        f[k] = of[k];
                    }
                }
            }
        }
        mf.push(f);
    }
    return mf;
}

function OverlayFeatureSource_merge_concat(featureSets, sources) {
    var features = [];
    for (var fsi = 0; fsi < featureSets.length; ++fsi) {
        var fs = featureSets[fsi];
        var name = sources[fsi].name;
        for (var fi = 0; fi < fs.length; ++fi) {
            var f = fs[fi];
            f.method = name;
            features.push(f);
        }
    }
    return features;
}

function _sourceAdapterIsCapable(s, cap) {
    if (!s.capabilities) return false;else return s.capabilities()[cap];
}

if (typeof module !== 'undefined') {
    module.exports = {
        OverlayFeatureSource: OverlayFeatureSource
    };
}

},{"./utils":55}],31:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// bedwig.js
//

"use strict";

if (typeof require !== 'undefined') {
    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;
    var readInt = bin.readInt;

    var bbi = require('./bigwig');
    var BIG_WIG_MAGIC = bbi.BIG_WIG_MAGIC;
    var BIG_BED_MAGIC = bbi.BIG_BED_MAGIC;

    var lh3utils = require('./lh3utils');
    var unbgzf = lh3utils.unbgzf;

    var bam = require('./bam');
    var BAM_MAGIC = bam.BAM_MAGIC;
    var BAI_MAGIC = bam.BAI_MAGIC;

    var tbi = require('./tabix');
    var TABIX_MAGIC = tbi.TABIX_MAGIC;

    var EncodeFetchable = require('./encode').EncodeFetchable;
}

function probeResource(source, listener, retry) {
    var BED_REGEXP = new RegExp('^\\w+\\s+[0-9]+\\s+[0-9]+.*$');
    var KV_REGEXP = /([^=]+)=\"?([^\"]+)\"?/;
    var VCFHEAD_RE = /^##\s*fileformat=VCFv4\..+/;

    var fetchable;
    if (source.blob) fetchable = new BlobFetchable(source.blob);else if (source.transport == 'encode') fetchable = new EncodeFetchable(source.uri);else fetchable = new URLFetchable(source.uri, { credentials: source.credentials });

    fetchable.slice(0, 1 << 16).salted().fetch(function (result, error) {
        if (!result) {
            if (!retry) {
                source.credentials = true;
                probeResource(source, listener, true);
            }

            return listener(source, "Couldn't fetch data");
        }

        var ba = new Uint8Array(result);
        var la = new Uint32Array(result, 0, 1);
        var magic = la[0];
        if (magic == BIG_WIG_MAGIC || magic == BIG_BED_MAGIC) {
            source.tier_type = 'bwg';
            var nameExtractPattern = new RegExp('/?([^/]+?)(.bw|.bb|.bigWig|.bigBed)?$');
            var match = nameExtractPattern.exec(source.uri || source.blob.name);
            if (match) {
                source.name = match[1];
            }

            return listener(source, null);
        } else if (magic == BAI_MAGIC) {
            source.tier_type = 'bai';
            return listener(source, null);
        } else if (ba[0] == 31 || ba[1] == 139) {
            var unc = unbgzf(result);
            var uncba = new Uint8Array(unc);
            magic = readInt(uncba, 0);
            if (magic == BAM_MAGIC) {
                source.tier_type = 'bam';
                var nameExtractPattern = new RegExp('/?([^/]+?)(.bam)?$');
                var match = nameExtractPattern.exec(source.uri || source.blob.name);
                if (match) {
                    source.name = match[1];
                }

                return listener(source, null);
            } else if (magic == TABIX_MAGIC) {
                source.tier_type = 'tabix-index';
                return listener(source, null);
            } else if (magic == 0x69662323) {
                source.tier_type = 'tabix';
                source.payload = 'vcf';
                var nameExtractPattern = new RegExp('/?([^/]+?)(.vcf)?(.gz)?$');
                var match = nameExtractPattern.exec(source.uri || source.blob.name);
                if (match) {
                    source.name = match[1];
                }

                return listener(source, null);
            } else {
                console.log('magic = ' + magic.toString(16));
                return listener(source, "Unsupported format");
            }
        } else {
            var text = String.fromCharCode.apply(null, ba);
            var lines = text.split("\n");

            if (lines.length > 0 && VCFHEAD_RE.test(lines[0])) {
                source.tier_type = 'memstore';
                source.payload = 'vcf';
                var nameExtractPattern = new RegExp('/?([^/]+?)(\.vcf)?$');
                var match = nameExtractPattern.exec(source.uri || source.blob.name);
                if (match && !source.name) {
                    source.name = match[1];
                }
                return listener(source, null);
            }

            for (var li = 0; li < lines.length; ++li) {
                var line = lines[li].replace('\r', '');
                if (line.length == 0) continue;

                if (line.indexOf('browser') == 0) continue;

                if (line.indexOf('track') == 0) {
                    var maybeType = 'bed';
                    var toks = line.split(/\s/);
                    for (var ti = 1; ti < toks.length; ++ti) {
                        var m = KV_REGEXP.exec(toks[ti]);
                        if (m) {
                            if (m[1] == 'type' && m[2] == 'wiggle_0') {
                                maybeType = 'wig';
                            } else if (m[0] == 'name') {
                                source.name = m[2];
                            }
                        }
                    }

                    finishProbeBedWig(source, maybeType);
                    return listener(source, null);
                }

                if (line.indexOf('fixedStep') == 0) {
                    finishProbeBedWig(source, 'wig');
                    return listener(source, null);
                }

                if (line.indexOf('variableStep') == 0) {
                    finishProbeBedWig(source, 'wig');
                    return listener(source, null);
                }

                if (BED_REGEXP.test(line)) {
                    finishProbeBedWig(source, null);
                    return listener(source, null);
                }

                break;
            }

            return listener(source, "Unsupported format");
        }
    }, { timeout: 1500 }); // Timeout to catch mixed-origin case on Chromium.
}

function finishProbeBedWig(source, maybeType) {
    source.tier_type = 'memstore';
    var nameExtractPattern = new RegExp('/?([^/]+?)(.(bed|wig))?$');
    var match = nameExtractPattern.exec(source.uri || source.blob.name);
    if (match) {
        if (!source.name) source.name = match[1];
        if (!maybeType && match[3]) {
            maybeType = match[3];
        }
    }
    source.payload = maybeType || 'bed';
}

if (typeof module !== 'undefined') {
    module.exports = {
        probeResource: probeResource
    };
}

},{"./bam":1,"./bigwig":3,"./bin":4,"./encode":14,"./lh3utils":26,"./tabix":46}],32:[function(require,module,exports){
/* jshint esversion: 6 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Ruler = Ruler;
exports.rulerDrawCallback = rulerDrawCallback;


function Ruler(options) {
    var self = this;

    self.value = options.value;
    self.min = options.min;
    self.max = options.max;
    self.width = options.width;
    self.color = options.color;

    Object.keys(self).map(function (key) {
        if (self[key] === undefined) {
            console.log("WARNING: Ruler option " + key + " not set");
        }
    });
}

Ruler.prototype.constructor = Ruler;

function rulerDrawCallback(canvas, tier) {
    var rulers = tier.dasSource.rulers;

    if (!rulers) {
        console.log("Tier uses ruler callback but has no rulers!");
    } else if (!(rulers instanceof Array)) {
        console.log("rulers.js: 'rulers' should be an Array");
    }

    rulers.map(function (r) {
        var rulerY = (r.max - r.value) * r.height;
        var viewWidth = tier.viewport.width;
        var oldLineWidth = canvas.lineWidth;

        canvas.strokeStyle = r.color;
        canvas.beginPath();
        canvas.moveTo(-viewWidth, rulerY + r.offset);
        // Other parts of the code rely on not having changed the lineWidth...
        // So we need to change it back when we're done.
        canvas.lineWidth = r.width;
        canvas.lineTo(2 * viewWidth, rulerY + r.offset);
        canvas.stroke();
        canvas.lineWidth = oldLineWidth;
    });
}

},{}],33:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// sample.js: downsampling of quantitative features
//

"use strict";

if (typeof require !== 'undefined') {
    var das = require('./das');
    var DASFeature = das.DASFeature;

    var parseCigar = require('./cigar').parseCigar;

    var shallowCopy = require('./utils').shallowCopy;
}

var __DS_SCALES = [1, 2, 5];

function ds_scale(n) {
    return __DS_SCALES[n % __DS_SCALES.length] * Math.pow(10, n / __DS_SCALES.length | 0);
}

function DSBin(scale, min, max) {
    this.scale = scale;
    this.tot = 0;
    this.cnt = 0;
    this.hasScore = false;
    this.min = min;this.max = max;
    this.features = [];
}

function _featureOrder(a, b) {
    if (a.min < b.min) {
        return -1;
    } else if (a.min > b.min) {
        return 1;
    } else if (a.max < b.max) {
        return -1;
    } else if (b.max > a.max) {
        return 1;
    } else {
        return 0;
    }
}

DSBin.prototype.score = function () {
    if (this.cnt == 0) {
        return 0;
    } else if (this.hasScore) {
        return this.tot / this.cnt;
    } else {
        var features = this.features;
        features.sort(_featureOrder);

        var maxSeen = -10000000000;
        var cov = 0,
            lap = 0;

        for (var fi = 1; fi < features.length; ++fi) {
            var f = features[fi];
            var lMin = Math.max(f.min, this.min);
            var lMax = Math.min(f.max, this.max);
            lap += lMax - lMin + 1;

            if (lMin > maxSeen) {
                cov += lMax - lMin + 1;
                maxSeen = lMax;
            } else {
                if (lMax > maxSeen) {
                    cov += lMax - maxSeen;
                    maxSeen = lMax;
                }
            }
        }

        if (cov > 0) return 1.0 * lap / cov;else return 0;
    }
};

DSBin.prototype.feature = function (f) {
    if (f.score !== undefined) {
        this.tot += f.score;
        this.hasScore = true;
    }

    ++this.cnt;
    this.features.push(f);
};

function downsample(features, targetRez) {
    var sn = 0;
    while (ds_scale(sn + 1) < targetRez) {
        ++sn;
    }
    var scale = ds_scale(sn);

    var binTots = [];
    var maxBin = -10000000000;
    var minBin = 10000000000;
    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        if (f.groups && f.groups.length > 0) {
            // Don't downsample complex features (?)
            return features;
        }

        var minLap = f.min / scale | 0;
        var maxLap = f.max / scale | 0;
        maxBin = Math.max(maxBin, maxLap);
        minBin = Math.min(minBin, minLap);
        for (var b = minLap; b <= maxLap; ++b) {
            var bm = binTots[b];
            if (!bm) {
                bm = new DSBin(scale, b * scale, (b + 1) * scale - 1);
                binTots[b] = bm;
            }
            bm.feature(f);
        }
    }

    var sampledFeatures = [];
    for (var b = minBin; b <= maxBin; ++b) {
        var bm = binTots[b];
        if (bm) {
            var f = new DASFeature();
            f.segment = features[0].segment;
            f.min = b * scale + 1;
            f.max = (b + 1) * scale;
            f.score = bm.score();
            f.type = 'density';
            sampledFeatures.push(f);
        }
    }

    var afterDS = Date.now();
    return sampledFeatures;
}

/** Data structure to store information for
a base position:

pos: position of the base.
*/
function BaseBin(pos) {

    this._pos = pos;
    this._bases = {};
    this._totalCount = 0;
}

/** Keep record for incidence of a base,
with related qual score and strand for a position.

Params
    base: base (e.g A, T, G, C, N) observed at position.
    qual: numeric quality score.
    strand: '+' or '-'.
*/
BaseBin.prototype.recordBase = function (base, qual, strand) {
    if (!this._bases[base]) {
        var strandComposition = { '+': 0, '-': 0 };
        strandComposition[strand]++;
        this._bases[base] = {
            cnt: 1,
            totalQual: qual,
            strandCnt: strandComposition
        };
    } else {
        var baseComposition = this._bases[base];
        baseComposition.cnt++;
        baseComposition.totalQual += qual;
        baseComposition.strandCnt[strand]++;
    }
    this._totalCount++;
};

/** Returns count of total number of bases observed at position */
BaseBin.prototype.totalCount = function () {
    return this._totalCount;
};

/** Returns the base position */
BaseBin.prototype.pos = function () {
    return this._pos;
};

/** Creates a list of tag, info pairs in the form
[tag]=[info] for each base, for use in feature-popup */
BaseBin.prototype.infoList = function () {
    var info = [];
    var totalCount = this._totalCount;
    var totalCountStr = "Depth=" + totalCount.toString();
    info.push(totalCountStr);
    for (var base in this._bases) {
        var baseComposition = this._bases[base];
        var baseCnt = baseComposition.cnt;
        var basePercentage = baseCnt * 100 / totalCount;
        var plusStrandCnt = baseComposition.strandCnt['+'];
        var minusStrandCnt = baseComposition.strandCnt['-'];
        var meanQual = baseComposition.totalQual / baseCnt;

        var baseInfoString = [base, '=', baseCnt, ' (', basePercentage.toFixed(0), '%, ', plusStrandCnt, ' +, ', minusStrandCnt, ' -, Qual: ', meanQual.toFixed(0), ')'];
        info.push(baseInfoString.join(''));
    }
    return info;
};

/** Return a list of objects for creating a
histogram showing composition of different bases at a
given location.

Current implementation is hacky: the logic involves
overlaying BoxGlyphs on top of each other, thus the score
is not meaningful, but only used to manipulate height.

Params:
  ref: reference base at position
  threshold: value between 0 and 1 representing min allele frequency
              below which the allele will be ignored in histogram.
              (interpreted as noise)
              Similar to 'allele threshold' parameter in IGV

Returns a list of objects containing 2 properties
    base: such as A, T, G, C, N, - (del)
    score: a numeric score for determining height of histogram
The list is ordered such that a preceeding object always have a
score >= the current object, and the ref base will be the last item.

Example: There are 50 T's and 40 A's (total depth = 90)
at a base where ref=A. The function will return
[T: 90, A: 40]. When creating a histogram with overlap,
this will give an appearance of 40 A's (bottom) and 50 T's (top):
#######
#  T  #
#  T  #
#  T  #
#  T  #
#  T  #
#######
#  A  #
#  A  #
#  A  #
#  A  #
#######
*/
BaseBin.prototype.baseScoreList = function (ref, threshold) {
    var baseScoreList = [];
    var totalCount = this._totalCount;
    var minCount = threshold * totalCount;
    for (var base in this._bases) {
        var baseCount = this._bases[base].cnt;
        if (baseCount < minCount || base == ref) continue;
        var baseScorePair = { base: base, score: totalCount };
        baseScoreList.push(baseScorePair);
        totalCount -= baseCount;
    }
    baseScoreList.push({ base: ref, score: totalCount });
    return baseScoreList;
};

/** Generates an aligned read from the raw sequence of a BAM record
using given cigar string.

Params:
  rawseq: unaligned read sequence from Bam record
  rawquals: unaligned read quals from Bam record
  cigar: Bam cigar string from Bam record

Returns an object with 2 properties:
  seq: string containing aligned read
  quals: string containing printable-character representation
         of sequencing quality score
*/
function alignSeqUsingCigar(rawseq, rawquals, cigar) {
    var ops = parseCigar(cigar);
    var seq = [];
    var quals = [];
    var cursor = 0;
    for (var ci = 0; ci < ops.length; ++ci) {
        var co = ops[ci];
        if (co.op == 'M') {
            seq.push(rawseq.substr(cursor, co.cnt));
            quals.push(rawquals.substr(cursor, co.cnt));
            cursor += co.cnt;
        } else if (co.op == 'D') {
            for (var oi = 0; oi < co.cnt; ++oi) {
                seq.push('-');
                quals.push('Z');
            }
        } else if (co.op == 'I') {
            cursor += co.cnt;
        } else if (co.op == 'S') {
            cursor += co.cnt;
        } else {
            console.log('unknown cigop' + co.op);
        }
    }
    var processedSeq = { seq: seq.join(''), quals: quals.join('') };
    return processedSeq;
}

/** Constructs the reference sequence for a given window.

Params
    currentSequence: DasSequence object containing ref sequence
                     in current browser view.
    min, max: min and max position for window.

Returns a string containing the refseq, padded with 'N' where sequence is not
    available.
*/
function getRefSeq(currentSequence, min, max) {
    var refSeq = [];
    if (currentSequence) {
        var csStart = currentSequence.start | 0;
        var csEnd = currentSequence.end | 0;
        if (csStart <= max && csEnd >= min) {
            var sfMin = Math.max(min, csStart);
            var sfMax = Math.min(max, csEnd);

            for (var i = 0; i < sfMin - min; i++) {
                refSeq.push('N');
            }refSeq.push(currentSequence.seq.substr(sfMin - csStart, sfMax - sfMin + 1));
            for (var i = 0; i < max - sfMax; i++) {
                refSeq.push('N');
            }
        }
    }
    return refSeq.join('');
}

/** Constructs features necessary for a coverage track showing
base composition for BAM reads

Params
    features: a list of features from BAM records.
    currentRefSeq: a DASSequence object containing reference sequence.
    baseColors: an object mapping base to desired colors.

Returns a list of features of type base-coverage.
*/
function getBaseCoverage(features, currentRefSeq, baseColors) {
    var minBin = null;
    var maxBin = null;

    var allBins = [];

    // Populate BaseBins
    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        if (f.groups && f.groups.length > 0) {
            // Don't downsample complex features
            return features;
        }
        var processedSeq = alignSeqUsingCigar(f.seq, f.quals, f.cigar);
        var seq = processedSeq.seq;
        var quals = processedSeq.quals;
        var strand = f.orientation;
        var minForFeature = f.min || 0;
        var maxForFeature = f.max || 0;
        var ind = 0;

        for (var b = minForFeature; b <= maxForFeature; ++b) {
            var bm = allBins[b];
            if (!bm) {
                bm = new BaseBin(b);
                allBins[b] = bm;
            }
            var base = seq.charAt(ind);
            var qual = quals.charCodeAt(ind) - 33; // Generate numeric qual score
            bm.recordBase(base, qual, strand);
            ind++;
        }

        if (!minBin) minBin = minForFeature;else minBin = Math.min(minBin, minForFeature);
        if (!maxBin) maxBin = maxForFeature;else maxBin = Math.max(maxBin, maxForFeature);
    }

    // Generate coverage features
    var refSeq = getRefSeq(currentRefSeq, minBin, maxBin);
    var baseFeatures = [];
    var ind = 0;
    for (var b = minBin; b <= maxBin; ++b) {
        var bm = allBins[b];
        if (bm) {
            var f = new DASFeature();
            f.segment = features[0].segment;
            f.min = bm.pos();
            f.max = f.min;
            f.notes = [];
            f.notes = f.notes.concat(bm.infoList());
            f.type = 'base-coverage';
            f.suppressScore = true;
            if (refSeq) {
                var refBase = refSeq.charAt(ind);
                var refString = 'Ref=' + refBase;
                f.notes.unshift(refString);
                var baseScoreList = bm.baseScoreList(refBase, 0.2);
                // TODO: shift 0.2 threshold to a config parameter
                for (var i = 0; i < baseScoreList.length; i++) {
                    var base = baseScoreList[i].base;
                    var score = baseScoreList[i].score;
                    var fBase = shallowCopy(f);
                    fBase.score = score;
                    // Color by baseColor when mismatch occurs
                    // otherwise, BoxGlyph to COLOR1 in style
                    if (baseScoreList.length > 1 || base != refBase) fBase.itemRgb = baseColors[base];

                    baseFeatures.push(fBase);
                }
            } else {
                // No refSeq, only show coverage height.
                baseFeatures.push(f);
            }
        }
        ind++;
    }
    return baseFeatures;
}

if (typeof module !== 'undefined') {
    module.exports = {
        downsample: downsample,
        getBaseCoverage: getBaseCoverage
    };
}

},{"./cigar":8,"./das":10,"./utils":55}],34:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// bin.js general binary data support
//

"use strict";

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;

    var connectTrix = require('./trix').connectTrix;
}

var REGION_PATTERN = /^([\d+,\w,\.,\_,\-]+)[\s:]+([0-9,\.]+?)([KkMmGg])?((-|\.\.|\s)+([0-9,\.]+)([KkMmGg])?)?$/;

function parseLocCardinal(n, m) {
    var i = parseFloat(n.replace(/,/g, ''));
    if (m === 'k' || m === 'K') {
        return i * 1000 | 0;
    } else if (m == 'm' || m === 'M') {
        return i * 1000000 | 0;
    } else {
        return i | 0;
    }
}

Browser.prototype.search = function (g, statusCallback, opts) {
    var thisB = this;
    opts = opts || {};
    var srPadding = opts.padding || this.defaultSearchRegionPadding;

    var m = REGION_PATTERN.exec(g);

    if (m) {
        var chr = m[1],
            start,
            end;
        if (m[6]) {
            start = parseLocCardinal(m[2], m[3]);
            end = parseLocCardinal(m[6], m[7]);
        } else {
            var width = this.viewEnd - this.viewStart + 1;
            start = parseLocCardinal(m[2], m[3]) - width / 2 | 0;
            end = start + width - 1;
        }
        this.setLocation(chr, start, end, statusCallback);
    } else {
        if (!g || g.length == 0) {
            return false;
        }

        var searchCount = 0;
        var foundLatch = false;

        var searchCallback = function searchCallback(found, err) {
            --searchCount;
            if (err) {
                return statusCallback(err);
            }

            if (!found) found = [];
            var min = 500000000,
                max = -100000000;
            var nchr = null;
            for (var fi = 0; fi < found.length; ++fi) {
                var f = found[fi];

                if (nchr == null) {
                    nchr = f.segment;
                }
                min = Math.min(min, f.min);
                max = Math.max(max, f.max);
            }

            if (!nchr) {
                if (searchCount == 0 && !foundLatch) return statusCallback("no match for '" + g + "'");
            } else {
                foundLatch = true;
                thisB.highlightRegion(nchr, min, max);

                var mid = (max + min) / 2 | 0;
                var padding = Math.max(srPadding, 0.3 * (max - min + 1) | 0);
                thisB.setLocation(nchr, min - padding, max + padding, statusCallback);
            }
        };

        var doTrixSearch = function doTrixSearch(tier, trix) {
            trix.lookup(g, function (result, status) {
                if (result == null || result.length < 2) {
                    return tier.featureSource.search(g, searchCallback);
                } else {
                    var hit = result[1].split(',')[0];
                    return tier.featureSource.search(hit, searchCallback);
                }
            });
        };

        if (this.searchEndpoint) {
            searchCount = 1;
            return this.doDasSearch(thisB.searchEndpoint, g, searchCallback);
        }

        var searchSources = [].concat(_toConsumableArray(this.searchOnlySourceHolders || []), _toConsumableArray(this.tiers));

        for (var ti = 0; ti < searchSources.length; ++ti) {
            (function (tier) {
                if (thisB.sourceAdapterIsCapable(tier.featureSource, 'search')) {
                    if (tier.dasSource.trixURI) {
                        ++searchCount;
                        if (tier.trix) {
                            doTrixSearch(tier, tier.trix);
                        } else {
                            var ix = new URLFetchable(tier.dasSource.trixURI, { credentials: tier.dasSource.credentials,
                                resolver: tier.dasSource.resolver });

                            var ixx = new URLFetchable(tier.dasSource.trixxURI || tier.dasSource.trixURI + 'x', { credentials: tier.dasSource.credentials,
                                resolver: tier.dasSource.resolver });

                            connectTrix(ix, ixx, function (trix) {
                                tier.trix = trix;
                                doTrixSearch(tier, trix);
                            });
                        }
                    } else {
                        ++searchCount;
                        tier.featureSource.search(g, searchCallback);
                    }
                } else if (tier.dasSource.provides_search) {
                    ++searchCount;
                    thisB.doDasSearch(tier.dasSource, g, searchCallback);
                }
            })(searchSources[ti]);
        }
    }
};

Browser.prototype.doDasSearch = function (source, g, searchCallback) {
    var thisB = this;
    source.features(null, { group: g, type: 'transcript' }, function (found) {
        if (!found) found = [];
        var min = 500000000,
            max = -100000000;
        var nchr = null;

        var found2 = [];
        for (var fi = 0; fi < found.length; ++fi) {
            var f = found[fi];

            if (f.label.toLowerCase() != g.toLowerCase()) {
                // ...because Dazzle can return spurious overlapping features.
                continue;
            }
            found2.push(f);
        }

        return searchCallback(found2);
    }, false);
};

},{"./bin":4,"./cbrowser":6,"./trix":53}],35:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2012
//
// sequence-draw.js: renderers for sequence-related data
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var formatLongInt = utils.formatLongInt;
    var makeElementNS = utils.makeElementNS;

    var svgu = require('./svg-utils');
    var NS_SVG = svgu.NS_SVG;
    var NS_XLINK = svgu.NS_XLINK;
    var SVGPath = svgu.SVGPath;

    var nf = require('./numformats');
    var formatLongInt = nf.formatLongInt;
}

var MIN_TILE = 100;
var rulerTileColors = ['black', 'white'];

var steps = [1, 2, 5];

var NS_SVG = 'http://www.w3.org/2000/svg';

function tileSizeForScale(scale, min) {
    if (!min) {
        min = MIN_TILE;
    }

    function ts(p) {
        return steps[p % steps.length] * Math.pow(10, p / steps.length | 0);
    }
    var pow = steps.length;
    while (scale * ts(pow) < min) {
        ++pow;
    }
    return ts(pow);
}

function drawSeqTier(tier, seq) {
    var gc = tier.viewport.getContext('2d');
    var retina = tier.browser.retina && window.devicePixelRatio > 1;
    var desiredWidth = tier.browser.featurePanelWidth + 2000;
    if (retina) {
        desiredWidth *= 2;
    }
    var fpw = tier.viewport.width | 0; // this.browser.featurePanelWidth;
    if (fpw < desiredWidth - 50) {
        tier.viewport.width = fpw = desiredWidth;
    }

    var height = 50;
    if (seq && seq.seq) {
        height += 25;
    }

    var canvasHeight = height;
    if (retina) canvasHeight *= 2;

    tier.viewport.height = canvasHeight;
    tier.viewport.style.height = '' + height + 'px';
    tier.viewport.style.width = retina ? '' + fpw / 2 + 'px' : '' + fpw + 'px';
    tier.layoutHeight = height;
    tier.updateHeight();

    if (tier.background) {
        gc.fillStyle = tier.background;
        gc.fillRect(0, 0, fpw, tier.viewport.height);
    }
    if (retina) {
        gc.scale(2, 2);
    }

    gc.translate(1000, 0);
    drawSeqTierGC(tier, seq, gc);
    tier.norigin = tier.browser.viewStart;
    tier.viewportHolder.style.left = '-1000px';
}

function drawSeqTierGC(tier, seq, gc) {
    var scale = tier.browser.scale,
        knownStart = tier.browser.viewStart - 1000 / scale | 0,
        knownEnd = tier.browser.viewEnd + 2000 / scale,
        currentSeqMax = tier.browser.currentSeqMax;

    var seqTierMax = knownEnd;
    if (currentSeqMax > 0 && currentSeqMax < knownEnd) {
        seqTierMax = currentSeqMax;
    }
    var tile = tileSizeForScale(scale);
    var pos = Math.max(0, (knownStart / tile | 0) * tile);

    var origin = tier.browser.viewStart;

    while (pos <= seqTierMax) {
        gc.fillStyle = pos / tile % 2 == 0 ? 'white' : 'black';
        gc.strokeStyle = 'black';
        gc.fillRect((pos - origin) * scale, 8, tile * scale, 3);
        gc.strokeRect((pos - origin) * scale, 8, tile * scale, 3);

        gc.fillStyle = 'black';
        gc.fillText(formatLongInt(pos), (pos - origin) * scale, 22);

        pos += tile;
    }

    if (seq && seq.seq) {
        for (var p = knownStart; p <= knownEnd; ++p) {
            if (p >= seq.start && p <= seq.end) {
                var base = seq.seq.substr(p - seq.start, 1).toUpperCase();
                var color = tier.browser.baseColors[base];
                if (!color) {
                    color = 'gray';
                }

                gc.fillStyle = color;

                if (scale >= 8) {
                    var w = gc.measureText(base).width;
                    // console.log(scale-w);
                    gc.fillText(base, (p - origin) * scale + (scale - w) * 0.5, 52);
                } else {
                    gc.fillRect((p - origin) * scale, 42, scale, 12);
                }
            }
        }
    }
}

function svgSeqTier(tier, seq) {
    var scale = tier.browser.scale,
        knownStart = tier.browser.viewStart - 1000 / scale | 0,
        knownEnd = tier.browser.viewEnd + 2000 / scale,
        currentSeqMax = tier.browser.currentSeqMax;

    var fpw = tier.viewport.width | 0;

    var seqTierMax = knownEnd;
    if (currentSeqMax > 0 && currentSeqMax < knownEnd) {
        seqTierMax = currentSeqMax;
    }
    var tile = tileSizeForScale(scale);
    var pos = Math.max(0, (knownStart / tile | 0) * tile);

    var origin = tier.browser.viewStart;

    var g = makeElementNS(NS_SVG, 'g', [], { fontSize: '8pt' });
    while (pos <= seqTierMax) {
        g.appendChild(makeElementNS(NS_SVG, 'rect', null, { x: (pos - origin) * scale,
            y: 8,
            width: tile * scale,
            height: 3,
            fill: pos / tile % 2 == 0 ? 'white' : 'black',
            stroke: 'black' }));

        g.appendChild(makeElementNS(NS_SVG, 'text', formatLongInt(pos), { x: (pos - origin) * scale,
            y: 28,
            fill: 'black', stroke: 'none' }));

        pos += tile;
    }

    if (seq && seq.seq) {
        for (var p = knownStart; p <= knownEnd; ++p) {
            if (p >= seq.start && p <= seq.end) {
                var base = seq.seq.substr(p - seq.start, 1).toUpperCase();
                var color = tier.browser.baseColors[base];
                if (!color) {
                    color = 'gray';
                }

                if (scale >= 8) {
                    g.appendChild(makeElementNS(NS_SVG, 'text', base, {
                        x: (0.5 + p - origin) * scale,
                        y: 52,
                        textAnchor: 'middle',
                        fill: color }));
                } else {
                    g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
                        x: (p - origin) * scale,
                        y: 42,
                        width: scale,
                        height: 12,
                        fill: color }));
                }
            }
        }
    }

    return g;
}

if (typeof module !== 'undefined') {
    module.exports = {
        drawSeqTier: drawSeqTier,
        drawSeqTierGC: drawSeqTierGC,
        svgSeqTier: svgSeqTier
    };
}

},{"./numformats":29,"./svg-utils":44,"./utils":55}],36:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// session.js
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require != 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var sc = require('./sourcecompare');
    var sourceDataURI = sc.sourceDataURI;
    var sourcesAreEqual = sc.sourcesAreEqual;

    var VERSION = require('./version');

    var utils = require('./utils');
    var miniJSONify = utils.miniJSONify;

    var sha1 = require('./sha1');
    var hex_sha1 = sha1.hex_sha1;
}

Browser.prototype.nukeStatus = function () {
    delete localStorage['dalliance.' + this.cookieKey + '.view-chr'];
    delete localStorage['dalliance.' + this.cookieKey + '.view-start'];
    delete localStorage['dalliance.' + this.cookieKey + '.view-end'];
    delete localStorage['dalliance.' + this.cookieKey + '.current-seq-length'];
    delete localStorage['dalliance.' + this.cookieKey + '.showing-alt-zoom'];
    delete localStorage['dalliance.' + this.cookieKey + '.saved-zoom'];

    delete localStorage['dalliance.' + this.cookieKey + '.sources'];
    delete localStorage['dalliance.' + this.cookieKey + '.hubs'];
    delete localStorage['dalliance.' + this.cookieKey + '.version'];

    delete localStorage['dalliance.' + this.cookieKey + '.reverse-scrolling'];
    delete localStorage['dalliance.' + this.cookieKey + '.reverse-key-scrolling'];
    delete localStorage['dalliance.' + this.cookieKey + '.ruler-location'];
};

Browser.prototype.storeStatus = function () {
    this.storeViewStatus();
    this.storeTierStatus();
};

Browser.prototype.storeViewStatus = function () {
    if (!this.cookieKey || this.noPersist || this.noPersistView) {
        return;
    }

    localStorage['dalliance.' + this.cookieKey + '.view-chr'] = this.chr;
    localStorage['dalliance.' + this.cookieKey + '.view-start'] = this.viewStart | 0;
    localStorage['dalliance.' + this.cookieKey + '.view-end'] = this.viewEnd | 0;
    localStorage['dalliance.' + this.cookieKey + '.showing-alt-zoom'] = '' + this.isSnapZooming;
    localStorage['dalliance.' + this.cookieKey + '.saved-zoom'] = this.savedZoom;
    if (this.currentSeqMax) {
        localStorage['dalliance.' + this.cookieKey + '.current-seq-length'] = this.currentSeqMax;
    }
};

Browser.prototype.storeTierStatus = function () {
    if (!this.cookieKey || this.noPersist) {
        return;
    }

    var currentSourceList = [];
    for (var t = 0; t < this.tiers.length; ++t) {
        var tt = this.tiers[t];
        var ts = tt.dasSource;
        if (!ts.noPersist) {
            currentSourceList.push({ source: tt.dasSource, config: tt.config || {} });
        }
    }
    localStorage['dalliance.' + this.cookieKey + '.sources'] = JSON.stringify(currentSourceList);

    var coveredHubURLs = {};
    var currentHubList = [];
    for (var hi = 0; hi < this.hubObjects.length; ++hi) {
        var tdb = this.hubObjects[hi];
        var hc = { url: tdb.hub.url, genome: tdb.genome };
        if (tdb.credentials) hc.credentials = tdb.credentials;
        if (tdb.mapping) hc.mapping = tdb.mapping;
        coveredHubURLs[hc.url] = true;
        currentHubList.push(hc);
    }

    // Needed to handle hubs that failed to connect, or hubs that haven't
    // connected yet when we're called soon after startup.
    for (var hi = 0; hi < this.hubs.length; ++hi) {
        var hc = this.hubs[hi];
        if (typeof hc === 'string') hc = { url: hc };
        if (!coveredHubURLs[hc.url]) currentHubList.push(hc);
    }

    localStorage['dalliance.' + this.cookieKey + '.hubs'] = JSON.stringify(currentHubList);

    localStorage['dalliance.' + this.cookieKey + '.reverse-scrolling'] = this.reverseScrolling;
    localStorage['dalliance.' + this.cookieKey + '.reverse-key-scrolling'] = this.reverseKeyScrolling;
    localStorage['dalliance.' + this.cookieKey + '.single-base-highlight'] = this.singleBaseHighlight;
    localStorage['dalliance.' + this.cookieKey + '.ruler-location'] = this.rulerLocation;

    localStorage['dalliance.' + this.cookieKey + '.export-ruler'] = this.exportRuler;
    localStorage['dalliance.' + this.cookieKey + '.export-highlights'] = this.exportHighlights;

    localStorage['dalliance.' + this.cookieKey + '.version'] = VERSION.CONFIG;
};

Browser.prototype.restoreStatus = function () {
    if (this.noPersist) return;

    var storedConfigVersion = localStorage['dalliance.' + this.cookieKey + '.version'];
    if (storedConfigVersion) {
        storedConfigVersion = storedConfigVersion | 0;
    } else {
        storedConfigVersion = -100;
    }
    if (VERSION.CONFIG != storedConfigVersion) {
        return;
    }

    var storedConfigHash = localStorage['dalliance.' + this.cookieKey + '.configHash'] || '';
    var pageConfigHash = hex_sha1(miniJSONify({
        sources: this.sources,
        hubs: this.hubs,
        rulerLocation: this.rulerLocation
    }));
    if (pageConfigHash != storedConfigHash) {
        localStorage['dalliance.' + this.cookieKey + '.configHash'] = pageConfigHash;
        return;
    }

    var defaultSourcesByURI = {};
    for (var si = 0; si < this.sources.length; ++si) {
        var source = this.sources[si];
        if (!source) continue;

        var uri = sourceDataURI(source);
        var ul = defaultSourcesByURI[uri];
        if (!ul) defaultSourcesByURI[uri] = ul = [];
        ul.push(source);
    }

    if (!this.noPersistView) {
        var qChr = localStorage['dalliance.' + this.cookieKey + '.view-chr'];
        var qMin = localStorage['dalliance.' + this.cookieKey + '.view-start'] | 0;
        var qMax = localStorage['dalliance.' + this.cookieKey + '.view-end'] | 0;
        if (qChr && qMin && qMax) {
            this.chr = qChr;
            this.viewStart = qMin;
            this.viewEnd = qMax;

            var csm = localStorage['dalliance.' + this.cookieKey + '.current-seq-length'];
            if (csm) {
                this.currentSeqMax = csm | 0;
            }

            this.isSnapZooming = localStorage['dalliance.' + this.cookieKey + '.showing-alt-zoom'] == 'true';

            var sz = parseFloat(localStorage['dalliance.' + this.cookieKey + '.saved-zoom']);
            if (typeof sz === 'number' && !isNaN(sz)) {
                this.savedZoom = sz;
            }
        }
    }

    var rs = localStorage['dalliance.' + this.cookieKey + '.reverse-scrolling'];
    this.reverseScrolling = rs && rs == 'true';
    var rks = localStorage['dalliance.' + this.cookieKey + '.reverse-key-scrolling'];
    this.reverseKeyScrolling = rks && rks == 'true';
    var sbh = localStorage['dalliance.' + this.cookieKey + '.single-base-highlight'];
    this.singleBaseHighlight = sbh && sbh == 'true';

    var rl = localStorage['dalliance.' + this.cookieKey + '.ruler-location'];
    if (rl) this.rulerLocation = rl;

    var x = localStorage['dalliance.' + this.cookieKey + '.export-ruler'];
    if (x) this.exportRuler = x === 'true';
    var x = localStorage['dalliance.' + this.cookieKey + '.export-highlights'];
    if (x) this.exportHighlights = x === 'true';

    var sourceStr = localStorage['dalliance.' + this.cookieKey + '.sources'];
    if (sourceStr) {
        var storedSources = JSON.parse(sourceStr);
        this.sources = [];
        this.restoredConfigs = [];
        for (var si = 0; si < storedSources.length; ++si) {
            var source = this.sources[si] = storedSources[si].source;
            this.restoredConfigs[si] = storedSources[si].config;
            var uri = sourceDataURI(source);
            var ul = defaultSourcesByURI[uri] || [];
            for (var osi = 0; osi < ul.length; ++osi) {
                var oldSource = ul[osi];
                if (sourcesAreEqual(source, oldSource)) {
                    for (var k in oldSource) {
                        if (oldSource.hasOwnProperty(k) && (typeof oldSource[k] === 'function' || oldSource[k] instanceof Blob)) {
                            source[k] = oldSource[k];
                        }
                    }

                    if (_typeof(oldSource.renderer) === 'object' && oldSource.renderer.renderTier) {
                        source.renderer = oldSource.renderer;
                    }
                }
            }
        }
    }

    var hubStr = localStorage['dalliance.' + this.cookieKey + '.hubs'];
    if (hubStr) {
        this.hubs = JSON.parse(hubStr);
    }

    return true;
};

Browser.prototype.reset = function () {
    for (var i = this.tiers.length - 1; i >= 0; --i) {
        this.removeTier({ index: i }, true);
    }
    for (var i = 0; i < this.defaultSources.length; ++i) {
        var s = this.defaultSources[i];
        if (!s.disabled) this.addTier(this.defaultSources[i]);
    }

    this.highlights.splice(0, this.highlights.length);

    this.setLocation(this.defaultChr, this.defaultStart, this.defaultEnd);
};

},{"./cbrowser":6,"./sha1":37,"./sourcecompare":39,"./utils":55,"./version":57}],37:[function(require,module,exports){
/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
 * in FIPS 180-1
 * Version 2.2 Copyright Paul Johnston 2000 - 2009.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 */

"use strict";

/*
 * Configurable variables. You may need to tweak these to be compatible with
 * the server-side, but the defaults work in most cases.
 */

var hexcase = 0; /* hex output format. 0 - lowercase; 1 - uppercase        */
var b64pad = ""; /* base-64 pad character. "=" for strict RFC compliance   */

/*
 * These are the functions you'll usually want to call
 * They take string arguments and return either hex or base-64 encoded strings
 */
function hex_sha1(s) {
  return rstr2hex(rstr_sha1(str2rstr_utf8(s)));
}
function b64_sha1(s) {
  return rstr2b64(rstr_sha1(str2rstr_utf8(s)));
}
function any_sha1(s, e) {
  return rstr2any(rstr_sha1(str2rstr_utf8(s)), e);
}
function hex_hmac_sha1(k, d) {
  return rstr2hex(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)));
}
function b64_hmac_sha1(k, d) {
  return rstr2b64(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)));
}
function any_hmac_sha1(k, d, e) {
  return rstr2any(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)), e);
}

/*
 * Perform a simple self-test to see if the VM is working
 */
function sha1_vm_test() {
  return hex_sha1("abc").toLowerCase() == "a9993e364706816aba3e25717850c26c9cd0d89d";
}

/*
 * Calculate the SHA1 of a raw string
 */
function rstr_sha1(s) {
  return binb2rstr(binb_sha1(rstr2binb(s), s.length * 8));
}

/*
 * Calculate the HMAC-SHA1 of a key and some data (raw strings)
 */
function rstr_hmac_sha1(key, data) {
  var bkey = rstr2binb(key);
  if (bkey.length > 16) bkey = binb_sha1(bkey, key.length * 8);

  var ipad = Array(16),
      opad = Array(16);
  for (var i = 0; i < 16; i++) {
    ipad[i] = bkey[i] ^ 0x36363636;
    opad[i] = bkey[i] ^ 0x5C5C5C5C;
  }

  var hash = binb_sha1(ipad.concat(rstr2binb(data)), 512 + data.length * 8);
  return binb2rstr(binb_sha1(opad.concat(hash), 512 + 160));
}

/*
 * Convert a raw string to a hex string
 */
function rstr2hex(input) {
  // try { hexcase } catch(e) { hexcase=0; }
  var hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
  var output = "";
  var x;
  for (var i = 0; i < input.length; i++) {
    x = input.charCodeAt(i);
    output += hex_tab.charAt(x >>> 4 & 0x0F) + hex_tab.charAt(x & 0x0F);
  }
  return output;
}

/*
 * Convert a raw string to a base-64 string
 */
function rstr2b64(input) {
  // try { b64pad } catch(e) { b64pad=''; }
  var tab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  var output = "";
  var len = input.length;
  for (var i = 0; i < len; i += 3) {
    var triplet = input.charCodeAt(i) << 16 | (i + 1 < len ? input.charCodeAt(i + 1) << 8 : 0) | (i + 2 < len ? input.charCodeAt(i + 2) : 0);
    for (var j = 0; j < 4; j++) {
      if (i * 8 + j * 6 > input.length * 8) output += b64pad;else output += tab.charAt(triplet >>> 6 * (3 - j) & 0x3F);
    }
  }
  return output;
}

/*
 * Convert a raw string to an arbitrary string encoding
 */
function rstr2any(input, encoding) {
  var divisor = encoding.length;
  var remainders = Array();
  var i, q, x, quotient;

  /* Convert to an array of 16-bit big-endian values, forming the dividend */
  var dividend = Array(Math.ceil(input.length / 2));
  for (i = 0; i < dividend.length; i++) {
    dividend[i] = input.charCodeAt(i * 2) << 8 | input.charCodeAt(i * 2 + 1);
  }

  /*
   * Repeatedly perform a long division. The binary array forms the dividend,
   * the length of the encoding is the divisor. Once computed, the quotient
   * forms the dividend for the next step. We stop when the dividend is zero.
   * All remainders are stored for later use.
   */
  while (dividend.length > 0) {
    quotient = Array();
    x = 0;
    for (i = 0; i < dividend.length; i++) {
      x = (x << 16) + dividend[i];
      q = Math.floor(x / divisor);
      x -= q * divisor;
      if (quotient.length > 0 || q > 0) quotient[quotient.length] = q;
    }
    remainders[remainders.length] = x;
    dividend = quotient;
  }

  /* Convert the remainders to the output string */
  var output = "";
  for (i = remainders.length - 1; i >= 0; i--) {
    output += encoding.charAt(remainders[i]);
  } /* Append leading zero equivalents */
  var full_length = Math.ceil(input.length * 8 / (Math.log(encoding.length) / Math.log(2)));
  for (i = output.length; i < full_length; i++) {
    output = encoding[0] + output;
  }return output;
}

/*
 * Encode a string as utf-8.
 * For efficiency, this assumes the input is valid utf-16.
 */
function str2rstr_utf8(input) {
  var output = "";
  var i = -1;
  var x, y;

  while (++i < input.length) {
    /* Decode utf-16 surrogate pairs */
    x = input.charCodeAt(i);
    y = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;
    if (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {
      x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);
      i++;
    }

    /* Encode output as utf-8 */
    if (x <= 0x7F) output += String.fromCharCode(x);else if (x <= 0x7FF) output += String.fromCharCode(0xC0 | x >>> 6 & 0x1F, 0x80 | x & 0x3F);else if (x <= 0xFFFF) output += String.fromCharCode(0xE0 | x >>> 12 & 0x0F, 0x80 | x >>> 6 & 0x3F, 0x80 | x & 0x3F);else if (x <= 0x1FFFFF) output += String.fromCharCode(0xF0 | x >>> 18 & 0x07, 0x80 | x >>> 12 & 0x3F, 0x80 | x >>> 6 & 0x3F, 0x80 | x & 0x3F);
  }
  return output;
}

/*
 * Encode a string as utf-16
 */
function str2rstr_utf16le(input) {
  var output = "";
  for (var i = 0; i < input.length; i++) {
    output += String.fromCharCode(input.charCodeAt(i) & 0xFF, input.charCodeAt(i) >>> 8 & 0xFF);
  }return output;
}

function str2rstr_utf16be(input) {
  var output = "";
  for (var i = 0; i < input.length; i++) {
    output += String.fromCharCode(input.charCodeAt(i) >>> 8 & 0xFF, input.charCodeAt(i) & 0xFF);
  }return output;
}

/*
 * Convert a raw string to an array of big-endian words
 * Characters >255 have their high-byte silently ignored.
 */
function rstr2binb(input) {
  var output = Array(input.length >> 2);
  for (var i = 0; i < output.length; i++) {
    output[i] = 0;
  }for (var i = 0; i < input.length * 8; i += 8) {
    output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << 24 - i % 32;
  }return output;
}

/*
 * Convert an array of big-endian words to a string
 */
function binb2rstr(input) {
  var output = "";
  for (var i = 0; i < input.length * 32; i += 8) {
    output += String.fromCharCode(input[i >> 5] >>> 24 - i % 32 & 0xFF);
  }return output;
}

/*
 * Calculate the SHA-1 of an array of big-endian words, and a bit length
 */
function binb_sha1(x, len) {
  /* append padding */
  x[len >> 5] |= 0x80 << 24 - len % 32;
  x[(len + 64 >> 9 << 4) + 15] = len;

  var w = Array(80);
  var a = 1732584193;
  var b = -271733879;
  var c = -1732584194;
  var d = 271733878;
  var e = -1009589776;

  for (var i = 0; i < x.length; i += 16) {
    var olda = a;
    var oldb = b;
    var oldc = c;
    var oldd = d;
    var olde = e;

    for (var j = 0; j < 80; j++) {
      if (j < 16) w[j] = x[i + j];else w[j] = bit_rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);
      var t = safe_add(safe_add(bit_rol(a, 5), sha1_ft(j, b, c, d)), safe_add(safe_add(e, w[j]), sha1_kt(j)));
      e = d;
      d = c;
      c = bit_rol(b, 30);
      b = a;
      a = t;
    }

    a = safe_add(a, olda);
    b = safe_add(b, oldb);
    c = safe_add(c, oldc);
    d = safe_add(d, oldd);
    e = safe_add(e, olde);
  }
  return Array(a, b, c, d, e);
}

/*
 * Perform the appropriate triplet combination function for the current
 * iteration
 */
function sha1_ft(t, b, c, d) {
  if (t < 20) return b & c | ~b & d;
  if (t < 40) return b ^ c ^ d;
  if (t < 60) return b & c | b & d | c & d;
  return b ^ c ^ d;
}

/*
 * Determine the appropriate additive constant for the current iteration
 */
function sha1_kt(t) {
  return t < 20 ? 1518500249 : t < 40 ? 1859775393 : t < 60 ? -1894007588 : -899497514;
}

/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */
function safe_add(x, y) {
  var lsw = (x & 0xFFFF) + (y & 0xFFFF);
  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 0xFFFF;
}

/*
 * Bitwise rotate a 32-bit number to the left.
 */
function bit_rol(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}

if (typeof module !== 'undefined') {
  module.exports = {
    b64_sha1: b64_sha1,
    hex_sha1: hex_sha1
  };
}

},{}],38:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// sourceadapters.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var tier = require('./tier');
    var DasTier = tier.DasTier;

    var utils = require('./utils');
    var Awaited = utils.Awaited;
    var arrayIndexOf = utils.arrayIndexOf;
    var shallowCopy = utils.shallowCopy;
    var resolveUrlToPage = utils.resolveUrlToPage;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASSource = das.DASSource;
    var DASSegment = das.DASSegment;
    var DASFeature = das.DASFeature;
    var DASSequence = das.DASSequence;
    var DASLink = das.DASLink;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;

    var twoBit = require('./twoBit');
    var makeTwoBit = twoBit.makeTwoBit;

    var bbi = require('./bigwig');
    var makeBwg = bbi.makeBwg;

    var bam = require('./bam');
    var makeBam = bam.makeBam;
    var BamFlags = bam.BamFlags;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;

    var parseCigar = require('./cigar').parseCigar;

    var OverlayFeatureSource = require('./overlay').OverlayFeatureSource;

    var JBrowseStore = require('./jbjson').JBrowseStore;

    var Chainset = require('./chainset').Chainset;

    var style = require('./style');
    var StyleFilterSet = style.StyleFilterSet;

    var EncodeFetchable = require('./encode').EncodeFetchable;
}

var __dalliance_sourceAdapterFactories = {};

function dalliance_registerSourceAdapterFactory(type, factory) {
    __dalliance_sourceAdapterFactories[type] = factory;
}

var __dalliance_parserFactories = {};

function dalliance_registerParserFactory(type, factory) {
    __dalliance_parserFactories[type] = factory;
}

function dalliance_makeParser(type) {
    if (__dalliance_parserFactories[type]) {
        return __dalliance_parserFactories[type](type);
    }
}

DasTier.prototype.initSources = function () {
    var thisTier = this;

    var sources = this.browser.createSources(this.dasSource);
    this.featureSource = sources.features || new DummyFeatureSource();
    this.sequenceSource = sources.sequence;

    if (this.featureSource && this.featureSource.addChangeListener) {
        this.featureSource.addChangeListener(function () {
            thisTier.browser.refreshTier(thisTier);
        });
    }
};

Browser.prototype.createSources = function (config) {
    var sources = this.sourceCache.get(config);
    if (sources) return sources;

    var fs, ss;

    if (config.tier_type == 'sequence' || config.twoBitURI || config.twoBitBlob) {
        if (config.twoBitURI || config.twoBitBlob) {
            ss = new TwoBitSequenceSource(config);
        } else if (config.ensemblURI) {
            ss = new EnsemblSequenceSource(config);
        } else {
            ss = new DASSequenceSource(config);
        }
    } else if (config.tier_type && __dalliance_sourceAdapterFactories[config.tier_type]) {
        var saf = __dalliance_sourceAdapterFactories[config.tier_type];
        var ns = saf(config);
        fs = ns.features;
        ss = ns.sequence;
    } else if (config.bwgURI || config.bwgBlob) {
        var worker = this.getWorker();
        if (worker) fs = new RemoteBWGFeatureSource(config, worker, this);else fs = new BWGFeatureSource(config);
    } else if (config.bamURI || config.bamBlob) {
        var worker = this.getWorker();
        if (worker) fs = new RemoteBAMFeatureSource(config, worker, this);else fs = new BAMFeatureSource(config);
    } else if (config.jbURI) {
        fs = new JBrowseFeatureSource(config);
    } else if (config.uri || config.features_uri) {
        fs = new DASFeatureSource(config);
    }

    if (config.overlay) {
        var sources = [];
        if (fs) sources.push(new CachingFeatureSource(fs));

        for (var oi = 0; oi < config.overlay.length; ++oi) {
            var cs = this.createSources(config.overlay[oi]);
            if (cs && cs.features) sources.push(cs.features);
        }
        fs = new OverlayFeatureSource(sources, config);
    }

    if (config.sequenceAliases) {
        fs = new MappedFeatureSource(fs, new Chainset({ type: 'alias', sequenceAliases: config.sequenceAliases }));
    }

    if (config.mapping) {
        fs = new MappedFeatureSource(fs, this.chains[config.mapping]);
    }

    if (config.name && fs && !fs.name) {
        fs.name = config.name;
    }

    if (typeof fs !== 'undefined' && fs !== null) {
        fs = new CachingFeatureSource(fs);
    }

    if (typeof fs !== 'undefined' && fs !== null || typeof ss !== 'undefined' && ss != null) {
        sources = {
            features: fs,
            sequence: ss
        };
        this.sourceCache.put(config, sources);
    }

    return sources;
};

DasTier.prototype.fetchStylesheet = function (cb) {
    var ssSource;
    // Somewhat ugly workaround for the special case of DAS sources...
    if (this.dasSource.stylesheet_uri || !this.dasSource.tier_type && !this.dasSource.bwgURI && !this.dasSource.bwgBlob && !this.dasSource.bamURI && !this.dasSource.bamBlob && !this.dasSource.twoBitURI && !this.dasSource.twoBitBlob && !this.dasSource.jbURI && !this.dasSource.overlay) {
        ssSource = new DASFeatureSource(this.dasSource);
    } else {
        ssSource = this.getSource();
    }
    ssSource.getStyleSheet(cb);
};

var __cfs_id_seed = 0;

function CachingFeatureSource(source) {
    var thisB = this;

    this.source = source;
    this.cfsid = 'cfs' + ++__cfs_id_seed;
    if (source.name) {
        this.name = source.name;
    }
    if (source.addChangeListener) {
        source.addChangeListener(function () {
            thisB.cfsid = 'cfs' + ++__cfs_id_seed;
        });
    }
}

CachingFeatureSource.prototype.addReadinessListener = function (listener) {
    if (this.source.addReadinessListener) return this.source.addReadinessListener(listener);else listener(null);
};

CachingFeatureSource.prototype.removeReadinessListener = function (listener) {
    if (this.source.removeReadinessListener) return this.source.removeReadinessListener(listener);
};

CachingFeatureSource.prototype.search = function (query, callback) {
    if (this.source.search) return this.source.search(query, callback);
};

CachingFeatureSource.prototype.getDefaultFIPs = function (callback, tier) {
    if (this.source.getDefaultFIPs) return this.source.getDefaultFIPs(callback, tier);
};

CachingFeatureSource.prototype.getStyleSheet = function (callback) {
    this.source.getStyleSheet(callback);
};

CachingFeatureSource.prototype.getScales = function () {
    return this.source.getScales();
};

CachingFeatureSource.prototype.addActivityListener = function (l) {
    if (this.source.addActivityListener) {
        this.source.addActivityListener(l);
    }
};

CachingFeatureSource.prototype.removeActivityListener = function (l) {
    if (this.source.removeActivityListener) {
        this.source.removeActivityListener(l);
    }
};

CachingFeatureSource.prototype.addChangeListener = function (l) {
    if (this.source.addChangeListener) this.source.addChangeListener(l);
};

CachingFeatureSource.prototype.removeChangeListener = function (l) {
    if (this.source.removeChangeListener) this.source.removeChangeListener(l);
};

CachingFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    this.source.findNextFeature(chr, pos, dir, callback);
};

CachingFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    this.source.quantFindNextFeature(chr, pos, dir, threshold, callback);
};

CachingFeatureSource.prototype.capabilities = function () {
    if (this.source.capabilities) {
        return this.source.capabilities();
    } else {
        return {};
    }
};

CachingFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback, styleFilters) {
    if (!pool) {
        throw Error('Fetch pool is null');
    }

    var self = this;
    var cacheKey = this.cfsid;

    var awaitedFeatures = pool.awaitedFeatures[cacheKey];
    if (awaitedFeatures && awaitedFeatures.started) {
        if (awaitedFeatures.styleFilters.doesNotContain(styleFilters)) {
            // console.log('Fetch already started with wrong parameters, skipping cache.');
            self.source.fetch(chr, min, max, scale, types, pool, callback, styleFilters);
            return;
        }
    } else if (awaitedFeatures) {
        awaitedFeatures.styleFilters.addAll(styleFilters);
    } else {
        awaitedFeatures = new Awaited();
        awaitedFeatures.styleFilters = styleFilters;
        pool.awaitedFeatures[cacheKey] = awaitedFeatures;

        pool.requestsIssued.then(function () {
            awaitedFeatures.started = true;
            self.source.fetch(chr, min, max, scale, awaitedFeatures.styleFilters.typeList(), pool, function (status, features, scale, coverage) {
                if (!awaitedFeatures.res) awaitedFeatures.provide({ status: status, features: features, scale: scale, coverage: coverage });
            }, awaitedFeatures.styleFilters);
        }).catch(function (err) {
            console.log(err);
        });
    }

    awaitedFeatures.await(function (af) {
        callback(af.status, af.features, af.scale, af.coverage);
    });
};

function FeatureSourceBase() {
    this.busy = 0;
    this.activityListeners = [];
    this.readinessListeners = [];
    this.readiness = null;
}

FeatureSourceBase.prototype.addReadinessListener = function (listener) {
    this.readinessListeners.push(listener);
    listener(this.readiness);
};

FeatureSourceBase.prototype.removeReadinessListener = function (listener) {
    var idx = arrayIndexOf(this.readinessListeners, listener);
    if (idx >= 0) {
        this.readinessListeners.splice(idx, 1);
    }
};

FeatureSourceBase.prototype.notifyReadiness = function () {
    for (var li = 0; li < this.readinessListeners.length; ++li) {
        try {
            this.readinessListeners[li](this.readiness);
        } catch (e) {
            console.log(e);
        }
    }
};

FeatureSourceBase.prototype.addActivityListener = function (listener) {
    this.activityListeners.push(listener);
};

FeatureSourceBase.prototype.removeActivityListener = function (listener) {
    var idx = arrayIndexOf(this.activityListeners, listener);
    if (idx >= 0) {
        this.activityListeners.splice(idx, 1);
    }
};

FeatureSourceBase.prototype.notifyActivity = function () {
    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

FeatureSourceBase.prototype.getScales = function () {
    return null;
};

FeatureSourceBase.prototype.fetch = function (chr, min, max, scale, types, pool, cnt) {
    return cnt(null, [], 1000000000);
};

FeatureSourceBase.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();
    var defStyle = new DASStyle();
    defStyle.glyph = 'BOX';
    defStyle.BGCOLOR = 'blue';
    defStyle.FGCOLOR = 'black';
    stylesheet.pushStyle({ type: 'default' }, null, defStyle);
    return callback(stylesheet);
};

function DASFeatureSource(dasSource) {
    this.dasSource = new DASSource(dasSource);
    this.busy = 0;
    this.activityListeners = [];
}

DASFeatureSource.prototype.addActivityListener = function (listener) {
    this.activityListeners.push(listener);
};

DASFeatureSource.prototype.removeActivityListener = function (listener) {
    var idx = arrayIndexOf(this.activityListeners, listener);
    if (idx >= 0) this.activityListeners.splice(idx, 1);
};

DASFeatureSource.prototype.notifyActivity = function () {
    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

DASFeatureSource.prototype.getStyleSheet = function (callback) {
    this.dasSource.stylesheet(function (stylesheet) {
        callback(stylesheet);
    }, function () {
        callback(null, "Couldn't fetch DAS stylesheet");
    });
};

DASFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    if (types && types.length === 0) {
        callback(null, [], scale);
        return;
    }

    if (!this.dasSource.uri && !this.dasSource.features_uri) {
        // FIXME should this be making an error callback???
        return;
    }

    if (this.dasSource.dasStaticFeatures && this.cachedStaticFeatures) {
        return callback(null, this.cachedStaticFeatures, this.cachedStaticScale);
    }

    var tryMaxBins = this.dasSource.maxbins !== false;
    var fops = {
        type: types
    };
    if (tryMaxBins) {
        fops.maxbins = 1 + ((max - min) / scale | 0);
    }

    var thisB = this;
    thisB.busy++;
    thisB.notifyActivity();

    this.dasSource.features(new DASSegment(chr, min, max), fops, function (features, status) {

        thisB.busy--;
        thisB.notifyActivity();

        var retScale = scale;
        if (!tryMaxBins) {
            retScale = 0.1;
        }
        if (!status && thisB.dasSource.dasStaticFeatures) {
            thisB.cachedStaticFeatures = features;
            thisB.cachedStaticScale = retScale;
        }
        callback(status, features, retScale);
    });
};

DASFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    if (this.dasSource.capabilities && arrayIndexOf(this.dasSource.capabilities, 'das1:adjacent-feature') >= 0) {
        var thisB = this;
        if (this.dasAdjLock) {
            return console.log('Already looking for a next feature, be patient!');
        }
        this.dasAdjLock = true;
        var fops = {
            adjacent: chr + ':' + (pos | 0) + ':' + (dir > 0 ? 'F' : 'B')
        };
        var types = thisTier.getDesiredTypes(thisTier.browser.scale);
        if (types) {
            fops.types = types;
        }
        thisTier.dasSource.features(null, fops, function (res) {
            thisB.dasAdjLock = false;
            if (res.length > 0 && res[0] !== null) {
                callback(res[0]);
            }
        });
    }
};

function DASSequenceSource(dasSource) {
    this.dasSource = new DASSource(dasSource);
    this.awaitedEntryPoints = new Awaited();

    var thisB = this;
    this.dasSource.entryPoints(function (ep) {
        thisB.awaitedEntryPoints.provide(ep);
    });
}

DASSequenceSource.prototype.fetch = function (chr, min, max, pool, callback) {
    this.dasSource.sequence(new DASSegment(chr, min, max), function (seqs) {
        if (seqs.length == 1) {
            return callback(null, seqs[0]);
        } else {
            return callback("Didn't get sequence");
        }
    });
};

DASSequenceSource.prototype.getSeqInfo = function (chr, cnt) {
    this.awaitedEntryPoints.await(function (ep) {
        for (var epi = 0; epi < ep.length; ++epi) {
            if (ep[epi].name == chr) {
                return cnt({ length: ep[epi].end });
            }
        }
        return cnt();
    });
};

function TwoBitSequenceSource(source) {
    var thisB = this;
    this.source = source;
    this.twoBit = new Awaited();
    var data;
    if (source.twoBitURI) {
        data = new URLFetchable(source.twoBitURI, { credentials: source.credentials, resolver: source.resolver });
    } else if (source.twoBitBlob) {
        data = new BlobFetchable(source.twoBitBlob);
    } else {
        throw Error("No twoBitURI or twoBitBlob parameter");
    }

    makeTwoBit(data, function (tb, error) {
        if (error) {
            console.log(error);
        } else {
            thisB.twoBit.provide(tb);
        }
    });
}

TwoBitSequenceSource.prototype.fetch = function (chr, min, max, pool, callback) {
    this.twoBit.await(function (tb) {
        tb.fetch(chr, min, max, function (seq, err) {
            if (err) {
                return callback(err, null);
            } else {
                var sequence = new DASSequence(chr, min, max, 'DNA', seq);
                return callback(null, sequence);
            }
        });
    });
};

TwoBitSequenceSource.prototype.getSeqInfo = function (chr, cnt) {
    this.twoBit.await(function (tb) {
        var seq = tb.getSeq(chr);
        if (seq) {
            tb.getSeq(chr).length(function (l) {
                cnt({ length: l });
            });
        } else {
            cnt();
        }
    });
};

function EnsemblSequenceSource(source) {
    this.source = source;
    // http://data.gramene.org/ensembl/info/assembly/triticum_aestivum/2B?content-type=application/json
    // http://data.gramene.org/ensembl/sequence/region/triticum_aestivum/2B:8001..18000:1?content-type=application/json
}

EnsemblSequenceSource.prototype.fetch = function (chr, min, max, pool, callback) {
    var url = this.source.ensemblURI + '/sequence/region/' + this.source.species + '/' + chr + ':' + min + '..' + max + ':1?content-type=application/json';
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            var jr;
            if (req.status >= 300) {
                var err = 'Error code ' + req.status;
                try {
                    jr = JSON.parse(req.response);
                    if (jr.error) {
                        err = jr.error;
                    }
                } finally {
                    callback(err, null);
                }
            } else {
                jr = JSON.parse(req.response);
                var sequence = new DASSequence(chr, min, max, 'DNA', jr.seq);
                return callback(null, sequence);
            }
        }
    };
    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

EnsemblSequenceSource.prototype.getSeqInfo = function (chr, cnt) {
    var url = this.source.ensemblURI + '/info/assembly/' + this.source.species + '/' + chr + '?content-type=application/json';
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            if (req.status >= 300) {
                cnt();
            } else {
                var jr = JSON.parse(req.response);
                cnt(jr);
            }
        }
    };
    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

DASFeatureSource.prototype.getScales = function () {
    return [];
};

var bwg_preflights = {};

function BWGFeatureSource(bwgSource) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.readiness = 'Connecting';
    this.bwgSource = this.opts = bwgSource;
    thisB.bwgHolder = new Awaited();

    if (this.opts.preflight) {
        var pfs = bwg_preflights[this.opts.preflight];
        if (!pfs) {
            pfs = new Awaited();
            bwg_preflights[this.opts.preflight] = pfs;

            var req = new XMLHttpRequest();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (req.status == 200) {
                        pfs.provide('success');
                    } else {
                        pfs.provide('failure');
                    }
                }
            };
            req.open('get', this.opts.preflight + '?' + hex_sha1('salt' + Date.now()), true); // Instead, ensure we always preflight a unique URI.
            if (this.opts.credentials) {
                req.withCredentials = true;
            }
            req.send();
        }
        pfs.await(function (status) {
            if (status === 'success') {
                thisB.init();
            }
        });
    } else {
        thisB.init();
    }
}

BWGFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

BWGFeatureSource.prototype.init = function () {
    var thisB = this;
    var arg;

    var uri = this.bwgSource.uri || this.bwgSource.bwgURI;
    if (uri) {
        if (this.bwgSource.transport === 'encode') {
            arg = new EncodeFetchable(uri, { credentials: this.opts.credentials });
        } else {
            arg = new URLFetchable(uri, { credentials: this.opts.credentials, resolver: this.opts.resolver });
        }
    } else {
        arg = new BlobFetchable(this.bwgSource.bwgBlob);
    }

    makeBwg(arg, function (bwg, err) {
        if (err) {
            thisB.error = err;
            thisB.readiness = null;
            thisB.notifyReadiness();
            thisB.bwgHolder.provide(null);
        } else {
            thisB.bwgHolder.provide(bwg);
            thisB.readiness = null;
            thisB.notifyReadiness();
            if (bwg.type == 'bigbed') {
                bwg.getExtraIndices(function (ei) {
                    thisB.extraIndices = ei;
                });
            }
        }
    });
};

BWGFeatureSource.prototype.capabilities = function () {
    var caps = { leap: true };
    if (this.bwgHolder.res && this.bwgHolder.res.type == 'bigwig') caps.quantLeap = true;
    if (this.extraIndices && this.extraIndices.length > 0) {
        caps.search = [];
        for (var eii = 0; eii < this.extraIndices.length; ++eii) {
            caps.search.push(this.extraIndices[eii].field);
        }
    }
    return caps;
};

BWGFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;
    this.bwgHolder.await(function (bwg) {
        if (typeof bwg === 'undefined' || bwg === null) {
            return callback(thisB.error || "Can't access binary file", null, null);
        }

        var data;
        var wantDensity = !types || types.length === 0 || arrayIndexOf(types, 'density') >= 0;
        if (thisB.opts.clientBin) {
            wantDensity = false;
        }
        var scaleFactor = thisB.opts.scaleFactor || 1.0;
        if (bwg.type == 'bigwig' || wantDensity || typeof thisB.opts.forceReduction !== 'undefined') {
            var zoom = -1;
            for (var z = 0; z < bwg.zoomLevels.length; ++z) {
                if (bwg.zoomLevels[z].reduction <= scale * scaleFactor) {
                    zoom = z;
                } else {
                    break;
                }
            }
            if (typeof thisB.opts.forceReduction !== 'undefined') {
                zoom = thisB.opts.forceReduction;
            }

            if (zoom < 0) {
                data = bwg.getUnzoomedView();
            } else {
                data = bwg.getZoomedView(zoom);
            }
        } else {
            data = bwg.getUnzoomedView();
        }

        thisB.busy++;
        thisB.notifyActivity();
        data.readWigData(chr, min, max, function (features) {
            thisB.busy--;
            thisB.notifyActivity();

            var fs = 1000000000;
            if (bwg.type === 'bigwig') {
                var is = (max - min) / features.length / 2;
                if (is < fs) {
                    fs = is;
                }
            }
            if (thisB.opts.link) {
                for (var fi = 0; fi < features.length; ++fi) {
                    var f = features[fi];
                    if (f.label) {
                        f.links = [new DASLink('Link', thisB.opts.link.replace(/\$\$/, f.label))];
                    }
                }
            }
            callback(null, features, fs);
        });
    });
};

BWGFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    // var beforeQFNF = Date.now()|0;
    var thisB = this;
    thisB.busy++;
    thisB.notifyActivity();
    this.bwgHolder.res.thresholdSearch(chr, pos, dir, threshold, function (a, b) {
        thisB.busy--;
        thisB.notifyActivity();
        // var afterQFNF = Date.now()|0;
        // console.log('QFNF took ' + (afterQFNF - beforeQFNF) + 'ms');
        return callback(a, b);
    });
};

BWGFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    var thisB = this;
    thisB.busy++;
    thisB.notifyActivity();
    this.bwgHolder.res.getUnzoomedView().getFirstAdjacent(chr, pos, dir, function (res) {
        thisB.busy--;
        thisB.notifyActivity();
        if (res.length > 0 && res[0] !== null) {
            callback(res[0]);
        }
    });
};

BWGFeatureSource.prototype.getScales = function () {
    var bwg = this.bwgHolder.res;
    if (bwg /* && bwg.type == 'bigwig' */) {
            var scales = [1]; // Can we be smarter about inferring baseline scale?
            for (var z = 0; z < bwg.zoomLevels.length; ++z) {
                scales.push(bwg.zoomLevels[z].reduction);
            }
            return scales;
        } else {
        return null;
    }
};

BWGFeatureSource.prototype.search = function (query, callback) {
    if (!this.extraIndices || this.extraIndices.length === 0) {
        return callback(null, 'No indices available');
    }

    var index = this.extraIndices[0];
    return index.lookup(query, callback);
};

BWGFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.opts.noExtraFeatureInfo) return true;

    this.bwgHolder.await(function (bwg) {
        if (!bwg) return;

        if (bwg.schema && bwg.definedFieldCount < bwg.schema.fields.length) {
            var fip = function fip(feature, featureInfo) {
                for (var hi = 0; hi < featureInfo.hit.length; ++hi) {
                    if (featureInfo.hit[hi].isSuperGroup) return;
                }
                for (var fi = bwg.definedFieldCount; fi < bwg.schema.fields.length; ++fi) {
                    var f = bwg.schema.fields[fi];
                    featureInfo.add(f.comment, feature[f.name]);
                }
            };

            callback(fip);
        } else {
            // No need to do anything.
        }
    });
};

BWGFeatureSource.prototype.getStyleSheet = function (callback) {
    var thisB = this;

    this.bwgHolder.await(function (bwg) {
        if (!bwg) {
            return callback(null, 'bbi error');
        }

        var stylesheet = new DASStylesheet();
        if (bwg.type == 'bigbed') {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'blue';
            wigStyle.HEIGHT = 8;
            wigStyle.BUMP = true;
            wigStyle.LABEL = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'bigbed' }, null, wigStyle);

            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'red';
            wigStyle.HEIGHT = 10;
            wigStyle.BUMP = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'translation' }, null, wigStyle);

            var tsStyle = new DASStyle();
            tsStyle.glyph = 'BOX';
            tsStyle.FGCOLOR = 'black';
            tsStyle.BGCOLOR = 'white';
            tsStyle.HEIGHT = 10;
            tsStyle.ZINDEX = 10;
            tsStyle.BUMP = true;
            tsStyle.LABEL = true;
            stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

            var densStyle = new DASStyle();
            densStyle.glyph = 'HISTOGRAM';
            densStyle.COLOR1 = 'white';
            densStyle.COLOR2 = 'black';
            densStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'density' }, null, densStyle);
        } else {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'HISTOGRAM';
            wigStyle.COLOR1 = 'white';
            wigStyle.COLOR2 = 'black';
            wigStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
        }

        if (bwg.definedFieldCount == 12 && bwg.fieldCount >= 14) {
            stylesheet.geneHint = true;
        }

        return callback(stylesheet);
    });
};

function RemoteBWGFeatureSource(bwgSource, worker, browser) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.worker = worker;
    this.readiness = 'Connecting';
    this.bwgSource = this.opts = bwgSource;
    this.keyHolder = new Awaited();

    if (bwgSource.resolver) {
        this.resolverKey = browser.registerResolver(bwgSource.resolver);
    }

    this.init();
}

RemoteBWGFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

RemoteBWGFeatureSource.prototype.init = function () {
    var thisB = this;
    var uri = this.uri || this.bwgSource.uri || this.bwgSource.bwgURI;
    var blob = this.bwgSource.blob || this.bwgSource.bwgBlob;

    var cnt = function cnt(key, err) {
        thisB.readiness = null;
        thisB.notifyReadiness();

        if (key) {
            thisB.worker.postCommand({ command: 'meta', connection: key }, function (meta, err) {
                if (err) {
                    thisB.error = err;
                    thisB.keyHolder.provide(null);
                } else {
                    thisB.meta = meta;
                    thisB.keyHolder.provide(key);
                }
            });
        } else {
            thisB.error = err;
            thisB.keyHolder.provide(null);
        }
    };

    if (blob) {
        this.worker.postCommand({ command: 'connectBBI', blob: blob }, cnt);
    } else {
        this.worker.postCommand({
            command: 'connectBBI',
            uri: resolveUrlToPage(uri),
            resolver: this.resolverKey,
            transport: this.bwgSource.transport,
            credentials: this.bwgSource.credentials }, cnt);
    }
};

RemoteBWGFeatureSource.prototype.capabilities = function () {
    var caps = { leap: true };

    if (this.meta && this.meta.type == 'bigwig') caps.quantLeap = true;
    if (this.meta && this.meta.extraIndices && this.meta.extraIndices.length > 0) {
        caps.search = [];
        for (var eii = 0; eii < this.meta.extraIndices.length; ++eii) {
            caps.search.push(this.meta.extraIndices[eii].field);
        }
    }
    return caps;
};

RemoteBWGFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.keyHolder.await(function (key) {
        if (!key) {
            thisB.busy--;
            thisB.notifyActivity();
            return callback(thisB.error || "Can't access binary file", null, null);
        }

        var zoom = -1;
        var wantDensity = !types || types.length === 0 || arrayIndexOf(types, 'density') >= 0;
        if (thisB.opts.clientBin) {
            wantDensity = false;
        }
        if (thisB.meta.type == 'bigwig' || wantDensity || typeof thisB.opts.forceReduction !== 'undefined') {
            for (var z = 1; z < thisB.meta.zoomLevels.length; ++z) {
                if (thisB.meta.zoomLevels[z] <= scale) {
                    zoom = z - 1; // Scales returned in metadata start at 1, unlike "real" zoom levels.
                } else {
                    break;
                }
            }
            if (typeof thisB.opts.forceReduction !== 'undefined') {
                zoom = thisB.opts.forceReduction;
            }
        }

        thisB.worker.postCommand({ command: 'fetch', connection: key, chr: chr, min: min, max: max, zoom: zoom }, function (features, error) {
            thisB.busy--;
            thisB.notifyActivity();

            var fs = 1000000000;
            if (thisB.meta.type === 'bigwig') {
                var is = (max - min) / features.length / 2;
                if (is < fs) {
                    fs = is;
                }
            }
            if (thisB.opts.link) {
                for (var fi = 0; fi < features.length; ++fi) {
                    var f = features[fi];
                    if (f.label) {
                        f.links = [new DASLink('Link', thisB.opts.link.replace(/\$\$/, f.label))];
                    }
                }
            }
            callback(error, features, fs);
        });
    });
};

RemoteBWGFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    var thisB = this;
    this.busy++;
    this.notifyActivity();
    this.worker.postCommand({ command: 'quantLeap', connection: this.keyHolder.res, chr: chr, pos: pos, dir: dir, threshold: threshold, under: false }, function (result, err) {
        console.log(result, err);
        thisB.busy--;
        thisB.notifyActivity();
        return callback(result, err);
    });
};

RemoteBWGFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    var thisB = this;
    this.busy++;
    this.notifyActivity();
    this.worker.postCommand({ command: 'leap', connection: this.keyHolder.res, chr: chr, pos: pos, dir: dir }, function (result, err) {
        thisB.busy--;
        thisB.notifyActivity();
        if (result.length > 0 && result[0] !== null) {
            callback(result[0]);
        }
    });
};

RemoteBWGFeatureSource.prototype.getScales = function () {
    var meta = this.meta;
    if (meta) {
        return meta.zoomLevels;
    } else {
        return null;
    }
};

RemoteBWGFeatureSource.prototype.search = function (query, callback) {
    if (!this.meta.extraIndices || this.meta.extraIndices.length === 0) {
        return callback(null, 'No indices available');
    }

    var thisB = this;
    this.busy++;
    this.notifyActivity();
    var index = this.meta.extraIndices[0];
    this.worker.postCommand({ command: 'search', connection: this.keyHolder.res, query: query, index: index }, function (result, err) {
        thisB.busy--;
        thisB.notifyActivity();

        callback(result, err);
    });
};

RemoteBWGFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.opts.noExtraFeatureInfo) return true;

    var thisB = this;
    this.keyHolder.await(function (key) {
        var bwg = thisB.meta;
        if (!bwg) return;

        if (bwg.schema && bwg.definedFieldCount < bwg.schema.fields.length) {
            var fip = function fip(feature, featureInfo) {
                for (var hi = 0; hi < featureInfo.hit.length; ++hi) {
                    if (featureInfo.hit[hi].isSuperGroup) return;
                }
                for (var fi = bwg.definedFieldCount; fi < bwg.schema.fields.length; ++fi) {
                    var f = bwg.schema.fields[fi];
                    featureInfo.add(f.comment, feature[f.name]);
                }
            };

            callback(fip);
        } else {
            // No need to do anything.
        }
    });
};

RemoteBWGFeatureSource.prototype.getStyleSheet = function (callback) {
    var thisB = this;

    this.keyHolder.await(function (key) {
        var bwg = thisB.meta;
        if (!bwg) {
            return callback(null, 'bbi error');
        }

        var stylesheet = new DASStylesheet();
        if (bwg.type == 'bigbed') {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'blue';
            wigStyle.HEIGHT = 8;
            wigStyle.BUMP = true;
            wigStyle.LABEL = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'bigbed' }, null, wigStyle);

            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'red';
            wigStyle.HEIGHT = 10;
            wigStyle.BUMP = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'translation' }, null, wigStyle);

            var tsStyle = new DASStyle();
            tsStyle.glyph = 'BOX';
            tsStyle.FGCOLOR = 'black';
            tsStyle.BGCOLOR = 'white';
            tsStyle.HEIGHT = 10;
            tsStyle.ZINDEX = 10;
            tsStyle.BUMP = true;
            tsStyle.LABEL = true;
            stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

            var densStyle = new DASStyle();
            densStyle.glyph = 'HISTOGRAM';
            densStyle.COLOR1 = 'white';
            densStyle.COLOR2 = 'black';
            densStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'density' }, null, densStyle);
        } else {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'HISTOGRAM';
            wigStyle.COLOR1 = 'white';
            wigStyle.COLOR2 = 'black';
            wigStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
        }

        if (bwg.definedFieldCount == 12 && bwg.fieldCount >= 14) {
            stylesheet.geneHint = true;
        }

        return callback(stylesheet);
    });
};

function bamRecordToFeature(r, group) {
    if (r.flag & BamFlags.SEGMENT_UNMAPPED) return;

    var len;
    if (r.seq) len = r.seq.length;else len = r.seqLength;

    if (r.cigar) {
        len = 0;
        var ops = parseCigar(r.cigar);
        for (var ci = 0; ci < ops.length; ++ci) {
            var co = ops[ci];
            if (co.op == 'M' || co.op == 'D') len += co.cnt;
        }
    }

    var f = new DASFeature();
    f.min = r.pos + 1;
    f.max = r.pos + len;
    f.segment = r.segment;
    f.type = 'bam';
    f.id = r.readName;
    f.notes = [/* 'Sequence=' + r.seq, 'CIGAR=' + r.cigar, */'MQ=' + r.mq];
    f.cigar = r.cigar;
    f.seq = r.seq;
    f.quals = r.quals;
    f.orientation = r.flag & BamFlags.REVERSE_COMPLEMENT ? '-' : '+';
    f.bamRecord = r;

    if (group && r.flag & BamFlags.MULTIPLE_SEGMENTS) {
        f.groups = [{ id: r.readName,
            type: 'readpair' }];
    }

    return f;
}

function BAMFeatureSource(bamSource) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.bamSource = bamSource;
    this.opts = { credentials: bamSource.credentials, preflight: bamSource.preflight, bamGroup: bamSource.bamGroup };
    this.bamHolder = new Awaited();

    if (this.opts.preflight) {
        var pfs = bwg_preflights[this.opts.preflight];
        if (!pfs) {
            pfs = new Awaited();
            bwg_preflights[this.opts.preflight] = pfs;

            var req = new XMLHttpRequest();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (req.status == 200) {
                        pfs.provide('success');
                    } else {
                        pfs.provide('failure');
                    }
                }
            };
            // req.setRequestHeader('cache-control', 'no-cache');    /* Doesn't work, not an allowed request header in CORS */
            req.open('get', this.opts.preflight + '?' + hex_sha1('salt' + Date.now()), true); // Instead, ensure we always preflight a unique URI.
            if (this.opts.credentials) {
                req.withCredentials = 'true';
            }
            req.send();
        }
        pfs.await(function (status) {
            if (status === 'success') {
                thisB.init();
            }
        });
    } else {
        thisB.init();
    }
}

BAMFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

BAMFeatureSource.prototype.init = function () {
    var thisB = this;
    var bamF, baiF;
    if (this.bamSource.bamBlob) {
        bamF = new BlobFetchable(this.bamSource.bamBlob);
        baiF = new BlobFetchable(this.bamSource.baiBlob);
    } else {
        bamF = new URLFetchable(this.bamSource.bamURI, { credentials: this.opts.credentials, resolver: this.opts.resolver });
        baiF = new URLFetchable(this.bamSource.baiURI || this.bamSource.bamURI + '.bai', { credentials: this.opts.credentials, resolver: this.opts.resolver });
    }
    makeBam(bamF, baiF, null, function (bam, err) {
        thisB.readiness = null;
        thisB.notifyReadiness();

        if (bam) {
            thisB.bamHolder.provide(bam);
        } else {
            thisB.error = err;
            thisB.bamHolder.provide(null);
        }
    });
};

BAMFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var light = types && types.length == 1 && types[0] == 'density';

    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.bamHolder.await(function (bam) {
        if (!bam) {
            thisB.busy--;
            thisB.notifyActivity();
            return callback(thisB.error || "Couldn't fetch BAM");
        }

        bam.fetch(chr, min, max, function (bamRecords, error) {
            thisB.busy--;
            thisB.notifyActivity();

            if (error) {
                callback(error, null, null);
            } else {
                var features = [];
                for (var ri = 0; ri < bamRecords.length; ++ri) {
                    var r = bamRecords[ri];

                    var f = bamRecordToFeature(r, thisB.opts.bamGroup);
                    if (f) features.push(f);
                }
                callback(null, features, 1000000000);
            }
        }, { light: light });
    });
};

BAMFeatureSource.prototype.getScales = function () {
    return 1000000000;
};

BAMFeatureSource.prototype.getStyleSheet = function (callback) {
    this.bamHolder.await(function (bam) {
        var stylesheet = new DASStylesheet();

        var densStyle = new DASStyle();
        densStyle.glyph = 'HISTOGRAM';
        densStyle.COLOR1 = 'black';
        densStyle.COLOR2 = 'red';
        densStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'density' }, 'low', densStyle);
        stylesheet.pushStyle({ type: 'density' }, 'medium', densStyle);

        var wigStyle = new DASStyle();
        wigStyle.glyph = '__SEQUENCE';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 8;
        wigStyle.BUMP = true;
        wigStyle.LABEL = false;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'bam' }, 'high', wigStyle);

        return callback(stylesheet);
    });
};

function RemoteBAMFeatureSource(bamSource, worker) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.bamSource = bamSource;
    this.worker = worker;
    this.opts = { credentials: bamSource.credentials, preflight: bamSource.preflight, bamGroup: bamSource.bamGroup };
    this.keyHolder = new Awaited();

    if (bamSource.resolver) {
        this.resolverKey = browser.registerResolver(bamSource.resolver);
    }

    this.init();
}

RemoteBAMFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

RemoteBAMFeatureSource.prototype.init = function () {
    var thisB = this;
    var uri = this.bamSource.uri || this.bamSource.bamURI;
    var indexUri = this.bamSource.indexUri || this.bamSource.baiURI || uri + '.bai';

    var blob = this.bamSource.bamBlob || this.bamSource.blob;
    var indexBlob = this.bamSource.baiBlob || this.bamSource.indexBlob;

    var cnt = function cnt(result, err) {
        thisB.readiness = null;
        thisB.notifyReadiness();

        if (result) {
            thisB.keyHolder.provide(result);
        } else {
            thisB.error = err;
            thisB.keyHolder.provide(null);
        }
    };

    if (blob) {
        this.worker.postCommand({ command: 'connectBAM', blob: blob, indexBlob: indexBlob }, cnt);
    } else {
        this.worker.postCommand({
            command: 'connectBAM',
            uri: resolveUrlToPage(uri),
            resolver: this.resolverKey,
            indexUri: resolveUrlToPage(indexUri),
            credentials: this.bamSource.credentials,
            indexChunks: this.bamSource.indexChunks }, cnt);
    }
};

RemoteBAMFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var light = types && types.length == 1 && types[0] == 'density';
    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.keyHolder.await(function (key) {
        if (!key) {
            thisB.busy--;
            thisB.notifyActivity();
            return callback(thisB.error || "Couldn't fetch BAM");
        }

        thisB.worker.postCommand({ command: 'fetch', connection: key, chr: chr, min: min, max: max, opts: { light: light } }, function (bamRecords, error) {
            // console.log('retrieved ' + bamRecords.length + ' via worker.');

            thisB.busy--;
            thisB.notifyActivity();

            if (error) {
                callback(error, null, null);
            } else {
                var features = [];
                for (var ri = 0; ri < bamRecords.length; ++ri) {
                    var r = bamRecords[ri];
                    var f = bamRecordToFeature(r, thisB.opts.bamGroup);
                    if (f) features.push(f);
                }
                callback(null, features, 1000000000);
            }
        });
    });
};

RemoteBAMFeatureSource.prototype.getScales = function () {
    return 1000000000;
};

RemoteBAMFeatureSource.prototype.getStyleSheet = function (callback) {
    this.keyHolder.await(function (bam) {
        var stylesheet = new DASStylesheet();

        var densStyle = new DASStyle();
        densStyle.glyph = 'HISTOGRAM';
        densStyle.COLOR1 = 'black';
        densStyle.COLOR2 = 'red';
        densStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'density' }, 'low', densStyle);
        stylesheet.pushStyle({ type: 'density' }, 'medium', densStyle);

        var wigStyle = new DASStyle();
        wigStyle.glyph = '__SEQUENCE';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 8;
        wigStyle.BUMP = true;
        wigStyle.LABEL = false;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'bam' }, 'high', wigStyle);
        return callback(stylesheet);
    });
};

function MappedFeatureSource(source, mapping) {
    this.source = source;
    this.mapping = mapping;

    this.activityListeners = [];
    this.busy = 0;
}

MappedFeatureSource.prototype.addActivityListener = function (listener) {
    this.activityListeners.push(listener);
};

MappedFeatureSource.prototype.removeActivityListener = function (listener) {
    var idx = arrayIndexOf(this.activityListeners, listener);
    if (idx >= 0) this.activityListeners.splice(idx, 0);
};

MappedFeatureSource.prototype.notifyActivity = function () {
    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

MappedFeatureSource.prototype.getStyleSheet = function (callback) {
    return this.source.getStyleSheet(callback);
};

MappedFeatureSource.prototype.getScales = function () {
    return this.source.getScales();
};

MappedFeatureSource.prototype.getDefaultFIPs = function (callback, tier) {
    if (this.source.getDefaultFIPs) return this.source.getDefaultFIPs(callback, tier);
};

MappedFeatureSource.prototype.simplifySegments = function (segs, minGap) {
    if (segs.length === 0) return segs;

    segs.sort(function (s1, s2) {
        var d = s1.name - s2.name;
        if (d) return d;
        d = s1.start - s2.start;
        if (d) return d;
        return s1.end - s2.end; // Should never come to this...?
    });

    var ssegs = [];
    var currentSeg = segs[0];
    for (var si = 0; si < segs.length; ++si) {
        var ns = segs[si];

        // console.log(ns.name + ' ' + ns.start + ' ' + ns.end);
        if (ns.name != currentSeg.name || ns.start > currentSeg.end + minGap) {
            ssegs.push(currentSeg);
            currentSeg = ns;
        } else {
            currentSeg = new DASSegment(currentSeg.name, Math.min(currentSeg.start, ns.start), Math.max(currentSeg.end, ns.end));
        }
    }
    ssegs.push(currentSeg);
    return ssegs;
};

MappedFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback, styleFilters) {
    var thisB = this;
    var fetchLength = max - min + 1;

    thisB.busy++;
    thisB.notifyActivity();

    this.mapping.sourceBlocksForRange(chr, min, max, function (mseg) {
        if (mseg.length === 0) {
            thisB.busy--;
            thisB.notifyActivity();

            callback("No mapping available for this regions", [], scale);
        } else {
            mseg = thisB.simplifySegments(mseg, Math.max(100, 0.05 * fetchLength));

            var mappedFeatures = [];
            var mappedLoc = null;
            var count = mseg.length;
            var finalStatus;

            mseg.map(function (seg) {
                thisB.source.fetch(seg.name, seg.start, seg.end, scale, types, pool, function (status, features, fscale) {
                    if (status && !finalStatus) finalStatus = status;

                    if (features) {
                        for (var fi = 0; fi < features.length; ++fi) {
                            var f = features[fi];
                            var sn = f.segment;
                            if (sn.indexOf('chr') === 0) {
                                sn = sn.substr(3);
                            }

                            var mappings = thisB.mapping.mapSegment(sn, f.min, f.max);

                            if (mappings.length === 0) {
                                if (f.parts && f.parts.length > 0) {
                                    mappedFeatures.push(f);
                                }
                            } else {
                                for (var mi = 0; mi < mappings.length; ++mi) {
                                    var m = mappings[mi];
                                    var mf = shallowCopy(f);
                                    mf.segment = m.segment;
                                    mf.min = m.min;
                                    mf.max = m.max;
                                    if (m.partialMin) mf.partialMin = m.partialMin;
                                    if (m.partialMax) mf.partialMax = m.partialMax;

                                    if (m.flipped) {
                                        if (f.orientation == '-') {
                                            mf.orientation = '+';
                                        } else if (f.orientation == '+') {
                                            mf.orientation = '-';
                                        }
                                    }
                                    mappedFeatures.push(mf);
                                }
                            }
                        }
                    }

                    var m1 = thisB.mapping.mapPoint(seg.name, seg.start);
                    var m2 = thisB.mapping.mapPoint(seg.name, seg.end);

                    if (m1 && m2) {
                        var segDestCoverage = new Range(m1.pos, m2.pos);
                        if (mappedLoc) mappedLoc = union(mappedLoc, segDestCoverage);else mappedLoc = segDestCoverage;
                    }

                    --count;
                    if (count === 0) {
                        thisB.busy--;
                        thisB.notifyActivity();
                        callback(finalStatus, mappedFeatures, fscale, mappedLoc);
                    }
                }, styleFilters);
            });
        }
    });
};

function DummyFeatureSource() {}

DummyFeatureSource.prototype.getScales = function () {
    return null;
};

DummyFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, cnt) {
    return cnt(null, [], 1000000000);
};

DummyFeatureSource.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();
    var defStyle = new DASStyle();
    defStyle.glyph = 'BOX';
    defStyle.BGCOLOR = 'blue';
    defStyle.FGCOLOR = 'black';
    stylesheet.pushStyle({ type: 'default' }, null, defStyle);
    return callback(stylesheet);
};

function DummySequenceSource() {}

DummySequenceSource.prototype.fetch = function (chr, min, max, pool, cnt) {
    return cnt(null, null);
};

function JBrowseFeatureSource(source) {
    this.store = new JBrowseStore(source.jbURI, source.jbQuery);
}

JBrowseFeatureSource.prototype.getScales = function () {
    return null;
};

JBrowseFeatureSource.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();

    var cdsStyle = new DASStyle();
    cdsStyle.glyph = 'BOX';
    cdsStyle.FGCOLOR = 'black';
    cdsStyle.BGCOLOR = 'red';
    cdsStyle.HEIGHT = 10;
    cdsStyle.BUMP = true;
    cdsStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'translation' }, null, cdsStyle);

    var tsStyle = new DASStyle();
    tsStyle.glyph = 'BOX';
    tsStyle.FGCOLOR = 'black';
    tsStyle.BGCOLOR = 'white';
    tsStyle.HEIGHT = 10;
    tsStyle.ZINDEX = 10;
    tsStyle.BUMP = true;
    tsStyle.LABEL = true;
    stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

    var wigStyle = new DASStyle();
    wigStyle.glyph = 'BOX';
    wigStyle.FGCOLOR = 'black';
    wigStyle.BGCOLOR = 'green';
    wigStyle.HEIGHT = 8;
    wigStyle.BUMP = true;
    wigStyle.LABEL = true;
    wigStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'default' }, null, wigStyle);

    return callback(stylesheet);
};

JBrowseFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    if (types && types.length === 0) {
        callback(null, [], scale);
        return;
    }

    var fops = {};

    this.store.features(new DASSegment(chr, min, max), fops, function (features, status) {
        callback(status, features, 100000);
    });
};

Browser.prototype.sourceAdapterIsCapable = function (s, cap) {
    if (!s.capabilities) return false;else return s.capabilities()[cap];
};

if (typeof module !== 'undefined') {
    module.exports = {
        FeatureSourceBase: FeatureSourceBase,

        TwoBitSequenceSource: TwoBitSequenceSource,
        EnsemblSequenceSource: EnsemblSequenceSource,
        DASSequenceSource: DASSequenceSource,
        MappedFeatureSource: MappedFeatureSource,
        CachingFeatureSource: CachingFeatureSource,
        BWGFeatureSource: BWGFeatureSource,
        RemoteBWGFeatureSource: RemoteBWGFeatureSource,
        BAMFeatureSource: BAMFeatureSource,
        RemoteBAMFeatureSource: RemoteBAMFeatureSource,
        DummyFeatureSource: DummyFeatureSource,
        DummySequenceSource: DummySequenceSource,

        registerSourceAdapterFactory: dalliance_registerSourceAdapterFactory,
        registerParserFactory: dalliance_registerParserFactory,
        makeParser: dalliance_makeParser
    };

    // Standard set of plugins.
    require('./ensembljson');
    require('./tabix-source');
    require('./memstore');
    require('./bedwig');
    require('./vcf');
    require('./test-source');
}

},{"./bam":1,"./bedwig":2,"./bigwig":3,"./bin":4,"./cbrowser":6,"./chainset":7,"./cigar":8,"./das":10,"./encode":14,"./ensembljson":15,"./jbjson":24,"./memstore":27,"./overlay":30,"./spans":40,"./style":41,"./tabix-source":45,"./test-source":47,"./tier":51,"./twoBit":54,"./utils":55,"./vcf":56}],39:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2015
//
// sourcecompare.js
//


function sourceDataURI(conf) {
    if (conf.uri) {
        return conf.uri;
    } else if (conf.blob) {
        return 'file:' + conf.blob.name;
    } else if (conf.bwgBlob) {
        return 'file:' + conf.bwgBlob.name;
    } else if (conf.bamBlob) {
        return 'file:' + conf.bamBlob.name;
    } else if (conf.twoBitBlob) {
        return 'file:' + conf.twoBitBlob.name;
    }

    return conf.bwgURI || conf.bamURI || conf.jbURI || conf.twoBitURI || 'https://www.biodalliance.org/magic/no_uri';
}

function sourceStyleURI(conf) {
    if (conf.stylesheet_uri) return conf.stylesheet_uri;else if (conf.tier_type == 'sequence' || conf.twoBitURI || conf.twoBitBlob) return 'https://www.biodalliance.org/magic/sequence';else return sourceDataURI(conf);
}

function sourcesAreEqualModuloStyle(a, b) {
    if (sourceDataURI(a) != sourceDataURI(b)) return false;

    if (a.mapping != b.mapping) return false;

    if (a.tier_type != b.tier_type) return false;

    if (a.overlay) {
        if (!b.overlay || b.overlay.length != a.overlay.length) return false;
        for (var oi = 0; oi < a.overlay.length; ++oi) {
            if (!sourcesAreEqualModuloStyle(a.overlay[oi], b.overlay[oi])) return false;
        }
    } else {
        if (b.overlay) return false;
    }

    return true;
}

function sourcesAreEqual(a, b) {
    if (sourceDataURI(a) != sourceDataURI(b) || sourceStyleURI(a) != sourceStyleURI(b)) return false;

    if (a.mapping != b.mapping) return false;

    if (a.tier_type != b.tier_type) return false;

    if (a.overlay) {
        if (!b.overlay || b.overlay.length != a.overlay.length) return false;
        for (var oi = 0; oi < a.overlay.length; ++oi) {
            if (!sourcesAreEqual(a.overlay[oi], b.overlay[oi])) return false;
        }
    } else {
        if (b.overlay) return false;
    }

    return true;
}

if (typeof module !== 'undefined') {
    module.exports = {
        sourcesAreEqual: sourcesAreEqual,
        sourcesAreEqualModuloStyle: sourcesAreEqualModuloStyle,
        sourceDataURI: sourceDataURI,
        sourceStyleURI: sourceStyleURI
    };
}

},{}],40:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// spans.js: JavaScript Intset/Location port.
//

"use strict";

function Range(min, max) {
    if (typeof min != 'number' || typeof max != 'number') throw 'Bad range ' + min + ',' + max;
    this._min = min;
    this._max = max;
}

Range.prototype.min = function () {
    return this._min;
};

Range.prototype.max = function () {
    return this._max;
};

Range.prototype.contains = function (pos) {
    return pos >= this._min && pos <= this._max;
};

Range.prototype.isContiguous = function () {
    return true;
};

Range.prototype.ranges = function () {
    return [this];
};

Range.prototype._pushRanges = function (ranges) {
    ranges.push(this);
};

Range.prototype.toString = function () {
    return '[' + this._min + '-' + this._max + ']';
};

function _Compound(ranges) {
    // given: a set of unsorted possibly overlapping ranges
    // sort the input ranges
    var sorted = ranges.sort(_rangeOrder);
    // merge overlaps between adjacent ranges
    var merged = [];
    var current = sorted.shift();
    sorted.forEach(function (range) {
        if (range._min <= current._max) {
            if (range._max > current._max) {
                current._max = range._max;
            }
        } else {
            merged.push(current);
            current = range;
        }
    });
    merged.push(current);
    this._ranges = merged;
}

_Compound.prototype.min = function () {
    return this._ranges[0].min();
};

_Compound.prototype.max = function () {
    return this._ranges[this._ranges.length - 1].max();
};

// returns the index of the first range that is not less than pos
_Compound.prototype.lower_bound = function (pos) {
    // first check if pos is out of range
    var r = this.ranges();
    if (pos > this.max()) return r.length;
    if (pos < this.min()) return 0;
    // do a binary search
    var a = 0,
        b = r.length - 1;
    while (a <= b) {
        var m = Math.floor((a + b) / 2);
        if (pos > r[m]._max) {
            a = m + 1;
        } else if (pos < r[m]._min) {
            b = m - 1;
        } else {
            return m;
        }
    }
    return a;
};

_Compound.prototype.contains = function (pos) {
    var lb = this.lower_bound(pos);
    if (lb < this._ranges.length && this._ranges[lb].contains(pos)) {
        return true;
    }
    return false;
};

_Compound.prototype.insertRange = function (range) {
    var lb = this.lower_bound(range._min);
    if (lb === this._ranges.length) {
        // range follows this
        this._ranges.push(range);
        return;
    }

    var r = this.ranges();
    if (range._max < r[lb]._min) {
        // range preceeds lb
        this._ranges.splice(lb, 0, range);
        return;
    }

    // range overlaps lb (at least)
    if (r[lb]._min < range._min) range._min = r[lb]._min;
    var ub = lb + 1;
    while (ub < r.length && r[ub]._min <= range._max) {
        ub++;
    }
    ub--;
    // ub is the upper bound of the new range
    if (r[ub]._max > range._max) range._max = r[ub]._max;

    // splice range into this._ranges
    this._ranges.splice(lb, ub - lb + 1, range);
    return;
};

_Compound.prototype.isContiguous = function () {
    return this._ranges.length > 1;
};

_Compound.prototype.ranges = function () {
    return this._ranges;
};

_Compound.prototype._pushRanges = function (ranges) {
    for (var ri = 0; ri < this._ranges.length; ++ri) {
        ranges.push(this._ranges[ri]);
    }
};

_Compound.prototype.toString = function () {
    var s = '';
    for (var r = 0; r < this._ranges.length; ++r) {
        if (r > 0) {
            s = s + ',';
        }
        s = s + this._ranges[r].toString();
    }
    return s;
};

function union(s0, s1) {
    if (!(s0 instanceof _Compound)) {
        if (!(s0 instanceof Array)) s0 = [s0];
        s0 = new _Compound(s0);
    }

    if (s1) s0.insertRange(s1);

    return s0;
}

function intersection(s0, s1) {
    var r0 = s0.ranges();
    var r1 = s1.ranges();
    var l0 = r0.length,
        l1 = r1.length;
    var i0 = 0,
        i1 = 0;
    var or = [];

    while (i0 < l0 && i1 < l1) {
        var s0 = r0[i0],
            s1 = r1[i1];
        var lapMin = Math.max(s0.min(), s1.min());
        var lapMax = Math.min(s0.max(), s1.max());
        if (lapMax >= lapMin) {
            or.push(new Range(lapMin, lapMax));
        }
        if (s0.max() > s1.max()) {
            ++i1;
        } else {
            ++i0;
        }
    }

    if (or.length == 0) {
        return null; // FIXME
    } else if (or.length == 1) {
        return or[0];
    } else {
        return new _Compound(or);
    }
}

function coverage(s) {
    var tot = 0;
    var rl = s.ranges();
    for (var ri = 0; ri < rl.length; ++ri) {
        var r = rl[ri];
        tot += r.max() - r.min() + 1;
    }
    return tot;
}

function rangeOrder(a, b) {
    if (a.min() < b.min()) {
        return -1;
    } else if (a.min() > b.min()) {
        return 1;
    } else if (a.max() < b.max()) {
        return -1;
    } else if (b.max() > a.max()) {
        return 1;
    } else {
        return 0;
    }
}

function _rangeOrder(a, b) {
    if (a._min < b._min) {
        return -1;
    } else if (a._min > b._min) {
        return 1;
    } else if (a._max < b._max) {
        return -1;
    } else if (b._max > a._max) {
        return 1;
    } else {
        return 0;
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        Range: Range,
        union: union,
        intersection: intersection,
        coverage: coverage,
        rangeOver: rangeOrder,
        _rangeOrder: _rangeOrder
    };
}

},{}],41:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2014
//
// style.js
//

"use strict";

function StyleFilter(type, method, label) {
    this.type = type;
    this.method = method;
    this.label = label;
}

StyleFilter.prototype.equals = function (o) {
    return this.type == o.type && this.method == o.method && this.label == o.label;
};

StyleFilter.prototype.toString = function () {
    var fs = [];
    if (this.type) fs.push('type=' + this.type);
    if (this.method) fs.push('method=' + this.method);
    if (this.label) fs.push('label=' + this.label);
    return 'StyleFilter<' + fs.join(';') + '>';
};

function StyleFilterSet(filters) {
    this._filters = {};
    if (filters) {
        for (var fi = 0; fi < filters.length; ++fi) {
            this.add(filters[fi]);
        }
    }
}

StyleFilterSet.prototype.add = function (filter) {
    var fs = filter.toString();
    if (!this._filters[fs]) {
        this._filters[fs] = filter;
        this._list = null;
    }
};

StyleFilterSet.prototype.addAll = function (filterSet) {
    var l = filterSet.list();
    for (var fi = 0; fi < l.length; ++fi) {
        this.add(l[fi]);
    }
};

StyleFilterSet.prototype.doesNotContain = function (filterSet) {
    var l = filterSet.list();
    for (var fi = 0; fi < l.length; ++fi) {
        if (!this._filters[fi.toString()]) return true;
    }
    return false;
};

StyleFilterSet.prototype.list = function () {
    if (!this._list) {
        this._list = [];
        for (var k in this._filters) {
            if (this._filters.hasOwnProperty(k)) {
                this._list.push(this._filters[k]);
            }
        }
    }
    return this._list;
};

StyleFilterSet.prototype.typeList = function () {
    var types = [];
    var list = this.list();
    for (var fi = 0; fi < list.length; ++fi) {
        var filter = list[fi];
        var type = filter.type;
        if (!type || type == 'default') return null;
        if (types.indexOf(type) < 0) types.push(type);
    }
    return types;
};

if (typeof module !== 'undefined') {
    module.exports = {
        StyleFilter: StyleFilter,
        StyleFilterSet: StyleFilterSet
    };
}

},{}],42:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.renderTier = renderTier;
exports.drawTier = drawTier;

/* To be used by tiers which are to be drawn in a multitier
   using the multi-renderer.

   Subtiers are configured by adding the following to a tier's source configuration:
       renderer: 'sub',
       sub: {
           multi_id: "multi_1",
           offset: 130,
           z: 2,
       }
   This would define a subtier that's to be rendered in the multi-tier with
   id "multi_1", with the top of the subtier at 130 pixels and at z-index 2.
 */

function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

// drawTier is called when this tier's data has been fetched,
// so by refreshing the multiTier from here, we can be sure that
// there's something new worth drawing in it
function drawTier(tier) {
    var browser = tier.browser;

    var multiTier = browser.tiers.filter(function (t) {
        return t.dasSource.renderer === 'multi' && t.dasSource.multi.multi_id === tier.dasSource.sub.multi_id;
    });

    multiTier.forEach(function (t) {
        return browser.refreshTier(t);
    });
}

},{}],43:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// svg-export.js
//

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var makeElementNS = utils.makeElementNS;

    var VERSION = require('./version');

    var svgSeqTier = require('./sequence-draw').svgSeqTier;

    var svgu = require('./svg-utils');
    var NS_SVG = svgu.NS_SVG;
    var NS_XLINK = svgu.NS_XLINK;
    var SVGPath = svgu.SVGPath;

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
    var formatLongInt = nf.formatLongInt;
}

Browser.prototype.makeSVG = function (opts) {
    opts = opts || {};
    var minTierHeight = opts.minTierHeight || 20;
    var padding = 3;
    var fpw = opts.width || this.featurePanelWidth;

    var backupFPW = this.featurePanelWidth;
    var backupScale = this.scale;
    this.featurePanelWidth = fpw;
    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);

    var b = this;
    var saveDoc = document.implementation.createDocument(NS_SVG, 'svg', null);

    var saveRoot = makeElementNS(NS_SVG, 'g', null, {
        fontFamily: 'helvetica',
        fontSize: '8pt'
    });
    saveDoc.documentElement.appendChild(saveRoot);

    var margin = 200;

    if (opts.banner) {
        var dallianceAnchor = makeElementNS(NS_SVG, 'a', makeElementNS(NS_SVG, 'text', 'Graphics from Biodalliance ' + VERSION, {
            x: b.featurePanelWidth + margin - 100,
            y: 35,
            strokeWidth: 0,
            fontSize: '12pt',
            textAnchor: 'end',
            fill: 'blue'
        }));
        dallianceAnchor.setAttribute('xmlns:xlink', NS_XLINK);
        dallianceAnchor.setAttribute('xlink:href', 'http://www.biodalliance.org/');

        saveRoot.appendChild(dallianceAnchor);
    }

    if (opts.region) {
        saveRoot.appendChild(makeElementNS(NS_SVG, 'text', this.chr + ':' + formatLongInt(this.viewStart) + '..' + formatLongInt(this.viewEnd), {
            x: margin + 100,
            y: 35,
            strokeWidth: 0,
            fontSize: '12pt',
            textAnchor: 'start'
        }));
    }

    var clipRect = makeElementNS(NS_SVG, 'rect', null, {
        x: margin,
        y: 50,
        width: b.featurePanelWidth,
        height: 100000
    });
    var clip = makeElementNS(NS_SVG, 'clipPath', clipRect, { id: 'featureClip' });
    saveRoot.appendChild(clip);

    var pos = 70;
    var tierHolder = makeElementNS(NS_SVG, 'g', null, {});

    for (var ti = 0; ti < b.tiers.length; ++ti) {
        var tier = b.tiers[ti];
        tier.backupSubtiers = tier.subtiers;
        tier.backupOriginHaxx = tier.originHaxx;
        tier.backupLayoutHeight = tier.layoutHeight;

        var renderer = b.getTierRenderer(tier);
        if (renderer && renderer.prepareSubtiers) {
            renderer.prepareSubtiers(tier, tier.viewport.getContext('2d'));
        }

        var tierSVG = makeElementNS(NS_SVG, 'g', null, { clipPath: 'url(#featureClip)', clipRule: 'nonzero' });
        var tierLabels = makeElementNS(NS_SVG, 'g');
        var tierTopPos = pos;

        var tierBackground = makeElementNS(NS_SVG, 'rect', null, { x: 0, y: tierTopPos, width: '10000', height: 50, fill: tier.background });
        tierSVG.appendChild(tierBackground);

        if (tier.sequenceSource) {
            var seqTrack = svgSeqTier(tier, tier.currentSequence);

            tierSVG.appendChild(makeElementNS(NS_SVG, 'g', seqTrack, { transform: 'translate(' + margin + ', ' + pos + ')' }));
            pos += 80;
        } else {
            if (!tier.subtiers) {
                continue;
            }

            var offset = (tier.glyphCacheOrigin - b.viewStart) * b.scale;
            var hasQuant = false;
            for (var sti = 0; sti < tier.subtiers.length; ++sti) {
                pos += padding;
                var subtier = tier.subtiers[sti];

                var glyphElements = [];
                for (var gi = 0; gi < subtier.glyphs.length; ++gi) {
                    var glyph = subtier.glyphs[gi];
                    glyphElements.push(glyph.toSVG());
                }

                tierSVG.appendChild(makeElementNS(NS_SVG, 'g', glyphElements, { transform: 'translate(' + (margin + offset) + ', ' + pos + ')' }));

                if (subtier.quant) {
                    hasQuant = true;
                    var q = subtier.quant;
                    var h = subtier.height;

                    var numTics = 2;
                    if (h > 40) {
                        numTics = 1 + (h / 20 | 0);
                    }
                    var ticSpacing = h / (numTics - 1);
                    var ticInterval = (q.max - q.min) / (numTics - 1);

                    var path = new SVGPath();
                    path.moveTo(margin + 5, pos);
                    path.lineTo(margin, pos);
                    path.lineTo(margin, pos + subtier.height);
                    path.lineTo(margin + 5, pos + subtier.height);
                    for (var t = 1; t < numTics - 1; ++t) {
                        var ty = t * ticSpacing;
                        path.moveTo(margin, pos + ty);
                        path.lineTo(margin + 3, pos + ty);
                    }

                    tierLabels.appendChild(makeElementNS(NS_SVG, 'path', null, { d: path.toPathData(), fill: 'none', stroke: 'black', strokeWidth: '2px' }));
                    tierLabels.appendChild(makeElementNS(NS_SVG, 'text', formatQuantLabel(q.max), { x: margin - 3, y: pos + 7, textAnchor: 'end' }));
                    tierLabels.appendChild(makeElementNS(NS_SVG, 'text', formatQuantLabel(q.min), { x: margin - 3, y: pos + subtier.height, textAnchor: 'end' }));
                    for (var t = 1; t < numTics - 1; ++t) {
                        var ty = t * ticSpacing;
                        tierLabels.appendChild(makeElementNS(NS_SVG, 'text', formatQuantLabel(1.0 * q.max - t * ticInterval), { x: margin - 3, y: pos + ty + 3, textAnchor: 'end' }));
                    }
                }

                pos += subtier.height + padding;
            }

            if (pos - tierTopPos < minTierHeight) {
                pos = tierTopPos + minTierHeight;
            }
        }

        var labelName;
        if (typeof tier.config.name === 'string') labelName = tier.config.name;else labelName = tier.dasSource.name;
        tierLabels.appendChild(makeElementNS(NS_SVG, 'text', labelName, { x: margin - (hasQuant ? 20 : 12), y: (pos + tierTopPos + 8) / 2, fontSize: '10pt', textAnchor: 'end' }));

        tierBackground.setAttribute('height', pos - tierTopPos);
        tierHolder.appendChild(makeElementNS(NS_SVG, 'g', [tierSVG, tierLabels]));

        tier.subtiers = tier.backupSubtiers;
        tier.originHaxx = tier.backupOriginHaxx;
        tier.layoutHeight = tier.backupLayoutHeight;
    }

    if (opts.highlights) {
        var highlights = this.highlights || [];
        for (var hi = 0; hi < highlights.length; ++hi) {
            var h = highlights[hi];
            if ((h.chr == this.chr || h.chr == 'chr' + this.chr) && h.min < this.viewEnd && h.max > this.viewStart) {
                var tmin = (Math.max(h.min, this.viewStart) - this.viewStart) * this.scale;
                var tmax = (Math.min(h.max, this.viewEnd) - this.viewStart) * this.scale;

                tierHolder.appendChild(makeElementNS(NS_SVG, 'rect', null, { x: margin + tmin, y: 70, width: tmax - tmin, height: pos - 70,
                    stroke: 'none', fill: this.defaultHighlightFill, fillOpacity: this.defaultHighlightAlpha }));
            }
        }
    }

    var rulerPos = -1;
    if (opts.ruler == 'center') {
        rulerPos = margin + (this.viewEnd - this.viewStart) * this.scale / 2;
    } else if (opts.ruler == 'left') {
        rulerPos = margin;
    } else if (opts.ruler == 'right') {
        rulerPos = margin + (this.viewEnd - this.viewStart) * this.scale;
    }
    if (rulerPos >= 0) {
        tierHolder.appendChild(makeElementNS(NS_SVG, 'line', null, { x1: rulerPos, y1: 70, x2: rulerPos, y2: pos,
            stroke: 'blue' }));
    }

    saveRoot.appendChild(tierHolder);
    saveDoc.documentElement.setAttribute('width', b.featurePanelWidth + 20 + margin);
    saveDoc.documentElement.setAttribute('height', pos + 50);

    this.featurePanelWidth = backupFPW;
    this.scale = backupScale;

    var svg = void 0;
    if (typeof XMLSerializer !== 'undefined') {
        svg = new XMLSerializer().serializeToString(saveDoc);
    } else {
        var root = saveDoc.documentElement;
        root.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
        svg = root.outerHTML;
    }

    if (opts.output && opts.output === 'string') {
        return svg;
    } else {
        return new Blob([svg], { type: 'image/svg+xml' });
    }
};

},{"./cbrowser":6,"./numformats":29,"./sequence-draw":35,"./svg-utils":44,"./utils":55,"./version":57}],44:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// svg-utils.js
//

var NS_SVG = 'http://www.w3.org/2000/svg';
var NS_XLINK = 'http://www.w3.org/1999/xlink';

function SVGPath() {
    this.ops = [];
}

SVGPath.prototype.moveTo = function (x, y) {
    this.ops.push('M ' + x + ' ' + y);
};

SVGPath.prototype.lineTo = function (x, y) {
    this.ops.push('L ' + x + ' ' + y);
};

SVGPath.prototype.closePath = function () {
    this.ops.push('Z');
};

SVGPath.prototype.toPathData = function () {
    return this.ops.join(' ');
};

if (typeof module !== 'undefined') {
    module.exports = {
        NS_SVG: NS_SVG,
        NS_XLINK: NS_XLINK,
        SVGPath: SVGPath
    };
}

},{}],45:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// tabix-source.js
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
    var dalliance_makeParser = sa.makeParser;
    var FeatureSourceBase = sa.FeatureSourceBase;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;

    var utils = require('./utils');
    var Awaited = utils.Awaited;

    var connectTabix = require('./tabix').connectTabix;
}

function TabixFeatureSource(source) {
    FeatureSourceBase.call(this);
    this.readiness = 'Connecting';
    this.source = source;

    this.tabixHolder = new Awaited();
    var thisB = this;

    var parser = dalliance_makeParser(source.payload);
    if (!parser) {
        throw 'Unsuported tabix payload ' + source.payload;
    } else {
        this.parser = parser;
    }

    var data, index;
    if (this.source.blob) {
        data = new BlobFetchable(this.source.blob);
        index = new BlobFetchable(this.source.indexBlob);
    } else {
        data = new URLFetchable(this.source.uri, { credentials: this.source.credentials, resolver: this.source.resolver });
        index = new URLFetchable(this.source.indexURI || this.source.uri + '.tbi', { credentials: this.source.credentials, resolver: this.source.resolver });
    }
    connectTabix(data, index, function (tabix, err) {
        thisB.tabixHolder.provide(tabix);
        tabix.fetchHeader(function (lines, err) {
            if (lines) {
                var session = parser.createSession(function () {/* Null sink because we shouldn't get records */});
                for (var li = 0; li < lines.length; ++li) {
                    session.parse(lines[li]);
                }
                session.flush();
            }
        });
        thisB.readiness = null;
        thisB.notifyReadiness();
    });
}

TabixFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

TabixFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.tabixHolder.await(function (tabix) {
        tabix.fetch(chr, min, max, function (records, error) {
            thisB.busy--;
            thisB.notifyActivity();

            var features = [];
            var session = thisB.parser.createSession(function (f) {
                features.push(f);
            });
            for (var ri = 0; ri < records.length; ++ri) {
                var f = session.parse(records[ri]);
            }
            session.flush();
            callback(null, features, 1000000000);
        });
    });
};

TabixFeatureSource.prototype.getStyleSheet = function (callback) {
    if (this.parser && this.parser.getStyleSheet) this.parser.getStyleSheet(callback);
};

TabixFeatureSource.prototype.getDefaultFIPs = function (callback, tier) {
    if (this.parser && this.parser.getDefaultFIPs) this.parser.getDefaultFIPs(callback, tier);
};

dalliance_registerSourceAdapterFactory('tabix', function (source) {
    return { features: new TabixFeatureSource(source) };
});

},{"./bin":4,"./sourceadapters":38,"./tabix":46,"./utils":55}],46:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// tabix.js: basic support for tabix-indexed flatfiles
//

"use strict";

var TABIX_MAGIC = 0x01494254;

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var bin = require('./bin');
    var readInt = bin.readInt;
    var readShort = bin.readShort;
    var readByte = bin.readByte;
    var readInt64 = bin.readInt64;
    var readFloat = bin.readFloat;

    var lh3utils = require('./lh3utils');
    var readVob = lh3utils.readVob;
    var unbgzf = lh3utils.unbgzf;
    var reg2bins = lh3utils.reg2bins;
    var Chunk = lh3utils.Chunk;
}

function TabixFile() {}

function connectTabix(data, tbi, callback) {
    var tabix = new TabixFile();
    tabix.data = data;
    tabix.tbi = tbi;

    tabix.tbi.fetch(function (header) {
        // Do we really need to fetch the whole thing? :-(
        if (!header) {
            return callback(null, "Couldn't access Tabix");
        }

        var unchead = unbgzf(header, header.byteLength);
        var uncba = new Uint8Array(unchead);
        var magic = readInt(uncba, 0);
        if (magic != TABIX_MAGIC) {
            return callback(null, 'Not a tabix index');
        }

        var nref = readInt(uncba, 4);
        tabix.format = readInt(uncba, 8);
        tabix.colSeq = readInt(uncba, 12);
        tabix.colStart = readInt(uncba, 16);
        tabix.colEnd = readInt(uncba, 20);
        tabix.meta = readInt(uncba, 24);
        tabix.skip = readInt(uncba, 28);
        var nameLength = readInt(uncba, 32);

        tabix.indices = [];

        var p = 36;
        tabix.chrToIndex = {};
        tabix.indexToChr = [];
        for (var i = 0; i < nref; ++i) {
            var name = '';

            while (true) {
                var ch = uncba[p++];
                if (ch == 0) break;

                name += String.fromCharCode(ch);
            }

            tabix.chrToIndex[name] = i;
            if (name.indexOf('chr') == 0) {
                tabix.chrToIndex[name.substring(3)] = i;
            } else {
                tabix.chrToIndex['chr' + name] = i;
            }
            tabix.indexToChr.push(name);
        }

        var minBlockIndex = 1000000000;
        for (var ref = 0; ref < nref; ++ref) {
            var blockStart = p;
            var nbin = readInt(uncba, p);p += 4;
            for (var b = 0; b < nbin; ++b) {
                var bin = readInt(uncba, p);
                var nchnk = readInt(uncba, p + 4);
                p += 8 + nchnk * 16;
            }
            var nintv = readInt(uncba, p);p += 4;

            var q = p;
            for (var i = 0; i < nintv; ++i) {
                var v = readVob(uncba, q);q += 8;
                if (v) {
                    var bi = v.block;
                    if (v.offset > 0) bi += 65536;

                    if (bi < minBlockIndex) minBlockIndex = bi;
                    break;
                }
            }
            p += nintv * 8;

            var ub = uncba;
            if (nbin > 0) {
                tabix.indices[ref] = new Uint8Array(unchead, blockStart, p - blockStart);
            }
        }

        tabix.headerMax = minBlockIndex;

        callback(tabix);
    }, { timeout: 50000 });
}

// Copy-paste from BamFile

TabixFile.prototype.blocksForRange = function (refId, min, max) {
    var index = this.indices[refId];
    if (!index) {
        return [];
    }

    var intBinsL = reg2bins(min, max);
    var intBins = [];
    for (var i = 0; i < intBinsL.length; ++i) {
        intBins[intBinsL[i]] = true;
    }
    var leafChunks = [],
        otherChunks = [];

    var nbin = readInt(index, 0);
    var p = 4;
    for (var b = 0; b < nbin; ++b) {
        var bin = readInt(index, p);
        var nchnk = readInt(index, p + 4);
        p += 8;
        if (intBins[bin]) {
            for (var c = 0; c < nchnk; ++c) {
                var cs = readVob(index, p, true);
                var ce = readVob(index, p + 8, true);
                (bin < 4681 ? otherChunks : leafChunks).push(new Chunk(cs, ce));
                p += 16;
            }
        } else {
            p += nchnk * 16;
        }
    }

    var nintv = readInt(index, p);
    var lowest = null;
    var minLin = Math.min(min >> 14, nintv - 1),
        maxLin = Math.min(max >> 14, nintv - 1);
    for (var i = minLin; i <= maxLin; ++i) {
        var lb = readVob(index, p + 4 + i * 8);
        if (!lb) {
            continue;
        }
        if (!lowest || lb.block < lowest.block || lb.offset < lowest.offset) {
            lowest = lb;
        }
    }

    var prunedOtherChunks = [];
    if (lowest != null) {
        for (var i = 0; i < otherChunks.length; ++i) {
            var chnk = otherChunks[i];
            if (chnk.maxv.block >= lowest.block && chnk.maxv.offset >= lowest.offset) {
                prunedOtherChunks.push(chnk);
            }
        }
    }
    otherChunks = prunedOtherChunks;

    var intChunks = [];
    for (var i = 0; i < otherChunks.length; ++i) {
        intChunks.push(otherChunks[i]);
    }
    for (var i = 0; i < leafChunks.length; ++i) {
        intChunks.push(leafChunks[i]);
    }

    intChunks.sort(function (c0, c1) {
        var dif = c0.minv.block - c1.minv.block;
        if (dif != 0) {
            return dif;
        } else {
            return c0.minv.offset - c1.minv.offset;
        }
    });
    var mergedChunks = [];
    if (intChunks.length > 0) {
        var cur = intChunks[0];
        for (var i = 1; i < intChunks.length; ++i) {
            var nc = intChunks[i];
            if (nc.minv.block == cur.maxv.block /* && nc.minv.offset == cur.maxv.offset */) {
                    // no point splitting mid-block
                    cur = new Chunk(cur.minv, nc.maxv);
                } else {
                mergedChunks.push(cur);
                cur = nc;
            }
        }
        mergedChunks.push(cur);
    }

    return mergedChunks;
};

TabixFile.prototype.fetch = function (chr, min, max, callback) {
    var thisB = this;

    var chrId = this.chrToIndex[chr];
    if (chrId == undefined) return callback([]);

    var canonicalChr = this.indexToChr[chrId];

    var chunks;
    if (chrId === undefined) {
        chunks = [];
    } else {
        chunks = this.blocksForRange(chrId, min, max);
        if (!chunks) {
            callback(null, 'Error in index fetch');
        }
    }

    var records = [];
    var index = 0;
    var data;

    function tramp() {
        if (index >= chunks.length) {
            return callback(records);
        } else if (!data) {
            var c = chunks[index];
            var fetchMin = c.minv.block;
            var fetchMax = c.maxv.block + (1 << 16); // *sigh*
            thisB.data.slice(fetchMin, fetchMax - fetchMin).fetch(function (r) {
                data = unbgzf(r, c.maxv.block - c.minv.block + 1);
                return tramp();
            });
        } else {
            var ba = new Uint8Array(data);
            thisB.readRecords(ba, chunks[index].minv.offset, records, min, max, canonicalChr);
            data = null;
            ++index;
            return tramp();
        }
    }
    tramp();
};

TabixFile.prototype.readRecords = function (ba, offset, sink, min, max, chr) {
    LINE_LOOP: while (true) {
        var line = '';
        while (offset < ba.length) {
            var ch = ba[offset++];
            if (ch == 10) {
                var toks = line.split('\t');

                if (toks[this.colSeq - 1] == chr) {
                    var fmin = parseInt(toks[this.colStart - 1]);
                    var fmax = fmin;
                    if (this.colEnd > 0) fmax = parseInt(toks[this.colEnd - 1]);
                    if (this.format & 0x10000) ++fmin;

                    if (fmin <= max && fmax >= min) sink.push(line);
                }
                continue LINE_LOOP;
            } else {
                line += String.fromCharCode(ch);
            }
        }
        return;
    }
};

TabixFile.prototype.fetchHeader = function (callback) {
    var self = this;
    var fetchPtr = 0,
        ptr = 0,
        line = '';
    var lines = [];

    self.data.slice(0, self.headerMax).fetch(function (chnk) {
        if (!chnk) {
            return callback(null, "Fetch failed");
        }
        var ba = new Uint8Array(unbgzf(chnk, chnk.byteLength));
        var ptr = 0,
            line = '',
            lines = [];
        while (ptr < ba.length) {
            var ch = ba[ptr++];
            if (ch == 10) {
                if (line.charCodeAt(0) == self.meta) {
                    lines.push(line);
                    line = '';
                } else {
                    return callback(lines);
                }
            } else {
                line += String.fromCharCode(ch);
            }
        }
        callback(lines);
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        connectTabix: connectTabix,
        TABIX_MAGIC: TABIX_MAGIC
    };
}

},{"./bin":4,"./lh3utils":26,"./spans":40}],47:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _sourceadapters = require("./sourceadapters.js");

var _das = require("./das.js");

var _ramda = require("ramda");

var R = _interopRequireWildcard(_ramda);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* jshint esversion: 6 */

/*
 Source that can be configured to produce any type of feature,
 useful for testing renderers.
 */

var TestSource = function (_FeatureSourceBase) {
    _inherits(TestSource, _FeatureSourceBase);

    function TestSource(source) {
        _classCallCheck(this, TestSource);

        var _this = _possibleConstructorReturn(this, (TestSource.__proto__ || Object.getPrototypeOf(TestSource)).call(this));

        _this.features = R.defaultTo([], source.features);
        return _this;
    }

    _createClass(TestSource, [{
        key: "genFeature",
        value: function genFeature(conf) {
            var feature = new _das.DASFeature();

            for (var key in conf) {
                feature[key] = conf[key];
            }
        }
    }, {
        key: "fetch",
        value: function fetch(chr, min, max, scale, types, pool, callback) {
            var features = R.forEach(this.genFeature, this.features);
            return callback(null, features, 1);
        }
    }]);

    return TestSource;
}(_sourceadapters.FeatureSourceBase);

(0, _sourceadapters.registerSourceAdapterFactory)('test-source', function (source) {
    return { features: new TestSource(source) };
});

},{"./das.js":10,"./sourceadapters.js":38,"ramda":62}],48:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// thub.js: support for track-hub style registries
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var textXHR = utils.textXHR;
    var relativeURL = utils.relativeURL;
    var shallowCopy = utils.shallowCopy;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
}

var THUB_STANZA_REGEXP = /\n\s*\n/;
var THUB_PARSE_REGEXP = /(\w+) +(.+)\n?/;
var THUB_SUBGROUP_REGEXP = /subGroup[1-9]/;

var THUB_PENNANT_PREFIX = 'http://genome.ucsc.edu/images/';

function TrackHub(url) {
    this.genomes = {};
    this.url = url;
}

function TrackHubTrack() {}

TrackHubTrack.prototype.get = function (k) {
    if (this[k]) return this[k];else if (this._parent) return this._parent.get(k);
};

function TrackHubDB(hub) {
    this.hub = hub;
}

TrackHubDB.prototype.getTracks = function (callback) {
    var thisB = this;
    if (this._tracks) {
        return callback(this._tracks);
    }

    textXHR(this.absURL, function (trackFile, err) {
        if (err) {
            return callback(null, err);
        }

        // trackFile = trackFile.replace(/\#.*/g, '');
        trackFile = trackFile.replace('\\\n', ' ');

        var tracks = [];
        var tracksById = {};
        var stanzas = trackFile.split(THUB_STANZA_REGEXP);
        for (var s = 0; s < stanzas.length; ++s) {
            var toks = stanzas[s].replace(/\#.*/g, '').split(THUB_PARSE_REGEXP);
            var track = new TrackHubTrack();
            track._db = thisB;
            for (var l = 0; l < toks.length - 2; l += 3) {
                var k = toks[l + 1],
                    v = toks[l + 2];
                if (k.match(THUB_SUBGROUP_REGEXP)) {
                    if (!track.subgroups) track.subgroups = {};
                    var sgtoks = v.split(/\s/);
                    var sgtag = sgtoks[0];
                    var sgrecord = { name: sgtoks[1], tags: [], titles: [] };
                    for (var sgti = 2; sgti < sgtoks.length; ++sgti) {
                        var grp = sgtoks[sgti].split(/=/);
                        sgrecord.tags.push(grp[0]);
                        sgrecord.titles.push(grp[1]);
                    }
                    track.subgroups[sgtag] = sgrecord;
                } else if (k === 'subGroups') {
                    var sgtoks = v.split(/(\w+)=(\w+)/);
                    track.sgm = {};
                    for (var sgti = 0; sgti < sgtoks.length - 2; sgti += 3) {
                        track.sgm[sgtoks[sgti + 1]] = sgtoks[sgti + 2];
                    }
                } else {
                    track[toks[l + 1]] = toks[l + 2];
                }
            }

            if (track.track && (track.type || track.container || track.view || track.bigDataUrl)) {
                tracks.push(track);
                tracksById[track.track] = track;
            } else {
                // console.log('skipping ', track);
            }
        }

        var toplevels = [];
        var composites = [];
        for (var ti = 0; ti < tracks.length; ++ti) {
            var track = tracks[ti];
            var top = true;
            if (track.parent) {
                var ptoks = track.parent.split(/\s+/);
                var parent = tracksById[ptoks[0]];
                if (parent) {
                    track._parent = parent;

                    if (!parent.children) parent.children = [];
                    parent.children.push(track);

                    if (parent) top = false;
                } else {
                    console.log("Couldn't find parent " + ptoks[0] + '(' + track.parent + ')');
                }
            }
            if (track.compositeTrack) {
                composites.push(track);
            } else if (top) {
                toplevels.push(track);
            }
        }

        for (var ci = 0; ci < composites.length; ++ci) {
            var comp = composites[ci];
            if (!comp.children) continue;

            var parentOfViews = false;
            for (var ki = 0; ki < comp.children.length; ++ki) {
                var k = comp.children[ki];
                if (k.view) {
                    k.shortLabel = comp.shortLabel + ": " + k.shortLabel;
                    toplevels.push(k);
                    parentOfViews = true;
                }
            }
            if (!parentOfViews) toplevels.push(comp);
        }

        thisB._tracks = toplevels;
        return callback(thisB._tracks, null);
    }, { credentials: this.credentials, salt: true });
};

function connectTrackHub(hubURL, callback, opts) {
    opts = opts || {};
    opts.salt = true;

    textXHR(hubURL, function (hubFile, err) {
        if (err) {
            return callback(null, err);
        }

        var toks = hubFile.split(THUB_PARSE_REGEXP);
        var hub = new TrackHub(hubURL);
        if (opts.credentials) {
            hub.credentials = opts.credentials;
        }
        for (var l = 0; l < toks.length - 2; l += 3) {
            hub[toks[l + 1]] = toks[l + 2];
        }

        if (hub.genomesFile) {
            var genURL = relativeURL(hubURL, hub.genomesFile);
            textXHR(genURL, function (genFile, err) {
                if (err) {
                    return callback(null, err);
                }

                var stanzas = genFile.split(THUB_STANZA_REGEXP);
                for (var s = 0; s < stanzas.length; ++s) {
                    var toks = stanzas[s].split(THUB_PARSE_REGEXP);
                    var gprops = new TrackHubDB(hub);
                    if (opts.credentials) {
                        gprops.credentials = opts.credentials;
                    }

                    for (var l = 0; l < toks.length - 2; l += 3) {
                        gprops[toks[l + 1]] = toks[l + 2];
                    }

                    if (gprops.twoBitPath) {
                        gprops.twoBitPath = relativeURL(genURL, gprops.twoBitPath);
                    }

                    if (gprops.genome && gprops.trackDb) {
                        gprops.absURL = relativeURL(genURL, gprops.trackDb);
                        hub.genomes[gprops.genome] = gprops;
                    }
                }

                callback(hub);
            }, opts);
        } else {
            callback(null, 'No genomesFile');
        }
    }, opts);
}

TrackHubTrack.prototype.toDallianceSource = function () {
    var source = {
        name: this.shortLabel,
        desc: this.longLabel
    };
    if (this._db.mapping) {
        source.mapping = this._db.mapping;
    }

    var pennantIcon = this.get('pennantIcon');
    if (pennantIcon) {
        var ptoks = pennantIcon.split(/\s+/);
        source.pennant = THUB_PENNANT_PREFIX + ptoks[0];
    }

    var searchTrix = this.get('searchTrix');
    if (searchTrix) {
        source.trixURI = relativeURL(this._db.absURL, searchTrix);
    }

    if (this.container == 'multiWig') {
        source.merge = 'concat';
        source.overlay = [];
        var children = this.children || [];
        source.style = [];
        source.noDownsample = true;

        for (var ci = 0; ci < children.length; ++ci) {
            var ch = children[ci];
            var cs = ch.toDallianceSource();
            source.overlay.push(cs);

            if (cs.style) {
                for (var si = 0; si < cs.style.length; ++si) {
                    var style = cs.style[si];
                    style.method = ch.shortLabel; // FIXME
                    if (this.aggregate == 'transparentOverlay') style.style.ALPHA = 0.5;
                    source.style.push(style);
                }
            }
        }
        return source;
    } else {
        var type = this.type;
        if (!type) {
            var p = this;
            while (p._parent && !p.type) {
                p = p._parent;
            }
            type = p.type;
        }
        if (!type) return;
        var typeToks = type.split(/\s+/);
        if (typeToks[0] == 'bigBed' && this.bigDataUrl) {
            var bedTokens = typeToks[1] | 0;
            var bedPlus = typeToks[2] == '+';

            source.bwgURI = relativeURL(this._db.absURL, this.bigDataUrl);
            source.style = this.bigbedStyles();
            if (this._db.credentials) {
                source.credentials = true;
            }
            if (bedTokens >= 12 && bedPlus) source.collapseSuperGroups = true;
            return source;
        } else if (typeToks[0] == 'bigWig' && this.bigDataUrl) {
            source.bwgURI = relativeURL(this._db.absURL, this.bigDataUrl);
            source.style = this.bigwigStyles();
            source.noDownsample = true; // FIXME seems like a blunt instrument...

            if (this.yLineOnOff && this.yLineOnOff == 'on') {
                source.quantLeapThreshold = this.yLineMark !== undefined ? 1.0 * this.yLineMark : 0.0;
            }

            if (this._db.credentials) {
                source.credentials = true;
            }

            return source;
        } else if (typeToks[0] == 'bam' && this.bigDataUrl) {
            source.bamURI = relativeURL(this._db.absURL, this.bigDataUrl);
            if (this._db.credentials) {
                source.credentials = true;
            }
            return source;
        } else if (typeToks[0] == 'vcfTabix' && this.bigDataUrl) {
            source.uri = relativeURL(this._db.absURL, this.bigDataUrl);
            source.tier_type = 'tabix';
            source.payload = 'vcf';
            if (this._db.credentials) {
                source.credentials = true;
            }
            return source;
        } else {
            console.log('Unsupported ' + this.type);
        }
    }
};

TrackHubTrack.prototype.bigwigStyles = function () {
    var type = this.type;
    if (!type) {
        var p = this;
        while (p._parent && !p.type) {
            p = p._parent;
        }
        type = p.type;
    }
    if (!type) return;
    var typeToks = type.split(/\s+/);

    var min, max;
    if (typeToks.length >= 3) {
        min = 1.0 * typeToks[1];
        max = 1.0 * typeToks[2];
    }

    var height;
    if (this.maxHeightPixels) {
        var mhpToks = this.maxHeightPixels.split(/:/);
        if (mhpToks.length == 3) {
            height = mhpToks[1] | 0;
        } else {
            console.log('maxHeightPixels should be of the form max:default:min');
        }
    }

    var gtype = 'bars';
    if (this.graphTypeDefault) {
        gtype = this.graphTypeDefault;
    }

    var color = 'black';
    var altColor = null;
    if (this.color) {
        color = 'rgb(' + this.color + ')';
    }
    if (this.altColor) {
        altColor = 'rgb(' + this.altColor + ')';
    }

    var stylesheet = new DASStylesheet();
    var wigStyle = new DASStyle();
    if (gtype == 'points') {
        wigStyle.glyph = 'POINT';
    } else {
        wigStyle.glyph = 'HISTOGRAM';
    }

    if (altColor) {
        wigStyle.COLOR1 = color;
        wigStyle.COLOR2 = altColor;
    } else {
        wigStyle.BGCOLOR = color;
    }
    wigStyle.HEIGHT = height || 30;
    if (min || max) {
        wigStyle.MIN = min;
        wigStyle.MAX = max;
    }
    stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
    return stylesheet.styles;
};

TrackHubTrack.prototype.bigbedStyles = function () {
    var itemRgb = ('' + this.get('itemRgb')).toLowerCase() == 'on';
    var visibility = this.get('visibility') || 'full';
    var color = this.get('color');
    if (color) color = 'rgb(' + color + ')';else color = 'blue';

    var stylesheet = new DASStylesheet();
    var wigStyle = new DASStyle();
    wigStyle.glyph = 'BOX';
    wigStyle.FGCOLOR = 'black';
    wigStyle.BGCOLOR = color;
    wigStyle.HEIGHT = visibility == 'full' || visibility == 'pack' ? 12 : 8;
    wigStyle.BUMP = visibility == 'full' || visibility == 'pack';
    wigStyle.LABEL = visibility == 'full' || visibility == 'pack';
    wigStyle.ZINDEX = 20;
    if (itemRgb) wigStyle.BGITEM = true;

    var cbs = this.get('colorByStrand');
    if (cbs) {
        var cbsToks = cbs.split(/\s+/);

        var plus = shallowCopy(wigStyle);
        plus.BGCOLOR = 'rgb(' + cbsToks[0] + ')';
        stylesheet.pushStyle({ type: 'bigbed', orientation: '+' }, null, plus);

        var minus = shallowCopy(wigStyle);
        minus.BGCOLOR = 'rgb(' + cbsToks[1] + ')';
        stylesheet.pushStyle({ type: 'bigbed', orientation: '-' }, null, minus);
    } else {
        stylesheet.pushStyle({ type: 'bigbed' }, null, wigStyle);
    }

    var tlStyle = new DASStyle();
    tlStyle.glyph = 'BOX';
    tlStyle.FGCOLOR = 'black';
    if (itemRgb) tlStyle.BGITEM = true;
    tlStyle.BGCOLOR = 'red';
    tlStyle.HEIGHT = 10;
    tlStyle.BUMP = true;
    tlStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'translation' }, null, tlStyle);

    var tsStyle = new DASStyle();
    tsStyle.glyph = 'BOX';
    tsStyle.FGCOLOR = 'black';
    tsStyle.BGCOLOR = 'white';
    tsStyle.HEIGHT = 10;
    tsStyle.ZINDEX = 10;
    tsStyle.BUMP = true;
    tsStyle.LABEL = true;
    stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

    return stylesheet.styles;
};

function THUB_COMPARE(g, h) {
    if (g.priority && h.priority) {
        return 1.0 * g.priority - 1.0 * h.priority;
    } else if (g.priority) {
        return 1;
    } else if (h.priority) {
        return -1;
    } else {
        return g.shortLabel.localeCompare(h.shortLabel);
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        connectTrackHub: connectTrackHub,
        THUB_COMPARE: THUB_COMPARE
    };
}

},{"./das":10,"./utils":55}],49:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// tier-actions.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
}

Browser.prototype.mergeSelectedTiers = function () {
    var sources = [];
    var styles = [];

    for (var sti = 0; sti < this.selectedTiers.length; ++sti) {
        var tier = this.tiers[this.selectedTiers[sti]];
        sources.push(shallowCopy(tier.dasSource));
        var ss = tier.stylesheet.styles;
        for (var si = 0; si < ss.length; ++si) {
            var sh = ss[si];
            var nsh = shallowCopy(sh);
            nsh.method = tier.dasSource.name.replace(/[()+*?]/g, '\\$&');
            nsh._methodRE = null;
            nsh.style = shallowCopy(sh.style);
            if (nsh.style.ZINDEX === undefined) nsh.style.ZINDEX = sti;

            if (tier.forceMin) {
                nsh.style.MIN = tier.forceMin;
            }
            if (tier.forceMax) {
                nsh.style.MAX = tier.forceMax;
            }

            styles.push(nsh);
        }
    }

    this.addTier({ name: 'Merged',
        merge: 'concat',
        overlay: sources,
        noDownsample: true,
        style: styles });

    this.setSelectedTier(this.tiers.length - 1);
};

},{"./cbrowser":6,"./utils":55}],50:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// tier-edit.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;

    var das = require('./das');
    var isDasBooleanTrue = das.isDasBooleanTrue;
    var isDasBooleanNotFalse = das.isDasBooleanNotFalse;
    var copyStylesheet = das.copyStylesheet;

    var color = require('./color');
    var dasColourForName = color.dasColourForName;

    var sourceDataURI = require('./sourcecompare').sourceDataURI;
}

var __dalliance_smallGlyphs = {
    DOT: true,
    EX: true,
    STAR: true,
    SQUARE: true,
    CROSS: true,
    TRIANGLE: true,
    PLIMSOLL: true
};

Browser.prototype.openTierPanel = function (tier) {
    var b = this;

    if (this.uiMode === 'tier' && this.manipulatingTier === tier) {
        this.hideToolPanel();
        this.setUiMode('none');
    } else if (!tier) {
        return;
    } else {
        var setStyleColors = function setStyleColors(style) {
            if (style.BGGRAD) return;

            if (numColors == 1) {
                if (style.glyph == 'LINEPLOT' || __dalliance_smallGlyphs[style.glyph]) {
                    style.FGCOLOR = tierColorField.value;
                } else {
                    style.BGCOLOR = tierColorField.value;
                }
                style.COLOR1 = style.COLOR2 = style.COLOR3 = null;
            } else {
                style.COLOR1 = tierColorField.value;
                style.COLOR2 = tierColorField2.value;
                if (numColors > 2) {
                    style.COLOR3 = tierColorField3.value;
                } else {
                    style.COLOR3 = null;
                }
            }
            style._gradient = null;
            style._plusColor = tierPlusColorField.value;
            style._minusColor = tierMinusColorField.value;
        };

        var mutateStylesheet = function mutateStylesheet(visitor) {
            var nss = copyStylesheet(tier.stylesheet);
            var ssScale = tier.browser.zoomForCurrentScale();

            for (var i = 0; i < nss.styles.length; ++i) {
                var sh = nss.styles[i];
                if (sh.zoom && sh.zoom != ssScale) {
                    continue;
                }

                visitor(sh.style);
            }

            return nss;
        };

        var changeColor = function changeColor(ev) {
            tier.mergeStylesheet(mutateStylesheet(setStyleColors));
        };

        this.manipulatingTier = tier;

        var tierForm = makeElement('div', null, { className: 'tier-edit' });

        var aboutBanner = makeElement('div', "About '" + (tier.config.Name || tier.dasSource.name) + "'", null, { background: 'gray', paddingBottom: '5px', marginBottom: '5px', textAlign: 'center' });
        tierForm.appendChild(aboutBanner);

        var about = makeElement('div', [makeElement('p', tier.dasSource.desc)]);
        var aboutNotes = [];
        var sduri = sourceDataURI(tier.dasSource);
        if (sduri && (sduri.indexOf('http://') == 0 || sduri.indexOf('https://') == 0 || sduri.indexOf('//') == 0) && sduri !== 'https://www.biodalliance.org/magic/no_uri') {
            aboutNotes.push(makeElement('li', makeElement('a', '(Download data)', { href: sduri })));
        }

        if (tier.dasSource.mapping) {
            var coords = this.chains[tier.dasSource.mapping].coords;
            aboutNotes.push(makeElement('li', 'Mapped from ' + coords.auth + coords.version));
        }

        if (aboutNotes.length > 0) {
            about.appendChild(makeElement('ul', aboutNotes));
        }

        tierForm.appendChild(about);

        var semanticBanner = makeElement('span', ' (styles for current zoom level)', null, { display: 'none' });
        var editBanner = makeElement('div', ['Edit', semanticBanner], null, { background: 'gray', paddingBottom: '5px', marginBottom: '5px', textAlign: 'center' });
        tierForm.appendChild(editBanner);

        var tierNameField = makeElement('input', null, { type: 'text' });
        var tierPinnedToggle = makeElement('input', null, { type: 'checkbox', disabled: this.disablePinning });

        var glyphField = makeElement('select');
        glyphField.appendChild(makeElement('option', 'Histogram', { value: 'HISTOGRAM' }));
        glyphField.appendChild(makeElement('option', 'Line Plot', { value: 'LINEPLOT' }));
        glyphField.appendChild(makeElement('option', 'Ribbon', { value: 'GRADIENT' }));
        glyphField.appendChild(makeElement('option', 'Scatter', { value: 'SCATTER' }));

        var tierColorField = makeElement('input', null, { type: 'text', value: '#dd00dd' });
        var tierColorField2 = makeElement('input', null, { type: 'text', value: '#dd00dd' });
        var tierColorField3 = makeElement('input', null, { type: 'text', value: '#dd00dd' });

        var tierPlusColorField = makeElement('input', null, { type: 'text', value: '#ffa07a' });
        var tierMinusColorField = makeElement('input', null, { type: 'text', value: '#87cefa' });

        try {
            tierColorField.type = tierColorField2.type = tierColorField3.type = 'color';
            tierPlusColorField.type = tierMinusColorField.type = 'color';
        } catch (e) {
            // IE throws if attempt to set type to 'color'.
        }

        var tierColorFields = [tierColorField, tierColorField2, tierColorField3];
        var colorListPlus = makeElement('i', null, { className: 'fa fa-plus-circle' });
        var colorListMinus = makeElement('i', null, { className: 'fa fa-minus-circle' });
        var numColors = 1;
        var colorListElement = makeElement('td', tierColorFields);
        var setNumColors = function setNumColors(n) {
            numColors = n;
            for (var i = 0; i < n; ++i) {
                tierColorFields[i].style.display = 'block';
            }for (var i = n; i < tierColorFields.length; ++i) {
                tierColorFields[i].style.display = 'none';
            }
        };
        colorListPlus.addEventListener('click', function (ev) {
            if (numColors < 3) {
                setNumColors(numColors + 1);
                changeColor(null);
            }
        }, false);
        colorListMinus.addEventListener('click', function (ev) {
            if (numColors > 1) {
                setNumColors(numColors - 1);
                changeColor(null);
            }
        }, false);

        var tierMinField = makeElement('input', null, { type: 'text', value: '0.0' });
        var tierMaxField = makeElement('input', null, { type: 'text', value: '10.0' });
        var tierMinToggle = makeElement('input', null, { type: 'checkbox' });
        var tierMaxToggle = makeElement('input', null, { type: 'checkbox' });

        var quantLeapToggle = makeElement('input', null, { type: 'checkbox', checked: tier.quantLeapThreshold !== undefined });
        var quantLeapThreshField = makeElement('input', null, { type: 'text', value: tier.quantLeapThreshold, disabled: !quantLeapToggle.checked });

        var tierHeightField = makeElement('input', null, { type: 'text', value: '50' });

        var bumpToggle = makeElement('input', null, { type: 'checkbox' });
        var bumpLimit = makeElement('input', null, { type: 'text' });
        var labelToggle = makeElement('input', null, { type: 'checkbox' });

        var mainStyle = null;
        if (tier.stylesheet.styles.length > 0) {
            var s = mainStyle = tier.stylesheet.styles[0].style;
        }

        var refresh = function refresh() {
            if (typeof tier.config.name === 'string') tierNameField.value = tier.config.name;else tierNameField.value = tier.dasSource.name;

            tierPinnedToggle.checked = tier.pinned;

            if (tier.forceHeight) {
                tierHeightField.value = '' + tier.forceHeight;
            } else if (mainStyle && mainStyle.HEIGHT) {
                tierHeightField.value = '' + mainStyle.HEIGHT;
            }

            if (typeof tier.quantLeapThreshold == 'number') {
                quantLeapToggle.checked = true;
                quantLeapThreshField.disabled = false;
                if (parseFloat(quantLeapThreshField.value) != tier.quantLeapThreshold) quantLeapThreshField.value = tier.quantLeapThreshold;
            } else {
                quantLeapToggle.checked = false;
                quantLeapThreshField.disabled = true;
            }

            if (typeof tier.subtierMax == 'number') {
                bumpLimit.value = '' + tier.subtierMax;
            } else {
                bumpLimit.value = '' + (tier.dasSource.subtierMax || tier.browser.defaultSubtierMax);
            }

            if (tier.stylesheet.styles.length > 0) {
                var s = null;
                var isQuantitative = false,
                    isSimpleQuantitative = false;
                var ssScale = tier.browser.zoomForCurrentScale();
                var activeStyleCount = 0;

                for (var si = 0; si < tier.stylesheet.styles.length; ++si) {
                    var sh = tier.stylesheet.styles[si];
                    if (sh.zoom && sh.zoom != ssScale) {
                        continue;
                    }
                    ++activeStyleCount;
                    var ss = tier.stylesheet.styles[si].style;

                    if (!s) {
                        s = mainStyle = ss;
                    }

                    if (ss.glyph == 'LINEPLOT' || ss.glyph == 'HISTOGRAM' || ss.glyph == 'GRADIENT' || isDasBooleanTrue(ss.SCATTER)) {
                        if (!isQuantitative) s = mainStyle = ss;
                        isQuantitative = true;
                    }
                }
                if (!s) {
                    return;
                }

                semanticBanner.style.display = activeStyleCount == tier.stylesheet.styles.length ? 'none' : 'inline';

                isSimpleQuantitative = isQuantitative && activeStyleCount == 1;
                var isGradient = s.COLOR2 || s.BGGRAD;

                if (isQuantitative) {
                    minRow.style.display = 'table-row';
                    maxRow.style.display = 'table-row';
                    bumpRow.style.display = 'none';
                    labelRow.style.display = 'none';
                } else {
                    minRow.style.display = 'none';
                    maxRow.style.display = 'none';
                    bumpRow.style.display = 'table-row';
                    bumpToggle.checked = isDasBooleanTrue(mainStyle.BUMP);
                    bumpLimit.disabled = !isDasBooleanTrue(mainStyle.BUMP);
                    labelRow.style.display = 'table-row';
                    labelToggle.checked = isDasBooleanTrue(mainStyle.LABEL);
                }

                if (isSimpleQuantitative) {
                    styleRow.style.display = 'table-row';
                    colorRow.style.display = 'table-row';
                } else {
                    styleRow.style.display = 'none';
                    colorRow.style.display = 'none';
                }

                var numColors = 1;
                if (s.COLOR1) {
                    tierColorField.value = dasColourForName(s.COLOR1).toHexString();
                    if (s.COLOR2) {
                        tierColorField2.value = dasColourForName(s.COLOR2).toHexString();
                        if (s.COLOR3) {
                            tierColorField3.value = dasColourForName(s.COLOR3).toHexString();
                            numColors = 3;
                        } else {
                            numColors = 2;
                        }
                    }
                } else {
                    if (s.glyph == 'LINEPLOT' || s.glyph == 'DOT' && s.FGCOLOR) {
                        tierColorField.value = dasColourForName(s.FGCOLOR).toHexString();
                    } else if (s.BGCOLOR) {
                        tierColorField.value = dasColourForName(s.BGCOLOR).toHexString();
                    }
                }
                setNumColors(numColors);

                if (s._plusColor) tierPlusColorField.value = dasColourForName(s._plusColor).toHexString() || s._plusColor;
                if (s._minusColor) tierMinusColorField.value = dasColourForName(s._minusColor).toHexString() || s._minusColor;
                if (isDasBooleanTrue(s.SCATTER)) {
                    glyphField.value = 'SCATTER';
                } else {
                    glyphField.value = s.glyph;
                }

                var setMinValue, setMaxValue;
                if (s.MIN !== undefined) {
                    var x = parseFloat(s.MIN);
                    if (!isNaN(x)) setMinValue = x;
                }
                if (!tier.forceMinDynamic && (s.MIN !== undefined || tier.forceMin !== undefined)) {
                    tierMinToggle.checked = true;
                    tierMinField.disabled = false;
                } else {
                    tierMinToggle.checked = false;
                    tierMinField.disabled = true;
                }

                if (s.MAX !== undefined) {
                    var x = parseFloat(s.MAX);
                    if (!isNaN(x)) setMaxValue = x;
                }
                if (!tier.forceMaxDynamic && (s.MAX !== undefined || tier.forceMax !== undefined)) {
                    tierMaxToggle.checked = true;
                    tierMaxField.disabled = false;
                } else {
                    tierMaxToggle.checked = false;
                    tierMaxField.disabled = true;
                }

                if (tier.forceMin != undefined) {
                    setMinValue = tier.forceMin;
                }
                if (tier.forceMax != undefined) {
                    setMaxValue = tier.forceMax;
                }
                if (typeof setMinValue == 'number' && setMinValue != parseFloat(tierMinField.value)) {
                    tierMinField.value = setMinValue;
                }
                if (typeof setMaxValue == 'number' && setMaxValue != parseFloat(tierMaxField.value)) {
                    tierMaxField.value = setMaxValue;
                }

                var seqStyle = getSeqStyle(tier.stylesheet);
                if (seqStyle) {
                    seqMismatchRow.style.display = 'table-row';
                    seqMismatchToggle.checked = seqStyle.__SEQCOLOR === 'mismatch';
                    seqInsertRow.style.display = 'table-row';
                    seqInsertToggle.checked = isDasBooleanTrue(seqStyle.__INSERTIONS);
                    seqIgnoreQualsRow.style.display = 'table-row';
                    seqIgnoreQualsToggle.checked = seqStyle.__disableQuals === undefined || seqStyle.__disableQuals === false;
                    console.log(seqStyle.__disableQuals);
                } else {
                    seqMismatchRow.style.display = 'none';
                    seqInsertRow.style.display = 'none';
                    seqIgnoreQualsRow.style.display = 'none';
                }

                if (seqStyle && seqMismatchToggle.checked && !isSimpleQuantitative) {
                    plusStrandColorRow.style.display = 'table-row';
                    minusStrandColorRow.style.display = 'table-row';
                } else {
                    plusStrandColorRow.style.display = 'none';
                    minusStrandColorRow.style.display = 'none';
                }
            }

            if (isQuantitative && tier.browser.sourceAdapterIsCapable(tier.featureSource, 'quantLeap')) quantLeapRow.style.display = 'table-row';else quantLeapRow.style.display = 'none';
        };

        var seqMismatchToggle = makeElement('input', null, { type: 'checkbox' });
        var seqMismatchRow = makeElement('tr', [makeElement('th', 'Highlight mismatches & strands'), makeElement('td', seqMismatchToggle)]);
        seqMismatchToggle.addEventListener('change', function (ev) {
            var nss = copyStylesheet(tier.stylesheet);
            var seqStyle = getSeqStyle(nss);
            seqStyle.__SEQCOLOR = seqMismatchToggle.checked ? 'mismatch' : 'base';
            tier.mergeStylesheet(nss);
        });

        var seqInsertToggle = makeElement('input', null, { type: 'checkbox' });
        var seqInsertRow = makeElement('tr', [makeElement('th', 'Show insertions'), makeElement('td', seqInsertToggle)]);
        seqInsertToggle.addEventListener('change', function (ev) {
            var nss = copyStylesheet(tier.stylesheet);
            var seqStyle = getSeqStyle(nss);
            seqStyle.__INSERTIONS = seqInsertToggle.checked ? 'yes' : 'no';
            tier.mergeStylesheet(nss);
        });

        var seqIgnoreQualsToggle = makeElement('input', null, { type: 'checkbox' });
        var seqIgnoreQualsRow = makeElement('tr', [makeElement('th', 'Reflect base quality as base color transparency'), makeElement('td', seqIgnoreQualsToggle)]);
        seqIgnoreQualsToggle.addEventListener('change', function (ev) {
            var nss = copyStylesheet(tier.stylesheet);
            var seqStyle = getSeqStyle(nss);
            seqStyle.__disableQuals = !seqIgnoreQualsToggle.checked;
            console.log(seqStyle.__disableQuals);
            tier.mergeStylesheet(nss);
        });

        var styleRow = makeElement('tr', [makeElement('th', 'Style'), makeElement('td', glyphField)]);
        var colorRow = makeElement('tr', [makeElement('th', ['Colour(s)', colorListPlus, colorListMinus]), colorListElement]);
        var plusStrandColorRow = makeElement('tr', [makeElement('th', 'Plus Strand Color'), makeElement('td', tierPlusColorField)]);
        var minusStrandColorRow = makeElement('tr', [makeElement('th', 'Minus Strand Color'), makeElement('td', tierMinusColorField)]);
        var minRow = makeElement('tr', [makeElement('th', 'Min value'), makeElement('td', [tierMinToggle, ' ', tierMinField])]);
        var maxRow = makeElement('tr', [makeElement('th', 'Max value'), makeElement('td', [tierMaxToggle, ' ', tierMaxField])]);
        var quantLeapRow = makeElement('tr', [makeElement('th', 'Threshold leap:'), makeElement('td', [quantLeapToggle, ' ', quantLeapThreshField])]);
        var bumpRow = makeElement('tr', [makeElement('th', 'Bump overlaps'), makeElement('td', [bumpToggle, ' limit: ', bumpLimit])]);
        var labelRow = makeElement('tr', [makeElement('th', 'Label features'), makeElement('td', labelToggle)]);

        var tierTable = makeElement('table', [makeElement('tr', [makeElement('th', 'Name', {}, { width: '150px', textAlign: 'right' }), tierNameField]), makeElement('tr', [makeElement('th', 'Pin to top'), tierPinnedToggle]), makeElement('tr', [makeElement('th', 'Height'), makeElement('td', tierHeightField)]), styleRow, colorRow, plusStrandColorRow, minusStrandColorRow, minRow, maxRow, quantLeapRow, bumpRow, labelRow, seqMismatchRow, seqInsertRow, seqIgnoreQualsRow]);

        refresh();

        tierForm.appendChild(tierTable);

        var resetButton = makeElement('button', 'Reset track', { className: 'btn' }, { marginLeft: 'auto', marginRight: 'auto', display: 'block' });
        resetButton.addEventListener('click', function (ev) {
            tier.setConfig({});
        }, false);
        tierForm.appendChild(resetButton);

        tierNameField.addEventListener('input', function (ev) {
            tier.mergeConfig({ name: tierNameField.value });
        }, false);

        tierPinnedToggle.addEventListener('change', function (ev) {
            tier.mergeConfig({ pinned: tierPinnedToggle.checked });
        }, false);

        for (var ci = 0; ci < tierColorFields.length; ++ci) {
            tierColorFields[ci].addEventListener('change', changeColor, false);
        }

        tierPlusColorField.addEventListener('change', changeColor, false);
        tierMinusColorField.addEventListener('change', changeColor, false);

        glyphField.addEventListener('change', function (ev) {
            var nss = mutateStylesheet(function (ts) {
                if (glyphField.value === 'SCATTER') {
                    ts.SCATTER = true;
                    ts.glyph = 'DOT';
                    ts.SIZE = '3';
                } else {
                    ts.glyph = glyphField.value;
                    ts.SCATTER = undefined;
                }
                setStyleColors(ts);
            });
            tier.mergeStylesheet(nss);
        }, false);

        tierMinToggle.addEventListener('change', function (ev) {
            var conf = { forceMinDynamic: !tierMinToggle.checked };
            tierMinField.disabled = !tierMinToggle.checked;
            var x = parseFloat(tierMinField.value);
            if (tierMinToggle.checked && typeof x == 'number' && !isNaN(x)) conf.forceMin = parseFloat(x);
            tier.mergeConfig(conf);
        });
        tierMinField.addEventListener('input', function (ev) {
            var x = parseFloat(tierMinField.value);
            if (typeof x == 'number' && !isNaN(x)) tier.mergeConfig({ forceMin: x });
        }, false);

        tierMaxToggle.addEventListener('change', function (ev) {
            var conf = { forceMaxDynamic: !tierMaxToggle.checked };
            tierMaxField.disabled = !tierMaxToggle.checked;
            var x = parseFloat(tierMaxField.value);
            if (tierMaxToggle.checked && typeof x == 'number' && !isNaN(x)) conf.forceMax = parseFloat(x);
            tier.mergeConfig(conf);
        });
        tierMaxField.addEventListener('input', function (ev) {
            var x = parseFloat(tierMaxField.value);
            if (typeof x == 'number' && !isNaN(x)) tier.mergeConfig({ forceMax: x });
        }, false);

        tierHeightField.addEventListener('input', function (ev) {
            var x = parseFloat(tierHeightField.value);
            if (typeof x == 'number' && !isNaN(x)) tier.mergeConfig({ height: Math.min(500, x | 0) });
        }, false);

        var updateQuant = function updateQuant() {
            quantLeapThreshField.disabled = !quantLeapToggle.checked;
            if (quantLeapToggle.checked) {
                var x = parseFloat(quantLeapThreshField.value);
                if (typeof x == 'number' && !isNaN(x)) {
                    tier.mergeConfig({ quantLeapThreshold: parseFloat(quantLeapThreshField.value) });
                }
            } else {
                tier.mergeConfig({ quantLeapThreshold: null });
            }
        };
        quantLeapToggle.addEventListener('change', function (ev) {
            updateQuant();
        }, false);
        quantLeapThreshField.addEventListener('input', function (ev) {
            updateQuant();
        }, false);

        labelToggle.addEventListener('change', function (ev) {
            var nss = mutateStylesheet(function (style) {
                style.LABEL = labelToggle.checked ? 'yes' : 'no';
            });
            tier.mergeStylesheet(nss);
        }, false);
        bumpToggle.addEventListener('change', function (ev) {
            var nss = mutateStylesheet(function (style) {
                style.BUMP = bumpToggle.checked ? 'yes' : 'no';
            });
            tier.mergeStylesheet(nss);
        }, false);
        bumpLimit.addEventListener('input', function (ev) {
            var x = parseInt(bumpLimit.value);
            if (typeof x == 'number' && x > 0) {
                tier.mergeConfig({ subtierMax: x });
            }
        }, false);

        this.showToolPanel(tierForm);
        this.setUiMode('tier');

        tier.addTierListener(refresh);

        var currentScale = tier.browser.scale;
        tier.browser.addViewListener(function () {
            if (tier.browser.scale != currentScale) {
                currentScale = tier.browser.scale;
                refresh();
            }
        });
    }
};

function getSeqStyle(stylesheet) {
    for (var si = 0; si < stylesheet.styles.length; ++si) {
        var ss = stylesheet.styles[si].style;
        if (ss.glyph === '__SEQUENCE') {
            return ss;
        }
    }
}

},{"./cbrowser":6,"./color":9,"./das":10,"./sourcecompare":39,"./utils":55}],51:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// tier.js: (try) to encapsulate the functionality of a browser tier.
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
    var shallowCopy = utils.shallowCopy;
    var pushnew = utils.pushnew;
    var miniJSONify = utils.miniJSONify;
    var arrayIndexOf = utils.arrayIndexOf;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;

    var sha1 = require('./sha1');
    var b64_sha1 = sha1.b64_sha1;

    var style = require('./style');
    var StyleFilter = style.StyleFilter;
    var StyleFilterSet = style.StyleFilterSet;

    var sc = require('./sourcecompare');
    var sourceDataURI = sc.sourceDataURI;

    var Promise = require('es6-promise').Promise;

    var sortFeatures = require('./features').sortFeatures;
}

var __tier_idSeed = 0;

function DasTier(browser, source, config, background) {
    var _this = this;

    this.config = config || {};
    this.id = 'tier' + ++__tier_idSeed;
    this.browser = browser;
    this.dasSource = shallowCopy(source);
    this.background = background;

    this.viewport = makeElement('canvas', null, { width: '' + ((this.browser.featurePanelWidth | 0) + 2000),
        height: "30",
        className: 'viewport_12_5' }, { position: 'inline-block',
        margin: '0px', border: '0px' });
    this.viewportHolder = makeElement('div', this.viewport, { className: 'viewport-holder_12_5' }, { background: background,
        position: 'absolute',
        padding: '0px', margin: '0px',
        border: '0px',
        left: '-1000px',
        minHeight: '200px' });
    this.overlay = makeElement('canvas', null, { width: +(this.browser.featurePanelWidth | 0),
        height: "30",
        className: 'viewport-overlay' });

    this.notifier = makeElement('div', '', { className: 'notifier' });
    this.notifierHolder = makeElement('div', this.notifier, { className: 'notifier-holder' });
    this.quantOverlay = makeElement('canvas', null, { width: '50', height: "56",
        className: 'quant-overlay' });

    this.removeButton = makeElement('i', null, { className: 'fa fa-times' });
    this.bumpButton = makeElement('i', null, { className: 'fa fa-plus-circle' });
    this.loaderButton = browser.makeLoader(16);
    this.loaderButton.style.display = 'none';
    this.infoElement = makeElement('div', this.dasSource.desc, { className: 'track-label-info' });
    this.nameButton = makeElement('div', [], { className: 'tier-tab' });
    this.nameButton.appendChild(this.removeButton);
    if (source.pennant) {
        this.nameButton.appendChild(makeElement('img', null, { src: source.pennant, width: '16', height: '16' }));
    } else if (source.mapping) {
        var version = null;
        if (this.browser.chains[source.mapping]) version = this.browser.chains[source.mapping].coords.version;
        if (version) this.nameButton.appendChild(makeElement('span', '' + version, null, { fontSize: '8pt', background: 'black', color: 'white', paddingLeft: '3px', paddingRight: '3px', paddingTop: '1px', paddingBottom: '1px', marginLeft: '2px', borderRadius: '10px' }));
    }
    this.nameElement = makeElement('span', source.name);
    this.nameButton.appendChild(makeElement('span', [this.nameElement, this.infoElement], { className: 'track-name-holder' }));
    this.nameButton.appendChild(this.bumpButton);
    this.nameButton.appendChild(this.loaderButton);

    this.label = makeElement('span', [this.nameButton], { className: 'btn-group track-label' });

    var classes = 'tier' + (source.className ? ' ' + source.className : '');
    this.row = makeElement('div', [this.viewportHolder, this.overlay, this.quantOverlay], { className: classes });

    if (!background) {
        this.row.style.background = 'none';
    }

    if (!browser.noDefaultLabels) this.row.appendChild(this.label);
    this.row.appendChild(this.notifierHolder);

    this.layoutHeight = 25;
    this.bumped = true;
    this.styleIdSeed = 0;
    if (source.quantLeapThreshold) {
        this.quantLeapThreshold = source.quantLeapThreshold;
    }
    if (this.dasSource.collapseSuperGroups) {
        this.bumped = false;
    }
    this.layoutWasDone = false;

    if (source.featureInfoPlugin) {
        this.addFeatureInfoPlugin(source.featureInfoPlugin);
    }

    this.initSources();

    var thisB = this;

    if (this.featureSource && this.featureSource.addReadinessListener) {
        this.readinessListener = function (ready) {
            thisB.notify(ready, -1);
        };
        this.featureSource.addReadinessListener(this.readinessListener);
    }

    if (this.featureSource && this.featureSource.addActivityListener) {
        this.activityListener = function (busy) {
            if (busy > 0) {
                thisB.loaderButton.style.display = 'inline-block';
            } else {
                thisB.loaderButton.style.display = 'none';
            }
            thisB.browser.pingActivity();
        };
        this.featureSource.addActivityListener(this.activityListener);
    }

    this.listeners = [];
    this.featuresLoadedListeners = [];
    this.destroyListeners = [];
    this.firstRenderPromise = new Promise(function (resolve, reject) {
        return _this._resolveFirstRenderPromise = resolve;
    });

    if (this.featureSource && this.featureSource.getDefaultFIPs && !source.noSourceFeatureInfo) {
        this.featureSource.getDefaultFIPs(function (fip) {
            if (fip) thisB.addFeatureInfoPlugin(fip);
        }, this);
    }
}

DasTier.prototype.destroy = function () {
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
        for (var _iterator = this.destroyListeners[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var handler = _step.value;

            try {
                handler(this);
            } catch (ex) {
                console.log(ex);
            }
        }
    } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
    } finally {
        try {
            if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
            }
        } finally {
            if (_didIteratorError) {
                throw _iteratorError;
            }
        }
    }

    if (this.featureSource.removeReadinessListener) {
        this.featureSource.removeReadinessListener(this.readinessListener);
    }
    if (this.featureSource.removeActivityListener) {
        this.featureSource.removeActivityListener(this.activityListener);
    }
};

DasTier.prototype.setBackground = function (b) {
    this.background = b;
    this.viewportHolder.style.background = b;
};

DasTier.prototype.toString = function () {
    return this.id;
};

DasTier.prototype.addFeatureInfoPlugin = function (p) {
    if (!this.featureInfoPlugins) this.featureInfoPlugins = [];
    this.featureInfoPlugins.push(p);
};

DasTier.prototype.addDescriptionContent = function (content) {
    if (typeof content === 'string') {
        content = makeElement('div', content);
    }

    this.infoElement.appendChild(content);
};

DasTier.prototype.init = function () {
    var tier = this;
    return new Promise(function (resolve, reject) {

        if (tier.dasSource.style) {
            tier.setStylesheet({ styles: tier.dasSource.style });
            resolve(tier);
        } else {
            tier.status = 'Fetching stylesheet';
            tier.fetchStylesheet(function (ss, err) {
                if (err || !ss) {
                    tier.error = 'No stylesheet';
                    var ss = new DASStylesheet();
                    var defStyle = new DASStyle();
                    defStyle.glyph = 'BOX';
                    defStyle.BGCOLOR = 'blue';
                    defStyle.FGCOLOR = 'black';
                    ss.pushStyle({ type: 'default' }, null, defStyle);
                    tier.setStylesheet(ss);
                } else {
                    tier.setStylesheet(ss);
                    if (ss.geneHint) {
                        tier.dasSource.collapseSuperGroups = true;
                        tier.bumped = false;
                        tier.updateLabel();
                    }
                    tier._updateFromConfig();
                }
                resolve(tier);
            });
        }
    });
};

DasTier.prototype.setStylesheet = function (ss) {
    this.baseStylesheet = shallowCopy(ss);
    for (var si = 0; si < this.baseStylesheet.styles.length; ++si) {
        var sh = this.baseStylesheet.styles[si] = shallowCopy(this.baseStylesheet.styles[si]);
        sh._methodRE = sh._labelRE = sh._typeRE = null;
        sh.style = shallowCopy(sh.style);
        sh.style.id = 'style' + ++this.styleIdSeed;
    }
    this.baseStylesheetValidity = b64_sha1(miniJSONify(this.baseStylesheet));
    this._updateFromConfig();
};

DasTier.prototype.getSource = function () {
    return this.featureSource;
};

DasTier.prototype.getDesiredTypes = function (scale) {
    var sfs = this.getActiveStyleFilters(scale);
    if (sfs) return sfs.typeList();
};

DasTier.prototype.getActiveStyleFilters = function (scale) {
    var ssScale = this.browser.zoomForCurrentScale();

    if (this.stylesheet) {
        var styles = new StyleFilterSet();
        var ss = this.stylesheet.styles;
        for (var si = 0; si < ss.length; ++si) {
            var sh = ss[si];
            if (!sh.zoom || sh.zoom == ssScale) {
                styles.add(new StyleFilter(sh.type, sh.method, sh.label));
            }
        }
        return styles;
    }
};

DasTier.prototype.needsSequence = function (scale) {
    var sourceConfigNeedsSeq = function sourceConfigNeedsSeq(s) {
        if (s.bamURI || s.bamBlob || s.bwgURI || s.bwgBlob) {
            return true;
        } else if (s.overlay) {
            return s.overlay.some(sourceConfigNeedsSeq);
        } else {
            return false;
        }
    };

    if (this.sequenceSource && scale < 5) {
        return true;
    } else if (sourceConfigNeedsSeq(this.dasSource) && scale < 20) {
        return true;
    }
    return false;
};

DasTier.prototype.setFeatures = function (chr, coverage, scale, features, sequence) {
    this.currentFeatures = features;
    this.currentSequence = sequence;
    this.knownChr = chr;
    this.knownCoverage = coverage;

    // only notify features loaded, if they are valid
    if (features) {
        sortFeatures(this);
        this.notifyFeaturesLoaded();
    }
};

DasTier.prototype.draw = function () {
    console.log("Use browser.getTierRenderer(tier).drawTier(tier)");
};

DasTier.prototype.findNextFeature = function (chr, pos, dir, fedge, callback) {
    if (this.quantLeapThreshold) {
        var width = this.browser.viewEnd - this.browser.viewStart + 1;
        pos = pos + width * dir / 2 | 0;
        this.featureSource.quantFindNextFeature(chr, pos, dir, this.quantLeapThreshold, callback);
    } else {
        if (this.knownCoverage && pos >= this.knownCoverage.min() && pos <= this.knownCoverage.max()) {
            if (this.currentFeatures) {
                var bestFeature = null;
                for (var fi = 0; fi < this.currentFeatures.length; ++fi) {
                    var f = this.currentFeatures[fi];
                    if (!f.min || !f.max) {
                        continue;
                    }
                    if (f.parents && f.parents.length > 0) {
                        continue;
                    }
                    if (dir < 0) {
                        if (fedge == 1 && f.max >= pos && f.min < pos) {
                            if (!bestFeature || f.min > bestFeature.min || f.min == bestFeature.min && f.max < bestFeature.max) {
                                bestFeature = f;
                            }
                        } else if (f.max < pos) {
                            if (!bestFeature || f.max > bestFeature.max || f.max == bestFeature.max && f.min < bestFeature.min || f.min == bestFeature.mmin && bestFeature.max >= pos) {
                                bestFeature = f;
                            }
                        }
                    } else {
                        if (fedge == 1 && f.min <= pos && f.max > pos) {
                            if (!bestFeature || f.max < bestFeature.max || f.max == bestFeature.max && f.min > bestFeature.min) {
                                bestFeature = f;
                            }
                        } else if (f.min > pos) {
                            if (!bestFeature || f.min < bestFeature.min || f.min == bestFeature.min && f.max > bestFeature.max || f.max == bestFeature.max && bestFeature.min <= pos) {
                                bestFeature = f;
                            }
                        }
                    }
                }
                if (bestFeature) {
                    return callback(bestFeature);
                }
                if (dir < 0) {
                    pos = this.browser.knownSpace.min;
                } else {
                    pos = this.browser.knownSpace.max;
                }
            }
        }

        this.trySourceFNF(chr, pos, dir, callback);
    }
};

DasTier.prototype.trySourceFNF = function (chr, pos, dir, callback) {
    var self = this;
    this.featureSource.findNextFeature(chr, pos, dir, function (feature) {
        if (!feature) callback(feature);

        var ss = self.browser.getSequenceSource();
        if (!ss) // We're probably in trouble, but return anyway.
            callback(feature);

        ss.getSeqInfo(feature.segment, function (si) {
            if (si) callback(feature);else self.trySourceFNF(feature.segment, dir > 0 ? 10000000000 : 0, dir, callback);
        });
    });
};

DasTier.prototype.updateLabel = function () {
    this.bumpButton.className = this.bumped ? 'fa fa-minus-circle' : 'fa fa-plus-circle';
    if (this.dasSource.collapseSuperGroups) {
        this.bumpButton.style.display = 'inline-block';
    } else {
        this.bumpButton.style.display = 'none';
    }
};

DasTier.prototype.updateHeight = function () {
    this.currentHeight = Math.max(Math.max(this.layoutHeight, this.label.clientHeight + 2), this.browser.minTierHeight);
    this.row.style.height = '' + this.currentHeight + 'px';
    this.browser.updateHeight();
};

DasTier.prototype.drawOverlay = function () {
    var t = this;
    var b = this.browser;
    var retina = b.retina && window.devicePixelRatio > 1;
    var height = t.viewport.getBoundingClientRect().height;

    t.overlay.height = retina ? height * 2 : height;
    t.overlay.width = retina ? b.featurePanelWidth * 2 : b.featurePanelWidth;

    var g = t.overlay.getContext('2d');
    if (retina) {
        g.scale(2, 2);
    }

    var origin = b.viewStart;
    var visStart = b.viewStart;
    var visEnd = b.viewEnd;

    if (this.overlayLabelCanvas) {
        var offset = (this.glyphCacheOrigin - this.browser.viewStart) * this.browser.scale;
        g.save();
        g.translate(offset, 0);
        var drawStart = -offset + 2;
        if (this.dasSource.tierGroup) drawStart += 15;
        this.overlayLabelCanvas.draw(g, drawStart, b.featurePanelWidth - offset);
        g.restore();
    }

    for (var hi = 0; hi < b.highlights.length; ++hi) {
        var h = b.highlights[hi];
        if ((h.chr === b.chr || h.chr === 'chr' + b.chr) && h.min < visEnd && h.max > visStart) {
            g.globalAlpha = b.defaultHighlightAlpha;
            g.fillStyle = b.defaultHighlightFill;
            g.fillRect((h.min - origin) * b.scale, 0, (h.max - h.min) * b.scale, t.overlay.height);
        }
    }

    // t.oorigin = b.viewStart;
    t.overlay.style.width = b.featurePanelWidth;
    t.overlay.style.height = height + 'px';
    t.overlay.style.left = '0px';
};

DasTier.prototype.updateStatus = function (status) {
    var self = this;
    if (status) {
        this.status = status;
        this._notifierToStatus();
        var sd = sourceDataURI(this.dasSource);
        if (window.location.protocol === 'https:' && sourceDataURI(this.dasSource).indexOf('http:') == 0 && !this.checkedHTTP) {
            this.checkedHTTP = true;
            this.browser.canFetchPlainHTTP().then(function (can) {
                if (!can) {
                    self.warnHTTP = true;
                    self._notifierToStatus();
                }
            });
        }
    } else {
        if (this.status) {
            this.status = null;
            this._notifierToStatus();
        }
    }
};

DasTier.prototype.notify = function (message, timeout) {
    if (typeof timeout !== 'number') timeout = 2000;

    if (this.notifierFadeTimeout) {
        clearTimeout(this.notifierFadeTimeout);
        this.notifierFadeTimeout = null;
    }

    if (message) {
        this._notifierOn(message);
        if (timeout > 0) {
            var thisB = this;
            this.notifierFadeTimeout = setTimeout(function () {
                thisB._notifierToStatus();
            }, timeout);
        }
    } else {
        this._notifierToStatus();
    }
};

DasTier.prototype._notifierOn = function (message, warnHTTP) {
    removeChildren(this.notifier);
    if (warnHTTP) {
        this.notifier.appendChild(makeElement('span', [makeElement('a', '[HTTP Warning] ', { href: this.browser.httpWarningURL, target: "_blank" }), message]));
    } else {
        this.notifier.textContent = message;
    }
    this.notifier.style.opacity = 0.8;
};

DasTier.prototype._notifierOff = function () {
    this.notifier.style.opacity = 0;
};

DasTier.prototype._notifierToStatus = function () {
    if (this.status) {
        this._notifierOn(this.status, this.warnHTTP);
    } else {
        this._notifierOff();
    }
};

DasTier.prototype.setConfig = function (config) {
    this.config = config || {};
    this._updateFromConfig();
    this.notifyTierListeners();
};

DasTier.prototype.mergeStylesheet = function (newStyle) {
    this.mergeConfig({
        stylesheet: newStyle,
        stylesheetValidity: this.baseStylesheetValidity
    });
};

DasTier.prototype.mergeConfig = function (newConfig) {
    for (var k in newConfig) {
        this.config[k] = newConfig[k];
    }
    this._updateFromConfig();
    this.notifyTierListeners();
};

DasTier.prototype._updateFromConfig = function () {
    var needsRefresh = false;
    var needsReorder = false;

    if (typeof this.config.name === 'string') this.nameElement.textContent = this.config.name;else this.nameElement.textContent = this.dasSource.name;

    var wantedHeight = this.config.height || this.dasSource.forceHeight;
    if (wantedHeight != this.forceHeight) {
        this.forceHeight = wantedHeight;
        needsRefresh = true;
    }

    if (this.forceMinDynamic != this.config.forceMinDynamic) {
        this.forceMinDynamic = this.config.forceMinDynamic;
        needsRefresh = true;
    }

    var forceMin = this.config.forceMin != undefined ? this.config.forceMin : this.dasSource.forceMin;
    if (this.forceMin != forceMin) {
        this.forceMin = forceMin;
        needsRefresh = true;
    }

    if (this.forceMaxDynamic != this.config.forceMaxDynamic) {
        this.forceMaxDynamic = this.config.forceMaxDynamic;
        needsRefresh = true;
    }

    var forceMax = this.config.forceMax != undefined ? this.config.forceMax : this.dasSource.forceMax;
    if (this.forceMax != forceMax) {
        this.forceMax = forceMax;
        needsRefresh = true;
    }

    var quantLeapThreshold = null;
    if (this.config.quantLeapThreshold !== undefined) quantLeapThreshold = this.config.quantLeapThreshold;else if (this.dasSource.quantLeapThreshold !== undefined) quantLeapThreshold = this.dasSource.quantLeapThreshold;
    if (quantLeapThreshold != this.quantLeapThreshold) {
        this.quantLeapThreshold = quantLeapThreshold;
        needsRefresh = true;
    }

    // Possible FIXME -- are there cases where style IDs need to be reassigned?
    var stylesheet = null;
    if (this.config.stylesheetValidity == this.baseStylesheetValidity) stylesheet = this.config.stylesheet;
    stylesheet = stylesheet || this.baseStylesheet;
    if (this.stylesheet !== stylesheet) {
        this.stylesheet = stylesheet;
        needsRefresh = true;
    }

    var wantedPinned = this.config.pinned !== undefined ? this.config.pinned : this.dasSource.pinned;
    if (wantedPinned !== this.pinned) {
        this.pinned = wantedPinned;
        needsReorder = true;
    }

    var wantedSubtierMax = _typeof(this.config.subtierMax === 'number') ? this.config.subtierMax : this.dasSource.subtierMax || this.browser.defaultSubtierMax;
    if (wantedSubtierMax != this.subtierMax) {
        this.subtierMax = wantedSubtierMax;
        needsRefresh = true;
    }

    var wantedBumped;
    if (this.config.bumped !== undefined) {
        wantedBumped = this.config.bumped;
    } else if (this.dasSource.bumped !== undefined) {
        wantedBumped = this.dasSource.bumped;
    } else {
        wantedBumped = this.dasSource.collapseSuperGroups ? false : true;
    }
    if (wantedBumped !== this.bumped) {
        this.bumped = wantedBumped;
        needsRefresh = true;
        this.updateLabel();
    }

    if (needsRefresh) this.scheduleRedraw();

    if (needsReorder) this.browser.reorderTiers();
};

DasTier.prototype.scheduleRedraw = function () {
    if (!this.currentFeatures) return;

    var tier = this;

    if (!this.redrawTimeout) {
        this.redrawTimeout = setTimeout(function () {
            sortFeatures(tier); // Some render actions mutate the results of this,
            // => need to re-run before refreshing.
            var renderer = tier.browser.getTierRenderer(tier);
            renderer.drawTier(tier);
            tier.redrawTimeout = null;
        }, 10);
    }
};
DasTier.prototype.clearTierListeners = function () {
    this.listeners = [];
};

DasTier.prototype.addTierListener = function (l) {
    this.listeners.push(l);
};

DasTier.prototype.removeTierListener = function (l) {
    var idx = arrayIndexOf(this.listeners, l);
    if (idx >= 0) {
        this.listeners.splice(idx, 1);
    }
};

DasTier.prototype.notifyTierListeners = function (change) {
    for (var li = 0; li < this.listeners.length; ++li) {
        try {
            this.listeners[li](change);
        } catch (e) {
            console.log(e);
        }
    }
    this.browser.notifyTier();
};

DasTier.prototype.clearFeaturesLoadedListeners = function () {
    this.featuresLoadedListeners = [];
};

DasTier.prototype.addFeaturesLoadedListener = function (handler) {
    this.featuresLoadedListeners.push(handler);
};

DasTier.prototype.removeFeaturesLoadedListener = function (handler) {
    var idx = arrayIndexOf(this.featuresLoadedListeners, handler);
    if (idx >= 0) {
        this.featuresLoadedListeners.splice(idx, 1);
    }
};

DasTier.prototype.addDestroyListener = function (handler) {
    this.destroyListeners.push(handler);
};

DasTier.prototype.removeDestroyListener = function (handler) {
    var idx = arrayIndexOf(this.destroyListeners, handler);
    if (idx >= 0) {
        this.destroyListeners.splice(idx, 1);
    }
};

DasTier.prototype.notifyFeaturesLoaded = function () {
    for (var li = 0; li < this.featuresLoadedListeners.length; ++li) {
        try {
            this.featuresLoadedListeners[li].call(this);
        } catch (e) {
            console.log(e);
        }
    }
};

DasTier.prototype.wasRendered = function () {
    this._resolveFirstRenderPromise();
};

if (typeof module !== 'undefined') {
    module.exports = {
        DasTier: DasTier
    };

    // Imported for side effects
    var fd = require('./feature-draw');
}

},{"./das":10,"./feature-draw":20,"./features":22,"./sha1":37,"./sourcecompare":39,"./style":41,"./utils":55,"es6-promise":59}],52:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// track-adder.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var sc = require('./sourcecompare');
    var sourcesAreEqual = sc.sourcesAreEqual;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
    var Observed = utils.Observed;

    var thub = require('./thub');
    var THUB_COMPARE = thub.THUB_COMPARE;
    var connectTrackHub = thub.connectTrackHub;

    var domui = require('./domui');
    var makeTreeTableSection = domui.makeTreeTableSection;

    var probeResource = require('./probe').probeResource;

    // Most of this could disappear if we leave all probing to the probe module...
    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;
    var readInt = bin.readInt;

    var lh3utils = require('./lh3utils');
    var unbgzf = lh3utils.unbgzf;

    var bam = require('./bam');
    var BAM_MAGIC = bam.BAM_MAGIC;
    var BAI_MAGIC = bam.BAI_MAGIC;

    var tbi = require('./tabix');
    var TABIX_MAGIC = tbi.TABIX_MAGIC;

    var das = require('./das');
    var DASSource = das.DASSource;
    var DASSegment = das.DASSegment;
    var DASRegistry = das.DASRegistry;
    var coordsMatch = das.coordsMatch;

    var EncodeFetchable = require('./encode').EncodeFetchable;
}

Browser.prototype.currentlyActive = function (source) {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (sourcesAreEqual(this.tiers[ti].dasSource, source)) return this.tiers[ti];
    }
    return false;
};

Browser.prototype.makeButton = function (name, tooltip) {
    var regButton = makeElement('a', name, { href: '#' });
    if (tooltip) {
        this.makeTooltip(regButton, tooltip);
    }
    return makeElement('li', regButton);
};

function activateButton(addModeButtons, which) {
    for (var i = 0; i < addModeButtons.length; ++i) {
        var b = addModeButtons[i];
        if (b === which) {
            b.classList.add('active');
        } else {
            b.classList.remove('active');
        }
    }
}

Browser.prototype.showTrackAdder = function (ev) {
    if (this.uiMode === 'add') {
        this.hideToolPanel();
        this.setUiMode('none');
        return;
    }

    var thisB = this;

    var popup = makeElement('div', null, { className: 'dalliance' }, { width: '100%', display: 'inline-block', boxSizing: 'border-box', MozBoxSizing: 'border-box', verticalAlign: 'top', paddingRight: '15px' });

    var addModeButtons = [];
    var makeStab, makeStabObserver;

    if (!this.noRegistryTabs) {
        var regButton = this.makeButton('Registry', 'Browse compatible datasources from the DAS registry');
        addModeButtons.push(regButton);

        for (var m in this.mappableSources) {
            var mf = function mf(mm) {
                var mapButton = thisB.makeButton(thisB.chains[mm].srcTag, 'Browse datasources mapped from ' + thisB.chains[mm].srcTag);
                addModeButtons.push(mapButton);
                mapButton.addEventListener('click', function (ev) {
                    ev.preventDefault();ev.stopPropagation();
                    activateButton(addModeButtons, mapButton);
                    makeStab(thisB.mappableSources[mm], mm);
                }, false);
            };mf(m);
        }
    }

    var groupedDefaults = {};
    for (var si = 0; si < this.defaultSources.length; ++si) {
        var s = this.defaultSources[si];
        var g = s.group || 'Defaults';
        if (groupedDefaults[g]) {
            groupedDefaults[g].push(s);
        } else {
            groupedDefaults[g] = [s];
        }
    }

    var makeHubButton = function makeHubButton(tdb) {
        var hub = tdb.hub;
        var hubMenuButton = makeElement('i', null, { className: 'fa fa-list-alt' }, { cursor: 'context-menu' });
        var label = hub.altLabel || hub.shortLabel || 'Unknown';
        if (tdb.mapping) label = label + ' (' + tdb.genome + ')';
        var hbContent = makeElement('span', [label, ' ', hubMenuButton]);
        var hubButton = thisB.makeButton(hbContent, hub.longLabel);
        hubButton.hub = tdb;
        addModeButtons.push(hubButton);

        hubButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            activateButton(addModeButtons, hubButton);
            removeChildren(stabHolder);
            var loader = thisB.makeLoader(24);
            loader.style.marginLeft = 'auto';
            loader.style.marginRight = 'auto';
            loader.style.marginTop = '100px';
            stabHolder.appendChild(makeElement('div', loader, null, { textAlign: 'center' }));

            refreshButton.style.display = 'none';
            addButton.style.display = 'none';
            canButton.style.display = 'none';

            tdb.getTracks(function (tracks, err) {
                if (err) {
                    console.log(err);
                }

                makeHubStab(tracks);
            });
        }, false);

        hubMenuButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();

            var removeHubItem = makeElement('li', makeElement('a', 'Remove hub'));
            var allOnItem = makeElement('li', makeElement('a', 'Enable all'));
            var allOffItem = makeElement('li', makeElement('a', 'Disable all'));
            var hubMenu = makeElement('ul', [removeHubItem, allOnItem, allOffItem], { className: 'dropdown-menu' }, { display: 'block' });

            var mx = ev.clientX,
                my = ev.clientY;
            mx += document.documentElement.scrollLeft || document.body.scrollLeft;
            my += document.documentElement.scrollTop || document.body.scrollTop;

            hubMenu.style.position = 'absolute';
            hubMenu.style.top = '' + (my + 10) + 'px';
            hubMenu.style.left = '' + (mx - 30) + 'px';
            thisB.hPopupHolder.appendChild(hubMenu);

            var clickCatcher = function clickCatcher(ev) {
                console.log('cc');
                document.body.removeEventListener('click', clickCatcher, true);
                thisB.hPopupHolder.removeChild(hubMenu);
            };
            document.body.addEventListener('click', clickCatcher, true);

            removeHubItem.addEventListener('click', function (ev) {
                for (var hi = 0; hi < thisB.hubObjects.length; ++hi) {
                    if (thisB.hubObjects[hi].absURL == tdb.absURL) {
                        thisB.hubObjects.splice(hi, 1);
                        break;
                    }
                }
                for (var hi = 0; hi < thisB.hubs.length; ++hi) {
                    var hc = thisB.hubs[hi];
                    if (typeof hc === 'string') hc = { url: hc };
                    if (hc.url == tdb.hub.url && !hc.genome || hc.genome == tdb.genome) {
                        thisB.hubs.splice(hi, 1);
                        break;
                    }
                }

                thisB.notifyTier();

                modeButtonHolder.removeChild(hubButton);
                activateButton(addModeButtons, addHubButton);
                switchToHubConnectMode();
            }, false);

            allOnItem.addEventListener('click', function (ev) {
                tdb.getTracks(function (tracks, err) {
                    if (err) {
                        console.log(err);
                    }

                    for (var ti = 0; ti < tracks.length; ++ti) {
                        var ds = tracks[ti].toDallianceSource();
                        if (!thisB.currentlyActive(ds)) {
                            thisB.addTier(ds);
                        }
                    }
                });
            }, false);

            allOffItem.addEventListener('click', function (ev) {
                tdb.getTracks(function (tracks, err) {
                    if (err) {
                        console.log(err);
                    }

                    for (var ti = 0; ti < tracks.length; ++ti) {
                        var ds = tracks[ti].toDallianceSource();
                        if (thisB.currentlyActive(ds)) {
                            thisB.removeTier(ds);
                        }
                    }
                });
            }, false);
        }, false);

        return hubButton;
    };

    var firstDefButton = null;
    var firstDefSources = null;
    for (var g in groupedDefaults) {
        (function (g, ds) {
            var defButton = thisB.makeButton(g, 'Browse the default set of data for this browser');
            defButton.addEventListener('click', function (ev) {
                ev.preventDefault();ev.stopPropagation();
                activateButton(addModeButtons, defButton);
                makeStab(new Observed(ds));
            }, false);
            addModeButtons.push(defButton);

            if (!firstDefButton || thisB.defaultTrackAdderTab && thisB.defaultTrackAdderTab == g) {
                firstDefButton = defButton;
                firstDefSources = ds;
            }
        })(g, groupedDefaults[g]);
    }
    var custButton = this.makeButton('DAS', 'Add data using the DAS protocol');
    addModeButtons.push(custButton);
    var binButton = this.makeButton('Files', 'Add data from files on disk or the web');
    addModeButtons.push(binButton);

    for (var hi = 0; hi < this.hubObjects.length; ++hi) {
        var hub = this.hubObjects[hi];
        makeHubButton(hub);
    }

    var addHubButton = this.makeButton('+', 'Connect to a new track-hub');
    addModeButtons.push(addHubButton);

    var modeButtonHolder = makeElement('ul', addModeButtons, { className: 'nav nav-tabs' }, { marginBottom: '0px' });
    popup.appendChild(modeButtonHolder);

    var custURL, custName, custCS, custQuant, custFile, custUser, custPass;
    var customMode = false;
    var dataToFinalize = null;

    var asform = makeElement('form', null, {}, { display: 'inline-block', width: '100%' });
    asform.addEventListener('submit', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        doAdd();
        return false;
    }, true);
    var stabHolder = makeElement('div');
    stabHolder.style.position = 'relative';
    stabHolder.style.overflow = 'scroll';
    // stabHolder.style.height = '500px';
    asform.appendChild(stabHolder);

    var __mapping;
    var __sourceHolder;

    makeStab = function makeStab(msources, mapping) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'none';
        canButton.style.display = 'none';
        if (__sourceHolder) {
            __sourceHolder.removeListener(makeStabObserver);
        }
        __mapping = mapping;
        __sourceHolder = msources;
        __sourceHolder.addListenerAndFire(makeStabObserver);
    };

    makeStabObserver = function makeStabObserver(msources) {
        customMode = false;
        var buttons = [];
        removeChildren(stabHolder);
        if (!msources) {
            stabHolder.appendChild(makeElement('p', 'Dalliance was unable to retrieve data source information from the DAS registry, please try again later'));
            return;
        }

        var stabBody = makeElement('tbody', null, { className: 'table table-striped table-condensed' }, { width: '100%' });
        var stab = makeElement('table', stabBody, { className: 'table table-striped table-condensed' }, { width: '100%', tableLayout: 'fixed' });
        var idx = 0;

        var sources = [];
        for (var i = 0; i < msources.length; ++i) {
            sources.push(msources[i]);
        }

        sources.sort(function (a, b) {
            return a.name.toLowerCase().trim().localeCompare(b.name.toLowerCase().trim());
        });

        for (var i = 0; i < sources.length; ++i) {
            var source = sources[i];
            var r = makeElement('tr');

            var bd = makeElement('td', null, {}, { width: '30px' });
            bd.style.textAlign = 'center';
            if (!source.props || source.props.cors) {
                var b = makeElement('input');
                b.type = 'checkbox';
                b.dalliance_source = source;
                b.id = 'sourcecb' + i;
                if (__mapping) {
                    b.dalliance_mapping = __mapping;
                }
                // b.checked = thisB.currentlyActive(source);
                bd.appendChild(b);
                buttons.push(b);
                b.addEventListener('change', function (ev) {
                    if (ev.target.checked) {
                        thisB.addTier(ev.target.dalliance_source);
                    } else {
                        thisB.removeTier(ev.target.dalliance_source);
                    }
                });
            } else {
                bd.appendChild(document.createTextNode('!'));
                thisB.makeTooltip(bd, "This data source isn't accessible because it doesn't support CORS");
            }
            r.appendChild(bd);
            var ld = makeElement('label', null, { htmlFor: 'sourcecb' + i });
            ld.appendChild(document.createTextNode(source.name));
            if (source.desc && source.desc.length > 0) {
                thisB.makeTooltip(ld, source.desc);
            }
            r.appendChild(makeElement('td', ld));
            stabBody.appendChild(r);
            ++idx;
        }

        var setChecks = function setChecks() {
            for (var bi = 0; bi < buttons.length; ++bi) {
                var b = buttons[bi];
                var t = thisB.currentlyActive(b.dalliance_source);
                if (t) {
                    b.checked = true;
                } else {
                    b.checked = false;
                }
            }
        };
        setChecks();
        thisB.addTierListener(function (l) {
            setChecks();
        });

        stabHolder.appendChild(stab);
    };

    function makeHubStab(tracks) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'none';
        canButton.style.display = 'none';

        customMode = false;
        removeChildren(stabHolder);

        var buttonIdSeed = 0;

        var ttab = makeElement('div', null, {}, { width: '100%' });
        var sources = [];
        for (var i = 0; i < tracks.length; ++i) {
            sources.push(tracks[i]);
        }

        sources.sort(function (a, b) {
            return a.shortLabel.toLowerCase().trim().localeCompare(b.shortLabel.toLowerCase().trim());
        });

        var groups = [];
        var tops = [];

        for (var ti = 0; ti < sources.length; ++ti) {
            var track = sources[ti];
            if (track.children && track.children.length > 0 && track.container != 'multiWig') {
                groups.push(track);
            } else {
                tops.push(track);
            }
        }
        if (tops.length > 0) {
            groups.push({
                shortLabel: 'Others',
                priority: -100000000,
                children: tops });
        }

        groups.sort(THUB_COMPARE);

        var buttons = [];
        for (var gi = 0; gi < groups.length; ++gi) {
            var group = groups[gi];
            var dg = group;
            if (!dg.dimensions && dg._parent && dg._parent.dimensions) dg = dg._parent;

            var dprops = {};
            if (dg.dimensions) {
                var dtoks = dg.dimensions.split(/(\w+)=(\w+)/);
                for (var dti = 0; dti < dtoks.length - 2; dti += 3) {
                    dprops[dtoks[dti + 1]] = dtoks[dti + 2];
                }
            }

            if (dprops.dimX && dprops.dimY) {
                var dimX = dprops.dimX,
                    dimY = dprops.dimY;
                var sgX = dg.subgroups[dimX];
                var sgY = dg.subgroups[dimY];

                var trks = {};
                for (var ci = 0; ci < group.children.length; ++ci) {
                    var child = group.children[ci];
                    var vX = child.sgm[dimX],
                        vY = child.sgm[dimY];
                    if (!trks[vX]) trks[vX] = {};
                    trks[vX][vY] = child;
                }

                var matrix = makeElement('table', null, { className: 'table table-striped table-condensed' }, { tableLayout: 'fixed' });
                {
                    var header = makeElement('tr');
                    header.appendChild(makeElement('th', null, {}, { width: '150px', height: '100px' })); // blank corner element
                    for (var si = 0; si < sgX.titles.length; ++si) {
                        var h = makeElement('th', makeElement('div', sgX.titles[si], {}, { transform: 'rotate(-60deg)',
                            transformOrigin: '0% 100%',
                            webkitTransform: 'rotate(-60deg) translate(20px,10px)',
                            webkitTransformOrigin: '0% 100%',
                            textAlign: 'left' }), {}, { width: '35px',
                            height: '100px',
                            verticalAlign: 'bottom' });
                        header.appendChild(h);
                    }
                    matrix.appendChild(header);
                }

                var mbody = makeElement('tbody', null, { className: 'table table-striped table-condensed' });
                for (var yi = 0; yi < sgY.titles.length; ++yi) {
                    var vY = sgY.tags[yi];
                    var row = makeElement('tr');
                    row.appendChild(makeElement('th', sgY.titles[yi]), {});

                    for (var xi = 0; xi < sgX.titles.length; ++xi) {
                        var vX = sgX.tags[xi];
                        var cell = makeElement('td');
                        if (trks[vX] && trks[vX][vY]) {
                            var track = trks[vX][vY];
                            var ds = track.toDallianceSource();
                            if (!ds) continue;

                            var r = makeElement('tr');
                            var bd = makeElement('td');
                            bd.style.textAlign = 'center';

                            var b = makeElement('input');
                            b.type = 'checkbox';
                            b.dalliance_source = ds;
                            if (__mapping) {
                                b.dalliance_mapping = __mapping;
                            }
                            buttons.push(b);
                            cell.appendChild(b);
                            b.addEventListener('change', function (ev) {
                                if (ev.target.checked) {
                                    thisB.addTier(ev.target.dalliance_source);
                                } else {
                                    thisB.removeTier(ev.target.dalliance_source);
                                }
                            });
                        }
                        row.appendChild(cell);
                    }
                    mbody.appendChild(row);
                }
                matrix.appendChild(mbody);
                ttab.appendChild(makeTreeTableSection(group.shortLabel, matrix, thisB.noDefaultHubGroupShow ? false : gi == 0));
            } else {
                var stabBody = makeElement('tbody', null, { className: 'table table-striped table-condensed' });
                var stab = makeElement('table', stabBody, { className: 'table table-striped table-condensed' }, { width: '100%', tableLayout: 'fixed' });
                var idx = 0;

                group.children.sort(THUB_COMPARE);
                for (var i = 0; i < group.children.length; ++i) {
                    var buttonId = 'hb' + ++buttonIdSeed;

                    var track = group.children[i];
                    var ds = track.toDallianceSource();
                    if (!ds) continue;

                    var r = makeElement('tr');
                    var bd = makeElement('td', null, {}, { width: '30px' });
                    bd.style.textAlign = 'center';

                    var b = makeElement('input');
                    b.type = 'checkbox';
                    b.dalliance_source = ds;
                    b.id = buttonId;
                    if (__mapping) {
                        b.dalliance_mapping = __mapping;
                    }
                    buttons.push(b);
                    bd.appendChild(b);
                    b.addEventListener('change', function (ev) {
                        if (ev.target.checked) {
                            thisB.addTier(ev.target.dalliance_source);
                        } else {
                            thisB.removeTier(ev.target.dalliance_source);
                        }
                    });

                    r.appendChild(bd);
                    var ld = makeElement('label', null, { htmlFor: buttonId });
                    ld.appendChild(document.createTextNode(track.shortLabel));
                    if (track.longLabel && track.longLabel.length > 0) {
                        thisB.makeTooltip(ld, track.longLabel);
                    }
                    r.appendChild(makeElement('td', ld));
                    stabBody.appendChild(r);
                    ++idx;
                }

                if (groups.length > 1 || group.shortLabel !== 'Others') {
                    ttab.appendChild(makeTreeTableSection(group.shortLabel, stab, thisB.noDefaultHubGroupShow ? false : gi == 0));
                } else {
                    ttab.appendChild(stab);
                }
            }
        }

        var setChecks = function setChecks() {
            for (var bi = 0; bi < buttons.length; ++bi) {
                var b = buttons[bi];
                var t = thisB.currentlyActive(b.dalliance_source);
                if (t) {
                    b.checked = true;
                    b.disabled = t.sequenceSource != null;
                } else {
                    b.checked = false;
                }
            }
        };
        setChecks();
        thisB.addTierListener(function (l) {
            setChecks();
        });

        stabHolder.appendChild(ttab);
    }

    if (regButton) {
        regButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            activateButton(addModeButtons, regButton);
            makeStab(thisB.availableSources);
        }, false);
    }

    binButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        switchToBinMode();
    }, false);
    addHubButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        switchToHubConnectMode();
    }, false);

    function switchToBinMode() {
        activateButton(addModeButtons, binButton);
        customMode = 'bin';

        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'none';

        removeChildren(stabHolder);
        var pageHolder = makeElement('div', null, {}, { paddingLeft: '10px', paddingRight: '10px' });
        pageHolder.appendChild(makeElement('h3', 'Add custom URL-based data'));
        pageHolder.appendChild(makeElement('p', ['You can add indexed binary data hosted on an web server that supports CORS (', makeElement('a', 'full details', { href: 'http://www.biodalliance.org/bin.html' }), ').  Currently supported formats are bigwig, bigbed, and indexed BAM.']));

        pageHolder.appendChild(makeElement('br'));
        pageHolder.appendChild(document.createTextNode('URL: '));
        custURL = makeElement('input', '', { size: 80, value: 'http://www.biodalliance.org/datasets/ensGene.bb' }, { width: '100%' });
        pageHolder.appendChild(custURL);

        pageHolder.appendChild(makeElement('br'));
        pageHolder.appendChild(makeElement('b', '- or -'));
        pageHolder.appendChild(makeElement('br'));
        pageHolder.appendChild(document.createTextNode('File: '));
        custFile = makeElement('input', null, { type: 'file', multiple: 'multiple' });
        pageHolder.appendChild(custFile);

        pageHolder.appendChild(makeElement('p', 'Clicking the "Add" button below will initiate a series of test queries.'));

        stabHolder.appendChild(pageHolder);
        custURL.focus();
    }

    function switchToHubConnectMode() {
        activateButton(addModeButtons, addHubButton);
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'none';

        customMode = 'hub-connect';
        refreshButton.style.visibility = 'hidden';

        removeChildren(stabHolder);

        var pageHolder = makeElement('div', null, {}, { paddingLeft: '10px', paddingRight: '10px' });
        pageHolder.appendChild(makeElement('h3', 'Connect to a track hub.'));
        pageHolder.appendChild(makeElement('p', ['Enter the top-level URL (usually points to a file called "hub.txt") of a UCSC-style track hub']));

        custURL = makeElement('input', '', { size: 120, value: 'http://www.biodalliance.org/datasets/testhub/hub.txt' }, { width: '100%' });
        pageHolder.appendChild(custURL);

        stabHolder.appendChild(pageHolder);

        custURL.focus();
    }

    custButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        switchToCustomMode();
    }, false);

    function switchToCustomMode() {
        activateButton(addModeButtons, custButton);
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'none';

        customMode = 'das';

        removeChildren(stabHolder);

        var customForm = makeElement('div', null, {}, { paddingLeft: '10px', paddingRight: '10px' });
        customForm.appendChild(makeElement('h3', 'Add custom DAS data'));
        customForm.appendChild(makeElement('p', 'This interface is intended for adding custom or lab-specific data.  Public data can be added more easily via the registry interface.'));

        customForm.appendChild(document.createTextNode('URL: '));
        customForm.appendChild(makeElement('br'));
        custURL = makeElement('input', '', { size: 80, value: 'http://www.derkholm.net:8080/das/medipseq_reads/' }, { width: '100%' });
        customForm.appendChild(custURL);

        customForm.appendChild(makeElement('p', 'Clicking the "Add" button below will initiate a series of test queries.  If the source is password-protected, you may be prompted to enter credentials.'));
        stabHolder.appendChild(customForm);

        custURL.focus();
    }

    var addButton = makeElement('button', 'Add', { className: 'btn btn-primary' });
    addButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        doAdd();
    }, false);

    function doAdd() {
        if (customMode) {
            if (customMode === 'das') {
                var curi = custURL.value.trim();
                if (!/^.+:\/\//.exec(curi)) {
                    curi = 'http://' + curi;
                }
                var nds = new DASSource({ name: 'temporary', uri: curi });
                tryAddDAS(nds);
            } else if (customMode === 'bin') {
                var fileList = custFile.files;

                if (fileList && fileList.length > 0) {
                    tryAddMultiple(fileList);
                } else {
                    var curi = custURL.value.trim();
                    if (!/^.+:\/\//.exec(curi)) {
                        curi = 'http://' + curi;
                    }
                    var source = { uri: curi };
                    var lcuri = curi.toLowerCase();
                    if (lcuri.indexOf("https://www.encodeproject.org/") == 0 && lcuri.indexOf("@@download") >= 0) {
                        source.transport = 'encode';
                    }
                    tryAddBin(source);
                }
            } else if (customMode === 'reset') {
                switchToCustomMode();
            } else if (customMode === 'reset-bin') {
                switchToBinMode();
            } else if (customMode === 'reset-hub') {
                switchToHubConnectMode();
            } else if (customMode === 'prompt-bai') {
                var fileList = custFile.files;
                if (fileList && fileList.length > 0 && fileList[0]) {
                    dataToFinalize.baiBlob = fileList[0];
                    completeBAM(dataToFinalize);
                } else {
                    promptForBAI(dataToFinalize);
                }
            } else if (customMode === 'prompt-tbi') {
                var fileList = custFile.files;
                if (fileList && fileList.length > 0 && fileList[0]) {
                    dataToFinalize.indexBlob = fileList[0];
                    completeTabixVCF(dataToFinalize);
                } else {
                    promptForTabix(dataToFinalize);
                }
            } else if (customMode === 'finalize' || customMode === 'finalize-bin') {
                dataToFinalize.name = custName.value;
                var m = custCS.value;
                if (m != '__default__') {
                    dataToFinalize.mapping = m;
                } else {
                    dataToFinalize.mapping = undefined;
                }
                if (custQuant) {
                    dataToFinalize.maxbins = custQuant.checked;
                }

                if (custUser.value.length > 1 && custPass.value.length > 1) {
                    dataToFinalize.xUser = custUser.value;
                    dataToFinalize.xPass = custPass.value;
                }

                thisB.addTier(dataToFinalize);

                if (customMode == 'finalize-bin') switchToBinMode();else switchToCustomMode();
            } else if (customMode === 'hub-connect') {
                var curi = custURL.value.trim();
                if (!/^.+:\/\//.exec(curi)) {
                    curi = 'http://' + curi;
                }

                tryAddHub(curi);
            } else if (customMode === 'multiple') {
                for (var mi = 0; mi < multipleSet.length; ++mi) {
                    var s = multipleSet[mi];
                    if (s.hidden) continue;

                    if (s.tier_type == 'bam' && !s.indexBlob && !s.indexUri) continue;
                    if (s.tier_type == 'tabix' && !s.indexBlob && !s.indexUri) continue;

                    var nds = makeSourceConfig(s);
                    if (nds) {
                        nds.noPersist = true;
                        thisB.addTier(nds);
                    }
                }

                switchToBinMode();
            }
        } else {
            thisB.removeAllPopups();
        }
    };

    function tryAddHub(curi, opts, retry) {
        opts = opts || {};
        for (var hi = 0; hi < thisB.hubObjects.length; ++hi) {
            var h = thisB.hubObjects[hi];
            if (h.hub.url == curi) {
                for (var bi = 0; bi < addModeButtons.length; ++bi) {
                    if (addModeButtons[bi].hub == h) {
                        activateButton(addModeButtons, addModeButtons[bi]);
                    }
                }
                h.getTracks(function (tracks, err) {
                    if (err) {
                        console.log(err);
                    }
                    makeHubStab(tracks);
                });
                return;
            }
        }

        connectTrackHub(curi, function (hub, err) {
            if (err) {
                if (!retry) {
                    return tryAddHub(curi, { credentials: true }, true);
                }
                removeChildren(stabHolder);
                stabHolder.appendChild(makeElement('h2', 'Error connecting to track hub'));
                stabHolder.appendChild(makeElement('p', err));
                customMode = 'reset-hub';
                return;
            } else {
                var bestHub = null;
                var bestHubButton = null;
                for (var genome in hub.genomes) {
                    var mapping = null;
                    var okay = false;

                    if (genome == thisB.coordSystem.ucscName) {
                        okay = true;
                    } else {
                        for (var mid in thisB.chains) {
                            var m = thisB.chains[mid];
                            if (genome == m.coords.ucscName) {
                                mapping = mid;
                                okay = true;
                            }
                        }
                    }

                    if (okay) {
                        var hc = { url: curi, genome: genome };
                        if (opts.credentials) hc.credentials = true;
                        if (mapping) {
                            hc.mapping = mapping;
                            hub.genomes[genome].mapping = mapping;
                        }
                        thisB.hubs.push(hc);
                        thisB.hubObjects.push(hub.genomes[genome]);

                        var hubButton = makeHubButton(hub.genomes[genome]);
                        modeButtonHolder.appendChild(hubButton);

                        if (!mapping || !bestHub) {
                            bestHub = hub.genomes[genome];
                            bestHubButton = hubButton;
                        }
                    }
                }

                if (bestHub) {
                    thisB.notifyTier();
                    activateButton(addModeButtons, bestHubButton);
                    bestHub.getTracks(function (tracks, err) {
                        makeHubStab(tracks);
                    });
                } else {
                    removeChildren(stabHolder);
                    stabHolder.appendChild(makeElement('h2', 'No data for this genome'));
                    stabHolder.appendChild(makeElement('p', 'This URL appears to be a valid track-hub, but it doesn\'t contain any data for the coordinate system of this browser'));
                    stabHolder.appendChild(makeElement('p', 'coordSystem.ucscName = ' + thisB.coordSystem.ucscName));
                    customMode = 'reset-hub';
                    return;
                }
            }
        }, opts);
    }

    var tryAddDAS = function tryAddDAS(nds, retry) {
        var knownSpace = thisB.knownSpace;
        if (!knownSpace) {
            alert("Can't confirm track-addition to an uninit browser.");
            return;
        }
        var tsm = Math.max(knownSpace.min, (knownSpace.min + knownSpace.max - 100) / 2) | 0;
        var testSegment = new DASSegment(knownSpace.chr, tsm, Math.min(tsm + 99, knownSpace.max));
        nds.features(testSegment, {}, function (features, status) {
            if (status) {
                if (!retry) {
                    nds.credentials = true;
                    tryAddDAS(nds, true);
                } else {
                    removeChildren(stabHolder);
                    stabHolder.appendChild(makeElement('h2', 'Custom data not found'));
                    stabHolder.appendChild(makeElement('p', 'DAS uri: ' + nds.uri + ' is not answering features requests'));
                    customMode = 'reset';
                    return;
                }
            } else {
                var nameExtractPattern = new RegExp('/([^/]+)/?$');
                var match = nameExtractPattern.exec(nds.uri);
                if (match) {
                    nds.name = match[1];
                }

                tryAddDASxSources(nds);
                return;
            }
        });
    };

    function tryAddDASxSources(nds, retry) {
        var uri = nds.uri;
        if (retry) {
            var match = /(.+)\/[^\/]+\/?/.exec(uri);
            if (match) {
                uri = match[1] + '/sources';
            }
        }
        function sqfail() {
            if (!retry) {
                return tryAddDASxSources(nds, true);
            } else {
                return addDasCompletionPage(nds);
            }
        }
        new DASRegistry(uri, { credentials: nds.credentials }).sources(function (sources) {
            if (!sources || sources.length == 0) {
                return sqfail();
            }

            var fs = null;
            if (sources.length == 1) {
                fs = sources[0];
            } else {
                for (var i = 0; i < sources.length; ++i) {
                    if (sources[i].uri === nds.uri) {
                        fs = sources[i];
                        break;
                    }
                }
            }

            var coordsDetermined = false,
                quantDetermined = false;
            if (fs) {
                nds.name = fs.name;
                nds.desc = fs.desc;
                if (fs.maxbins) {
                    nds.maxbins = true;
                } else {
                    nds.maxbins = false;
                }
                if (fs.capabilities) {
                    nds.capabilities = fs.capabilities;
                }
                quantDetermined = true;

                if (fs.coords && fs.coords.length == 1) {
                    var coords = fs.coords[0];
                    if (coordsMatch(coords, thisB.coordSystem)) {
                        coordsDetermined = true;
                    } else if (thisB.chains) {
                        for (var k in thisB.chains) {
                            if (coordsMatch(coords, thisB.chains[k].coords)) {
                                nds.mapping = k;
                                coordsDetermined = true;
                            }
                        }
                    }
                }
            }
            return addDasCompletionPage(nds, coordsDetermined, quantDetermined);
        }, function () {
            return sqfail();
        });
    }

    var makeSourceConfig = function makeSourceConfig(s) {
        var nds = { name: s.name };
        if (s.credentials) nds.credentials = s.credentials;

        if (s.mapping && s.mapping != '__default__') nds.mapping = s.mapping;

        if (s.transport) nds.transport = s.transport;

        if (s.tier_type == 'bwg') {
            if (s.blob) nds.bwgBlob = s.blob;else if (s.uri) nds.bwgURI = s.uri;
            return nds;
        } else if (s.tier_type == 'bam') {
            if (s.blob) {
                nds.bamBlob = s.blob;
                nds.baiBlob = s.indexBlob;
            } else {
                nds.bamURI = s.uri;
                nds.baiURI = s.indexUri;
            }
            return nds;
        } else if (s.tier_type == 'tabix') {
            nds.tier_type = 'tabix';
            nds.payload = s.payload;
            if (s.blob) {
                nds.blob = s.blob;
                nds.indexBlob = s.indexBlob;
            } else {
                nds.uri = s.uri;
                nds.indexUri = s.indexUri;
            }
            return nds;
        } else if (s.tier_type == 'memstore') {
            nds.tier_type = 'memstore';
            nds.payload = s.payload;
            if (s.blob) nds.blob = s.blob;else nds.uri = s.uri;
            return nds;
        }
    };

    var tryAddBin = function tryAddBin(source) {
        probeResource(source, function (source, err) {
            if (err) {
                removeChildren(stabHolder);
                var tabError = makeElement('div');
                tabError.appendChild(makeElement('h2', "Couldn't access custom data"));
                tabError.appendChild(makeElement('p', '' + err));
                stabHolder.appendChild(tabError);
                console.log(source);
                if (window.location.protocol === 'https:' && source.uri.indexOf('http:') == 0) {
                    thisB.canFetchPlainHTTP().then(function (can) {
                        if (!can) {
                            tabError.appendChild(makeElement('p', [makeElement('strong', 'HTTP warning: '), 'you may not be able to access HTTP resources from an instance of Biodalliance which you are accessing via HTTPS.', makeElement('a', '[More info]', { href: thisB.httpWarningURL, target: "_blank" })]));
                        }
                    });
                }
                customMode = 'reset-bin';
            } else {
                var nds = makeSourceConfig(source);
                if (source.tier_type == 'bam') {
                    return completeBAM(nds);
                } else if (source.tier_type == 'tabix') {
                    return completeTabixVCF(nds);
                } else {
                    return addDasCompletionPage(nds, false, false, true);
                }
            }
        });
    };

    function promptForBAI(nds) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        customMode = 'prompt-bai';
        stabHolder.appendChild(makeElement('h2', 'Select an index file'));
        stabHolder.appendChild(makeElement('p', 'Dalliance requires a BAM index (.bai) file when displaying BAM data.  These normally accompany BAM files.  For security reasons, web applications like Dalliance can only access local files which you have explicity selected.  Please use the file chooser below to select the appropriate BAI file'));

        stabHolder.appendChild(document.createTextNode('Index file: '));
        custFile = makeElement('input', null, { type: 'file' });
        stabHolder.appendChild(custFile);
        dataToFinalize = nds;
    }

    function promptForTabix(nds) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        customMode = 'prompt-tbi';
        stabHolder.appendChild(makeElement('h2', 'Select an index file'));
        stabHolder.appendChild(makeElement('p', 'Dalliance requires a Tabix index (.tbi) file when displaying VCF data.  For security reasons, web applications like Dalliance can only access local files which you have explicity selected.  Please use the file chooser below to select the appropriate BAI file'));

        stabHolder.appendChild(document.createTextNode('Index file: '));
        custFile = makeElement('input', null, { type: 'file' });
        stabHolder.appendChild(custFile);
        dataToFinalize = nds;
    }

    function completeBAM(nds) {
        var indexF;
        if (nds.baiBlob) indexF = new BlobFetchable(nds.baiBlob);else if (nds.transport == 'encode') indexF = new EncodeFetchable(nds.bamURI + '.bai');else indexF = new URLFetchable(nds.bamURI + '.bai', { credentials: nds.credentials });

        indexF.slice(0, 256).fetch(function (r) {
            var hasBAI = false;
            if (r) {
                var ba = new Uint8Array(r);
                var magic2 = readInt(ba, 0);
                hasBAI = magic2 == BAI_MAGIC;
            }
            if (hasBAI) {
                return addDasCompletionPage(nds, false, false, true);
            } else {
                return binFormatErrorPage('You have selected a valid BAM file, but a corresponding index (.bai) file was not found.  Please index your BAM (samtools index) and place the BAI file in the same directory');
            }
        });
    }

    function completeTabixVCF(nds) {
        var indexF;
        if (nds.indexBlob) {
            indexF = new BlobFetchable(nds.indexBlob);
        } else {
            indexF = new URLFetchable(nds.uri + '.tbi');
        }
        indexF.slice(0, 1 << 16).fetch(function (r) {
            var hasTabix = false;
            if (r) {
                var ba = new Uint8Array(r);
                if (ba[0] == 31 || ba[1] == 139) {
                    var unc = unbgzf(r);
                    ba = new Uint8Array(unc);
                    var m2 = readInt(ba, 0);
                    hasTabix = m2 == TABIX_MAGIC;
                }
            }
            if (hasTabix) {
                return addDasCompletionPage(nds, false, false, true);
            } else {
                return binFormatErrorPage('You have selected a valid VCF file, but a corresponding index (.tbi) file was not found.  Please index your VCF ("tabix -p vcf -f myfile.vcf.gz") and place the .tbi file in the same directory');
            }
        });
    }

    function binFormatErrorPage(message) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        message = message || 'Custom data format not recognized';
        stabHolder.appendChild(makeElement('h2', 'Error adding custom data'));
        stabHolder.appendChild(makeElement('p', message));
        stabHolder.appendChild(makeElement('p', 'Currently supported formats are bigBed, bigWig, and BAM.'));
        customMode = 'reset-bin';
        return;
    }

    var addDasCompletionPage = function addDasCompletionPage(nds, coordsDetermined, quantDetermined, quantIrrelevant) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        stabHolder.appendChild(makeElement('h2', 'Add custom data: step 2'));
        stabHolder.appendChild(document.createTextNode('Label: '));
        custName = makeElement('input', '', { value: nds.name });
        stabHolder.appendChild(custName);

        // stabHolder.appendChild(document.createTextNode('User: '));
        custUser = makeElement('input', '');
        // stabHolder.appendChild(custUser);
        //stabHolder.appendChild(document.createTextNode('Pass: '));
        custPass = makeElement('input', '');
        // stabHolder.appendChild(custPass);


        stabHolder.appendChild(makeElement('br'));
        stabHolder.appendChild(makeElement('br'));
        stabHolder.appendChild(makeElement('h4', 'Coordinate system: '));
        custCS = makeElement('select', null);
        custCS.appendChild(makeElement('option', thisB.nameForCoordSystem(thisB.coordSystem), { value: '__default__' }));
        if (thisB.chains) {
            for (var csk in thisB.chains) {
                var cs = thisB.chains[csk].coords;
                custCS.appendChild(makeElement('option', thisB.nameForCoordSystem(cs), { value: csk }));
            }
        }
        custCS.value = nds.mapping || '__default__';
        stabHolder.appendChild(custCS);

        if (coordsDetermined) {
            stabHolder.appendChild(makeElement('p', "(Based on server response, probably doesn't need changing.)"));
        } else {
            stabHolder.appendChild(makeElement('p', [makeElement('b', 'Warning: '), "unable to determine the correct value from server responses.  Please check carefully."]));
            stabHolder.appendChild(makeElement('p', "If you don't see the mapping you're looking for, please contact thomas@biodalliance.org"));
        }

        if (!quantIrrelevant) {
            stabHolder.appendChild(document.createTextNode('Quantitative: '));
            custQuant = makeElement('input', null, { type: 'checkbox', checked: true });
            if (typeof nds.maxbins !== 'undefined') {
                custQuant.checked = nds.maxbins;
            }
            stabHolder.appendChild(custQuant);
            if (quantDetermined) {
                stabHolder.appendChild(makeElement('p', "(Based on server response, probably doesn't need changing.)"));
            } else {
                stabHolder.appendChild(makeElement('p', [makeElement('b', "Warning: "), "unable to determine correct value.  If in doubt, leave checked."]));
            }
        }

        if (nds.bwgBlob) {
            stabHolder.appendChild(makeElement('p', [makeElement('b', 'Warning: '), 'data added from local file.  Due to the browser security model, the track will disappear if you reload Dalliance.']));
        }

        custName.focus();

        if (customMode === 'bin' || customMode === 'prompt-bai' || customMode === 'prompt-tbi') customMode = 'finalize-bin';else customMode = 'finalize';
        dataToFinalize = nds;
    };

    var multipleSet = null;
    var tryAddMultiple = function tryAddMultiple(fileList) {
        var newSources = multipleSet = [];
        customMode = 'multiple';
        for (var fi = 0; fi < fileList.length; ++fi) {
            var f = fileList[fi];
            if (f) {
                newSources.push({ blob: f });
            }
        }

        for (var fi = 0; fi < newSources.length; ++fi) {
            probeMultiple(newSources[fi]);
        }
        updateMultipleStatus();
    };

    var probeMultiple = function probeMultiple(ns) {
        probeResource(ns, function (source, err) {
            if (err) {
                source.error = err;
                console.log(err);
            }

            var usedIndices = [];
            var bams = {},
                tabixes = {};
            for (var si = 0; si < multipleSet.length; ++si) {
                var s = multipleSet[si];
                if (s.tier_type == 'bam' && !s.indexBlob) {
                    bams[s.blob.name] = s;
                }
                if (s.tier_type == 'tabix' && !s.indexBlob) {
                    tabixes[s.blob.name] = s;
                }
            }

            for (var si = 0; si < multipleSet.length; ++si) {
                var s = multipleSet[si];
                if (s.tier_type === 'bai') {
                    var baiPattern = new RegExp('(.+)\\.bai$');
                    var match = baiPattern.exec(s.blob.name);
                    if (match && bams[match[1]]) {
                        bams[match[1]].indexBlob = s.blob;
                        usedIndices.push(si);
                    }
                } else if (s.tier_type === 'tabix-index') {
                    var tbiPattern = new RegExp('(.+)\\.tbi$');
                    var match = tbiPattern.exec(s.blob.name);
                    if (match && tabixes[match[1]]) {
                        tabixes[match[1]].indexBlob = s.blob;
                        usedIndices.push(si);
                    }
                }
            }

            for (var bi = usedIndices.length - 1; bi >= 0; --bi) {
                multipleSet.splice(usedIndices[bi], 1);
            }

            updateMultipleStatus();
        });
    };

    var updateMultipleStatus = function updateMultipleStatus() {
        removeChildren(stabHolder);
        var needsIndex = false;
        var multTable = makeElement('table', multipleSet.filter(function (s) {
            return !s.hidden;
        }).map(function (s) {
            var row = makeElement('tr');
            row.appendChild(makeElement('td', s.name || s.blob.name));
            var typeContent;
            if (s.error) {
                typeContent = makeElement('span', 'Error', null, { color: 'red' });
            } else if (s.tier_type) {
                typeContent = s.payload || s.tier_type;
            } else {
                typeContent = thisB.makeLoader(16);
            }

            var ccs;
            var state = 'unknown';
            if (s.tier_type == 'bwg' || s.tier_type == 'memstore') {
                state = 'okay';
            } else if (s.tier_type == 'bam') {
                state = s.indexBlob ? 'okay' : 'needs-index';
            } else if (s.tier_type == 'tabix') {
                state = s.indexBlob ? 'okay' : 'needs-index';
            }

            if (state == 'okay') {
                ccs = makeElement('select', null, null, { width: '150px' });
                ccs.appendChild(makeElement('option', thisB.nameForCoordSystem(thisB.coordSystem), { value: '__default__' }));
                if (thisB.chains) {
                    for (var csk in thisB.chains) {
                        var cs = thisB.chains[csk].coords;
                        ccs.appendChild(makeElement('option', thisB.nameForCoordSystem(cs), { value: csk }));
                    }
                }
                ccs.value = s.mapping || '__default__';

                ccs.addEventListener('change', function (ev) {
                    s.mapping = ccs.value;
                    console.log(s);
                }, false);
            } else if (state == 'needs-index') {
                ccs = makeElement('span', 'Needs index', {}, { color: 'red' });
                needsIndex = true;
            }

            return makeElement('tr', [makeElement('td', s.name || s.blob.name), makeElement('td', typeContent), makeElement('td', ccs)]);
        }), { className: 'table table-striped table-condensed' });
        stabHolder.appendChild(multTable);

        if (needsIndex) {
            stabHolder.appendChild(makeElement('p', 'Some of these files are missing required index (.bai or .tbi) files.  For security reasons, web applications like Dalliance can only access local files which you have explicity selected.  Please use the file chooser below to select the appropriate index file'));
            stabHolder.appendChild(document.createTextNode('Index file(s): '));
            var indexFile = makeElement('input', null, { type: 'file', multiple: 'multiple' });
            stabHolder.appendChild(indexFile);
            indexFile.addEventListener('change', function (ev) {
                console.log('fileset changed');
                var fileList = indexFile.files || [];
                for (var fi = 0; fi < fileList.length; ++fi) {
                    var f = fileList[fi];
                    if (f) {
                        var ns = { blob: f, hidden: true };
                        multipleSet.push(ns);
                        probeMultiple(ns);
                    }
                }
            }, false);
        }
    };

    var canButton = makeElement('button', 'Cancel', { className: 'btn' });
    canButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        if (customMode === 'finalize-bin') switchToBinMode();else switchToCustomMode();
    }, false);

    var refreshButton = makeElement('button', 'Refresh', { className: 'btn' });
    refreshButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        thisB.queryRegistry(__mapping);
    }, false);
    this.makeTooltip(refreshButton, 'Click to re-fetch data from the DAS registry');

    var buttonHolder = makeElement('div', [addButton, ' ', canButton, ' ', refreshButton]);
    buttonHolder.style.margin = '10px';
    asform.appendChild(buttonHolder);

    popup.appendChild(asform);
    makeStab(thisB.availableSources);

    this.showToolPanel(popup);
    this.setUiMode('add');

    if (firstDefButton) {
        activateButton(addModeButtons, firstDefButton);
        makeStab(new Observed(firstDefSources));
    }
};

},{"./bam":1,"./bin":4,"./cbrowser":6,"./das":10,"./domui":12,"./encode":14,"./lh3utils":26,"./probe":31,"./sourcecompare":39,"./tabix":46,"./thub":48,"./utils":55}],53:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// trix.js: UCSC-style free text indices
//

"use strict";

function connectTrix(ix, ixx, callback) {
    ixx.fetchAsText(function (ixxData) {
        if (!ixxData) return callback(null, "Couldn't fetch index-index");

        var toks = ixxData.split(/(.+)([0-9A-F]{10})\n/);

        var keys = [];
        var offsets = [];
        for (var ti = 1; ti < toks.length; ti += 3) {
            keys.push(toks[ti]);
            offsets.push(parseInt(toks[ti + 1], 16));
        }

        return callback(new TrixIndex(keys, offsets, ix));
    });
}

function TrixIndex(keys, offsets, ix) {
    this.keys = keys;
    this.offsets = offsets;
    this.ix = ix;
}

TrixIndex.prototype.lookup = function (query, callback) {
    var ixslice;

    var qtag = (query + '     ').substring(0, 5).toLowerCase();
    for (var i = 0; i < this.keys.length; ++i) {
        if (qtag.localeCompare(this.keys[i]) < 0) {
            ixslice = this.ix.slice(this.offsets[i - 1], this.offsets[i] - this.offsets[i - 1]);
            break;
        }
    }

    if (!ixslice) {
        ixslice = this.ix.slice(this.offsets[this.offsets.length - 1]);
    }

    ixslice.fetchAsText(function (ist) {
        var lines = ist.split('\n');
        for (var li = 0; li < lines.length; ++li) {
            if (lines[li].indexOf(query.toLowerCase() + ' ') == 0) {
                return callback(lines[li].split(' '));
            }
        }
        return callback(null);
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        connectTrix: connectTrix
    };
}

},{}],54:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// twoBit.js: packed-binary reference sequences
//

"use strict";

if (typeof require !== 'undefined') {
    var bin = require('./bin');
    var readInt = bin.readInt;
    var readIntBE = bin.readIntBE;
    var readInt64BE = bin.readInt64BE,
        readInt64LE = bin.readInt64LE;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;
}

var TWOBIT_MAGIC = 0x1a412743;
var TWOBIT_MAGIC_BE = 0x4327411a;
var HEADER_BLOCK_SIZE = 12500;

function TwoBitFile() {}

function makeTwoBit(fetchable, cnt) {
    var tb = new TwoBitFile();
    tb.data = fetchable;
    var headerBlockSize = HEADER_BLOCK_SIZE;
    var headerBlocksFetched = 0;

    tb.data.slice(0, headerBlockSize).fetch(function (r) {
        if (!r) {
            return cnt(null, "Couldn't access data");
        }
        var ba = new Uint8Array(r);
        var magic = readInt(ba, 0);
        if (magic == TWOBIT_MAGIC) {
            tb.readInt = readInt;
            tb.readInt64 = readInt64LE;
        } else if (magic == TWOBIT_MAGIC_BE) {
            tb.readInt = readIntBE;
            tb.readInt64 = readInt64BE;
        } else {
            return cnt(null, "Not a .2bit file, magic=0x" + magic.toString(16));
        }

        tb.version = tb.readInt(ba, 4);
        if (tb.version < 0 || tb.version > 1) {
            return cnt(null, 'Unsupported version ' + tb.version);
        }

        tb.seqCount = tb.readInt(ba, 8);
        tb.seqDict = {};

        var p = 16,
            i = 0;
        var o = 0; // Offset of the current block if we need to fetch multiple header blocks.

        var parseSeqInfo = function parseSeqInfo() {
            while (i < tb.seqCount) {
                var ns = ba[p];
                if (p + ns + 2 + (tb.version == 0 ? 4 : 8) >= ba.length) {
                    headerBlocksFetched += headerBlockSize;
                    headerBlockSize = Math.max(HEADER_BLOCK_SIZE, Math.floor(headerBlocksFetched * tb.seqCount / i));
                    return tb.data.slice(o + p, headerBlockSize).fetch(function (r) {
                        o += p;
                        p = 0;
                        ba = new Uint8Array(r);
                        parseSeqInfo();
                    });
                } else {
                    ++p;
                    var name = '';
                    for (var j = 1; j <= ns; ++j) {
                        name += String.fromCharCode(ba[p++]);
                    }
                    if (tb.version == 0) {
                        var offset = tb.readInt(ba, p);
                        p += 4;
                    } else {
                        var offset = tb.readInt64(ba, p);
                        p += 8;
                    }
                    tb.seqDict[name] = new TwoBitSeq(tb, offset);
                    ++i;
                }
            }
            return cnt(tb);
        };

        parseSeqInfo();
    });
}

TwoBitFile.prototype.getSeq = function (chr) {
    var seq = this.seqDict[chr];
    if (!seq) {
        seq = this.seqDict['chr' + chr];
    }
    return seq;
};

TwoBitFile.prototype.fetch = function (chr, min, max, cnt) {
    var seq = this.getSeq(chr);
    if (!seq) {
        return cnt(null, "Couldn't find " + chr);
    } else if (max <= min) {
        return cnt('');
    } else {
        seq.fetch(min, max, cnt);
    }
};

function TwoBitSeq(tbf, offset) {
    this.tbf = tbf;
    this.offset = offset;
}

TwoBitSeq.prototype.init = function (cnt) {
    if (this.seqOffset) {
        return cnt();
    }

    var thisB = this;
    thisB.tbf.data.slice(thisB.offset, 8).fetch(function (r1) {
        if (!r1) {
            return cnt('Fetch failed');
        }
        var ba = new Uint8Array(r1);
        thisB._length = thisB.tbf.readInt(ba, 0);
        thisB.nBlockCnt = thisB.tbf.readInt(ba, 4);
        thisB.tbf.data.slice(thisB.offset + 8, thisB.nBlockCnt * 8 + 4).fetch(function (r2) {
            if (!r2) {
                return cnt('Fetch failed');
            }
            var ba = new Uint8Array(r2);
            var nbs = null;
            for (var b = 0; b < thisB.nBlockCnt; ++b) {
                var nbMin = thisB.tbf.readInt(ba, b * 4);
                var nbLen = thisB.tbf.readInt(ba, (b + thisB.nBlockCnt) * 4);
                var nb = new Range(nbMin, nbMin + nbLen - 1);
                if (!nbs) {
                    nbs = nb;
                } else {
                    nbs = union(nbs, nb);
                }
            }
            thisB.nBlocks = nbs;
            thisB.mBlockCnt = thisB.tbf.readInt(ba, thisB.nBlockCnt * 8);
            thisB.seqLength = (thisB._length + 3) / 4 | 0;
            thisB.seqOffset = thisB.offset + 16 + (thisB.nBlockCnt + thisB.mBlockCnt) * 8;
            return cnt();
        });
    });
};

var TWOBIT_TABLE = ['T', 'C', 'A', 'G'];

TwoBitSeq.prototype.fetch = function (min, max, cnt) {
    --min;--max; // Switch to zero-based.
    var thisB = this;
    this.init(function (error) {
        if (error) {
            return cnt(null, error);
        }

        var fetchMin = min >> 2;
        var fetchMax = max + 3 >> 2;
        if (fetchMin < 0 || fetchMax > thisB.seqLength) {
            return cnt('Coordinates out of bounds: ' + min + ':' + max);
        }

        thisB.tbf.data.slice(thisB.seqOffset + fetchMin, fetchMax - fetchMin).salted().fetch(function (r) {
            if (r == null) {
                return cnt('SeqFetch failed');
            }
            var seqData = new Uint8Array(r);

            var nSpans = [];
            if (thisB.nBlocks) {
                var intr = intersection(new Range(min, max), thisB.nBlocks);
                if (intr) {
                    nSpans = intr.ranges();
                }
            }

            var seqstr = '';
            var ptr = min;
            function fillSeq(fsm) {
                while (ptr <= fsm) {
                    var bb = (ptr >> 2) - fetchMin;
                    var ni = ptr & 0x3;
                    var bv = seqData[bb];
                    var n;
                    if (ni == 0) {
                        n = bv >> 6 & 0x3;
                    } else if (ni == 1) {
                        n = bv >> 4 & 0x3;
                    } else if (ni == 2) {
                        n = bv >> 2 & 0x3;
                    } else {
                        n = bv & 0x3;
                    }
                    seqstr += TWOBIT_TABLE[n];
                    ++ptr;
                }
            }

            for (var b = 0; b < nSpans.length; ++b) {
                var nb = nSpans[b];
                if (ptr > nb.min()) {
                    throw 'N mismatch...';
                }
                if (ptr < nb.min()) {
                    fillSeq(nb.min() - 1);
                }
                while (ptr <= nb.max()) {
                    seqstr += 'N';
                    ++ptr;
                }
            }
            if (ptr <= max) {
                fillSeq(max);
            }
            return cnt(seqstr);
        });
    });
};

TwoBitSeq.prototype.length = function (cnt) {
    var thisB = this;
    this.init(function (error) {
        if (error) {
            return cnt(null, error);
        } else {
            return cnt(thisB._length);
        }
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        makeTwoBit: makeTwoBit
    };
}

},{"./bin":4,"./spans":40}],55:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// utils.js: odds, sods, and ends.
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var sha1 = require('./sha1');
    var b64_sha1 = sha1.b64_sha1;
}

var NUM_REGEXP = new RegExp('[0-9]+');

function stringToNumbersArray(str) {
    var nums = new Array();
    var m;
    while (m = NUM_REGEXP.exec(str)) {
        nums.push(m[0]);
        str = str.substring(m.index + m[0].length);
    }
    return nums;
}

var STRICT_NUM_REGEXP = new RegExp('^[0-9]+$');

function stringToInt(str) {
    str = str.replace(new RegExp(',', 'g'), '');
    if (!STRICT_NUM_REGEXP.test(str)) {
        return null;
    }
    return str | 0;
}

function pushnew(a, v) {
    for (var i = 0; i < a.length; ++i) {
        if (a[i] == v) {
            return;
        }
    }
    a.push(v);
}

function pusho(obj, k, v) {
    if (obj[k]) {
        obj[k].push(v);
    } else {
        obj[k] = [v];
    }
}

function pushnewo(obj, k, v) {
    var a = obj[k];
    if (a) {
        for (var i = 0; i < a.length; ++i) {
            // indexOf requires JS16 :-(.
            if (a[i] == v) {
                return;
            }
        }
        a.push(v);
    } else {
        obj[k] = [v];
    }
}

function pick(a, b, c, d) {
    if (a) {
        return a;
    } else if (b) {
        return b;
    } else if (c) {
        return c;
    } else if (d) {
        return d;
    }
}

function pushnew(l, o) {
    for (var i = 0; i < l.length; ++i) {
        if (l[i] == o) {
            return;
        }
    }
    l.push(o);
}

function arrayEquals(a, b) {
    if (!a || !b || a.length !== b.length) return false;

    for (var i = 0; i < a.length; ++i) {
        if (a[i] !== b[i]) return false;
    }

    return true;
}

function arrayIndexOf(a, x) {
    if (!a) {
        return -1;
    }

    for (var i = 0; i < a.length; ++i) {
        if (a[i] === x) {
            return i;
        }
    }
    return -1;
}

function arrayRemove(a, x) {
    var i = arrayIndexOf(a, x);
    if (i >= 0) {
        a.splice(i, 1);
        return true;
    }
    return false;
}

//
// DOM utilities
//


function makeElement(tag, children, attribs, styles) {
    var ele = document.createElement(tag);
    if (children) {
        if (!(children instanceof Array)) {
            children = [children];
        }
        for (var i = 0; i < children.length; ++i) {
            var c = children[i];
            if (c) {
                if (typeof c == 'string') {
                    c = document.createTextNode(c);
                } else if (typeof c == 'number') {
                    c = document.createTextNode('' + c);
                }
                ele.appendChild(c);
            }
        }
    }

    if (attribs) {
        for (var l in attribs) {
            try {
                ele[l] = attribs[l];
            } catch (e) {
                console.log('error setting ' + l);
                throw e;
            }
        }
    }
    if (styles) {
        for (var l in styles) {
            ele.style[l] = styles[l];
        }
    }
    return ele;
}

function makeElementNS(namespace, tag, children, attribs) {
    var ele = document.createElementNS(namespace, tag);
    if (children) {
        if (!(children instanceof Array)) {
            children = [children];
        }
        for (var i = 0; i < children.length; ++i) {
            var c = children[i];
            if (typeof c == 'string') {
                c = document.createTextNode(c);
            }
            ele.appendChild(c);
        }
    }

    setAttrs(ele, attribs);
    return ele;
}

var attr_name_cache = {};

function setAttr(node, key, value) {
    var attr = attr_name_cache[key];
    if (!attr) {
        var _attr = '';
        for (var c = 0; c < key.length; ++c) {
            var cc = key.substring(c, c + 1);
            var lcc = cc.toLowerCase();
            if (lcc != cc) {
                _attr = _attr + '-' + lcc;
            } else {
                _attr = _attr + cc;
            }
        }
        attr_name_cache[key] = _attr;
        attr = _attr;
    }
    node.setAttribute(attr, value);
}

function setAttrs(node, attribs) {
    if (attribs) {
        for (var l in attribs) {
            setAttr(node, l, attribs[l]);
        }
    }
}

function removeChildren(node) {
    if (!node || !node.childNodes) {
        return;
    }

    while (node.childNodes.length > 0) {
        node.removeChild(node.firstChild);
    }
}

//
// WARNING: not for general use!
//

function miniJSONify(o, exc) {
    if (typeof o === 'undefined') {
        return 'undefined';
    } else if (o == null) {
        return 'null';
    } else if (typeof o == 'string') {
        return "'" + o + "'";
    } else if (typeof o == 'number') {
        return "" + o;
    } else if (typeof o == 'boolean') {
        return "" + o;
    } else if ((typeof o === 'undefined' ? 'undefined' : _typeof(o)) == 'object') {
        if (o instanceof Array) {
            var s = null;
            for (var i = 0; i < o.length; ++i) {
                s = (s == null ? '' : s + ', ') + miniJSONify(o[i], exc);
            }
            return '[' + (s ? s : '') + ']';
        } else {
            exc = exc || {};
            var s = null;
            for (var k in o) {
                if (exc[k]) continue;
                if (k != undefined && typeof o[k] != 'function') {
                    s = (s == null ? '' : s + ', ') + k + ': ' + miniJSONify(o[k], exc);
                }
            }
            return '{' + (s ? s : '') + '}';
        }
    } else {
        return typeof o === 'undefined' ? 'undefined' : _typeof(o);
    }
}

function shallowCopy(o) {
    var n = {};
    for (var k in o) {
        n[k] = o[k];
    }
    return n;
}

function Observed(x) {
    this.value = x;
    this.listeners = [];
}

Observed.prototype.addListener = function (f) {
    this.listeners.push(f);
};

Observed.prototype.addListenerAndFire = function (f) {
    this.listeners.push(f);
    f(this.value);
};

Observed.prototype.removeListener = function (f) {
    arrayRemove(this.listeners, f);
};

Observed.prototype.get = function () {
    return this.value;
};

Observed.prototype.set = function (x) {
    this.value = x;
    for (var i = 0; i < this.listeners.length; ++i) {
        this.listeners[i](x);
    }
};

function Awaited() {
    this.queue = [];
}

Awaited.prototype.provide = function (x) {
    if (this.res !== undefined) {
        throw "Resource has already been provided.";
    }

    this.res = x;
    for (var i = 0; i < this.queue.length; ++i) {
        this.queue[i](x);
    }
    this.queue = null; // avoid leaking closures.
};

Awaited.prototype.await = function (f) {
    if (this.res !== undefined) {
        f(this.res);
        return this.res;
    } else {
        this.queue.push(f);
    }
};

var __dalliance_saltSeed = 0;

function saltURL(url) {
    return url + '?salt=' + b64_sha1('' + Date.now() + ',' + ++__dalliance_saltSeed);
}

function textXHR(url, callback, opts) {
    if (opts && opts.salt) url = saltURL(url);

    try {
        var timeout;
        if (opts && opts.timeout) {
            timeout = setTimeout(function () {
                console.log('timing out ' + url);
                req.abort();
                return callback(null, 'Timeout');
            }, opts.timeout);
        }

        var req = new XMLHttpRequest();
        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (timeout) clearTimeout(timeout);
                if (req.status < 200 || req.status >= 300) {
                    callback(null, 'Error code ' + req.status);
                } else {
                    callback(req.responseText);
                }
            }
        };

        req.open('GET', url, true);
        req.responseType = 'text';

        if (opts && opts.credentials) {
            req.withCredentials = true;
        }
        req.send();
    } catch (e) {
        callback(null, 'Exception ' + e);
    }
}

function relativeURL(base, rel) {
    // FIXME quite naive -- good enough for trackhubs?

    if (rel.indexOf('http:') == 0 || rel.indexOf('https:') == 0) {
        return rel;
    }

    var li = base.lastIndexOf('/');
    if (li >= 0) {
        return base.substr(0, li + 1) + rel;
    } else {
        return rel;
    }
}

var AMINO_ACID_TRANSLATION = {
    'TTT': 'F',
    'TTC': 'F',
    'TTA': 'L',
    'TTG': 'L',
    'CTT': 'L',
    'CTC': 'L',
    'CTA': 'L',
    'CTG': 'L',
    'ATT': 'I',
    'ATC': 'I',
    'ATA': 'I',
    'ATG': 'M',
    'GTT': 'V',
    'GTC': 'V',
    'GTA': 'V',
    'GTG': 'V',
    'TCT': 'S',
    'TCC': 'S',
    'TCA': 'S',
    'TCG': 'S',
    'CCT': 'P',
    'CCC': 'P',
    'CCA': 'P',
    'CCG': 'P',
    'ACT': 'T',
    'ACC': 'T',
    'ACA': 'T',
    'ACG': 'T',
    'GCT': 'A',
    'GCC': 'A',
    'GCA': 'A',
    'GCG': 'A',
    'TAT': 'Y',
    'TAC': 'Y',
    'TAA': '*', // stop
    'TAG': '*', // stop
    'CAT': 'H',
    'CAC': 'H',
    'CAA': 'Q',
    'CAG': 'Q',
    'AAT': 'N',
    'AAC': 'N',
    'AAA': 'K',
    'AAG': 'K',
    'GAT': 'D',
    'GAC': 'D',
    'GAA': 'E',
    'GAG': 'E',
    'TGT': 'C',
    'TGC': 'C',
    'TGA': '*', // stop
    'TGG': 'W',
    'CGT': 'R',
    'CGC': 'R',
    'CGA': 'R',
    'CGG': 'R',
    'AGT': 'S',
    'AGC': 'S',
    'AGA': 'R',
    'AGG': 'R',
    'GGT': 'G',
    'GGC': 'G',
    'GGA': 'G',
    'GGG': 'G'
};

function resolveUrlToPage(rel) {
    return makeElement('a', null, { href: rel }).href;
}

//
// Missing APIs
// 

if (!('trim' in String.prototype)) {
    String.prototype.trim = function () {
        return this.replace(/^\s+/, '').replace(/\s+$/, '');
    };
}

if (typeof module !== 'undefined') {
    module.exports = {
        textXHR: textXHR,
        relativeURL: relativeURL,
        resolveUrlToPage: resolveUrlToPage,
        shallowCopy: shallowCopy,
        pusho: pusho,
        pushnew: pushnew,
        pushnewo: pushnewo,
        arrayIndexOf: arrayIndexOf,
        arrayEquals: arrayEquals,
        pick: pick,

        makeElement: makeElement,
        makeElementNS: makeElementNS,
        removeChildren: removeChildren,

        miniJSONify: miniJSONify,

        Observed: Observed,
        Awaited: Awaited,

        AMINO_ACID_TRANSLATION: AMINO_ACID_TRANSLATION
    };
}

},{"./sha1":37}],56:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// vcf.js
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerParserFactory = sa.registerParserFactory;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;
}

function VCFParser() {
    this.info = [];
}

var VCF_INFO_RE = /([^;=]+)(=([^;]+))?;?/;
var VCF_INFO_HEADER = /##INFO=<([^>]+)>/;
var VCF_INFO_HEADER_TOK = /([^,=]+)=([^,]+|"[^"]+"),?/;

VCFParser.prototype.createSession = function (sink) {
    return new VCFParseSession(this, sink);
};

function VCFParseSession(parser, sink) {
    this.parser = parser;
    this.sink = sink;
}

VCFParseSession.prototype.parse = function (line) {
    if (line.length == 0) return;
    if (line[0] == '#') {
        if (line.length > 1 && line[1] == '#') {
            var m = VCF_INFO_HEADER.exec(line);
            if (m) {
                var toks = m[1].split(VCF_INFO_HEADER_TOK);
                var id = null,
                    desc = null;
                for (var ti = 0; ti < toks.length - 1; ti += 3) {
                    var key = toks[ti + 1];
                    var value = toks[ti + 2].replace(/"/g, '');
                    if (key == 'ID') {
                        id = value;
                    } else if (key == 'Description') {
                        desc = value;
                    }
                }
                if (id && desc) {
                    this.parser.info.push({ id: id,
                        desc: desc });
                }
            }
            return;
        } else {
            return;
        }
    }

    var toks = line.split('\t');
    var f = new DASFeature();
    f.segment = toks[0];
    f.id = toks[2];
    f.refAllele = toks[3];
    f.altAlleles = toks[4].split(',');
    f.min = parseInt(toks[1]);
    f.max = f.min + f.refAllele.length - 1;

    var infoToks = toks[7].split(VCF_INFO_RE);
    f.info = {};
    for (var ti = 0; ti < infoToks.length; ti += 4) {
        f.info[infoToks[ti + 1]] = infoToks[ti + 3];
    }

    var alt = f.altAlleles[0];
    var ref = f.refAllele;
    if (alt.length > ref.length) {
        f.type = "insertion";
        if (alt.indexOf(ref) == 0) {
            f.insertion = alt.substr(ref.length);
            f.min += ref.length;
            f.max = f.min - 1; // Effectively "between" bases.
        } else {
            f.insertion = alt;
        }
    } else if (alt.length < ref.length) {
        f.type = "deletion";
    } else {
        f.type = 'substitution';
    }

    this.sink(f);
};

VCFParseSession.prototype.flush = function () {};

VCFParser.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();

    {
        var varStyle = new DASStyle();
        varStyle.glyph = '__INSERTION';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'rgb(50,80,255)';
        varStyle.BGCOLOR = '#888888';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'insertion' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'rgb(255, 60, 60)';
        varStyle.BGCOLOR = '#888888';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'deletion' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'rgb(50,80,255)';
        varStyle.BGCOLOR = '#888888';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'default' }, null, varStyle);
    }

    return callback(stylesheet);
};

VCFParser.prototype.getDefaultFIPs = function (callback) {
    var self = this;
    var fip = function fip(feature, featureInfo) {
        featureInfo.add("Ref. allele", feature.refAllele);
        featureInfo.add("Alt. alleles", feature.altAlleles.join(','));

        if (feature.info) {
            for (var ii = 0; ii < self.info.length; ++ii) {
                var info = self.info[ii];
                var val = feature.info[info.id];
                if (val !== undefined) {
                    featureInfo.add(info.desc, val);
                }
            }
        }
    };
    callback(fip);
};

dalliance_registerParserFactory('vcf', function () {
    return new VCFParser();
});

},{"./das":10,"./sourceadapters":38}],57:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// version.js
//

"use strict";

var VERSION = {
    CONFIG: 5,
    MAJOR: 0,
    MINOR: 13,
    MICRO: 7,
    BRANCH: 'dev'
};

VERSION.toString = function () {
    var vs = '' + this.MAJOR + '.' + this.MINOR + '.' + this.MICRO;
    if (this.PATCH) {
        vs = vs + this.PATCH;
    }
    if (this.BRANCH && this.BRANCH != '') {
        vs = vs + '-' + this.BRANCH;
    }
    return vs;
};

if (typeof module !== 'undefined') {
    module.exports = VERSION;
}

},{}],58:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// zoomslider.js: custom slider component
//


"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var makeElement = utils.makeElement;
}

function makeZoomSlider(opts) {
    opts = opts || {};

    var minPos = 0,
        maxPos = opts.width || 200;
    var min = 0,
        max = 200;
    var pos = 50,
        pos2 = 100;
    var labels = [];
    var track = makeElement('hr', null, { className: 'slider-track' }, { width: '' + (maxPos | 0) + 'px' });
    var thumb = makeElement('hr', null, { className: 'slider-thumb active' });
    var thumb2 = makeElement('hr', null, { className: 'slider-thumb' });
    var slider = makeElement('div', [track, thumb, thumb2], { className: 'slider' }, { width: '' + ((maxPos | 0) + 10) + 'px' });

    slider.removeLabels = function () {
        for (var li = 0; li < labels.length; ++li) {
            slider.removeChild(labels[li]);
        }
        labels = [];
    };

    slider.addLabel = function (val, txt) {
        var pos = minPos + (val - min) * (maxPos - minPos) / (max - min) | 0;
        var label = makeElement('div', txt, { className: 'slider-label' }, {
            left: '' + (minPos + (val - min) * (maxPos - minPos) / (max - min) | 0) + 'px'
        });
        slider.appendChild(label);
        labels.push(label);
    };

    var onChange = document.createEvent('HTMLEvents');
    onChange.initEvent('change', true, false);

    function setPos(np) {
        np = Math.min(np, maxPos);
        np = Math.max(np, minPos);
        pos = np;
        thumb.style.left = '' + pos + 'px';
    }

    function setPos2(np) {
        np = Math.min(np, maxPos);
        np = Math.max(np, minPos);
        pos2 = np;
        thumb2.style.left = '' + pos2 + 'px';
    }

    Object.defineProperty(slider, 'value', {
        get: function get() {
            return min + (pos - minPos) * (max - min) / (maxPos - minPos);
        },
        set: function set(v) {
            var np = minPos + (v - min) * (maxPos - minPos) / (max - min);
            setPos(np);
        }
    });

    Object.defineProperty(slider, 'value2', {
        get: function get() {
            return min + (pos2 - minPos) * (max - min) / (maxPos - minPos);
        },
        set: function set(v) {
            var np = minPos + (v - min) * (maxPos - minPos) / (max - min);
            setPos2(np);
        }
    });

    Object.defineProperty(slider, 'active', {
        get: function get() {
            return thumb.classList.contains('active') ? 1 : 2;
        },
        set: function set(x) {
            if (x == 1) {
                thumb.classList.add('active');
                thumb2.classList.remove('active');
            } else {
                thumb2.classList.add('active');
                thumb.classList.remove('active');
            }
        }
    });

    Object.defineProperty(slider, 'min', {
        get: function get() {
            return min;
        },
        set: function set(v) {
            min = v;
        }
    });

    Object.defineProperty(slider, 'max', {
        get: function get() {
            return max;
        },
        set: function set(v) {
            max = v;
        }
    });

    var offset;
    var which;

    var thumbMouseDown = function thumbMouseDown(ev) {
        which = this == thumb ? 1 : 2;
        if (which != slider.active) {
            slider.active = which;
            slider.dispatchEvent(onChange);
        }
        ev.stopPropagation();ev.preventDefault();
        window.addEventListener('mousemove', thumbDragHandler, false);
        window.addEventListener('mouseup', thumbDragEndHandler, false);
        offset = ev.clientX - (which == 1 ? pos : pos2);
    };

    thumb.addEventListener('mousedown', thumbMouseDown, false);
    thumb2.addEventListener('mousedown', thumbMouseDown, false);

    var thumbDragHandler = function thumbDragHandler(ev) {
        if (which == 1) setPos(ev.clientX - offset);else setPos2(ev.clientX - offset);
        slider.dispatchEvent(onChange);
    };

    var thumbDragEndHandler = function thumbDragEndHandler(ev) {
        window.removeEventListener('mousemove', thumbDragHandler, false);
        window.removeEventListener('mouseup', thumbDragEndHandler, false);
    };

    return slider;
}

if (typeof module !== 'undefined') {
    module.exports = makeZoomSlider;
}

},{"./utils":55}],59:[function(require,module,exports){
(function (process,global){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.0.2
 */

(function() {
    "use strict";
    function lib$es6$promise$utils$$objectOrFunction(x) {
      return typeof x === 'function' || (typeof x === 'object' && x !== null);
    }

    function lib$es6$promise$utils$$isFunction(x) {
      return typeof x === 'function';
    }

    function lib$es6$promise$utils$$isMaybeThenable(x) {
      return typeof x === 'object' && x !== null;
    }

    var lib$es6$promise$utils$$_isArray;
    if (!Array.isArray) {
      lib$es6$promise$utils$$_isArray = function (x) {
        return Object.prototype.toString.call(x) === '[object Array]';
      };
    } else {
      lib$es6$promise$utils$$_isArray = Array.isArray;
    }

    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;
    var lib$es6$promise$asap$$len = 0;
    var lib$es6$promise$asap$$toString = {}.toString;
    var lib$es6$promise$asap$$vertxNext;
    var lib$es6$promise$asap$$customSchedulerFn;

    var lib$es6$promise$asap$$asap = function asap(callback, arg) {
      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;
      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;
      lib$es6$promise$asap$$len += 2;
      if (lib$es6$promise$asap$$len === 2) {
        // If len is 2, that means that we need to schedule an async flush.
        // If additional callbacks are queued before the queue is flushed, they
        // will be processed by this flush that we are scheduling.
        if (lib$es6$promise$asap$$customSchedulerFn) {
          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);
        } else {
          lib$es6$promise$asap$$scheduleFlush();
        }
      }
    }

    function lib$es6$promise$asap$$setScheduler(scheduleFn) {
      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;
    }

    function lib$es6$promise$asap$$setAsap(asapFn) {
      lib$es6$promise$asap$$asap = asapFn;
    }

    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;
    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};
    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;
    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';

    // test for web worker but not in IE10
    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&
      typeof importScripts !== 'undefined' &&
      typeof MessageChannel !== 'undefined';

    // node
    function lib$es6$promise$asap$$useNextTick() {
      // node version 0.10.x displays a deprecation warning when nextTick is used recursively
      // see https://github.com/cujojs/when/issues/410 for details
      return function() {
        process.nextTick(lib$es6$promise$asap$$flush);
      };
    }

    // vertx
    function lib$es6$promise$asap$$useVertxTimer() {
      return function() {
        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);
      };
    }

    function lib$es6$promise$asap$$useMutationObserver() {
      var iterations = 0;
      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);
      var node = document.createTextNode('');
      observer.observe(node, { characterData: true });

      return function() {
        node.data = (iterations = ++iterations % 2);
      };
    }

    // web worker
    function lib$es6$promise$asap$$useMessageChannel() {
      var channel = new MessageChannel();
      channel.port1.onmessage = lib$es6$promise$asap$$flush;
      return function () {
        channel.port2.postMessage(0);
      };
    }

    function lib$es6$promise$asap$$useSetTimeout() {
      return function() {
        setTimeout(lib$es6$promise$asap$$flush, 1);
      };
    }

    var lib$es6$promise$asap$$queue = new Array(1000);
    function lib$es6$promise$asap$$flush() {
      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {
        var callback = lib$es6$promise$asap$$queue[i];
        var arg = lib$es6$promise$asap$$queue[i+1];

        callback(arg);

        lib$es6$promise$asap$$queue[i] = undefined;
        lib$es6$promise$asap$$queue[i+1] = undefined;
      }

      lib$es6$promise$asap$$len = 0;
    }

    function lib$es6$promise$asap$$attemptVertx() {
      try {
        var r = require;
        var vertx = r('vertx');
        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;
        return lib$es6$promise$asap$$useVertxTimer();
      } catch(e) {
        return lib$es6$promise$asap$$useSetTimeout();
      }
    }

    var lib$es6$promise$asap$$scheduleFlush;
    // Decide what async method to use to triggering processing of queued callbacks:
    if (lib$es6$promise$asap$$isNode) {
      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();
    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {
      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();
    } else if (lib$es6$promise$asap$$isWorker) {
      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();
    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {
      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();
    } else {
      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();
    }

    function lib$es6$promise$$internal$$noop() {}

    var lib$es6$promise$$internal$$PENDING   = void 0;
    var lib$es6$promise$$internal$$FULFILLED = 1;
    var lib$es6$promise$$internal$$REJECTED  = 2;

    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();

    function lib$es6$promise$$internal$$selfFulfillment() {
      return new TypeError("You cannot resolve a promise with itself");
    }

    function lib$es6$promise$$internal$$cannotReturnOwn() {
      return new TypeError('A promises callback cannot return that same promise.');
    }

    function lib$es6$promise$$internal$$getThen(promise) {
      try {
        return promise.then;
      } catch(error) {
        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;
        return lib$es6$promise$$internal$$GET_THEN_ERROR;
      }
    }

    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {
      try {
        then.call(value, fulfillmentHandler, rejectionHandler);
      } catch(e) {
        return e;
      }
    }

    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {
       lib$es6$promise$asap$$asap(function(promise) {
        var sealed = false;
        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {
          if (sealed) { return; }
          sealed = true;
          if (thenable !== value) {
            lib$es6$promise$$internal$$resolve(promise, value);
          } else {
            lib$es6$promise$$internal$$fulfill(promise, value);
          }
        }, function(reason) {
          if (sealed) { return; }
          sealed = true;

          lib$es6$promise$$internal$$reject(promise, reason);
        }, 'Settle: ' + (promise._label || ' unknown promise'));

        if (!sealed && error) {
          sealed = true;
          lib$es6$promise$$internal$$reject(promise, error);
        }
      }, promise);
    }

    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {
      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {
        lib$es6$promise$$internal$$fulfill(promise, thenable._result);
      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {
        lib$es6$promise$$internal$$reject(promise, thenable._result);
      } else {
        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {
          lib$es6$promise$$internal$$resolve(promise, value);
        }, function(reason) {
          lib$es6$promise$$internal$$reject(promise, reason);
        });
      }
    }

    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable) {
      if (maybeThenable.constructor === promise.constructor) {
        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);
      } else {
        var then = lib$es6$promise$$internal$$getThen(maybeThenable);

        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {
          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);
        } else if (then === undefined) {
          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);
        } else if (lib$es6$promise$utils$$isFunction(then)) {
          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);
        } else {
          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);
        }
      }
    }

    function lib$es6$promise$$internal$$resolve(promise, value) {
      if (promise === value) {
        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());
      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {
        lib$es6$promise$$internal$$handleMaybeThenable(promise, value);
      } else {
        lib$es6$promise$$internal$$fulfill(promise, value);
      }
    }

    function lib$es6$promise$$internal$$publishRejection(promise) {
      if (promise._onerror) {
        promise._onerror(promise._result);
      }

      lib$es6$promise$$internal$$publish(promise);
    }

    function lib$es6$promise$$internal$$fulfill(promise, value) {
      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }

      promise._result = value;
      promise._state = lib$es6$promise$$internal$$FULFILLED;

      if (promise._subscribers.length !== 0) {
        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);
      }
    }

    function lib$es6$promise$$internal$$reject(promise, reason) {
      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }
      promise._state = lib$es6$promise$$internal$$REJECTED;
      promise._result = reason;

      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);
    }

    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {
      var subscribers = parent._subscribers;
      var length = subscribers.length;

      parent._onerror = null;

      subscribers[length] = child;
      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;
      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;

      if (length === 0 && parent._state) {
        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);
      }
    }

    function lib$es6$promise$$internal$$publish(promise) {
      var subscribers = promise._subscribers;
      var settled = promise._state;

      if (subscribers.length === 0) { return; }

      var child, callback, detail = promise._result;

      for (var i = 0; i < subscribers.length; i += 3) {
        child = subscribers[i];
        callback = subscribers[i + settled];

        if (child) {
          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);
        } else {
          callback(detail);
        }
      }

      promise._subscribers.length = 0;
    }

    function lib$es6$promise$$internal$$ErrorObject() {
      this.error = null;
    }

    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();

    function lib$es6$promise$$internal$$tryCatch(callback, detail) {
      try {
        return callback(detail);
      } catch(e) {
        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;
        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;
      }
    }

    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {
      var hasCallback = lib$es6$promise$utils$$isFunction(callback),
          value, error, succeeded, failed;

      if (hasCallback) {
        value = lib$es6$promise$$internal$$tryCatch(callback, detail);

        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {
          failed = true;
          error = value.error;
          value = null;
        } else {
          succeeded = true;
        }

        if (promise === value) {
          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());
          return;
        }

      } else {
        value = detail;
        succeeded = true;
      }

      if (promise._state !== lib$es6$promise$$internal$$PENDING) {
        // noop
      } else if (hasCallback && succeeded) {
        lib$es6$promise$$internal$$resolve(promise, value);
      } else if (failed) {
        lib$es6$promise$$internal$$reject(promise, error);
      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {
        lib$es6$promise$$internal$$fulfill(promise, value);
      } else if (settled === lib$es6$promise$$internal$$REJECTED) {
        lib$es6$promise$$internal$$reject(promise, value);
      }
    }

    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {
      try {
        resolver(function resolvePromise(value){
          lib$es6$promise$$internal$$resolve(promise, value);
        }, function rejectPromise(reason) {
          lib$es6$promise$$internal$$reject(promise, reason);
        });
      } catch(e) {
        lib$es6$promise$$internal$$reject(promise, e);
      }
    }

    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {
      var enumerator = this;

      enumerator._instanceConstructor = Constructor;
      enumerator.promise = new Constructor(lib$es6$promise$$internal$$noop);

      if (enumerator._validateInput(input)) {
        enumerator._input     = input;
        enumerator.length     = input.length;
        enumerator._remaining = input.length;

        enumerator._init();

        if (enumerator.length === 0) {
          lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);
        } else {
          enumerator.length = enumerator.length || 0;
          enumerator._enumerate();
          if (enumerator._remaining === 0) {
            lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);
          }
        }
      } else {
        lib$es6$promise$$internal$$reject(enumerator.promise, enumerator._validationError());
      }
    }

    lib$es6$promise$enumerator$$Enumerator.prototype._validateInput = function(input) {
      return lib$es6$promise$utils$$isArray(input);
    };

    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {
      return new Error('Array Methods must be provided an Array');
    };

    lib$es6$promise$enumerator$$Enumerator.prototype._init = function() {
      this._result = new Array(this.length);
    };

    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;

    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {
      var enumerator = this;

      var length  = enumerator.length;
      var promise = enumerator.promise;
      var input   = enumerator._input;

      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {
        enumerator._eachEntry(input[i], i);
      }
    };

    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {
      var enumerator = this;
      var c = enumerator._instanceConstructor;

      if (lib$es6$promise$utils$$isMaybeThenable(entry)) {
        if (entry.constructor === c && entry._state !== lib$es6$promise$$internal$$PENDING) {
          entry._onerror = null;
          enumerator._settledAt(entry._state, i, entry._result);
        } else {
          enumerator._willSettleAt(c.resolve(entry), i);
        }
      } else {
        enumerator._remaining--;
        enumerator._result[i] = entry;
      }
    };

    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {
      var enumerator = this;
      var promise = enumerator.promise;

      if (promise._state === lib$es6$promise$$internal$$PENDING) {
        enumerator._remaining--;

        if (state === lib$es6$promise$$internal$$REJECTED) {
          lib$es6$promise$$internal$$reject(promise, value);
        } else {
          enumerator._result[i] = value;
        }
      }

      if (enumerator._remaining === 0) {
        lib$es6$promise$$internal$$fulfill(promise, enumerator._result);
      }
    };

    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {
      var enumerator = this;

      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {
        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);
      }, function(reason) {
        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);
      });
    };
    function lib$es6$promise$promise$all$$all(entries) {
      return new lib$es6$promise$enumerator$$default(this, entries).promise;
    }
    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;
    function lib$es6$promise$promise$race$$race(entries) {
      /*jshint validthis:true */
      var Constructor = this;

      var promise = new Constructor(lib$es6$promise$$internal$$noop);

      if (!lib$es6$promise$utils$$isArray(entries)) {
        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));
        return promise;
      }

      var length = entries.length;

      function onFulfillment(value) {
        lib$es6$promise$$internal$$resolve(promise, value);
      }

      function onRejection(reason) {
        lib$es6$promise$$internal$$reject(promise, reason);
      }

      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {
        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);
      }

      return promise;
    }
    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;
    function lib$es6$promise$promise$resolve$$resolve(object) {
      /*jshint validthis:true */
      var Constructor = this;

      if (object && typeof object === 'object' && object.constructor === Constructor) {
        return object;
      }

      var promise = new Constructor(lib$es6$promise$$internal$$noop);
      lib$es6$promise$$internal$$resolve(promise, object);
      return promise;
    }
    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;
    function lib$es6$promise$promise$reject$$reject(reason) {
      /*jshint validthis:true */
      var Constructor = this;
      var promise = new Constructor(lib$es6$promise$$internal$$noop);
      lib$es6$promise$$internal$$reject(promise, reason);
      return promise;
    }
    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;

    var lib$es6$promise$promise$$counter = 0;

    function lib$es6$promise$promise$$needsResolver() {
      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
    }

    function lib$es6$promise$promise$$needsNew() {
      throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
    }

    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;
    /**
      Promise objects represent the eventual result of an asynchronous operation. The
      primary way of interacting with a promise is through its `then` method, which
      registers callbacks to receive either a promise's eventual value or the reason
      why the promise cannot be fulfilled.

      Terminology
      -----------

      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
      - `thenable` is an object or function that defines a `then` method.
      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
      - `exception` is a value that is thrown using the throw statement.
      - `reason` is a value that indicates why a promise was rejected.
      - `settled` the final resting state of a promise, fulfilled or rejected.

      A promise can be in one of three states: pending, fulfilled, or rejected.

      Promises that are fulfilled have a fulfillment value and are in the fulfilled
      state.  Promises that are rejected have a rejection reason and are in the
      rejected state.  A fulfillment value is never a thenable.

      Promises can also be said to *resolve* a value.  If this value is also a
      promise, then the original promise's settled state will match the value's
      settled state.  So a promise that *resolves* a promise that rejects will
      itself reject, and a promise that *resolves* a promise that fulfills will
      itself fulfill.


      Basic Usage:
      ------------

      ```js
      var promise = new Promise(function(resolve, reject) {
        // on success
        resolve(value);

        // on failure
        reject(reason);
      });

      promise.then(function(value) {
        // on fulfillment
      }, function(reason) {
        // on rejection
      });
      ```

      Advanced Usage:
      ---------------

      Promises shine when abstracting away asynchronous interactions such as
      `XMLHttpRequest`s.

      ```js
      function getJSON(url) {
        return new Promise(function(resolve, reject){
          var xhr = new XMLHttpRequest();

          xhr.open('GET', url);
          xhr.onreadystatechange = handler;
          xhr.responseType = 'json';
          xhr.setRequestHeader('Accept', 'application/json');
          xhr.send();

          function handler() {
            if (this.readyState === this.DONE) {
              if (this.status === 200) {
                resolve(this.response);
              } else {
                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
              }
            }
          };
        });
      }

      getJSON('/posts.json').then(function(json) {
        // on fulfillment
      }, function(reason) {
        // on rejection
      });
      ```

      Unlike callbacks, promises are great composable primitives.

      ```js
      Promise.all([
        getJSON('/posts'),
        getJSON('/comments')
      ]).then(function(values){
        values[0] // => postsJSON
        values[1] // => commentsJSON

        return values;
      });
      ```

      @class Promise
      @param {function} resolver
      Useful for tooling.
      @constructor
    */
    function lib$es6$promise$promise$$Promise(resolver) {
      this._id = lib$es6$promise$promise$$counter++;
      this._state = undefined;
      this._result = undefined;
      this._subscribers = [];

      if (lib$es6$promise$$internal$$noop !== resolver) {
        if (!lib$es6$promise$utils$$isFunction(resolver)) {
          lib$es6$promise$promise$$needsResolver();
        }

        if (!(this instanceof lib$es6$promise$promise$$Promise)) {
          lib$es6$promise$promise$$needsNew();
        }

        lib$es6$promise$$internal$$initializePromise(this, resolver);
      }
    }

    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;
    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;
    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;
    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;
    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;
    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;
    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;

    lib$es6$promise$promise$$Promise.prototype = {
      constructor: lib$es6$promise$promise$$Promise,

    /**
      The primary way of interacting with a promise is through its `then` method,
      which registers callbacks to receive either a promise's eventual value or the
      reason why the promise cannot be fulfilled.

      ```js
      findUser().then(function(user){
        // user is available
      }, function(reason){
        // user is unavailable, and you are given the reason why
      });
      ```

      Chaining
      --------

      The return value of `then` is itself a promise.  This second, 'downstream'
      promise is resolved with the return value of the first promise's fulfillment
      or rejection handler, or rejected if the handler throws an exception.

      ```js
      findUser().then(function (user) {
        return user.name;
      }, function (reason) {
        return 'default name';
      }).then(function (userName) {
        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
        // will be `'default name'`
      });

      findUser().then(function (user) {
        throw new Error('Found user, but still unhappy');
      }, function (reason) {
        throw new Error('`findUser` rejected and we're unhappy');
      }).then(function (value) {
        // never reached
      }, function (reason) {
        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
      });
      ```
      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.

      ```js
      findUser().then(function (user) {
        throw new PedagogicalException('Upstream error');
      }).then(function (value) {
        // never reached
      }).then(function (value) {
        // never reached
      }, function (reason) {
        // The `PedgagocialException` is propagated all the way down to here
      });
      ```

      Assimilation
      ------------

      Sometimes the value you want to propagate to a downstream promise can only be
      retrieved asynchronously. This can be achieved by returning a promise in the
      fulfillment or rejection handler. The downstream promise will then be pending
      until the returned promise is settled. This is called *assimilation*.

      ```js
      findUser().then(function (user) {
        return findCommentsByAuthor(user);
      }).then(function (comments) {
        // The user's comments are now available
      });
      ```

      If the assimliated promise rejects, then the downstream promise will also reject.

      ```js
      findUser().then(function (user) {
        return findCommentsByAuthor(user);
      }).then(function (comments) {
        // If `findCommentsByAuthor` fulfills, we'll have the value here
      }, function (reason) {
        // If `findCommentsByAuthor` rejects, we'll have the reason here
      });
      ```

      Simple Example
      --------------

      Synchronous Example

      ```javascript
      var result;

      try {
        result = findResult();
        // success
      } catch(reason) {
        // failure
      }
      ```

      Errback Example

      ```js
      findResult(function(result, err){
        if (err) {
          // failure
        } else {
          // success
        }
      });
      ```

      Promise Example;

      ```javascript
      findResult().then(function(result){
        // success
      }, function(reason){
        // failure
      });
      ```

      Advanced Example
      --------------

      Synchronous Example

      ```javascript
      var author, books;

      try {
        author = findAuthor();
        books  = findBooksByAuthor(author);
        // success
      } catch(reason) {
        // failure
      }
      ```

      Errback Example

      ```js

      function foundBooks(books) {

      }

      function failure(reason) {

      }

      findAuthor(function(author, err){
        if (err) {
          failure(err);
          // failure
        } else {
          try {
            findBoooksByAuthor(author, function(books, err) {
              if (err) {
                failure(err);
              } else {
                try {
                  foundBooks(books);
                } catch(reason) {
                  failure(reason);
                }
              }
            });
          } catch(error) {
            failure(err);
          }
          // success
        }
      });
      ```

      Promise Example;

      ```javascript
      findAuthor().
        then(findBooksByAuthor).
        then(function(books){
          // found books
      }).catch(function(reason){
        // something went wrong
      });
      ```

      @method then
      @param {Function} onFulfilled
      @param {Function} onRejected
      Useful for tooling.
      @return {Promise}
    */
      then: function(onFulfillment, onRejection) {
        var parent = this;
        var state = parent._state;

        if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {
          return this;
        }

        var child = new this.constructor(lib$es6$promise$$internal$$noop);
        var result = parent._result;

        if (state) {
          var callback = arguments[state - 1];
          lib$es6$promise$asap$$asap(function(){
            lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);
          });
        } else {
          lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);
        }

        return child;
      },

    /**
      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
      as the catch block of a try/catch statement.

      ```js
      function findAuthor(){
        throw new Error('couldn't find that author');
      }

      // synchronous
      try {
        findAuthor();
      } catch(reason) {
        // something went wrong
      }

      // async with promises
      findAuthor().catch(function(reason){
        // something went wrong
      });
      ```

      @method catch
      @param {Function} onRejection
      Useful for tooling.
      @return {Promise}
    */
      'catch': function(onRejection) {
        return this.then(null, onRejection);
      }
    };
    function lib$es6$promise$polyfill$$polyfill() {
      var local;

      if (typeof global !== 'undefined') {
          local = global;
      } else if (typeof self !== 'undefined') {
          local = self;
      } else {
          try {
              local = Function('return this')();
          } catch (e) {
              throw new Error('polyfill failed because global object is unavailable in this environment');
          }
      }

      var P = local.Promise;

      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {
        return;
      }

      local.Promise = lib$es6$promise$promise$$default;
    }
    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;

    var lib$es6$promise$umd$$ES6Promise = {
      'Promise': lib$es6$promise$promise$$default,
      'polyfill': lib$es6$promise$polyfill$$default
    };

    /* global define:true module:true window: true */
    if (typeof define === 'function' && define['amd']) {
      define(function() { return lib$es6$promise$umd$$ES6Promise; });
    } else if (typeof module !== 'undefined' && module['exports']) {
      module['exports'] = lib$es6$promise$umd$$ES6Promise;
    } else if (typeof this !== 'undefined') {
      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;
    }

    lib$es6$promise$polyfill$$default();
}).call(this);


}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":61}],60:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Javascript ZLib
// By Thomas Down 2010-2011
//
// Based very heavily on portions of jzlib (by ymnk@jcraft.com), who in
// turn credits Jean-loup Gailly and Mark Adler for the original zlib code.
//
// inflate.js: ZLib inflate code
//

//
// Shared constants
//

var MAX_WBITS=15; // 32K LZ77 window
var DEF_WBITS=MAX_WBITS;
var MAX_MEM_LEVEL=9;
var MANY=1440;
var BMAX = 15;

// preset dictionary flag in zlib header
var PRESET_DICT=0x20;

var Z_NO_FLUSH=0;
var Z_PARTIAL_FLUSH=1;
var Z_SYNC_FLUSH=2;
var Z_FULL_FLUSH=3;
var Z_FINISH=4;

var Z_DEFLATED=8;

var Z_OK=0;
var Z_STREAM_END=1;
var Z_NEED_DICT=2;
var Z_ERRNO=-1;
var Z_STREAM_ERROR=-2;
var Z_DATA_ERROR=-3;
var Z_MEM_ERROR=-4;
var Z_BUF_ERROR=-5;
var Z_VERSION_ERROR=-6;

var METHOD=0;   // waiting for method byte
var FLAG=1;     // waiting for flag byte
var DICT4=2;    // four dictionary check bytes to go
var DICT3=3;    // three dictionary check bytes to go
var DICT2=4;    // two dictionary check bytes to go
var DICT1=5;    // one dictionary check byte to go
var DICT0=6;    // waiting for inflateSetDictionary
var BLOCKS=7;   // decompressing blocks
var CHECK4=8;   // four check bytes to go
var CHECK3=9;   // three check bytes to go
var CHECK2=10;  // two check bytes to go
var CHECK1=11;  // one check byte to go
var DONE=12;    // finished check, done
var BAD=13;     // got an error--stay here

var inflate_mask = [0x00000000, 0x00000001, 0x00000003, 0x00000007, 0x0000000f, 0x0000001f, 0x0000003f, 0x0000007f, 0x000000ff, 0x000001ff, 0x000003ff, 0x000007ff, 0x00000fff, 0x00001fff, 0x00003fff, 0x00007fff, 0x0000ffff];

var IB_TYPE=0;  // get type bits (3, including end bit)
var IB_LENS=1;  // get lengths for stored
var IB_STORED=2;// processing stored block
var IB_TABLE=3; // get table lengths
var IB_BTREE=4; // get bit lengths tree for a dynamic block
var IB_DTREE=5; // get length, distance trees for a dynamic block
var IB_CODES=6; // processing fixed or dynamic block
var IB_DRY=7;   // output remaining window bytes
var IB_DONE=8;  // finished last block, done
var IB_BAD=9;   // ot a data error--stuck here

var fixed_bl = 9;
var fixed_bd = 5;

var fixed_tl = [
    96,7,256, 0,8,80, 0,8,16, 84,8,115,
    82,7,31, 0,8,112, 0,8,48, 0,9,192,
    80,7,10, 0,8,96, 0,8,32, 0,9,160,
    0,8,0, 0,8,128, 0,8,64, 0,9,224,
    80,7,6, 0,8,88, 0,8,24, 0,9,144,
    83,7,59, 0,8,120, 0,8,56, 0,9,208,
    81,7,17, 0,8,104, 0,8,40, 0,9,176,
    0,8,8, 0,8,136, 0,8,72, 0,9,240,
    80,7,4, 0,8,84, 0,8,20, 85,8,227,
    83,7,43, 0,8,116, 0,8,52, 0,9,200,
    81,7,13, 0,8,100, 0,8,36, 0,9,168,
    0,8,4, 0,8,132, 0,8,68, 0,9,232,
    80,7,8, 0,8,92, 0,8,28, 0,9,152,
    84,7,83, 0,8,124, 0,8,60, 0,9,216,
    82,7,23, 0,8,108, 0,8,44, 0,9,184,
    0,8,12, 0,8,140, 0,8,76, 0,9,248,
    80,7,3, 0,8,82, 0,8,18, 85,8,163,
    83,7,35, 0,8,114, 0,8,50, 0,9,196,
    81,7,11, 0,8,98, 0,8,34, 0,9,164,
    0,8,2, 0,8,130, 0,8,66, 0,9,228,
    80,7,7, 0,8,90, 0,8,26, 0,9,148,
    84,7,67, 0,8,122, 0,8,58, 0,9,212,
    82,7,19, 0,8,106, 0,8,42, 0,9,180,
    0,8,10, 0,8,138, 0,8,74, 0,9,244,
    80,7,5, 0,8,86, 0,8,22, 192,8,0,
    83,7,51, 0,8,118, 0,8,54, 0,9,204,
    81,7,15, 0,8,102, 0,8,38, 0,9,172,
    0,8,6, 0,8,134, 0,8,70, 0,9,236,
    80,7,9, 0,8,94, 0,8,30, 0,9,156,
    84,7,99, 0,8,126, 0,8,62, 0,9,220,
    82,7,27, 0,8,110, 0,8,46, 0,9,188,
    0,8,14, 0,8,142, 0,8,78, 0,9,252,
    96,7,256, 0,8,81, 0,8,17, 85,8,131,
    82,7,31, 0,8,113, 0,8,49, 0,9,194,
    80,7,10, 0,8,97, 0,8,33, 0,9,162,
    0,8,1, 0,8,129, 0,8,65, 0,9,226,
    80,7,6, 0,8,89, 0,8,25, 0,9,146,
    83,7,59, 0,8,121, 0,8,57, 0,9,210,
    81,7,17, 0,8,105, 0,8,41, 0,9,178,
    0,8,9, 0,8,137, 0,8,73, 0,9,242,
    80,7,4, 0,8,85, 0,8,21, 80,8,258,
    83,7,43, 0,8,117, 0,8,53, 0,9,202,
    81,7,13, 0,8,101, 0,8,37, 0,9,170,
    0,8,5, 0,8,133, 0,8,69, 0,9,234,
    80,7,8, 0,8,93, 0,8,29, 0,9,154,
    84,7,83, 0,8,125, 0,8,61, 0,9,218,
    82,7,23, 0,8,109, 0,8,45, 0,9,186,
    0,8,13, 0,8,141, 0,8,77, 0,9,250,
    80,7,3, 0,8,83, 0,8,19, 85,8,195,
    83,7,35, 0,8,115, 0,8,51, 0,9,198,
    81,7,11, 0,8,99, 0,8,35, 0,9,166,
    0,8,3, 0,8,131, 0,8,67, 0,9,230,
    80,7,7, 0,8,91, 0,8,27, 0,9,150,
    84,7,67, 0,8,123, 0,8,59, 0,9,214,
    82,7,19, 0,8,107, 0,8,43, 0,9,182,
    0,8,11, 0,8,139, 0,8,75, 0,9,246,
    80,7,5, 0,8,87, 0,8,23, 192,8,0,
    83,7,51, 0,8,119, 0,8,55, 0,9,206,
    81,7,15, 0,8,103, 0,8,39, 0,9,174,
    0,8,7, 0,8,135, 0,8,71, 0,9,238,
    80,7,9, 0,8,95, 0,8,31, 0,9,158,
    84,7,99, 0,8,127, 0,8,63, 0,9,222,
    82,7,27, 0,8,111, 0,8,47, 0,9,190,
    0,8,15, 0,8,143, 0,8,79, 0,9,254,
    96,7,256, 0,8,80, 0,8,16, 84,8,115,
    82,7,31, 0,8,112, 0,8,48, 0,9,193,

    80,7,10, 0,8,96, 0,8,32, 0,9,161,
    0,8,0, 0,8,128, 0,8,64, 0,9,225,
    80,7,6, 0,8,88, 0,8,24, 0,9,145,
    83,7,59, 0,8,120, 0,8,56, 0,9,209,
    81,7,17, 0,8,104, 0,8,40, 0,9,177,
    0,8,8, 0,8,136, 0,8,72, 0,9,241,
    80,7,4, 0,8,84, 0,8,20, 85,8,227,
    83,7,43, 0,8,116, 0,8,52, 0,9,201,
    81,7,13, 0,8,100, 0,8,36, 0,9,169,
    0,8,4, 0,8,132, 0,8,68, 0,9,233,
    80,7,8, 0,8,92, 0,8,28, 0,9,153,
    84,7,83, 0,8,124, 0,8,60, 0,9,217,
    82,7,23, 0,8,108, 0,8,44, 0,9,185,
    0,8,12, 0,8,140, 0,8,76, 0,9,249,
    80,7,3, 0,8,82, 0,8,18, 85,8,163,
    83,7,35, 0,8,114, 0,8,50, 0,9,197,
    81,7,11, 0,8,98, 0,8,34, 0,9,165,
    0,8,2, 0,8,130, 0,8,66, 0,9,229,
    80,7,7, 0,8,90, 0,8,26, 0,9,149,
    84,7,67, 0,8,122, 0,8,58, 0,9,213,
    82,7,19, 0,8,106, 0,8,42, 0,9,181,
    0,8,10, 0,8,138, 0,8,74, 0,9,245,
    80,7,5, 0,8,86, 0,8,22, 192,8,0,
    83,7,51, 0,8,118, 0,8,54, 0,9,205,
    81,7,15, 0,8,102, 0,8,38, 0,9,173,
    0,8,6, 0,8,134, 0,8,70, 0,9,237,
    80,7,9, 0,8,94, 0,8,30, 0,9,157,
    84,7,99, 0,8,126, 0,8,62, 0,9,221,
    82,7,27, 0,8,110, 0,8,46, 0,9,189,
    0,8,14, 0,8,142, 0,8,78, 0,9,253,
    96,7,256, 0,8,81, 0,8,17, 85,8,131,
    82,7,31, 0,8,113, 0,8,49, 0,9,195,
    80,7,10, 0,8,97, 0,8,33, 0,9,163,
    0,8,1, 0,8,129, 0,8,65, 0,9,227,
    80,7,6, 0,8,89, 0,8,25, 0,9,147,
    83,7,59, 0,8,121, 0,8,57, 0,9,211,
    81,7,17, 0,8,105, 0,8,41, 0,9,179,
    0,8,9, 0,8,137, 0,8,73, 0,9,243,
    80,7,4, 0,8,85, 0,8,21, 80,8,258,
    83,7,43, 0,8,117, 0,8,53, 0,9,203,
    81,7,13, 0,8,101, 0,8,37, 0,9,171,
    0,8,5, 0,8,133, 0,8,69, 0,9,235,
    80,7,8, 0,8,93, 0,8,29, 0,9,155,
    84,7,83, 0,8,125, 0,8,61, 0,9,219,
    82,7,23, 0,8,109, 0,8,45, 0,9,187,
    0,8,13, 0,8,141, 0,8,77, 0,9,251,
    80,7,3, 0,8,83, 0,8,19, 85,8,195,
    83,7,35, 0,8,115, 0,8,51, 0,9,199,
    81,7,11, 0,8,99, 0,8,35, 0,9,167,
    0,8,3, 0,8,131, 0,8,67, 0,9,231,
    80,7,7, 0,8,91, 0,8,27, 0,9,151,
    84,7,67, 0,8,123, 0,8,59, 0,9,215,
    82,7,19, 0,8,107, 0,8,43, 0,9,183,
    0,8,11, 0,8,139, 0,8,75, 0,9,247,
    80,7,5, 0,8,87, 0,8,23, 192,8,0,
    83,7,51, 0,8,119, 0,8,55, 0,9,207,
    81,7,15, 0,8,103, 0,8,39, 0,9,175,
    0,8,7, 0,8,135, 0,8,71, 0,9,239,
    80,7,9, 0,8,95, 0,8,31, 0,9,159,
    84,7,99, 0,8,127, 0,8,63, 0,9,223,
    82,7,27, 0,8,111, 0,8,47, 0,9,191,
    0,8,15, 0,8,143, 0,8,79, 0,9,255
];
var fixed_td = [
    80,5,1, 87,5,257, 83,5,17, 91,5,4097,
    81,5,5, 89,5,1025, 85,5,65, 93,5,16385,
    80,5,3, 88,5,513, 84,5,33, 92,5,8193,
    82,5,9, 90,5,2049, 86,5,129, 192,5,24577,
    80,5,2, 87,5,385, 83,5,25, 91,5,6145,
    81,5,7, 89,5,1537, 85,5,97, 93,5,24577,
    80,5,4, 88,5,769, 84,5,49, 92,5,12289,
    82,5,13, 90,5,3073, 86,5,193, 192,5,24577
];

  // Tables for deflate from PKZIP's appnote.txt.
  var cplens = [ // Copy lengths for literal codes 257..285
        3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,
        35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0
  ];

  // see note #13 above about 258
  var cplext = [ // Extra bits for literal codes 257..285
        0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2,
        3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 112, 112  // 112==invalid
  ];

 var cpdist = [ // Copy offsets for distance codes 0..29
        1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,
        257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,
        8193, 12289, 16385, 24577
  ];

  var cpdext = [ // Extra bits for distance codes
        0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6,
        7, 7, 8, 8, 9, 9, 10, 10, 11, 11,
        12, 12, 13, 13];

//
// ZStream.java
//

function ZStream() {
}


ZStream.prototype.inflateInit = function(w, nowrap) {
    if (!w) {
	w = DEF_WBITS;
    }
    if (nowrap) {
	nowrap = false;
    }
    this.istate = new Inflate();
    return this.istate.inflateInit(this, nowrap?-w:w);
}

ZStream.prototype.inflate = function(f) {
    if(this.istate==null) return Z_STREAM_ERROR;
    return this.istate.inflate(this, f);
}

ZStream.prototype.inflateEnd = function(){
    if(this.istate==null) return Z_STREAM_ERROR;
    var ret=istate.inflateEnd(this);
    this.istate = null;
    return ret;
}
ZStream.prototype.inflateSync = function(){
    // if(istate == null) return Z_STREAM_ERROR;
    return istate.inflateSync(this);
}
ZStream.prototype.inflateSetDictionary = function(dictionary, dictLength){
    // if(istate == null) return Z_STREAM_ERROR;
    return istate.inflateSetDictionary(this, dictionary, dictLength);
}

/*

  public int deflateInit(int level){
    return deflateInit(level, MAX_WBITS);
  }
  public int deflateInit(int level, boolean nowrap){
    return deflateInit(level, MAX_WBITS, nowrap);
  }
  public int deflateInit(int level, int bits){
    return deflateInit(level, bits, false);
  }
  public int deflateInit(int level, int bits, boolean nowrap){
    dstate=new Deflate();
    return dstate.deflateInit(this, level, nowrap?-bits:bits);
  }
  public int deflate(int flush){
    if(dstate==null){
      return Z_STREAM_ERROR;
    }
    return dstate.deflate(this, flush);
  }
  public int deflateEnd(){
    if(dstate==null) return Z_STREAM_ERROR;
    int ret=dstate.deflateEnd();
    dstate=null;
    return ret;
  }
  public int deflateParams(int level, int strategy){
    if(dstate==null) return Z_STREAM_ERROR;
    return dstate.deflateParams(this, level, strategy);
  }
  public int deflateSetDictionary (byte[] dictionary, int dictLength){
    if(dstate == null)
      return Z_STREAM_ERROR;
    return dstate.deflateSetDictionary(this, dictionary, dictLength);
  }

*/

/*
  // Flush as much pending output as possible. All deflate() output goes
  // through this function so some applications may wish to modify it
  // to avoid allocating a large strm->next_out buffer and copying into it.
  // (See also read_buf()).
  void flush_pending(){
    int len=dstate.pending;

    if(len>avail_out) len=avail_out;
    if(len==0) return;

    if(dstate.pending_buf.length<=dstate.pending_out ||
       next_out.length<=next_out_index ||
       dstate.pending_buf.length<(dstate.pending_out+len) ||
       next_out.length<(next_out_index+len)){
      System.out.println(dstate.pending_buf.length+", "+dstate.pending_out+
			 ", "+next_out.length+", "+next_out_index+", "+len);
      System.out.println("avail_out="+avail_out);
    }

    System.arraycopy(dstate.pending_buf, dstate.pending_out,
		     next_out, next_out_index, len);

    next_out_index+=len;
    dstate.pending_out+=len;
    total_out+=len;
    avail_out-=len;
    dstate.pending-=len;
    if(dstate.pending==0){
      dstate.pending_out=0;
    }
  }

  // Read a new buffer from the current input stream, update the adler32
  // and total number of bytes read.  All deflate() input goes through
  // this function so some applications may wish to modify it to avoid
  // allocating a large strm->next_in buffer and copying from it.
  // (See also flush_pending()).
  int read_buf(byte[] buf, int start, int size) {
    int len=avail_in;

    if(len>size) len=size;
    if(len==0) return 0;

    avail_in-=len;

    if(dstate.noheader==0) {
      adler=_adler.adler32(adler, next_in, next_in_index, len);
    }
    System.arraycopy(next_in, next_in_index, buf, start, len);
    next_in_index  += len;
    total_in += len;
    return len;
  }

  public void free(){
    next_in=null;
    next_out=null;
    msg=null;
    _adler=null;
  }
}
*/


//
// Inflate.java
//

function Inflate() {
    this.was = [0];
}

Inflate.prototype.inflateReset = function(z) {
    if(z == null || z.istate == null) return Z_STREAM_ERROR;
    
    z.total_in = z.total_out = 0;
    z.msg = null;
    z.istate.mode = z.istate.nowrap!=0 ? BLOCKS : METHOD;
    z.istate.blocks.reset(z, null);
    return Z_OK;
}

Inflate.prototype.inflateEnd = function(z){
    if(this.blocks != null)
      this.blocks.free(z);
    this.blocks=null;
    return Z_OK;
}

Inflate.prototype.inflateInit = function(z, w){
    z.msg = null;
    this.blocks = null;

    // handle undocumented nowrap option (no zlib header or check)
    nowrap = 0;
    if(w < 0){
      w = - w;
      nowrap = 1;
    }

    // set window size
    if(w<8 ||w>15){
      this.inflateEnd(z);
      return Z_STREAM_ERROR;
    }
    this.wbits=w;

    z.istate.blocks=new InfBlocks(z, 
				  z.istate.nowrap!=0 ? null : this,
				  1<<w);

    // reset state
    this.inflateReset(z);
    return Z_OK;
  }

Inflate.prototype.inflate = function(z, f){
    var r, b;

    if(z == null || z.istate == null || z.next_in == null)
      return Z_STREAM_ERROR;
    f = f == Z_FINISH ? Z_BUF_ERROR : Z_OK;
    r = Z_BUF_ERROR;
    while (true){
      switch (z.istate.mode){
      case METHOD:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        if(((z.istate.method = z.next_in[z.next_in_index++])&0xf)!=Z_DEFLATED){
          z.istate.mode = BAD;
          z.msg="unknown compression method";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }
        if((z.istate.method>>4)+8>z.istate.wbits){
          z.istate.mode = BAD;
          z.msg="invalid window size";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }
        z.istate.mode=FLAG;
      case FLAG:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        b = (z.next_in[z.next_in_index++])&0xff;

        if((((z.istate.method << 8)+b) % 31)!=0){
          z.istate.mode = BAD;
          z.msg = "incorrect header check";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }

        if((b&PRESET_DICT)==0){
          z.istate.mode = BLOCKS;
          break;
        }
        z.istate.mode = DICT4;
      case DICT4:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need=((z.next_in[z.next_in_index++]&0xff)<<24)&0xff000000;
        z.istate.mode=DICT3;
      case DICT3:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<16)&0xff0000;
        z.istate.mode=DICT2;
      case DICT2:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<8)&0xff00;
        z.istate.mode=DICT1;
      case DICT1:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need += (z.next_in[z.next_in_index++]&0xff);
        z.adler = z.istate.need;
        z.istate.mode = DICT0;
        return Z_NEED_DICT;
      case DICT0:
        z.istate.mode = BAD;
        z.msg = "need dictionary";
        z.istate.marker = 0;       // can try inflateSync
        return Z_STREAM_ERROR;
      case BLOCKS:

        r = z.istate.blocks.proc(z, r);
        if(r == Z_DATA_ERROR){
          z.istate.mode = BAD;
          z.istate.marker = 0;     // can try inflateSync
          break;
        }
        if(r == Z_OK){
          r = f;
        }
        if(r != Z_STREAM_END){
          return r;
        }
        r = f;
        z.istate.blocks.reset(z, z.istate.was);
        if(z.istate.nowrap!=0){
          z.istate.mode=DONE;
          break;
        }
        z.istate.mode=CHECK4;
      case CHECK4:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need=((z.next_in[z.next_in_index++]&0xff)<<24)&0xff000000;
        z.istate.mode=CHECK3;
      case CHECK3:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<16)&0xff0000;
        z.istate.mode = CHECK2;
      case CHECK2:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<8)&0xff00;
        z.istate.mode = CHECK1;
      case CHECK1:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=(z.next_in[z.next_in_index++]&0xff);

        if(((z.istate.was[0])) != ((z.istate.need))){
          z.istate.mode = BAD;
          z.msg = "incorrect data check";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }

        z.istate.mode = DONE;
      case DONE:
        return Z_STREAM_END;
      case BAD:
        return Z_DATA_ERROR;
      default:
        return Z_STREAM_ERROR;
      }
    }
  }


Inflate.prototype.inflateSetDictionary = function(z,  dictionary, dictLength) {
    var index=0;
    var length = dictLength;
    if(z==null || z.istate == null|| z.istate.mode != DICT0)
      return Z_STREAM_ERROR;

    if(z._adler.adler32(1, dictionary, 0, dictLength)!=z.adler){
      return Z_DATA_ERROR;
    }

    z.adler = z._adler.adler32(0, null, 0, 0);

    if(length >= (1<<z.istate.wbits)){
      length = (1<<z.istate.wbits)-1;
      index=dictLength - length;
    }
    z.istate.blocks.set_dictionary(dictionary, index, length);
    z.istate.mode = BLOCKS;
    return Z_OK;
  }

//  static private byte[] mark = {(byte)0, (byte)0, (byte)0xff, (byte)0xff};
var mark = [0, 0, 255, 255]

Inflate.prototype.inflateSync = function(z){
    var n;       // number of bytes to look at
    var p;       // pointer to bytes
    var m;       // number of marker bytes found in a row
    var r, w;   // temporaries to save total_in and total_out

    // set up
    if(z == null || z.istate == null)
      return Z_STREAM_ERROR;
    if(z.istate.mode != BAD){
      z.istate.mode = BAD;
      z.istate.marker = 0;
    }
    if((n=z.avail_in)==0)
      return Z_BUF_ERROR;
    p=z.next_in_index;
    m=z.istate.marker;

    // search
    while (n!=0 && m < 4){
      if(z.next_in[p] == mark[m]){
        m++;
      }
      else if(z.next_in[p]!=0){
        m = 0;
      }
      else{
        m = 4 - m;
      }
      p++; n--;
    }

    // restore
    z.total_in += p-z.next_in_index;
    z.next_in_index = p;
    z.avail_in = n;
    z.istate.marker = m;

    // return no joy or set up to restart on a new block
    if(m != 4){
      return Z_DATA_ERROR;
    }
    r=z.total_in;  w=z.total_out;
    this.inflateReset(z);
    z.total_in=r;  z.total_out = w;
    z.istate.mode = BLOCKS;
    return Z_OK;
}

  // Returns true if inflate is currently at the end of a block generated
  // by Z_SYNC_FLUSH or Z_FULL_FLUSH. This function is used by one PPP
  // implementation to provide an additional safety check. PPP uses Z_SYNC_FLUSH
  // but removes the length bytes of the resulting empty stored block. When
  // decompressing, PPP checks that at the end of input packet, inflate is
  // waiting for these length bytes.
Inflate.prototype.inflateSyncPoint = function(z){
    if(z == null || z.istate == null || z.istate.blocks == null)
      return Z_STREAM_ERROR;
    return z.istate.blocks.sync_point();
}


//
// InfBlocks.java
//

var INFBLOCKS_BORDER = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];

function InfBlocks(z, checkfn, w) {
    this.hufts=new Int32Array(MANY*3);
    this.window=new Uint8Array(w);
    this.end=w;
    this.checkfn = checkfn;
    this.mode = IB_TYPE;
    this.reset(z, null);

    this.left = 0;            // if STORED, bytes left to copy 

    this.table = 0;           // table lengths (14 bits) 
    this.index = 0;           // index into blens (or border) 
    this.blens = null;         // bit lengths of codes 
    this.bb=new Int32Array(1); // bit length tree depth 
    this.tb=new Int32Array(1); // bit length decoding tree 

    this.codes = new InfCodes();

    this.last = 0;            // true if this block is the last block 

  // mode independent information 
    this.bitk = 0;            // bits in bit buffer 
    this.bitb = 0;            // bit buffer 
    this.read = 0;            // window read pointer 
    this.write = 0;           // window write pointer 
    this.check = 0;          // check on output 

    this.inftree=new InfTree();
}




InfBlocks.prototype.reset = function(z, c){
    if(c) c[0]=this.check;
    if(this.mode==IB_CODES){
      this.codes.free(z);
    }
    this.mode=IB_TYPE;
    this.bitk=0;
    this.bitb=0;
    this.read=this.write=0;

    if(this.checkfn)
      z.adler=this.check=z._adler.adler32(0, null, 0, 0);
  }

 InfBlocks.prototype.proc = function(z, r){
    var t;              // temporary storage
    var b;              // bit buffer
    var k;              // bits in bit buffer
    var p;              // input data pointer
    var n;              // bytes available there
    var q;              // output window write pointer
    var m;              // bytes to end of window or read pointer

    // copy input/output information to locals (UPDATE macro restores)
    {p=z.next_in_index;n=z.avail_in;b=this.bitb;k=this.bitk;}
    {q=this.write;m=(q<this.read ? this.read-q-1 : this.end-q);}

    // process input based on current state
    while(true){
      switch (this.mode){
      case IB_TYPE:

	while(k<(3)){
	  if(n!=0){
	    r=Z_OK;
	  }
	  else{
	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;
	    z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  };
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}
	t = (b & 7);
	this.last = t & 1;

	switch (t >>> 1){
        case 0:                         // stored 
          {b>>>=(3);k-=(3);}
          t = k & 7;                    // go to byte boundary

          {b>>>=(t);k-=(t);}
          this.mode = IB_LENS;                  // get length of stored block
          break;
        case 1:                         // fixed
          {
              var bl=new Int32Array(1);
	      var bd=new Int32Array(1);
              var tl=[];
	      var td=[];

	      inflate_trees_fixed(bl, bd, tl, td, z);
              this.codes.init(bl[0], bd[0], tl[0], 0, td[0], 0, z);
          }

          {b>>>=(3);k-=(3);}

          this.mode = IB_CODES;
          break;
        case 2:                         // dynamic

          {b>>>=(3);k-=(3);}

          this.mode = IB_TABLE;
          break;
        case 3:                         // illegal

          {b>>>=(3);k-=(3);}
          this.mode = BAD;
          z.msg = "invalid block type";
          r = Z_DATA_ERROR;

	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  this.write=q;
	  return this.inflate_flush(z,r);
	}
	break;
      case IB_LENS:
	while(k<(32)){
	  if(n!=0){
	    r=Z_OK;
	  }
	  else{
	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;
	    z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  };
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	if ((((~b) >>> 16) & 0xffff) != (b & 0xffff)){
	  this.mode = BAD;
	  z.msg = "invalid stored block lengths";
	  r = Z_DATA_ERROR;

	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  this.write=q;
	  return this.inflate_flush(z,r);
	}
	this.left = (b & 0xffff);
	b = k = 0;                       // dump bits
	this.mode = this.left!=0 ? IB_STORED : (this.last!=0 ? IB_DRY : IB_TYPE);
	break;
      case IB_STORED:
	if (n == 0){
	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  write=q;
	  return this.inflate_flush(z,r);
	}

	if(m==0){
	  if(q==end&&read!=0){
	    q=0; m=(q<this.read ? this.read-q-1 : this.end-q);
	  }
	  if(m==0){
	    this.write=q; 
	    r=this.inflate_flush(z,r);
	    q=this.write; m = (q < this.read ? this.read-q-1 : this.end-q);
	    if(q==this.end && this.read != 0){
	      q=0; m = (q < this.read ? this.read-q-1 : this.end-q);
	    }
	    if(m==0){
	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    }
	  }
	}
	r=Z_OK;

	t = this.left;
	if(t>n) t = n;
	if(t>m) t = m;
	arrayCopy(z.next_in, p, this.window, q, t);
	p += t;  n -= t;
	q += t;  m -= t;
	if ((this.left -= t) != 0)
	  break;
	this.mode = (this.last != 0 ? IB_DRY : IB_TYPE);
	break;
      case IB_TABLE:

	while(k<(14)){
	  if(n!=0){
	    r=Z_OK;
	  }
	  else{
	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;
	    z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  };
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	this.table = t = (b & 0x3fff);
	if ((t & 0x1f) > 29 || ((t >> 5) & 0x1f) > 29)
	  {
	    this.mode = IB_BAD;
	    z.msg = "too many length or distance symbols";
	    r = Z_DATA_ERROR;

	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  }
	t = 258 + (t & 0x1f) + ((t >> 5) & 0x1f);
	if(this.blens==null || this.blens.length<t){
	    this.blens=new Int32Array(t);
	}
	else{
	  for(var i=0; i<t; i++){
              this.blens[i]=0;
          }
	}

	{b>>>=(14);k-=(14);}

	this.index = 0;
	mode = IB_BTREE;
      case IB_BTREE:
	while (this.index < 4 + (this.table >>> 10)){
	  while(k<(3)){
	    if(n!=0){
	      r=Z_OK;
	    }
	    else{
	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;
	      z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    };
	    n--;
	    b|=(z.next_in[p++]&0xff)<<k;
	    k+=8;
	  }

	  this.blens[INFBLOCKS_BORDER[this.index++]] = b&7;

	  {b>>>=(3);k-=(3);}
	}

	while(this.index < 19){
	  this.blens[INFBLOCKS_BORDER[this.index++]] = 0;
	}

	this.bb[0] = 7;
	t = this.inftree.inflate_trees_bits(this.blens, this.bb, this.tb, this.hufts, z);
	if (t != Z_OK){
	  r = t;
	  if (r == Z_DATA_ERROR){
	    this.blens=null;
	    this.mode = IB_BAD;
	  }

	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  write=q;
	  return this.inflate_flush(z,r);
	}

	this.index = 0;
	this.mode = IB_DTREE;
      case IB_DTREE:
	while (true){
	  t = this.table;
	  if(!(this.index < 258 + (t & 0x1f) + ((t >> 5) & 0x1f))){
	    break;
	  }

	  var h; //int[]
	  var i, j, c;

	  t = this.bb[0];

	  while(k<(t)){
	    if(n!=0){
	      r=Z_OK;
	    }
	    else{
	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;
	      z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    };
	    n--;
	    b|=(z.next_in[p++]&0xff)<<k;
	    k+=8;
	  }

//	  if (this.tb[0]==-1){
//            dlog("null...");
//	  }

	  t=this.hufts[(this.tb[0]+(b & inflate_mask[t]))*3+1];
	  c=this.hufts[(this.tb[0]+(b & inflate_mask[t]))*3+2];

	  if (c < 16){
	    b>>>=(t);k-=(t);
	    this.blens[this.index++] = c;
	  }
	  else { // c == 16..18
	    i = c == 18 ? 7 : c - 14;
	    j = c == 18 ? 11 : 3;

	    while(k<(t+i)){
	      if(n!=0){
		r=Z_OK;
	      }
	      else{
		this.bitb=b; this.bitk=k; 
		z.avail_in=n;
		z.total_in+=p-z.next_in_index;z.next_in_index=p;
		this.write=q;
		return this.inflate_flush(z,r);
	      };
	      n--;
	      b|=(z.next_in[p++]&0xff)<<k;
	      k+=8;
	    }

	    b>>>=(t);k-=(t);

	    j += (b & inflate_mask[i]);

	    b>>>=(i);k-=(i);

	    i = this.index;
	    t = this.table;
	    if (i + j > 258 + (t & 0x1f) + ((t >> 5) & 0x1f) ||
		(c == 16 && i < 1)){
	      this.blens=null;
	      this.mode = IB_BAD;
	      z.msg = "invalid bit length repeat";
	      r = Z_DATA_ERROR;

	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    }

	    c = c == 16 ? this.blens[i-1] : 0;
	    do{
	      this.blens[i++] = c;
	    }
	    while (--j!=0);
	    this.index = i;
	  }
	}

	this.tb[0]=-1;
	{
	    var bl=new Int32Array(1);
	    var bd=new Int32Array(1);
	    var tl=new Int32Array(1);
	    var td=new Int32Array(1);
	    bl[0] = 9;         // must be <= 9 for lookahead assumptions
	    bd[0] = 6;         // must be <= 9 for lookahead assumptions

	    t = this.table;
	    t = this.inftree.inflate_trees_dynamic(257 + (t & 0x1f), 
					      1 + ((t >> 5) & 0x1f),
					      this.blens, bl, bd, tl, td, this.hufts, z);

	    if (t != Z_OK){
	        if (t == Z_DATA_ERROR){
	            this.blens=null;
	            this.mode = BAD;
	        }
	        r = t;

	        this.bitb=b; this.bitk=k; 
	        z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	        this.write=q;
	        return this.inflate_flush(z,r);
	    }
	    this.codes.init(bl[0], bd[0], this.hufts, tl[0], this.hufts, td[0], z);
	}
	this.mode = IB_CODES;
      case IB_CODES:
	this.bitb=b; this.bitk=k;
	z.avail_in=n; z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;

	if ((r = this.codes.proc(this, z, r)) != Z_STREAM_END){
	  return this.inflate_flush(z, r);
	}
	r = Z_OK;
	this.codes.free(z);

	p=z.next_in_index; n=z.avail_in;b=this.bitb;k=this.bitk;
	q=this.write;m = (q < this.read ? this.read-q-1 : this.end-q);

	if (this.last==0){
	  this.mode = IB_TYPE;
	  break;
	}
	this.mode = IB_DRY;
      case IB_DRY:
	this.write=q; 
	r = this.inflate_flush(z, r); 
	q=this.write; m = (q < this.read ? this.read-q-1 : this.end-q);
	if (this.read != this.write){
	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  this.write=q;
	  return this.inflate_flush(z, r);
	}
	mode = DONE;
      case IB_DONE:
	r = Z_STREAM_END;

	this.bitb=b; this.bitk=k; 
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;
	return this.inflate_flush(z, r);
      case IB_BAD:
	r = Z_DATA_ERROR;

	this.bitb=b; this.bitk=k; 
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;
	return this.inflate_flush(z, r);

      default:
	r = Z_STREAM_ERROR;

	this.bitb=b; this.bitk=k; 
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;
	return this.inflate_flush(z, r);
      }
    }
  }

InfBlocks.prototype.free = function(z){
    this.reset(z, null);
    this.window=null;
    this.hufts=null;
}

InfBlocks.prototype.set_dictionary = function(d, start, n){
    arrayCopy(d, start, window, 0, n);
    this.read = this.write = n;
}

  // Returns true if inflate is currently at the end of a block generated
  // by Z_SYNC_FLUSH or Z_FULL_FLUSH. 
InfBlocks.prototype.sync_point = function(){
    return this.mode == IB_LENS;
}

  // copy as much as possible from the sliding window to the output area
InfBlocks.prototype.inflate_flush = function(z, r){
    var n;
    var p;
    var q;

    // local copies of source and destination pointers
    p = z.next_out_index;
    q = this.read;

    // compute number of bytes to copy as far as end of window
    n = ((q <= this.write ? this.write : this.end) - q);
    if (n > z.avail_out) n = z.avail_out;
    if (n!=0 && r == Z_BUF_ERROR) r = Z_OK;

    // update counters
    z.avail_out -= n;
    z.total_out += n;

    // update check information
    if(this.checkfn != null)
      z.adler=this.check=z._adler.adler32(this.check, this.window, q, n);

    // copy as far as end of window
    arrayCopy(this.window, q, z.next_out, p, n);
    p += n;
    q += n;

    // see if more to copy at beginning of window
    if (q == this.end){
      // wrap pointers
      q = 0;
      if (this.write == this.end)
        this.write = 0;

      // compute bytes to copy
      n = this.write - q;
      if (n > z.avail_out) n = z.avail_out;
      if (n!=0 && r == Z_BUF_ERROR) r = Z_OK;

      // update counters
      z.avail_out -= n;
      z.total_out += n;

      // update check information
      if(this.checkfn != null)
	z.adler=this.check=z._adler.adler32(this.check, this.window, q, n);

      // copy
      arrayCopy(this.window, q, z.next_out, p, n);
      p += n;
      q += n;
    }

    // update pointers
    z.next_out_index = p;
    this.read = q;

    // done
    return r;
  }

//
// InfCodes.java
//

var IC_START=0;  // x: set up for LEN
var IC_LEN=1;    // i: get length/literal/eob next
var IC_LENEXT=2; // i: getting length extra (have base)
var IC_DIST=3;   // i: get distance next
var IC_DISTEXT=4;// i: getting distance extra
var IC_COPY=5;   // o: copying bytes in window, waiting for space
var IC_LIT=6;    // o: got literal, waiting for output space
var IC_WASH=7;   // o: got eob, possibly still output waiting
var IC_END=8;    // x: got eob and all data flushed
var IC_BADCODE=9;// x: got error

function InfCodes() {
}

InfCodes.prototype.init = function(bl, bd, tl, tl_index, td, td_index, z) {
    this.mode=IC_START;
    this.lbits=bl;
    this.dbits=bd;
    this.ltree=tl;
    this.ltree_index=tl_index;
    this.dtree = td;
    this.dtree_index=td_index;
    this.tree=null;
}

InfCodes.prototype.proc = function(s, z, r){ 
    var j;              // temporary storage
    var t;              // temporary pointer (int[])
    var tindex;         // temporary pointer
    var e;              // extra bits or operation
    var b=0;            // bit buffer
    var k=0;            // bits in bit buffer
    var p=0;            // input data pointer
    var n;              // bytes available there
    var q;              // output window write pointer
    var m;              // bytes to end of window or read pointer
    var f;              // pointer to copy strings from

    // copy input/output information to locals (UPDATE macro restores)
    p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;
    q=s.write;m=q<s.read?s.read-q-1:s.end-q;

    // process input and output based on current state
    while (true){
      switch (this.mode){
	// waiting for "i:"=input, "o:"=output, "x:"=nothing
      case IC_START:         // x: set up for LEN
	if (m >= 258 && n >= 10){

	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;
	  r = this.inflate_fast(this.lbits, this.dbits, 
			   this.ltree, this.ltree_index, 
			   this.dtree, this.dtree_index,
			   s, z);

	  p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;
	  q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	  if (r != Z_OK){
	    this.mode = r == Z_STREAM_END ? IC_WASH : IC_BADCODE;
	    break;
	  }
	}
	this.need = this.lbits;
	this.tree = this.ltree;
	this.tree_index=this.ltree_index;

	this.mode = IC_LEN;
      case IC_LEN:           // i: get length/literal/eob next
	j = this.need;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	tindex=(this.tree_index+(b&inflate_mask[j]))*3;

	b>>>=(this.tree[tindex+1]);
	k-=(this.tree[tindex+1]);

	e=this.tree[tindex];

	if(e == 0){               // literal
	  this.lit = this.tree[tindex+2];
	  this.mode = IC_LIT;
	  break;
	}
	if((e & 16)!=0 ){          // length
	  this.get = e & 15;
	  this.len = this.tree[tindex+2];
	  this.mode = IC_LENEXT;
	  break;
	}
	if ((e & 64) == 0){        // next table
	  this.need = e;
	  this.tree_index = tindex/3 + this.tree[tindex+2];
	  break;
	}
	if ((e & 32)!=0){               // end of block
	  this.mode = IC_WASH;
	  break;
	}
	this.mode = IC_BADCODE;        // invalid code
	z.msg = "invalid literal/length code";
	r = Z_DATA_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      case IC_LENEXT:        // i: getting length extra (have base)
	j = this.get;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--; b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	this.len += (b & inflate_mask[j]);

	b>>=j;
	k-=j;

	this.need = this.dbits;
	this.tree = this.dtree;
	this.tree_index = this.dtree_index;
	this.mode = IC_DIST;
      case IC_DIST:          // i: get distance next
	j = this.need;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--; b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	tindex=(this.tree_index+(b & inflate_mask[j]))*3;

	b>>=this.tree[tindex+1];
	k-=this.tree[tindex+1];

	e = (this.tree[tindex]);
	if((e & 16)!=0){               // distance
	  this.get = e & 15;
	  this.dist = this.tree[tindex+2];
	  this.mode = IC_DISTEXT;
	  break;
	}
	if ((e & 64) == 0){        // next table
	  this.need = e;
	  this.tree_index = tindex/3 + this.tree[tindex+2];
	  break;
	}
	this.mode = IC_BADCODE;        // invalid code
	z.msg = "invalid distance code";
	r = Z_DATA_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      case IC_DISTEXT:       // i: getting distance extra
	j = this.get;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--; b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	this.dist += (b & inflate_mask[j]);

	b>>=j;
	k-=j;

	this.mode = IC_COPY;
      case IC_COPY:          // o: copying bytes in window, waiting for space
        f = q - this.dist;
        while(f < 0){     // modulo window size-"while" instead
          f += s.end;     // of "if" handles invalid distances
	}
	while (this.len!=0){

	  if(m==0){
	    if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}
	    if(m==0){
	      s.write=q; r=s.inflate_flush(z,r);
	      q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	      if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}

	      if(m==0){
		s.bitb=b;s.bitk=k;
		z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
		s.write=q;
		return s.inflate_flush(z,r);
	      }  
	    }
	  }

	  s.window[q++]=s.window[f++]; m--;

	  if (f == s.end)
            f = 0;
	  this.len--;
	}
	this.mode = IC_START;
	break;
      case IC_LIT:           // o: got literal, waiting for output space
	if(m==0){
	  if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}
	  if(m==0){
	    s.write=q; r=s.inflate_flush(z,r);
	    q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	    if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}
	    if(m==0){
	      s.bitb=b;s.bitk=k;
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      s.write=q;
	      return s.inflate_flush(z,r);
	    }
	  }
	}
	r=Z_OK;

	s.window[q++]=this.lit; m--;

	this.mode = IC_START;
	break;
      case IC_WASH:           // o: got eob, possibly more output
	if (k > 7){        // return unused byte, if any
	  k -= 8;
	  n++;
	  p--;             // can always return one
	}

	s.write=q; r=s.inflate_flush(z,r);
	q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	if (s.read != s.write){
	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;
	  return s.inflate_flush(z,r);
	}
	this.mode = IC_END;
      case IC_END:
	r = Z_STREAM_END;
	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      case IC_BADCODE:       // x: got error

	r = Z_DATA_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      default:
	r = Z_STREAM_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);
      }
    }
  }

InfCodes.prototype.free = function(z){
    //  ZFREE(z, c);
}

  // Called with number of bytes left to write in window at least 258
  // (the maximum string length) and number of input bytes available
  // at least ten.  The ten bytes are six bytes for the longest length/
  // distance pair plus four bytes for overloading the bit buffer.

InfCodes.prototype.inflate_fast = function(bl, bd, tl, tl_index, td, td_index, s, z) {
    var t;                // temporary pointer
    var   tp;             // temporary pointer (int[])
    var tp_index;         // temporary pointer
    var e;                // extra bits or operation
    var b;                // bit buffer
    var k;                // bits in bit buffer
    var p;                // input data pointer
    var n;                // bytes available there
    var q;                // output window write pointer
    var m;                // bytes to end of window or read pointer
    var ml;               // mask for literal/length tree
    var md;               // mask for distance tree
    var c;                // bytes to copy
    var d;                // distance back to copy from
    var r;                // copy source pointer

    var tp_index_t_3;     // (tp_index+t)*3

    // load input, output, bit values
    p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;
    q=s.write;m=q<s.read?s.read-q-1:s.end-q;

    // initialize masks
    ml = inflate_mask[bl];
    md = inflate_mask[bd];

    // do until not enough input or output space for fast loop
    do {                          // assume called with m >= 258 && n >= 10
      // get literal/length code
      while(k<(20)){              // max bits for literal/length code
	n--;
	b|=(z.next_in[p++]&0xff)<<k;k+=8;
      }

      t= b&ml;
      tp=tl; 
      tp_index=tl_index;
      tp_index_t_3=(tp_index+t)*3;
      if ((e = tp[tp_index_t_3]) == 0){
	b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	s.window[q++] = tp[tp_index_t_3+2];
	m--;
	continue;
      }
      do {

	b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	if((e&16)!=0){
	  e &= 15;
	  c = tp[tp_index_t_3+2] + (b & inflate_mask[e]);

	  b>>=e; k-=e;

	  // decode distance base of block to copy
	  while(k<(15)){           // max bits for distance code
	    n--;
	    b|=(z.next_in[p++]&0xff)<<k;k+=8;
	  }

	  t= b&md;
	  tp=td;
	  tp_index=td_index;
          tp_index_t_3=(tp_index+t)*3;
	  e = tp[tp_index_t_3];

	  do {

	    b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	    if((e&16)!=0){
	      // get extra bits to add to distance base
	      e &= 15;
	      while(k<(e)){         // get extra bits (up to 13)
		n--;
		b|=(z.next_in[p++]&0xff)<<k;k+=8;
	      }

	      d = tp[tp_index_t_3+2] + (b&inflate_mask[e]);

	      b>>=(e); k-=(e);

	      // do the copy
	      m -= c;
	      if (q >= d){                // offset before dest
		//  just copy
		r=q-d;
		if(q-r>0 && 2>(q-r)){           
		  s.window[q++]=s.window[r++]; // minimum count is three,
		  s.window[q++]=s.window[r++]; // so unroll loop a little
		  c-=2;
		}
		else{
		  s.window[q++]=s.window[r++]; // minimum count is three,
		  s.window[q++]=s.window[r++]; // so unroll loop a little
		  c-=2;
		}
	      }
	      else{                  // else offset after destination
                r=q-d;
                do{
                  r+=s.end;          // force pointer in window
                }while(r<0);         // covers invalid distances
		e=s.end-r;
		if(c>e){             // if source crosses,
		  c-=e;              // wrapped copy
		  if(q-r>0 && e>(q-r)){           
		    do{s.window[q++] = s.window[r++];}
		    while(--e!=0);
		  }
		  else{
		    arrayCopy(s.window, r, s.window, q, e);
		    q+=e; r+=e; e=0;
		  }
		  r = 0;                  // copy rest from start of window
		}

	      }

	      // copy all or what's left
              do{s.window[q++] = s.window[r++];}
		while(--c!=0);
	      break;
	    }
	    else if((e&64)==0){
	      t+=tp[tp_index_t_3+2];
	      t+=(b&inflate_mask[e]);
	      tp_index_t_3=(tp_index+t)*3;
	      e=tp[tp_index_t_3];
	    }
	    else{
	      z.msg = "invalid distance code";

	      c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;

	      s.bitb=b;s.bitk=k;
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      s.write=q;

	      return Z_DATA_ERROR;
	    }
	  }
	  while(true);
	  break;
	}

	if((e&64)==0){
	  t+=tp[tp_index_t_3+2];
	  t+=(b&inflate_mask[e]);
	  tp_index_t_3=(tp_index+t)*3;
	  if((e=tp[tp_index_t_3])==0){

	    b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	    s.window[q++]=tp[tp_index_t_3+2];
	    m--;
	    break;
	  }
	}
	else if((e&32)!=0){

	  c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;
 
	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;

	  return Z_STREAM_END;
	}
	else{
	  z.msg="invalid literal/length code";

	  c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;

	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;

	  return Z_DATA_ERROR;
	}
      } 
      while(true);
    } 
    while(m>=258 && n>= 10);

    // not enough input or output--restore pointers and return
    c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;

    s.bitb=b;s.bitk=k;
    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
    s.write=q;

    return Z_OK;
}

//
// InfTree.java
//

function InfTree() {
}

InfTree.prototype.huft_build = function(b, bindex, n, s, d, e, t, m, hp, hn, v) {

    // Given a list of code lengths and a maximum table size, make a set of
    // tables to decode that set of codes.  Return Z_OK on success, Z_BUF_ERROR
    // if the given code set is incomplete (the tables are still built in this
    // case), Z_DATA_ERROR if the input is invalid (an over-subscribed set of
    // lengths), or Z_MEM_ERROR if not enough memory.

    var a;                       // counter for codes of length k
    var f;                       // i repeats in table every f entries
    var g;                       // maximum code length
    var h;                       // table level
    var i;                       // counter, current code
    var j;                       // counter
    var k;                       // number of bits in current code
    var l;                       // bits per table (returned in m)
    var mask;                    // (1 << w) - 1, to avoid cc -O bug on HP
    var p;                       // pointer into c[], b[], or v[]
    var q;                       // points to current table
    var w;                       // bits before this table == (l * h)
    var xp;                      // pointer into x
    var y;                       // number of dummy codes added
    var z;                       // number of entries in current table

    // Generate counts for each bit length

    p = 0; i = n;
    do {
      this.c[b[bindex+p]]++; p++; i--;   // assume all entries <= BMAX
    }while(i!=0);

    if(this.c[0] == n){                // null input--all zero length codes
      t[0] = -1;
      m[0] = 0;
      return Z_OK;
    }

    // Find minimum and maximum length, bound *m by those
    l = m[0];
    for (j = 1; j <= BMAX; j++)
      if(this.c[j]!=0) break;
    k = j;                        // minimum code length
    if(l < j){
      l = j;
    }
    for (i = BMAX; i!=0; i--){
      if(this.c[i]!=0) break;
    }
    g = i;                        // maximum code length
    if(l > i){
      l = i;
    }
    m[0] = l;

    // Adjust last length count to fill out codes, if needed
    for (y = 1 << j; j < i; j++, y <<= 1){
      if ((y -= this.c[j]) < 0){
        return Z_DATA_ERROR;
      }
    }
    if ((y -= this.c[i]) < 0){
      return Z_DATA_ERROR;
    }
    this.c[i] += y;

    // Generate starting offsets into the value table for each length
    this.x[1] = j = 0;
    p = 1;  xp = 2;
    while (--i!=0) {                 // note that i == g from above
      this.x[xp] = (j += this.c[p]);
      xp++;
      p++;
    }

    // Make a table of values in order of bit lengths
    i = 0; p = 0;
    do {
      if ((j = b[bindex+p]) != 0){
        this.v[this.x[j]++] = i;
      }
      p++;
    }
    while (++i < n);
    n = this.x[g];                     // set n to length of v

    // Generate the Huffman codes and for each, make the table entries
    this.x[0] = i = 0;                 // first Huffman code is zero
    p = 0;                        // grab values in bit order
    h = -1;                       // no tables yet--level -1
    w = -l;                       // bits decoded == (l * h)
    this.u[0] = 0;                     // just to keep compilers happy
    q = 0;                        // ditto
    z = 0;                        // ditto

    // go through the bit lengths (k already is bits in shortest code)
    for (; k <= g; k++){
      a = this.c[k];
      while (a--!=0){
	// here i is the Huffman code of length k bits for value *p
	// make tables up to required level
        while (k > w + l){
          h++;
          w += l;                 // previous table always l bits
	  // compute minimum size table less than or equal to l bits
          z = g - w;
          z = (z > l) ? l : z;        // table size upper limit
          if((f=1<<(j=k-w))>a+1){     // try a k-w bit table
                                      // too few codes for k-w bit table
            f -= a + 1;               // deduct codes from patterns left
            xp = k;
            if(j < z){
              while (++j < z){        // try smaller tables up to z bits
                if((f <<= 1) <= this.c[++xp])
                  break;              // enough codes to use up j bits
                f -= this.c[xp];           // else deduct codes from patterns
              }
	    }
          }
          z = 1 << j;                 // table entries for j-bit table

	  // allocate new table
          if (this.hn[0] + z > MANY){       // (note: doesn't matter for fixed)
            return Z_DATA_ERROR;       // overflow of MANY
          }
          this.u[h] = q = /*hp+*/ this.hn[0];   // DEBUG
          this.hn[0] += z;
 
	  // connect to last table, if there is one
	  if(h!=0){
            this.x[h]=i;           // save pattern for backing up
            this.r[0]=j;     // bits in this table
            this.r[1]=l;     // bits to dump before this table
            j=i>>>(w - l);
            this.r[2] = (q - this.u[h-1] - j);               // offset to this table
            arrayCopy(this.r, 0, hp, (this.u[h-1]+j)*3, 3); // connect to last table
          }
          else{
            t[0] = q;               // first table is returned result
	  }
        }

	// set up table entry in r
        this.r[1] = (k - w);
        if (p >= n){
          this.r[0] = 128 + 64;      // out of values--invalid code
	}
        else if (v[p] < s){
          this.r[0] = (this.v[p] < 256 ? 0 : 32 + 64);  // 256 is end-of-block
          this.r[2] = this.v[p++];          // simple code is just the value
        }
        else{
          this.r[0]=(e[this.v[p]-s]+16+64); // non-simple--look up in lists
          this.r[2]=d[this.v[p++] - s];
        }

        // fill code-like entries with r
        f=1<<(k-w);
        for (j=i>>>w;j<z;j+=f){
          arrayCopy(this.r, 0, hp, (q+j)*3, 3);
	}

	// backwards increment the k-bit code i
        for (j = 1 << (k - 1); (i & j)!=0; j >>>= 1){
          i ^= j;
	}
        i ^= j;

	// backup over finished tables
        mask = (1 << w) - 1;      // needed on HP, cc -O bug
        while ((i & mask) != this.x[h]){
          h--;                    // don't need to update q
          w -= l;
          mask = (1 << w) - 1;
        }
      }
    }
    // Return Z_BUF_ERROR if we were given an incomplete table
    return y != 0 && g != 1 ? Z_BUF_ERROR : Z_OK;
}

InfTree.prototype.inflate_trees_bits = function(c, bb, tb, hp, z) {
    var result;
    this.initWorkArea(19);
    this.hn[0]=0;
    result = this.huft_build(c, 0, 19, 19, null, null, tb, bb, hp, this.hn, this.v);

    if(result == Z_DATA_ERROR){
      z.msg = "oversubscribed dynamic bit lengths tree";
    }
    else if(result == Z_BUF_ERROR || bb[0] == 0){
      z.msg = "incomplete dynamic bit lengths tree";
      result = Z_DATA_ERROR;
    }
    return result;
}

InfTree.prototype.inflate_trees_dynamic = function(nl, nd, c, bl, bd, tl, td, hp, z) {
    var result;

    // build literal/length tree
    this.initWorkArea(288);
    this.hn[0]=0;
    result = this.huft_build(c, 0, nl, 257, cplens, cplext, tl, bl, hp, this.hn, this.v);
    if (result != Z_OK || bl[0] == 0){
      if(result == Z_DATA_ERROR){
        z.msg = "oversubscribed literal/length tree";
      }
      else if (result != Z_MEM_ERROR){
        z.msg = "incomplete literal/length tree";
        result = Z_DATA_ERROR;
      }
      return result;
    }

    // build distance tree
    this.initWorkArea(288);
    result = this.huft_build(c, nl, nd, 0, cpdist, cpdext, td, bd, hp, this.hn, this.v);

    if (result != Z_OK || (bd[0] == 0 && nl > 257)){
      if (result == Z_DATA_ERROR){
        z.msg = "oversubscribed distance tree";
      }
      else if (result == Z_BUF_ERROR) {
        z.msg = "incomplete distance tree";
        result = Z_DATA_ERROR;
      }
      else if (result != Z_MEM_ERROR){
        z.msg = "empty distance tree with lengths";
        result = Z_DATA_ERROR;
      }
      return result;
    }

    return Z_OK;
}
/*
  static int inflate_trees_fixed(int[] bl,  //literal desired/actual bit depth
                                 int[] bd,  //distance desired/actual bit depth
                                 int[][] tl,//literal/length tree result
                                 int[][] td,//distance tree result 
                                 ZStream z  //for memory allocation
				 ){

*/

function inflate_trees_fixed(bl, bd, tl, td, z) {
    bl[0]=fixed_bl;
    bd[0]=fixed_bd;
    tl[0]=fixed_tl;
    td[0]=fixed_td;
    return Z_OK;
}

InfTree.prototype.initWorkArea = function(vsize){
    if(this.hn==null){
        this.hn=new Int32Array(1);
        this.v=new Int32Array(vsize);
        this.c=new Int32Array(BMAX+1);
        this.r=new Int32Array(3);
        this.u=new Int32Array(BMAX);
        this.x=new Int32Array(BMAX+1);
    }
    if(this.v.length<vsize){ 
        this.v=new Int32Array(vsize); 
    }
    for(var i=0; i<vsize; i++){this.v[i]=0;}
    for(var i=0; i<BMAX+1; i++){this.c[i]=0;}
    for(var i=0; i<3; i++){this.r[i]=0;}
//  for(int i=0; i<BMAX; i++){u[i]=0;}
    arrayCopy(this.c, 0, this.u, 0, BMAX);
//  for(int i=0; i<BMAX+1; i++){x[i]=0;}
    arrayCopy(this.c, 0, this.x, 0, BMAX+1);
}

var testArray = new Uint8Array(1);
var hasSubarray = (typeof testArray.subarray === 'function');
var hasSlice = false; /* (typeof testArray.slice === 'function'); */ // Chrome slice performance is so dire that we're currently not using it...

function arrayCopy(src, srcOffset, dest, destOffset, count) {
    if (count == 0) {
        return;
    } 
    if (!src) {
        throw "Undef src";
    } else if (!dest) {
        throw "Undef dest";
    }

    if (srcOffset == 0 && count == src.length) {
        arrayCopy_fast(src, dest, destOffset);
    } else if (hasSubarray) {
        arrayCopy_fast(src.subarray(srcOffset, srcOffset + count), dest, destOffset); 
    } else if (src.BYTES_PER_ELEMENT == 1 && count > 100) {
        arrayCopy_fast(new Uint8Array(src.buffer, src.byteOffset + srcOffset, count), dest, destOffset);
    } else { 
        arrayCopy_slow(src, srcOffset, dest, destOffset, count);
    }

}

function arrayCopy_slow(src, srcOffset, dest, destOffset, count) {

    // dlog('_slow call: srcOffset=' + srcOffset + '; destOffset=' + destOffset + '; count=' + count);

     for (var i = 0; i < count; ++i) {
        dest[destOffset + i] = src[srcOffset + i];
    }
}

function arrayCopy_fast(src, dest, destOffset) {
    dest.set(src, destOffset);
}


  // largest prime smaller than 65536
var ADLER_BASE=65521; 
  // NMAX is the largest n such that 255n(n+1)/2 + (n+1)(BASE-1) <= 2^32-1
var ADLER_NMAX=5552;

function adler32(adler, /* byte[] */ buf,  index, len){
    if(buf == null){ return 1; }

    var s1=adler&0xffff;
    var s2=(adler>>16)&0xffff;
    var k;

    while(len > 0) {
      k=len<ADLER_NMAX?len:ADLER_NMAX;
      len-=k;
      while(k>=16){
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        k-=16;
      }
      if(k!=0){
        do{
          s1+=buf[index++]&0xff; s2+=s1;
        }
        while(--k!=0);
      }
      s1%=ADLER_BASE;
      s2%=ADLER_BASE;
    }
    return (s2<<16)|s1;
}



function jszlib_inflate_buffer(buffer, start, length, afterUncOffset) {
    if (!start) {
        buffer = new Uint8Array(buffer);
    } else if (!length) {
        buffer = new Uint8Array(buffer, start, buffer.byteLength - start);
    } else {
        buffer = new Uint8Array(buffer, start, length);
    }

    var z = new ZStream();
    z.inflateInit(DEF_WBITS, true);
    z.next_in = buffer;
    z.next_in_index = 0;
    z.avail_in = buffer.length;

    var oBlockList = [];
    var totalSize = 0;
    while (true) {
        var obuf = new Uint8Array(32000);
        z.next_out = obuf;
        z.next_out_index = 0;
        z.avail_out = obuf.length;
        var status = z.inflate(Z_NO_FLUSH);
        if (status != Z_OK && status != Z_STREAM_END && status != Z_BUF_ERROR) {
            throw z.msg;
        }
        if (z.avail_out != 0) {
            var newob = new Uint8Array(obuf.length - z.avail_out);
            arrayCopy(obuf, 0, newob, 0, (obuf.length - z.avail_out));
            obuf = newob;
        }
        oBlockList.push(obuf);
        totalSize += obuf.length;
        if (status == Z_STREAM_END || status == Z_BUF_ERROR) {
            break;
        }
    }

    if (afterUncOffset) {
        afterUncOffset[0] = (start || 0) + z.next_in_index;
    }

    if (oBlockList.length == 1) {
        return oBlockList[0].buffer;
    } else {
        var out = new Uint8Array(totalSize);
        var cursor = 0;
        for (var i = 0; i < oBlockList.length; ++i) {
            var b = oBlockList[i];
            arrayCopy(b, 0, out, cursor, b.length);
            cursor += b.length;
        }
        return out.buffer;
    }
}

if (typeof(module) !== 'undefined') {
  module.exports = {
    inflateBuffer: jszlib_inflate_buffer,
    arrayCopy: arrayCopy
  };
}

},{}],61:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],62:[function(require,module,exports){
//  Ramda v0.21.0
//  https://github.com/ramda/ramda
//  (c) 2013-2016 Scott Sauyet, Michael Hurley, and David Chambers
//  Ramda may be freely distributed under the MIT license.

;(function() {

  'use strict';

  /**
     * A special placeholder value used to specify "gaps" within curried functions,
     * allowing partial application of any combination of arguments, regardless of
     * their positions.
     *
     * If `g` is a curried ternary function and `_` is `R.__`, the following are
     * equivalent:
     *
     *   - `g(1, 2, 3)`
     *   - `g(_, 2, 3)(1)`
     *   - `g(_, _, 3)(1)(2)`
     *   - `g(_, _, 3)(1, 2)`
     *   - `g(_, 2, _)(1, 3)`
     *   - `g(_, 2)(1)(3)`
     *   - `g(_, 2)(1, 3)`
     *   - `g(_, 2)(_, 3)(1)`
     *
     * @constant
     * @memberOf R
     * @since v0.6.0
     * @category Function
     * @example
     *
     *      var greet = R.replace('{name}', R.__, 'Hello, {name}!');
     *      greet('Alice'); //=> 'Hello, Alice!'
     */
    var __ = { '@@functional/placeholder': true };

    /* eslint-disable no-unused-vars */
    var _arity = function _arity(n, fn) {
        /* eslint-disable no-unused-vars */
        switch (n) {
        case 0:
            return function () {
                return fn.apply(this, arguments);
            };
        case 1:
            return function (a0) {
                return fn.apply(this, arguments);
            };
        case 2:
            return function (a0, a1) {
                return fn.apply(this, arguments);
            };
        case 3:
            return function (a0, a1, a2) {
                return fn.apply(this, arguments);
            };
        case 4:
            return function (a0, a1, a2, a3) {
                return fn.apply(this, arguments);
            };
        case 5:
            return function (a0, a1, a2, a3, a4) {
                return fn.apply(this, arguments);
            };
        case 6:
            return function (a0, a1, a2, a3, a4, a5) {
                return fn.apply(this, arguments);
            };
        case 7:
            return function (a0, a1, a2, a3, a4, a5, a6) {
                return fn.apply(this, arguments);
            };
        case 8:
            return function (a0, a1, a2, a3, a4, a5, a6, a7) {
                return fn.apply(this, arguments);
            };
        case 9:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {
                return fn.apply(this, arguments);
            };
        case 10:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {
                return fn.apply(this, arguments);
            };
        default:
            throw new Error('First argument to _arity must be a non-negative integer no greater than ten');
        }
    };

    var _arrayFromIterator = function _arrayFromIterator(iter) {
        var list = [];
        var next;
        while (!(next = iter.next()).done) {
            list.push(next.value);
        }
        return list;
    };

    var _arrayOf = function _arrayOf() {
        return Array.prototype.slice.call(arguments);
    };

    var _cloneRegExp = function _cloneRegExp(pattern) {
        return new RegExp(pattern.source, (pattern.global ? 'g' : '') + (pattern.ignoreCase ? 'i' : '') + (pattern.multiline ? 'm' : '') + (pattern.sticky ? 'y' : '') + (pattern.unicode ? 'u' : ''));
    };

    var _complement = function _complement(f) {
        return function () {
            return !f.apply(this, arguments);
        };
    };

    /**
     * Private `concat` function to merge two array-like objects.
     *
     * @private
     * @param {Array|Arguments} [set1=[]] An array-like object.
     * @param {Array|Arguments} [set2=[]] An array-like object.
     * @return {Array} A new, merged array.
     * @example
     *
     *      _concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]
     */
    var _concat = function _concat(set1, set2) {
        set1 = set1 || [];
        set2 = set2 || [];
        var idx;
        var len1 = set1.length;
        var len2 = set2.length;
        var result = [];
        idx = 0;
        while (idx < len1) {
            result[result.length] = set1[idx];
            idx += 1;
        }
        idx = 0;
        while (idx < len2) {
            result[result.length] = set2[idx];
            idx += 1;
        }
        return result;
    };

    var _containsWith = function _containsWith(pred, x, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            if (pred(x, list[idx])) {
                return true;
            }
            idx += 1;
        }
        return false;
    };

    var _filter = function _filter(fn, list) {
        var idx = 0;
        var len = list.length;
        var result = [];
        while (idx < len) {
            if (fn(list[idx])) {
                result[result.length] = list[idx];
            }
            idx += 1;
        }
        return result;
    };

    var _forceReduced = function _forceReduced(x) {
        return {
            '@@transducer/value': x,
            '@@transducer/reduced': true
        };
    };

    // String(x => x) evaluates to "x => x", so the pattern may not match.
    var _functionName = function _functionName(f) {
        // String(x => x) evaluates to "x => x", so the pattern may not match.
        var match = String(f).match(/^function (\w*)/);
        return match == null ? '' : match[1];
    };

    var _has = function _has(prop, obj) {
        return Object.prototype.hasOwnProperty.call(obj, prop);
    };

    var _identity = function _identity(x) {
        return x;
    };

    var _isArguments = function () {
        var toString = Object.prototype.toString;
        return toString.call(arguments) === '[object Arguments]' ? function _isArguments(x) {
            return toString.call(x) === '[object Arguments]';
        } : function _isArguments(x) {
            return _has('callee', x);
        };
    }();

    /**
     * Tests whether or not an object is an array.
     *
     * @private
     * @param {*} val The object to test.
     * @return {Boolean} `true` if `val` is an array, `false` otherwise.
     * @example
     *
     *      _isArray([]); //=> true
     *      _isArray(null); //=> false
     *      _isArray({}); //=> false
     */
    var _isArray = Array.isArray || function _isArray(val) {
        return val != null && val.length >= 0 && Object.prototype.toString.call(val) === '[object Array]';
    };

    var _isFunction = function _isNumber(x) {
        return Object.prototype.toString.call(x) === '[object Function]';
    };

    /**
     * Determine if the passed argument is an integer.
     *
     * @private
     * @param {*} n
     * @category Type
     * @return {Boolean}
     */
    var _isInteger = Number.isInteger || function _isInteger(n) {
        return n << 0 === n;
    };

    var _isNumber = function _isNumber(x) {
        return Object.prototype.toString.call(x) === '[object Number]';
    };

    var _isObject = function _isObject(x) {
        return Object.prototype.toString.call(x) === '[object Object]';
    };

    var _isPlaceholder = function _isPlaceholder(a) {
        return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;
    };

    var _isRegExp = function _isRegExp(x) {
        return Object.prototype.toString.call(x) === '[object RegExp]';
    };

    var _isString = function _isString(x) {
        return Object.prototype.toString.call(x) === '[object String]';
    };

    var _isTransformer = function _isTransformer(obj) {
        return typeof obj['@@transducer/step'] === 'function';
    };

    var _map = function _map(fn, functor) {
        var idx = 0;
        var len = functor.length;
        var result = Array(len);
        while (idx < len) {
            result[idx] = fn(functor[idx]);
            idx += 1;
        }
        return result;
    };

    // Based on https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign
    var _objectAssign = function _objectAssign(target) {
        if (target == null) {
            throw new TypeError('Cannot convert undefined or null to object');
        }
        var output = Object(target);
        var idx = 1;
        var length = arguments.length;
        while (idx < length) {
            var source = arguments[idx];
            if (source != null) {
                for (var nextKey in source) {
                    if (_has(nextKey, source)) {
                        output[nextKey] = source[nextKey];
                    }
                }
            }
            idx += 1;
        }
        return output;
    };

    var _of = function _of(x) {
        return [x];
    };

    var _pipe = function _pipe(f, g) {
        return function () {
            return g.call(this, f.apply(this, arguments));
        };
    };

    var _pipeP = function _pipeP(f, g) {
        return function () {
            var ctx = this;
            return f.apply(ctx, arguments).then(function (x) {
                return g.call(ctx, x);
            });
        };
    };

    // \b matches word boundary; [\b] matches backspace
    var _quote = function _quote(s) {
        var escaped = s.replace(/\\/g, '\\\\').replace(/[\b]/g, '\\b')    // \b matches word boundary; [\b] matches backspace
    .replace(/\f/g, '\\f').replace(/\n/g, '\\n').replace(/\r/g, '\\r').replace(/\t/g, '\\t').replace(/\v/g, '\\v').replace(/\0/g, '\\0');
        return '"' + escaped.replace(/"/g, '\\"') + '"';
    };

    var _reduced = function _reduced(x) {
        return x && x['@@transducer/reduced'] ? x : {
            '@@transducer/value': x,
            '@@transducer/reduced': true
        };
    };

    /**
     * An optimized, private array `slice` implementation.
     *
     * @private
     * @param {Arguments|Array} args The array or arguments object to consider.
     * @param {Number} [from=0] The array index to slice from, inclusive.
     * @param {Number} [to=args.length] The array index to slice to, exclusive.
     * @return {Array} A new, sliced array.
     * @example
     *
     *      _slice([1, 2, 3, 4, 5], 1, 3); //=> [2, 3]
     *
     *      var firstThreeArgs = function(a, b, c, d) {
     *        return _slice(arguments, 0, 3);
     *      };
     *      firstThreeArgs(1, 2, 3, 4); //=> [1, 2, 3]
     */
    var _slice = function _slice(args, from, to) {
        switch (arguments.length) {
        case 1:
            return _slice(args, 0, args.length);
        case 2:
            return _slice(args, from, args.length);
        default:
            var list = [];
            var idx = 0;
            var len = Math.max(0, Math.min(args.length, to) - from);
            while (idx < len) {
                list[idx] = args[from + idx];
                idx += 1;
            }
            return list;
        }
    };

    /**
     * Polyfill from <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString>.
     */
    var _toISOString = function () {
        var pad = function pad(n) {
            return (n < 10 ? '0' : '') + n;
        };
        return typeof Date.prototype.toISOString === 'function' ? function _toISOString(d) {
            return d.toISOString();
        } : function _toISOString(d) {
            return d.getUTCFullYear() + '-' + pad(d.getUTCMonth() + 1) + '-' + pad(d.getUTCDate()) + 'T' + pad(d.getUTCHours()) + ':' + pad(d.getUTCMinutes()) + ':' + pad(d.getUTCSeconds()) + '.' + (d.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) + 'Z';
        };
    }();

    var _xfBase = {
        init: function () {
            return this.xf['@@transducer/init']();
        },
        result: function (result) {
            return this.xf['@@transducer/result'](result);
        }
    };

    var _xwrap = function () {
        function XWrap(fn) {
            this.f = fn;
        }
        XWrap.prototype['@@transducer/init'] = function () {
            throw new Error('init not implemented on XWrap');
        };
        XWrap.prototype['@@transducer/result'] = function (acc) {
            return acc;
        };
        XWrap.prototype['@@transducer/step'] = function (acc, x) {
            return this.f(acc, x);
        };
        return function _xwrap(fn) {
            return new XWrap(fn);
        };
    }();

    var _aperture = function _aperture(n, list) {
        var idx = 0;
        var limit = list.length - (n - 1);
        var acc = new Array(limit >= 0 ? limit : 0);
        while (idx < limit) {
            acc[idx] = _slice(list, idx, idx + n);
            idx += 1;
        }
        return acc;
    };

    var _assign = typeof Object.assign === 'function' ? Object.assign : _objectAssign;

    /**
     * Similar to hasMethod, this checks whether a function has a [methodname]
     * function. If it isn't an array it will execute that function otherwise it
     * will default to the ramda implementation.
     *
     * @private
     * @param {Function} fn ramda implemtation
     * @param {String} methodname property to check for a custom implementation
     * @return {Object} Whatever the return value of the method is.
     */
    var _checkForMethod = function _checkForMethod(methodname, fn) {
        return function () {
            var length = arguments.length;
            if (length === 0) {
                return fn();
            }
            var obj = arguments[length - 1];
            return _isArray(obj) || typeof obj[methodname] !== 'function' ? fn.apply(this, arguments) : obj[methodname].apply(obj, _slice(arguments, 0, length - 1));
        };
    };

    /**
     * Optimized internal one-arity curry function.
     *
     * @private
     * @category Function
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curry1 = function _curry1(fn) {
        return function f1(a) {
            if (arguments.length === 0 || _isPlaceholder(a)) {
                return f1;
            } else {
                return fn.apply(this, arguments);
            }
        };
    };

    /**
     * Optimized internal two-arity curry function.
     *
     * @private
     * @category Function
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curry2 = function _curry2(fn) {
        return function f2(a, b) {
            switch (arguments.length) {
            case 0:
                return f2;
            case 1:
                return _isPlaceholder(a) ? f2 : _curry1(function (_b) {
                    return fn(a, _b);
                });
            default:
                return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {
                    return fn(_a, b);
                }) : _isPlaceholder(b) ? _curry1(function (_b) {
                    return fn(a, _b);
                }) : fn(a, b);
            }
        };
    };

    /**
     * Optimized internal three-arity curry function.
     *
     * @private
     * @category Function
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curry3 = function _curry3(fn) {
        return function f3(a, b, c) {
            switch (arguments.length) {
            case 0:
                return f3;
            case 1:
                return _isPlaceholder(a) ? f3 : _curry2(function (_b, _c) {
                    return fn(a, _b, _c);
                });
            case 2:
                return _isPlaceholder(a) && _isPlaceholder(b) ? f3 : _isPlaceholder(a) ? _curry2(function (_a, _c) {
                    return fn(_a, b, _c);
                }) : _isPlaceholder(b) ? _curry2(function (_b, _c) {
                    return fn(a, _b, _c);
                }) : _curry1(function (_c) {
                    return fn(a, b, _c);
                });
            default:
                return _isPlaceholder(a) && _isPlaceholder(b) && _isPlaceholder(c) ? f3 : _isPlaceholder(a) && _isPlaceholder(b) ? _curry2(function (_a, _b) {
                    return fn(_a, _b, c);
                }) : _isPlaceholder(a) && _isPlaceholder(c) ? _curry2(function (_a, _c) {
                    return fn(_a, b, _c);
                }) : _isPlaceholder(b) && _isPlaceholder(c) ? _curry2(function (_b, _c) {
                    return fn(a, _b, _c);
                }) : _isPlaceholder(a) ? _curry1(function (_a) {
                    return fn(_a, b, c);
                }) : _isPlaceholder(b) ? _curry1(function (_b) {
                    return fn(a, _b, c);
                }) : _isPlaceholder(c) ? _curry1(function (_c) {
                    return fn(a, b, _c);
                }) : fn(a, b, c);
            }
        };
    };

    /**
     * Internal curryN function.
     *
     * @private
     * @category Function
     * @param {Number} length The arity of the curried function.
     * @param {Array} received An array of arguments received thus far.
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curryN = function _curryN(length, received, fn) {
        return function () {
            var combined = [];
            var argsIdx = 0;
            var left = length;
            var combinedIdx = 0;
            while (combinedIdx < received.length || argsIdx < arguments.length) {
                var result;
                if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {
                    result = received[combinedIdx];
                } else {
                    result = arguments[argsIdx];
                    argsIdx += 1;
                }
                combined[combinedIdx] = result;
                if (!_isPlaceholder(result)) {
                    left -= 1;
                }
                combinedIdx += 1;
            }
            return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));
        };
    };

    /**
     * Returns a function that dispatches with different strategies based on the
     * object in list position (last argument). If it is an array, executes [fn].
     * Otherwise, if it has a function with [methodname], it will execute that
     * function (functor case). Otherwise, if it is a transformer, uses transducer
     * [xf] to return a new transformer (transducer case). Otherwise, it will
     * default to executing [fn].
     *
     * @private
     * @param {String} methodname property to check for a custom implementation
     * @param {Function} xf transducer to initialize if object is transformer
     * @param {Function} fn default ramda implementation
     * @return {Function} A function that dispatches on object in list position
     */
    var _dispatchable = function _dispatchable(methodname, xf, fn) {
        return function () {
            var length = arguments.length;
            if (length === 0) {
                return fn();
            }
            var obj = arguments[length - 1];
            if (!_isArray(obj)) {
                var args = _slice(arguments, 0, length - 1);
                if (typeof obj[methodname] === 'function') {
                    return obj[methodname].apply(obj, args);
                }
                if (_isTransformer(obj)) {
                    var transducer = xf.apply(null, args);
                    return transducer(obj);
                }
            }
            return fn.apply(this, arguments);
        };
    };

    var _dropLastWhile = function dropLastWhile(pred, list) {
        var idx = list.length - 1;
        while (idx >= 0 && pred(list[idx])) {
            idx -= 1;
        }
        return _slice(list, 0, idx + 1);
    };

    var _xall = function () {
        function XAll(f, xf) {
            this.xf = xf;
            this.f = f;
            this.all = true;
        }
        XAll.prototype['@@transducer/init'] = _xfBase.init;
        XAll.prototype['@@transducer/result'] = function (result) {
            if (this.all) {
                result = this.xf['@@transducer/step'](result, true);
            }
            return this.xf['@@transducer/result'](result);
        };
        XAll.prototype['@@transducer/step'] = function (result, input) {
            if (!this.f(input)) {
                this.all = false;
                result = _reduced(this.xf['@@transducer/step'](result, false));
            }
            return result;
        };
        return _curry2(function _xall(f, xf) {
            return new XAll(f, xf);
        });
    }();

    var _xany = function () {
        function XAny(f, xf) {
            this.xf = xf;
            this.f = f;
            this.any = false;
        }
        XAny.prototype['@@transducer/init'] = _xfBase.init;
        XAny.prototype['@@transducer/result'] = function (result) {
            if (!this.any) {
                result = this.xf['@@transducer/step'](result, false);
            }
            return this.xf['@@transducer/result'](result);
        };
        XAny.prototype['@@transducer/step'] = function (result, input) {
            if (this.f(input)) {
                this.any = true;
                result = _reduced(this.xf['@@transducer/step'](result, true));
            }
            return result;
        };
        return _curry2(function _xany(f, xf) {
            return new XAny(f, xf);
        });
    }();

    var _xaperture = function () {
        function XAperture(n, xf) {
            this.xf = xf;
            this.pos = 0;
            this.full = false;
            this.acc = new Array(n);
        }
        XAperture.prototype['@@transducer/init'] = _xfBase.init;
        XAperture.prototype['@@transducer/result'] = function (result) {
            this.acc = null;
            return this.xf['@@transducer/result'](result);
        };
        XAperture.prototype['@@transducer/step'] = function (result, input) {
            this.store(input);
            return this.full ? this.xf['@@transducer/step'](result, this.getCopy()) : result;
        };
        XAperture.prototype.store = function (input) {
            this.acc[this.pos] = input;
            this.pos += 1;
            if (this.pos === this.acc.length) {
                this.pos = 0;
                this.full = true;
            }
        };
        XAperture.prototype.getCopy = function () {
            return _concat(_slice(this.acc, this.pos), _slice(this.acc, 0, this.pos));
        };
        return _curry2(function _xaperture(n, xf) {
            return new XAperture(n, xf);
        });
    }();

    var _xdrop = function () {
        function XDrop(n, xf) {
            this.xf = xf;
            this.n = n;
        }
        XDrop.prototype['@@transducer/init'] = _xfBase.init;
        XDrop.prototype['@@transducer/result'] = _xfBase.result;
        XDrop.prototype['@@transducer/step'] = function (result, input) {
            if (this.n > 0) {
                this.n -= 1;
                return result;
            }
            return this.xf['@@transducer/step'](result, input);
        };
        return _curry2(function _xdrop(n, xf) {
            return new XDrop(n, xf);
        });
    }();

    var _xdropLast = function () {
        function XDropLast(n, xf) {
            this.xf = xf;
            this.pos = 0;
            this.full = false;
            this.acc = new Array(n);
        }
        XDropLast.prototype['@@transducer/init'] = _xfBase.init;
        XDropLast.prototype['@@transducer/result'] = function (result) {
            this.acc = null;
            return this.xf['@@transducer/result'](result);
        };
        XDropLast.prototype['@@transducer/step'] = function (result, input) {
            if (this.full) {
                result = this.xf['@@transducer/step'](result, this.acc[this.pos]);
            }
            this.store(input);
            return result;
        };
        XDropLast.prototype.store = function (input) {
            this.acc[this.pos] = input;
            this.pos += 1;
            if (this.pos === this.acc.length) {
                this.pos = 0;
                this.full = true;
            }
        };
        return _curry2(function _xdropLast(n, xf) {
            return new XDropLast(n, xf);
        });
    }();

    var _xdropRepeatsWith = function () {
        function XDropRepeatsWith(pred, xf) {
            this.xf = xf;
            this.pred = pred;
            this.lastValue = undefined;
            this.seenFirstValue = false;
        }
        XDropRepeatsWith.prototype['@@transducer/init'] = function () {
            return this.xf['@@transducer/init']();
        };
        XDropRepeatsWith.prototype['@@transducer/result'] = function (result) {
            return this.xf['@@transducer/result'](result);
        };
        XDropRepeatsWith.prototype['@@transducer/step'] = function (result, input) {
            var sameAsLast = false;
            if (!this.seenFirstValue) {
                this.seenFirstValue = true;
            } else if (this.pred(this.lastValue, input)) {
                sameAsLast = true;
            }
            this.lastValue = input;
            return sameAsLast ? result : this.xf['@@transducer/step'](result, input);
        };
        return _curry2(function _xdropRepeatsWith(pred, xf) {
            return new XDropRepeatsWith(pred, xf);
        });
    }();

    var _xdropWhile = function () {
        function XDropWhile(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XDropWhile.prototype['@@transducer/init'] = _xfBase.init;
        XDropWhile.prototype['@@transducer/result'] = _xfBase.result;
        XDropWhile.prototype['@@transducer/step'] = function (result, input) {
            if (this.f) {
                if (this.f(input)) {
                    return result;
                }
                this.f = null;
            }
            return this.xf['@@transducer/step'](result, input);
        };
        return _curry2(function _xdropWhile(f, xf) {
            return new XDropWhile(f, xf);
        });
    }();

    var _xfilter = function () {
        function XFilter(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XFilter.prototype['@@transducer/init'] = _xfBase.init;
        XFilter.prototype['@@transducer/result'] = _xfBase.result;
        XFilter.prototype['@@transducer/step'] = function (result, input) {
            return this.f(input) ? this.xf['@@transducer/step'](result, input) : result;
        };
        return _curry2(function _xfilter(f, xf) {
            return new XFilter(f, xf);
        });
    }();

    var _xfind = function () {
        function XFind(f, xf) {
            this.xf = xf;
            this.f = f;
            this.found = false;
        }
        XFind.prototype['@@transducer/init'] = _xfBase.init;
        XFind.prototype['@@transducer/result'] = function (result) {
            if (!this.found) {
                result = this.xf['@@transducer/step'](result, void 0);
            }
            return this.xf['@@transducer/result'](result);
        };
        XFind.prototype['@@transducer/step'] = function (result, input) {
            if (this.f(input)) {
                this.found = true;
                result = _reduced(this.xf['@@transducer/step'](result, input));
            }
            return result;
        };
        return _curry2(function _xfind(f, xf) {
            return new XFind(f, xf);
        });
    }();

    var _xfindIndex = function () {
        function XFindIndex(f, xf) {
            this.xf = xf;
            this.f = f;
            this.idx = -1;
            this.found = false;
        }
        XFindIndex.prototype['@@transducer/init'] = _xfBase.init;
        XFindIndex.prototype['@@transducer/result'] = function (result) {
            if (!this.found) {
                result = this.xf['@@transducer/step'](result, -1);
            }
            return this.xf['@@transducer/result'](result);
        };
        XFindIndex.prototype['@@transducer/step'] = function (result, input) {
            this.idx += 1;
            if (this.f(input)) {
                this.found = true;
                result = _reduced(this.xf['@@transducer/step'](result, this.idx));
            }
            return result;
        };
        return _curry2(function _xfindIndex(f, xf) {
            return new XFindIndex(f, xf);
        });
    }();

    var _xfindLast = function () {
        function XFindLast(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XFindLast.prototype['@@transducer/init'] = _xfBase.init;
        XFindLast.prototype['@@transducer/result'] = function (result) {
            return this.xf['@@transducer/result'](this.xf['@@transducer/step'](result, this.last));
        };
        XFindLast.prototype['@@transducer/step'] = function (result, input) {
            if (this.f(input)) {
                this.last = input;
            }
            return result;
        };
        return _curry2(function _xfindLast(f, xf) {
            return new XFindLast(f, xf);
        });
    }();

    var _xfindLastIndex = function () {
        function XFindLastIndex(f, xf) {
            this.xf = xf;
            this.f = f;
            this.idx = -1;
            this.lastIdx = -1;
        }
        XFindLastIndex.prototype['@@transducer/init'] = _xfBase.init;
        XFindLastIndex.prototype['@@transducer/result'] = function (result) {
            return this.xf['@@transducer/result'](this.xf['@@transducer/step'](result, this.lastIdx));
        };
        XFindLastIndex.prototype['@@transducer/step'] = function (result, input) {
            this.idx += 1;
            if (this.f(input)) {
                this.lastIdx = this.idx;
            }
            return result;
        };
        return _curry2(function _xfindLastIndex(f, xf) {
            return new XFindLastIndex(f, xf);
        });
    }();

    var _xmap = function () {
        function XMap(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XMap.prototype['@@transducer/init'] = _xfBase.init;
        XMap.prototype['@@transducer/result'] = _xfBase.result;
        XMap.prototype['@@transducer/step'] = function (result, input) {
            return this.xf['@@transducer/step'](result, this.f(input));
        };
        return _curry2(function _xmap(f, xf) {
            return new XMap(f, xf);
        });
    }();

    var _xtake = function () {
        function XTake(n, xf) {
            this.xf = xf;
            this.n = n;
        }
        XTake.prototype['@@transducer/init'] = _xfBase.init;
        XTake.prototype['@@transducer/result'] = _xfBase.result;
        XTake.prototype['@@transducer/step'] = function (result, input) {
            if (this.n === 0) {
                return _reduced(result);
            } else {
                this.n -= 1;
                return this.xf['@@transducer/step'](result, input);
            }
        };
        return _curry2(function _xtake(n, xf) {
            return new XTake(n, xf);
        });
    }();

    var _xtakeWhile = function () {
        function XTakeWhile(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XTakeWhile.prototype['@@transducer/init'] = _xfBase.init;
        XTakeWhile.prototype['@@transducer/result'] = _xfBase.result;
        XTakeWhile.prototype['@@transducer/step'] = function (result, input) {
            return this.f(input) ? this.xf['@@transducer/step'](result, input) : _reduced(result);
        };
        return _curry2(function _xtakeWhile(f, xf) {
            return new XTakeWhile(f, xf);
        });
    }();

    /**
     * Adds two values.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a
     * @param {Number} b
     * @return {Number}
     * @see R.subtract
     * @example
     *
     *      R.add(2, 3);       //=>  5
     *      R.add(7)(10);      //=> 17
     */
    var add = _curry2(function add(a, b) {
        return Number(a) + Number(b);
    });

    /**
     * Applies a function to the value at the given index of an array, returning a
     * new copy of the array with the element at the given index replaced with the
     * result of the function application.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig (a -> a) -> Number -> [a] -> [a]
     * @param {Function} fn The function to apply.
     * @param {Number} idx The index.
     * @param {Array|Arguments} list An array-like object whose value
     *        at the supplied index will be replaced.
     * @return {Array} A copy of the supplied array-like object with
     *         the element at index `idx` replaced with the value
     *         returned by applying `fn` to the existing element.
     * @see R.update
     * @example
     *
     *      R.adjust(R.add(10), 1, [0, 1, 2]);     //=> [0, 11, 2]
     *      R.adjust(R.add(10))(1)([0, 1, 2]);     //=> [0, 11, 2]
     */
    var adjust = _curry3(function adjust(fn, idx, list) {
        if (idx >= list.length || idx < -list.length) {
            return list;
        }
        var start = idx < 0 ? list.length : 0;
        var _idx = start + idx;
        var _list = _concat(list);
        _list[_idx] = fn(list[_idx]);
        return _list;
    });

    /**
     * Returns `true` if all elements of the list match the predicate, `false` if
     * there are any that don't.
     *
     * Dispatches to the `all` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> Boolean
     * @param {Function} fn The predicate function.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the predicate is satisfied by every element, `false`
     *         otherwise.
     * @see R.any, R.none, R.transduce
     * @example
     *
     *      var lessThan2 = R.flip(R.lt)(2);
     *      var lessThan3 = R.flip(R.lt)(3);
     *      R.all(lessThan2)([1, 2]); //=> false
     *      R.all(lessThan3)([1, 2]); //=> true
     */
    var all = _curry2(_dispatchable('all', _xall, function all(fn, list) {
        var idx = 0;
        while (idx < list.length) {
            if (!fn(list[idx])) {
                return false;
            }
            idx += 1;
        }
        return true;
    }));

    /**
     * Returns a function that always returns the given value. Note that for
     * non-primitives the value returned is a reference to the original value.
     *
     * This function is known as `const`, `constant`, or `K` (for K combinator) in
     * other languages and libraries.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig a -> (* -> a)
     * @param {*} val The value to wrap in a function
     * @return {Function} A Function :: * -> val.
     * @example
     *
     *      var t = R.always('Tee');
     *      t(); //=> 'Tee'
     */
    var always = _curry1(function always(val) {
        return function () {
            return val;
        };
    });

    /**
     * Returns `true` if both arguments are `true`; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig * -> * -> *
     * @param {Boolean} a A boolean value
     * @param {Boolean} b A boolean value
     * @return {Boolean} `true` if both arguments are `true`, `false` otherwise
     * @see R.both
     * @example
     *
     *      R.and(true, true); //=> true
     *      R.and(true, false); //=> false
     *      R.and(false, true); //=> false
     *      R.and(false, false); //=> false
     */
    var and = _curry2(function and(a, b) {
        return a && b;
    });

    /**
     * Returns `true` if at least one of elements of the list match the predicate,
     * `false` otherwise.
     *
     * Dispatches to the `any` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> Boolean
     * @param {Function} fn The predicate function.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the predicate is satisfied by at least one element, `false`
     *         otherwise.
     * @see R.all, R.none, R.transduce
     * @example
     *
     *      var lessThan0 = R.flip(R.lt)(0);
     *      var lessThan2 = R.flip(R.lt)(2);
     *      R.any(lessThan0)([1, 2]); //=> false
     *      R.any(lessThan2)([1, 2]); //=> true
     */
    var any = _curry2(_dispatchable('any', _xany, function any(fn, list) {
        var idx = 0;
        while (idx < list.length) {
            if (fn(list[idx])) {
                return true;
            }
            idx += 1;
        }
        return false;
    }));

    /**
     * Returns a new list, composed of n-tuples of consecutive elements If `n` is
     * greater than the length of the list, an empty list is returned.
     *
     * Dispatches to the `aperture` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig Number -> [a] -> [[a]]
     * @param {Number} n The size of the tuples to create
     * @param {Array} list The list to split into `n`-tuples
     * @return {Array} The new list.
     * @see R.transduce
     * @example
     *
     *      R.aperture(2, [1, 2, 3, 4, 5]); //=> [[1, 2], [2, 3], [3, 4], [4, 5]]
     *      R.aperture(3, [1, 2, 3, 4, 5]); //=> [[1, 2, 3], [2, 3, 4], [3, 4, 5]]
     *      R.aperture(7, [1, 2, 3, 4, 5]); //=> []
     */
    var aperture = _curry2(_dispatchable('aperture', _xaperture, _aperture));

    /**
     * Returns a new list containing the contents of the given list, followed by
     * the given element.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> [a]
     * @param {*} el The element to add to the end of the new list.
     * @param {Array} list The list whose contents will be added to the beginning of the output
     *        list.
     * @return {Array} A new list containing the contents of the old list followed by `el`.
     * @see R.prepend
     * @example
     *
     *      R.append('tests', ['write', 'more']); //=> ['write', 'more', 'tests']
     *      R.append('tests', []); //=> ['tests']
     *      R.append(['tests'], ['write', 'more']); //=> ['write', 'more', ['tests']]
     */
    var append = _curry2(function append(el, list) {
        return _concat(list, [el]);
    });

    /**
     * Applies function `fn` to the argument list `args`. This is useful for
     * creating a fixed-arity function from a variadic function. `fn` should be a
     * bound function if context is significant.
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Function
     * @sig (*... -> a) -> [*] -> a
     * @param {Function} fn
     * @param {Array} args
     * @return {*}
     * @see R.call, R.unapply
     * @example
     *
     *      var nums = [1, 2, 3, -99, 42, 6, 7];
     *      R.apply(Math.max, nums); //=> 42
     */
    var apply = _curry2(function apply(fn, args) {
        return fn.apply(this, args);
    });

    /**
     * Makes a shallow clone of an object, setting or overriding the specified
     * property with the given value. Note that this copies and flattens prototype
     * properties onto the new object as well. All non-primitive properties are
     * copied by reference.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @sig String -> a -> {k: v} -> {k: v}
     * @param {String} prop the property name to set
     * @param {*} val the new value
     * @param {Object} obj the object to clone
     * @return {Object} a new object similar to the original except for the specified property.
     * @see R.dissoc
     * @example
     *
     *      R.assoc('c', 3, {a: 1, b: 2}); //=> {a: 1, b: 2, c: 3}
     */
    var assoc = _curry3(function assoc(prop, val, obj) {
        var result = {};
        for (var p in obj) {
            result[p] = obj[p];
        }
        result[prop] = val;
        return result;
    });

    /**
     * Makes a shallow clone of an object, setting or overriding the nodes required
     * to create the given path, and placing the specific value at the tail end of
     * that path. Note that this copies and flattens prototype properties onto the
     * new object as well. All non-primitive properties are copied by reference.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @sig [String] -> a -> {k: v} -> {k: v}
     * @param {Array} path the path to set
     * @param {*} val the new value
     * @param {Object} obj the object to clone
     * @return {Object} a new object similar to the original except along the specified path.
     * @see R.dissocPath
     * @example
     *
     *      R.assocPath(['a', 'b', 'c'], 42, {a: {b: {c: 0}}}); //=> {a: {b: {c: 42}}}
     */
    var assocPath = _curry3(function assocPath(path, val, obj) {
        switch (path.length) {
        case 0:
            return val;
        case 1:
            return assoc(path[0], val, obj);
        default:
            return assoc(path[0], assocPath(_slice(path, 1), val, Object(obj[path[0]])), obj);
        }
    });

    /**
     * Creates a function that is bound to a context.
     * Note: `R.bind` does not provide the additional argument-binding capabilities of
     * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category Function
     * @category Object
     * @sig (* -> *) -> {*} -> (* -> *)
     * @param {Function} fn The function to bind to context
     * @param {Object} thisObj The context to bind `fn` to
     * @return {Function} A function that will execute in the context of `thisObj`.
     * @see R.partial
     */
    var bind = _curry2(function bind(fn, thisObj) {
        return _arity(fn.length, function () {
            return fn.apply(thisObj, arguments);
        });
    });

    /**
     * Restricts a number to be within a range.
     *
     * Also works for other ordered types such as Strings and Dates.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Relation
     * @sig Ord a => a -> a -> a -> a
     * @param {Number} minimum number
     * @param {Number} maximum number
     * @param {Number} value to be clamped
     * @return {Number} Returns the clamped value
     * @example
     *
     *      R.clamp(1, 10, -1) // => 1
     *      R.clamp(1, 10, 11) // => 10
     *      R.clamp(1, 10, 4)  // => 4
     */
    var clamp = _curry3(function clamp(min, max, value) {
        if (min > max) {
            throw new Error('min must not be greater than max in clamp(min, max, value)');
        }
        return value < min ? min : value > max ? max : value;
    });

    /**
     * Makes a comparator function out of a function that reports whether the first
     * element is less than the second.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a, b -> Boolean) -> (a, b -> Number)
     * @param {Function} pred A predicate function of arity two.
     * @return {Function} A Function :: a -> b -> Int that returns `-1` if a < b, `1` if b < a, otherwise `0`.
     * @example
     *
     *      var cmp = R.comparator((a, b) => a.age < b.age);
     *      var people = [
     *        // ...
     *      ];
     *      R.sort(cmp, people);
     */
    var comparator = _curry1(function comparator(pred) {
        return function (a, b) {
            return pred(a, b) ? -1 : pred(b, a) ? 1 : 0;
        };
    });

    /**
     * Returns a curried equivalent of the provided function, with the specified
     * arity. The curried function has two unusual capabilities. First, its
     * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the
     * following are equivalent:
     *
     *   - `g(1)(2)(3)`
     *   - `g(1)(2, 3)`
     *   - `g(1, 2)(3)`
     *   - `g(1, 2, 3)`
     *
     * Secondly, the special placeholder value `R.__` may be used to specify
     * "gaps", allowing partial application of any combination of arguments,
     * regardless of their positions. If `g` is as above and `_` is `R.__`, the
     * following are equivalent:
     *
     *   - `g(1, 2, 3)`
     *   - `g(_, 2, 3)(1)`
     *   - `g(_, _, 3)(1)(2)`
     *   - `g(_, _, 3)(1, 2)`
     *   - `g(_, 2)(1)(3)`
     *   - `g(_, 2)(1, 3)`
     *   - `g(_, 2)(_, 3)(1)`
     *
     * @func
     * @memberOf R
     * @since v0.5.0
     * @category Function
     * @sig Number -> (* -> a) -> (* -> a)
     * @param {Number} length The arity for the returned function.
     * @param {Function} fn The function to curry.
     * @return {Function} A new, curried function.
     * @see R.curry
     * @example
     *
     *      var sumArgs = (...args) => R.sum(args);
     *
     *      var curriedAddFourNumbers = R.curryN(4, sumArgs);
     *      var f = curriedAddFourNumbers(1, 2);
     *      var g = f(3);
     *      g(4); //=> 10
     */
    var curryN = _curry2(function curryN(length, fn) {
        if (length === 1) {
            return _curry1(fn);
        }
        return _arity(length, _curryN(length, [], fn));
    });

    /**
     * Decrements its argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Math
     * @sig Number -> Number
     * @param {Number} n
     * @return {Number}
     * @see R.inc
     * @example
     *
     *      R.dec(42); //=> 41
     */
    var dec = add(-1);

    /**
     * Returns the second argument if it is not `null`, `undefined` or `NaN`
     * otherwise the first argument is returned.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Logic
     * @sig a -> b -> a | b
     * @param {a} val The default value.
     * @param {b} val The value to return if it is not null or undefined
     * @return {*} The the second value or the default value
     * @example
     *
     *      var defaultTo42 = R.defaultTo(42);
     *
     *      defaultTo42(null);  //=> 42
     *      defaultTo42(undefined);  //=> 42
     *      defaultTo42('Ramda');  //=> 'Ramda'
     *      defaultTo42(parseInt('string')); //=> 42
     */
    var defaultTo = _curry2(function defaultTo(d, v) {
        return v == null || v !== v ? d : v;
    });

    /**
     * Finds the set (i.e. no duplicates) of all elements in the first list not
     * contained in the second list. Duplication is determined according to the
     * value returned by applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` that are not in `list2`.
     * @see R.difference
     * @example
     *
     *      var cmp = (x, y) => x.a === y.a;
     *      var l1 = [{a: 1}, {a: 2}, {a: 3}];
     *      var l2 = [{a: 3}, {a: 4}];
     *      R.differenceWith(cmp, l1, l2); //=> [{a: 1}, {a: 2}]
     */
    var differenceWith = _curry3(function differenceWith(pred, first, second) {
        var out = [];
        var idx = 0;
        var firstLen = first.length;
        while (idx < firstLen) {
            if (!_containsWith(pred, first[idx], second) && !_containsWith(pred, first[idx], out)) {
                out.push(first[idx]);
            }
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a new object that does not contain a `prop` property.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Object
     * @sig String -> {k: v} -> {k: v}
     * @param {String} prop the name of the property to dissociate
     * @param {Object} obj the object to clone
     * @return {Object} a new object similar to the original but without the specified property
     * @see R.assoc
     * @example
     *
     *      R.dissoc('b', {a: 1, b: 2, c: 3}); //=> {a: 1, c: 3}
     */
    var dissoc = _curry2(function dissoc(prop, obj) {
        var result = {};
        for (var p in obj) {
            if (p !== prop) {
                result[p] = obj[p];
            }
        }
        return result;
    });

    /**
     * Makes a shallow clone of an object, omitting the property at the given path.
     * Note that this copies and flattens prototype properties onto the new object
     * as well. All non-primitive properties are copied by reference.
     *
     * @func
     * @memberOf R
     * @since v0.11.0
     * @category Object
     * @sig [String] -> {k: v} -> {k: v}
     * @param {Array} path the path to set
     * @param {Object} obj the object to clone
     * @return {Object} a new object without the property at path
     * @see R.assocPath
     * @example
     *
     *      R.dissocPath(['a', 'b', 'c'], {a: {b: {c: 42}}}); //=> {a: {b: {}}}
     */
    var dissocPath = _curry2(function dissocPath(path, obj) {
        switch (path.length) {
        case 0:
            return obj;
        case 1:
            return dissoc(path[0], obj);
        default:
            var head = path[0];
            var tail = _slice(path, 1);
            return obj[head] == null ? obj : assoc(head, dissocPath(tail, obj[head]), obj);
        }
    });

    /**
     * Divides two numbers. Equivalent to `a / b`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The first value.
     * @param {Number} b The second value.
     * @return {Number} The result of `a / b`.
     * @see R.multiply
     * @example
     *
     *      R.divide(71, 100); //=> 0.71
     *
     *      var half = R.divide(R.__, 2);
     *      half(42); //=> 21
     *
     *      var reciprocal = R.divide(1);
     *      reciprocal(4);   //=> 0.25
     */
    var divide = _curry2(function divide(a, b) {
        return a / b;
    });

    /**
     * Returns a new list containing the last `n` elements of a given list, passing
     * each value to the supplied predicate function, skipping elements while the
     * predicate function returns `true`. The predicate function is passed one
     * argument: *(value)*.
     *
     * Dispatches to the `dropWhile` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.takeWhile, R.transduce, R.addIndex
     * @example
     *
     *      var lteTwo = x => x <= 2;
     *
     *      R.dropWhile(lteTwo, [1, 2, 3, 4, 3, 2, 1]); //=> [3, 4, 3, 2, 1]
     */
    var dropWhile = _curry2(_dispatchable('dropWhile', _xdropWhile, function dropWhile(pred, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len && pred(list[idx])) {
            idx += 1;
        }
        return _slice(list, idx);
    }));

    /**
     * Returns the empty value of its argument's type. Ramda defines the empty
     * value of Array (`[]`), Object (`{}`), String (`''`), and Arguments. Other
     * types are supported if they define `<Type>.empty` and/or
     * `<Type>.prototype.empty`.
     *
     * Dispatches to the `empty` method of the first argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Function
     * @sig a -> a
     * @param {*} x
     * @return {*}
     * @example
     *
     *      R.empty(Just(42));      //=> Nothing()
     *      R.empty([1, 2, 3]);     //=> []
     *      R.empty('unicorns');    //=> ''
     *      R.empty({x: 1, y: 2});  //=> {}
     */
    // else
    var empty = _curry1(function empty(x) {
        return x != null && typeof x.empty === 'function' ? x.empty() : x != null && x.constructor != null && typeof x.constructor.empty === 'function' ? x.constructor.empty() : _isArray(x) ? [] : _isString(x) ? '' : _isObject(x) ? {} : _isArguments(x) ? function () {
            return arguments;
        }() : // else
        void 0;
    });

    /**
     * Creates a new object by recursively evolving a shallow copy of `object`,
     * according to the `transformation` functions. All non-primitive properties
     * are copied by reference.
     *
     * A `transformation` function will not be invoked if its corresponding key
     * does not exist in the evolved object.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig {k: (v -> v)} -> {k: v} -> {k: v}
     * @param {Object} transformations The object specifying transformation functions to apply
     *        to the object.
     * @param {Object} object The object to be transformed.
     * @return {Object} The transformed object.
     * @example
     *
     *      var tomato  = {firstName: '  Tomato ', data: {elapsed: 100, remaining: 1400}, id:123};
     *      var transformations = {
     *        firstName: R.trim,
     *        lastName: R.trim, // Will not get invoked.
     *        data: {elapsed: R.add(1), remaining: R.add(-1)}
     *      };
     *      R.evolve(transformations, tomato); //=> {firstName: 'Tomato', data: {elapsed: 101, remaining: 1399}, id:123}
     */
    var evolve = _curry2(function evolve(transformations, object) {
        var result = {};
        var transformation, key, type;
        for (key in object) {
            transformation = transformations[key];
            type = typeof transformation;
            result[key] = type === 'function' ? transformation(object[key]) : type === 'object' ? evolve(transformations[key], object[key]) : object[key];
        }
        return result;
    });

    /**
     * Returns the first element of the list which matches the predicate, or
     * `undefined` if no element matches.
     *
     * Dispatches to the `find` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> a | undefined
     * @param {Function} fn The predicate function used to determine if the element is the
     *        desired one.
     * @param {Array} list The array to consider.
     * @return {Object} The element found, or `undefined`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1}, {a: 2}, {a: 3}];
     *      R.find(R.propEq('a', 2))(xs); //=> {a: 2}
     *      R.find(R.propEq('a', 4))(xs); //=> undefined
     */
    var find = _curry2(_dispatchable('find', _xfind, function find(fn, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            if (fn(list[idx])) {
                return list[idx];
            }
            idx += 1;
        }
    }));

    /**
     * Returns the index of the first element of the list which matches the
     * predicate, or `-1` if no element matches.
     *
     * Dispatches to the `findIndex` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> Boolean) -> [a] -> Number
     * @param {Function} fn The predicate function used to determine if the element is the
     * desired one.
     * @param {Array} list The array to consider.
     * @return {Number} The index of the element found, or `-1`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1}, {a: 2}, {a: 3}];
     *      R.findIndex(R.propEq('a', 2))(xs); //=> 1
     *      R.findIndex(R.propEq('a', 4))(xs); //=> -1
     */
    var findIndex = _curry2(_dispatchable('findIndex', _xfindIndex, function findIndex(fn, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            if (fn(list[idx])) {
                return idx;
            }
            idx += 1;
        }
        return -1;
    }));

    /**
     * Returns the last element of the list which matches the predicate, or
     * `undefined` if no element matches.
     *
     * Dispatches to the `findLast` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> Boolean) -> [a] -> a | undefined
     * @param {Function} fn The predicate function used to determine if the element is the
     * desired one.
     * @param {Array} list The array to consider.
     * @return {Object} The element found, or `undefined`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1, b: 0}, {a:1, b: 1}];
     *      R.findLast(R.propEq('a', 1))(xs); //=> {a: 1, b: 1}
     *      R.findLast(R.propEq('a', 4))(xs); //=> undefined
     */
    var findLast = _curry2(_dispatchable('findLast', _xfindLast, function findLast(fn, list) {
        var idx = list.length - 1;
        while (idx >= 0) {
            if (fn(list[idx])) {
                return list[idx];
            }
            idx -= 1;
        }
    }));

    /**
     * Returns the index of the last element of the list which matches the
     * predicate, or `-1` if no element matches.
     *
     * Dispatches to the `findLastIndex` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> Boolean) -> [a] -> Number
     * @param {Function} fn The predicate function used to determine if the element is the
     * desired one.
     * @param {Array} list The array to consider.
     * @return {Number} The index of the element found, or `-1`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1, b: 0}, {a:1, b: 1}];
     *      R.findLastIndex(R.propEq('a', 1))(xs); //=> 1
     *      R.findLastIndex(R.propEq('a', 4))(xs); //=> -1
     */
    var findLastIndex = _curry2(_dispatchable('findLastIndex', _xfindLastIndex, function findLastIndex(fn, list) {
        var idx = list.length - 1;
        while (idx >= 0) {
            if (fn(list[idx])) {
                return idx;
            }
            idx -= 1;
        }
        return -1;
    }));

    /**
     * Iterate over an input `list`, calling a provided function `fn` for each
     * element in the list.
     *
     * `fn` receives one argument: *(value)*.
     *
     * Note: `R.forEach` does not skip deleted or unassigned indices (sparse
     * arrays), unlike the native `Array.prototype.forEach` method. For more
     * details on this behavior, see:
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Description
     *
     * Also note that, unlike `Array.prototype.forEach`, Ramda's `forEach` returns
     * the original array. In some libraries this function is named `each`.
     *
     * Dispatches to the `forEach` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> *) -> [a] -> [a]
     * @param {Function} fn The function to invoke. Receives one argument, `value`.
     * @param {Array} list The list to iterate over.
     * @return {Array} The original list.
     * @see R.addIndex
     * @example
     *
     *      var printXPlusFive = x => console.log(x + 5);
     *      R.forEach(printXPlusFive, [1, 2, 3]); //=> [1, 2, 3]
     *      //-> 6
     *      //-> 7
     *      //-> 8
     */
    var forEach = _curry2(_checkForMethod('forEach', function forEach(fn, list) {
        var len = list.length;
        var idx = 0;
        while (idx < len) {
            fn(list[idx]);
            idx += 1;
        }
        return list;
    }));

    /**
     * Creates a new object out of a list key-value pairs.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig [[k,v]] -> {k: v}
     * @param {Array} pairs An array of two-element arrays that will be the keys and values of the output object.
     * @return {Object} The object made by pairing up `keys` and `values`.
     * @see R.toPairs, R.pair
     * @example
     *
     *      R.fromPairs([['a', 1], ['b', 2],  ['c', 3]]); //=> {a: 1, b: 2, c: 3}
     */
    var fromPairs = _curry1(function fromPairs(pairs) {
        var idx = 0;
        var len = pairs.length;
        var out = {};
        while (idx < len) {
            if (_isArray(pairs[idx]) && pairs[idx].length) {
                out[pairs[idx][0]] = pairs[idx][1];
            }
            idx += 1;
        }
        return out;
    });

    /**
     * Takes a list and returns a list of lists where each sublist's elements are
     * all "equal" according to the provided equality function.
     *
     * @func
     * @memberOf R
     * @since v0.21.0
     * @category List
     * @sig (a, a -> Boolean) -> [a] -> [[a]]
     * @param {Function} fn Function for determining whether two given (adjacent)
     *        elements should be in the same group
     * @param {Array} list The array to group. Also accepts a string, which will be
     *        treated as a list of characters.
     * @return {List} A list that contains sublists of equal elements,
     *         whose concatenations is equal to the original list.
     * @example
     *
     *    groupWith(R.equals, [0, 1, 1, 2, 3, 5, 8, 13, 21])
     *    // [[0], [1, 1], [2, 3, 5, 8, 13, 21]]
     *
     *    groupWith((a, b) => a % 2 === b % 2, [0, 1, 1, 2, 3, 5, 8, 13, 21])
     *    // [[0], [1, 1], [2], [3, 5], [8], [13, 21]]
     *
     *    R.groupWith(R.eqBy(isVowel), 'aestiou')
     *    // ['ae', 'st', 'iou']
     */
    var groupWith = _curry2(function (fn, list) {
        var res = [];
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            var nextidx = idx + 1;
            while (nextidx < len && fn(list[idx], list[nextidx])) {
                nextidx += 1;
            }
            res.push(list.slice(idx, nextidx));
            idx = nextidx;
        }
        return res;
    });

    /**
     * Returns `true` if the first argument is greater than the second; `false`
     * otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @see R.lt
     * @example
     *
     *      R.gt(2, 1); //=> true
     *      R.gt(2, 2); //=> false
     *      R.gt(2, 3); //=> false
     *      R.gt('a', 'z'); //=> false
     *      R.gt('z', 'a'); //=> true
     */
    var gt = _curry2(function gt(a, b) {
        return a > b;
    });

    /**
     * Returns `true` if the first argument is greater than or equal to the second;
     * `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {Number} a
     * @param {Number} b
     * @return {Boolean}
     * @see R.lte
     * @example
     *
     *      R.gte(2, 1); //=> true
     *      R.gte(2, 2); //=> true
     *      R.gte(2, 3); //=> false
     *      R.gte('a', 'z'); //=> false
     *      R.gte('z', 'a'); //=> true
     */
    var gte = _curry2(function gte(a, b) {
        return a >= b;
    });

    /**
     * Returns whether or not an object has an own property with the specified name
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Object
     * @sig s -> {s: x} -> Boolean
     * @param {String} prop The name of the property to check for.
     * @param {Object} obj The object to query.
     * @return {Boolean} Whether the property exists.
     * @example
     *
     *      var hasName = R.has('name');
     *      hasName({name: 'alice'});   //=> true
     *      hasName({name: 'bob'});     //=> true
     *      hasName({});                //=> false
     *
     *      var point = {x: 0, y: 0};
     *      var pointHas = R.has(R.__, point);
     *      pointHas('x');  //=> true
     *      pointHas('y');  //=> true
     *      pointHas('z');  //=> false
     */
    var has = _curry2(_has);

    /**
     * Returns whether or not an object or its prototype chain has a property with
     * the specified name
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Object
     * @sig s -> {s: x} -> Boolean
     * @param {String} prop The name of the property to check for.
     * @param {Object} obj The object to query.
     * @return {Boolean} Whether the property exists.
     * @example
     *
     *      function Rectangle(width, height) {
     *        this.width = width;
     *        this.height = height;
     *      }
     *      Rectangle.prototype.area = function() {
     *        return this.width * this.height;
     *      };
     *
     *      var square = new Rectangle(2, 2);
     *      R.hasIn('width', square);  //=> true
     *      R.hasIn('area', square);  //=> true
     */
    var hasIn = _curry2(function hasIn(prop, obj) {
        return prop in obj;
    });

    /**
     * Returns true if its arguments are identical, false otherwise. Values are
     * identical if they reference the same memory. `NaN` is identical to `NaN`;
     * `0` and `-0` are not identical.
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category Relation
     * @sig a -> a -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @example
     *
     *      var o = {};
     *      R.identical(o, o); //=> true
     *      R.identical(1, 1); //=> true
     *      R.identical(1, '1'); //=> false
     *      R.identical([], []); //=> false
     *      R.identical(0, -0); //=> false
     *      R.identical(NaN, NaN); //=> true
     */
    // SameValue algorithm
    // Steps 1-5, 7-10
    // Steps 6.b-6.e: +0 != -0
    // Step 6.a: NaN == NaN
    var identical = _curry2(function identical(a, b) {
        // SameValue algorithm
        if (a === b) {
            // Steps 1-5, 7-10
            // Steps 6.b-6.e: +0 != -0
            return a !== 0 || 1 / a === 1 / b;
        } else {
            // Step 6.a: NaN == NaN
            return a !== a && b !== b;
        }
    });

    /**
     * A function that does nothing but return the parameter supplied to it. Good
     * as a default or placeholder function.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig a -> a
     * @param {*} x The value to return.
     * @return {*} The input value, `x`.
     * @example
     *
     *      R.identity(1); //=> 1
     *
     *      var obj = {};
     *      R.identity(obj) === obj; //=> true
     */
    var identity = _curry1(_identity);

    /**
     * Creates a function that will process either the `onTrue` or the `onFalse`
     * function depending upon the result of the `condition` predicate.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Logic
     * @sig (*... -> Boolean) -> (*... -> *) -> (*... -> *) -> (*... -> *)
     * @param {Function} condition A predicate function
     * @param {Function} onTrue A function to invoke when the `condition` evaluates to a truthy value.
     * @param {Function} onFalse A function to invoke when the `condition` evaluates to a falsy value.
     * @return {Function} A new unary function that will process either the `onTrue` or the `onFalse`
     *                    function depending upon the result of the `condition` predicate.
     * @see R.unless, R.when
     * @example
     *
     *      var incCount = R.ifElse(
     *        R.has('count'),
     *        R.over(R.lensProp('count'), R.inc),
     *        R.assoc('count', 1)
     *      );
     *      incCount({});           //=> { count: 1 }
     *      incCount({ count: 1 }); //=> { count: 2 }
     */
    var ifElse = _curry3(function ifElse(condition, onTrue, onFalse) {
        return curryN(Math.max(condition.length, onTrue.length, onFalse.length), function _ifElse() {
            return condition.apply(this, arguments) ? onTrue.apply(this, arguments) : onFalse.apply(this, arguments);
        });
    });

    /**
     * Increments its argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Math
     * @sig Number -> Number
     * @param {Number} n
     * @return {Number}
     * @see R.dec
     * @example
     *
     *      R.inc(42); //=> 43
     */
    var inc = add(1);

    /**
     * Inserts the supplied element into the list, at index `index`. _Note that
     * this is not destructive_: it returns a copy of the list with the changes.
     * <small>No lists have been harmed in the application of this function.</small>
     *
     * @func
     * @memberOf R
     * @since v0.2.2
     * @category List
     * @sig Number -> a -> [a] -> [a]
     * @param {Number} index The position to insert the element
     * @param {*} elt The element to insert into the Array
     * @param {Array} list The list to insert into
     * @return {Array} A new Array with `elt` inserted at `index`.
     * @example
     *
     *      R.insert(2, 'x', [1,2,3,4]); //=> [1,2,'x',3,4]
     */
    var insert = _curry3(function insert(idx, elt, list) {
        idx = idx < list.length && idx >= 0 ? idx : list.length;
        var result = _slice(list);
        result.splice(idx, 0, elt);
        return result;
    });

    /**
     * Inserts the sub-list into the list, at index `index`. _Note that this is not
     * destructive_: it returns a copy of the list with the changes.
     * <small>No lists have been harmed in the application of this function.</small>
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category List
     * @sig Number -> [a] -> [a] -> [a]
     * @param {Number} index The position to insert the sub-list
     * @param {Array} elts The sub-list to insert into the Array
     * @param {Array} list The list to insert the sub-list into
     * @return {Array} A new Array with `elts` inserted starting at `index`.
     * @example
     *
     *      R.insertAll(2, ['x','y','z'], [1,2,3,4]); //=> [1,2,'x','y','z',3,4]
     */
    var insertAll = _curry3(function insertAll(idx, elts, list) {
        idx = idx < list.length && idx >= 0 ? idx : list.length;
        return _concat(_concat(_slice(list, 0, idx), elts), _slice(list, idx));
    });

    /**
     * Creates a new list with the separator interposed between elements.
     *
     * Dispatches to the `intersperse` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig a -> [a] -> [a]
     * @param {*} separator The element to add to the list.
     * @param {Array} list The list to be interposed.
     * @return {Array} The new list.
     * @example
     *
     *      R.intersperse('n', ['ba', 'a', 'a']); //=> ['ba', 'n', 'a', 'n', 'a']
     */
    var intersperse = _curry2(_checkForMethod('intersperse', function intersperse(separator, list) {
        var out = [];
        var idx = 0;
        var length = list.length;
        while (idx < length) {
            if (idx === length - 1) {
                out.push(list[idx]);
            } else {
                out.push(list[idx], separator);
            }
            idx += 1;
        }
        return out;
    }));

    /**
     * See if an object (`val`) is an instance of the supplied constructor. This
     * function will check up the inheritance chain, if any.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Type
     * @sig (* -> {*}) -> a -> Boolean
     * @param {Object} ctor A constructor
     * @param {*} val The value to test
     * @return {Boolean}
     * @example
     *
     *      R.is(Object, {}); //=> true
     *      R.is(Number, 1); //=> true
     *      R.is(Object, 1); //=> false
     *      R.is(String, 's'); //=> true
     *      R.is(String, new String('')); //=> true
     *      R.is(Object, new String('')); //=> true
     *      R.is(Object, 's'); //=> false
     *      R.is(Number, {}); //=> false
     */
    var is = _curry2(function is(Ctor, val) {
        return val != null && val.constructor === Ctor || val instanceof Ctor;
    });

    /**
     * Tests whether or not an object is similar to an array.
     *
     * @func
     * @memberOf R
     * @since v0.5.0
     * @category Type
     * @category List
     * @sig * -> Boolean
     * @param {*} x The object to test.
     * @return {Boolean} `true` if `x` has a numeric length property and extreme indices defined; `false` otherwise.
     * @example
     *
     *      R.isArrayLike([]); //=> true
     *      R.isArrayLike(true); //=> false
     *      R.isArrayLike({}); //=> false
     *      R.isArrayLike({length: 10}); //=> false
     *      R.isArrayLike({0: 'zero', 9: 'nine', length: 10}); //=> true
     */
    var isArrayLike = _curry1(function isArrayLike(x) {
        if (_isArray(x)) {
            return true;
        }
        if (!x) {
            return false;
        }
        if (typeof x !== 'object') {
            return false;
        }
        if (x instanceof String) {
            return false;
        }
        if (x.nodeType === 1) {
            return !!x.length;
        }
        if (x.length === 0) {
            return true;
        }
        if (x.length > 0) {
            return x.hasOwnProperty(0) && x.hasOwnProperty(x.length - 1);
        }
        return false;
    });

    /**
     * Checks if the input value is `null` or `undefined`.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Type
     * @sig * -> Boolean
     * @param {*} x The value to test.
     * @return {Boolean} `true` if `x` is `undefined` or `null`, otherwise `false`.
     * @example
     *
     *      R.isNil(null); //=> true
     *      R.isNil(undefined); //=> true
     *      R.isNil(0); //=> false
     *      R.isNil([]); //=> false
     */
    var isNil = _curry1(function isNil(x) {
        return x == null;
    });

    /**
     * Returns a list containing the names of all the enumerable own properties of
     * the supplied object.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {k: v} -> [k]
     * @param {Object} obj The object to extract properties from
     * @return {Array} An array of the object's own properties.
     * @example
     *
     *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']
     */
    // cover IE < 9 keys issues
    // Safari bug
    var keys = function () {
        // cover IE < 9 keys issues
        var hasEnumBug = !{ toString: null }.propertyIsEnumerable('toString');
        var nonEnumerableProps = [
            'constructor',
            'valueOf',
            'isPrototypeOf',
            'toString',
            'propertyIsEnumerable',
            'hasOwnProperty',
            'toLocaleString'
        ];
        // Safari bug
        var hasArgsEnumBug = function () {
            'use strict';
            return arguments.propertyIsEnumerable('length');
        }();
        var contains = function contains(list, item) {
            var idx = 0;
            while (idx < list.length) {
                if (list[idx] === item) {
                    return true;
                }
                idx += 1;
            }
            return false;
        };
        return typeof Object.keys === 'function' && !hasArgsEnumBug ? _curry1(function keys(obj) {
            return Object(obj) !== obj ? [] : Object.keys(obj);
        }) : _curry1(function keys(obj) {
            if (Object(obj) !== obj) {
                return [];
            }
            var prop, nIdx;
            var ks = [];
            var checkArgsLength = hasArgsEnumBug && _isArguments(obj);
            for (prop in obj) {
                if (_has(prop, obj) && (!checkArgsLength || prop !== 'length')) {
                    ks[ks.length] = prop;
                }
            }
            if (hasEnumBug) {
                nIdx = nonEnumerableProps.length - 1;
                while (nIdx >= 0) {
                    prop = nonEnumerableProps[nIdx];
                    if (_has(prop, obj) && !contains(ks, prop)) {
                        ks[ks.length] = prop;
                    }
                    nIdx -= 1;
                }
            }
            return ks;
        });
    }();

    /**
     * Returns a list containing the names of all the properties of the supplied
     * object, including prototype properties.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Object
     * @sig {k: v} -> [k]
     * @param {Object} obj The object to extract properties from
     * @return {Array} An array of the object's own and prototype properties.
     * @example
     *
     *      var F = function() { this.x = 'X'; };
     *      F.prototype.y = 'Y';
     *      var f = new F();
     *      R.keysIn(f); //=> ['x', 'y']
     */
    var keysIn = _curry1(function keysIn(obj) {
        var prop;
        var ks = [];
        for (prop in obj) {
            ks[ks.length] = prop;
        }
        return ks;
    });

    /**
     * Returns the number of elements in the array by returning `list.length`.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig [a] -> Number
     * @param {Array} list The array to inspect.
     * @return {Number} The length of the array.
     * @example
     *
     *      R.length([]); //=> 0
     *      R.length([1, 2, 3]); //=> 3
     */
    var length = _curry1(function length(list) {
        return list != null && is(Number, list.length) ? list.length : NaN;
    });

    /**
     * Returns `true` if the first argument is less than the second; `false`
     * otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @see R.gt
     * @example
     *
     *      R.lt(2, 1); //=> false
     *      R.lt(2, 2); //=> false
     *      R.lt(2, 3); //=> true
     *      R.lt('a', 'z'); //=> true
     *      R.lt('z', 'a'); //=> false
     */
    var lt = _curry2(function lt(a, b) {
        return a < b;
    });

    /**
     * Returns `true` if the first argument is less than or equal to the second;
     * `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {Number} a
     * @param {Number} b
     * @return {Boolean}
     * @see R.gte
     * @example
     *
     *      R.lte(2, 1); //=> false
     *      R.lte(2, 2); //=> true
     *      R.lte(2, 3); //=> true
     *      R.lte('a', 'z'); //=> true
     *      R.lte('z', 'a'); //=> false
     */
    var lte = _curry2(function lte(a, b) {
        return a <= b;
    });

    /**
     * The mapAccum function behaves like a combination of map and reduce; it
     * applies a function to each element of a list, passing an accumulating
     * parameter from left to right, and returning a final value of this
     * accumulator together with the new list.
     *
     * The iterator function receives two arguments, *acc* and *value*, and should
     * return a tuple *[acc, value]*.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (acc -> x -> (acc, y)) -> acc -> [x] -> (acc, [y])
     * @param {Function} fn The function to be called on every element of the input `list`.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.addIndex
     * @example
     *
     *      var digits = ['1', '2', '3', '4'];
     *      var appender = (a, b) => [a + b, a + b];
     *
     *      R.mapAccum(appender, 0, digits); //=> ['01234', ['01', '012', '0123', '01234']]
     */
    var mapAccum = _curry3(function mapAccum(fn, acc, list) {
        var idx = 0;
        var len = list.length;
        var result = [];
        var tuple = [acc];
        while (idx < len) {
            tuple = fn(tuple[0], list[idx]);
            result[idx] = tuple[1];
            idx += 1;
        }
        return [
            tuple[0],
            result
        ];
    });

    /**
     * The mapAccumRight function behaves like a combination of map and reduce; it
     * applies a function to each element of a list, passing an accumulating
     * parameter from right to left, and returning a final value of this
     * accumulator together with the new list.
     *
     * Similar to `mapAccum`, except moves through the input list from the right to
     * the left.
     *
     * The iterator function receives two arguments, *acc* and *value*, and should
     * return a tuple *[acc, value]*.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (acc -> x -> (acc, y)) -> acc -> [x] -> (acc, [y])
     * @param {Function} fn The function to be called on every element of the input `list`.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.addIndex
     * @example
     *
     *      var digits = ['1', '2', '3', '4'];
     *      var append = (a, b) => [a + b, a + b];
     *
     *      R.mapAccumRight(append, 0, digits); //=> ['04321', ['04321', '0432', '043', '04']]
     */
    var mapAccumRight = _curry3(function mapAccumRight(fn, acc, list) {
        var idx = list.length - 1;
        var result = [];
        var tuple = [acc];
        while (idx >= 0) {
            tuple = fn(tuple[0], list[idx]);
            result[idx] = tuple[1];
            idx -= 1;
        }
        return [
            tuple[0],
            result
        ];
    });

    /**
     * Tests a regular expression against a String. Note that this function will
     * return an empty array when there are no matches. This differs from
     * [`String.prototype.match`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match)
     * which returns `null` when there are no matches.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category String
     * @sig RegExp -> String -> [String | Undefined]
     * @param {RegExp} rx A regular expression.
     * @param {String} str The string to match against
     * @return {Array} The list of matches or empty array.
     * @see R.test
     * @example
     *
     *      R.match(/([a-z]a)/g, 'bananas'); //=> ['ba', 'na', 'na']
     *      R.match(/a/, 'b'); //=> []
     *      R.match(/a/, null); //=> TypeError: null does not have a method named "match"
     */
    var match = _curry2(function match(rx, str) {
        return str.match(rx) || [];
    });

    /**
     * mathMod behaves like the modulo operator should mathematically, unlike the
     * `%` operator (and by extension, R.modulo). So while "-17 % 5" is -2,
     * mathMod(-17, 5) is 3. mathMod requires Integer arguments, and returns NaN
     * when the modulus is zero or negative.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} m The dividend.
     * @param {Number} p the modulus.
     * @return {Number} The result of `b mod a`.
     * @example
     *
     *      R.mathMod(-17, 5);  //=> 3
     *      R.mathMod(17, 5);   //=> 2
     *      R.mathMod(17, -5);  //=> NaN
     *      R.mathMod(17, 0);   //=> NaN
     *      R.mathMod(17.2, 5); //=> NaN
     *      R.mathMod(17, 5.3); //=> NaN
     *
     *      var clock = R.mathMod(R.__, 12);
     *      clock(15); //=> 3
     *      clock(24); //=> 0
     *
     *      var seventeenMod = R.mathMod(17);
     *      seventeenMod(3);  //=> 2
     *      seventeenMod(4);  //=> 1
     *      seventeenMod(10); //=> 7
     */
    var mathMod = _curry2(function mathMod(m, p) {
        if (!_isInteger(m)) {
            return NaN;
        }
        if (!_isInteger(p) || p < 1) {
            return NaN;
        }
        return (m % p + p) % p;
    });

    /**
     * Returns the larger of its two arguments.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> a
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.maxBy, R.min
     * @example
     *
     *      R.max(789, 123); //=> 789
     *      R.max('a', 'b'); //=> 'b'
     */
    var max = _curry2(function max(a, b) {
        return b > a ? b : a;
    });

    /**
     * Takes a function and two values, and returns whichever value produces the
     * larger result when passed to the provided function.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Relation
     * @sig Ord b => (a -> b) -> a -> a -> a
     * @param {Function} f
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.max, R.minBy
     * @example
     *
     *      //  square :: Number -> Number
     *      var square = n => n * n;
     *
     *      R.maxBy(square, -3, 2); //=> -3
     *
     *      R.reduce(R.maxBy(square), 0, [3, -5, 4, 1, -2]); //=> -5
     *      R.reduce(R.maxBy(square), 0, []); //=> 0
     */
    var maxBy = _curry3(function maxBy(f, a, b) {
        return f(b) > f(a) ? b : a;
    });

    /**
     * Create a new object with the own properties of the first object merged with
     * the own properties of the second object. If a key exists in both objects,
     * the value from the second object will be used.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {k: v} -> {k: v} -> {k: v}
     * @param {Object} l
     * @param {Object} r
     * @return {Object}
     * @see R.mergeWith, R.mergeWithKey
     * @example
     *
     *      R.merge({ 'name': 'fred', 'age': 10 }, { 'age': 40 });
     *      //=> { 'name': 'fred', 'age': 40 }
     *
     *      var resetToDefault = R.merge(R.__, {x: 0});
     *      resetToDefault({x: 5, y: 2}); //=> {x: 0, y: 2}
     */
    var merge = _curry2(function merge(l, r) {
        return _assign({}, l, r);
    });

    /**
     * Merges a list of objects together into one object.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig [{k: v}] -> {k: v}
     * @param {Array} list An array of objects
     * @return {Object} A merged object.
     * @see R.reduce
     * @example
     *
     *      R.mergeAll([{foo:1},{bar:2},{baz:3}]); //=> {foo:1,bar:2,baz:3}
     *      R.mergeAll([{foo:1},{foo:2},{bar:2}]); //=> {foo:2,bar:2}
     */
    var mergeAll = _curry1(function mergeAll(list) {
        return _assign.apply(null, [{}].concat(list));
    });

    /**
     * Creates a new object with the own properties of the two provided objects. If
     * a key exists in both objects, the provided function is applied to the key
     * and the values associated with the key in each object, with the result being
     * used as the value associated with the key in the returned object. The key
     * will be excluded from the returned object if the resulting value is
     * `undefined`.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Object
     * @sig (String -> a -> a -> a) -> {a} -> {a} -> {a}
     * @param {Function} fn
     * @param {Object} l
     * @param {Object} r
     * @return {Object}
     * @see R.merge, R.mergeWith
     * @example
     *
     *      let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r
     *      R.mergeWithKey(concatValues,
     *                     { a: true, thing: 'foo', values: [10, 20] },
     *                     { b: true, thing: 'bar', values: [15, 35] });
     *      //=> { a: true, b: true, thing: 'bar', values: [10, 20, 15, 35] }
     */
    var mergeWithKey = _curry3(function mergeWithKey(fn, l, r) {
        var result = {};
        var k;
        for (k in l) {
            if (_has(k, l)) {
                result[k] = _has(k, r) ? fn(k, l[k], r[k]) : l[k];
            }
        }
        for (k in r) {
            if (_has(k, r) && !_has(k, result)) {
                result[k] = r[k];
            }
        }
        return result;
    });

    /**
     * Returns the smaller of its two arguments.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> a
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.minBy, R.max
     * @example
     *
     *      R.min(789, 123); //=> 123
     *      R.min('a', 'b'); //=> 'a'
     */
    var min = _curry2(function min(a, b) {
        return b < a ? b : a;
    });

    /**
     * Takes a function and two values, and returns whichever value produces the
     * smaller result when passed to the provided function.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Relation
     * @sig Ord b => (a -> b) -> a -> a -> a
     * @param {Function} f
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.min, R.maxBy
     * @example
     *
     *      //  square :: Number -> Number
     *      var square = n => n * n;
     *
     *      R.minBy(square, -3, 2); //=> 2
     *
     *      R.reduce(R.minBy(square), Infinity, [3, -5, 4, 1, -2]); //=> 1
     *      R.reduce(R.minBy(square), Infinity, []); //=> Infinity
     */
    var minBy = _curry3(function minBy(f, a, b) {
        return f(b) < f(a) ? b : a;
    });

    /**
     * Divides the second parameter by the first and returns the remainder. Note
     * that this function preserves the JavaScript-style behavior for modulo. For
     * mathematical modulo see `mathMod`.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The value to the divide.
     * @param {Number} b The pseudo-modulus
     * @return {Number} The result of `b % a`.
     * @see R.mathMod
     * @example
     *
     *      R.modulo(17, 3); //=> 2
     *      // JS behavior:
     *      R.modulo(-17, 3); //=> -2
     *      R.modulo(17, -3); //=> 2
     *
     *      var isOdd = R.modulo(R.__, 2);
     *      isOdd(42); //=> 0
     *      isOdd(21); //=> 1
     */
    var modulo = _curry2(function modulo(a, b) {
        return a % b;
    });

    /**
     * Multiplies two numbers. Equivalent to `a * b` but curried.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The first value.
     * @param {Number} b The second value.
     * @return {Number} The result of `a * b`.
     * @see R.divide
     * @example
     *
     *      var double = R.multiply(2);
     *      var triple = R.multiply(3);
     *      double(3);       //=>  6
     *      triple(4);       //=> 12
     *      R.multiply(2, 5);  //=> 10
     */
    var multiply = _curry2(function multiply(a, b) {
        return a * b;
    });

    /**
     * Wraps a function of any arity (including nullary) in a function that accepts
     * exactly `n` parameters. Any extraneous parameters will not be passed to the
     * supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig Number -> (* -> a) -> (* -> a)
     * @param {Number} n The desired arity of the new function.
     * @param {Function} fn The function to wrap.
     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of
     *         arity `n`.
     * @example
     *
     *      var takesTwoArgs = (a, b) => [a, b];
     *
     *      takesTwoArgs.length; //=> 2
     *      takesTwoArgs(1, 2); //=> [1, 2]
     *
     *      var takesOneArg = R.nAry(1, takesTwoArgs);
     *      takesOneArg.length; //=> 1
     *      // Only `n` arguments are passed to the wrapped function
     *      takesOneArg(1, 2); //=> [1, undefined]
     */
    var nAry = _curry2(function nAry(n, fn) {
        switch (n) {
        case 0:
            return function () {
                return fn.call(this);
            };
        case 1:
            return function (a0) {
                return fn.call(this, a0);
            };
        case 2:
            return function (a0, a1) {
                return fn.call(this, a0, a1);
            };
        case 3:
            return function (a0, a1, a2) {
                return fn.call(this, a0, a1, a2);
            };
        case 4:
            return function (a0, a1, a2, a3) {
                return fn.call(this, a0, a1, a2, a3);
            };
        case 5:
            return function (a0, a1, a2, a3, a4) {
                return fn.call(this, a0, a1, a2, a3, a4);
            };
        case 6:
            return function (a0, a1, a2, a3, a4, a5) {
                return fn.call(this, a0, a1, a2, a3, a4, a5);
            };
        case 7:
            return function (a0, a1, a2, a3, a4, a5, a6) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6);
            };
        case 8:
            return function (a0, a1, a2, a3, a4, a5, a6, a7) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7);
            };
        case 9:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7, a8);
            };
        case 10:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7, a8, a9);
            };
        default:
            throw new Error('First argument to nAry must be a non-negative integer no greater than ten');
        }
    });

    /**
     * Negates its argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Math
     * @sig Number -> Number
     * @param {Number} n
     * @return {Number}
     * @example
     *
     *      R.negate(42); //=> -42
     */
    var negate = _curry1(function negate(n) {
        return -n;
    });

    /**
     * Returns `true` if no elements of the list match the predicate, `false`
     * otherwise.
     *
     * Dispatches to the `any` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> Boolean
     * @param {Function} fn The predicate function.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the predicate is not satisfied by every element, `false` otherwise.
     * @see R.all, R.any
     * @example
     *
     *      var isEven = n => n % 2 === 0;
     *
     *      R.none(isEven, [1, 3, 5, 7, 9, 11]); //=> true
     *      R.none(isEven, [1, 3, 5, 7, 8, 11]); //=> false
     */
    var none = _curry2(_complement(_dispatchable('any', _xany, any)));

    /**
     * A function that returns the `!` of its argument. It will return `true` when
     * passed false-y value, and `false` when passed a truth-y one.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig * -> Boolean
     * @param {*} a any value
     * @return {Boolean} the logical inverse of passed argument.
     * @see R.complement
     * @example
     *
     *      R.not(true); //=> false
     *      R.not(false); //=> true
     *      R.not(0); => true
     *      R.not(1); => false
     */
    var not = _curry1(function not(a) {
        return !a;
    });

    /**
     * Returns the nth element of the given list or string. If n is negative the
     * element at index length + n is returned.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> [a] -> a | Undefined
     * @sig Number -> String -> String
     * @param {Number} offset
     * @param {*} list
     * @return {*}
     * @example
     *
     *      var list = ['foo', 'bar', 'baz', 'quux'];
     *      R.nth(1, list); //=> 'bar'
     *      R.nth(-1, list); //=> 'quux'
     *      R.nth(-99, list); //=> undefined
     *
     *      R.nth(2, 'abc'); //=> 'c'
     *      R.nth(3, 'abc'); //=> ''
     */
    var nth = _curry2(function nth(offset, list) {
        var idx = offset < 0 ? list.length + offset : offset;
        return _isString(list) ? list.charAt(idx) : list[idx];
    });

    /**
     * Returns a function which returns its nth argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig Number -> *... -> *
     * @param {Number} n
     * @return {Function}
     * @example
     *
     *      R.nthArg(1)('a', 'b', 'c'); //=> 'b'
     *      R.nthArg(-1)('a', 'b', 'c'); //=> 'c'
     */
    var nthArg = _curry1(function nthArg(n) {
        return function () {
            return nth(n, arguments);
        };
    });

    /**
     * Creates an object containing a single key:value pair.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Object
     * @sig String -> a -> {String:a}
     * @param {String} key
     * @param {*} val
     * @return {Object}
     * @see R.pair
     * @example
     *
     *      var matchPhrases = R.compose(
     *        R.objOf('must'),
     *        R.map(R.objOf('match_phrase'))
     *      );
     *      matchPhrases(['foo', 'bar', 'baz']); //=> {must: [{match_phrase: 'foo'}, {match_phrase: 'bar'}, {match_phrase: 'baz'}]}
     */
    var objOf = _curry2(function objOf(key, val) {
        var obj = {};
        obj[key] = val;
        return obj;
    });

    /**
     * Returns a singleton array containing the value provided.
     *
     * Note this `of` is different from the ES6 `of`; See
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Function
     * @sig a -> [a]
     * @param {*} x any value
     * @return {Array} An array wrapping `x`.
     * @example
     *
     *      R.of(null); //=> [null]
     *      R.of([42]); //=> [[42]]
     */
    var of = _curry1(_of);

    /**
     * Accepts a function `fn` and returns a function that guards invocation of
     * `fn` such that `fn` can only ever be called once, no matter how many times
     * the returned function is invoked. The first value calculated is returned in
     * subsequent invocations.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a... -> b) -> (a... -> b)
     * @param {Function} fn The function to wrap in a call-only-once wrapper.
     * @return {Function} The wrapped function.
     * @example
     *
     *      var addOneOnce = R.once(x => x + 1);
     *      addOneOnce(10); //=> 11
     *      addOneOnce(addOneOnce(50)); //=> 11
     */
    var once = _curry1(function once(fn) {
        var called = false;
        var result;
        return _arity(fn.length, function () {
            if (called) {
                return result;
            }
            called = true;
            result = fn.apply(this, arguments);
            return result;
        });
    });

    /**
     * Returns `true` if one or both of its arguments are `true`. Returns `false`
     * if both arguments are `false`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig * -> * -> *
     * @param {Boolean} a A boolean value
     * @param {Boolean} b A boolean value
     * @return {Boolean} `true` if one or both arguments are `true`, `false` otherwise
     * @see R.either
     * @example
     *
     *      R.or(true, true); //=> true
     *      R.or(true, false); //=> true
     *      R.or(false, true); //=> true
     *      R.or(false, false); //=> false
     */
    var or = _curry2(function or(a, b) {
        return a || b;
    });

    /**
     * Returns the result of "setting" the portion of the given data structure
     * focused by the given lens to the result of applying the given function to
     * the focused value.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Lens s a -> (a -> a) -> s -> s
     * @param {Lens} lens
     * @param {*} v
     * @param {*} x
     * @return {*}
     * @see R.prop, R.lensIndex, R.lensProp
     * @example
     *
     *      var headLens = R.lensIndex(0);
     *
     *      R.over(headLens, R.toUpper, ['foo', 'bar', 'baz']); //=> ['FOO', 'bar', 'baz']
     */
    // `Identity` is a functor that holds a single value, where `map` simply
    // transforms the held value with the provided function.
    // The value returned by the getter function is first transformed with `f`,
    // then set as the value of an `Identity`. This is then mapped over with the
    // setter function of the lens.
    var over = function () {
        // `Identity` is a functor that holds a single value, where `map` simply
        // transforms the held value with the provided function.
        var Identity = function (x) {
            return {
                value: x,
                map: function (f) {
                    return Identity(f(x));
                }
            };
        };
        return _curry3(function over(lens, f, x) {
            // The value returned by the getter function is first transformed with `f`,
            // then set as the value of an `Identity`. This is then mapped over with the
            // setter function of the lens.
            return lens(function (y) {
                return Identity(f(y));
            })(x).value;
        });
    }();

    /**
     * Takes two arguments, `fst` and `snd`, and returns `[fst, snd]`.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category List
     * @sig a -> b -> (a,b)
     * @param {*} fst
     * @param {*} snd
     * @return {Array}
     * @see R.objOf, R.of
     * @example
     *
     *      R.pair('foo', 'bar'); //=> ['foo', 'bar']
     */
    var pair = _curry2(function pair(fst, snd) {
        return [
            fst,
            snd
        ];
    });

    /**
     * Retrieve the value at a given path.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Object
     * @sig [String] -> {k: v} -> v | Undefined
     * @param {Array} path The path to use.
     * @param {Object} obj The object to retrieve the nested property from.
     * @return {*} The data at `path`.
     * @example
     *
     *      R.path(['a', 'b'], {a: {b: 2}}); //=> 2
     *      R.path(['a', 'b'], {c: {b: 2}}); //=> undefined
     */
    var path = _curry2(function path(paths, obj) {
        var val = obj;
        var idx = 0;
        while (idx < paths.length) {
            if (val == null) {
                return;
            }
            val = val[paths[idx]];
            idx += 1;
        }
        return val;
    });

    /**
     * If the given, non-null object has a value at the given path, returns the
     * value at that path. Otherwise returns the provided default value.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Object
     * @sig a -> [String] -> Object -> a
     * @param {*} d The default value.
     * @param {Array} p The path to use.
     * @param {Object} obj The object to retrieve the nested property from.
     * @return {*} The data at `path` of the supplied object or the default value.
     * @example
     *
     *      R.pathOr('N/A', ['a', 'b'], {a: {b: 2}}); //=> 2
     *      R.pathOr('N/A', ['a', 'b'], {c: {b: 2}}); //=> "N/A"
     */
    var pathOr = _curry3(function pathOr(d, p, obj) {
        return defaultTo(d, path(p, obj));
    });

    /**
     * Returns `true` if the specified object property at given path satisfies the
     * given predicate; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Logic
     * @sig (a -> Boolean) -> [String] -> Object -> Boolean
     * @param {Function} pred
     * @param {Array} propPath
     * @param {*} obj
     * @return {Boolean}
     * @see R.propSatisfies, R.path
     * @example
     *
     *      R.pathSatisfies(y => y > 0, ['x', 'y'], {x: {y: 2}}); //=> true
     */
    var pathSatisfies = _curry3(function pathSatisfies(pred, propPath, obj) {
        return propPath.length > 0 && pred(path(propPath, obj));
    });

    /**
     * Returns a partial copy of an object containing only the keys specified. If
     * the key does not exist, the property is ignored.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [k] -> {k: v} -> {k: v}
     * @param {Array} names an array of String property names to copy onto a new object
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with only properties from `names` on it.
     * @see R.omit, R.props
     * @example
     *
     *      R.pick(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}
     *      R.pick(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1}
     */
    var pick = _curry2(function pick(names, obj) {
        var result = {};
        var idx = 0;
        while (idx < names.length) {
            if (names[idx] in obj) {
                result[names[idx]] = obj[names[idx]];
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Similar to `pick` except that this one includes a `key: undefined` pair for
     * properties that don't exist.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [k] -> {k: v} -> {k: v}
     * @param {Array} names an array of String property names to copy onto a new object
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with only properties from `names` on it.
     * @see R.pick
     * @example
     *
     *      R.pickAll(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}
     *      R.pickAll(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, e: undefined, f: undefined}
     */
    var pickAll = _curry2(function pickAll(names, obj) {
        var result = {};
        var idx = 0;
        var len = names.length;
        while (idx < len) {
            var name = names[idx];
            result[name] = obj[name];
            idx += 1;
        }
        return result;
    });

    /**
     * Returns a partial copy of an object containing only the keys that satisfy
     * the supplied predicate.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @sig (v, k -> Boolean) -> {k: v} -> {k: v}
     * @param {Function} pred A predicate to determine whether or not a key
     *        should be included on the output object.
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with only properties that satisfy `pred`
     *         on it.
     * @see R.pick, R.filter
     * @example
     *
     *      var isUpperCase = (val, key) => key.toUpperCase() === key;
     *      R.pickBy(isUpperCase, {a: 1, b: 2, A: 3, B: 4}); //=> {A: 3, B: 4}
     */
    var pickBy = _curry2(function pickBy(test, obj) {
        var result = {};
        for (var prop in obj) {
            if (test(obj[prop], prop, obj)) {
                result[prop] = obj[prop];
            }
        }
        return result;
    });

    /**
     * Returns a new list with the given element at the front, followed by the
     * contents of the list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> [a]
     * @param {*} el The item to add to the head of the output list.
     * @param {Array} list The array to add to the tail of the output list.
     * @return {Array} A new array.
     * @see R.append
     * @example
     *
     *      R.prepend('fee', ['fi', 'fo', 'fum']); //=> ['fee', 'fi', 'fo', 'fum']
     */
    var prepend = _curry2(function prepend(el, list) {
        return _concat([el], list);
    });

    /**
     * Returns a function that when supplied an object returns the indicated
     * property of that object, if it exists.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig s -> {s: a} -> a | Undefined
     * @param {String} p The property name
     * @param {Object} obj The object to query
     * @return {*} The value at `obj.p`.
     * @example
     *
     *      R.prop('x', {x: 100}); //=> 100
     *      R.prop('x', {}); //=> undefined
     */
    var prop = _curry2(function prop(p, obj) {
        return obj[p];
    });

    /**
     * If the given, non-null object has an own property with the specified name,
     * returns the value of that property. Otherwise returns the provided default
     * value.
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category Object
     * @sig a -> String -> Object -> a
     * @param {*} val The default value.
     * @param {String} p The name of the property to return.
     * @param {Object} obj The object to query.
     * @return {*} The value of given property of the supplied object or the default value.
     * @example
     *
     *      var alice = {
     *        name: 'ALICE',
     *        age: 101
     *      };
     *      var favorite = R.prop('favoriteLibrary');
     *      var favoriteWithDefault = R.propOr('Ramda', 'favoriteLibrary');
     *
     *      favorite(alice);  //=> undefined
     *      favoriteWithDefault(alice);  //=> 'Ramda'
     */
    var propOr = _curry3(function propOr(val, p, obj) {
        return obj != null && _has(p, obj) ? obj[p] : val;
    });

    /**
     * Returns `true` if the specified object property satisfies the given
     * predicate; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Logic
     * @sig (a -> Boolean) -> String -> {String: a} -> Boolean
     * @param {Function} pred
     * @param {String} name
     * @param {*} obj
     * @return {Boolean}
     * @see R.propEq, R.propIs
     * @example
     *
     *      R.propSatisfies(x => x > 0, 'x', {x: 1, y: 2}); //=> true
     */
    var propSatisfies = _curry3(function propSatisfies(pred, name, obj) {
        return pred(obj[name]);
    });

    /**
     * Acts as multiple `prop`: array of keys in, array of values out. Preserves
     * order.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [k] -> {k: v} -> [v]
     * @param {Array} ps The property names to fetch
     * @param {Object} obj The object to query
     * @return {Array} The corresponding values or partially applied function.
     * @example
     *
     *      R.props(['x', 'y'], {x: 1, y: 2}); //=> [1, 2]
     *      R.props(['c', 'a', 'b'], {b: 2, a: 1}); //=> [undefined, 1, 2]
     *
     *      var fullName = R.compose(R.join(' '), R.props(['first', 'last']));
     *      fullName({last: 'Bullet-Tooth', age: 33, first: 'Tony'}); //=> 'Tony Bullet-Tooth'
     */
    var props = _curry2(function props(ps, obj) {
        var len = ps.length;
        var out = [];
        var idx = 0;
        while (idx < len) {
            out[idx] = obj[ps[idx]];
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a list of numbers from `from` (inclusive) to `to` (exclusive).
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> Number -> [Number]
     * @param {Number} from The first number in the list.
     * @param {Number} to One more than the last number in the list.
     * @return {Array} The list of numbers in tthe set `[a, b)`.
     * @example
     *
     *      R.range(1, 5);    //=> [1, 2, 3, 4]
     *      R.range(50, 53);  //=> [50, 51, 52]
     */
    var range = _curry2(function range(from, to) {
        if (!(_isNumber(from) && _isNumber(to))) {
            throw new TypeError('Both arguments to range must be numbers');
        }
        var result = [];
        var n = from;
        while (n < to) {
            result.push(n);
            n += 1;
        }
        return result;
    });

    /**
     * Returns a single item by iterating through the list, successively calling
     * the iterator function and passing it an accumulator value and the current
     * value from the array, and then passing the result to the next call.
     *
     * Similar to `reduce`, except moves through the input list from the right to
     * the left.
     *
     * The iterator function receives two values: *(acc, value)*
     *
     * Note: `R.reduceRight` does not skip deleted or unassigned indices (sparse
     * arrays), unlike the native `Array.prototype.reduce` method. For more details
     * on this behavior, see:
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduceRight#Description
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a,b -> a) -> a -> [b] -> a
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.addIndex
     * @example
     *
     *      var pairs = [ ['a', 1], ['b', 2], ['c', 3] ];
     *      var flattenPairs = (acc, pair) => acc.concat(pair);
     *
     *      R.reduceRight(flattenPairs, [], pairs); //=> [ 'c', 3, 'b', 2, 'a', 1 ]
     */
    var reduceRight = _curry3(function reduceRight(fn, acc, list) {
        var idx = list.length - 1;
        while (idx >= 0) {
            acc = fn(acc, list[idx]);
            idx -= 1;
        }
        return acc;
    });

    /**
     * Returns a value wrapped to indicate that it is the final value of the reduce
     * and transduce functions. The returned value should be considered a black
     * box: the internal structure is not guaranteed to be stable.
     *
     * Note: this optimization is unavailable to functions not explicitly listed
     * above. For instance, it is not currently supported by reduceRight.
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category List
     * @sig a -> *
     * @param {*} x The final value of the reduce.
     * @return {*} The wrapped value.
     * @see R.reduce, R.transduce
     * @example
     *
     *      R.reduce(
     *        R.pipe(R.add, R.when(R.gte(R.__, 10), R.reduced)),
     *        0,
     *        [1, 2, 3, 4, 5]) // 10
     */
    var reduced = _curry1(_reduced);

    /**
     * Removes the sub-list of `list` starting at index `start` and containing
     * `count` elements. _Note that this is not destructive_: it returns a copy of
     * the list with the changes.
     * <small>No lists have been harmed in the application of this function.</small>
     *
     * @func
     * @memberOf R
     * @since v0.2.2
     * @category List
     * @sig Number -> Number -> [a] -> [a]
     * @param {Number} start The position to start removing elements
     * @param {Number} count The number of elements to remove
     * @param {Array} list The list to remove from
     * @return {Array} A new Array with `count` elements from `start` removed.
     * @example
     *
     *      R.remove(2, 3, [1,2,3,4,5,6,7,8]); //=> [1,2,6,7,8]
     */
    var remove = _curry3(function remove(start, count, list) {
        return _concat(_slice(list, 0, Math.min(start, list.length)), _slice(list, Math.min(list.length, start + count)));
    });

    /**
     * Replace a substring or regex match in a string with a replacement.
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category String
     * @sig RegExp|String -> String -> String -> String
     * @param {RegExp|String} pattern A regular expression or a substring to match.
     * @param {String} replacement The string to replace the matches with.
     * @param {String} str The String to do the search and replacement in.
     * @return {String} The result.
     * @example
     *
     *      R.replace('foo', 'bar', 'foo foo foo'); //=> 'bar foo foo'
     *      R.replace(/foo/, 'bar', 'foo foo foo'); //=> 'bar foo foo'
     *
     *      // Use the "g" (global) flag to replace all occurrences:
     *      R.replace(/foo/g, 'bar', 'foo foo foo'); //=> 'bar bar bar'
     */
    var replace = _curry3(function replace(regex, replacement, str) {
        return str.replace(regex, replacement);
    });

    /**
     * Returns a new list or string with the elements or characters in reverse
     * order.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a]
     * @sig String -> String
     * @param {Array|String} list
     * @return {Array|String}
     * @example
     *
     *      R.reverse([1, 2, 3]);  //=> [3, 2, 1]
     *      R.reverse([1, 2]);     //=> [2, 1]
     *      R.reverse([1]);        //=> [1]
     *      R.reverse([]);         //=> []
     *
     *      R.reverse('abc');      //=> 'cba'
     *      R.reverse('ab');       //=> 'ba'
     *      R.reverse('a');        //=> 'a'
     *      R.reverse('');         //=> ''
     */
    var reverse = _curry1(function reverse(list) {
        return _isString(list) ? list.split('').reverse().join('') : _slice(list).reverse();
    });

    /**
     * Scan is similar to reduce, but returns a list of successively reduced values
     * from the left
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (a,b -> a) -> a -> [b] -> [a]
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {Array} A list of all intermediately reduced values.
     * @example
     *
     *      var numbers = [1, 2, 3, 4];
     *      var factorials = R.scan(R.multiply, 1, numbers); //=> [1, 1, 2, 6, 24]
     */
    var scan = _curry3(function scan(fn, acc, list) {
        var idx = 0;
        var len = list.length;
        var result = [acc];
        while (idx < len) {
            acc = fn(acc, list[idx]);
            result[idx + 1] = acc;
            idx += 1;
        }
        return result;
    });

    /**
     * Returns the result of "setting" the portion of the given data structure
     * focused by the given lens to the given value.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Lens s a -> a -> s -> s
     * @param {Lens} lens
     * @param {*} v
     * @param {*} x
     * @return {*}
     * @see R.prop, R.lensIndex, R.lensProp
     * @example
     *
     *      var xLens = R.lensProp('x');
     *
     *      R.set(xLens, 4, {x: 1, y: 2});  //=> {x: 4, y: 2}
     *      R.set(xLens, 8, {x: 1, y: 2});  //=> {x: 8, y: 2}
     */
    var set = _curry3(function set(lens, v, x) {
        return over(lens, always(v), x);
    });

    /**
     * Returns the elements of the given list or string (or object with a `slice`
     * method) from `fromIndex` (inclusive) to `toIndex` (exclusive).
     *
     * Dispatches to the `slice` method of the third argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.4
     * @category List
     * @sig Number -> Number -> [a] -> [a]
     * @sig Number -> Number -> String -> String
     * @param {Number} fromIndex The start index (inclusive).
     * @param {Number} toIndex The end index (exclusive).
     * @param {*} list
     * @return {*}
     * @example
     *
     *      R.slice(1, 3, ['a', 'b', 'c', 'd']);        //=> ['b', 'c']
     *      R.slice(1, Infinity, ['a', 'b', 'c', 'd']); //=> ['b', 'c', 'd']
     *      R.slice(0, -1, ['a', 'b', 'c', 'd']);       //=> ['a', 'b', 'c']
     *      R.slice(-3, -1, ['a', 'b', 'c', 'd']);      //=> ['b', 'c']
     *      R.slice(0, 3, 'ramda');                     //=> 'ram'
     */
    var slice = _curry3(_checkForMethod('slice', function slice(fromIndex, toIndex, list) {
        return Array.prototype.slice.call(list, fromIndex, toIndex);
    }));

    /**
     * Returns a copy of the list, sorted according to the comparator function,
     * which should accept two values at a time and return a negative number if the
     * first value is smaller, a positive number if it's larger, and zero if they
     * are equal. Please note that this is a **copy** of the list. It does not
     * modify the original.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a,a -> Number) -> [a] -> [a]
     * @param {Function} comparator A sorting function :: a -> b -> Int
     * @param {Array} list The list to sort
     * @return {Array} a new array with its elements sorted by the comparator function.
     * @example
     *
     *      var diff = function(a, b) { return a - b; };
     *      R.sort(diff, [4,2,7,5]); //=> [2, 4, 5, 7]
     */
    var sort = _curry2(function sort(comparator, list) {
        return _slice(list).sort(comparator);
    });

    /**
     * Sorts the list according to the supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord b => (a -> b) -> [a] -> [a]
     * @param {Function} fn
     * @param {Array} list The list to sort.
     * @return {Array} A new list sorted by the keys generated by `fn`.
     * @example
     *
     *      var sortByFirstItem = R.sortBy(R.prop(0));
     *      var sortByNameCaseInsensitive = R.sortBy(R.compose(R.toLower, R.prop('name')));
     *      var pairs = [[-1, 1], [-2, 2], [-3, 3]];
     *      sortByFirstItem(pairs); //=> [[-3, 3], [-2, 2], [-1, 1]]
     *      var alice = {
     *        name: 'ALICE',
     *        age: 101
     *      };
     *      var bob = {
     *        name: 'Bob',
     *        age: -10
     *      };
     *      var clara = {
     *        name: 'clara',
     *        age: 314.159
     *      };
     *      var people = [clara, bob, alice];
     *      sortByNameCaseInsensitive(people); //=> [alice, bob, clara]
     */
    var sortBy = _curry2(function sortBy(fn, list) {
        return _slice(list).sort(function (a, b) {
            var aa = fn(a);
            var bb = fn(b);
            return aa < bb ? -1 : aa > bb ? 1 : 0;
        });
    });

    /**
     * Splits a given list or string at a given index.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig Number -> [a] -> [[a], [a]]
     * @sig Number -> String -> [String, String]
     * @param {Number} index The index where the array/string is split.
     * @param {Array|String} array The array/string to be split.
     * @return {Array}
     * @example
     *
     *      R.splitAt(1, [1, 2, 3]);          //=> [[1], [2, 3]]
     *      R.splitAt(5, 'hello world');      //=> ['hello', ' world']
     *      R.splitAt(-1, 'foobar');          //=> ['fooba', 'r']
     */
    var splitAt = _curry2(function splitAt(index, array) {
        return [
            slice(0, index, array),
            slice(index, length(array), array)
        ];
    });

    /**
     * Splits a collection into slices of the specified length.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig Number -> [a] -> [[a]]
     * @sig Number -> String -> [String]
     * @param {Number} n
     * @param {Array} list
     * @return {Array}
     * @example
     *
     *      R.splitEvery(3, [1, 2, 3, 4, 5, 6, 7]); //=> [[1, 2, 3], [4, 5, 6], [7]]
     *      R.splitEvery(3, 'foobarbaz'); //=> ['foo', 'bar', 'baz']
     */
    var splitEvery = _curry2(function splitEvery(n, list) {
        if (n <= 0) {
            throw new Error('First argument to splitEvery must be a positive integer');
        }
        var result = [];
        var idx = 0;
        while (idx < list.length) {
            result.push(slice(idx, idx += n, list));
        }
        return result;
    });

    /**
     * Takes a list and a predicate and returns a pair of lists with the following properties:
     *
     *  - the result of concatenating the two output lists is equivalent to the input list;
     *  - none of the elements of the first output list satisfies the predicate; and
     *  - if the second output list is non-empty, its first element satisfies the predicate.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [[a], [a]]
     * @param {Function} pred The predicate that determines where the array is split.
     * @param {Array} list The array to be split.
     * @return {Array}
     * @example
     *
     *      R.splitWhen(R.equals(2), [1, 2, 3, 1, 2, 3]);   //=> [[1], [2, 3, 1, 2, 3]]
     */
    var splitWhen = _curry2(function splitWhen(pred, list) {
        var idx = 0;
        var len = list.length;
        var prefix = [];
        while (idx < len && !pred(list[idx])) {
            prefix.push(list[idx]);
            idx += 1;
        }
        return [
            prefix,
            _slice(list, idx)
        ];
    });

    /**
     * Subtracts its second argument from its first argument.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The first value.
     * @param {Number} b The second value.
     * @return {Number} The result of `a - b`.
     * @see R.add
     * @example
     *
     *      R.subtract(10, 8); //=> 2
     *
     *      var minus5 = R.subtract(R.__, 5);
     *      minus5(17); //=> 12
     *
     *      var complementaryAngle = R.subtract(90);
     *      complementaryAngle(30); //=> 60
     *      complementaryAngle(72); //=> 18
     */
    var subtract = _curry2(function subtract(a, b) {
        return Number(a) - Number(b);
    });

    /**
     * Returns all but the first element of the given list or string (or object
     * with a `tail` method).
     *
     * Dispatches to the `slice` method of the first argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a]
     * @sig String -> String
     * @param {*} list
     * @return {*}
     * @see R.head, R.init, R.last
     * @example
     *
     *      R.tail([1, 2, 3]);  //=> [2, 3]
     *      R.tail([1, 2]);     //=> [2]
     *      R.tail([1]);        //=> []
     *      R.tail([]);         //=> []
     *
     *      R.tail('abc');  //=> 'bc'
     *      R.tail('ab');   //=> 'b'
     *      R.tail('a');    //=> ''
     *      R.tail('');     //=> ''
     */
    var tail = _checkForMethod('tail', slice(1, Infinity));

    /**
     * Returns the first `n` elements of the given list, string, or
     * transducer/transformer (or object with a `take` method).
     *
     * Dispatches to the `take` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n
     * @param {*} list
     * @return {*}
     * @see R.drop
     * @example
     *
     *      R.take(1, ['foo', 'bar', 'baz']); //=> ['foo']
     *      R.take(2, ['foo', 'bar', 'baz']); //=> ['foo', 'bar']
     *      R.take(3, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.take(4, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.take(3, 'ramda');               //=> 'ram'
     *
     *      var personnel = [
     *        'Dave Brubeck',
     *        'Paul Desmond',
     *        'Eugene Wright',
     *        'Joe Morello',
     *        'Gerry Mulligan',
     *        'Bob Bates',
     *        'Joe Dodge',
     *        'Ron Crotty'
     *      ];
     *
     *      var takeFive = R.take(5);
     *      takeFive(personnel);
     *      //=> ['Dave Brubeck', 'Paul Desmond', 'Eugene Wright', 'Joe Morello', 'Gerry Mulligan']
     */
    var take = _curry2(_dispatchable('take', _xtake, function take(n, xs) {
        return slice(0, n < 0 ? Infinity : n, xs);
    }));

    /**
     * Returns a new list containing the last `n` elements of a given list, passing
     * each value to the supplied predicate function, and terminating when the
     * predicate function returns `false`. Excludes the element that caused the
     * predicate function to fail. The predicate function is passed one argument:
     * *(value)*.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.dropLastWhile, R.addIndex
     * @example
     *
     *      var isNotOne = x => x !== 1;
     *
     *      R.takeLastWhile(isNotOne, [1, 2, 3, 4]); //=> [2, 3, 4]
     */
    var takeLastWhile = _curry2(function takeLastWhile(fn, list) {
        var idx = list.length - 1;
        while (idx >= 0 && fn(list[idx])) {
            idx -= 1;
        }
        return _slice(list, idx + 1, Infinity);
    });

    /**
     * Returns a new list containing the first `n` elements of a given list,
     * passing each value to the supplied predicate function, and terminating when
     * the predicate function returns `false`. Excludes the element that caused the
     * predicate function to fail. The predicate function is passed one argument:
     * *(value)*.
     *
     * Dispatches to the `takeWhile` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.dropWhile, R.transduce, R.addIndex
     * @example
     *
     *      var isNotFour = x => x !== 4;
     *
     *      R.takeWhile(isNotFour, [1, 2, 3, 4, 3, 2, 1]); //=> [1, 2, 3]
     */
    var takeWhile = _curry2(_dispatchable('takeWhile', _xtakeWhile, function takeWhile(fn, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len && fn(list[idx])) {
            idx += 1;
        }
        return _slice(list, 0, idx);
    }));

    /**
     * Runs the given function with the supplied object, then returns the object.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a -> *) -> a -> a
     * @param {Function} fn The function to call with `x`. The return value of `fn` will be thrown away.
     * @param {*} x
     * @return {*} `x`.
     * @example
     *
     *      var sayX = x => console.log('x is ' + x);
     *      R.tap(sayX, 100); //=> 100
     *      //-> 'x is 100'
     */
    var tap = _curry2(function tap(fn, x) {
        fn(x);
        return x;
    });

    /**
     * Calls an input function `n` times, returning an array containing the results
     * of those function calls.
     *
     * `fn` is passed one argument: The current value of `n`, which begins at `0`
     * and is gradually incremented to `n - 1`.
     *
     * @func
     * @memberOf R
     * @since v0.2.3
     * @category List
     * @sig (Number -> a) -> Number -> [a]
     * @param {Function} fn The function to invoke. Passed one argument, the current value of `n`.
     * @param {Number} n A value between `0` and `n - 1`. Increments after each function call.
     * @return {Array} An array containing the return values of all calls to `fn`.
     * @example
     *
     *      R.times(R.identity, 5); //=> [0, 1, 2, 3, 4]
     */
    var times = _curry2(function times(fn, n) {
        var len = Number(n);
        var idx = 0;
        var list;
        if (len < 0 || isNaN(len)) {
            throw new RangeError('n must be a non-negative number');
        }
        list = new Array(len);
        while (idx < len) {
            list[idx] = fn(idx);
            idx += 1;
        }
        return list;
    });

    /**
     * Converts an object into an array of key, value arrays. Only the object's
     * own properties are used.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.4.0
     * @category Object
     * @sig {String: *} -> [[String,*]]
     * @param {Object} obj The object to extract from
     * @return {Array} An array of key, value arrays from the object's own properties.
     * @see R.fromPairs
     * @example
     *
     *      R.toPairs({a: 1, b: 2, c: 3}); //=> [['a', 1], ['b', 2], ['c', 3]]
     */
    var toPairs = _curry1(function toPairs(obj) {
        var pairs = [];
        for (var prop in obj) {
            if (_has(prop, obj)) {
                pairs[pairs.length] = [
                    prop,
                    obj[prop]
                ];
            }
        }
        return pairs;
    });

    /**
     * Converts an object into an array of key, value arrays. The object's own
     * properties and prototype properties are used. Note that the order of the
     * output array is not guaranteed to be consistent across different JS
     * platforms.
     *
     * @func
     * @memberOf R
     * @since v0.4.0
     * @category Object
     * @sig {String: *} -> [[String,*]]
     * @param {Object} obj The object to extract from
     * @return {Array} An array of key, value arrays from the object's own
     *         and prototype properties.
     * @example
     *
     *      var F = function() { this.x = 'X'; };
     *      F.prototype.y = 'Y';
     *      var f = new F();
     *      R.toPairsIn(f); //=> [['x','X'], ['y','Y']]
     */
    var toPairsIn = _curry1(function toPairsIn(obj) {
        var pairs = [];
        for (var prop in obj) {
            pairs[pairs.length] = [
                prop,
                obj[prop]
            ];
        }
        return pairs;
    });

    /**
     * Transposes the rows and columns of a 2D list.
     * When passed a list of `n` lists of length `x`,
     * returns a list of `x` lists of length `n`.
     *
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig [[a]] -> [[a]]
     * @param {Array} list A 2D list
     * @return {Array} A 2D list
     * @example
     *
     *      R.transpose([[1, 'a'], [2, 'b'], [3, 'c']]) //=> [[1, 2, 3], ['a', 'b', 'c']]
     *      R.transpose([[1, 2, 3], ['a', 'b', 'c']]) //=> [[1, 'a'], [2, 'b'], [3, 'c']]
     *
     * If some of the rows are shorter than the following rows, their elements are skipped:
     *
     *      R.transpose([[10, 11], [20], [], [30, 31, 32]]) //=> [[10, 20, 30], [11, 31], [32]]
     */
    var transpose = _curry1(function transpose(outerlist) {
        var i = 0;
        var result = [];
        while (i < outerlist.length) {
            var innerlist = outerlist[i];
            var j = 0;
            while (j < innerlist.length) {
                if (typeof result[j] === 'undefined') {
                    result[j] = [];
                }
                result[j].push(innerlist[j]);
                j += 1;
            }
            i += 1;
        }
        return result;
    });

    /**
     * Removes (strips) whitespace from both ends of the string.
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category String
     * @sig String -> String
     * @param {String} str The string to trim.
     * @return {String} Trimmed version of `str`.
     * @example
     *
     *      R.trim('   xyz  '); //=> 'xyz'
     *      R.map(R.trim, R.split(',', 'x, y, z')); //=> ['x', 'y', 'z']
     */
    var trim = function () {
        var ws = '\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003' + '\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028' + '\u2029\uFEFF';
        var zeroWidth = '\u200B';
        var hasProtoTrim = typeof String.prototype.trim === 'function';
        if (!hasProtoTrim || (ws.trim() || !zeroWidth.trim())) {
            return _curry1(function trim(str) {
                var beginRx = new RegExp('^[' + ws + '][' + ws + ']*');
                var endRx = new RegExp('[' + ws + '][' + ws + ']*$');
                return str.replace(beginRx, '').replace(endRx, '');
            });
        } else {
            return _curry1(function trim(str) {
                return str.trim();
            });
        }
    }();

    /**
     * `tryCatch` takes two functions, a `tryer` and a `catcher`. The returned
     * function evaluates the `tryer`; if it does not throw, it simply returns the
     * result. If the `tryer` *does* throw, the returned function evaluates the
     * `catcher` function and returns its result. Note that for effective
     * composition with this function, both the `tryer` and `catcher` functions
     * must return the same type of results.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Function
     * @sig (...x -> a) -> ((e, ...x) -> a) -> (...x -> a)
     * @param {Function} tryer The function that may throw.
     * @param {Function} catcher The function that will be evaluated if `tryer` throws.
     * @return {Function} A new function that will catch exceptions and send then to the catcher.
     * @example
     *
     *      R.tryCatch(R.prop('x'), R.F, {x: true}); //=> true
     *      R.tryCatch(R.prop('x'), R.F, null);      //=> false
     */
    var tryCatch = _curry2(function _tryCatch(tryer, catcher) {
        return _arity(tryer.length, function () {
            try {
                return tryer.apply(this, arguments);
            } catch (e) {
                return catcher.apply(this, _concat([e], arguments));
            }
        });
    });

    /**
     * Gives a single-word string description of the (native) type of a value,
     * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not
     * attempt to distinguish user Object types any further, reporting them all as
     * 'Object'.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Type
     * @sig (* -> {*}) -> String
     * @param {*} val The value to test
     * @return {String}
     * @example
     *
     *      R.type({}); //=> "Object"
     *      R.type(1); //=> "Number"
     *      R.type(false); //=> "Boolean"
     *      R.type('s'); //=> "String"
     *      R.type(null); //=> "Null"
     *      R.type([]); //=> "Array"
     *      R.type(/[A-z]/); //=> "RegExp"
     */
    var type = _curry1(function type(val) {
        return val === null ? 'Null' : val === undefined ? 'Undefined' : Object.prototype.toString.call(val).slice(8, -1);
    });

    /**
     * Takes a function `fn`, which takes a single array argument, and returns a
     * function which:
     *
     *   - takes any number of positional arguments;
     *   - passes these arguments to `fn` as an array; and
     *   - returns the result.
     *
     * In other words, R.unapply derives a variadic function from a function which
     * takes an array. R.unapply is the inverse of R.apply.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Function
     * @sig ([*...] -> a) -> (*... -> a)
     * @param {Function} fn
     * @return {Function}
     * @see R.apply
     * @example
     *
     *      R.unapply(JSON.stringify)(1, 2, 3); //=> '[1,2,3]'
     */
    var unapply = _curry1(function unapply(fn) {
        return function () {
            return fn(_slice(arguments));
        };
    });

    /**
     * Wraps a function of any arity (including nullary) in a function that accepts
     * exactly 1 parameter. Any extraneous parameters will not be passed to the
     * supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Function
     * @sig (* -> b) -> (a -> b)
     * @param {Function} fn The function to wrap.
     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of
     *         arity 1.
     * @example
     *
     *      var takesTwoArgs = function(a, b) {
     *        return [a, b];
     *      };
     *      takesTwoArgs.length; //=> 2
     *      takesTwoArgs(1, 2); //=> [1, 2]
     *
     *      var takesOneArg = R.unary(takesTwoArgs);
     *      takesOneArg.length; //=> 1
     *      // Only 1 argument is passed to the wrapped function
     *      takesOneArg(1, 2); //=> [1, undefined]
     */
    var unary = _curry1(function unary(fn) {
        return nAry(1, fn);
    });

    /**
     * Returns a function of arity `n` from a (manually) curried function.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Function
     * @sig Number -> (a -> b) -> (a -> c)
     * @param {Number} length The arity for the returned function.
     * @param {Function} fn The function to uncurry.
     * @return {Function} A new function.
     * @see R.curry
     * @example
     *
     *      var addFour = a => b => c => d => a + b + c + d;
     *
     *      var uncurriedAddFour = R.uncurryN(4, addFour);
     *      uncurriedAddFour(1, 2, 3, 4); //=> 10
     */
    var uncurryN = _curry2(function uncurryN(depth, fn) {
        return curryN(depth, function () {
            var currentDepth = 1;
            var value = fn;
            var idx = 0;
            var endIdx;
            while (currentDepth <= depth && typeof value === 'function') {
                endIdx = currentDepth === depth ? arguments.length : idx + value.length;
                value = value.apply(this, _slice(arguments, idx, endIdx));
                currentDepth += 1;
                idx = endIdx;
            }
            return value;
        });
    });

    /**
     * Builds a list from a seed value. Accepts an iterator function, which returns
     * either false to stop iteration or an array of length 2 containing the value
     * to add to the resulting list and the seed to be used in the next call to the
     * iterator function.
     *
     * The iterator function receives one argument: *(seed)*.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (a -> [b]) -> * -> [b]
     * @param {Function} fn The iterator function. receives one argument, `seed`, and returns
     *        either false to quit iteration or an array of length two to proceed. The element
     *        at index 0 of this array will be added to the resulting array, and the element
     *        at index 1 will be passed to the next call to `fn`.
     * @param {*} seed The seed value.
     * @return {Array} The final list.
     * @example
     *
     *      var f = n => n > 50 ? false : [-n, n + 10];
     *      R.unfold(f, 10); //=> [-10, -20, -30, -40, -50]
     */
    var unfold = _curry2(function unfold(fn, seed) {
        var pair = fn(seed);
        var result = [];
        while (pair && pair.length) {
            result[result.length] = pair[0];
            pair = fn(pair[1]);
        }
        return result;
    });

    /**
     * Returns a new list containing only one copy of each element in the original
     * list, based upon the value returned by applying the supplied predicate to
     * two list elements. Prefers the first item if two items compare equal based
     * on the predicate.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category List
     * @sig (a, a -> Boolean) -> [a] -> [a]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list The array to consider.
     * @return {Array} The list of unique items.
     * @example
     *
     *      var strEq = R.eqBy(String);
     *      R.uniqWith(strEq)([1, '1', 2, 1]); //=> [1, 2]
     *      R.uniqWith(strEq)([{}, {}]);       //=> [{}]
     *      R.uniqWith(strEq)([1, '1', 1]);    //=> [1]
     *      R.uniqWith(strEq)(['1', 1, 1]);    //=> ['1']
     */
    var uniqWith = _curry2(function uniqWith(pred, list) {
        var idx = 0;
        var len = list.length;
        var result = [];
        var item;
        while (idx < len) {
            item = list[idx];
            if (!_containsWith(pred, item, result)) {
                result[result.length] = item;
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Tests the final argument by passing it to the given predicate function. If
     * the predicate is not satisfied, the function will return the result of
     * calling the `whenFalseFn` function with the same argument. If the predicate
     * is satisfied, the argument is returned as is.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Logic
     * @sig (a -> Boolean) -> (a -> a) -> a -> a
     * @param {Function} pred        A predicate function
     * @param {Function} whenFalseFn A function to invoke when the `pred` evaluates
     *                               to a falsy value.
     * @param {*}        x           An object to test with the `pred` function and
     *                               pass to `whenFalseFn` if necessary.
     * @return {*} Either `x` or the result of applying `x` to `whenFalseFn`.
     * @see R.ifElse, R.when
     * @example
     *
     *      // coerceArray :: (a|[a]) -> [a]
     *      var coerceArray = R.unless(R.isArrayLike, R.of);
     *      coerceArray([1, 2, 3]); //=> [1, 2, 3]
     *      coerceArray(1);         //=> [1]
     */
    var unless = _curry3(function unless(pred, whenFalseFn, x) {
        return pred(x) ? x : whenFalseFn(x);
    });

    /**
     * Takes a predicate, a transformation function, and an initial value,
     * and returns a value of the same type as the initial value.
     * It does so by applying the transformation until the predicate is satisfied,
     * at which point it returns the satisfactory value.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Logic
     * @sig (a -> Boolean) -> (a -> a) -> a -> a
     * @param {Function} pred A predicate function
     * @param {Function} fn The iterator function
     * @param {*} init Initial value
     * @return {*} Final value that satisfies predicate
     * @example
     *
     *      R.until(R.gt(R.__, 100), R.multiply(2))(1) // => 128
     */
    var until = _curry3(function until(pred, fn, init) {
        var val = init;
        while (!pred(val)) {
            val = fn(val);
        }
        return val;
    });

    /**
     * Returns a new copy of the array with the element at the provided index
     * replaced with the given value.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig Number -> a -> [a] -> [a]
     * @param {Number} idx The index to update.
     * @param {*} x The value to exist at the given index of the returned array.
     * @param {Array|Arguments} list The source array-like object to be updated.
     * @return {Array} A copy of `list` with the value at index `idx` replaced with `x`.
     * @see R.adjust
     * @example
     *
     *      R.update(1, 11, [0, 1, 2]);     //=> [0, 11, 2]
     *      R.update(1)(11)([0, 1, 2]);     //=> [0, 11, 2]
     */
    var update = _curry3(function update(idx, x, list) {
        return adjust(always(x), idx, list);
    });

    /**
     * Accepts a function `fn` and a list of transformer functions and returns a
     * new curried function. When the new function is invoked, it calls the
     * function `fn` with parameters consisting of the result of calling each
     * supplied handler on successive arguments to the new function.
     *
     * If more arguments are passed to the returned function than transformer
     * functions, those arguments are passed directly to `fn` as additional
     * parameters. If you expect additional arguments that don't need to be
     * transformed, although you can ignore them, it's best to pass an identity
     * function so that the new function reports the correct arity.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (x1 -> x2 -> ... -> z) -> [(a -> x1), (b -> x2), ...] -> (a -> b -> ... -> z)
     * @param {Function} fn The function to wrap.
     * @param {Array} transformers A list of transformer functions
     * @return {Function} The wrapped function.
     * @example
     *
     *      R.useWith(Math.pow, [R.identity, R.identity])(3, 4); //=> 81
     *      R.useWith(Math.pow, [R.identity, R.identity])(3)(4); //=> 81
     *      R.useWith(Math.pow, [R.dec, R.inc])(3, 4); //=> 32
     *      R.useWith(Math.pow, [R.dec, R.inc])(3)(4); //=> 32
     */
    var useWith = _curry2(function useWith(fn, transformers) {
        return curryN(transformers.length, function () {
            var args = [];
            var idx = 0;
            while (idx < transformers.length) {
                args.push(transformers[idx].call(this, arguments[idx]));
                idx += 1;
            }
            return fn.apply(this, args.concat(_slice(arguments, transformers.length)));
        });
    });

    /**
     * Returns a list of all the enumerable own properties of the supplied object.
     * Note that the order of the output array is not guaranteed across different
     * JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {k: v} -> [v]
     * @param {Object} obj The object to extract values from
     * @return {Array} An array of the values of the object's own properties.
     * @example
     *
     *      R.values({a: 1, b: 2, c: 3}); //=> [1, 2, 3]
     */
    var values = _curry1(function values(obj) {
        var props = keys(obj);
        var len = props.length;
        var vals = [];
        var idx = 0;
        while (idx < len) {
            vals[idx] = obj[props[idx]];
            idx += 1;
        }
        return vals;
    });

    /**
     * Returns a list of all the properties, including prototype properties, of the
     * supplied object.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Object
     * @sig {k: v} -> [v]
     * @param {Object} obj The object to extract values from
     * @return {Array} An array of the values of the object's own and prototype properties.
     * @example
     *
     *      var F = function() { this.x = 'X'; };
     *      F.prototype.y = 'Y';
     *      var f = new F();
     *      R.valuesIn(f); //=> ['X', 'Y']
     */
    var valuesIn = _curry1(function valuesIn(obj) {
        var prop;
        var vs = [];
        for (prop in obj) {
            vs[vs.length] = obj[prop];
        }
        return vs;
    });

    /**
     * Returns a "view" of the given data structure, determined by the given lens.
     * The lens's focus determines which portion of the data structure is visible.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Lens s a -> s -> a
     * @param {Lens} lens
     * @param {*} x
     * @return {*}
     * @see R.prop, R.lensIndex, R.lensProp
     * @example
     *
     *      var xLens = R.lensProp('x');
     *
     *      R.view(xLens, {x: 1, y: 2});  //=> 1
     *      R.view(xLens, {x: 4, y: 2});  //=> 4
     */
    // `Const` is a functor that effectively ignores the function given to `map`.
    // Using `Const` effectively ignores the setter function of the `lens`,
    // leaving the value returned by the getter function unmodified.
    var view = function () {
        // `Const` is a functor that effectively ignores the function given to `map`.
        var Const = function (x) {
            return {
                value: x,
                map: function () {
                    return this;
                }
            };
        };
        return _curry2(function view(lens, x) {
            // Using `Const` effectively ignores the setter function of the `lens`,
            // leaving the value returned by the getter function unmodified.
            return lens(Const)(x).value;
        });
    }();

    /**
     * Tests the final argument by passing it to the given predicate function. If
     * the predicate is satisfied, the function will return the result of calling
     * the `whenTrueFn` function with the same argument. If the predicate is not
     * satisfied, the argument is returned as is.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Logic
     * @sig (a -> Boolean) -> (a -> a) -> a -> a
     * @param {Function} pred       A predicate function
     * @param {Function} whenTrueFn A function to invoke when the `condition`
     *                              evaluates to a truthy value.
     * @param {*}        x          An object to test with the `pred` function and
     *                              pass to `whenTrueFn` if necessary.
     * @return {*} Either `x` or the result of applying `x` to `whenTrueFn`.
     * @see R.ifElse, R.unless
     * @example
     *
     *      // truncate :: String -> String
     *      var truncate = R.when(
     *        R.propSatisfies(R.gt(R.__, 10), 'length'),
     *        R.pipe(R.take(10), R.append(''), R.join(''))
     *      );
     *      truncate('12345');         //=> '12345'
     *      truncate('0123456789ABC'); //=> '0123456789'
     */
    var when = _curry3(function when(pred, whenTrueFn, x) {
        return pred(x) ? whenTrueFn(x) : x;
    });

    /**
     * Takes a spec object and a test object; returns true if the test satisfies
     * the spec. Each of the spec's own properties must be a predicate function.
     * Each predicate is applied to the value of the corresponding property of the
     * test object. `where` returns true if all the predicates return true, false
     * otherwise.
     *
     * `where` is well suited to declaratively expressing constraints for other
     * functions such as `filter` and `find`.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category Object
     * @sig {String: (* -> Boolean)} -> {String: *} -> Boolean
     * @param {Object} spec
     * @param {Object} testObj
     * @return {Boolean}
     * @example
     *
     *      // pred :: Object -> Boolean
     *      var pred = R.where({
     *        a: R.equals('foo'),
     *        b: R.complement(R.equals('bar')),
     *        x: R.gt(_, 10),
     *        y: R.lt(_, 20)
     *      });
     *
     *      pred({a: 'foo', b: 'xxx', x: 11, y: 19}); //=> true
     *      pred({a: 'xxx', b: 'xxx', x: 11, y: 19}); //=> false
     *      pred({a: 'foo', b: 'bar', x: 11, y: 19}); //=> false
     *      pred({a: 'foo', b: 'xxx', x: 10, y: 19}); //=> false
     *      pred({a: 'foo', b: 'xxx', x: 11, y: 20}); //=> false
     */
    var where = _curry2(function where(spec, testObj) {
        for (var prop in spec) {
            if (_has(prop, spec) && !spec[prop](testObj[prop])) {
                return false;
            }
        }
        return true;
    });

    /**
     * Wrap a function inside another to allow you to make adjustments to the
     * parameters, or do other processing either before the internal function is
     * called or with its results.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a... -> b) -> ((a... -> b) -> a... -> c) -> (a... -> c)
     * @param {Function} fn The function to wrap.
     * @param {Function} wrapper The wrapper function.
     * @return {Function} The wrapped function.
     * @example
     *
     *      var greet = name => 'Hello ' + name;
     *
     *      var shoutedGreet = R.wrap(greet, (gr, name) => gr(name).toUpperCase());
     *
     *      shoutedGreet("Kathy"); //=> "HELLO KATHY"
     *
     *      var shortenedGreet = R.wrap(greet, function(gr, name) {
     *        return gr(name.substring(0, 3));
     *      });
     *      shortenedGreet("Robert"); //=> "Hello Rob"
     */
    var wrap = _curry2(function wrap(fn, wrapper) {
        return curryN(fn.length, function () {
            return wrapper.apply(this, _concat([fn], arguments));
        });
    });

    /**
     * Creates a new list out of the two supplied by creating each possible pair
     * from the lists.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [b] -> [[a,b]]
     * @param {Array} as The first list.
     * @param {Array} bs The second list.
     * @return {Array} The list made by combining each possible pair from
     *         `as` and `bs` into pairs (`[a, b]`).
     * @example
     *
     *      R.xprod([1, 2], ['a', 'b']); //=> [[1, 'a'], [1, 'b'], [2, 'a'], [2, 'b']]
     */
    // = xprodWith(prepend); (takes about 3 times as long...)
    var xprod = _curry2(function xprod(a, b) {
        // = xprodWith(prepend); (takes about 3 times as long...)
        var idx = 0;
        var ilen = a.length;
        var j;
        var jlen = b.length;
        var result = [];
        while (idx < ilen) {
            j = 0;
            while (j < jlen) {
                result[result.length] = [
                    a[idx],
                    b[j]
                ];
                j += 1;
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Creates a new list out of the two supplied by pairing up equally-positioned
     * items from both lists. The returned list is truncated to the length of the
     * shorter of the two input lists.
     * Note: `zip` is equivalent to `zipWith(function(a, b) { return [a, b] })`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [b] -> [[a,b]]
     * @param {Array} list1 The first array to consider.
     * @param {Array} list2 The second array to consider.
     * @return {Array} The list made by pairing up same-indexed elements of `list1` and `list2`.
     * @example
     *
     *      R.zip([1, 2, 3], ['a', 'b', 'c']); //=> [[1, 'a'], [2, 'b'], [3, 'c']]
     */
    var zip = _curry2(function zip(a, b) {
        var rv = [];
        var idx = 0;
        var len = Math.min(a.length, b.length);
        while (idx < len) {
            rv[idx] = [
                a[idx],
                b[idx]
            ];
            idx += 1;
        }
        return rv;
    });

    /**
     * Creates a new object out of a list of keys and a list of values.
     * Key/value pairing is truncated to the length of the shorter of the two lists.
     * Note: `zipObj` is equivalent to `pipe(zipWith(pair), fromPairs)`.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig [String] -> [*] -> {String: *}
     * @param {Array} keys The array that will be properties on the output object.
     * @param {Array} values The list of values on the output object.
     * @return {Object} The object made by pairing up same-indexed elements of `keys` and `values`.
     * @example
     *
     *      R.zipObj(['a', 'b', 'c'], [1, 2, 3]); //=> {a: 1, b: 2, c: 3}
     */
    var zipObj = _curry2(function zipObj(keys, values) {
        var idx = 0;
        var len = Math.min(keys.length, values.length);
        var out = {};
        while (idx < len) {
            out[keys[idx]] = values[idx];
            idx += 1;
        }
        return out;
    });

    /**
     * Creates a new list out of the two supplied by applying the function to each
     * equally-positioned pair in the lists. The returned list is truncated to the
     * length of the shorter of the two input lists.
     *
     * @function
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a,b -> c) -> [a] -> [b] -> [c]
     * @param {Function} fn The function used to combine the two elements into one value.
     * @param {Array} list1 The first array to consider.
     * @param {Array} list2 The second array to consider.
     * @return {Array} The list made by combining same-indexed elements of `list1` and `list2`
     *         using `fn`.
     * @example
     *
     *      var f = (x, y) => {
     *        // ...
     *      };
     *      R.zipWith(f, [1, 2, 3], ['a', 'b', 'c']);
     *      //=> [f(1, 'a'), f(2, 'b'), f(3, 'c')]
     */
    var zipWith = _curry3(function zipWith(fn, a, b) {
        var rv = [];
        var idx = 0;
        var len = Math.min(a.length, b.length);
        while (idx < len) {
            rv[idx] = fn(a[idx], b[idx]);
            idx += 1;
        }
        return rv;
    });

    /**
     * A function that always returns `false`. Any passed in parameters are ignored.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig * -> Boolean
     * @param {*}
     * @return {Boolean}
     * @see R.always, R.T
     * @example
     *
     *      R.F(); //=> false
     */
    var F = always(false);

    /**
     * A function that always returns `true`. Any passed in parameters are ignored.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig * -> Boolean
     * @param {*}
     * @return {Boolean}
     * @see R.always, R.F
     * @example
     *
     *      R.T(); //=> true
     */
    var T = always(true);

    /**
     * Copies an object.
     *
     * @private
     * @param {*} value The value to be copied
     * @param {Array} refFrom Array containing the source references
     * @param {Array} refTo Array containing the copied source references
     * @param {Boolean} deep Whether or not to perform deep cloning.
     * @return {*} The copied value.
     */
    var _clone = function _clone(value, refFrom, refTo, deep) {
        var copy = function copy(copiedValue) {
            var len = refFrom.length;
            var idx = 0;
            while (idx < len) {
                if (value === refFrom[idx]) {
                    return refTo[idx];
                }
                idx += 1;
            }
            refFrom[idx + 1] = value;
            refTo[idx + 1] = copiedValue;
            for (var key in value) {
                copiedValue[key] = deep ? _clone(value[key], refFrom, refTo, true) : value[key];
            }
            return copiedValue;
        };
        switch (type(value)) {
        case 'Object':
            return copy({});
        case 'Array':
            return copy([]);
        case 'Date':
            return new Date(value.valueOf());
        case 'RegExp':
            return _cloneRegExp(value);
        default:
            return value;
        }
    };

    var _createPartialApplicator = function _createPartialApplicator(concat) {
        return _curry2(function (fn, args) {
            return _arity(Math.max(0, fn.length - args.length), function () {
                return fn.apply(this, concat(args, arguments));
            });
        });
    };

    var _dropLast = function dropLast(n, xs) {
        return take(n < xs.length ? xs.length - n : 0, xs);
    };

    // Values of other types are only equal if identical.
    var _equals = function _equals(a, b, stackA, stackB) {
        if (identical(a, b)) {
            return true;
        }
        if (type(a) !== type(b)) {
            return false;
        }
        if (a == null || b == null) {
            return false;
        }
        if (typeof a.equals === 'function' || typeof b.equals === 'function') {
            return typeof a.equals === 'function' && a.equals(b) && typeof b.equals === 'function' && b.equals(a);
        }
        switch (type(a)) {
        case 'Arguments':
        case 'Array':
        case 'Object':
            if (typeof a.constructor === 'function' && _functionName(a.constructor) === 'Promise') {
                return a === b;
            }
            break;
        case 'Boolean':
        case 'Number':
        case 'String':
            if (!(typeof a === typeof b && identical(a.valueOf(), b.valueOf()))) {
                return false;
            }
            break;
        case 'Date':
            if (!identical(a.valueOf(), b.valueOf())) {
                return false;
            }
            break;
        case 'Error':
            return a.name === b.name && a.message === b.message;
        case 'RegExp':
            if (!(a.source === b.source && a.global === b.global && a.ignoreCase === b.ignoreCase && a.multiline === b.multiline && a.sticky === b.sticky && a.unicode === b.unicode)) {
                return false;
            }
            break;
        case 'Map':
        case 'Set':
            if (!_equals(_arrayFromIterator(a.entries()), _arrayFromIterator(b.entries()), stackA, stackB)) {
                return false;
            }
            break;
        case 'Int8Array':
        case 'Uint8Array':
        case 'Uint8ClampedArray':
        case 'Int16Array':
        case 'Uint16Array':
        case 'Int32Array':
        case 'Uint32Array':
        case 'Float32Array':
        case 'Float64Array':
            break;
        case 'ArrayBuffer':
            break;
        default:
            // Values of other types are only equal if identical.
            return false;
        }
        var keysA = keys(a);
        if (keysA.length !== keys(b).length) {
            return false;
        }
        var idx = stackA.length - 1;
        while (idx >= 0) {
            if (stackA[idx] === a) {
                return stackB[idx] === b;
            }
            idx -= 1;
        }
        stackA.push(a);
        stackB.push(b);
        idx = keysA.length - 1;
        while (idx >= 0) {
            var key = keysA[idx];
            if (!(_has(key, b) && _equals(b[key], a[key], stackA, stackB))) {
                return false;
            }
            idx -= 1;
        }
        stackA.pop();
        stackB.pop();
        return true;
    };

    /**
     * `_makeFlat` is a helper function that returns a one-level or fully recursive
     * function based on the flag passed in.
     *
     * @private
     */
    var _makeFlat = function _makeFlat(recursive) {
        return function flatt(list) {
            var value, jlen, j;
            var result = [];
            var idx = 0;
            var ilen = list.length;
            while (idx < ilen) {
                if (isArrayLike(list[idx])) {
                    value = recursive ? flatt(list[idx]) : list[idx];
                    j = 0;
                    jlen = value.length;
                    while (j < jlen) {
                        result[result.length] = value[j];
                        j += 1;
                    }
                } else {
                    result[result.length] = list[idx];
                }
                idx += 1;
            }
            return result;
        };
    };

    var _reduce = function () {
        function _arrayReduce(xf, acc, list) {
            var idx = 0;
            var len = list.length;
            while (idx < len) {
                acc = xf['@@transducer/step'](acc, list[idx]);
                if (acc && acc['@@transducer/reduced']) {
                    acc = acc['@@transducer/value'];
                    break;
                }
                idx += 1;
            }
            return xf['@@transducer/result'](acc);
        }
        function _iterableReduce(xf, acc, iter) {
            var step = iter.next();
            while (!step.done) {
                acc = xf['@@transducer/step'](acc, step.value);
                if (acc && acc['@@transducer/reduced']) {
                    acc = acc['@@transducer/value'];
                    break;
                }
                step = iter.next();
            }
            return xf['@@transducer/result'](acc);
        }
        function _methodReduce(xf, acc, obj) {
            return xf['@@transducer/result'](obj.reduce(bind(xf['@@transducer/step'], xf), acc));
        }
        var symIterator = typeof Symbol !== 'undefined' ? Symbol.iterator : '@@iterator';
        return function _reduce(fn, acc, list) {
            if (typeof fn === 'function') {
                fn = _xwrap(fn);
            }
            if (isArrayLike(list)) {
                return _arrayReduce(fn, acc, list);
            }
            if (typeof list.reduce === 'function') {
                return _methodReduce(fn, acc, list);
            }
            if (list[symIterator] != null) {
                return _iterableReduce(fn, acc, list[symIterator]());
            }
            if (typeof list.next === 'function') {
                return _iterableReduce(fn, acc, list);
            }
            throw new TypeError('reduce: list must be array or iterable');
        };
    }();

    var _stepCat = function () {
        var _stepCatArray = {
            '@@transducer/init': Array,
            '@@transducer/step': function (xs, x) {
                xs.push(x);
                return xs;
            },
            '@@transducer/result': _identity
        };
        var _stepCatString = {
            '@@transducer/init': String,
            '@@transducer/step': function (a, b) {
                return a + b;
            },
            '@@transducer/result': _identity
        };
        var _stepCatObject = {
            '@@transducer/init': Object,
            '@@transducer/step': function (result, input) {
                return _assign(result, isArrayLike(input) ? objOf(input[0], input[1]) : input);
            },
            '@@transducer/result': _identity
        };
        return function _stepCat(obj) {
            if (_isTransformer(obj)) {
                return obj;
            }
            if (isArrayLike(obj)) {
                return _stepCatArray;
            }
            if (typeof obj === 'string') {
                return _stepCatString;
            }
            if (typeof obj === 'object') {
                return _stepCatObject;
            }
            throw new Error('Cannot create transformer for ' + obj);
        };
    }();

    var _xdropLastWhile = function () {
        function XDropLastWhile(fn, xf) {
            this.f = fn;
            this.retained = [];
            this.xf = xf;
        }
        XDropLastWhile.prototype['@@transducer/init'] = _xfBase.init;
        XDropLastWhile.prototype['@@transducer/result'] = function (result) {
            this.retained = null;
            return this.xf['@@transducer/result'](result);
        };
        XDropLastWhile.prototype['@@transducer/step'] = function (result, input) {
            return this.f(input) ? this.retain(result, input) : this.flush(result, input);
        };
        XDropLastWhile.prototype.flush = function (result, input) {
            result = _reduce(this.xf['@@transducer/step'], result, this.retained);
            this.retained = [];
            return this.xf['@@transducer/step'](result, input);
        };
        XDropLastWhile.prototype.retain = function (result, input) {
            this.retained.push(input);
            return result;
        };
        return _curry2(function _xdropLastWhile(fn, xf) {
            return new XDropLastWhile(fn, xf);
        });
    }();

    var _xgroupBy = function () {
        function XGroupBy(f, xf) {
            this.xf = xf;
            this.f = f;
            this.inputs = {};
        }
        XGroupBy.prototype['@@transducer/init'] = _xfBase.init;
        XGroupBy.prototype['@@transducer/result'] = function (result) {
            var key;
            for (key in this.inputs) {
                if (_has(key, this.inputs)) {
                    result = this.xf['@@transducer/step'](result, this.inputs[key]);
                    if (result['@@transducer/reduced']) {
                        result = result['@@transducer/value'];
                        break;
                    }
                }
            }
            this.inputs = null;
            return this.xf['@@transducer/result'](result);
        };
        XGroupBy.prototype['@@transducer/step'] = function (result, input) {
            var key = this.f(input);
            this.inputs[key] = this.inputs[key] || [
                key,
                []
            ];
            this.inputs[key][1] = append(input, this.inputs[key][1]);
            return result;
        };
        return _curry2(function _xgroupBy(f, xf) {
            return new XGroupBy(f, xf);
        });
    }();

    /**
     * Creates a new list iteration function from an existing one by adding two new
     * parameters to its callback function: the current index, and the entire list.
     *
     * This would turn, for instance, Ramda's simple `map` function into one that
     * more closely resembles `Array.prototype.map`. Note that this will only work
     * for functions in which the iteration callback function is the first
     * parameter, and where the list is the last parameter. (This latter might be
     * unimportant if the list parameter is not used.)
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category Function
     * @category List
     * @sig ((a ... -> b) ... -> [a] -> *) -> (a ..., Int, [a] -> b) ... -> [a] -> *)
     * @param {Function} fn A list iteration function that does not pass index or list to its callback
     * @return {Function} An altered list iteration function that passes (item, index, list) to its callback
     * @example
     *
     *      var mapIndexed = R.addIndex(R.map);
     *      mapIndexed((val, idx) => idx + '-' + val, ['f', 'o', 'o', 'b', 'a', 'r']);
     *      //=> ['0-f', '1-o', '2-o', '3-b', '4-a', '5-r']
     */
    var addIndex = _curry1(function addIndex(fn) {
        return curryN(fn.length, function () {
            var idx = 0;
            var origFn = arguments[0];
            var list = arguments[arguments.length - 1];
            var args = _slice(arguments);
            args[0] = function () {
                var result = origFn.apply(this, _concat(arguments, [
                    idx,
                    list
                ]));
                idx += 1;
                return result;
            };
            return fn.apply(this, args);
        });
    });

    /**
     * Wraps a function of any arity (including nullary) in a function that accepts
     * exactly 2 parameters. Any extraneous parameters will not be passed to the
     * supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Function
     * @sig (* -> c) -> (a, b -> c)
     * @param {Function} fn The function to wrap.
     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of
     *         arity 2.
     * @example
     *
     *      var takesThreeArgs = function(a, b, c) {
     *        return [a, b, c];
     *      };
     *      takesThreeArgs.length; //=> 3
     *      takesThreeArgs(1, 2, 3); //=> [1, 2, 3]
     *
     *      var takesTwoArgs = R.binary(takesThreeArgs);
     *      takesTwoArgs.length; //=> 2
     *      // Only 2 arguments are passed to the wrapped function
     *      takesTwoArgs(1, 2, 3); //=> [1, 2, undefined]
     */
    var binary = _curry1(function binary(fn) {
        return nAry(2, fn);
    });

    /**
     * Creates a deep copy of the value which may contain (nested) `Array`s and
     * `Object`s, `Number`s, `String`s, `Boolean`s and `Date`s. `Function`s are not
     * copied, but assigned by their reference.
     *
     * Dispatches to a `clone` method if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {*} -> {*}
     * @param {*} value The object or array to clone
     * @return {*} A new object or array.
     * @example
     *
     *      var objects = [{}, {}, {}];
     *      var objectsClone = R.clone(objects);
     *      objects[0] === objectsClone[0]; //=> false
     */
    var clone = _curry1(function clone(value) {
        return value != null && typeof value.clone === 'function' ? value.clone() : _clone(value, [], [], true);
    });

    /**
     * Returns a curried equivalent of the provided function. The curried function
     * has two unusual capabilities. First, its arguments needn't be provided one
     * at a time. If `f` is a ternary function and `g` is `R.curry(f)`, the
     * following are equivalent:
     *
     *   - `g(1)(2)(3)`
     *   - `g(1)(2, 3)`
     *   - `g(1, 2)(3)`
     *   - `g(1, 2, 3)`
     *
     * Secondly, the special placeholder value `R.__` may be used to specify
     * "gaps", allowing partial application of any combination of arguments,
     * regardless of their positions. If `g` is as above and `_` is `R.__`, the
     * following are equivalent:
     *
     *   - `g(1, 2, 3)`
     *   - `g(_, 2, 3)(1)`
     *   - `g(_, _, 3)(1)(2)`
     *   - `g(_, _, 3)(1, 2)`
     *   - `g(_, 2)(1)(3)`
     *   - `g(_, 2)(1, 3)`
     *   - `g(_, 2)(_, 3)(1)`
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (* -> a) -> (* -> a)
     * @param {Function} fn The function to curry.
     * @return {Function} A new, curried function.
     * @see R.curryN
     * @example
     *
     *      var addFourNumbers = (a, b, c, d) => a + b + c + d;
     *
     *      var curriedAddFourNumbers = R.curry(addFourNumbers);
     *      var f = curriedAddFourNumbers(1, 2);
     *      var g = f(3);
     *      g(4); //=> 10
     */
    var curry = _curry1(function curry(fn) {
        return curryN(fn.length, fn);
    });

    /**
     * Returns all but the first `n` elements of the given list, string, or
     * transducer/transformer (or object with a `drop` method).
     *
     * Dispatches to the `drop` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n
     * @param {*} list
     * @return {*}
     * @see R.take, R.transduce
     * @example
     *
     *      R.drop(1, ['foo', 'bar', 'baz']); //=> ['bar', 'baz']
     *      R.drop(2, ['foo', 'bar', 'baz']); //=> ['baz']
     *      R.drop(3, ['foo', 'bar', 'baz']); //=> []
     *      R.drop(4, ['foo', 'bar', 'baz']); //=> []
     *      R.drop(3, 'ramda');               //=> 'da'
     */
    var drop = _curry2(_dispatchable('drop', _xdrop, function drop(n, xs) {
        return slice(Math.max(0, n), Infinity, xs);
    }));

    /**
     * Returns a list containing all but the last `n` elements of the given `list`.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n The number of elements of `xs` to skip.
     * @param {Array} xs The collection to consider.
     * @return {Array}
     * @see R.takeLast
     * @example
     *
     *      R.dropLast(1, ['foo', 'bar', 'baz']); //=> ['foo', 'bar']
     *      R.dropLast(2, ['foo', 'bar', 'baz']); //=> ['foo']
     *      R.dropLast(3, ['foo', 'bar', 'baz']); //=> []
     *      R.dropLast(4, ['foo', 'bar', 'baz']); //=> []
     *      R.dropLast(3, 'ramda');               //=> 'ra'
     */
    var dropLast = _curry2(_dispatchable('dropLast', _xdropLast, _dropLast));

    /**
     * Returns a new list containing all but last the`n` elements of a given list,
     * passing each value from the right to the supplied predicate function,
     * skipping elements while the predicate function returns `true`. The predicate
     * function is passed one argument: (value)*.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.takeLastWhile, R.addIndex
     * @example
     *
     *      var lteThree = x => x <= 3;
     *
     *      R.dropLastWhile(lteThree, [1, 2, 3, 4, 3, 2, 1]); //=> [1, 2, 3, 4]
     */
    var dropLastWhile = _curry2(_dispatchable('dropLastWhile', _xdropLastWhile, _dropLastWhile));

    /**
     * Returns `true` if its arguments are equivalent, `false` otherwise. Handles
     * cyclical data structures.
     *
     * Dispatches symmetrically to the `equals` methods of both arguments, if
     * present.
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category Relation
     * @sig a -> b -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @example
     *
     *      R.equals(1, 1); //=> true
     *      R.equals(1, '1'); //=> false
     *      R.equals([1, 2, 3], [1, 2, 3]); //=> true
     *
     *      var a = {}; a.v = a;
     *      var b = {}; b.v = b;
     *      R.equals(a, b); //=> true
     */
    var equals = _curry2(function equals(a, b) {
        return _equals(a, b, [], []);
    });

    /**
     * Takes a predicate and a "filterable", and returns a new filterable of the
     * same type containing the members of the given filterable which satisfy the
     * given predicate.
     *
     * Dispatches to the `filter` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Filterable f => (a -> Boolean) -> f a -> f a
     * @param {Function} pred
     * @param {Array} filterable
     * @return {Array}
     * @see R.reject, R.transduce, R.addIndex
     * @example
     *
     *      var isEven = n => n % 2 === 0;
     *
     *      R.filter(isEven, [1, 2, 3, 4]); //=> [2, 4]
     *
     *      R.filter(isEven, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}
     */
    // else
    var filter = _curry2(_dispatchable('filter', _xfilter, function (pred, filterable) {
        return _isObject(filterable) ? _reduce(function (acc, key) {
            if (pred(filterable[key])) {
                acc[key] = filterable[key];
            }
            return acc;
        }, {}, keys(filterable)) : // else
        _filter(pred, filterable);
    }));

    /**
     * Returns a new list by pulling every item out of it (and all its sub-arrays)
     * and putting them in a new array, depth-first.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [b]
     * @param {Array} list The array to consider.
     * @return {Array} The flattened list.
     * @see R.unnest
     * @example
     *
     *      R.flatten([1, 2, [3, 4], 5, [6, [7, 8, [9, [10, 11], 12]]]]);
     *      //=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
     */
    var flatten = _curry1(_makeFlat(true));

    /**
     * Returns a new function much like the supplied one, except that the first two
     * arguments' order is reversed.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a -> b -> c -> ... -> z) -> (b -> a -> c -> ... -> z)
     * @param {Function} fn The function to invoke with its first two parameters reversed.
     * @return {*} The result of invoking `fn` with its first two parameters' order reversed.
     * @example
     *
     *      var mergeThree = (a, b, c) => [].concat(a, b, c);
     *
     *      mergeThree(1, 2, 3); //=> [1, 2, 3]
     *
     *      R.flip(mergeThree)(1, 2, 3); //=> [2, 1, 3]
     */
    var flip = _curry1(function flip(fn) {
        return curry(function (a, b) {
            var args = _slice(arguments);
            args[0] = b;
            args[1] = a;
            return fn.apply(this, args);
        });
    });

    /**
     * Returns the first element of the given list or string. In some libraries
     * this function is named `first`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> a | Undefined
     * @sig String -> String
     * @param {Array|String} list
     * @return {*}
     * @see R.tail, R.init, R.last
     * @example
     *
     *      R.head(['fi', 'fo', 'fum']); //=> 'fi'
     *      R.head([]); //=> undefined
     *
     *      R.head('abc'); //=> 'a'
     *      R.head(''); //=> ''
     */
    var head = nth(0);

    /**
     * Returns all but the last element of the given list or string.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category List
     * @sig [a] -> [a]
     * @sig String -> String
     * @param {*} list
     * @return {*}
     * @see R.last, R.head, R.tail
     * @example
     *
     *      R.init([1, 2, 3]);  //=> [1, 2]
     *      R.init([1, 2]);     //=> [1]
     *      R.init([1]);        //=> []
     *      R.init([]);         //=> []
     *
     *      R.init('abc');  //=> 'ab'
     *      R.init('ab');   //=> 'a'
     *      R.init('a');    //=> ''
     *      R.init('');     //=> ''
     */
    var init = slice(0, -1);

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of those
     * elements common to both lists. Duplication is determined according to the
     * value returned by applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]
     * @param {Function} pred A predicate function that determines whether
     *        the two supplied elements are equal.
     * @param {Array} list1 One list of items to compare
     * @param {Array} list2 A second list of items to compare
     * @return {Array} A new list containing those elements common to both lists.
     * @see R.intersection
     * @example
     *
     *      var buffaloSpringfield = [
     *        {id: 824, name: 'Richie Furay'},
     *        {id: 956, name: 'Dewey Martin'},
     *        {id: 313, name: 'Bruce Palmer'},
     *        {id: 456, name: 'Stephen Stills'},
     *        {id: 177, name: 'Neil Young'}
     *      ];
     *      var csny = [
     *        {id: 204, name: 'David Crosby'},
     *        {id: 456, name: 'Stephen Stills'},
     *        {id: 539, name: 'Graham Nash'},
     *        {id: 177, name: 'Neil Young'}
     *      ];
     *
     *      R.intersectionWith(R.eqBy(R.prop('id')), buffaloSpringfield, csny);
     *      //=> [{id: 456, name: 'Stephen Stills'}, {id: 177, name: 'Neil Young'}]
     */
    var intersectionWith = _curry3(function intersectionWith(pred, list1, list2) {
        var lookupList, filteredList;
        if (list1.length > list2.length) {
            lookupList = list1;
            filteredList = list2;
        } else {
            lookupList = list2;
            filteredList = list1;
        }
        var results = [];
        var idx = 0;
        while (idx < filteredList.length) {
            if (_containsWith(pred, filteredList[idx], lookupList)) {
                results[results.length] = filteredList[idx];
            }
            idx += 1;
        }
        return uniqWith(pred, results);
    });

    /**
     * Transforms the items of the list with the transducer and appends the
     * transformed items to the accumulator using an appropriate iterator function
     * based on the accumulator type.
     *
     * The accumulator can be an array, string, object or a transformer. Iterated
     * items will be appended to arrays and concatenated to strings. Objects will
     * be merged directly or 2-item arrays will be merged as key, value pairs.
     *
     * The accumulator can also be a transformer object that provides a 2-arity
     * reducing iterator function, step, 0-arity initial value function, init, and
     * 1-arity result extraction function result. The step function is used as the
     * iterator function in reduce. The result function is used to convert the
     * final accumulator into the return type and in most cases is R.identity. The
     * init function is used to provide the initial accumulator.
     *
     * The iteration is performed with R.reduce after initializing the transducer.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig a -> (b -> b) -> [c] -> a
     * @param {*} acc The initial accumulator value.
     * @param {Function} xf The transducer function. Receives a transformer and returns a transformer.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @example
     *
     *      var numbers = [1, 2, 3, 4];
     *      var transducer = R.compose(R.map(R.add(1)), R.take(2));
     *
     *      R.into([], transducer, numbers); //=> [2, 3]
     *
     *      var intoArray = R.into([]);
     *      intoArray(transducer, numbers); //=> [2, 3]
     */
    var into = _curry3(function into(acc, xf, list) {
        return _isTransformer(acc) ? _reduce(xf(acc), acc['@@transducer/init'](), list) : _reduce(xf(_stepCat(acc)), _clone(acc, [], [], false), list);
    });

    /**
     * Same as R.invertObj, however this accounts for objects with duplicate values
     * by putting the values into an array.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig {s: x} -> {x: [ s, ... ]}
     * @param {Object} obj The object or array to invert
     * @return {Object} out A new object with keys
     * in an array.
     * @example
     *
     *      var raceResultsByFirstName = {
     *        first: 'alice',
     *        second: 'jake',
     *        third: 'alice',
     *      };
     *      R.invert(raceResultsByFirstName);
     *      //=> { 'alice': ['first', 'third'], 'jake':['second'] }
     */
    var invert = _curry1(function invert(obj) {
        var props = keys(obj);
        var len = props.length;
        var idx = 0;
        var out = {};
        while (idx < len) {
            var key = props[idx];
            var val = obj[key];
            var list = _has(val, out) ? out[val] : out[val] = [];
            list[list.length] = key;
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a new object with the keys of the given object as values, and the
     * values of the given object, which are coerced to strings, as keys. Note
     * that the last key found is preferred when handling the same value.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig {s: x} -> {x: s}
     * @param {Object} obj The object or array to invert
     * @return {Object} out A new object
     * @example
     *
     *      var raceResults = {
     *        first: 'alice',
     *        second: 'jake'
     *      };
     *      R.invertObj(raceResults);
     *      //=> { 'alice': 'first', 'jake':'second' }
     *
     *      // Alternatively:
     *      var raceResults = ['alice', 'jake'];
     *      R.invertObj(raceResults);
     *      //=> { 'alice': '0', 'jake':'1' }
     */
    var invertObj = _curry1(function invertObj(obj) {
        var props = keys(obj);
        var len = props.length;
        var idx = 0;
        var out = {};
        while (idx < len) {
            var key = props[idx];
            out[obj[key]] = key;
            idx += 1;
        }
        return out;
    });

    /**
     * Returns `true` if the given value is its type's empty value; `false`
     * otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig a -> Boolean
     * @param {*} x
     * @return {Boolean}
     * @see R.empty
     * @example
     *
     *      R.isEmpty([1, 2, 3]);   //=> false
     *      R.isEmpty([]);          //=> true
     *      R.isEmpty('');          //=> true
     *      R.isEmpty(null);        //=> false
     *      R.isEmpty({});          //=> true
     *      R.isEmpty({length: 0}); //=> false
     */
    var isEmpty = _curry1(function isEmpty(x) {
        return x != null && equals(x, empty(x));
    });

    /**
     * Returns the last element of the given list or string.
     *
     * @func
     * @memberOf R
     * @since v0.1.4
     * @category List
     * @sig [a] -> a | Undefined
     * @sig String -> String
     * @param {*} list
     * @return {*}
     * @see R.init, R.head, R.tail
     * @example
     *
     *      R.last(['fi', 'fo', 'fum']); //=> 'fum'
     *      R.last([]); //=> undefined
     *
     *      R.last('abc'); //=> 'c'
     *      R.last(''); //=> ''
     */
    var last = nth(-1);

    /**
     * Returns the position of the last occurrence of an item in an array, or -1 if
     * the item is not included in the array. `R.equals` is used to determine
     * equality.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> Number
     * @param {*} target The item to find.
     * @param {Array} xs The array to search in.
     * @return {Number} the index of the target, or -1 if the target is not found.
     * @see R.indexOf
     * @example
     *
     *      R.lastIndexOf(3, [-1,3,3,0,1,2,3,4]); //=> 6
     *      R.lastIndexOf(10, [1,2,3,4]); //=> -1
     */
    var lastIndexOf = _curry2(function lastIndexOf(target, xs) {
        if (typeof xs.lastIndexOf === 'function' && !_isArray(xs)) {
            return xs.lastIndexOf(target);
        } else {
            var idx = xs.length - 1;
            while (idx >= 0) {
                if (equals(xs[idx], target)) {
                    return idx;
                }
                idx -= 1;
            }
            return -1;
        }
    });

    /**
     * Takes a function and
     * a [functor](https://github.com/fantasyland/fantasy-land#functor),
     * applies the function to each of the functor's values, and returns
     * a functor of the same shape.
     *
     * Ramda provides suitable `map` implementations for `Array` and `Object`,
     * so this function may be applied to `[1, 2, 3]` or `{x: 1, y: 2, z: 3}`.
     *
     * Dispatches to the `map` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * Also treats functions as functors and will compose them together.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Functor f => (a -> b) -> f a -> f b
     * @param {Function} fn The function to be called on every element of the input `list`.
     * @param {Array} list The list to be iterated over.
     * @return {Array} The new list.
     * @see R.transduce, R.addIndex
     * @example
     *
     *      var double = x => x * 2;
     *
     *      R.map(double, [1, 2, 3]); //=> [2, 4, 6]
     *
     *      R.map(double, {x: 1, y: 2, z: 3}); //=> {x: 2, y: 4, z: 6}
     */
    var map = _curry2(_dispatchable('map', _xmap, function map(fn, functor) {
        switch (Object.prototype.toString.call(functor)) {
        case '[object Function]':
            return curryN(functor.length, function () {
                return fn.call(this, functor.apply(this, arguments));
            });
        case '[object Object]':
            return _reduce(function (acc, key) {
                acc[key] = fn(functor[key]);
                return acc;
            }, {}, keys(functor));
        default:
            return _map(fn, functor);
        }
    }));

    /**
     * An Object-specific version of `map`. The function is applied to three
     * arguments: *(value, key, obj)*. If only the value is significant, use
     * `map` instead.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig ((*, String, Object) -> *) -> Object -> Object
     * @param {Function} fn
     * @param {Object} obj
     * @return {Object}
     * @see R.map
     * @example
     *
     *      var values = { x: 1, y: 2, z: 3 };
     *      var prependKeyAndDouble = (num, key, obj) => key + (num * 2);
     *
     *      R.mapObjIndexed(prependKeyAndDouble, values); //=> { x: 'x2', y: 'y4', z: 'z6' }
     */
    var mapObjIndexed = _curry2(function mapObjIndexed(fn, obj) {
        return _reduce(function (acc, key) {
            acc[key] = fn(obj[key], key, obj);
            return acc;
        }, {}, keys(obj));
    });

    /**
     * Creates a new object with the own properties of the two provided objects. If
     * a key exists in both objects, the provided function is applied to the values
     * associated with the key in each object, with the result being used as the
     * value associated with the key in the returned object. The key will be
     * excluded from the returned object if the resulting value is `undefined`.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Object
     * @sig (a -> a -> a) -> {a} -> {a} -> {a}
     * @param {Function} fn
     * @param {Object} l
     * @param {Object} r
     * @return {Object}
     * @see R.merge, R.mergeWithKey
     * @example
     *
     *      R.mergeWith(R.concat,
     *                  { a: true, values: [10, 20] },
     *                  { b: true, values: [15, 35] });
     *      //=> { a: true, b: true, values: [10, 20, 15, 35] }
     */
    var mergeWith = _curry3(function mergeWith(fn, l, r) {
        return mergeWithKey(function (_, _l, _r) {
            return fn(_l, _r);
        }, l, r);
    });

    /**
     * Takes a function `f` and a list of arguments, and returns a function `g`.
     * When applied, `g` returns the result of applying `f` to the arguments
     * provided initially followed by the arguments provided to `g`.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((a, b, c, ..., n) -> x) -> [a, b, c, ...] -> ((d, e, f, ..., n) -> x)
     * @param {Function} f
     * @param {Array} args
     * @return {Function}
     * @see R.partialRight
     * @example
     *
     *      var multiply = (a, b) => a * b;
     *      var double = R.partial(multiply, [2]);
     *      double(2); //=> 4
     *
     *      var greet = (salutation, title, firstName, lastName) =>
     *        salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';
     *
     *      var sayHello = R.partial(greet, ['Hello']);
     *      var sayHelloToMs = R.partial(sayHello, ['Ms.']);
     *      sayHelloToMs('Jane', 'Jones'); //=> 'Hello, Ms. Jane Jones!'
     */
    var partial = _createPartialApplicator(_concat);

    /**
     * Takes a function `f` and a list of arguments, and returns a function `g`.
     * When applied, `g` returns the result of applying `f` to the arguments
     * provided to `g` followed by the arguments provided initially.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((a, b, c, ..., n) -> x) -> [d, e, f, ..., n] -> ((a, b, c, ...) -> x)
     * @param {Function} f
     * @param {Array} args
     * @return {Function}
     * @see R.partial
     * @example
     *
     *      var greet = (salutation, title, firstName, lastName) =>
     *        salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';
     *
     *      var greetMsJaneJones = R.partialRight(greet, ['Ms.', 'Jane', 'Jones']);
     *
     *      greetMsJaneJones('Hello'); //=> 'Hello, Ms. Jane Jones!'
     */
    var partialRight = _createPartialApplicator(flip(_concat));

    /**
     * Determines whether a nested path on an object has a specific value, in
     * `R.equals` terms. Most likely used to filter a list.
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Relation
     * @sig [String] -> * -> {String: *} -> Boolean
     * @param {Array} path The path of the nested property to use
     * @param {*} val The value to compare the nested property with
     * @param {Object} obj The object to check the nested property in
     * @return {Boolean} `true` if the value equals the nested object property,
     *         `false` otherwise.
     * @example
     *
     *      var user1 = { address: { zipCode: 90210 } };
     *      var user2 = { address: { zipCode: 55555 } };
     *      var user3 = { name: 'Bob' };
     *      var users = [ user1, user2, user3 ];
     *      var isFamous = R.pathEq(['address', 'zipCode'], 90210);
     *      R.filter(isFamous, users); //=> [ user1 ]
     */
    var pathEq = _curry3(function pathEq(_path, val, obj) {
        return equals(path(_path, obj), val);
    });

    /**
     * Returns a new list by plucking the same named property off all objects in
     * the list supplied.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig k -> [{k: v}] -> [v]
     * @param {Number|String} key The key name to pluck off of each object.
     * @param {Array} list The array to consider.
     * @return {Array} The list of values for the given key.
     * @see R.props
     * @example
     *
     *      R.pluck('a')([{a: 1}, {a: 2}]); //=> [1, 2]
     *      R.pluck(0)([[1, 2], [3, 4]]);   //=> [1, 3]
     */
    var pluck = _curry2(function pluck(p, list) {
        return map(prop(p), list);
    });

    /**
     * Reasonable analog to SQL `select` statement.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @category Relation
     * @sig [k] -> [{k: v}] -> [{k: v}]
     * @param {Array} props The property names to project
     * @param {Array} objs The objects to query
     * @return {Array} An array of objects with just the `props` properties.
     * @example
     *
     *      var abby = {name: 'Abby', age: 7, hair: 'blond', grade: 2};
     *      var fred = {name: 'Fred', age: 12, hair: 'brown', grade: 7};
     *      var kids = [abby, fred];
     *      R.project(['name', 'grade'], kids); //=> [{name: 'Abby', grade: 2}, {name: 'Fred', grade: 7}]
     */
    // passing `identity` gives correct arity
    var project = useWith(_map, [
        pickAll,
        identity
    ]);

    /**
     * Returns `true` if the specified object property is equal, in `R.equals`
     * terms, to the given value; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig String -> a -> Object -> Boolean
     * @param {String} name
     * @param {*} val
     * @param {*} obj
     * @return {Boolean}
     * @see R.equals, R.propSatisfies
     * @example
     *
     *      var abby = {name: 'Abby', age: 7, hair: 'blond'};
     *      var fred = {name: 'Fred', age: 12, hair: 'brown'};
     *      var rusty = {name: 'Rusty', age: 10, hair: 'brown'};
     *      var alois = {name: 'Alois', age: 15, disposition: 'surly'};
     *      var kids = [abby, fred, rusty, alois];
     *      var hasBrownHair = R.propEq('hair', 'brown');
     *      R.filter(hasBrownHair, kids); //=> [fred, rusty]
     */
    var propEq = _curry3(function propEq(name, val, obj) {
        return propSatisfies(equals(val), name, obj);
    });

    /**
     * Returns `true` if the specified object property is of the given type;
     * `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Type
     * @sig Type -> String -> Object -> Boolean
     * @param {Function} type
     * @param {String} name
     * @param {*} obj
     * @return {Boolean}
     * @see R.is, R.propSatisfies
     * @example
     *
     *      R.propIs(Number, 'x', {x: 1, y: 2});  //=> true
     *      R.propIs(Number, 'x', {x: 'foo'});    //=> false
     *      R.propIs(Number, 'x', {});            //=> false
     */
    var propIs = _curry3(function propIs(type, name, obj) {
        return propSatisfies(is(type), name, obj);
    });

    /**
     * Returns a single item by iterating through the list, successively calling
     * the iterator function and passing it an accumulator value and the current
     * value from the array, and then passing the result to the next call.
     *
     * The iterator function receives two values: *(acc, value)*. It may use
     * `R.reduced` to shortcut the iteration.
     *
     * Note: `R.reduce` does not skip deleted or unassigned indices (sparse
     * arrays), unlike the native `Array.prototype.reduce` method. For more details
     * on this behavior, see:
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description
     *
     * Dispatches to the `reduce` method of the third argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig ((a, b) -> a) -> a -> [b] -> a
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.reduced, R.addIndex
     * @example
     *
     *      var numbers = [1, 2, 3];
     *      var add = (a, b) => a + b;
     *
     *      R.reduce(add, 10, numbers); //=> 16
     */
    var reduce = _curry3(_reduce);

    /**
     * Groups the elements of the list according to the result of calling
     * the String-returning function `keyFn` on each element and reduces the elements
     * of each group to a single value via the reducer function `valueFn`.
     *
     * This function is basically a more general `groupBy` function.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category List
     * @sig ((a, b) -> a) -> a -> (b -> String) -> [b] -> {String: a}
     * @param {Function} valueFn The function that reduces the elements of each group to a single
     *        value. Receives two values, accumulator for a particular group and the current element.
     * @param {*} acc The (initial) accumulator value for each group.
     * @param {Function} keyFn The function that maps the list's element into a key.
     * @param {Array} list The array to group.
     * @return {Object} An object with the output of `keyFn` for keys, mapped to the output of
     *         `valueFn` for elements which produced that key when passed to `keyFn`.
     * @see R.groupBy, R.reduce
     * @example
     *
     *      var reduceToNamesBy = R.reduceBy((acc, student) => acc.concat(student.name), []);
     *      var namesByGrade = reduceToNamesBy(function(student) {
     *        var score = student.score;
     *        return score < 65 ? 'F' :
     *               score < 70 ? 'D' :
     *               score < 80 ? 'C' :
     *               score < 90 ? 'B' : 'A';
     *      });
     *      var students = [{name: 'Lucy', score: 92},
     *                      {name: 'Drew', score: 85},
     *                      // ...
     *                      {name: 'Bart', score: 62}];
     *      namesByGrade(students);
     *      // {
     *      //   'A': ['Lucy'],
     *      //   'B': ['Drew']
     *      //   // ...,
     *      //   'F': ['Bart']
     *      // }
     */
    var reduceBy = _curryN(4, [], function reduceBy(valueFn, valueAcc, keyFn, list) {
        return _reduce(function (acc, elt) {
            var key = keyFn(elt);
            acc[key] = valueFn(_has(key, acc) ? acc[key] : valueAcc, elt);
            return acc;
        }, {}, list);
    });

    /**
     * The complement of `filter`.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Filterable f => (a -> Boolean) -> f a -> f a
     * @param {Function} pred
     * @param {Array} filterable
     * @return {Array}
     * @see R.filter, R.transduce, R.addIndex
     * @example
     *
     *      var isOdd = (n) => n % 2 === 1;
     *
     *      R.reject(isOdd, [1, 2, 3, 4]); //=> [2, 4]
     *
     *      R.reject(isOdd, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}
     */
    var reject = _curry2(function reject(pred, filterable) {
        return filter(_complement(pred), filterable);
    });

    /**
     * Returns a fixed list of size `n` containing a specified identical value.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig a -> n -> [a]
     * @param {*} value The value to repeat.
     * @param {Number} n The desired size of the output list.
     * @return {Array} A new array containing `n` `value`s.
     * @example
     *
     *      R.repeat('hi', 5); //=> ['hi', 'hi', 'hi', 'hi', 'hi']
     *
     *      var obj = {};
     *      var repeatedObjs = R.repeat(obj, 5); //=> [{}, {}, {}, {}, {}]
     *      repeatedObjs[0] === repeatedObjs[1]; //=> true
     */
    var repeat = _curry2(function repeat(value, n) {
        return times(always(value), n);
    });

    /**
     * Adds together all the elements of a list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list An array of numbers
     * @return {Number} The sum of all the numbers in the list.
     * @see R.reduce
     * @example
     *
     *      R.sum([2,4,6,8,100,1]); //=> 121
     */
    var sum = reduce(add, 0);

    /**
     * Returns a new list containing the last `n` elements of the given list.
     * If `n > list.length`, returns a list of `list.length` elements.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n The number of elements to return.
     * @param {Array} xs The collection to consider.
     * @return {Array}
     * @see R.dropLast
     * @example
     *
     *      R.takeLast(1, ['foo', 'bar', 'baz']); //=> ['baz']
     *      R.takeLast(2, ['foo', 'bar', 'baz']); //=> ['bar', 'baz']
     *      R.takeLast(3, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.takeLast(4, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.takeLast(3, 'ramda');               //=> 'mda'
     */
    var takeLast = _curry2(function takeLast(n, xs) {
        return drop(n >= 0 ? xs.length - n : 0, xs);
    });

    /**
     * Initializes a transducer using supplied iterator function. Returns a single
     * item by iterating through the list, successively calling the transformed
     * iterator function and passing it an accumulator value and the current value
     * from the array, and then passing the result to the next call.
     *
     * The iterator function receives two values: *(acc, value)*. It will be
     * wrapped as a transformer to initialize the transducer. A transformer can be
     * passed directly in place of an iterator function. In both cases, iteration
     * may be stopped early with the `R.reduced` function.
     *
     * A transducer is a function that accepts a transformer and returns a
     * transformer and can be composed directly.
     *
     * A transformer is an an object that provides a 2-arity reducing iterator
     * function, step, 0-arity initial value function, init, and 1-arity result
     * extraction function, result. The step function is used as the iterator
     * function in reduce. The result function is used to convert the final
     * accumulator into the return type and in most cases is R.identity. The init
     * function can be used to provide an initial accumulator, but is ignored by
     * transduce.
     *
     * The iteration is performed with R.reduce after initializing the transducer.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig (c -> c) -> (a,b -> a) -> a -> [b] -> a
     * @param {Function} xf The transducer function. Receives a transformer and returns a transformer.
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array. Wrapped as transformer, if necessary, and used to
     *        initialize the transducer
     * @param {*} acc The initial accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.reduce, R.reduced, R.into
     * @example
     *
     *      var numbers = [1, 2, 3, 4];
     *      var transducer = R.compose(R.map(R.add(1)), R.take(2));
     *
     *      R.transduce(transducer, R.flip(R.append), [], numbers); //=> [2, 3]
     */
    var transduce = curryN(4, function transduce(xf, fn, acc, list) {
        return _reduce(xf(typeof fn === 'function' ? _xwrap(fn) : fn), acc, list);
    });

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of the elements
     * of each list. Duplication is determined according to the value returned by
     * applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The first and second lists concatenated, with
     *         duplicates removed.
     * @see R.union
     * @example
     *
     *      var l1 = [{a: 1}, {a: 2}];
     *      var l2 = [{a: 1}, {a: 4}];
     *      R.unionWith(R.eqBy(R.prop('a')), l1, l2); //=> [{a: 1}, {a: 2}, {a: 4}]
     */
    var unionWith = _curry3(function unionWith(pred, list1, list2) {
        return uniqWith(pred, _concat(list1, list2));
    });

    /**
     * Takes a spec object and a test object; returns true if the test satisfies
     * the spec, false otherwise. An object satisfies the spec if, for each of the
     * spec's own properties, accessing that property of the object gives the same
     * value (in `R.equals` terms) as accessing that property of the spec.
     *
     * `whereEq` is a specialization of [`where`](#where).
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Object
     * @sig {String: *} -> {String: *} -> Boolean
     * @param {Object} spec
     * @param {Object} testObj
     * @return {Boolean}
     * @see R.where
     * @example
     *
     *      // pred :: Object -> Boolean
     *      var pred = R.whereEq({a: 1, b: 2});
     *
     *      pred({a: 1});              //=> false
     *      pred({a: 1, b: 2});        //=> true
     *      pred({a: 1, b: 2, c: 3});  //=> true
     *      pred({a: 1, b: 1});        //=> false
     */
    var whereEq = _curry2(function whereEq(spec, testObj) {
        return where(map(equals, spec), testObj);
    });

    var _flatCat = function () {
        var preservingReduced = function (xf) {
            return {
                '@@transducer/init': _xfBase.init,
                '@@transducer/result': function (result) {
                    return xf['@@transducer/result'](result);
                },
                '@@transducer/step': function (result, input) {
                    var ret = xf['@@transducer/step'](result, input);
                    return ret['@@transducer/reduced'] ? _forceReduced(ret) : ret;
                }
            };
        };
        return function _xcat(xf) {
            var rxf = preservingReduced(xf);
            return {
                '@@transducer/init': _xfBase.init,
                '@@transducer/result': function (result) {
                    return rxf['@@transducer/result'](result);
                },
                '@@transducer/step': function (result, input) {
                    return !isArrayLike(input) ? _reduce(rxf, result, [input]) : _reduce(rxf, result, input);
                }
            };
        };
    }();

    // Array.prototype.indexOf doesn't exist below IE9
    // manually crawl the list to distinguish between +0 and -0
    // NaN
    // non-zero numbers can utilise Set
    // all these types can utilise Set
    // null can utilise Set
    // anything else not covered above, defer to R.equals
    var _indexOf = function _indexOf(list, a, idx) {
        var inf, item;
        // Array.prototype.indexOf doesn't exist below IE9
        if (typeof list.indexOf === 'function') {
            switch (typeof a) {
            case 'number':
                if (a === 0) {
                    // manually crawl the list to distinguish between +0 and -0
                    inf = 1 / a;
                    while (idx < list.length) {
                        item = list[idx];
                        if (item === 0 && 1 / item === inf) {
                            return idx;
                        }
                        idx += 1;
                    }
                    return -1;
                } else if (a !== a) {
                    // NaN
                    while (idx < list.length) {
                        item = list[idx];
                        if (typeof item === 'number' && item !== item) {
                            return idx;
                        }
                        idx += 1;
                    }
                    return -1;
                }
                // non-zero numbers can utilise Set
                return list.indexOf(a, idx);
            // all these types can utilise Set
            case 'string':
            case 'boolean':
            case 'function':
            case 'undefined':
                return list.indexOf(a, idx);
            case 'object':
                if (a === null) {
                    // null can utilise Set
                    return list.indexOf(a, idx);
                }
            }
        }
        // anything else not covered above, defer to R.equals
        while (idx < list.length) {
            if (equals(list[idx], a)) {
                return idx;
            }
            idx += 1;
        }
        return -1;
    };

    var _xchain = _curry2(function _xchain(f, xf) {
        return map(f, _flatCat(xf));
    });

    /**
     * Takes a list of predicates and returns a predicate that returns true for a
     * given list of arguments if every one of the provided predicates is satisfied
     * by those arguments.
     *
     * The function returned is a curried function whose arity matches that of the
     * highest-arity predicate.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Logic
     * @sig [(*... -> Boolean)] -> (*... -> Boolean)
     * @param {Array} preds
     * @return {Function}
     * @see R.anyPass
     * @example
     *
     *      var isQueen = R.propEq('rank', 'Q');
     *      var isSpade = R.propEq('suit', '');
     *      var isQueenOfSpades = R.allPass([isQueen, isSpade]);
     *
     *      isQueenOfSpades({rank: 'Q', suit: ''}); //=> false
     *      isQueenOfSpades({rank: 'Q', suit: ''}); //=> true
     */
    var allPass = _curry1(function allPass(preds) {
        return curryN(reduce(max, 0, pluck('length', preds)), function () {
            var idx = 0;
            var len = preds.length;
            while (idx < len) {
                if (!preds[idx].apply(this, arguments)) {
                    return false;
                }
                idx += 1;
            }
            return true;
        });
    });

    /**
     * Returns `true` if all elements are unique, in `R.equals` terms, otherwise
     * `false`.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category List
     * @sig [a] -> Boolean
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if all elements are unique, else `false`.
     * @deprecated since v0.20.0
     * @example
     *
     *      R.allUniq(['1', 1]); //=> true
     *      R.allUniq([1, 1]);   //=> false
     *      R.allUniq([[42], [42]]); //=> false
     */
    var allUniq = _curry1(function allUniq(list) {
        var len = list.length;
        var idx = 0;
        while (idx < len) {
            if (_indexOf(list, list[idx], idx + 1) >= 0) {
                return false;
            }
            idx += 1;
        }
        return true;
    });

    /**
     * Takes a list of predicates and returns a predicate that returns true for a
     * given list of arguments if at least one of the provided predicates is
     * satisfied by those arguments.
     *
     * The function returned is a curried function whose arity matches that of the
     * highest-arity predicate.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Logic
     * @sig [(*... -> Boolean)] -> (*... -> Boolean)
     * @param {Array} preds
     * @return {Function}
     * @see R.allPass
     * @example
     *
     *      var gte = R.anyPass([R.gt, R.equals]);
     *
     *      gte(3, 2); //=> true
     *      gte(2, 2); //=> true
     *      gte(2, 3); //=> false
     */
    var anyPass = _curry1(function anyPass(preds) {
        return curryN(reduce(max, 0, pluck('length', preds)), function () {
            var idx = 0;
            var len = preds.length;
            while (idx < len) {
                if (preds[idx].apply(this, arguments)) {
                    return true;
                }
                idx += 1;
            }
            return false;
        });
    });

    /**
     * ap applies a list of functions to a list of values.
     *
     * Dispatches to the `ap` method of the second argument, if present. Also
     * treats functions as applicatives.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Function
     * @sig [f] -> [a] -> [f a]
     * @param {Array} fns An array of functions
     * @param {Array} vs An array of values
     * @return {Array} An array of results of applying each of `fns` to all of `vs` in turn.
     * @example
     *
     *      R.ap([R.multiply(2), R.add(3)], [1,2,3]); //=> [2, 4, 6, 4, 5, 6]
     */
    // else
    var ap = _curry2(function ap(applicative, fn) {
        return typeof applicative.ap === 'function' ? applicative.ap(fn) : typeof applicative === 'function' ? curryN(Math.max(applicative.length, fn.length), function () {
            return applicative.apply(this, arguments)(fn.apply(this, arguments));
        }) : // else
        _reduce(function (acc, f) {
            return _concat(acc, map(f, fn));
        }, [], applicative);
    });

    /**
     * Given a spec object recursively mapping properties to functions, creates a
     * function producing an object of the same structure, by mapping each property
     * to the result of calling its associated function with the supplied arguments.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Function
     * @sig {k: ((a, b, ..., m) -> v)} -> ((a, b, ..., m) -> {k: v})
     * @param {Object} spec an object recursively mapping properties to functions for
     *        producing the values for these properties.
     * @return {Function} A function that returns an object of the same structure
     * as `spec', with each property set to the value returned by calling its
     * associated function with the supplied arguments.
     * @see R.juxt
     * @example
     *
     *      var getMetrics = R.applySpec({
     *                                      sum: R.add,
     *                                      nested: { mul: R.multiply }
     *                                   });
     *      getMetrics(2, 4); // => { sum: 6, nested: { mul: 8 } }
     */
    var applySpec = _curry1(function applySpec(spec) {
        spec = map(function (v) {
            return typeof v == 'function' ? v : applySpec(v);
        }, spec);
        return curryN(reduce(max, 0, pluck('length', values(spec))), function () {
            var args = arguments;
            return map(function (f) {
                return apply(f, args);
            }, spec);
        });
    });

    /**
     * Returns the result of calling its first argument with the remaining
     * arguments. This is occasionally useful as a converging function for
     * `R.converge`: the left branch can produce a function while the right branch
     * produces a value to be passed to that function as an argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig (*... -> a),*... -> a
     * @param {Function} fn The function to apply to the remaining arguments.
     * @param {...*} args Any number of positional arguments.
     * @return {*}
     * @see R.apply
     * @example
     *
     *      var indentN = R.pipe(R.times(R.always(' ')),
     *                           R.join(''),
     *                           R.replace(/^(?!$)/gm));
     *
     *      var format = R.converge(R.call, [
     *                                  R.pipe(R.prop('indent'), indentN),
     *                                  R.prop('value')
     *                              ]);
     *
     *      format({indent: 2, value: 'foo\nbar\nbaz\n'}); //=> '  foo\n  bar\n  baz\n'
     */
    var call = curry(function call(fn) {
        return fn.apply(this, _slice(arguments, 1));
    });

    /**
     * `chain` maps a function over a list and concatenates the results. `chain`
     * is also known as `flatMap` in some libraries
     *
     * Dispatches to the `chain` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig (a -> [b]) -> [a] -> [b]
     * @param {Function} fn
     * @param {Array} list
     * @return {Array}
     * @example
     *
     *      var duplicate = n => [n, n];
     *      R.chain(duplicate, [1, 2, 3]); //=> [1, 1, 2, 2, 3, 3]
     */
    var chain = _curry2(_dispatchable('chain', _xchain, function chain(fn, monad) {
        if (typeof monad === 'function') {
            return function () {
                return monad.call(this, fn.apply(this, arguments)).apply(this, arguments);
            };
        }
        return _makeFlat(false)(map(fn, monad));
    }));

    /**
     * Returns a function, `fn`, which encapsulates if/else-if/else logic.
     * `R.cond` takes a list of [predicate, transform] pairs. All of the arguments
     * to `fn` are applied to each of the predicates in turn until one returns a
     * "truthy" value, at which point `fn` returns the result of applying its
     * arguments to the corresponding transformer. If none of the predicates
     * matches, `fn` returns undefined.
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category Logic
     * @sig [[(*... -> Boolean),(*... -> *)]] -> (*... -> *)
     * @param {Array} pairs
     * @return {Function}
     * @example
     *
     *      var fn = R.cond([
     *        [R.equals(0),   R.always('water freezes at 0C')],
     *        [R.equals(100), R.always('water boils at 100C')],
     *        [R.T,           temp => 'nothing special happens at ' + temp + 'C']
     *      ]);
     *      fn(0); //=> 'water freezes at 0C'
     *      fn(50); //=> 'nothing special happens at 50C'
     *      fn(100); //=> 'water boils at 100C'
     */
    var cond = _curry1(function cond(pairs) {
        var arity = reduce(max, 0, map(function (pair) {
            return pair[0].length;
        }, pairs));
        return _arity(arity, function () {
            var idx = 0;
            while (idx < pairs.length) {
                if (pairs[idx][0].apply(this, arguments)) {
                    return pairs[idx][1].apply(this, arguments);
                }
                idx += 1;
            }
        });
    });

    /**
     * Wraps a constructor function inside a curried function that can be called
     * with the same arguments and returns the same type. The arity of the function
     * returned is specified to allow using variadic constructor functions.
     *
     * @func
     * @memberOf R
     * @since v0.4.0
     * @category Function
     * @sig Number -> (* -> {*}) -> (* -> {*})
     * @param {Number} n The arity of the constructor function.
     * @param {Function} Fn The constructor function to wrap.
     * @return {Function} A wrapped, curried constructor function.
     * @example
     *
     *      // Variadic constructor function
     *      var Widget = () => {
     *        this.children = Array.prototype.slice.call(arguments);
     *        // ...
     *      };
     *      Widget.prototype = {
     *        // ...
     *      };
     *      var allConfigs = [
     *        // ...
     *      ];
     *      R.map(R.constructN(1, Widget), allConfigs); // a list of Widgets
     */
    var constructN = _curry2(function constructN(n, Fn) {
        if (n > 10) {
            throw new Error('Constructor with greater than ten arguments');
        }
        if (n === 0) {
            return function () {
                return new Fn();
            };
        }
        return curry(nAry(n, function ($0, $1, $2, $3, $4, $5, $6, $7, $8, $9) {
            switch (arguments.length) {
            case 1:
                return new Fn($0);
            case 2:
                return new Fn($0, $1);
            case 3:
                return new Fn($0, $1, $2);
            case 4:
                return new Fn($0, $1, $2, $3);
            case 5:
                return new Fn($0, $1, $2, $3, $4);
            case 6:
                return new Fn($0, $1, $2, $3, $4, $5);
            case 7:
                return new Fn($0, $1, $2, $3, $4, $5, $6);
            case 8:
                return new Fn($0, $1, $2, $3, $4, $5, $6, $7);
            case 9:
                return new Fn($0, $1, $2, $3, $4, $5, $6, $7, $8);
            case 10:
                return new Fn($0, $1, $2, $3, $4, $5, $6, $7, $8, $9);
            }
        }));
    });

    /**
     * Accepts a converging function and a list of branching functions and returns
     * a new function. When invoked, this new function is applied to some
     * arguments, each branching function is applied to those same arguments. The
     * results of each branching function are passed as arguments to the converging
     * function to produce the return value.
     *
     * @func
     * @memberOf R
     * @since v0.4.2
     * @category Function
     * @sig (x1 -> x2 -> ... -> z) -> [(a -> b -> ... -> x1), (a -> b -> ... -> x2), ...] -> (a -> b -> ... -> z)
     * @param {Function} after A function. `after` will be invoked with the return values of
     *        `fn1` and `fn2` as its arguments.
     * @param {Array} functions A list of functions.
     * @return {Function} A new function.
     * @example
     *
     *      var add = (a, b) => a + b;
     *      var multiply = (a, b) => a * b;
     *      var subtract = (a, b) => a - b;
     *
     *      // multiply( add(1, 2), subtract(1, 2) );
     *      R.converge(multiply, [add, subtract])(1, 2); //=> -3
     *
     *      var add3 = (a, b, c) => a + b + c;
     *      R.converge(add3, [multiply, add, subtract])(1, 2); //=> 4
     */
    var converge = _curry2(function converge(after, fns) {
        return curryN(reduce(max, 0, pluck('length', fns)), function () {
            var args = arguments;
            var context = this;
            return after.apply(context, _map(function (fn) {
                return fn.apply(context, args);
            }, fns));
        });
    });

    /**
     * Counts the elements of a list according to how many match each value of a
     * key generated by the supplied function. Returns an object mapping the keys
     * produced by `fn` to the number of occurrences in the list. Note that all
     * keys are coerced to strings because of how JavaScript objects work.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> String) -> [a] -> {*}
     * @param {Function} fn The function used to map values to keys.
     * @param {Array} list The list to count elements from.
     * @return {Object} An object mapping keys to number of occurrences in the list.
     * @example
     *
     *      var numbers = [1.0, 1.1, 1.2, 2.0, 3.0, 2.2];
     *      var letters = R.split('', 'abcABCaaaBBc');
     *      R.countBy(Math.floor)(numbers);    //=> {'1': 3, '2': 2, '3': 1}
     *      R.countBy(R.toLower)(letters);   //=> {'a': 5, 'b': 4, 'c': 3}
     */
    var countBy = reduceBy(function (acc, elem) {
        return acc + 1;
    }, 0);

    /**
     * Returns a new list without any consecutively repeating elements. Equality is
     * determined by applying the supplied predicate two consecutive elements. The
     * first element in a series of equal element is the one being preserved.
     *
     * Dispatches to the `dropRepeatsWith` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig (a, a -> Boolean) -> [a] -> [a]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list The array to consider.
     * @return {Array} `list` without repeating elements.
     * @see R.transduce
     * @example
     *
     *      var l = [1, -1, 1, 3, 4, -4, -4, -5, 5, 3, 3];
     *      R.dropRepeatsWith(R.eqBy(Math.abs), l); //=> [1, 3, 4, -5, 3]
     */
    var dropRepeatsWith = _curry2(_dispatchable('dropRepeatsWith', _xdropRepeatsWith, function dropRepeatsWith(pred, list) {
        var result = [];
        var idx = 1;
        var len = list.length;
        if (len !== 0) {
            result[0] = list[0];
            while (idx < len) {
                if (!pred(last(result), list[idx])) {
                    result[result.length] = list[idx];
                }
                idx += 1;
            }
        }
        return result;
    }));

    /**
     * Takes a function and two values in its domain and returns `true` if the
     * values map to the same value in the codomain; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Relation
     * @sig (a -> b) -> a -> a -> Boolean
     * @param {Function} f
     * @param {*} x
     * @param {*} y
     * @return {Boolean}
     * @example
     *
     *      R.eqBy(Math.abs, 5, -5); //=> true
     */
    var eqBy = _curry3(function eqBy(f, x, y) {
        return equals(f(x), f(y));
    });

    /**
     * Reports whether two objects have the same value, in `R.equals` terms, for
     * the specified property. Useful as a curried predicate.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig k -> {k: v} -> {k: v} -> Boolean
     * @param {String} prop The name of the property to compare
     * @param {Object} obj1
     * @param {Object} obj2
     * @return {Boolean}
     *
     * @example
     *
     *      var o1 = { a: 1, b: 2, c: 3, d: 4 };
     *      var o2 = { a: 10, b: 20, c: 3, d: 40 };
     *      R.eqProps('a', o1, o2); //=> false
     *      R.eqProps('c', o1, o2); //=> true
     */
    var eqProps = _curry3(function eqProps(prop, obj1, obj2) {
        return equals(obj1[prop], obj2[prop]);
    });

    /**
     * Splits a list into sub-lists stored in an object, based on the result of
     * calling a String-returning function on each element, and grouping the
     * results according to values returned.
     *
     * Dispatches to the `groupBy` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> String) -> [a] -> {String: [a]}
     * @param {Function} fn Function :: a -> String
     * @param {Array} list The array to group
     * @return {Object} An object with the output of `fn` for keys, mapped to arrays of elements
     *         that produced that key when passed to `fn`.
     * @see R.transduce
     * @example
     *
     *      var byGrade = R.groupBy(function(student) {
     *        var score = student.score;
     *        return score < 65 ? 'F' :
     *               score < 70 ? 'D' :
     *               score < 80 ? 'C' :
     *               score < 90 ? 'B' : 'A';
     *      });
     *      var students = [{name: 'Abby', score: 84},
     *                      {name: 'Eddy', score: 58},
     *                      // ...
     *                      {name: 'Jack', score: 69}];
     *      byGrade(students);
     *      // {
     *      //   'A': [{name: 'Dianne', score: 99}],
     *      //   'B': [{name: 'Abby', score: 84}]
     *      //   // ...,
     *      //   'F': [{name: 'Eddy', score: 58}]
     *      // }
     */
    var groupBy = _curry2(_dispatchable('groupBy', _xgroupBy, reduceBy(function (acc, item) {
        if (acc == null) {
            acc = [];
        }
        acc.push(item);
        return acc;
    }, null)));

    /**
     * Given a function that generates a key, turns a list of objects into an
     * object indexing the objects by the given key. Note that if multiple
     * objects generate the same value for the indexing key only the last value
     * will be included in the generated object.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (a -> String) -> [{k: v}] -> {k: {k: v}}
     * @param {Function} fn Function :: a -> String
     * @param {Array} array The array of objects to index
     * @return {Object} An object indexing each array element by the given property.
     * @example
     *
     *      var list = [{id: 'xyz', title: 'A'}, {id: 'abc', title: 'B'}];
     *      R.indexBy(R.prop('id'), list);
     *      //=> {abc: {id: 'abc', title: 'B'}, xyz: {id: 'xyz', title: 'A'}}
     */
    var indexBy = reduceBy(function (acc, elem) {
        return elem;
    }, null);

    /**
     * Returns the position of the first occurrence of an item in an array, or -1
     * if the item is not included in the array. `R.equals` is used to determine
     * equality.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> Number
     * @param {*} target The item to find.
     * @param {Array} xs The array to search in.
     * @return {Number} the index of the target, or -1 if the target is not found.
     * @see R.lastIndexOf
     * @example
     *
     *      R.indexOf(3, [1,2,3,4]); //=> 2
     *      R.indexOf(10, [1,2,3,4]); //=> -1
     */
    var indexOf = _curry2(function indexOf(target, xs) {
        return typeof xs.indexOf === 'function' && !_isArray(xs) ? xs.indexOf(target) : _indexOf(xs, target, 0);
    });

    /**
     * juxt applies a list of functions to a list of values.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Function
     * @sig [(a, b, ..., m) -> n] -> ((a, b, ..., m) -> [n])
     * @param {Array} fns An array of functions
     * @return {Function} A function that returns a list of values after applying each of the original `fns` to its parameters.
     * @see R.applySpec
     * @example
     *
     *      var range = R.juxt([Math.min, Math.max]);
     *      range(3, 4, 9, -3); //=> [-3, 9]
     */
    var juxt = _curry1(function juxt(fns) {
        return converge(_arrayOf, fns);
    });

    /**
     * Returns a lens for the given getter and setter functions. The getter "gets"
     * the value of the focus; the setter "sets" the value of the focus. The setter
     * should not mutate the data structure.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig (s -> a) -> ((a, s) -> s) -> Lens s a
     * @param {Function} getter
     * @param {Function} setter
     * @return {Lens}
     * @see R.view, R.set, R.over, R.lensIndex, R.lensProp
     * @example
     *
     *      var xLens = R.lens(R.prop('x'), R.assoc('x'));
     *
     *      R.view(xLens, {x: 1, y: 2});            //=> 1
     *      R.set(xLens, 4, {x: 1, y: 2});          //=> {x: 4, y: 2}
     *      R.over(xLens, R.negate, {x: 1, y: 2});  //=> {x: -1, y: 2}
     */
    var lens = _curry2(function lens(getter, setter) {
        return function (toFunctorFn) {
            return function (target) {
                return map(function (focus) {
                    return setter(focus, target);
                }, toFunctorFn(getter(target)));
            };
        };
    });

    /**
     * Returns a lens whose focus is the specified index.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Number -> Lens s a
     * @param {Number} n
     * @return {Lens}
     * @see R.view, R.set, R.over
     * @example
     *
     *      var headLens = R.lensIndex(0);
     *
     *      R.view(headLens, ['a', 'b', 'c']);            //=> 'a'
     *      R.set(headLens, 'x', ['a', 'b', 'c']);        //=> ['x', 'b', 'c']
     *      R.over(headLens, R.toUpper, ['a', 'b', 'c']); //=> ['A', 'b', 'c']
     */
    var lensIndex = _curry1(function lensIndex(n) {
        return lens(nth(n), update(n));
    });

    /**
     * Returns a lens whose focus is the specified path.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig [String] -> Lens s a
     * @param {Array} path The path to use.
     * @return {Lens}
     * @see R.view, R.set, R.over
     * @example
     *
     *      var xyLens = R.lensPath(['x', 'y']);
     *
     *      R.view(xyLens, {x: {y: 2, z: 3}});            //=> 2
     *      R.set(xyLens, 4, {x: {y: 2, z: 3}});          //=> {x: {y: 4, z: 3}}
     *      R.over(xyLens, R.negate, {x: {y: 2, z: 3}});  //=> {x: {y: -2, z: 3}}
     */
    var lensPath = _curry1(function lensPath(p) {
        return lens(path(p), assocPath(p));
    });

    /**
     * Returns a lens whose focus is the specified property.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig String -> Lens s a
     * @param {String} k
     * @return {Lens}
     * @see R.view, R.set, R.over
     * @example
     *
     *      var xLens = R.lensProp('x');
     *
     *      R.view(xLens, {x: 1, y: 2});            //=> 1
     *      R.set(xLens, 4, {x: 1, y: 2});          //=> {x: 4, y: 2}
     *      R.over(xLens, R.negate, {x: 1, y: 2});  //=> {x: -1, y: 2}
     */
    var lensProp = _curry1(function lensProp(k) {
        return lens(prop(k), assoc(k));
    });

    /**
     * "lifts" a function to be the specified arity, so that it may "map over" that
     * many lists, Functions or other objects that satisfy the [FantasyLand Apply spec](https://github.com/fantasyland/fantasy-land#apply).
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Function
     * @sig Number -> (*... -> *) -> ([*]... -> [*])
     * @param {Function} fn The function to lift into higher context
     * @return {Function} The lifted function.
     * @see R.lift, R.ap
     * @example
     *
     *      var madd3 = R.liftN(3, R.curryN(3, (...args) => R.sum(args)));
     *      madd3([1,2,3], [1,2,3], [1]); //=> [3, 4, 5, 4, 5, 6, 5, 6, 7]
     */
    var liftN = _curry2(function liftN(arity, fn) {
        var lifted = curryN(arity, fn);
        return curryN(arity, function () {
            return _reduce(ap, map(lifted, arguments[0]), _slice(arguments, 1));
        });
    });

    /**
     * Returns the mean of the given list of numbers.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list
     * @return {Number}
     * @example
     *
     *      R.mean([2, 7, 9]); //=> 6
     *      R.mean([]); //=> NaN
     */
    var mean = _curry1(function mean(list) {
        return sum(list) / list.length;
    });

    /**
     * Returns the median of the given list of numbers.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list
     * @return {Number}
     * @example
     *
     *      R.median([2, 9, 7]); //=> 7
     *      R.median([7, 2, 10, 9]); //=> 8
     *      R.median([]); //=> NaN
     */
    var median = _curry1(function median(list) {
        var len = list.length;
        if (len === 0) {
            return NaN;
        }
        var width = 2 - len % 2;
        var idx = (len - width) / 2;
        return mean(_slice(list).sort(function (a, b) {
            return a < b ? -1 : a > b ? 1 : 0;
        }).slice(idx, idx + width));
    });

    /**
     * Takes a predicate and a list or other "filterable" object and returns the
     * pair of filterable objects of the same type of elements which do and do not
     * satisfy, the predicate, respectively.
     *
     * @func
     * @memberOf R
     * @since v0.1.4
     * @category List
     * @sig Filterable f => (a -> Boolean) -> f a -> [f a, f a]
     * @param {Function} pred A predicate to determine which side the element belongs to.
     * @param {Array} filterable the list (or other filterable) to partition.
     * @return {Array} An array, containing first the subset of elements that satisfy the
     *         predicate, and second the subset of elements that do not satisfy.
     * @see R.filter, R.reject
     * @example
     *
     *      R.partition(R.contains('s'), ['sss', 'ttt', 'foo', 'bars']);
     *      // => [ [ 'sss', 'bars' ],  [ 'ttt', 'foo' ] ]
     *
     *      R.partition(R.contains('s'), { a: 'sss', b: 'ttt', foo: 'bars' });
     *      // => [ { a: 'sss', foo: 'bars' }, { b: 'ttt' }  ]
     */
    var partition = juxt([
        filter,
        reject
    ]);

    /**
     * Performs left-to-right function composition. The leftmost function may have
     * any arity; the remaining functions must be unary.
     *
     * In some libraries this function is named `sequence`.
     *
     * **Note:** The result of pipe is not automatically curried.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (((a, b, ..., n) -> o), (o -> p), ..., (x -> y), (y -> z)) -> ((a, b, ..., n) -> z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.compose
     * @example
     *
     *      var f = R.pipe(Math.pow, R.negate, R.inc);
     *
     *      f(3, 4); // -(3^4) + 1
     */
    var pipe = function pipe() {
        if (arguments.length === 0) {
            throw new Error('pipe requires at least one argument');
        }
        return _arity(arguments[0].length, reduce(_pipe, arguments[0], tail(arguments)));
    };

    /**
     * Performs left-to-right composition of one or more Promise-returning
     * functions. The leftmost function may have any arity; the remaining functions
     * must be unary.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((a -> Promise b), (b -> Promise c), ..., (y -> Promise z)) -> (a -> Promise z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.composeP
     * @example
     *
     *      //  followersForUser :: String -> Promise [User]
     *      var followersForUser = R.pipeP(db.getUserById, db.getFollowers);
     */
    var pipeP = function pipeP() {
        if (arguments.length === 0) {
            throw new Error('pipeP requires at least one argument');
        }
        return _arity(arguments[0].length, reduce(_pipeP, arguments[0], tail(arguments)));
    };

    /**
     * Multiplies together all the elements of a list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list An array of numbers
     * @return {Number} The product of all the numbers in the list.
     * @see R.reduce
     * @example
     *
     *      R.product([2,4,6,8,100,1]); //=> 38400
     */
    var product = reduce(multiply, 1);

    /**
     * Transforms a [Traversable](https://github.com/fantasyland/fantasy-land#traversable)
     * of [Applicative](https://github.com/fantasyland/fantasy-land#applicative) into an
     * Applicative of Traversable.
     *
     * Dispatches to the `sequence` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (Applicative f, Traversable t) => (a -> f a) -> t (f a) -> f (t a)
     * @param {Function} of
     * @param {*} traversable
     * @return {*}
     * @see R.traverse
     * @example
     *
     *      R.sequence(Maybe.of, [Just(1), Just(2), Just(3)]);   //=> Just([1, 2, 3])
     *      R.sequence(Maybe.of, [Just(1), Just(2), Nothing()]); //=> Nothing()
     *
     *      R.sequence(R.of, Just([1, 2, 3])); //=> [Just(1), Just(2), Just(3)]
     *      R.sequence(R.of, Nothing());       //=> [Nothing()]
     */
    var sequence = _curry2(function sequence(of, traversable) {
        return typeof traversable.sequence === 'function' ? traversable.sequence(of) : reduceRight(function (acc, x) {
            return ap(map(prepend, x), acc);
        }, of([]), traversable);
    });

    /**
     * Maps an [Applicative](https://github.com/fantasyland/fantasy-land#applicative)-returning
     * function over a [Traversable](https://github.com/fantasyland/fantasy-land#traversable),
     * then uses [`sequence`](#sequence) to transform the resulting Traversable of Applicative
     * into an Applicative of Traversable.
     *
     * Dispatches to the `sequence` method of the third argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (Applicative f, Traversable t) => (a -> f a) -> (a -> f b) -> t a -> f (t b)
     * @param {Function} of
     * @param {Function} f
     * @param {*} traversable
     * @return {*}
     * @see R.sequence
     * @example
     *
     *      // Returns `Nothing` if the given divisor is `0`
     *      safeDiv = n => d => d === 0 ? Nothing() : Just(n / d)
     *
     *      R.traverse(Maybe.of, safeDiv(10), [2, 4, 5]); //=> Just([5, 2.5, 2])
     *      R.traverse(Maybe.of, safeDiv(10), [2, 0, 5]); //=> Nothing
     */
    var traverse = _curry3(function traverse(of, f, traversable) {
        return sequence(of, map(f, traversable));
    });

    /**
     * Shorthand for `R.chain(R.identity)`, which removes one level of nesting from
     * any [Chain](https://github.com/fantasyland/fantasy-land#chain).
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig Chain c => c (c a) -> c a
     * @param {*} list
     * @return {*}
     * @see R.flatten, R.chain
     * @example
     *
     *      R.unnest([1, [2], [[3]]]); //=> [1, 2, [3]]
     *      R.unnest([[1, 2], [3, 4], [5, 6]]); //=> [1, 2, 3, 4, 5, 6]
     */
    var unnest = chain(_identity);

    var _contains = function _contains(a, list) {
        return _indexOf(list, a, 0) >= 0;
    };

    //  mapPairs :: (Object, [String]) -> [String]
    var _toString = function _toString(x, seen) {
        var recur = function recur(y) {
            var xs = seen.concat([x]);
            return _contains(y, xs) ? '<Circular>' : _toString(y, xs);
        };
        //  mapPairs :: (Object, [String]) -> [String]
        var mapPairs = function (obj, keys) {
            return _map(function (k) {
                return _quote(k) + ': ' + recur(obj[k]);
            }, keys.slice().sort());
        };
        switch (Object.prototype.toString.call(x)) {
        case '[object Arguments]':
            return '(function() { return arguments; }(' + _map(recur, x).join(', ') + '))';
        case '[object Array]':
            return '[' + _map(recur, x).concat(mapPairs(x, reject(function (k) {
                return /^\d+$/.test(k);
            }, keys(x)))).join(', ') + ']';
        case '[object Boolean]':
            return typeof x === 'object' ? 'new Boolean(' + recur(x.valueOf()) + ')' : x.toString();
        case '[object Date]':
            return 'new Date(' + (isNaN(x.valueOf()) ? recur(NaN) : _quote(_toISOString(x))) + ')';
        case '[object Null]':
            return 'null';
        case '[object Number]':
            return typeof x === 'object' ? 'new Number(' + recur(x.valueOf()) + ')' : 1 / x === -Infinity ? '-0' : x.toString(10);
        case '[object String]':
            return typeof x === 'object' ? 'new String(' + recur(x.valueOf()) + ')' : _quote(x);
        case '[object Undefined]':
            return 'undefined';
        default:
            if (typeof x.toString === 'function') {
                var repr = x.toString();
                if (repr !== '[object Object]') {
                    return repr;
                }
            }
            return '{' + mapPairs(x, keys(x)).join(', ') + '}';
        }
    };

    /**
     * Performs right-to-left function composition. The rightmost function may have
     * any arity; the remaining functions must be unary.
     *
     * **Note:** The result of compose is not automatically curried.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig ((y -> z), (x -> y), ..., (o -> p), ((a, b, ..., n) -> o)) -> ((a, b, ..., n) -> z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.pipe
     * @example
     *
     *      var f = R.compose(R.inc, R.negate, Math.pow);
     *
     *      f(3, 4); // -(3^4) + 1
     */
    var compose = function compose() {
        if (arguments.length === 0) {
            throw new Error('compose requires at least one argument');
        }
        return pipe.apply(this, reverse(arguments));
    };

    /**
     * Returns the right-to-left Kleisli composition of the provided functions,
     * each of which must return a value of a type supported by [`chain`](#chain).
     *
     * `R.composeK(h, g, f)` is equivalent to `R.compose(R.chain(h), R.chain(g), R.chain(f))`.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Function
     * @sig Chain m => ((y -> m z), (x -> m y), ..., (a -> m b)) -> (m a -> m z)
     * @param {...Function}
     * @return {Function}
     * @see R.pipeK
     * @example
     *
     *      //  parseJson :: String -> Maybe *
     *      //  get :: String -> Object -> Maybe *
     *
     *      //  getStateCode :: Maybe String -> Maybe String
     *      var getStateCode = R.composeK(
     *        R.compose(Maybe.of, R.toUpper),
     *        get('state'),
     *        get('address'),
     *        get('user'),
     *        parseJson
     *      );
     *
     *      getStateCode(Maybe.of('{"user":{"address":{"state":"ny"}}}'));
     *      //=> Just('NY')
     *      getStateCode(Maybe.of('[Invalid JSON]'));
     *      //=> Nothing()
     */
    var composeK = function composeK() {
        return compose.apply(this, prepend(identity, map(chain, arguments)));
    };

    /**
     * Performs right-to-left composition of one or more Promise-returning
     * functions. The rightmost function may have any arity; the remaining
     * functions must be unary.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((y -> Promise z), (x -> Promise y), ..., (a -> Promise b)) -> (a -> Promise z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.pipeP
     * @example
     *
     *      //  followersForUser :: String -> Promise [User]
     *      var followersForUser = R.composeP(db.getFollowers, db.getUserById);
     */
    var composeP = function composeP() {
        if (arguments.length === 0) {
            throw new Error('composeP requires at least one argument');
        }
        return pipeP.apply(this, reverse(arguments));
    };

    /**
     * Wraps a constructor function inside a curried function that can be called
     * with the same arguments and returns the same type.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (* -> {*}) -> (* -> {*})
     * @param {Function} Fn The constructor function to wrap.
     * @return {Function} A wrapped, curried constructor function.
     * @example
     *
     *      // Constructor function
     *      var Widget = config => {
     *        // ...
     *      };
     *      Widget.prototype = {
     *        // ...
     *      };
     *      var allConfigs = [
     *        // ...
     *      ];
     *      R.map(R.construct(Widget), allConfigs); // a list of Widgets
     */
    var construct = _curry1(function construct(Fn) {
        return constructN(Fn.length, Fn);
    });

    /**
     * Returns `true` if the specified value is equal, in `R.equals` terms, to at
     * least one element of the given list; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> Boolean
     * @param {Object} a The item to compare against.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the item is in the list, `false` otherwise.
     * @see R.any
     * @example
     *
     *      R.contains(3, [1, 2, 3]); //=> true
     *      R.contains(4, [1, 2, 3]); //=> false
     *      R.contains([42], [[42]]); //=> true
     */
    var contains = _curry2(_contains);

    /**
     * Finds the set (i.e. no duplicates) of all elements in the first list not
     * contained in the second list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` that are not in `list2`.
     * @see R.differenceWith
     * @example
     *
     *      R.difference([1,2,3,4], [7,6,5,4,3]); //=> [1,2]
     *      R.difference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5]
     */
    var difference = _curry2(function difference(first, second) {
        var out = [];
        var idx = 0;
        var firstLen = first.length;
        while (idx < firstLen) {
            if (!_contains(first[idx], second) && !_contains(first[idx], out)) {
                out[out.length] = first[idx];
            }
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a new list without any consecutively repeating elements. `R.equals`
     * is used to determine equality.
     *
     * Dispatches to the `dropRepeats` method of the first argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig [a] -> [a]
     * @param {Array} list The array to consider.
     * @return {Array} `list` without repeating elements.
     * @see R.transduce
     * @example
     *
     *     R.dropRepeats([1, 1, 1, 2, 3, 4, 4, 2, 2]); //=> [1, 2, 3, 4, 2]
     */
    var dropRepeats = _curry1(_dispatchable('dropRepeats', _xdropRepeatsWith(equals), dropRepeatsWith(equals)));

    /**
     * "lifts" a function of arity > 1 so that it may "map over" a list, Function or other
     * object that satisfies the [FantasyLand Apply spec](https://github.com/fantasyland/fantasy-land#apply).
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Function
     * @sig (*... -> *) -> ([*]... -> [*])
     * @param {Function} fn The function to lift into higher context
     * @return {Function} The lifted function.
     * @see R.liftN
     * @example
     *
     *      var madd3 = R.lift(R.curry((a, b, c) => a + b + c));
     *
     *      madd3([1,2,3], [1,2,3], [1]); //=> [3, 4, 5, 4, 5, 6, 5, 6, 7]
     *
     *      var madd5 = R.lift(R.curry((a, b, c, d, e) => a + b + c + d + e));
     *
     *      madd5([1,2], [3], [4, 5], [6], [7, 8]); //=> [21, 22, 22, 23, 22, 23, 23, 24]
     */
    var lift = _curry1(function lift(fn) {
        return liftN(fn.length, fn);
    });

    /**
     * Returns a partial copy of an object omitting the keys specified.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [String] -> {String: *} -> {String: *}
     * @param {Array} names an array of String property names to omit from the new object
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with properties from `names` not on it.
     * @see R.pick
     * @example
     *
     *      R.omit(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, c: 3}
     */
    var omit = _curry2(function omit(names, obj) {
        var result = {};
        for (var prop in obj) {
            if (!_contains(prop, names)) {
                result[prop] = obj[prop];
            }
        }
        return result;
    });

    /**
     * Returns the left-to-right Kleisli composition of the provided functions,
     * each of which must return a value of a type supported by [`chain`](#chain).
     *
     * `R.pipeK(f, g, h)` is equivalent to `R.pipe(R.chain(f), R.chain(g), R.chain(h))`.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Function
     * @sig Chain m => ((a -> m b), (b -> m c), ..., (y -> m z)) -> (m a -> m z)
     * @param {...Function}
     * @return {Function}
     * @see R.composeK
     * @example
     *
     *      //  parseJson :: String -> Maybe *
     *      //  get :: String -> Object -> Maybe *
     *
     *      //  getStateCode :: Maybe String -> Maybe String
     *      var getStateCode = R.pipeK(
     *        parseJson,
     *        get('user'),
     *        get('address'),
     *        get('state'),
     *        R.compose(Maybe.of, R.toUpper)
     *      );
     *
     *      getStateCode(Maybe.of('{"user":{"address":{"state":"ny"}}}'));
     *      //=> Just('NY')
     *      getStateCode(Maybe.of('[Invalid JSON]'));
     *      //=> Nothing()
     */
    var pipeK = function pipeK() {
        return composeK.apply(this, reverse(arguments));
    };

    /**
     * Returns the string representation of the given value. `eval`'ing the output
     * should result in a value equivalent to the input value. Many of the built-in
     * `toString` methods do not satisfy this requirement.
     *
     * If the given value is an `[object Object]` with a `toString` method other
     * than `Object.prototype.toString`, this method is invoked with no arguments
     * to produce the return value. This means user-defined constructor functions
     * can provide a suitable `toString` method. For example:
     *
     *     function Point(x, y) {
     *       this.x = x;
     *       this.y = y;
     *     }
     *
     *     Point.prototype.toString = function() {
     *       return 'new Point(' + this.x + ', ' + this.y + ')';
     *     };
     *
     *     R.toString(new Point(1, 2)); //=> 'new Point(1, 2)'
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category String
     * @sig * -> String
     * @param {*} val
     * @return {String}
     * @example
     *
     *      R.toString(42); //=> '42'
     *      R.toString('abc'); //=> '"abc"'
     *      R.toString([1, 2, 3]); //=> '[1, 2, 3]'
     *      R.toString({foo: 1, bar: 2, baz: 3}); //=> '{"bar": 2, "baz": 3, "foo": 1}'
     *      R.toString(new Date('2001-02-03T04:05:06Z')); //=> 'new Date("2001-02-03T04:05:06.000Z")'
     */
    var toString = _curry1(function toString(val) {
        return _toString(val, []);
    });

    /**
     * Returns a new list without values in the first argument.
     * `R.equals` is used to determine equality.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig [a] -> [a] -> [a]
     * @param {Array} list1 The values to be removed from `list2`.
     * @param {Array} list2 The array to remove values from.
     * @return {Array} The new array without values in `list1`.
     * @see R.transduce
     * @example
     *
     *      R.without([1, 2], [1, 2, 1, 3, 4]); //=> [3, 4]
     */
    var without = _curry2(function (xs, list) {
        return reject(flip(_contains)(xs), list);
    });

    // A simple Set type that honours R.equals semantics
    /* globals Set */
    /**
       * Combines the logic for checking whether an item is a member of the set and
       * for adding a new item to the set.
       *
       * @param item       The item to check or add to the Set instance.
       * @param shouldAdd  If true, the item will be added to the set if it doesn't
       *                   already exist.
       * @param set        The set instance to check or add to.
       * @return {boolean} When shouldAdd is true, this will return true when a new
       *                   item was added otherwise false. When shouldAdd is false,
       *                   this will return true if the item already exists, otherwise
       *                   false.
       */
    // distinguish between +0 and -0
    // these types can all utilise Set
    // set._items['boolean'] holds a two element array
    // representing [ falseExists, trueExists ]
    // compare functions for reference equality
    /* falls through */
    // reduce the search size of heterogeneous sets by creating buckets
    // for each type.
    // scan through all previously applied items
    var _Set = function () {
        function _Set() {
            /* globals Set */
            this._nativeSet = typeof Set === 'function' ? new Set() : null;
            this._items = {};
        }
        _Set.prototype.add = function (item) {
            return hasOrAdd(item, true, this);
        };
        _Set.prototype.has = function (item) {
            return hasOrAdd(item, false, this);
        };
        /**
       * Combines the logic for checking whether an item is a member of the set and
       * for adding a new item to the set.
       *
       * @param item       The item to check or add to the Set instance.
       * @param shouldAdd  If true, the item will be added to the set if it doesn't
       *                   already exist.
       * @param set        The set instance to check or add to.
       * @return {boolean} When shouldAdd is true, this will return true when a new
       *                   item was added otherwise false. When shouldAdd is false,
       *                   this will return true if the item already exists, otherwise
       *                   false.
       */
        function hasOrAdd(item, shouldAdd, set) {
            var type = typeof item;
            var prevSize, newSize;
            switch (type) {
            case 'string':
            case 'number':
                // distinguish between +0 and -0
                if (item === 0 && !set._items['-0'] && 1 / item === -Infinity) {
                    if (shouldAdd) {
                        set._items['-0'] = true;
                    }
                    return shouldAdd;
                }
                // these types can all utilise Set
                if (set._nativeSet !== null) {
                    if (shouldAdd) {
                        prevSize = set._nativeSet.size;
                        set._nativeSet.add(item);
                        newSize = set._nativeSet.size;
                        return newSize > prevSize;
                    } else {
                        return set._nativeSet.has(item);
                    }
                } else {
                    if (!(type in set._items)) {
                        if (shouldAdd) {
                            set._items[type] = {};
                            set._items[type][item] = true;
                        }
                        return shouldAdd;
                    } else if (item in set._items[type]) {
                        return !shouldAdd;
                    } else {
                        if (shouldAdd) {
                            set._items[type][item] = true;
                        }
                        return shouldAdd;
                    }
                }
            case 'boolean':
                // set._items['boolean'] holds a two element array
                // representing [ falseExists, trueExists ]
                if (type in set._items) {
                    var bIdx = item ? 1 : 0;
                    if (set._items[type][bIdx]) {
                        return !shouldAdd;
                    } else {
                        if (shouldAdd) {
                            set._items[type][bIdx] = true;
                        }
                        return shouldAdd;
                    }
                } else {
                    if (shouldAdd) {
                        set._items[type] = item ? [
                            false,
                            true
                        ] : [
                            true,
                            false
                        ];
                    }
                    return shouldAdd;
                }
            case 'function':
                // compare functions for reference equality
                if (set._nativeSet !== null) {
                    if (shouldAdd) {
                        prevSize = set._nativeSet.size;
                        set._nativeSet.add(item);
                        newSize = set._nativeSet.size;
                        return newSize > prevSize;
                    } else {
                        return set._nativeSet.has(item);
                    }
                } else {
                    if (!(type in set._items)) {
                        if (shouldAdd) {
                            set._items[type] = [item];
                        }
                        return shouldAdd;
                    }
                    if (!_contains(item, set._items[type])) {
                        if (shouldAdd) {
                            set._items[type].push(item);
                        }
                        return shouldAdd;
                    }
                }
                return !shouldAdd;
            case 'undefined':
                if (set._items[type]) {
                    return !shouldAdd;
                } else {
                    if (shouldAdd) {
                        set._items[type] = true;
                    }
                    return shouldAdd;
                }
            case 'object':
                if (item === null) {
                    if (!set._items['null']) {
                        if (shouldAdd) {
                            set._items['null'] = true;
                        }
                        return shouldAdd;
                    }
                    return !shouldAdd;
                }
            /* falls through */
            default:
                // reduce the search size of heterogeneous sets by creating buckets
                // for each type.
                type = Object.prototype.toString.call(item);
                if (!(type in set._items)) {
                    if (shouldAdd) {
                        set._items[type] = [item];
                    }
                    return shouldAdd;
                }
                // scan through all previously applied items
                if (!_contains(item, set._items[type])) {
                    if (shouldAdd) {
                        set._items[type].push(item);
                    }
                    return shouldAdd;
                }
                return !shouldAdd;
            }
        }
        return _Set;
    }();

    /**
     * A function wrapping calls to the two functions in an `&&` operation,
     * returning the result of the first function if it is false-y and the result
     * of the second function otherwise. Note that this is short-circuited,
     * meaning that the second function will not be invoked if the first returns a
     * false-y value.
     *
     * In addition to functions, `R.both` also accepts any fantasy-land compatible
     * applicative functor.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category Logic
     * @sig (*... -> Boolean) -> (*... -> Boolean) -> (*... -> Boolean)
     * @param {Function} f a predicate
     * @param {Function} g another predicate
     * @return {Function} a function that applies its arguments to `f` and `g` and `&&`s their outputs together.
     * @see R.and
     * @example
     *
     *      var gt10 = x => x > 10;
     *      var even = x => x % 2 === 0;
     *      var f = R.both(gt10, even);
     *      f(100); //=> true
     *      f(101); //=> false
     */
    var both = _curry2(function both(f, g) {
        return _isFunction(f) ? function _both() {
            return f.apply(this, arguments) && g.apply(this, arguments);
        } : lift(and)(f, g);
    });

    /**
     * Takes a function `f` and returns a function `g` such that:
     *
     *   - applying `g` to zero or more arguments will give __true__ if applying
     *     the same arguments to `f` gives a logical __false__ value; and
     *
     *   - applying `g` to zero or more arguments will give __false__ if applying
     *     the same arguments to `f` gives a logical __true__ value.
     *
     * `R.complement` will work on all other functors as well.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category Logic
     * @sig (*... -> *) -> (*... -> Boolean)
     * @param {Function} f
     * @return {Function}
     * @see R.not
     * @example
     *
     *      var isEven = n => n % 2 === 0;
     *      var isOdd = R.complement(isEven);
     *      isOdd(21); //=> true
     *      isOdd(42); //=> false
     */
    var complement = lift(not);

    /**
     * A function wrapping calls to the two functions in an `||` operation,
     * returning the result of the first function if it is truth-y and the result
     * of the second function otherwise. Note that this is short-circuited,
     * meaning that the second function will not be invoked if the first returns a
     * truth-y value.
     *
     * In addition to functions, `R.either` also accepts any fantasy-land compatible
     * applicative functor.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category Logic
     * @sig (*... -> Boolean) -> (*... -> Boolean) -> (*... -> Boolean)
     * @param {Function} f a predicate
     * @param {Function} g another predicate
     * @return {Function} a function that applies its arguments to `f` and `g` and `||`s their outputs together.
     * @see R.or
     * @example
     *
     *      var gt10 = x => x > 10;
     *      var even = x => x % 2 === 0;
     *      var f = R.either(gt10, even);
     *      f(101); //=> true
     *      f(8); //=> true
     */
    var either = _curry2(function either(f, g) {
        return _isFunction(f) ? function _either() {
            return f.apply(this, arguments) || g.apply(this, arguments);
        } : lift(or)(f, g);
    });

    /**
     * Turns a named method with a specified arity into a function that can be
     * called directly supplied with arguments and a target object.
     *
     * The returned function is curried and accepts `arity + 1` parameters where
     * the final parameter is the target object.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig Number -> String -> (a -> b -> ... -> n -> Object -> *)
     * @param {Number} arity Number of arguments the returned function should take
     *        before the target object.
     * @param {String} method Name of the method to call.
     * @return {Function} A new curried function.
     * @example
     *
     *      var sliceFrom = R.invoker(1, 'slice');
     *      sliceFrom(6, 'abcdefghijklm'); //=> 'ghijklm'
     *      var sliceFrom6 = R.invoker(2, 'slice')(6);
     *      sliceFrom6(8, 'abcdefghijklm'); //=> 'gh'
     */
    var invoker = _curry2(function invoker(arity, method) {
        return curryN(arity + 1, function () {
            var target = arguments[arity];
            if (target != null && is(Function, target[method])) {
                return target[method].apply(target, _slice(arguments, 0, arity));
            }
            throw new TypeError(toString(target) + ' does not have a method named "' + method + '"');
        });
    });

    /**
     * Returns a string made by inserting the `separator` between each element and
     * concatenating all the elements into a single string.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig String -> [a] -> String
     * @param {Number|String} separator The string used to separate the elements.
     * @param {Array} xs The elements to join into a string.
     * @return {String} str The string made by concatenating `xs` with `separator`.
     * @see R.split
     * @example
     *
     *      var spacer = R.join(' ');
     *      spacer(['a', 2, 3.4]);   //=> 'a 2 3.4'
     *      R.join('|', [1, 2, 3]);    //=> '1|2|3'
     */
    var join = invoker(1, 'join');

    /**
     * Creates a new function that, when invoked, caches the result of calling `fn`
     * for a given argument set and returns the result. Subsequent calls to the
     * memoized `fn` with the same argument set will not result in an additional
     * call to `fn`; instead, the cached result for that set of arguments will be
     * returned.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (*... -> a) -> (*... -> a)
     * @param {Function} fn The function to memoize.
     * @return {Function} Memoized version of `fn`.
     * @example
     *
     *      var count = 0;
     *      var factorial = R.memoize(n => {
     *        count += 1;
     *        return R.product(R.range(1, n + 1));
     *      });
     *      factorial(5); //=> 120
     *      factorial(5); //=> 120
     *      factorial(5); //=> 120
     *      count; //=> 1
     */
    var memoize = _curry1(function memoize(fn) {
        var cache = {};
        return _arity(fn.length, function () {
            var key = toString(arguments);
            if (!_has(key, cache)) {
                cache[key] = fn.apply(this, arguments);
            }
            return cache[key];
        });
    });

    /**
     * Splits a string into an array of strings based on the given
     * separator.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category String
     * @sig (String | RegExp) -> String -> [String]
     * @param {String|RegExp} sep The pattern.
     * @param {String} str The string to separate into an array.
     * @return {Array} The array of strings from `str` separated by `str`.
     * @see R.join
     * @example
     *
     *      var pathComponents = R.split('/');
     *      R.tail(pathComponents('/usr/local/bin/node')); //=> ['usr', 'local', 'bin', 'node']
     *
     *      R.split('.', 'a.b.c.xyz.d'); //=> ['a', 'b', 'c', 'xyz', 'd']
     */
    var split = invoker(1, 'split');

    /**
     * Determines whether a given string matches a given regular expression.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category String
     * @sig RegExp -> String -> Boolean
     * @param {RegExp} pattern
     * @param {String} str
     * @return {Boolean}
     * @see R.match
     * @example
     *
     *      R.test(/^x/, 'xyz'); //=> true
     *      R.test(/^y/, 'xyz'); //=> false
     */
    var test = _curry2(function test(pattern, str) {
        if (!_isRegExp(pattern)) {
            throw new TypeError('\u2018test\u2019 requires a value of type RegExp as its first argument; received ' + toString(pattern));
        }
        return _cloneRegExp(pattern).test(str);
    });

    /**
     * The lower case version of a string.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category String
     * @sig String -> String
     * @param {String} str The string to lower case.
     * @return {String} The lower case version of `str`.
     * @see R.toUpper
     * @example
     *
     *      R.toLower('XYZ'); //=> 'xyz'
     */
    var toLower = invoker(0, 'toLowerCase');

    /**
     * The upper case version of a string.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category String
     * @sig String -> String
     * @param {String} str The string to upper case.
     * @return {String} The upper case version of `str`.
     * @see R.toLower
     * @example
     *
     *      R.toUpper('abc'); //=> 'ABC'
     */
    var toUpper = invoker(0, 'toUpperCase');

    /**
     * Returns a new list containing only one copy of each element in the original
     * list, based upon the value returned by applying the supplied function to
     * each list element. Prefers the first item if the supplied function produces
     * the same value on two items. `R.equals` is used for comparison.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig (a -> b) -> [a] -> [a]
     * @param {Function} fn A function used to produce a value to use during comparisons.
     * @param {Array} list The array to consider.
     * @return {Array} The list of unique items.
     * @example
     *
     *      R.uniqBy(Math.abs, [-1, -5, 2, 10, 1, 2]); //=> [-1, -5, 2, 10]
     */
    var uniqBy = _curry2(function uniqBy(fn, list) {
        var set = new _Set();
        var result = [];
        var idx = 0;
        var appliedItem, item;
        while (idx < list.length) {
            item = list[idx];
            appliedItem = fn(item);
            if (set.add(appliedItem)) {
                result.push(item);
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Returns the result of concatenating the given lists or strings.
     *
     * Dispatches to the `concat` method of the first argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a] -> [a]
     * @sig String -> String -> String
     * @param {Array|String} a
     * @param {Array|String} b
     * @return {Array|String}
     *
     * @example
     *
     *      R.concat([], []); //=> []
     *      R.concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]
     *      R.concat('ABC', 'DEF'); // 'ABCDEF'
     */
    var concat = flip(invoker(1, 'concat'));

    /**
     * Finds the set (i.e. no duplicates) of all elements contained in the first or
     * second list, but not both.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` or `list2`, but not both.
     * @see R.symmetricDifferenceWith
     * @example
     *
     *      R.symmetricDifference([1,2,3,4], [7,6,5,4,3]); //=> [1,2,7,6,5]
     *      R.symmetricDifference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5,1,2]
     */
    var symmetricDifference = _curry2(function symmetricDifference(list1, list2) {
        return concat(difference(list1, list2), difference(list2, list1));
    });

    /**
     * Finds the set (i.e. no duplicates) of all elements contained in the first or
     * second list, but not both. Duplication is determined according to the value
     * returned by applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [a] -> [a] -> [a]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` or `list2`, but not both.
     * @see R.symmetricDifference
     * @example
     *
     *      var eqA = R.eqBy(R.prop('a'));
     *      var l1 = [{a: 1}, {a: 2}, {a: 3}, {a: 4}];
     *      var l2 = [{a: 3}, {a: 4}, {a: 5}, {a: 6}];
     *      R.symmetricDifferenceWith(eqA, l1, l2); //=> [{a: 1}, {a: 2}, {a: 5}, {a: 6}]
     */
    var symmetricDifferenceWith = _curry3(function symmetricDifferenceWith(pred, list1, list2) {
        return concat(differenceWith(pred, list1, list2), differenceWith(pred, list2, list1));
    });

    /**
     * Returns a new list containing only one copy of each element in the original
     * list. `R.equals` is used to determine equality.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a]
     * @param {Array} list The array to consider.
     * @return {Array} The list of unique items.
     * @example
     *
     *      R.uniq([1, 1, 2, 1]); //=> [1, 2]
     *      R.uniq([1, '1']);     //=> [1, '1']
     *      R.uniq([[42], [42]]); //=> [[42]]
     */
    var uniq = uniqBy(identity);

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of those
     * elements common to both lists.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The list of elements found in both `list1` and `list2`.
     * @see R.intersectionWith
     * @example
     *
     *      R.intersection([1,2,3,4], [7,6,5,4,3]); //=> [4, 3]
     */
    var intersection = _curry2(function intersection(list1, list2) {
        var lookupList, filteredList;
        if (list1.length > list2.length) {
            lookupList = list1;
            filteredList = list2;
        } else {
            lookupList = list2;
            filteredList = list1;
        }
        return uniq(_filter(flip(_contains)(lookupList), filteredList));
    });

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of the elements
     * of each list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} as The first list.
     * @param {Array} bs The second list.
     * @return {Array} The first and second lists concatenated, with
     *         duplicates removed.
     * @example
     *
     *      R.union([1, 2, 3], [2, 3, 4]); //=> [1, 2, 3, 4]
     */
    var union = _curry2(compose(uniq, _concat));

    var R = {
        F: F,
        T: T,
        __: __,
        add: add,
        addIndex: addIndex,
        adjust: adjust,
        all: all,
        allPass: allPass,
        allUniq: allUniq,
        always: always,
        and: and,
        any: any,
        anyPass: anyPass,
        ap: ap,
        aperture: aperture,
        append: append,
        apply: apply,
        applySpec: applySpec,
        assoc: assoc,
        assocPath: assocPath,
        binary: binary,
        bind: bind,
        both: both,
        call: call,
        chain: chain,
        clamp: clamp,
        clone: clone,
        comparator: comparator,
        complement: complement,
        compose: compose,
        composeK: composeK,
        composeP: composeP,
        concat: concat,
        cond: cond,
        construct: construct,
        constructN: constructN,
        contains: contains,
        converge: converge,
        countBy: countBy,
        curry: curry,
        curryN: curryN,
        dec: dec,
        defaultTo: defaultTo,
        difference: difference,
        differenceWith: differenceWith,
        dissoc: dissoc,
        dissocPath: dissocPath,
        divide: divide,
        drop: drop,
        dropLast: dropLast,
        dropLastWhile: dropLastWhile,
        dropRepeats: dropRepeats,
        dropRepeatsWith: dropRepeatsWith,
        dropWhile: dropWhile,
        either: either,
        empty: empty,
        eqBy: eqBy,
        eqProps: eqProps,
        equals: equals,
        evolve: evolve,
        filter: filter,
        find: find,
        findIndex: findIndex,
        findLast: findLast,
        findLastIndex: findLastIndex,
        flatten: flatten,
        flip: flip,
        forEach: forEach,
        fromPairs: fromPairs,
        groupBy: groupBy,
        groupWith: groupWith,
        gt: gt,
        gte: gte,
        has: has,
        hasIn: hasIn,
        head: head,
        identical: identical,
        identity: identity,
        ifElse: ifElse,
        inc: inc,
        indexBy: indexBy,
        indexOf: indexOf,
        init: init,
        insert: insert,
        insertAll: insertAll,
        intersection: intersection,
        intersectionWith: intersectionWith,
        intersperse: intersperse,
        into: into,
        invert: invert,
        invertObj: invertObj,
        invoker: invoker,
        is: is,
        isArrayLike: isArrayLike,
        isEmpty: isEmpty,
        isNil: isNil,
        join: join,
        juxt: juxt,
        keys: keys,
        keysIn: keysIn,
        last: last,
        lastIndexOf: lastIndexOf,
        length: length,
        lens: lens,
        lensIndex: lensIndex,
        lensPath: lensPath,
        lensProp: lensProp,
        lift: lift,
        liftN: liftN,
        lt: lt,
        lte: lte,
        map: map,
        mapAccum: mapAccum,
        mapAccumRight: mapAccumRight,
        mapObjIndexed: mapObjIndexed,
        match: match,
        mathMod: mathMod,
        max: max,
        maxBy: maxBy,
        mean: mean,
        median: median,
        memoize: memoize,
        merge: merge,
        mergeAll: mergeAll,
        mergeWith: mergeWith,
        mergeWithKey: mergeWithKey,
        min: min,
        minBy: minBy,
        modulo: modulo,
        multiply: multiply,
        nAry: nAry,
        negate: negate,
        none: none,
        not: not,
        nth: nth,
        nthArg: nthArg,
        objOf: objOf,
        of: of,
        omit: omit,
        once: once,
        or: or,
        over: over,
        pair: pair,
        partial: partial,
        partialRight: partialRight,
        partition: partition,
        path: path,
        pathEq: pathEq,
        pathOr: pathOr,
        pathSatisfies: pathSatisfies,
        pick: pick,
        pickAll: pickAll,
        pickBy: pickBy,
        pipe: pipe,
        pipeK: pipeK,
        pipeP: pipeP,
        pluck: pluck,
        prepend: prepend,
        product: product,
        project: project,
        prop: prop,
        propEq: propEq,
        propIs: propIs,
        propOr: propOr,
        propSatisfies: propSatisfies,
        props: props,
        range: range,
        reduce: reduce,
        reduceBy: reduceBy,
        reduceRight: reduceRight,
        reduced: reduced,
        reject: reject,
        remove: remove,
        repeat: repeat,
        replace: replace,
        reverse: reverse,
        scan: scan,
        sequence: sequence,
        set: set,
        slice: slice,
        sort: sort,
        sortBy: sortBy,
        split: split,
        splitAt: splitAt,
        splitEvery: splitEvery,
        splitWhen: splitWhen,
        subtract: subtract,
        sum: sum,
        symmetricDifference: symmetricDifference,
        symmetricDifferenceWith: symmetricDifferenceWith,
        tail: tail,
        take: take,
        takeLast: takeLast,
        takeLastWhile: takeLastWhile,
        takeWhile: takeWhile,
        tap: tap,
        test: test,
        times: times,
        toLower: toLower,
        toPairs: toPairs,
        toPairsIn: toPairsIn,
        toString: toString,
        toUpper: toUpper,
        transduce: transduce,
        transpose: transpose,
        traverse: traverse,
        trim: trim,
        tryCatch: tryCatch,
        type: type,
        unapply: unapply,
        unary: unary,
        uncurryN: uncurryN,
        unfold: unfold,
        union: union,
        unionWith: unionWith,
        uniq: uniq,
        uniqBy: uniqBy,
        uniqWith: uniqWith,
        unless: unless,
        unnest: unnest,
        until: until,
        update: update,
        useWith: useWith,
        values: values,
        valuesIn: valuesIn,
        view: view,
        when: when,
        where: where,
        whereEq: whereEq,
        without: without,
        wrap: wrap,
        xprod: xprod,
        zip: zip,
        zipObj: zipObj,
        zipWith: zipWith
    };
  /* eslint-env amd */

  /* TEST_ENTRY_POINT */

  if (typeof exports === 'object') {
    module.exports = R;
  } else if (typeof define === 'function' && define.amd) {
    define(function() { return R; });
  } else {
    this.R = R;
  }

}.call(this));

},{}]},{},[19])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9iYW0uanMiLCJqcy9iZWR3aWcuanMiLCJqcy9iaWd3aWcuanMiLCJqcy9iaW4uanMiLCJqcy9icm93c2VyLXVpLmpzIiwianMvY2Jyb3dzZXIuanMiLCJqcy9jaGFpbnNldC5qcyIsImpzL2NpZ2FyLmpzIiwianMvY29sb3IuanMiLCJqcy9kYXMuanMiLCJqcy9kZWZhdWx0LXJlbmRlcmVyLmVzNiIsImpzL2RvbXVpLmpzIiwianMvZHVtbXktcmVuZGVyZXIuZXM2IiwianMvZW5jb2RlLmpzIiwianMvZW5zZW1ibGpzb24uanMiLCJqcy9leHBvcnQtY29uZmlnLmpzIiwianMvZXhwb3J0LWltYWdlLmpzIiwianMvZXhwb3J0LXVpLmpzIiwianMvZXhwb3J0cy5qcyIsImpzL2ZlYXR1cmUtZHJhdy5qcyIsImpzL2ZlYXR1cmUtcG9wdXAuanMiLCJqcy9mZWF0dXJlcy5qcyIsImpzL2dseXBocy5qcyIsImpzL2pianNvbi5qcyIsImpzL2tzcGFjZS5qcyIsImpzL2xoM3V0aWxzLmpzIiwianMvbWVtc3RvcmUuanMiLCJqcy9tdWx0aS1yZW5kZXJlci5lczYiLCJqcy9udW1mb3JtYXRzLmpzIiwianMvb3ZlcmxheS5qcyIsImpzL3Byb2JlLmpzIiwianMvcnVsZXJzLmVzNiIsImpzL3NhbXBsZS5qcyIsImpzL3NlYXJjaC5qcyIsImpzL3NlcXVlbmNlLWRyYXcuanMiLCJqcy9zZXNzaW9uLmpzIiwianMvc2hhMS5qcyIsImpzL3NvdXJjZWFkYXB0ZXJzLmpzIiwianMvc291cmNlY29tcGFyZS5qcyIsImpzL3NwYW5zLmpzIiwianMvc3R5bGUuanMiLCJqcy9zdWItcmVuZGVyZXIuZXM2IiwianMvc3ZnLWV4cG9ydC5qcyIsImpzL3N2Zy11dGlscy5qcyIsImpzL3RhYml4LXNvdXJjZS5qcyIsImpzL3RhYml4LmpzIiwianMvdGVzdC1zb3VyY2UuZXM2IiwianMvdGh1Yi5qcyIsImpzL3RpZXItYWN0aW9ucy5qcyIsImpzL3RpZXItZWRpdC5qcyIsImpzL3RpZXIuanMiLCJqcy90cmFjay1hZGRlci5qcyIsImpzL3RyaXguanMiLCJqcy90d29CaXQuanMiLCJqcy91dGlscy5qcyIsImpzL3ZjZi5qcyIsImpzL3ZlcnNpb24uanMiLCJqcy96b29tc2xpZGVyLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJub2RlX21vZHVsZXMvanN6bGliL2pzL2luZmxhdGUuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JhbWRhL2Rpc3QvcmFtZGEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsSUFBSSxPQUFPLE9BQVAsS0FBb0IsV0FBeEIsRUFBcUM7QUFDakMsUUFBSSxRQUFRLFFBQVEsU0FBUixDQUFaO0FBQ0EsUUFBSSxRQUFRLE1BQU0sS0FBbEI7QUFDQSxRQUFJLFFBQVEsTUFBTSxLQUFsQjtBQUNBLFFBQUksZUFBZSxNQUFNLFlBQXpCOztBQUVBLFFBQUksTUFBTSxRQUFRLE9BQVIsQ0FBVjtBQUNBLFFBQUksVUFBVSxJQUFJLE9BQWxCO0FBQ0EsUUFBSSxZQUFZLElBQUksU0FBcEI7QUFDQSxRQUFJLFdBQVcsSUFBSSxRQUFuQjtBQUNBLFFBQUksWUFBWSxJQUFJLFNBQXBCO0FBQ0EsUUFBSSxZQUFZLElBQUksU0FBcEI7O0FBRUEsUUFBSSxXQUFXLFFBQVEsWUFBUixDQUFmO0FBQ0EsUUFBSSxVQUFVLFNBQVMsT0FBdkI7QUFDQSxRQUFJLFNBQVMsU0FBUyxNQUF0QjtBQUNBLFFBQUksV0FBVyxTQUFTLFFBQXhCO0FBQ0EsUUFBSSxRQUFRLFNBQVMsS0FBckI7QUFDSDs7QUFHRCxJQUFJLFlBQVksU0FBaEI7QUFDQSxJQUFJLFlBQVksU0FBaEI7O0FBRUEsSUFBSSxXQUFXO0FBQ1gsdUJBQXlC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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDdjhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbG5FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXG4vL1xuLy8gYmFtLmpzOiBpbmRleGVkIGJpbmFyeSBhbGlnbm1lbnRzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgc3BhbnMgPSByZXF1aXJlKCcuL3NwYW5zJyk7XG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XG4gICAgdmFyIHVuaW9uID0gc3BhbnMudW5pb247XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IHNwYW5zLmludGVyc2VjdGlvbjtcblxuICAgIHZhciBiaW4gPSByZXF1aXJlKCcuL2JpbicpO1xuICAgIHZhciByZWFkSW50ID0gYmluLnJlYWRJbnQ7XG4gICAgdmFyIHJlYWRTaG9ydCA9IGJpbi5yZWFkU2hvcnQ7XG4gICAgdmFyIHJlYWRCeXRlID0gYmluLnJlYWRCeXRlO1xuICAgIHZhciByZWFkSW50NjQgPSBiaW4ucmVhZEludDY0O1xuICAgIHZhciByZWFkRmxvYXQgPSBiaW4ucmVhZEZsb2F0O1xuXG4gICAgdmFyIGxoM3V0aWxzID0gcmVxdWlyZSgnLi9saDN1dGlscycpO1xuICAgIHZhciByZWFkVm9iID0gbGgzdXRpbHMucmVhZFZvYjtcbiAgICB2YXIgdW5iZ3pmID0gbGgzdXRpbHMudW5iZ3pmO1xuICAgIHZhciByZWcyYmlucyA9IGxoM3V0aWxzLnJlZzJiaW5zO1xuICAgIHZhciBDaHVuayA9IGxoM3V0aWxzLkNodW5rO1xufVxuXG5cbnZhciBCQU1fTUFHSUMgPSAweDE0ZDQxNDI7XG52YXIgQkFJX01BR0lDID0gMHgxNDk0MTQyO1xuXG52YXIgQmFtRmxhZ3MgPSB7XG4gICAgTVVMVElQTEVfU0VHTUVOVFM6ICAgICAgIDB4MSxcbiAgICBBTExfU0VHTUVOVFNfQUxJR046ICAgICAgMHgyLFxuICAgIFNFR01FTlRfVU5NQVBQRUQ6ICAgICAgICAweDQsXG4gICAgTkVYVF9TRUdNRU5UX1VOTUFQUEVEOiAgIDB4OCxcbiAgICBSRVZFUlNFX0NPTVBMRU1FTlQ6ICAgICAgMHgxMCxcbiAgICBORVhUX1JFVkVSU0VfQ09NUExFTUVOVDogMHgyMCxcbiAgICBGSVJTVF9TRUdNRU5UOiAgICAgICAgICAgMHg0MCxcbiAgICBMQVNUX1NFR01FTlQ6ICAgICAgICAgICAgMHg4MCxcbiAgICBTRUNPTkRBUllfQUxJR05NRU5UOiAgICAgMHgxMDAsXG4gICAgUUNfRkFJTDogICAgICAgICAgICAgICAgIDB4MjAwLFxuICAgIERVUExJQ0FURTogICAgICAgICAgICAgICAweDQwMCxcbiAgICBTVVBQTEVNRU5UQVJZOiAgICAgICAgICAgMHg4MDBcbn07XG5cbmZ1bmN0aW9uIEJhbUZpbGUoKSB7XG59XG5cblxuLy8gQ2FsY3VsYXRlIHRoZSBsZW5ndGggKGluIGJ5dGVzKSBvZiB0aGUgQkFJIHJlZiBzdGFydGluZyBhdCBvZmZzZXQuXG4vLyBSZXR1cm5zIHtuYmluLCBsZW5ndGgsIG1pbkJsb2NrSW5kZXh9XG5mdW5jdGlvbiBfZ2V0QmFpUmVmTGVuZ3RoKHVuY2JhLCBvZmZzZXQpIHtcbiAgICB2YXIgcCA9IG9mZnNldDtcbiAgICB2YXIgbmJpbiA9IHJlYWRJbnQodW5jYmEsIHApOyBwICs9IDQ7XG4gICAgZm9yICh2YXIgYiA9IDA7IGIgPCBuYmluOyArK2IpIHtcbiAgICAgICAgdmFyIGJpbiA9IHJlYWRJbnQodW5jYmEsIHApO1xuICAgICAgICB2YXIgbmNobmsgPSByZWFkSW50KHVuY2JhLCBwKzQpO1xuICAgICAgICBwICs9IDggKyAobmNobmsgKiAxNik7XG4gICAgfVxuICAgIHZhciBuaW50diA9IHJlYWRJbnQodW5jYmEsIHApOyBwICs9IDQ7XG5cbiAgICB2YXIgbWluQmxvY2tJbmRleCA9IDEwMDAwMDAwMDA7XG4gICAgdmFyIHEgPSBwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmludHY7ICsraSkge1xuICAgICAgICB2YXIgdiA9IHJlYWRWb2IodW5jYmEsIHEpOyBxICs9IDg7XG4gICAgICAgIGlmICh2KSB7XG4gICAgICAgICAgICB2YXIgYmkgPSB2LmJsb2NrO1xuICAgICAgICAgICAgaWYgKHYub2Zmc2V0ID4gMClcbiAgICAgICAgICAgICAgICBiaSArPSA2NTUzNjtcblxuICAgICAgICAgICAgaWYgKGJpIDwgbWluQmxvY2tJbmRleClcbiAgICAgICAgICAgICAgICBtaW5CbG9ja0luZGV4ID0gYmk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBwICs9IChuaW50diAqIDgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWluQmxvY2tJbmRleDogbWluQmxvY2tJbmRleCxcbiAgICAgICAgbmJpbjogbmJpbixcbiAgICAgICAgbGVuZ3RoOiBwIC0gb2Zmc2V0XG4gICAgfTtcbn1cblxuXG5mdW5jdGlvbiBtYWtlQmFtKGRhdGEsIGJhaSwgaW5kZXhDaHVua3MsIGNhbGxiYWNrLCBhdHRlbXB0ZWQpIHtcbiAgICAvLyBEbyBhbiBpbml0aWFsIHByb2JlIG9uIHRoZSBCQU0gZmlsZSB0byBjYXRjaCBhbnkgbWl4ZWQtY29udGVudCBlcnJvcnMuXG4gICAgZGF0YS5zbGljZSgwLCAxMCkuZmV0Y2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlQmFtMihkYXRhLCBiYWksIGluZGV4Q2h1bmtzLCBjYWxsYmFjaywgYXR0ZW1wdGVkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBcIkNvdWxkbid0IGFjY2VzcyBCQU0uXCIpO1xuICAgICAgICB9XG4gICAgfSwge3RpbWVvdXQ6IDUwMDB9KTtcbn1cblxuZnVuY3Rpb24gbWFrZUJhbTIoZGF0YSwgYmFpLCBpbmRleENodW5rcywgY2FsbGJhY2ssIGF0dGVtcHRlZCkge1xuICAgIHZhciBiYW0gPSBuZXcgQmFtRmlsZSgpO1xuICAgIGJhbS5kYXRhID0gZGF0YTtcbiAgICBiYW0uYmFpID0gYmFpO1xuICAgIGJhbS5pbmRleENodW5rcyA9IGluZGV4Q2h1bmtzO1xuXG4gICAgdmFyIG1pbkJsb2NrSW5kZXggPSBiYW0uaW5kZXhDaHVua3MgPyBiYW0uaW5kZXhDaHVua3MubWluQmxvY2tJbmRleCA6IDEwMDAwMDAwMDA7XG5cbiAgICAvLyBGaWxscyBvdXQgYmFtLmNoclRvSW5kZXggYW5kIGJhbS5pbmRleFRvQ2hyIGJhc2VkIG9uIHRoZSBmaXJzdCBmZXcgYnl0ZXMgb2YgdGhlIEJBTS5cbiAgICBmdW5jdGlvbiBwYXJzZUJhbUhlYWRlcihyKSB7XG4gICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgYWNjZXNzIEJBTVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB1bmMgPSB1bmJnemYociwgci5ieXRlTGVuZ3RoKTtcbiAgICAgICAgdmFyIHVuY2JhID0gbmV3IFVpbnQ4QXJyYXkodW5jKTtcblxuICAgICAgICB2YXIgbWFnaWMgPSByZWFkSW50KHVuY2JhLCAwKTtcbiAgICAgICAgaWYgKG1hZ2ljICE9IEJBTV9NQUdJQykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiTm90IGEgQkFNIGZpbGUsIG1hZ2ljPTB4XCIgKyBtYWdpYy50b1N0cmluZygxNikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoZWFkTGVuID0gcmVhZEludCh1bmNiYSwgNCk7XG4gICAgICAgIHZhciBoZWFkZXIgPSAnJztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkTGVuOyArK2kpIHtcbiAgICAgICAgICAgIGhlYWRlciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHVuY2JhW2kgKyA4XSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgblJlZiA9IHJlYWRJbnQodW5jYmEsIGhlYWRMZW4gKyA4KTtcbiAgICAgICAgdmFyIHAgPSBoZWFkTGVuICsgMTI7XG5cbiAgICAgICAgYmFtLmNoclRvSW5kZXggPSB7fTtcbiAgICAgICAgYmFtLmluZGV4VG9DaHIgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuUmVmOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBsTmFtZSA9IHJlYWRJbnQodW5jYmEsIHApO1xuICAgICAgICAgICAgdmFyIG5hbWUgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbE5hbWUtMTsgKytqKSB7XG4gICAgICAgICAgICAgICAgbmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHVuY2JhW3AgKyA0ICsgal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxSZWYgPSByZWFkSW50KHVuY2JhLCBwICsgbE5hbWUgKyA0KTtcbiAgICAgICAgICAgIGJhbS5jaHJUb0luZGV4W25hbWVdID0gaTtcbiAgICAgICAgICAgIGlmIChuYW1lLmluZGV4T2YoJ2NocicpID09IDApIHtcbiAgICAgICAgICAgICAgICBiYW0uY2hyVG9JbmRleFtuYW1lLnN1YnN0cmluZygzKV0gPSBpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBiYW0uY2hyVG9JbmRleFsnY2hyJyArIG5hbWVdID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhbS5pbmRleFRvQ2hyLnB1c2gobmFtZSk7XG5cbiAgICAgICAgICAgIHAgPSBwICsgOCArIGxOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJhbS5pbmRpY2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYmFtKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQmFpKGhlYWRlcikge1xuICAgICAgICBpZiAoIWhlYWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIFwiQ291bGRuJ3QgYWNjZXNzIEJBSVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHVuY2JhID0gbmV3IFVpbnQ4QXJyYXkoaGVhZGVyKTtcbiAgICAgICAgdmFyIGJhaU1hZ2ljID0gcmVhZEludCh1bmNiYSwgMCk7XG4gICAgICAgIGlmIChiYWlNYWdpYyAhPSBCQUlfTUFHSUMpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnTm90IGEgQkFJIGZpbGUsIG1hZ2ljPTB4JyArIGJhaU1hZ2ljLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbnJlZiA9IHJlYWRJbnQodW5jYmEsIDQpO1xuXG4gICAgICAgIGJhbS5pbmRpY2VzID0gW107XG5cbiAgICAgICAgdmFyIHAgPSA4O1xuICAgICAgICBmb3IgKHZhciByZWYgPSAwOyByZWYgPCBucmVmOyArK3JlZikge1xuICAgICAgICAgICAgdmFyIGJsb2NrU3RhcnQgPSBwO1xuICAgICAgICAgICAgdmFyIG8gPSBfZ2V0QmFpUmVmTGVuZ3RoKHVuY2JhLCBibG9ja1N0YXJ0KTtcbiAgICAgICAgICAgIHAgKz0gby5sZW5ndGg7XG5cbiAgICAgICAgICAgIG1pbkJsb2NrSW5kZXggPSBNYXRoLm1pbihvLm1pbkJsb2NrSW5kZXgsIG1pbkJsb2NrSW5kZXgpO1xuXG4gICAgICAgICAgICB2YXIgbmJpbiA9IG8ubmJpbjtcblxuICAgICAgICAgICAgaWYgKG5iaW4gPiAwKSB7XG4gICAgICAgICAgICAgICAgYmFtLmluZGljZXNbcmVmXSA9IG5ldyBVaW50OEFycmF5KGhlYWRlciwgYmxvY2tTdGFydCwgcCAtIGJsb2NrU3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFiYW0uaW5kZXhDaHVua3MpIHtcbiAgICAgICAgYmFtLmJhaS5mZXRjaChmdW5jdGlvbihoZWFkZXIpIHsgICAvLyBEbyB3ZSByZWFsbHkgbmVlZCB0byBmZXRjaCB0aGUgd2hvbGUgdGhpbmc/IDotKFxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHBhcnNlQmFpKGhlYWRlcik7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJhbS5iYWkudXJsICYmIHR5cGVvZihhdHRlbXB0ZWQpID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgYXR0ZW1wdGVkIHguYmFtLmJhaSBub3QgdGhlcmUgc28gbm93IHRyeWluZyB4LmJhaVxuICAgICAgICAgICAgICAgICAgICBiYW0uYmFpLnVybCA9IGJhbS5kYXRhLnVybC5yZXBsYWNlKG5ldyBSZWdFeHAoJy5iYW0kJyksICcuYmFpJyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgLy8gVHJ1ZSBsZXRzIHVzIGtub3cgd2UgYXJlIG1ha2luZyBhIHNlY29uZCBhdHRlbXB0XG4gICAgICAgICAgICAgICAgICAgIG1ha2VCYW0yKGRhdGEsIGJhbS5iYWksIGluZGV4Q2h1bmtzLCBjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSd2ZSBhdHRlbXB0ZWQgeC5iYW0uYmFpICYgeC5iYWkgYW5kIG5vdGhpbmcgd29ya2VkXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYmFtLmRhdGEuc2xpY2UoMCwgbWluQmxvY2tJbmRleCkuZmV0Y2gocGFyc2VCYW1IZWFkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTsgICAvLyBUaW1lb3V0IG9uIGZpcnN0IHJlcXVlc3QgdG8gY2F0Y2ggQ2hyb21lIG1peGVkLWNvbnRlbnQgZXJyb3IuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGNodW5rcyA9IGJhbS5pbmRleENodW5rcy5jaHVua3M7XG4gICAgICAgIGJhbS5pbmRpY2VzID0gW11cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgYmFtLmluZGljZXNbaV0gPSBudWxsOyAgLy8gVG8gYmUgZmlsbGVkIG91dCBsYXppbHkgYXMgbmVlZGVkXG4gICAgICAgIH1cbiAgICAgICAgYmFtLmRhdGEuc2xpY2UoMCwgbWluQmxvY2tJbmRleCkuZmV0Y2gocGFyc2VCYW1IZWFkZXIpO1xuICAgIH1cbn1cblxuXG5cbkJhbUZpbGUucHJvdG90eXBlLmJsb2Nrc0ZvclJhbmdlID0gZnVuY3Rpb24ocmVmSWQsIG1pbiwgbWF4KSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5pbmRpY2VzW3JlZklkXTtcbiAgICBpZiAoIWluZGV4KSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICB2YXIgaW50Qmluc0wgPSByZWcyYmlucyhtaW4sIG1heCk7XG4gICAgdmFyIGludEJpbnMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludEJpbnNMLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGludEJpbnNbaW50Qmluc0xbaV1dID0gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIGxlYWZDaHVua3MgPSBbXSwgb3RoZXJDaHVua3MgPSBbXTtcblxuICAgIHZhciBuYmluID0gcmVhZEludChpbmRleCwgMCk7XG4gICAgdmFyIHAgPSA0O1xuICAgIGZvciAodmFyIGIgPSAwOyBiIDwgbmJpbjsgKytiKSB7XG4gICAgICAgIHZhciBiaW4gPSByZWFkSW50KGluZGV4LCBwKTtcbiAgICAgICAgdmFyIG5jaG5rID0gcmVhZEludChpbmRleCwgcCs0KTtcbi8vICAgICAgICBkbG9nKCdiaW49JyArIGJpbiArICc7IG5jaG5rPScgKyBuY2huayk7XG4gICAgICAgIHAgKz0gODtcbiAgICAgICAgaWYgKGludEJpbnNbYmluXSkge1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBuY2huazsgKytjKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNzID0gcmVhZFZvYihpbmRleCwgcCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlID0gcmVhZFZvYihpbmRleCwgcCArIDgpO1xuICAgICAgICAgICAgICAgIChiaW4gPCA0NjgxID8gb3RoZXJDaHVua3MgOiBsZWFmQ2h1bmtzKS5wdXNoKG5ldyBDaHVuayhjcywgY2UpKTtcbiAgICAgICAgICAgICAgICBwICs9IDE2O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcCArPSAgKG5jaG5rICogMTYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKCdsZWFmQ2h1bmtzID0gJyArIEpTT04uc3RyaW5naWZ5KGxlYWZDaHVua3MpKTtcbiAgICAvLyBjb25zb2xlLmxvZygnb3RoZXJDaHVua3MgPSAnICsgSlNPTi5zdHJpbmdpZnkob3RoZXJDaHVua3MpKTtcblxuICAgIHZhciBuaW50diA9IHJlYWRJbnQoaW5kZXgsIHApO1xuICAgIC8vIGNvbnNvbGUubG9nKCduaW50dj0nICsgbmludHYpO1xuICAgIHZhciBsb3dlc3QgPSBudWxsO1xuICAgIHZhciBtaW5MaW4gPSBNYXRoLm1pbihtaW4+PjE0LCBuaW50diAtIDEpLCBtYXhMaW4gPSBNYXRoLm1pbihtYXg+PjE0LCBuaW50diAtIDEpO1xuICAgIGZvciAodmFyIGkgPSBtaW5MaW47IGkgPD0gbWF4TGluOyArK2kpIHtcbiAgICAgICAgdmFyIGxiID0gIHJlYWRWb2IoaW5kZXgsIHAgKyA0ICsgKGkgKiA4KSk7XG4gICAgICAgIGlmICghbGIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbG93ZXN0IHx8IGxiLmJsb2NrIDwgbG93ZXN0LmJsb2NrIHx8IChsYi5ibG9jayA9PSBsb3dlc3QuYmxvY2sgJiYgbGIub2Zmc2V0IDwgbG93ZXN0Lm9mZnNldCkpIHtcbiAgICAgICAgICAgIGxvd2VzdCA9IGxiO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKCdMb3dlc3QgTEIgPSAnICsgbG93ZXN0KTtcblxuICAgIHZhciBwcnVuZWRPdGhlckNodW5rcyA9IFtdO1xuICAgIGlmIChsb3dlc3QgIT0gbnVsbCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG90aGVyQ2h1bmtzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgY2huayA9IG90aGVyQ2h1bmtzW2ldO1xuICAgICAgICAgICAgaWYgKGNobmsubWF4di5ibG9jayA+IGxvd2VzdC5ibG9jayB8fCAoY2huay5tYXh2LmJsb2NrID09IGxvd2VzdC5ibG9jayAmJiBjaG5rLm1heHYub2Zmc2V0ID49IGxvd2VzdC5vZmZzZXQpKSB7XG4gICAgICAgICAgICAgICAgcHJ1bmVkT3RoZXJDaHVua3MucHVzaChjaG5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygncHJ1bmVkT3RoZXJDaHVua3MgPSAnICsgSlNPTi5zdHJpbmdpZnkocHJ1bmVkT3RoZXJDaHVua3MpKTtcbiAgICBvdGhlckNodW5rcyA9IHBydW5lZE90aGVyQ2h1bmtzO1xuXG4gICAgdmFyIGludENodW5rcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJDaHVua3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaW50Q2h1bmtzLnB1c2gob3RoZXJDaHVua3NbaV0pO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlYWZDaHVua3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaW50Q2h1bmtzLnB1c2gobGVhZkNodW5rc1tpXSk7XG4gICAgfVxuXG4gICAgaW50Q2h1bmtzLnNvcnQoZnVuY3Rpb24oYzAsIGMxKSB7XG4gICAgICAgIHZhciBkaWYgPSBjMC5taW52LmJsb2NrIC0gYzEubWludi5ibG9jaztcbiAgICAgICAgaWYgKGRpZiAhPSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZGlmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGMwLm1pbnYub2Zmc2V0IC0gYzEubWludi5vZmZzZXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgbWVyZ2VkQ2h1bmtzID0gW107XG4gICAgaWYgKGludENodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBjdXIgPSBpbnRDaHVua3NbMF07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgaW50Q2h1bmtzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbmMgPSBpbnRDaHVua3NbaV07XG4gICAgICAgICAgICBpZiAobmMubWludi5ibG9jayA9PSBjdXIubWF4di5ibG9jayAvKiAmJiBuYy5taW52Lm9mZnNldCA9PSBjdXIubWF4di5vZmZzZXQgKi8pIHsgLy8gbm8gcG9pbnQgc3BsaXR0aW5nIG1pZC1ibG9ja1xuICAgICAgICAgICAgICAgIGN1ciA9IG5ldyBDaHVuayhjdXIubWludiwgbmMubWF4dik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lcmdlZENodW5rcy5wdXNoKGN1cik7XG4gICAgICAgICAgICAgICAgY3VyID0gbmM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWVyZ2VkQ2h1bmtzLnB1c2goY3VyKTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coJ21lcmdlZENodW5rcyA9ICcgKyBKU09OLnN0cmluZ2lmeShtZXJnZWRDaHVua3MpKTtcblxuICAgIHJldHVybiBtZXJnZWRDaHVua3M7XG59XG5cbkJhbUZpbGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgY2FsbGJhY2ssIG9wdHMpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgdmFyIGNocklkID0gdGhpcy5jaHJUb0luZGV4W2Nocl07XG4gICAgdmFyIGNodW5rcztcbiAgICBpZiAoY2hySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjaHVua3MgPSBbXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGZXRjaCB0aGlzIHBvcnRpb24gb2YgdGhlIEJBSSBpZiBpdCBoYXNuJ3QgYmVlbiBsb2FkZWQgeWV0LlxuICAgICAgICBpZiAodGhpcy5pbmRpY2VzW2NocklkXSA9PT0gbnVsbCAmJiB0aGlzLmluZGV4Q2h1bmtzLmNodW5rc1tjaHJJZF0pIHtcbiAgICAgICAgICAgIHZhciBzdGFydF9zdG9wID0gdGhpcy5pbmRleENodW5rcy5jaHVua3NbY2hySWRdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFpLnNsaWNlKHN0YXJ0X3N0b3BbMF0sIHN0YXJ0X3N0b3BbMV0pLmZldGNoKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2VzW2NocklkXSA9IGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaChjaHIsIG1pbiwgbWF4LCBjYWxsYmFjaywgb3B0cyk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2h1bmtzID0gdGhpcy5ibG9ja3NGb3JSYW5nZShjaHJJZCwgbWluLCBtYXgpO1xuICAgICAgICBpZiAoIWNodW5rcykge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ0Vycm9yIGluIGluZGV4IGZldGNoJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdmFyIHJlY29yZHMgPSBbXTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBkYXRhO1xuXG4gICAgZnVuY3Rpb24gdHJhbXAoKSB7XG4gICAgICAgIGlmIChpbmRleCA+PSBjaHVua3MubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVjb3Jkcyk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgIHZhciBjID0gY2h1bmtzW2luZGV4XTtcbiAgICAgICAgICAgIHZhciBmZXRjaE1pbiA9IGMubWludi5ibG9jaztcbiAgICAgICAgICAgIHZhciBmZXRjaE1heCA9IGMubWF4di5ibG9jayArICgxPDwxNik7IC8vICpzaWdoKlxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZldGNoaW5nICcgKyBmZXRjaE1pbiArICc6JyArIGZldGNoTWF4KTtcbiAgICAgICAgICAgIHRoaXNCLmRhdGEuc2xpY2UoZmV0Y2hNaW4sIGZldGNoTWF4IC0gZmV0Y2hNaW4pLmZldGNoKGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gdW5iZ3pmKHIsIGMubWF4di5ibG9jayAtIGMubWludi5ibG9jayArIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFtcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgICAgICAgICAgIHZhciBmaW5pc2hlZCA9IHRoaXNCLnJlYWRCYW1SZWNvcmRzKGJhLCBjaHVua3NbaW5kZXhdLm1pbnYub2Zmc2V0LCByZWNvcmRzLCBtaW4sIG1heCwgY2hySWQsIG9wdHMpO1xuICAgICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgICArK2luZGV4O1xuICAgICAgICAgICAgaWYgKGZpbmlzaGVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhyZWNvcmRzKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbXAoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFtcCgpO1xufVxuXG52YXIgU0VRUkVUX0RFQ09ERVIgPSBbJz0nLCAnQScsICdDJywgJ3gnLCAnRycsICd4JywgJ3gnLCAneCcsICdUJywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ04nXTtcbnZhciBDSUdBUl9ERUNPREVSID0gWydNJywgJ0knLCAnRCcsICdOJywgJ1MnLCAnSCcsICdQJywgJz0nLCAnWCcsICc/JywgJz8nLCAnPycsICc/JywgJz8nLCAnPycsICc/J107XG5cbmZ1bmN0aW9uIEJhbVJlY29yZCgpIHtcbn1cblxuQmFtRmlsZS5wcm90b3R5cGUucmVhZEJhbVJlY29yZHMgPSBmdW5jdGlvbihiYSwgb2Zmc2V0LCBzaW5rLCBtaW4sIG1heCwgY2hySWQsIG9wdHMpIHtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgYmxvY2tTaXplID0gcmVhZEludChiYSwgb2Zmc2V0KTtcbiAgICAgICAgdmFyIGJsb2NrRW5kID0gb2Zmc2V0ICsgYmxvY2tTaXplICsgNDtcbiAgICAgICAgaWYgKGJsb2NrRW5kID4gYmEubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVjb3JkID0gbmV3IEJhbVJlY29yZCgpO1xuXG4gICAgICAgIHZhciByZWZJRCA9IHJlYWRJbnQoYmEsIG9mZnNldCArIDQpO1xuICAgICAgICB2YXIgcG9zID0gcmVhZEludChiYSwgb2Zmc2V0ICsgOCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgYm1uID0gcmVhZEludChiYSwgb2Zmc2V0ICsgMTIpO1xuICAgICAgICB2YXIgYmluID0gKGJtbiAmIDB4ZmZmZjAwMDApID4+IDE2O1xuICAgICAgICB2YXIgbXEgPSAoYm1uICYgMHhmZjAwKSA+PiA4O1xuICAgICAgICB2YXIgbmwgPSBibW4gJiAweGZmO1xuXG4gICAgICAgIHZhciBmbGFnX25jID0gcmVhZEludChiYSwgb2Zmc2V0ICsgMTYpO1xuICAgICAgICB2YXIgZmxhZyA9IChmbGFnX25jICYgMHhmZmZmMDAwMCkgPj4gMTY7XG4gICAgICAgIHZhciBuYyA9IGZsYWdfbmMgJiAweGZmZmY7XG4gICAgXG4gICAgICAgIHZhciBsc2VxID0gcmVhZEludChiYSwgb2Zmc2V0ICsgMjApO1xuICAgICAgICBcbiAgICAgICAgdmFyIG5leHRSZWYgID0gcmVhZEludChiYSwgb2Zmc2V0ICsgMjQpO1xuICAgICAgICB2YXIgbmV4dFBvcyA9IHJlYWRJbnQoYmEsIG9mZnNldCArIDI4KTtcbiAgICAgICAgXG4gICAgICAgIHZhciB0bGVuID0gcmVhZEludChiYSwgb2Zmc2V0ICsgMzIpO1xuICAgIFxuICAgICAgICByZWNvcmQuc2VnbWVudCA9IHRoaXMuaW5kZXhUb0NocltyZWZJRF07XG4gICAgICAgIHJlY29yZC5mbGFnID0gZmxhZztcbiAgICAgICAgcmVjb3JkLnBvcyA9IHBvcztcbiAgICAgICAgcmVjb3JkLm1xID0gbXE7XG4gICAgICAgIGlmIChvcHRzLmxpZ2h0KVxuICAgICAgICAgICAgcmVjb3JkLnNlcUxlbmd0aCA9IGxzZXE7XG5cbiAgICAgICAgaWYgKCFvcHRzLmxpZ2h0IHx8IG9wdHMuaW5jbHVkZU5hbWUpIHtcbiAgICAgICAgICAgIHZhciByZWFkTmFtZSA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBubC0xOyArK2opIHtcbiAgICAgICAgICAgICAgICByZWFkTmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJhW29mZnNldCArIDM2ICsgal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVjb3JkLnJlYWROYW1lID0gcmVhZE5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghb3B0cy5saWdodCkge1xuICAgICAgICAgICAgaWYgKG5leHRSZWYgPj0gMCkge1xuICAgICAgICAgICAgICAgIHJlY29yZC5uZXh0U2VnbWVudCA9IHRoaXMuaW5kZXhUb0NocltuZXh0UmVmXTtcbiAgICAgICAgICAgICAgICByZWNvcmQubmV4dFBvcyA9IG5leHRQb3M7XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgdmFyIHAgPSBvZmZzZXQgKyAzNiArIG5sO1xuXG4gICAgICAgICAgICB2YXIgY2lnYXIgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgbmM7ICsrYykge1xuICAgICAgICAgICAgICAgIHZhciBjaWdvcCA9IHJlYWRJbnQoYmEsIHApO1xuICAgICAgICAgICAgICAgIGNpZ2FyID0gY2lnYXIgKyAoY2lnb3A+PjQpICsgQ0lHQVJfREVDT0RFUltjaWdvcCAmIDB4Zl07XG4gICAgICAgICAgICAgICAgcCArPSA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVjb3JkLmNpZ2FyID0gY2lnYXI7XG4gICAgICAgIFxuICAgICAgICAgICAgdmFyIHNlcSA9ICcnO1xuICAgICAgICAgICAgdmFyIHNlcUJ5dGVzID0gKGxzZXEgKyAxKSA+PiAxO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZXFCeXRlczsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNiID0gYmFbcCArIGpdO1xuICAgICAgICAgICAgICAgIHNlcSArPSBTRVFSRVRfREVDT0RFUlsoc2IgJiAweGYwKSA+PiA0XTtcbiAgICAgICAgICAgICAgICBpZiAoc2VxLmxlbmd0aCA8IGxzZXEpXG4gICAgICAgICAgICAgICAgICAgIHNlcSArPSBTRVFSRVRfREVDT0RFUlsoc2IgJiAweDBmKV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwICs9IHNlcUJ5dGVzO1xuICAgICAgICAgICAgcmVjb3JkLnNlcSA9IHNlcTtcblxuICAgICAgICAgICAgdmFyIHFzZXEgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbHNlcTsgKytqKSB7XG4gICAgICAgICAgICAgICAgcXNlcSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJhW3AgKyBqXSArIDMzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAgKz0gbHNlcTtcbiAgICAgICAgICAgIHJlY29yZC5xdWFscyA9IHFzZXE7XG5cbiAgICAgICAgICAgIHdoaWxlIChwIDwgYmxvY2tFbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gU3RyaW5nLmZyb21DaGFyQ29kZShiYVtwXSwgYmFbcCArIDFdKTtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcCArIDJdKTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWU7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnQScpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJhW3AgKyAzXSk7XG4gICAgICAgICAgICAgICAgICAgIHAgKz0gNDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2knIHx8IHR5cGUgPT0gJ0knKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmVhZEludChiYSwgcCArIDMpO1xuICAgICAgICAgICAgICAgICAgICBwICs9IDc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdjJyB8fCB0eXBlID09ICdDJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGJhW3AgKyAzXTtcbiAgICAgICAgICAgICAgICAgICAgcCArPSA0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAncycgfHwgdHlwZSA9PSAnUycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByZWFkU2hvcnQoYmEsIHAgKyAzKTtcbiAgICAgICAgICAgICAgICAgICAgcCArPSA1O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnZicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByZWFkRmxvYXQoYmEsIHAgKyAzKTtcbiAgICAgICAgICAgICAgICAgICAgcCArPSA3O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnWicgfHwgdHlwZSA9PSAnSCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcCArPSAzO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2MgPSBiYVtwKytdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNjID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ0InKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHlwZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcCArIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFsZW4gPSByZWFkSW50KGJhLCBwICsgNCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVuO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR5cGUgPT0gJ2knIHx8IGF0eXBlID09ICdJJyB8fCBhdHlwZSA9PSAnZicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW4gPSA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0eXBlID09ICdmJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSByZWFkRmxvYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gcmVhZEludDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHlwZSA9PSAncycgfHwgYXR5cGUgPT0gJ1MnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVuID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IHJlYWRTaG9ydDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHlwZSA9PSAnYycgfHwgYXR5cGUgPT0gJ0MnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVuID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IHJlYWRCeXRlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1Vua25vd24gYXJyYXkgdHlwZSAnICsgYXR5cGU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBwICs9IDg7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKHJlYWRlcihiYSwgcCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcCArPSBlbGVuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1Vua25vd24gdHlwZSAnKyB0eXBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWNvcmRbdGFnXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFtaW4gfHwgcmVjb3JkLnBvcyA8PSBtYXggJiYgcmVjb3JkLnBvcyArIGxzZXEgPj0gbWluKSB7XG4gICAgICAgICAgICBpZiAoY2hySWQgPT09IHVuZGVmaW5lZCB8fCByZWZJRCA9PSBjaHJJZCkge1xuICAgICAgICAgICAgICAgIHNpbmsucHVzaChyZWNvcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZWNvcmQucG9zID4gbWF4KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBibG9ja0VuZDtcbiAgICB9XG5cbiAgICAvLyBFeGl0cyB2aWEgdG9wIG9mIGxvb3AuXG59O1xuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIG1ha2VCYW06IG1ha2VCYW0sXG4gICAgICAgIEJBTV9NQUdJQzogQkFNX01BR0lDLFxuICAgICAgICBCQUlfTUFHSUM6IEJBSV9NQUdJQyxcbiAgICAgICAgQmFtRmxhZ3M6IEJhbUZsYWdzXG4gICAgfTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcbi8vXG4vLyBiZWR3aWcuanNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBzcGFucyA9IHJlcXVpcmUoJy4vc3BhbnMnKTtcbiAgICB2YXIgUmFuZ2UgPSBzcGFucy5SYW5nZTtcbiAgICB2YXIgdW5pb24gPSBzcGFucy51bmlvbjtcbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gc3BhbnMuaW50ZXJzZWN0aW9uO1xuXG4gICAgdmFyIHNhID0gcmVxdWlyZSgnLi9zb3VyY2VhZGFwdGVycycpO1xuICAgIHZhciBkYWxsaWFuY2VfcmVnaXN0ZXJQYXJzZXJGYWN0b3J5ID0gc2EucmVnaXN0ZXJQYXJzZXJGYWN0b3J5O1xuXG4gICAgdmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XG4gICAgdmFyIERBU1N0eWxlc2hlZXQgPSBkYXMuREFTU3R5bGVzaGVldDtcbiAgICB2YXIgREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XG4gICAgdmFyIERBU0ZlYXR1cmUgPSBkYXMuREFTRmVhdHVyZTtcbiAgICB2YXIgREFTR3JvdXAgPSBkYXMuREFTR3JvdXA7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XG59XG5cblxuZnVuY3Rpb24gQmVkV2lnUGFyc2VyKHR5cGUpIHtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xufVxuXG5CZWRXaWdQYXJzZXIucHJvdG90eXBlLmNyZWF0ZVNlc3Npb24gPSBmdW5jdGlvbihzaW5rKSB7XG4gICAgaWYgKHRoaXMudHlwZSA9PSAnd2lnJylcbiAgICAgICAgcmV0dXJuIG5ldyBXaWdQYXJzZVNlc3Npb24odGhpcywgc2luayk7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gbmV3IEJlZFBhcnNlU2Vzc2lvbih0aGlzLCBzaW5rKTtcbn1cblxudmFyIF9fS1ZfUkVHRVhQPS8oW149XSspPSguKykvO1xudmFyIF9fU1BBQ0VfUkVHRVhQPS9cXHMrLztcbnZhciBCRURfQ09MT1JfUkVHRVhQID0gbmV3IFJlZ0V4cChcIl5bMC05XSssWzAtOV0rLFswLTldK1wiKTtcblxuZnVuY3Rpb24gQmVkUGFyc2VTZXNzaW9uKHBhcnNlciwgc2luaykge1xuICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgIHRoaXMuc2luayA9IHNpbms7XG59XG5cbkJlZFBhcnNlU2Vzc2lvbi5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbihsaW5lKSB7XG4gICAgdmFyIHRva3MgPSBsaW5lLnNwbGl0KF9fU1BBQ0VfUkVHRVhQKTtcbiAgICBpZiAodG9rcy5sZW5ndGggPCAzKVxuICAgICAgICByZXR1cm47XG5cbiAgICB2YXIgc3RhcnQgPSBwYXJzZUludCh0b2tzWzFdKSArIDE7XG4gICAgdmFyIGVuZCA9IHBhcnNlSW50KHRva3NbMl0pO1xuXG4gICAgdmFyIGYgPSB7c2VnbWVudDogdG9rc1swXSwgXG4gICAgICAgICAgICAgbWluOiBzdGFydCxcbiAgICAgICAgICAgICBtYXg6IGVuZH07XG5cbiAgICBpZiAodG9rcy5sZW5ndGggPiAzICYmIHRva3NbM10gIT09ICcuJykge1xuICAgICAgICBmLmxhYmVsID0gdG9rc1szXTtcbiAgICB9XG5cbiAgICBpZiAodG9rcy5sZW5ndGggPiA0KSB7XG4gICAgICAgIGYuc2NvcmUgPSBwYXJzZUZsb2F0KHRva3NbNF0pXG4gICAgfVxuXG4gICAgaWYgKHRva3MubGVuZ3RoID4gNSkge1xuICAgICAgICBmLm9yaWVudGF0aW9uID0gdG9rc1s1XTtcbiAgICB9XG5cbiAgICBpZiAodG9rcy5sZW5ndGggPiA4KSB7XG4gICAgICAgIHZhciBjb2xvciA9IHRva3NbOF07XG4gICAgICAgIGlmIChCRURfQ09MT1JfUkVHRVhQLnRlc3QoY29sb3IpKSB7XG4gICAgICAgICAgICBmLml0ZW1SZ2IgPSAncmdiKCcgKyBjb2xvciArICcpJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0b2tzLmxlbmd0aCA+PSAxMikge1xuICAgICAgICB2YXIgdGhpY2tTdGFydCA9IHBhcnNlSW50KHRva3NbNl0pO1xuICAgICAgICB2YXIgdGhpY2tFbmQgICA9IHBhcnNlSW50KHRva3NbN10pO1xuICAgICAgICB2YXIgYmxvY2tDb3VudCA9IHBhcnNlSW50KHRva3NbOV0pO1xuICAgICAgICB2YXIgYmxvY2tTaXplcyA9IHRva3NbMTBdLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKHgpIHtyZXR1cm4gcGFyc2VJbnQoeCl9KTtcbiAgICAgICAgdmFyIGJsb2NrU3RhcnRzID0gdG9rc1sxMV0uc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24oeCkge3JldHVybiBwYXJzZUludCh4KX0pO1xuXG4gICAgICAgIC8vIE9ubHkgaGFuZGxlIFwiYmxvY2tcIiBkYXRhIGlmIHRoaW5ncyBsb29rIHJlYXNvbmFibHkgc2FuZS5cbiAgICAgICAgaWYgKGJsb2NrU2l6ZXMubGVuZ3RoID09IGJsb2NrU3RhcnRzLmxlbmd0aCAmJiBibG9ja1NpemVzLmxlbmd0aCA9PSBibG9ja0NvdW50KSB7XG4gICAgICAgICAgICBmLnR5cGUgPSAndHJhbnNjcmlwdCdcbiAgICAgICAgICAgIHZhciBncnAgPSBuZXcgREFTR3JvdXAoKTtcbiAgICAgICAgICAgIGdycC5pZCA9IHRva3NbM107XG4gICAgICAgICAgICBncnAudHlwZSA9ICd0cmFuc2NyaXB0J1xuICAgICAgICAgICAgZ3JwLm5vdGVzID0gW107XG4gICAgICAgICAgICBmLmdyb3VwcyA9IFtncnBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodG9rcy5sZW5ndGggPiAxMikge1xuICAgICAgICAgICAgICAgIHZhciBnZW5lSWQgPSB0b2tzWzEyXTtcbiAgICAgICAgICAgICAgICB2YXIgZ2VuZU5hbWUgPSBnZW5lSWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRva3MubGVuZ3RoID4gMTMpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZU5hbWUgPSB0b2tzWzEzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGdnID0gbmV3IERBU0dyb3VwKCk7XG4gICAgICAgICAgICAgICAgZ2cuaWQgPSBnZW5lSWQ7XG4gICAgICAgICAgICAgICAgZ2cubGFiZWwgPSBnZW5lTmFtZTtcbiAgICAgICAgICAgICAgICBnZy50eXBlID0gJ2dlbmUnO1xuICAgICAgICAgICAgICAgIGYuZ3JvdXBzLnB1c2goZ2cpO1xuICAgICAgICAgICAgfSAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBzcGFucyA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IGJsb2NrQ291bnQ7ICsrYikge1xuICAgICAgICAgICAgdmFyIGJtaW4gPSBibG9ja1N0YXJ0c1tiXSArIHN0YXJ0O1xuICAgICAgICAgICAgICAgIHZhciBibWF4ID0gYm1pbiArIGJsb2NrU2l6ZXNbYl0gLSAxO1xuICAgICAgICAgICAgICAgIHZhciBzcGFuID0gbmV3IFJhbmdlKGJtaW4sIGJtYXgpO1xuICAgICAgICAgICAgICAgIGlmIChzcGFucykge1xuICAgICAgICAgICAgICAgICAgICBzcGFucyA9IHVuaW9uKHNwYW5zLCBzcGFuKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFucyA9IHNwYW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB0c0xpc3QgPSBzcGFucy5yYW5nZXMoKTtcbiAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgdHNMaXN0Lmxlbmd0aDsgKytzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRzID0gdHNMaXN0W3NdO1xuICAgICAgICAgICAgICAgIHZhciBiZiA9IHNoYWxsb3dDb3B5KGYpO1xuICAgICAgICAgICAgICAgIGJmLm1pbiA9IHRzLm1pbigpO1xuICAgICAgICAgICAgICAgIGJmLm1heCA9IHRzLm1heCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2luayhiZik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlja0VuZCA+IHRoaWNrU3RhcnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29kaW5nUmVnaW9uID0gKGYub3JpZW50YXRpb24gPT0gJysnKSA/IFxuICAgICAgICAgICAgICAgICAgICBuZXcgUmFuZ2UodGhpY2tTdGFydCwgdGhpY2tFbmQgKyAzKSA6IFxuICAgICAgICAgICAgICAgICAgICBuZXcgUmFuZ2UodGhpY2tTdGFydCAtIDMsIHRoaWNrRW5kKTtcbiAgICAgICAgICAgICAgICAvLyArLy0gMyB0byBhY2NvdW50IGZvciBzdG9wIGNvZG9uXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIHRsID0gaW50ZXJzZWN0aW9uKHNwYW5zLCBjb2RpbmdSZWdpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0bCkge1xuICAgICAgICAgICAgICAgICAgICBmLnR5cGUgPSAndHJhbnNsYXRpb24nO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGxMaXN0ID0gdGwucmFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWFkaW5nRnJhbWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gMDsgcyA8IHRsTGlzdC5sZW5ndGg7ICsrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIHJlYWRpbmcgZnJhbWUgZm9yIGV2ZXJ5IGV4b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi5vcmllbnRhdGlvbiA9PSAnLScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0bExpc3QubGVuZ3RoIC0gcyAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHMgPSB0bExpc3RbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJmID0gc2hhbGxvd0NvcHkoZik7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZi5taW4gPSB0cy5taW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJmLm1heCA9IHRzLm1heCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZi5yZWFkZnJhbWUgPSByZWFkaW5nRnJhbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gdHMubWF4KCkgLSB0cy5taW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRpbmdGcmFtZSA9IChyZWFkaW5nRnJhbWUgKyBsZW5ndGgpICUgMztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2luayhiZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2luayhmKTtcbn1cblxuQmVkUGFyc2VTZXNzaW9uLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uKCkge307XG5cbmZ1bmN0aW9uIFdpZ1BhcnNlU2Vzc2lvbihwYXJzZXIsIHNpbmspIHtcbiAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICB0aGlzLnNpbmsgPSBzaW5rO1xuICAgIHRoaXMud2lnU3RhdGUgPSBudWxsO1xufVxuXG5XaWdQYXJzZVNlc3Npb24ucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24obGluZSkge1xuICAgIHZhciB0b2tzID0gbGluZS5zcGxpdChfX1NQQUNFX1JFR0VYUCk7XG5cbiAgICBpZiAodG9rc1swXSA9PSAnZml4ZWRTdGVwJykge1xuICAgICAgICB0aGlzLndpZ1N0YXRlID0gJ2ZpeGVkU3RlcCc7XG4gICAgICAgIHRoaXMuY2hyID0gdGhpcy5wb3MgPSB0aGlzLnN0ZXAgPSBudWxsO1xuICAgICAgICB0aGlzLnNwYW4gPSAxO1xuXG4gICAgICAgIGZvciAodmFyIHRpID0gMTsgdGkgPCB0b2tzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgdmFyIG0gPSBfX0tWX1JFR0VYUC5leGVjKHRva3NbdGldKTtcbiAgICAgICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1bMV0gPT0gJ2Nocm9tJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNociA9IG1bMl07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtWzFdID09ICdzdGFydCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgPSBwYXJzZUludChtWzJdKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1bMV0gPT0gJ3N0ZXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcCA9IHBhcnNlSW50KG1bMl0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobVsxXSA9PSAnc3BhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGFuID0gcGFyc2VJbnQobVsyXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0b2tzWzBdID09ICd2YXJpYWJsZVN0ZXAnKSB7XG4gICAgICAgIHRoaXMud2lnU3RhdGUgPSAndmFyaWFibGVTdGVwJztcbiAgICAgICAgdGhpcy5jaHIgPSBudWxsO1xuICAgICAgICB0aGlzLnNwYW4gPSAxO1xuXG4gICAgICAgIGZvciAodmFyIHRpID0gMTsgdGkgPCB0b2tzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgdmFyIG0gPSBfX0tWX1JFR0VYUC5leGVjKHRva3NbdGldKTtcbiAgICAgICAgICAgIGlmIChtWzFdID09ICdjaHJvbScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNociA9IG1bMl07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1bMV0gPT0gJ3NwYW4nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zcGFuID0gcGFyc2VJbnQobVsyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRoaXMud2lnU3RhdGUpIHtcbiAgICAgICAgICAgIGlmICh0b2tzLmxlbmd0aCA8IDQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgZiA9IHtzZWdtZW50OiB0b2tzWzBdLCBcbiAgICAgICAgICAgICAgICAgICAgIG1pbjogcGFyc2VJbnQodG9rc1sxXSkgKyAxLCBcbiAgICAgICAgICAgICAgICAgICAgIG1heDogcGFyc2VJbnQodG9rc1syXSksXG4gICAgICAgICAgICAgICAgICAgICBzY29yZTogcGFyc2VGbG9hdCh0b2tzWzNdKX07XG5cbiAgICAgICAgICAgIHRoaXMuc2luayhmKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLndpZ1N0YXRlID09ICdmaXhlZFN0ZXAnKSB7XG4gICAgICAgICAgICBpZiAodG9rcy5sZW5ndGggIT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgc2NvcmUgPSBwYXJzZUZsb2F0KHRva3NbMF0pO1xuICAgICAgICAgICAgdmFyIGYgPSB7c2VnbWVudDogdGhpcy5jaHIsIG1pbjogdGhpcy5wb3MsIG1heDogdGhpcy5wb3MgKyB0aGlzLnNwYW4gLSAxLCBzY29yZTogc2NvcmV9O1xuICAgICAgICAgICAgdGhpcy5wb3MgKz0gdGhpcy5zdGVwO1xuICAgICAgICAgICAgdGhpcy5zaW5rKGYpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMud2lnU3RhdGUgPT0gJ3ZhcmlhYmxlU3RlcCcpIHtcbiAgICAgICAgICAgIGlmICh0b2tzLmxlbmd0aCAhPSAyKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBwb3MgPSBwYXJzZUludCh0b2tzWzBdKTtcbiAgICAgICAgICAgIHZhciBzY29yZSA9IHBhcnNlRmxvYXQodG9rc1sxXSk7XG4gICAgICAgICAgICB2YXIgZiA9IHtzZWdtZW50OiB0aGlzLmNociwgbWluOiBwb3MsIG1heDogcG9zICsgdGhpcy5zcGFuIC0gMSwgc2NvcmU6IHNjb3JlfTtcbiAgICAgICAgICAgIHRoaXMuc2luayhmKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuV2lnUGFyc2VTZXNzaW9uLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uKCkge307XG5cbkJlZFdpZ1BhcnNlci5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XG5cbiAgICBpZiAodGhpcy50eXBlID09ICd3aWcnKSB7XG4gICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdISVNUT0dSQU0nO1xuICAgICAgICB3aWdTdHlsZS5CR0NPTE9SID0gJ2JsdWUnO1xuICAgICAgICB3aWdTdHlsZS5IRUlHSFQ9MzA7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVmYXVsdCd9LCBudWxsLCB3aWdTdHlsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgICAgIHdpZ1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICB3aWdTdHlsZS5CR0NPTE9SID0gJ2JsdWUnXG4gICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDg7XG4gICAgICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xuICAgICAgICB3aWdTdHlsZS5MQUJFTCA9IHRydWU7XG4gICAgICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgd2lnU3R5bGUpO1xuXG4gICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdyZWQnXG4gICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDEwO1xuICAgICAgICB3aWdTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICAgICAgd2lnU3R5bGUuWklOREVYID0gMjA7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNsYXRpb24nfSwgbnVsbCwgd2lnU3R5bGUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICB2YXIgdHNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICB0c1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgICAgIHRzU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgICAgIHRzU3R5bGUuQkdDT0xPUiA9ICd3aGl0ZSc7XG4gICAgICAgIHRzU3R5bGUuSEVJR0hUID0gMTA7XG4gICAgICAgIHRzU3R5bGUuWklOREVYID0gMTA7XG4gICAgICAgIHRzU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgICAgIHRzU3R5bGUuTEFCRUwgPSB0cnVlO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zY3JpcHQnfSwgbnVsbCwgdHNTdHlsZSk7XG5cbiAgICAgICAgdmFyIGRlbnNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICBkZW5zU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcbiAgICAgICAgZGVuc1N0eWxlLkNPTE9SMSA9ICd3aGl0ZSc7XG4gICAgICAgIGRlbnNTdHlsZS5DT0xPUjIgPSAnYmxhY2snO1xuICAgICAgICBkZW5zU3R5bGUuSEVJR0hUPTMwO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlbnNpdHknfSwgbnVsbCwgZGVuc1N0eWxlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XG59XG5cbmRhbGxpYW5jZV9yZWdpc3RlclBhcnNlckZhY3RvcnkoJ2JlZCcsIGZ1bmN0aW9uKHQpIHtyZXR1cm4gbmV3IEJlZFdpZ1BhcnNlcih0KX0pO1xuZGFsbGlhbmNlX3JlZ2lzdGVyUGFyc2VyRmFjdG9yeSgnd2lnJywgZnVuY3Rpb24odCkge3JldHVybiBuZXcgQmVkV2lnUGFyc2VyKHQpfSk7XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gYmlnd2lnLmpzOiBpbmRleGVkIGJpbmFyeSBXSUcgKGFuZCBCRUQpIGZpbGVzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBzcGFucyA9IHJlcXVpcmUoJy4vc3BhbnMnKTtcbiAgICB2YXIgUmFuZ2UgPSBzcGFucy5SYW5nZTtcbiAgICB2YXIgdW5pb24gPSBzcGFucy51bmlvbjtcbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gc3BhbnMuaW50ZXJzZWN0aW9uO1xuXG4gICAgdmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XG4gICAgdmFyIERBU0ZlYXR1cmUgPSBkYXMuREFTRmVhdHVyZTtcbiAgICB2YXIgREFTR3JvdXAgPSBkYXMuREFTR3JvdXA7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XG5cbiAgICB2YXIgYmluID0gcmVxdWlyZSgnLi9iaW4nKTtcbiAgICB2YXIgcmVhZEludCA9IGJpbi5yZWFkSW50O1xuXG4gICAgdmFyIGpzemxpYiA9IHJlcXVpcmUoJ2pzemxpYicpO1xuICAgIHZhciBqc3psaWJfaW5mbGF0ZV9idWZmZXIgPSBqc3psaWIuaW5mbGF0ZUJ1ZmZlcjtcbiAgICB2YXIgYXJyYXlDb3B5ID0ganN6bGliLmFycmF5Q29weTtcbn1cblxudmFyIEJJR19XSUdfTUFHSUMgPSAweDg4OEZGQzI2O1xudmFyIEJJR19XSUdfTUFHSUNfQkUgPSAweDI2RkM4Rjg4O1xudmFyIEJJR19CRURfTUFHSUMgPSAweDg3ODlGMkVCO1xudmFyIEJJR19CRURfTUFHSUNfQkUgPSAweEVCRjI4OTg3O1xuXG5cbnZhciBCSUdfV0lHX1RZUEVfR1JBUEggPSAxO1xudmFyIEJJR19XSUdfVFlQRV9WU1RFUCA9IDI7XG52YXIgQklHX1dJR19UWVBFX0ZTVEVQID0gMztcbiAgXG52YXIgTTEgPSAyNTY7XG52YXIgTTIgPSAyNTYqMjU2O1xudmFyIE0zID0gMjU2KjI1NioyNTY7XG52YXIgTTQgPSAyNTYqMjU2KjI1NioyNTY7XG5cbnZhciBCRURfQ09MT1JfUkVHRVhQID0gbmV3IFJlZ0V4cChcIl5bMC05XSssWzAtOV0rLFswLTldK1wiKTtcblxuZnVuY3Rpb24gYndnX3JlYWRPZmZzZXQoYmEsIG8pIHtcbiAgICB2YXIgb2Zmc2V0ID0gYmFbb10gKyBiYVtvKzFdKk0xICsgYmFbbysyXSpNMiArIGJhW28rM10qTTMgKyBiYVtvKzRdKk00O1xuICAgIHJldHVybiBvZmZzZXQ7XG59XG5cbmZ1bmN0aW9uIEJpZ1dpZygpIHtcbn1cblxuQmlnV2lnLnByb3RvdHlwZS5yZWFkQ2hyb21UcmVlID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuY2hyb21zVG9JRHMgPSB7fTtcbiAgICB0aGlzLmlkc1RvQ2hyb21zID0ge307XG4gICAgdGhpcy5tYXhJRCA9IDA7XG5cbiAgICB2YXIgdWRvID0gdGhpcy51bnpvb21lZERhdGFPZmZzZXQ7XG4gICAgdmFyIGViID0gKHVkbyAtIHRoaXMuY2hyb21UcmVlT2Zmc2V0KSAmIDM7XG4gICAgdWRvID0gdWRvICsgNCAtIGViO1xuXG4gICAgdGhpcy5kYXRhLnNsaWNlKHRoaXMuY2hyb21UcmVlT2Zmc2V0LCB1ZG8gLSB0aGlzLmNocm9tVHJlZU9mZnNldCkuZmV0Y2goZnVuY3Rpb24oYnB0KSB7XG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGJwdCk7XG4gICAgICAgIHZhciBzYSA9IG5ldyBJbnQxNkFycmF5KGJwdCk7XG4gICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KGJwdCk7XG4gICAgICAgIHZhciBicHRNYWdpYyA9IGxhWzBdO1xuICAgICAgICB2YXIgYmxvY2tTaXplID0gbGFbMV07XG4gICAgICAgIHZhciBrZXlTaXplID0gbGFbMl07XG4gICAgICAgIHZhciB2YWxTaXplID0gbGFbM107XG4gICAgICAgIHZhciBpdGVtQ291bnQgPSBid2dfcmVhZE9mZnNldChiYSwgMTYpO1xuICAgICAgICB2YXIgcm9vdE5vZGVPZmZzZXQgPSAzMjtcblxuICAgICAgICB2YXIgYnB0UmVhZE5vZGUgPSBmdW5jdGlvbihvZmZzZXQpIHtcbiAgICAgICAgICAgIHZhciBub2RlVHlwZSA9IGJhW29mZnNldF07XG4gICAgICAgICAgICB2YXIgY250ID0gc2FbKG9mZnNldC8yKSArIDFdO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XG4gICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGNudDsgKytuKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVUeXBlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGtleVNpemU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZE9mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gODtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRPZmZzZXQgLT0gdGhpc0IuY2hyb21UcmVlT2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICBicHRSZWFkTm9kZShjaGlsZE9mZnNldCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBraSA9IDA7IGtpIDwga2V5U2l6ZTsgKytraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJDb2RlID0gYmFbb2Zmc2V0KytdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNocm9tSWQgPSAoYmFbb2Zmc2V0KzNdPDwyNCkgfCAoYmFbb2Zmc2V0KzJdPDwxNikgfCAoYmFbb2Zmc2V0KzFdPDw4KSB8IChiYVtvZmZzZXQrMF0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hyb21TaXplID0gKGJhW29mZnNldCArIDddPDwyNCkgfCAoYmFbb2Zmc2V0KzZdPDwxNikgfCAoYmFbb2Zmc2V0KzVdPDw4KSB8IChiYVtvZmZzZXQrNF0pO1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gODtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5jaHJvbXNUb0lEc1trZXldID0gY2hyb21JZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKCdjaHInKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5jaHJvbXNUb0lEc1trZXkuc3Vic3RyKDMpXSA9IGNocm9tSWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuaWRzVG9DaHJvbXNbY2hyb21JZF0gPSBrZXk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLm1heElEID0gTWF0aC5tYXgodGhpc0IubWF4SUQsIGNocm9tSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgYnB0UmVhZE5vZGUocm9vdE5vZGVPZmZzZXQpO1xuXG4gICAgICAgIGNhbGxiYWNrKHRoaXNCKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gQmlnV2lnVmlldyhid2csIGNpclRyZWVPZmZzZXQsIGNpclRyZWVMZW5ndGgsIGlzU3VtbWFyeSkge1xuICAgIHRoaXMuYndnID0gYndnO1xuICAgIHRoaXMuY2lyVHJlZU9mZnNldCA9IGNpclRyZWVPZmZzZXQ7XG4gICAgdGhpcy5jaXJUcmVlTGVuZ3RoID0gY2lyVHJlZUxlbmd0aDtcbiAgICB0aGlzLmlzU3VtbWFyeSA9IGlzU3VtbWFyeTtcbn1cblxuXG5cbkJpZ1dpZ1ZpZXcucHJvdG90eXBlLnJlYWRXaWdEYXRhID0gZnVuY3Rpb24oY2hyTmFtZSwgbWluLCBtYXgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGNociA9IHRoaXMuYndnLmNocm9tc1RvSURzW2Nock5hbWVdO1xuICAgIGlmIChjaHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBOb3QgYW4gZXJyb3IgYmVjYXVzZSBzb21lIC5id2dzIHdvbid0IGhhdmUgZGF0YSBmb3IgYWxsIGNocm9tb3NvbWVzLlxuICAgICAgICByZXR1cm4gY2FsbGJhY2soW10pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVhZFdpZ0RhdGFCeUlkKGNociwgbWluLCBtYXgsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbkJpZ1dpZ1ZpZXcucHJvdG90eXBlLnJlYWRXaWdEYXRhQnlJZCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICBpZiAoIXRoaXMuY2lySGVhZGVyKSB7XG4gICAgICAgIHRoaXMuYndnLmRhdGEuc2xpY2UodGhpcy5jaXJUcmVlT2Zmc2V0LCA0OCkuZmV0Y2goZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzQi5jaXJIZWFkZXIgPSByZXN1bHQ7XG4gICAgICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheSh0aGlzQi5jaXJIZWFkZXIpO1xuICAgICAgICAgICAgdGhpc0IuY2lyQmxvY2tTaXplID0gbGFbMV07XG4gICAgICAgICAgICB0aGlzQi5yZWFkV2lnRGF0YUJ5SWQoY2hyLCBtaW4sIG1heCwgY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBibG9ja3NUb0ZldGNoID0gW107XG4gICAgdmFyIG91dHN0YW5kaW5nID0gMDtcblxuICAgIHZhciBiZWZvcmVCV0cgPSBEYXRlLm5vdygpO1xuXG4gICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uKGNocm9tSWQsIGZtaW4sIGZtYXgsIHRva3MpIHtcbiAgICAgICAgcmV0dXJuICgoY2hyIDwgMCB8fCBjaHJvbUlkID09IGNocikgJiYgZm1pbiA8PSBtYXggJiYgZm1heCA+PSBtaW4pO1xuICAgIH1cblxuICAgIHZhciBjaXJGb2JSZWN1ciA9IGZ1bmN0aW9uKG9mZnNldCwgbGV2ZWwpIHtcbiAgICAgICAgaWYgKHRoaXNCLmJ3Zy5pbnN0cnVtZW50KVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xldmVsPScgKyBsZXZlbCArICc7IG9mZnNldD0nICsgb2Zmc2V0ICsgJzsgdGltZT0nICsgKERhdGUubm93KCl8MCkpO1xuXG4gICAgICAgIG91dHN0YW5kaW5nICs9IG9mZnNldC5sZW5ndGg7XG5cbiAgICAgICAgaWYgKG9mZnNldC5sZW5ndGggPT0gMSAmJiBvZmZzZXRbMF0gLSB0aGlzQi5jaXJUcmVlT2Zmc2V0ID09IDQ4ICYmIHRoaXNCLmNhY2hlZENpclJvb3QpIHtcbiAgICAgICAgICAgIGNpckZvYlJlY3VyMih0aGlzQi5jYWNoZWRDaXJSb290LCAwLCBsZXZlbCk7XG4gICAgICAgICAgICAtLW91dHN0YW5kaW5nO1xuICAgICAgICAgICAgaWYgKG91dHN0YW5kaW5nID09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzQi5mZXRjaEZlYXR1cmVzKGZpbHRlciwgYmxvY2tzVG9GZXRjaCwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1heENpckJsb2NrU3BhbiA9IDQgKyAgKHRoaXNCLmNpckJsb2NrU2l6ZSAqIDMyKTsgICAvLyBVcHBlciBib3VuZCBvbiBzaXplLCBiYXNlZCBvbiBhIGNvbXBsZXRlbHkgZnVsbCBsZWFmIG5vZGUuXG4gICAgICAgIHZhciBzcGFucztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvZmZzZXQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBibG9ja1NwYW4gPSBuZXcgUmFuZ2Uob2Zmc2V0W2ldLCBvZmZzZXRbaV0gKyBtYXhDaXJCbG9ja1NwYW4pO1xuICAgICAgICAgICAgc3BhbnMgPSBzcGFucyA/IHVuaW9uKHNwYW5zLCBibG9ja1NwYW4pIDogYmxvY2tTcGFuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgZmV0Y2hSYW5nZXMgPSBzcGFucy5yYW5nZXMoKTtcbiAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCBmZXRjaFJhbmdlcy5sZW5ndGg7ICsrcikge1xuICAgICAgICAgICAgdmFyIGZyID0gZmV0Y2hSYW5nZXNbcl07XG4gICAgICAgICAgICBjaXJGb2JTdGFydEZldGNoKG9mZnNldCwgZnIsIGxldmVsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjaXJGb2JTdGFydEZldGNoID0gZnVuY3Rpb24ob2Zmc2V0LCBmciwgbGV2ZWwsIGF0dGVtcHRzKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBmci5tYXgoKSAtIGZyLm1pbigpO1xuICAgICAgICB0aGlzQi5id2cuZGF0YS5zbGljZShmci5taW4oKSwgZnIubWF4KCkgLSBmci5taW4oKSkuZmV0Y2goZnVuY3Rpb24ocmVzdWx0QnVmZmVyKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9mZnNldC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChmci5jb250YWlucyhvZmZzZXRbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNpckZvYlJlY3VyMihyZXN1bHRCdWZmZXIsIG9mZnNldFtpXSAtIGZyLm1pbigpLCBsZXZlbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldFtpXSAtIHRoaXNCLmNpclRyZWVPZmZzZXQgPT0gNDggJiYgb2Zmc2V0W2ldIC0gZnIubWluKCkgPT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmNhY2hlZENpclJvb3QgPSByZXN1bHRCdWZmZXI7XG5cbiAgICAgICAgICAgICAgICAgICAgLS1vdXRzdGFuZGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHN0YW5kaW5nID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmZldGNoRmVhdHVyZXMoZmlsdGVyLCBibG9ja3NUb0ZldGNoLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBjaXJGb2JSZWN1cjIgPSBmdW5jdGlvbihjaXJCbG9ja0RhdGEsIG9mZnNldCwgbGV2ZWwpIHtcbiAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkoY2lyQmxvY2tEYXRhKTtcbiAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkoY2lyQmxvY2tEYXRhKTtcbiAgICAgICAgdmFyIGxhID0gbmV3IEludDMyQXJyYXkoY2lyQmxvY2tEYXRhKTtcblxuICAgICAgICB2YXIgaXNMZWFmID0gYmFbb2Zmc2V0XTtcbiAgICAgICAgdmFyIGNudCA9IHNhW29mZnNldC8yICsgMV07XG4gICAgICAgIG9mZnNldCArPSA0O1xuXG4gICAgICAgIGlmIChpc0xlYWYgIT0gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbnQ7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBsbyA9IG9mZnNldC80O1xuICAgICAgICAgICAgICAgIHZhciBzdGFydENocm9tID0gbGFbbG9dO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydEJhc2UgPSBsYVtsbyArIDFdO1xuICAgICAgICAgICAgICAgIHZhciBlbmRDaHJvbSA9IGxhW2xvICsgMl07XG4gICAgICAgICAgICAgICAgdmFyIGVuZEJhc2UgPSBsYVtsbyArIDNdO1xuICAgICAgICAgICAgICAgIHZhciBibG9ja09mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCBvZmZzZXQrMTYpO1xuICAgICAgICAgICAgICAgIHZhciBibG9ja1NpemUgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KzI0KTtcbiAgICAgICAgICAgICAgICBpZiAoKChjaHIgPCAwIHx8IHN0YXJ0Q2hyb20gPCBjaHIpIHx8IChzdGFydENocm9tID09IGNociAmJiBzdGFydEJhc2UgPD0gbWF4KSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKChjaHIgPCAwIHx8IGVuZENocm9tICAgPiBjaHIpIHx8IChlbmRDaHJvbSA9PSBjaHIgJiYgZW5kQmFzZSA+PSBtaW4pKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1RvRmV0Y2gucHVzaCh7b2Zmc2V0OiBibG9ja09mZnNldCwgc2l6ZTogYmxvY2tTaXplfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9mZnNldCArPSAzMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciByZWN1ck9mZnNldHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY250OyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG8gPSBvZmZzZXQvNDtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRDaHJvbSA9IGxhW2xvXTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRCYXNlID0gbGFbbG8gKyAxXTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kQ2hyb20gPSBsYVtsbyArIDJdO1xuICAgICAgICAgICAgICAgIHZhciBlbmRCYXNlID0gbGFbbG8gKyAzXTtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2tPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KzE2KTtcbiAgICAgICAgICAgICAgICBpZiAoKGNociA8IDAgfHwgc3RhcnRDaHJvbSA8IGNociB8fCAoc3RhcnRDaHJvbSA9PSBjaHIgJiYgc3RhcnRCYXNlIDw9IG1heCkpICYmXG4gICAgICAgICAgICAgICAgICAgIChjaHIgPCAwIHx8IGVuZENocm9tICAgPiBjaHIgfHwgKGVuZENocm9tID09IGNociAmJiBlbmRCYXNlID49IG1pbikpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJPZmZzZXRzLnB1c2goYmxvY2tPZmZzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMjQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVjdXJPZmZzZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjaXJGb2JSZWN1cihyZWN1ck9mZnNldHMsIGxldmVsICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY2lyRm9iUmVjdXIoW3RoaXNCLmNpclRyZWVPZmZzZXQgKyA0OF0sIDEpO1xufVxuXG5cbkJpZ1dpZ1ZpZXcucHJvdG90eXBlLmZldGNoRmVhdHVyZXMgPSBmdW5jdGlvbihmaWx0ZXIsIGJsb2Nrc1RvRmV0Y2gsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIGJsb2Nrc1RvRmV0Y2guc29ydChmdW5jdGlvbihiMCwgYjEpIHtcbiAgICAgICAgcmV0dXJuIChiMC5vZmZzZXR8MCkgLSAoYjEub2Zmc2V0fDApO1xuICAgIH0pO1xuXG4gICAgaWYgKGJsb2Nrc1RvRmV0Y2gubGVuZ3RoID09IDApIHtcbiAgICAgICAgY2FsbGJhY2soW10pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgICAgICB2YXIgY3JlYXRlRmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgZm1pbiwgZm1heCwgb3B0cykge1xuICAgICAgICAgICAgaWYgKCFvcHRzKSB7XG4gICAgICAgICAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIHZhciBmID0gbmV3IERBU0ZlYXR1cmUoKTtcbiAgICAgICAgICAgIGYuX2Nocm9tSWQgPSBjaHI7XG4gICAgICAgICAgICBmLnNlZ21lbnQgPSB0aGlzQi5id2cuaWRzVG9DaHJvbXNbY2hyXTtcbiAgICAgICAgICAgIGYubWluID0gZm1pbjtcbiAgICAgICAgICAgIGYubWF4ID0gZm1heDtcbiAgICAgICAgICAgIGYudHlwZSA9IHRoaXNCLmJ3Zy50eXBlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIG9wdHMpIHtcbiAgICAgICAgICAgICAgICBmW2tdID0gb3B0c1trXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdHJhbXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChibG9ja3NUb0ZldGNoLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFmdGVyQldHID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAvLyBkbG9nKCdCV0cgZmV0Y2ggdG9vayAnICsgKGFmdGVyQldHIC0gYmVmb3JlQldHKSArICdtcycpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZlYXR1cmVzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47ICAvLyBqdXN0IGluIGNhc2UuLi5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gYmxvY2tzVG9GZXRjaFswXTtcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2suZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5wYXJzZUZlYXR1cmVzKGJsb2NrLmRhdGEsIGNyZWF0ZUZlYXR1cmUsIGZpbHRlcik7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1RvRmV0Y2guc3BsaWNlKDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICB0cmFtcCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmZXRjaFN0YXJ0ID0gYmxvY2sub2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmV0Y2hTaXplID0gYmxvY2suc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpID0gMTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGJpIDwgYmxvY2tzVG9GZXRjaC5sZW5ndGggJiYgYmxvY2tzVG9GZXRjaFtiaV0ub2Zmc2V0ID09IChmZXRjaFN0YXJ0ICsgZmV0Y2hTaXplKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hTaXplICs9IGJsb2Nrc1RvRmV0Y2hbYmldLnNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICArK2JpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuYndnLmRhdGEuc2xpY2UoZmV0Y2hTdGFydCwgZmV0Y2hTaXplKS5mZXRjaChmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChvZmZzZXQgPCBmZXRjaFNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmIgPSBibG9ja3NUb0ZldGNoW2JpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzQi5id2cudW5jb21wcmVzc0J1ZlNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBqc3psaWJfaW5mbGF0ZV9idWZmZXIocmVzdWx0LCBvZmZzZXQgKyAyLCBmYi5zaXplIC0gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IG5ldyBVaW50OEFycmF5KGZiLnNpemUpOyAgICAvLyBGSVhNRSBpcyB0aGlzIHJlYWxseSB0aGUgYmVzdCB3ZSBjYW4gZG8/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5Q29weShuZXcgVWludDhBcnJheShyZXN1bHQsIG9mZnNldCwgZmIuc2l6ZSksIDAsIHRtcCwgMCwgZmIuc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB0bXAuYnVmZmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYi5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gZmIuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2JpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyYW1wKCk7XG4gICAgfVxufVxuXG5CaWdXaWdWaWV3LnByb3RvdHlwZS5wYXJzZUZlYXR1cmVzID0gZnVuY3Rpb24oZGF0YSwgY3JlYXRlRmVhdHVyZSwgZmlsdGVyKSB7XG4gICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG5cbiAgICBpZiAodGhpcy5pc1N1bW1hcnkpIHtcbiAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkoZGF0YSk7XG4gICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KGRhdGEpO1xuICAgICAgICB2YXIgZmEgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuXG4gICAgICAgIHZhciBpdGVtQ291bnQgPSBkYXRhLmJ5dGVMZW5ndGgvMzI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbUNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIHZhciBjaHJvbUlkID0gICBsYVsoaSo4KV07XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSAgICAgbGFbKGkqOCkrMV07XG4gICAgICAgICAgICB2YXIgZW5kID0gICAgICAgbGFbKGkqOCkrMl07XG4gICAgICAgICAgICB2YXIgdmFsaWRDbnQgPSAgbGFbKGkqOCkrM107XG4gICAgICAgICAgICB2YXIgbWluVmFsICAgID0gZmFbKGkqOCkrNF07XG4gICAgICAgICAgICB2YXIgbWF4VmFsICAgID0gZmFbKGkqOCkrNV07XG4gICAgICAgICAgICB2YXIgc3VtRGF0YSAgID0gZmFbKGkqOCkrNl07XG4gICAgICAgICAgICB2YXIgc3VtU3FEYXRhID0gZmFbKGkqOCkrN107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmaWx0ZXIoY2hyb21JZCwgc3RhcnQgKyAxLCBlbmQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1bW1hcnlPcHRzID0ge3R5cGU6ICdiaWd3aWcnLCBzY29yZTogc3VtRGF0YS92YWxpZENudCwgbWF4U2NvcmU6IG1heFZhbH07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYndnLnR5cGUgPT0gJ2JpZ2JlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeU9wdHMudHlwZSA9ICdkZW5zaXR5JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3JlYXRlRmVhdHVyZShjaHJvbUlkLCBzdGFydCArIDEsIGVuZCwgc3VtbWFyeU9wdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmJ3Zy50eXBlID09ICdiaWd3aWcnKSB7XG4gICAgICAgIHZhciBzYSA9IG5ldyBJbnQxNkFycmF5KGRhdGEpO1xuICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheShkYXRhKTtcbiAgICAgICAgdmFyIGZhID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcblxuICAgICAgICB2YXIgY2hyb21JZCA9IGxhWzBdO1xuICAgICAgICB2YXIgYmxvY2tTdGFydCA9IGxhWzFdO1xuICAgICAgICB2YXIgYmxvY2tFbmQgPSBsYVsyXTtcbiAgICAgICAgdmFyIGl0ZW1TdGVwID0gbGFbM107XG4gICAgICAgIHZhciBpdGVtU3BhbiA9IGxhWzRdO1xuICAgICAgICB2YXIgYmxvY2tUeXBlID0gYmFbMjBdO1xuICAgICAgICB2YXIgaXRlbUNvdW50ID0gc2FbMTFdO1xuICAgICAgICBcbiAgICAgICAgaWYgKGJsb2NrVHlwZSA9PSBCSUdfV0lHX1RZUEVfRlNURVApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbUNvdW50OyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2NvcmUgPSBmYVtpICsgNl07XG4gICAgICAgICAgICAgICAgdmFyIGZtaW4gPSBibG9ja1N0YXJ0ICsgKGkqaXRlbVN0ZXApICsgMSwgZm1heCA9IGJsb2NrU3RhcnQgKyAoaSppdGVtU3RlcCkgKyBpdGVtU3BhbjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyKGNocm9tSWQsIGZtaW4sIGZtYXgpKVxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVGZWF0dXJlKGNocm9tSWQsIGZtaW4sIGZtYXgsIHtzY29yZTogc2NvcmV9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChibG9ja1R5cGUgPT0gQklHX1dJR19UWVBFX1ZTVEVQKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1Db3VudDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gbGFbKGkqMikgKyA2XSArIDE7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IHN0YXJ0ICsgaXRlbVNwYW4gLSAxO1xuICAgICAgICAgICAgICAgIHZhciBzY29yZSA9IGZhWyhpKjIpICsgN107XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlcihjaHJvbUlkLCBzdGFydCwgZW5kKSlcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmVhdHVyZShjaHJvbUlkLCBzdGFydCwgZW5kLCB7c2NvcmU6IHNjb3JlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYmxvY2tUeXBlID09IEJJR19XSUdfVFlQRV9HUkFQSCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IGxhWyhpKjMpICsgNl0gKyAxO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgICA9IGxhWyhpKjMpICsgN107XG4gICAgICAgICAgICAgICAgdmFyIHNjb3JlID0gZmFbKGkqMykgKyA4XTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPiBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBlbmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIoY2hyb21JZCwgc3RhcnQsIGVuZCkpXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZlYXR1cmUoY2hyb21JZCwgc3RhcnQsIGVuZCwge3Njb3JlOiBzY29yZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0N1cnJlbnRseSBub3QgaGFuZGxpbmcgYndnVHlwZT0nICsgYmxvY2tUeXBlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5id2cudHlwZSA9PSAnYmlnYmVkJykge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgdmFyIGRmYyA9IHRoaXMuYndnLmRlZmluZWRGaWVsZENvdW50O1xuICAgICAgICB2YXIgc2NoZW1hID0gdGhpcy5id2cuc2NoZW1hO1xuXG4gICAgICAgIHdoaWxlIChvZmZzZXQgPCBiYS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBjaHJvbUlkID0gKGJhW29mZnNldCszXTw8MjQpIHwgKGJhW29mZnNldCsyXTw8MTYpIHwgKGJhW29mZnNldCsxXTw8OCkgfCAoYmFbb2Zmc2V0KzBdKTtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IChiYVtvZmZzZXQrN108PDI0KSB8IChiYVtvZmZzZXQrNl08PDE2KSB8IChiYVtvZmZzZXQrNV08PDgpIHwgKGJhW29mZnNldCs0XSk7XG4gICAgICAgICAgICB2YXIgZW5kID0gKGJhW29mZnNldCsxMV08PDI0KSB8IChiYVtvZmZzZXQrMTBdPDwxNikgfCAoYmFbb2Zmc2V0KzldPDw4KSB8IChiYVtvZmZzZXQrOF0pO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IDEyO1xuICAgICAgICAgICAgdmFyIHJlc3QgPSAnJztcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoID0gYmFbb2Zmc2V0KytdO1xuICAgICAgICAgICAgICAgIGlmIChjaCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3QgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZmVhdHVyZU9wdHMgPSB7fTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGJlZENvbHVtbnM7XG4gICAgICAgICAgICBpZiAocmVzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYmVkQ29sdW1ucyA9IHJlc3Quc3BsaXQoJ1xcdCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBiZWRDb2x1bW5zID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmVkQ29sdW1ucy5sZW5ndGggPiAwICYmIGRmYyA+IDMpIHtcbiAgICAgICAgICAgICAgICBmZWF0dXJlT3B0cy5sYWJlbCA9IGJlZENvbHVtbnNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmVkQ29sdW1ucy5sZW5ndGggPiAxICYmIGRmYyA+IDQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2NvcmUgPSBwYXJzZUludChiZWRDb2x1bW5zWzFdKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHNjb3JlKSlcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMuc2NvcmUgPSBzY29yZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiZWRDb2x1bW5zLmxlbmd0aCA+IDIgJiYgZGZjID4gNSkge1xuICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLm9yaWVudGF0aW9uID0gYmVkQ29sdW1uc1syXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiZWRDb2x1bW5zLmxlbmd0aCA+IDUgJiYgZGZjID4gOCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGJlZENvbHVtbnNbNV07XG4gICAgICAgICAgICAgICAgaWYgKEJFRF9DT0xPUl9SRUdFWFAudGVzdChjb2xvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMuaXRlbVJnYiA9ICdyZ2IoJyArIGNvbG9yICsgJyknO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJlZENvbHVtbnMubGVuZ3RoID4gZGZjLTMgJiYgc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY29sID0gZGZjIC0gMzsgY29sIDwgYmVkQ29sdW1ucy5sZW5ndGg7ICsrY29sKSB7XG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzW3NjaGVtYS5maWVsZHNbY29sKzNdLm5hbWVdID0gYmVkQ29sdW1uc1tjb2xdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZpbHRlcihjaHJvbUlkLCBzdGFydCArIDEsIGVuZCwgYmVkQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGZjIDwgMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmVhdHVyZShjaHJvbUlkLCBzdGFydCArIDEsIGVuZCwgZmVhdHVyZU9wdHMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aGlja1N0YXJ0ID0gYmVkQ29sdW1uc1szXXwwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpY2tFbmQgICA9IGJlZENvbHVtbnNbNF18MDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrQ291bnQgPSBiZWRDb2x1bW5zWzZdfDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9ja1NpemVzID0gYmVkQ29sdW1uc1s3XS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2tTdGFydHMgPSBiZWRDb2x1bW5zWzhdLnNwbGl0KCcsJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVPcHRzLmV4b25GcmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleG9uRnJhbWVzID0gZmVhdHVyZU9wdHMuZXhvbkZyYW1lcy5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMuZXhvbkZyYW1lcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMudHlwZSA9ICd0cmFuc2NyaXB0J1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JwID0gbmV3IERBU0dyb3VwKCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gZmVhdHVyZU9wdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdycFtrXSA9IGZlYXR1cmVPcHRzW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGdycC5pZCA9IGJlZENvbHVtbnNbMF07XG4gICAgICAgICAgICAgICAgICAgIGdycC5zZWdtZW50ID0gdGhpcy5id2cuaWRzVG9DaHJvbXNbY2hyb21JZF07XG4gICAgICAgICAgICAgICAgICAgIGdycC5taW4gPSBzdGFydCArIDE7XG4gICAgICAgICAgICAgICAgICAgIGdycC5tYXggPSBlbmQ7XG4gICAgICAgICAgICAgICAgICAgIGdycC5ub3RlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlT3B0cy5ncm91cHMgPSBbZ3JwXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZpbmcgdG93YXJkcyB1c2luZyBiaWdHZW5lUHJlZCBtb2RlbCwgYnV0IHdpbGxcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RpbGwgc3VwcG9ydCBvbGQgRGFsbGlhbmNlLXN0eWxlIEJFRDEyK2dlbmUtbmFtZSBmb3IgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvcmVzZWVhYmxlIGZ1dHVyZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJlZENvbHVtbnMubGVuZ3RoID4gOSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdlbmVJZCA9IGZlYXR1cmVPcHRzLmdlbmVOYW1lIHx8IGJlZENvbHVtbnNbOV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VuZU5hbWUgPSBnZW5lSWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmVkQ29sdW1ucy5sZW5ndGggPiAxMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVOYW1lID0gYmVkQ29sdW1uc1sxMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZU9wdHMuZ2VuZU5hbWUyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVOYW1lID0gZmVhdHVyZU9wdHMuZ2VuZU5hbWUyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2cgPSBzaGFsbG93Q29weShncnApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2cuaWQgPSBnZW5lSWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZy5sYWJlbCA9IGdlbmVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2cudHlwZSA9ICdnZW5lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLmdyb3Vwcy5wdXNoKGdnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGFuTGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IGJsb2NrQ291bnQ7ICsrYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJtaW4gPSAoYmxvY2tTdGFydHNbYl18MCkgKyBzdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibWF4ID0gYm1pbiArIChibG9ja1NpemVzW2JdfDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW4gPSBuZXcgUmFuZ2UoYm1pbiwgYm1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuTGlzdC5wdXNoKHNwYW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGFucyA9IHVuaW9uKHNwYW5MaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB0c0xpc3QgPSBzcGFucy5yYW5nZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCB0c0xpc3QubGVuZ3RoOyArK3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cyA9IHRzTGlzdFtzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZlYXR1cmUoY2hyb21JZCwgdHMubWluKCkgKyAxLCB0cy5tYXgoKSwgZmVhdHVyZU9wdHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaWNrRW5kID4gdGhpY2tTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGluZ1JlZ2lvbiA9IChmZWF0dXJlT3B0cy5vcmllbnRhdGlvbiA9PSAnKycpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmFuZ2UodGhpY2tTdGFydCwgdGhpY2tFbmQgKyAzKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJhbmdlKHRoaWNrU3RhcnQgLSAzLCB0aGlja0VuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKy8tIDMgdG8gYWNjb3VudCBmb3Igc3RvcCBjb2RvblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGwgPSBpbnRlcnNlY3Rpb24oc3BhbnMsIGNvZGluZ1JlZ2lvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlT3B0cy50eXBlID0gJ3RyYW5zbGF0aW9uJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGxMaXN0ID0gdGwucmFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRpbmdGcmFtZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGxPZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICh0bExpc3RbMF0ubWluKCkgPiB0c0xpc3RbdGxPZmZzZXRdLm1heCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bE9mZnNldCsrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCB0bExpc3QubGVuZ3RoOyArK3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIHJlYWRpbmcgZnJhbWUgZm9yIGV2ZXJ5IGV4b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVPcHRzLm9yaWVudGF0aW9uID09ICctJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGxMaXN0Lmxlbmd0aCAtIHMgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHMgPSB0bExpc3RbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlT3B0cy5yZWFkZnJhbWUgPSByZWFkaW5nRnJhbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleG9uRnJhbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnJmID0gcGFyc2VJbnQoZXhvbkZyYW1lc1tpbmRleCArIHRsT2Zmc2V0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGJyZikgPT09ICdudW1iZXInICYmIGJyZiA+PSAwICYmIGJyZiA8PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMucmVhZGZyYW1lID0gYnJmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLnJlYWRmcmFtZUV4cGxpY2l0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gdHMubWF4KCkgLSB0cy5taW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGluZ0ZyYW1lID0gKHJlYWRpbmdGcmFtZSArIGxlbmd0aCkgJSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVGZWF0dXJlKGNocm9tSWQsIHRzLm1pbigpICsgMSwgdHMubWF4KCksIGZlYXR1cmVPcHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBFcnJvcihcIkRvbid0IGtub3cgd2hhdCB0byBkbyB3aXRoIFwiICsgdGhpcy5id2cudHlwZSk7XG4gICAgfVxufVxuXG4vL1xuLy8gbmFzdHkgY3V0L3Bhc3RlLCBzaG91bGQgcm9sbCBiYWNrIGluIVxuLy9cblxuQmlnV2lnVmlldy5wcm90b3R5cGUuZ2V0Rmlyc3RBZGphY2VudCA9IGZ1bmN0aW9uKGNock5hbWUsIHBvcywgZGlyLCBjYWxsYmFjaykge1xuICAgIHZhciBjaHIgPSB0aGlzLmJ3Zy5jaHJvbXNUb0lEc1tjaHJOYW1lXTtcbiAgICBpZiAoY2hyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gTm90IGFuIGVycm9yIGJlY2F1c2Ugc29tZSAuYndncyB3b24ndCBoYXZlIGRhdGEgZm9yIGFsbCBjaHJvbW9zb21lcy5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFtdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmdldEZpcnN0QWRqYWNlbnRCeUlkKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbkJpZ1dpZ1ZpZXcucHJvdG90eXBlLmdldEZpcnN0QWRqYWNlbnRCeUlkID0gZnVuY3Rpb24oY2hyLCBwb3MsIGRpciwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIGlmICghdGhpcy5jaXJIZWFkZXIpIHtcbiAgICAgICAgdGhpcy5id2cuZGF0YS5zbGljZSh0aGlzLmNpclRyZWVPZmZzZXQsIDQ4KS5mZXRjaChmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXNCLmNpckhlYWRlciA9IHJlc3VsdDtcbiAgICAgICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KHRoaXNCLmNpckhlYWRlcik7XG4gICAgICAgICAgICB0aGlzQi5jaXJCbG9ja1NpemUgPSBsYVsxXTtcbiAgICAgICAgICAgIHRoaXNCLmdldEZpcnN0QWRqYWNlbnRCeUlkKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYmxvY2tUb0ZldGNoID0gbnVsbDtcbiAgICB2YXIgYmVzdEJsb2NrQ2hyID0gLTE7XG4gICAgdmFyIGJlc3RCbG9ja09mZnNldCA9IC0xO1xuXG4gICAgdmFyIG91dHN0YW5kaW5nID0gMDtcblxuICAgIHZhciBiZWZvcmVCV0cgPSBEYXRlLm5vdygpO1xuXG4gICAgdmFyIGNpckZvYlJlY3VyID0gZnVuY3Rpb24ob2Zmc2V0LCBsZXZlbCkge1xuICAgICAgICBvdXRzdGFuZGluZyArPSBvZmZzZXQubGVuZ3RoO1xuXG4gICAgICAgIHZhciBtYXhDaXJCbG9ja1NwYW4gPSA0ICsgICh0aGlzQi5jaXJCbG9ja1NpemUgKiAzMik7ICAgLy8gVXBwZXIgYm91bmQgb24gc2l6ZSwgYmFzZWQgb24gYSBjb21wbGV0ZWx5IGZ1bGwgbGVhZiBub2RlLlxuICAgICAgICB2YXIgc3BhbnM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2Zmc2V0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgYmxvY2tTcGFuID0gbmV3IFJhbmdlKG9mZnNldFtpXSwgb2Zmc2V0W2ldICsgbWF4Q2lyQmxvY2tTcGFuKTtcbiAgICAgICAgICAgIHNwYW5zID0gc3BhbnMgPyB1bmlvbihzcGFucywgYmxvY2tTcGFuKSA6IGJsb2NrU3BhbjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIGZldGNoUmFuZ2VzID0gc3BhbnMucmFuZ2VzKCk7XG4gICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgZmV0Y2hSYW5nZXMubGVuZ3RoOyArK3IpIHtcbiAgICAgICAgICAgIHZhciBmciA9IGZldGNoUmFuZ2VzW3JdO1xuICAgICAgICAgICAgY2lyRm9iU3RhcnRGZXRjaChvZmZzZXQsIGZyLCBsZXZlbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY2lyRm9iU3RhcnRGZXRjaCA9IGZ1bmN0aW9uKG9mZnNldCwgZnIsIGxldmVsLCBhdHRlbXB0cykge1xuICAgICAgICB2YXIgbGVuZ3RoID0gZnIubWF4KCkgLSBmci5taW4oKTtcbiAgICAgICAgdGhpc0IuYndnLmRhdGEuc2xpY2UoZnIubWluKCksIGZyLm1heCgpIC0gZnIubWluKCkpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdEJ1ZmZlcikge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvZmZzZXQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoZnIuY29udGFpbnMob2Zmc2V0W2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBjaXJGb2JSZWN1cjIocmVzdWx0QnVmZmVyLCBvZmZzZXRbaV0gLSBmci5taW4oKSwgbGV2ZWwpO1xuICAgICAgICAgICAgICAgICAgICAtLW91dHN0YW5kaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0c3RhbmRpbmcgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFibG9ja1RvRmV0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyID4gMCAmJiAoY2hyICE9IDAgfHwgcG9zID4gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNCLmdldEZpcnN0QWRqYWNlbnRCeUlkKDAsIDAsIGRpciwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlyIDwgMCAmJiAoY2hyICE9IHRoaXNCLmJ3Zy5tYXhJRCB8fCBwb3MgPCAxMDAwMDAwMDAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc0IuZ2V0Rmlyc3RBZGphY2VudEJ5SWQodGhpc0IuYndnLm1heElELCAxMDAwMDAwMDAwLCBkaXIsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuZmV0Y2hGZWF0dXJlcyhmdW5jdGlvbihjaHJ4LCBmbWluLCBmbWF4LCB0b2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkaXIgPCAwICYmIChjaHJ4IDwgY2hyIHx8IGZtYXggPCBwb3MpKSB8fCAoZGlyID4gMCAmJiAoY2hyeCA+IGNociB8fCBmbWluID4gcG9zKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBbYmxvY2tUb0ZldGNoXSwgZnVuY3Rpb24oZmVhdHVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmVzdEZlYXR1cmUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiZXN0Q2hyID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJlc3RQb3MgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hyeCA9IGYuX2Nocm9tSWQsIGZtaW4gPSBmLm1pbiwgZm1heCA9IGYubWF4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmVzdEZlYXR1cmUgPT0gbnVsbCB8fCAoKGRpciA8IDApICYmIChjaHJ4ID4gYmVzdENociB8fCBmbWF4ID4gYmVzdFBvcykpIHx8ICgoZGlyID4gMCkgJiYgKGNocnggPCBiZXN0Q2hyIHx8IGZtaW4gPCBiZXN0UG9zKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RGZWF0dXJlID0gZjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RQb3MgPSAoZGlyIDwgMCkgPyBmbWF4IDogZm1pbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RDaHIgPSBjaHJ4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJlc3RGZWF0dXJlICE9IG51bGwpIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soW2Jlc3RGZWF0dXJlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBjaXJGb2JSZWN1cjIgPSBmdW5jdGlvbihjaXJCbG9ja0RhdGEsIG9mZnNldCwgbGV2ZWwpIHtcbiAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkoY2lyQmxvY2tEYXRhKTtcbiAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkoY2lyQmxvY2tEYXRhKTtcbiAgICAgICAgdmFyIGxhID0gbmV3IEludDMyQXJyYXkoY2lyQmxvY2tEYXRhKTtcblxuICAgICAgICB2YXIgaXNMZWFmID0gYmFbb2Zmc2V0XTtcbiAgICAgICAgdmFyIGNudCA9IHNhW29mZnNldC8yICsgMV07XG4gICAgICAgIG9mZnNldCArPSA0O1xuXG4gICAgICAgIGlmIChpc0xlYWYgIT0gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbnQ7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBsbyA9IG9mZnNldC80O1xuICAgICAgICAgICAgICAgIHZhciBzdGFydENocm9tID0gbGFbbG9dO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydEJhc2UgPSBsYVtsbyArIDFdO1xuICAgICAgICAgICAgICAgIHZhciBlbmRDaHJvbSA9IGxhW2xvICsgMl07XG4gICAgICAgICAgICAgICAgdmFyIGVuZEJhc2UgPSBsYVtsbyArIDNdO1xuICAgICAgICAgICAgICAgIHZhciBibG9ja09mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCBvZmZzZXQrMTYpO1xuICAgICAgICAgICAgICAgIHZhciBibG9ja1NpemUgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KzI0KTtcbiAgICAgICAgICAgICAgICBpZiAoKGRpciA8IDAgJiYgKChzdGFydENocm9tIDwgY2hyIHx8IChzdGFydENocm9tID09IGNociAmJiBzdGFydEJhc2UgPD0gcG9zKSkpKSB8fFxuICAgICAgICAgICAgICAgICAgICAoZGlyID4gMCAmJiAoKGVuZENocm9tID4gY2hyIHx8IChlbmRDaHJvbSA9PSBjaHIgJiYgZW5kQmFzZSA+PSBwb3MpKSkpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0dvdCBhbiBpbnRlcmVzdGluZyBibG9jazogc3RhcnRCYXNlPScgKyBzdGFydENocm9tICsgJzonICsgc3RhcnRCYXNlICsgJzsgZW5kQmFzZT0nICsgZW5kQ2hyb20gKyAnOicgKyBlbmRCYXNlICsgJzsgb2Zmc2V0PScgKyBibG9ja09mZnNldCArICc7IHNpemU9JyArIGJsb2NrU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgvX3JhbmRvbS8uZXhlYyh0aGlzQi5id2cuaWRzVG9DaHJvbXNbc3RhcnRDaHJvbV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkbG9nKCdza2lwcGluZyByYW5kb206ICcgKyB0aGlzQi5id2cuaWRzVG9DaHJvbXNbc3RhcnRDaHJvbV0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJsb2NrVG9GZXRjaCA9PSBudWxsIHx8ICgoZGlyIDwgMCkgJiYgKGVuZENocm9tID4gYmVzdEJsb2NrQ2hyIHx8IChlbmRDaHJvbSA9PSBiZXN0QmxvY2tDaHIgJiYgZW5kQmFzZSA+IGJlc3RCbG9ja09mZnNldCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRpciA+IDApICYmIChzdGFydENocm9tIDwgYmVzdEJsb2NrQ2hyIHx8IChzdGFydENocm9tID09IGJlc3RCbG9ja0NociAmJiBzdGFydEJhc2UgPCBiZXN0QmxvY2tPZmZzZXQpKSkpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgZGxvZygnYmVzdCBpczogc3RhcnRCYXNlPScgKyBzdGFydENocm9tICsgJzonICsgc3RhcnRCYXNlICsgJzsgZW5kQmFzZT0nICsgZW5kQ2hyb20gKyAnOicgKyBlbmRCYXNlICsgJzsgb2Zmc2V0PScgKyBibG9ja09mZnNldCArICc7IHNpemU9JyArIGJsb2NrU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja1RvRmV0Y2ggPSB7b2Zmc2V0OiBibG9ja09mZnNldCwgc2l6ZTogYmxvY2tTaXplfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RCbG9ja09mZnNldCA9IChkaXIgPCAwKSA/IGVuZEJhc2UgOiBzdGFydEJhc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0QmxvY2tDaHIgPSAoZGlyIDwgMCkgPyBlbmRDaHJvbSA6IHN0YXJ0Q2hyb207XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDMyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGJlc3RSZWN1ciA9IC0xO1xuICAgICAgICAgICAgdmFyIGJlc3RQb3MgPSAtMTtcbiAgICAgICAgICAgIHZhciBiZXN0Q2hyID0gLTE7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNudDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvID0gb2Zmc2V0LzQ7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0Q2hyb20gPSBsYVtsb107XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0QmFzZSA9IGxhW2xvICsgMV07XG4gICAgICAgICAgICAgICAgdmFyIGVuZENocm9tID0gbGFbbG8gKyAyXTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kQmFzZSA9IGxhW2xvICsgM107XG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrT2Zmc2V0ID0gKGxhW2xvICsgNF08PDMyKSB8IChsYVtsbyArIDVdKTtcbiAgICAgICAgICAgICAgICBpZiAoKGRpciA8IDAgJiYgKChzdGFydENocm9tIDwgY2hyIHx8IChzdGFydENocm9tID09IGNociAmJiBzdGFydEJhc2UgPD0gcG9zKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlbmRDaHJvbSAgID49IGNocikpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgKGRpciA+IDAgJiYgKChlbmRDaHJvbSA+IGNociB8fCAoZW5kQ2hyb20gPT0gY2hyICYmIGVuZEJhc2UgPj0gcG9zKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RhcnRDaHJvbSA8PSBjaHIpKSkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmVzdFJlY3VyIDwgMCB8fCBlbmRCYXNlID4gYmVzdFBvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFJlY3VyID0gYmxvY2tPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0UG9zID0gKGRpciA8IDApID8gZW5kQmFzZSA6IHN0YXJ0QmFzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RDaHIgPSAoZGlyIDwgMCkgPyBlbmRDaHJvbSA6IHN0YXJ0Q2hyb207XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDI0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJlc3RSZWN1ciA+PSAwKSB7XG4gICAgICAgICAgICAgICAgY2lyRm9iUmVjdXIoW2Jlc3RSZWN1cl0sIGxldmVsICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuXG4gICAgY2lyRm9iUmVjdXIoW3RoaXNCLmNpclRyZWVPZmZzZXQgKyA0OF0sIDEpO1xufVxuXG5CaWdXaWcucHJvdG90eXBlLnJlYWRXaWdEYXRhID0gZnVuY3Rpb24oY2hyTmFtZSwgbWluLCBtYXgsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5nZXRVbnpvb21lZFZpZXcoKS5yZWFkV2lnRGF0YShjaHJOYW1lLCBtaW4sIG1heCwgY2FsbGJhY2spO1xufVxuXG5CaWdXaWcucHJvdG90eXBlLmdldFVuem9vbWVkVmlldyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy51bnpvb21lZFZpZXcpIHtcbiAgICAgICAgdmFyIGNpckxlbiA9IDQwMDA7XG4gICAgICAgIHZhciBuemwgPSB0aGlzLnpvb21MZXZlbHNbMF07XG4gICAgICAgIGlmIChuemwpIHtcbiAgICAgICAgICAgIGNpckxlbiA9IHRoaXMuem9vbUxldmVsc1swXS5kYXRhT2Zmc2V0IC0gdGhpcy51bnpvb21lZEluZGV4T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudW56b29tZWRWaWV3ID0gbmV3IEJpZ1dpZ1ZpZXcodGhpcywgdGhpcy51bnpvb21lZEluZGV4T2Zmc2V0LCBjaXJMZW4sIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudW56b29tZWRWaWV3O1xufVxuXG5CaWdXaWcucHJvdG90eXBlLmdldFpvb21lZFZpZXcgPSBmdW5jdGlvbih6KSB7XG4gICAgdmFyIHpoID0gdGhpcy56b29tTGV2ZWxzW3pdO1xuICAgIGlmICghemgudmlldykge1xuICAgICAgICB6aC52aWV3ID0gbmV3IEJpZ1dpZ1ZpZXcodGhpcywgemguaW5kZXhPZmZzZXQsIC8qIHRoaXMuem9vbUxldmVsc1t6ICsgMV0uZGF0YU9mZnNldCAtIHpoLmluZGV4T2Zmc2V0ICovIDQwMDAsIHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gemgudmlldztcbn1cblxuZnVuY3Rpb24gbWFrZUJ3ZyhkYXRhLCBjYWxsYmFjaywgbmFtZSkge1xuICAgIHZhciBid2cgPSBuZXcgQmlnV2lnKCk7XG4gICAgYndnLmRhdGEgPSBkYXRhO1xuICAgIGJ3Zy5uYW1lID0gbmFtZTtcbiAgICBid2cuZGF0YS5zbGljZSgwLCA1MTIpLnNhbHRlZCgpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgZmV0Y2ggZmlsZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoZWFkZXIgPSByZXN1bHQ7XG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGhlYWRlcik7XG4gICAgICAgIHZhciBzYSA9IG5ldyBJbnQxNkFycmF5KGhlYWRlcik7XG4gICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KGhlYWRlcik7XG4gICAgICAgIHZhciBtYWdpYyA9IGJhWzBdICsgKE0xICogYmFbMV0pICsgKE0yICogYmFbMl0pICsgKE0zICogYmFbM10pO1xuICAgICAgICBpZiAobWFnaWMgPT0gQklHX1dJR19NQUdJQykge1xuICAgICAgICAgICAgYndnLnR5cGUgPSAnYmlnd2lnJztcbiAgICAgICAgfSBlbHNlIGlmIChtYWdpYyA9PSBCSUdfQkVEX01BR0lDKSB7XG4gICAgICAgICAgICBid2cudHlwZSA9ICdiaWdiZWQnO1xuICAgICAgICB9IGVsc2UgaWYgKG1hZ2ljID09IEJJR19XSUdfTUFHSUNfQkUgfHwgbWFnaWMgPT0gQklHX0JFRF9NQUdJQ19CRSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ3VycmVudGx5IGRvbid0IHN1cHBvcnQgYmlnLWVuZGlhbiBCQkkgZmlsZXNcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBcIk5vdCBhIHN1cHBvcnRlZCBmb3JtYXQsIG1hZ2ljPTB4XCIgKyBtYWdpYy50b1N0cmluZygxNikpO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBid2cudmVyc2lvbiA9IHNhWzJdOyAgICAgICAgICAgICAvLyA0XG4gICAgICAgIGJ3Zy5udW1ab29tTGV2ZWxzID0gc2FbM107ICAgICAgIC8vIDZcbiAgICAgICAgYndnLmNocm9tVHJlZU9mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCA4KTtcbiAgICAgICAgYndnLnVuem9vbWVkRGF0YU9mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCAxNik7XG4gICAgICAgIGJ3Zy51bnpvb21lZEluZGV4T2Zmc2V0ID0gYndnX3JlYWRPZmZzZXQoYmEsIDI0KTtcbiAgICAgICAgYndnLmZpZWxkQ291bnQgPSBzYVsxNl07ICAgICAgICAgLy8gMzJcbiAgICAgICAgYndnLmRlZmluZWRGaWVsZENvdW50ID0gc2FbMTddOyAgLy8gMzRcbiAgICAgICAgYndnLmFzT2Zmc2V0ID0gYndnX3JlYWRPZmZzZXQoYmEsIDM2KTtcbiAgICAgICAgYndnLnRvdGFsU3VtbWFyeU9mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCA0NCk7XG4gICAgICAgIGJ3Zy51bmNvbXByZXNzQnVmU2l6ZSA9IGxhWzEzXTsgIC8vIDUyXG4gICAgICAgIGJ3Zy5leHRIZWFkZXJPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgNTYpO1xuXG4gICAgICAgIGJ3Zy56b29tTGV2ZWxzID0gW107XG4gICAgICAgIGZvciAodmFyIHpsID0gMDsgemwgPCBid2cubnVtWm9vbUxldmVsczsgKyt6bCkge1xuICAgICAgICAgICAgdmFyIHpsUmVkdWN0aW9uID0gbGFbemwqNiArIDE2XVxuICAgICAgICAgICAgdmFyIHpsRGF0YSA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCB6bCoyNCArIDcyKTtcbiAgICAgICAgICAgIHZhciB6bEluZGV4ID0gYndnX3JlYWRPZmZzZXQoYmEsIHpsKjI0ICsgODApO1xuICAgICAgICAgICAgYndnLnpvb21MZXZlbHMucHVzaCh7cmVkdWN0aW9uOiB6bFJlZHVjdGlvbiwgZGF0YU9mZnNldDogemxEYXRhLCBpbmRleE9mZnNldDogemxJbmRleH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYndnLnJlYWRDaHJvbVRyZWUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBid2cuZ2V0QXV0b1NRTChmdW5jdGlvbihhcykge1xuICAgICAgICAgICAgICAgIGJ3Zy5zY2hlbWEgPSBhcztcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYndnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LCB7dGltZW91dDogNTAwMH0pOyAgICAvLyBQb3RlbnRpYWwgdGltZW91dCBvbiBmaXJzdCByZXF1ZXN0IHRvIGNhdGNoIG1peGVkLWNvbnRlbnQgZXJyb3JzIG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21pdW0uXG59XG5cblxuQmlnV2lnLnByb3RvdHlwZS5fdHNGZXRjaCA9IGZ1bmN0aW9uKHpvb20sIGNociwgbWluLCBtYXgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGJ3ZyA9IHRoaXM7XG4gICAgaWYgKHpvb20gPj0gdGhpcy56b29tTGV2ZWxzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRvcExldmVsUmVkdWN0aW9uQ2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0Wm9vbWVkVmlldyh0aGlzLnpvb21MZXZlbHMubGVuZ3RoIC0gMSkucmVhZFdpZ0RhdGFCeUlkKC0xLCAwLCAzMDAwMDAwMDAsIGZ1bmN0aW9uKGZlYXRzKSB7XG4gICAgICAgICAgICAgICAgYndnLnRvcExldmVsUmVkdWN0aW9uQ2FjaGUgPSBmZWF0cztcbiAgICAgICAgICAgICAgICByZXR1cm4gYndnLl90c0ZldGNoKHpvb20sIGNociwgbWluLCBtYXgsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGYgPSBbXTtcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy50b3BMZXZlbFJlZHVjdGlvbkNhY2hlO1xuICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGMubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNbZmldLl9jaHJvbUlkID09IGNocikge1xuICAgICAgICAgICAgICAgICAgICBmLnB1c2goY1tmaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhmKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB2aWV3O1xuICAgICAgICBpZiAoem9vbSA8IDApIHtcbiAgICAgICAgICAgIHZpZXcgPSB0aGlzLmdldFVuem9vbWVkVmlldygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmlldyA9IHRoaXMuZ2V0Wm9vbWVkVmlldyh6b29tKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlldy5yZWFkV2lnRGF0YUJ5SWQoY2hyLCBtaW4sIG1heCwgY2FsbGJhY2spO1xuICAgIH1cbn1cblxuQmlnV2lnLnByb3RvdHlwZS50aHJlc2hvbGRTZWFyY2ggPSBmdW5jdGlvbihjaHJOYW1lLCByZWZlcmVuY2VQb2ludCwgZGlyLCB0aHJlc2hvbGQsIGNhbGxiYWNrKSB7XG4gICAgZGlyID0gKGRpcjwwKSA/IC0xIDogMTtcbiAgICB2YXIgYndnID0gdGhpcztcbiAgICB2YXIgaW5pdGlhbENociA9IHRoaXMuY2hyb21zVG9JRHNbY2hyTmFtZV07XG4gICAgdmFyIGNhbmRpZGF0ZXMgPSBbe2Nock9yZDogMCwgY2hyOiBpbml0aWFsQ2hyLCB6b29tOiBid2cuem9vbUxldmVscy5sZW5ndGggLSA0LCBtaW46IDAsIG1heDogMzAwMDAwMDAwLCBmcm9tUmVmOiB0cnVlfV1cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSB0aGlzLm1heElEICsgMTsgKytpKSB7XG4gICAgICAgIHZhciBjaHJJZCA9IChpbml0aWFsQ2hyICsgKGRpcippKSkgJSAodGhpcy5tYXhJRCArIDEpO1xuICAgICAgICBpZiAoY2hySWQgPCAwKSBcbiAgICAgICAgICAgIGNocklkICs9ICh0aGlzLm1heElEICsgMSk7XG4gICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7Y2hyT3JkOiBpLCBjaHI6IGNocklkLCB6b29tOiBid2cuem9vbUxldmVscy5sZW5ndGggLSAxLCBtaW46IDAsIG1heDogMzAwMDAwMDAwfSlcbiAgICB9XG4gICAgICAgXG4gICAgZnVuY3Rpb24gZmJUaHJlc2hvbGRTZWFyY2hSZWN1cigpIHtcbiAgICBcdGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgXHQgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgIFx0fVxuICAgIFx0Y2FuZGlkYXRlcy5zb3J0KGZ1bmN0aW9uKGMxLCBjMikge1xuICAgIFx0ICAgIHZhciBkID0gYzEuem9vbSAtIGMyLnpvb207XG4gICAgXHQgICAgaWYgKGQgIT0gMClcbiAgICBcdFx0ICAgIHJldHVybiBkO1xuXG4gICAgICAgICAgICBkID0gYzEuY2hyT3JkIC0gYzIuY2hyT3JkO1xuICAgICAgICAgICAgaWYgKGQgIT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZDtcbiAgICBcdCAgICBlbHNlXG4gICAgXHRcdCAgICByZXR1cm4gYzEubWluIC0gYzIubWluICogZGlyO1xuICAgIFx0fSk7XG5cblx0ICAgIHZhciBjYW5kaWRhdGUgPSBjYW5kaWRhdGVzLnNwbGljZSgwLCAxKVswXTtcbiAgICAgICAgYndnLl90c0ZldGNoKGNhbmRpZGF0ZS56b29tLCBjYW5kaWRhdGUuY2hyLCBjYW5kaWRhdGUubWluLCBjYW5kaWRhdGUubWF4LCBmdW5jdGlvbihmZWF0cykge1xuICAgICAgICAgICAgdmFyIHJwID0gZGlyID4gMCA/IDAgOiAzMDAwMDAwMDA7XG4gICAgICAgICAgICBpZiAoY2FuZGlkYXRlLmZyb21SZWYpXG4gICAgICAgICAgICAgICAgcnAgPSByZWZlcmVuY2VQb2ludDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXRzLmxlbmd0aDsgKytmaSkge1xuICAgIFx0ICAgICAgICB2YXIgZiA9IGZlYXRzW2ZpXTtcbiAgICAgICAgICAgICAgICB2YXIgc2NvcmU7XG4gICAgICAgICAgICAgICAgaWYgKGYubWF4U2NvcmUgIT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBzY29yZSA9IGYubWF4U2NvcmU7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBzY29yZSA9IGYuc2NvcmU7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGlyID4gMCkge1xuICAgIFx0ICAgICAgICAgICAgaWYgKHNjb3JlID4gdGhyZXNob2xkKSB7XG4gICAgICAgIFx0XHQgICAgICAgIGlmIChjYW5kaWRhdGUuem9vbSA8IDApIHtcbiAgICAgICAgXHRcdCAgICAgICAgICAgIGlmIChmLm1pbiA+IHJwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZik7XG4gICAgICAgIFx0XHQgICAgICAgIH0gZWxzZSBpZiAoZi5tYXggPiBycCkge1xuICAgICAgICBcdFx0ICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHtjaHI6IGNhbmRpZGF0ZS5jaHIsIGNock9yZDogY2FuZGlkYXRlLmNock9yZCwgem9vbTogY2FuZGlkYXRlLnpvb20gLSAyLCBtaW46IGYubWluLCBtYXg6IGYubWF4LCBmcm9tUmVmOiBjYW5kaWRhdGUuZnJvbVJlZn0pO1xuICAgICAgICBcdFx0ICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPiB0aHJlc2hvbGQpIHtcbiAgICAgICAgICAgIFx0XHQgICAgaWYgKGNhbmRpZGF0ZS56b29tIDwgMCkge1xuICAgICAgICAgICAgICAgIFx0ICAgICAgICBpZiAoZi5tYXggPCBycClcbiAgICAgICAgICAgICAgICBcdFx0XHQgICAgcmV0dXJuIGNhbGxiYWNrKGYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmLm1pbiA8IHJwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHtjaHI6IGNhbmRpZGF0ZS5jaHIsIGNock9yZDogY2FuZGlkYXRlLmNock9yZCwgem9vbTogY2FuZGlkYXRlLnpvb20gLSAyLCBtaW46IGYubWluLCBtYXg6IGYubWF4LCBmcm9tUmVmOiBjYW5kaWRhdGUuZnJvbVJlZn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFx0ICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICBcdCAgICB9XG4gICAgICAgICAgICBmYlRocmVzaG9sZFNlYXJjaFJlY3VyKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBmYlRocmVzaG9sZFNlYXJjaFJlY3VyKCk7XG59XG5cbkJpZ1dpZy5wcm90b3R5cGUuZ2V0QXV0b1NRTCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICBpZiAoIXRoaXMuYXNPZmZzZXQpXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcblxuXG4gICAgdGhpcy5kYXRhLnNsaWNlKHRoaXMuYXNPZmZzZXQsIDIwNDgpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyZXN1bHQpO1xuICAgICAgICB2YXIgcyA9ICcnO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoYmFbaV0gPT0gMClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShiYVtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qIFxuICAgICAgICAgKiBRdWljayduJ2RpcnR5IGF0dGVtcHQgdG8gcGFyc2UgYXV0b1NxbCBmb3JtYXQuXG4gICAgICAgICAqIFNlZTogaHR0cDovL3d3dy5saW51eGpvdXJuYWwuY29tL2ZpbGVzL2xpbnV4am91cm5hbC5jb20vbGludXhqb3VybmFsL2FydGljbGVzLzA1OS81OTQ5LzU5NDlsMi5odG1sXG4gICAgICAgICAqL1xuXG4gICAgICAgIHZhciBoZWFkZXJfcmUgPSAvKFxcdyspXFxzKyhcXHcrKVxccysoXCIoW15cIl0rKVwiKT9cXHMrXFwoXFxzKi87XG4gICAgICAgIHZhciBmaWVsZF9yZSA9IC8oW1xcd1xcW1xcXV0rKVxccysoXFx3KylcXHMqO1xccyooXCIoW15cIl0rKVwiKT9cXHMqL2c7XG5cbiAgICAgICAgdmFyIGhlYWRlck1hdGNoID0gaGVhZGVyX3JlLmV4ZWMocyk7XG4gICAgICAgIGlmIChoZWFkZXJNYXRjaCkge1xuICAgICAgICAgICAgdmFyIGFzID0ge1xuICAgICAgICAgICAgICAgIGRlY2xUeXBlOiBoZWFkZXJNYXRjaFsxXSxcbiAgICAgICAgICAgICAgICBuYW1lOiBoZWFkZXJNYXRjaFsyXSxcbiAgICAgICAgICAgICAgICBjb21tZW50OiBoZWFkZXJNYXRjaFs0XSxcblxuICAgICAgICAgICAgICAgIGZpZWxkczogW11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHMgPSBzLnN1YnN0cmluZyhoZWFkZXJNYXRjaFswXSk7XG4gICAgICAgICAgICBmb3IgKHZhciBtID0gZmllbGRfcmUuZXhlYyhzKTsgbSAhPSBudWxsOyBtID0gZmllbGRfcmUuZXhlYyhzKSkge1xuICAgICAgICAgICAgICAgIGFzLmZpZWxkcy5wdXNoKHt0eXBlOiBtWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBtWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50OiBtWzRdfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhhcyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuQmlnV2lnLnByb3RvdHlwZS5nZXRFeHRyYUluZGljZXMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgaWYgKHRoaXMudmVyc2lvbiA8IDQgfHwgdGhpcy5leHRIZWFkZXJPZmZzZXQgPT0gMCB8fCB0aGlzLnR5cGUgIT0gJ2JpZ2JlZCcpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS5zbGljZSh0aGlzLmV4dEhlYWRlck9mZnNldCwgNjQpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgXCJDb3VsZG4ndCBmZXRjaCBleHRlbnNpb24gaGVhZGVyXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyZXN1bHQpO1xuICAgICAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkocmVzdWx0KTtcbiAgICAgICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KHJlc3VsdCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBleHRIZWFkZXJTaXplID0gc2FbMF07XG4gICAgICAgICAgICB2YXIgZXh0cmFJbmRleENvdW50ID0gc2FbMV07XG4gICAgICAgICAgICB2YXIgZXh0cmFJbmRleExpc3RPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgNCk7XG5cbiAgICAgICAgICAgIGlmIChleHRyYUluZGV4Q291bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRklYTUUgMjBieXRlIHJlY29yZHMgb25seSBtYWtlIHNlbnNlIGZvciBzaW5nbGUtZmllbGQgaW5kaWNlcy5cbiAgICAgICAgICAgIC8vIFJpZ2h0IG5vdywgdGhlc2Ugc2VlbSB0byBiZSB0aGUgb25seSB0aGluZ3MgYXJvdW5kLCBidXQgdGhlIGZvcm1hdFxuICAgICAgICAgICAgLy8gaXMgYWN0dWFsbHkgbW9yZSBnZW5lcmFsLlxuICAgICAgICAgICAgdGhpc0IuZGF0YS5zbGljZShleHRyYUluZGV4TGlzdE9mZnNldCwgZXh0cmFJbmRleENvdW50ICogMjApLmZldGNoKGZ1bmN0aW9uKGVpbCkge1xuICAgICAgICAgICAgICAgIGlmICghZWlsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBcIkNvdWxkbid0IGZldGNoIGluZGV4IGluZm9cIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkoZWlsKTtcbiAgICAgICAgICAgICAgICB2YXIgc2EgPSBuZXcgSW50MTZBcnJheShlaWwpO1xuICAgICAgICAgICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KGVpbCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW5kaWNlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBleHRyYUluZGV4Q291bnQ7ICsraWkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVpVHlwZSA9IHNhW2lpKjEwXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVpRmllbGRDb3VudCA9IHNhW2lpKjEwICsgMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBlaU9mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCBpaSoyMCArIDQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWlGaWVsZCA9IHNhW2lpKjEwICsgOF1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gbmV3IEJCSUV4dHJhSW5kZXgodGhpc0IsIGVpVHlwZSwgZWlGaWVsZENvdW50LCBlaU9mZnNldCwgZWlGaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluZGljZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQkJJRXh0cmFJbmRleChiYmksIHR5cGUsIGZpZWxkQ291bnQsIG9mZnNldCwgZmllbGQpIHtcbiAgICB0aGlzLmJiaSA9IGJiaTtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuZmllbGRDb3VudCA9IGZpZWxkQ291bnQ7XG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgdGhpcy5maWVsZCA9IGZpZWxkO1xufVxuXG5CQklFeHRyYUluZGV4LnByb3RvdHlwZS5sb29rdXAgPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG5cbiAgICB0aGlzLmJiaS5kYXRhLnNsaWNlKHRoaXMub2Zmc2V0LCAzMikuZmV0Y2goZnVuY3Rpb24oYnB0KSB7XG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGJwdCk7XG4gICAgICAgIHZhciBzYSA9IG5ldyBJbnQxNkFycmF5KGJwdCk7XG4gICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KGJwdCk7XG4gICAgICAgIHZhciBicHRNYWdpYyA9IGxhWzBdO1xuICAgICAgICB2YXIgYmxvY2tTaXplID0gbGFbMV07XG4gICAgICAgIHZhciBrZXlTaXplID0gbGFbMl07XG4gICAgICAgIHZhciB2YWxTaXplID0gbGFbM107XG4gICAgICAgIHZhciBpdGVtQ291bnQgPSBid2dfcmVhZE9mZnNldChiYSwgMTYpO1xuICAgICAgICB2YXIgcm9vdE5vZGVPZmZzZXQgPSAzMjtcblxuICAgICAgICBmdW5jdGlvbiBicHRSZWFkTm9kZShub2RlT2Zmc2V0KSB7XG4gICAgICAgICAgICB0aGlzQi5iYmkuZGF0YS5zbGljZShub2RlT2Zmc2V0LCA0ICsgKGJsb2NrU2l6ZSAqIChrZXlTaXplICsgdmFsU2l6ZSkpKS5mZXRjaChmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkobm9kZSk7XG4gICAgICAgICAgICAgICAgdmFyIHNhID0gbmV3IFVpbnQxNkFycmF5KG5vZGUpO1xuICAgICAgICAgICAgICAgIHZhciBsYSA9IG5ldyBVaW50MzJBcnJheShub2RlKTtcblxuICAgICAgICAgICAgICAgIHZhciBub2RlVHlwZSA9IGJhWzBdO1xuICAgICAgICAgICAgICAgIHZhciBjbnQgPSBzYVsxXTtcblxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSA0O1xuICAgICAgICAgICAgICAgIGlmIChub2RlVHlwZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXN0Q2hpbGRPZmZzZXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGNudDsgKytuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBraSA9IDA7IGtpIDwga2V5U2l6ZTsgKytraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IGJhW29mZnNldCsrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSA4O1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5sb2NhbGVDb21wYXJlKGtleSkgPCAwICYmIGxhc3RDaGlsZE9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJwdFJlYWROb2RlKGxhc3RDaGlsZE9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENoaWxkT2Zmc2V0ID0gY2hpbGRPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnB0UmVhZE5vZGUobGFzdENoaWxkT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGNudDsgKytuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBraSA9IDA7IGtpIDwga2V5U2l6ZTsgKytraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IGJhW29mZnNldCsrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTcGVjaWZpYyBmb3IgRUkgY2FzZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSByZWFkSW50KGJhLCBvZmZzZXQgKyA4KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5iYmkuZ2V0VW56b29tZWRWaWV3KCkuZmV0Y2hGZWF0dXJlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgdG9rcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva3MgJiYgdG9rcy5sZW5ndGggPiB0aGlzQi5maWVsZCAtIDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRva3NbdGhpc0IuZmllbGQgLSAzXSA9PSBuYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3tvZmZzZXQ6IHN0YXJ0LCBzaXplOiBsZW5ndGh9XSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSB2YWxTaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBicHRSZWFkTm9kZSh0aGlzQi5vZmZzZXQgKyByb290Tm9kZU9mZnNldCk7XG4gICAgfSk7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgbWFrZUJ3ZzogbWFrZUJ3ZyxcbiAgICAgICAgQklHX0JFRF9NQUdJQzogQklHX0JFRF9NQUdJQyxcbiAgICAgICAgQklHX1dJR19NQUdJQzogQklHX1dJR19NQUdJQ1xuICAgIH1cbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTFcbi8vXG4vLyBiaW4uanMgZ2VuZXJhbCBiaW5hcnkgZGF0YSBzdXBwb3J0XG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XG5cbiAgICB2YXIgc2hhMSA9IHJlcXVpcmUoJy4vc2hhMScpO1xuICAgIHZhciBiNjRfc2hhMSA9IHNoYTEuYjY0X3NoYTE7XG5cbiAgICB2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gQmxvYkZldGNoYWJsZShiKSB7XG4gICAgdGhpcy5ibG9iID0gYjtcbn1cblxuQmxvYkZldGNoYWJsZS5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihzdGFydCwgbGVuZ3RoKSB7XG4gICAgdmFyIGI7XG5cbiAgICBpZiAodGhpcy5ibG9iLnNsaWNlKSB7XG4gICAgICAgIGlmIChsZW5ndGgpIHtcbiAgICAgICAgICAgIGIgPSB0aGlzLmJsb2Iuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgbGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGIgPSB0aGlzLmJsb2Iuc2xpY2Uoc3RhcnQpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGxlbmd0aCkge1xuICAgICAgICAgICAgYiA9IHRoaXMuYmxvYi53ZWJraXRTbGljZShzdGFydCwgc3RhcnQgKyBsZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYiA9IHRoaXMuYmxvYi53ZWJraXRTbGljZShzdGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBCbG9iRmV0Y2hhYmxlKGIpO1xufVxuXG5CbG9iRmV0Y2hhYmxlLnByb3RvdHlwZS5zYWx0ZWQgPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpczt9XG5cbmlmICh0eXBlb2YoRmlsZVJlYWRlcikgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2RlZmluaW5nIGFzeW5jIEJsb2JGZXRjaGFibGUuZmV0Y2gnKTtcblxuICAgIEJsb2JGZXRjaGFibGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgY2FsbGJhY2soYnN0cmluZ1RvQnVmZmVyKHJlYWRlci5yZXN1bHQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyh0aGlzLmJsb2IpO1xuICAgIH1cblxufSBlbHNlIHtcbiAgICAvLyBpZiAoY29uc29sZSAmJiBjb25zb2xlLmxvZylcbiAgICAvLyAgICBjb25zb2xlLmxvZygnZGVmaW5pbmcgc3luYyBCbG9iRmV0Y2hhYmxlLmZldGNoJyk7XG5cbiAgICBCbG9iRmV0Y2hhYmxlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlclN5bmMoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXMgPSByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIodGhpcy5ibG9iKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKHJlcyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBVUkxGZXRjaGFibGUodXJsLCBzdGFydCwgZW5kLCBvcHRzKSB7XG4gICAgaWYgKCFvcHRzKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBvcHRzID0gc3RhcnQ7XG4gICAgICAgICAgICBzdGFydCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdHMgPSB7fTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydCB8fCAwO1xuICAgIGlmIChlbmQpIHtcbiAgICAgICAgdGhpcy5lbmQgPSBlbmQ7XG4gICAgfVxuICAgIHRoaXMub3B0cyA9IG9wdHM7XG59XG5cblVSTEZldGNoYWJsZS5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihzLCBsKSB7XG4gICAgaWYgKHMgPCAwKSB7XG4gICAgICAgIHRocm93ICdCYWQgc2xpY2UgJyArIHM7XG4gICAgfVxuXG4gICAgdmFyIG5zID0gdGhpcy5zdGFydCwgbmUgPSB0aGlzLmVuZDtcbiAgICBpZiAobnMgJiYgcykge1xuICAgICAgICBucyA9IG5zICsgcztcbiAgICB9IGVsc2Uge1xuICAgICAgICBucyA9IHMgfHwgbnM7XG4gICAgfVxuICAgIGlmIChsICYmIG5zKSB7XG4gICAgICAgIG5lID0gbnMgKyBsIC0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBuZSA9IG5lIHx8IGwgLSAxO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFVSTEZldGNoYWJsZSh0aGlzLnVybCwgbnMsIG5lLCB0aGlzLm9wdHMpO1xufVxuXG52YXIgc2VlZD0wO1xudmFyIGlzU2FmYXJpID0gdHlwZW9mKG5hdmlnYXRvcikgIT09ICd1bmRlZmluZWQnICYmXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSA+PSAwICYmXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSA8IDAgO1xuXG5VUkxGZXRjaGFibGUucHJvdG90eXBlLmZldGNoQXNUZXh0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdGhpcy5nZXRVUkwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgdmFyIGxlbmd0aDtcbiAgICAgICAgICAgIGlmICgoaXNTYWZhcmkgfHwgdGhpc0Iub3B0cy5zYWx0KSAmJiB1cmwuaW5kZXhPZignPycpIDwgMCkge1xuICAgICAgICAgICAgICAgIHVybCA9IHVybCArICc/c2FsdD0nICsgYjY0X3NoYTEoJycgKyBEYXRlLm5vdygpICsgJywnICsgKCsrc2VlZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzQi5lbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpc0IuZW5kIC0gdGhpc0Iuc3RhcnQgPiAxMDAwMDAwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ01vbnN0ZXIgZmV0Y2ghJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ1JhbmdlJywgJ2J5dGVzPScgKyB0aGlzQi5zdGFydCArICctJyArIHRoaXNCLmVuZCk7XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gdGhpc0IuZW5kIC0gdGhpc0Iuc3RhcnQgKyAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gMjAwIHx8IHJlcS5zdGF0dXMgPT0gMjA2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVxLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXNCLm9wdHMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICByZXEud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcS5zZW5kKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfVxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgZXJyKTtcbiAgICB9KTtcbn1cblxuVVJMRmV0Y2hhYmxlLnByb3RvdHlwZS5zYWx0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbyA9IHNoYWxsb3dDb3B5KHRoaXMub3B0cyk7XG4gICAgby5zYWx0ID0gdHJ1ZTtcbiAgICByZXR1cm4gbmV3IFVSTEZldGNoYWJsZSh0aGlzLnVybCwgdGhpcy5zdGFydCwgdGhpcy5lbmQsIG8pO1xufVxuXG5VUkxGZXRjaGFibGUucHJvdG90eXBlLmdldFVSTCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLm9wdHMucmVzb2x2ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0cy5yZXNvbHZlcih0aGlzLnVybCkudGhlbihmdW5jdGlvbiAodXJsT3JPYmopIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJsT3JPYmogPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybE9yT2JqO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsT3JPYmoudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudXJsKTtcbiAgICB9XG59XG5cblVSTEZldGNoYWJsZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjYWxsYmFjaywgb3B0cykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gXG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdmFyIGF0dGVtcHQgPSBvcHRzLmF0dGVtcHQgfHwgMTtcbiAgICB2YXIgdHJ1bmNhdGVkTGVuZ3RoID0gb3B0cy50cnVuY2F0ZWRMZW5ndGg7XG4gICAgaWYgKGF0dGVtcHQgPiAzKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICB9XG5cbiAgICB0aGlzLmdldFVSTCgpLnRoZW4oZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdGltZW91dDtcbiAgICAgICAgICAgIGlmIChvcHRzLnRpbWVvdXQgJiYgIXRoaXNCLm9wdHMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGltaW5nIG91dCAnICsgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdUaW1lb3V0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9wdHMudGltZW91dFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHZhciBsZW5ndGg7XG4gICAgICAgICAgICBpZiAoKGlzU2FmYXJpIHx8IHRoaXNCLm9wdHMuc2FsdCkgJiYgdXJsLmluZGV4T2YoJz8nKSA8IDApIHtcbiAgICAgICAgICAgICAgICB1cmwgPSB1cmwgKyAnP3NhbHQ9JyArIGI2NF9zaGExKCcnICsgRGF0ZS5ub3coKSArICcsJyArICgrK3NlZWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgICAgICAgICAgcmVxLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQvcGxhaW47IGNoYXJzZXQ9eC11c2VyLWRlZmluZWQnKTtcbiAgICAgICAgICAgIGlmICh0aGlzQi5lbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpc0IuZW5kIC0gdGhpc0Iuc3RhcnQgPiAxMDAwMDAwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ01vbnN0ZXIgZmV0Y2ghJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ1JhbmdlJywgJ2J5dGVzPScgKyB0aGlzQi5zdGFydCArICctJyArIHRoaXNCLmVuZCk7XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gdGhpc0IuZW5kIC0gdGhpc0Iuc3RhcnQgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVvdXQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCB8fCByZXEuc3RhdHVzID09IDIwNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5yZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibCA9IHJlcS5yZXNwb25zZS5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggJiYgbGVuZ3RoICE9IGJsICYmICghdHJ1bmNhdGVkTGVuZ3RoIHx8IGJsICE9IHRydW5jYXRlZExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNCLmZldGNoKGNhbGxiYWNrLCB7YXR0ZW1wdDogYXR0ZW1wdCArIDEsIHRydW5jYXRlZExlbmd0aDogYmx9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVxLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcS5tb3pSZXNwb25zZUFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlcS5tb3pSZXNwb25zZUFycmF5QnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSByZXEucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggJiYgbGVuZ3RoICE9IHIubGVuZ3RoICYmICghdHJ1bmNhdGVkTGVuZ3RoIHx8IHIubGVuZ3RoICE9IHRydW5jYXRlZExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNCLmZldGNoKGNhbGxiYWNrLCB7YXR0ZW1wdDogYXR0ZW1wdCArIDEsIHRydW5jYXRlZExlbmd0aDogci5sZW5ndGh9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYnN0cmluZ1RvQnVmZmVyKHJlcS5yZXNwb25zZVRleHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc0IuZmV0Y2goY2FsbGJhY2ssIHthdHRlbXB0OiBhdHRlbXB0ICsgMX0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzQi5vcHRzLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXEuc2VuZCgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH1cbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGVycik7XG4gICAgfSk7XG59XG4gICAgICAgICAgICAgICAgICAgICAgIFxuZnVuY3Rpb24gYnN0cmluZ1RvQnVmZmVyKHJlc3VsdCkge1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHJlc3VsdC5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgYmFbaV0gPSByZXN1bHQuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJhLmJ1ZmZlcjtcbn1cblxuLy8gUmVhZCBmcm9tIFVpbnQ4QXJyYXlcblxudmFyIGNvbnZlcnRCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoOCk7XG52YXIgYmEgPSBuZXcgVWludDhBcnJheShjb252ZXJ0QnVmZmVyKTtcbnZhciBmYSA9IG5ldyBGbG9hdDMyQXJyYXkoY29udmVydEJ1ZmZlcik7XG5cbmZ1bmN0aW9uIHJlYWRGbG9hdChidWYsIG9mZnNldCkge1xuICAgIGJhWzBdID0gYnVmW29mZnNldF07XG4gICAgYmFbMV0gPSBidWZbb2Zmc2V0KzFdO1xuICAgIGJhWzJdID0gYnVmW29mZnNldCsyXTtcbiAgICBiYVszXSA9IGJ1ZltvZmZzZXQrM107XG4gICAgcmV0dXJuIGZhWzBdO1xufVxuXG5mdW5jdGlvbiByZWFkSW50NjQoYmEsIG9mZnNldCkge1xuICAgIHJldHVybiAoYmFbb2Zmc2V0ICsgN10gPDwgMjQpIHwgKGJhW29mZnNldCArIDZdIDw8IDE2KSB8IChiYVtvZmZzZXQgKyA1XSA8PCA4KSB8IChiYVtvZmZzZXQgKyA0XSk7XG59XG5cbmNvbnN0IE0xID0gMjU2LFxuICAgICAgTTIgPSBNMSAqIDI1NixcbiAgICAgIE0zID0gTTIgKiAyNTYsXG4gICAgICBNNCA9IE0zICogMjU2LFxuICAgICAgTTUgPSBNNCAqIDI1NjtcblxuZnVuY3Rpb24gcmVhZEludDY0TEUoYmEsIG9mZnNldCkge1xuICAgIHJldHVybiAoYmFbb2Zmc2V0XSkgKyAoYmFbb2Zmc2V0ICsgMV0gKiBNMSkgKyAoYmFbb2Zmc2V0ICsgMl0gKiBNMikgKyAoYmFbb2Zmc2V0ICsgM10gKiBNMykgKyAoYmFbb2Zmc2V0ICsgNF0gKiBNNCkgKyAoYmFbb2Zmc2V0ICsgNV0gKiBNNSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRJbnQ2NEJFKGJhLCBvZmZzZXQpIHtcbiAgICByZXR1cm4gKGJhW29mZnNldCArIDddKSArIChiYVtvZmZzZXQgKyA2XSAqIE0xKSArIChiYVtvZmZzZXQgKyA1XSAqIE0yKSArIChiYVtvZmZzZXQgKyA0XSAqIE0zKSArIChiYVtvZmZzZXQgKyAzXSAqIE00KSArIChiYVtvZmZzZXQgKyAyXSAqIE01KTtcbn1cblxuZnVuY3Rpb24gcmVhZEludChiYSwgb2Zmc2V0KSB7XG4gICAgcmV0dXJuIChiYVtvZmZzZXQgKyAzXSA8PCAyNCkgfCAoYmFbb2Zmc2V0ICsgMl0gPDwgMTYpIHwgKGJhW29mZnNldCArIDFdIDw8IDgpIHwgKGJhW29mZnNldF0pO1xufVxuXG5mdW5jdGlvbiByZWFkU2hvcnQoYmEsIG9mZnNldCkge1xuICAgIHJldHVybiAoYmFbb2Zmc2V0ICsgMV0gPDwgOCkgfCAoYmFbb2Zmc2V0XSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRCeXRlKGJhLCBvZmZzZXQpIHtcbiAgICByZXR1cm4gYmFbb2Zmc2V0XTtcbn1cblxuZnVuY3Rpb24gcmVhZEludEJFKGJhLCBvZmZzZXQpIHtcbiAgICByZXR1cm4gKGJhW29mZnNldF0gPDwgMjQpIHwgKGJhW29mZnNldCArIDFdIDw8IDE2KSB8IChiYVtvZmZzZXQgKyAyXSA8PCA4KSB8IChiYVtvZmZzZXQgKyAzXSk7XG59XG5cbi8vIEV4cG9ydHMgaWYgd2UgYXJlIGJlaW5nIHVzZWQgYXMgYSBtb2R1bGVcblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBCbG9iRmV0Y2hhYmxlOiBCbG9iRmV0Y2hhYmxlLFxuICAgICAgICBVUkxGZXRjaGFibGU6IFVSTEZldGNoYWJsZSxcblxuICAgICAgICByZWFkSW50OiByZWFkSW50LFxuICAgICAgICByZWFkSW50QkU6IHJlYWRJbnRCRSxcbiAgICAgICAgcmVhZEludDY0OiByZWFkSW50NjQsXG4gICAgICAgIHJlYWRJbnQ2NExFOiByZWFkSW50NjRMRSxcbiAgICAgICAgcmVhZEludDY0QkU6IHJlYWRJbnQ2NEJFLFxuICAgICAgICByZWFkU2hvcnQ6IHJlYWRTaG9ydCxcbiAgICAgICAgcmVhZEJ5dGU6IHJlYWRCeXRlLFxuICAgICAgICByZWFkRmxvYXQ6IHJlYWRGbG9hdFxuICAgIH1cbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vL1xuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xuLy9cbi8vIGJyb3dzZXItdXMuanM6IHN0YW5kYXJkIFVJIHdpcmluZ1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XG5cbiAgICB2YXIgbmYgPSByZXF1aXJlKCcuL251bWZvcm1hdHMnKTtcbiAgICB2YXIgZm9ybWF0TG9uZ0ludCA9IG5mLmZvcm1hdExvbmdJbnQ7XG5cbiAgICB2YXIgbWFrZVpvb21TbGlkZXIgPSByZXF1aXJlKCcuL3pvb21zbGlkZXInKTtcblxuICAgIC8vIEZvciBzaWRlIGVmZmVjdHNcblxuICAgIHJlcXVpcmUoJy4vdGllci1lZGl0Jyk7XG4gICAgcmVxdWlyZSgnLi9leHBvcnQtY29uZmlnJyk7XG4gICAgcmVxdWlyZSgnLi9leHBvcnQtdWknKTtcbiAgICByZXF1aXJlKCcuL2V4cG9ydC1pbWFnZScpO1xuICAgIHJlcXVpcmUoJy4vc3ZnLWV4cG9ydCcpO1xuICAgIHJlcXVpcmUoJy4vc2Vzc2lvbicpO1xufVxuXG4vKlxuICogUXVpdGUgYSBiaXQgb2YgdGhpcyBvdWdodCB0byBiZSBkb25lIHVzaW5nIGEgdGVtcGxhdGluZyBzeXN0ZW0sIGJ1dFxuICogc2luY2Ugd2ViLWNvbXBvbmVudHMgaXNuJ3QgcXVpdGUgcmVhZHkgZm9yIHByaW1lIHRpbWUgeWV0IHdlJ2xsIHN0aWNrXG4gKiB3aXRoIGNvbnN0cnVjdGluZyBpdCBhbGwgaW4gSmF2YXNjcmlwdCBmb3Igbm93Li4uXG4gKi9cblxuQnJvd3Nlci5wcm90b3R5cGUuaW5pdFVJID0gZnVuY3Rpb24oaG9sZGVyLCBnZW5vbWVQYW5lbCkge1xuICAgIGlmICghdGhpcy5ub1NvdXJjZUNTUykge1xuICAgICAgWydib290c3RyYXAtc2NvcGVkLmNzcycsICdkYWxsaWFuY2Utc2NvcGVkLmNzcycsICdmb250LWF3ZXNvbWUubWluLmNzcyddLmZvckVhY2goZnVuY3Rpb24ocGF0aCkge1xuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdsaW5rJywgJycsIHtcbiAgICAgICAgICByZWw6ICdzdHlsZXNoZWV0JyxcbiAgICAgICAgICBocmVmOiB0aGlzLnJlc29sdmVVUkwoJyQkY3NzLycgKyBwYXRoKVxuICAgICAgICB9KSk7XG4gICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHZhciBiID0gdGhpcztcblxuICAgIGlmICghYi5kaXNhYmxlRGVmYXVsdEZlYXR1cmVQb3B1cCkge1xuICAgICAgICB0aGlzLmFkZEZlYXR1cmVMaXN0ZW5lcihmdW5jdGlvbihldiwgZmVhdHVyZSwgaGl0LCB0aWVyKSB7XG4gICAgICAgICAgICBiLmZlYXR1cmVQb3B1cChldiwgZmVhdHVyZSwgaGl0LCB0aWVyLCB7IGRpc2FibGVEcmFnOiBiLmRpc2FibGVGZWF0dXJlUG9wdXBEcmFnIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBob2xkZXIuY2xhc3NMaXN0LmFkZCgnZGFsbGlhbmNlJyk7XG4gICAgdmFyIHRvb2xiYXIgPSBiLnRvb2xiYXIgPSBtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ2J0bi10b29sYmFyIHRvb2xiYXInfSk7XG5cbiAgICB2YXIgdGl0bGUgPSBiLmNvb3JkU3lzdGVtLnNwZWNpZXNOYW1lICsgJyAnICsgYi5uYW1lRm9yQ29vcmRTeXN0ZW0oYi5jb29yZFN5c3RlbSk7XG4gICAgaWYgKHRoaXMuc2V0RG9jdW1lbnRUaXRsZSkge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRpdGxlICsgJyA6OiBkYWxsaWFuY2UnO1xuICAgIH1cblxuICAgIHZhciBsb2NGaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsICcnLCB7Y2xhc3NOYW1lOiAnbG9jLWZpZWxkJ30pO1xuICAgIGIubWFrZVRvb2x0aXAobG9jRmllbGQsICdFbnRlciBhIGdlbm9taWMgbG9jYXRpb24gb3IgZ2VuZSBuYW1lJyk7XG4gICAgdmFyIGxvY1N0YXR1c0ZpZWxkID0gbWFrZUVsZW1lbnQoJ3AnLCAnJywge2NsYXNzTmFtZTogJ2xvYy1zdGF0dXMnfSk7XG5cbiAgICB2YXIgem9vbUluQnRuID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtc2VhcmNoLXBsdXMnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xuICAgIHZhciB6b29tU2xpZGVyID0gbmV3IG1ha2Vab29tU2xpZGVyKHt3aWR0aDogYi56b29tU2xpZGVyV2lkdGh9KTtcbiAgICBiLm1ha2VUb29sdGlwKHpvb21TbGlkZXIsIFwiSGlnaGxpZ2h0ZWQgYnV0dG9uIHNob3dzIGN1cnJlbnQgem9vbSBsZXZlbCwgZ3JheSBidXR0b24gc2hvd3MgaW5hY3RpdmUgem9vbSBsZXZlbCAoY2xpY2sgb3IgdGFwIFNQQUNFIHRvIHRvZ2dsZSkuXCIpXG5cbiAgICB2YXIgem9vbU91dEJ0biA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLXNlYXJjaC1taW51cyd9KV0sIHtjbGFzc05hbWU6ICdidG4nfSk7XG5cbiAgICB2YXIgY2xlYXJIaWdobGlnaHRzQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtZXJhc2VyJ30pXSwge2NsYXNzTmFtZTogJ2J0bid9KTtcblxuICAgIHZhciBhZGRUcmFja0J0biA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLXBsdXMnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xuICAgIHZhciBmYXZCdG4gPSBtYWtlRWxlbWVudCgnYScsIFttYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1ib29rbWFyayd9KV0sIHtjbGFzc05hbWU6ICdidG4nfSk7XG4gICAgdmFyIHN2Z0J0biA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLXByaW50J30pXSwge2NsYXNzTmFtZTogJ2J0bid9KTtcbiAgICB2YXIgcmVzZXRCdG4gPSBtYWtlRWxlbWVudCgnYScsIFttYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1yZWZyZXNoJ30pXSwge2NsYXNzTmFtZTogJ2J0bid9KTtcbiAgICB2YXIgb3B0c0J1dHRvbiA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLWNvZ3MnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xuICAgIHZhciBoZWxwQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtcXVlc3Rpb24nfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xuXG4gICAgdmFyIHRpZXJFZGl0QnV0dG9uID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtcm9hZCd9KV0sIHtjbGFzc05hbWU6ICdidG4nfSk7XG4gICAgYi5tYWtlVG9vbHRpcCh0aWVyRWRpdEJ1dHRvbiwgJ0NvbmZpZ3VyZSBjdXJyZW50bHkgc2VsZWN0ZWQgdHJhY2socykgKEUpJylcblxuICAgIHZhciBsZWFwTGVmdEJ1dHRvbiA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLWFuZ2xlLWxlZnQnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30sIHt3aWR0aDogJzVweCd9KTtcbiAgICB2YXIgbGVhcFJpZ2h0QnV0dG9uID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtYW5nbGUtcmlnaHQnfSldLCB7Y2xhc3NOYW1lOiAnYnRuIHB1bGwtcmlnaHQnfSwge3dpZHRoOiAnNXB4J30pO1xuXG4gICAgdmFyIG1vZGVCdXR0b25zID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdidG4tZ3JvdXAgcHVsbC1yaWdodCd9KTtcbiAgICBpZiAoIXRoaXMubm9UcmFja0FkZGVyKVxuICAgICAgICBtb2RlQnV0dG9ucy5hcHBlbmRDaGlsZChhZGRUcmFja0J0bik7XG4gICAgaWYgKCF0aGlzLm5vVHJhY2tFZGl0b3IpXG4gICAgICAgIG1vZGVCdXR0b25zLmFwcGVuZENoaWxkKHRpZXJFZGl0QnV0dG9uKTtcbiAgICBpZiAoIXRoaXMubm9FeHBvcnQpXG4gICAgICAgIG1vZGVCdXR0b25zLmFwcGVuZENoaWxkKHN2Z0J0bik7XG4gICAgaWYgKCF0aGlzLm5vT3B0aW9ucylcbiAgICAgICAgbW9kZUJ1dHRvbnMuYXBwZW5kQ2hpbGQob3B0c0J1dHRvbik7XG4gICAgaWYgKCF0aGlzLm5vSGVscClcbiAgICAgICAgbW9kZUJ1dHRvbnMuYXBwZW5kQ2hpbGQoaGVscEJ1dHRvbik7XG5cbiAgICB0aGlzLnNldFVpTW9kZSA9IGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgdGhpcy51aU1vZGUgPSBtO1xuICAgICAgICB2YXIgbWIgPSB7aGVscDogaGVscEJ1dHRvbiwgYWRkOiBhZGRUcmFja0J0biwgb3B0czogb3B0c0J1dHRvbiwgJ2V4cG9ydCc6IHN2Z0J0biwgdGllcjogdGllckVkaXRCdXR0b259O1xuICAgICAgICBmb3IgKHZhciB4IGluIG1iKSB7XG4gICAgICAgICAgICBpZiAoeCA9PSBtKVxuICAgICAgICAgICAgICAgIG1iW3hdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1iW3hdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm5vTGVhcEJ1dHRvbnMpXG4gICAgICAgIHRvb2xiYXIuYXBwZW5kQ2hpbGQobGVhcFJpZ2h0QnV0dG9uKTtcblxuICAgIGlmIChtb2RlQnV0dG9ucy5maXJzdENoaWxkKVxuICAgICAgICB0b29sYmFyLmFwcGVuZENoaWxkKG1vZGVCdXR0b25zKTtcblxuICAgIGlmICghdGhpcy5ub0xlYXBCdXR0b25zKVxuICAgICAgICB0b29sYmFyLmFwcGVuZENoaWxkKGxlYXBMZWZ0QnV0dG9uKTtcbiAgICBpZiAoIXRoaXMubm9UaXRsZSkge1xuICAgICAgICB0b29sYmFyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdkaXYnLCBtYWtlRWxlbWVudCgnaDQnLCB0aXRsZSwge30sIHttYXJnaW46ICcwcHgnfSksIHtjbGFzc05hbWU6ICdidG4tZ3JvdXAgdGl0bGUnfSkpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMubm9Mb2NhdGlvbkZpZWxkKVxuICAgICAgICB0b29sYmFyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdkaXYnLCBbbG9jRmllbGQsIGxvY1N0YXR1c0ZpZWxkXSwge2NsYXNzTmFtZTogJ2J0bi1ncm91cCBsb2MtZ3JvdXAnfSkpO1xuICAgIGlmICghdGhpcy5ub0NsZWFySGlnaGxpZ2h0c0J1dHRvbilcbiAgICAgICAgdG9vbGJhci5hcHBlbmRDaGlsZChjbGVhckhpZ2hsaWdodHNCdXR0b24pO1xuXG4gICAgaWYgKCF0aGlzLm5vWm9vbVNsaWRlcikge1xuICAgICAgICB0b29sYmFyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdkaXYnLCBbem9vbUluQnRuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3NwYW4nLCB6b29tU2xpZGVyLCB7Y2xhc3NOYW1lOiAnYnRuJ30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbU91dEJ0bl0sIHtjbGFzc05hbWU6ICdidG4tZ3JvdXAnfSkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRvb2xiYXJCZWxvdykge1xuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoZ2Vub21lUGFuZWwpO1xuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQodG9vbGJhcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKHRvb2xiYXIpO1xuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoZ2Vub21lUGFuZWwpO1xuICAgIH1cblxuXG4gICAgdmFyIGx0MiA9IE1hdGgubG9nKDIpIC8gTWF0aC5sb2coMTApO1xuICAgIHZhciBsdDUgPSBNYXRoLmxvZyg1KSAvIE1hdGgubG9nKDEwKTtcbiAgICB2YXIgcm91bmRTbGlkZXJWYWx1ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgdmFyIGx0eCA9ICh4IC8gYi56b29tRXhwdCArIE1hdGgubG9nKGIuem9vbUJhc2UpKSAvIE1hdGgubG9nKDEwKTtcblxuICAgICAgICB2YXIgd2hvbGUgPSBsdHh8MFxuICAgICAgICB2YXIgZnJhYyA9IGx0eCAtIHdob2xlO1xuICAgICAgICB2YXIgcm91bmRlZFxuXG4gICAgICAgIGlmIChmcmFjIDwgMC4wMSlcbiAgICAgICAgICAgIHJvdW5kZWQgPSB3aG9sZTtcbiAgICAgICAgZWxzZSBpZiAoZnJhYyA8PSAobHQyICsgMC4wMSkpXG4gICAgICAgICAgICByb3VuZGVkID0gd2hvbGUgKyBsdDI7XG4gICAgICAgIGVsc2UgaWYgKGZyYWMgPD0gKGx0NSArIDAuMDEpKVxuICAgICAgICAgICAgcm91bmRlZCA9IHdob2xlICsgbHQ1O1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJvdW5kZWQgPSB3aG9sZSArIDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKHJvdW5kZWQgKiBNYXRoLmxvZygxMCkgLU1hdGgubG9nKGIuem9vbUJhc2UpKSAqIGIuem9vbUV4cHQ7XG4gICAgfVxuXG4gICAgdmFyIG1hcmtTbGlkZXIgPSBmdW5jdGlvbih4KSB7XG4gICAgICAgIHpvb21TbGlkZXIuYWRkTGFiZWwoeCwgaHVtYW5SZWFkYWJsZVNjYWxlKE1hdGguZXhwKHggLyBiLnpvb21FeHB0KSAqIGIuem9vbUJhc2UpKTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZFZpZXdMaXN0ZW5lcihmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBfb2xkWm9vbSwgem9vbSkge1xuICAgICAgICBsb2NGaWVsZC52YWx1ZSA9IChjaHIgKyAnOicgKyBmb3JtYXRMb25nSW50KG1pbikgKyAnLi4nICsgZm9ybWF0TG9uZ0ludChtYXgpKTtcbiAgICAgICAgem9vbVNsaWRlci5taW4gPSB6b29tLm1pbnwwO1xuICAgICAgICB6b29tU2xpZGVyLm1heCA9IHpvb20ubWF4fDA7XG4gICAgICAgIGlmICh6b29tLmlzU25hcFpvb21pbmcpIHtcbiAgICAgICAgICAgIHpvb21TbGlkZXIudmFsdWUgPSB6b29tLmFsdGVybmF0ZVxuICAgICAgICAgICAgem9vbVNsaWRlci52YWx1ZTIgPSB6b29tLmN1cnJlbnQ7XG4gICAgICAgICAgICB6b29tU2xpZGVyLmFjdGl2ZSA9IDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB6b29tU2xpZGVyLnZhbHVlID0gem9vbS5jdXJyZW50O1xuICAgICAgICAgICAgem9vbVNsaWRlci52YWx1ZTIgPSB6b29tLmFsdGVybmF0ZTtcbiAgICAgICAgICAgIHpvb21TbGlkZXIuYWN0aXZlID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh6b29tLmN1cnJlbnQgPT0gem9vbS5taW4pXG4gICAgICAgICAgICB6b29tSW5CdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgem9vbUluQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKHpvb20uY3VycmVudCA9PSB6b29tLm1heClcbiAgICAgICAgICAgIHpvb21PdXRCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgem9vbU91dEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgIHpvb21TbGlkZXIucmVtb3ZlTGFiZWxzKCk7XG4gICAgICAgIHZhciB6bWluID0gem9vbS5taW47XG4gICAgICAgIHZhciB6bWF4ID0gem9vbS5tYXg7XG4gICAgICAgIHZhciB6cmFuZ2UgPSB6bWF4IC0gem1pbjtcblxuXG4gICAgICAgIHZhciBudW1TbGlkZXJUaWNrcyA9IDQ7XG4gICAgICAgIGlmIChiLnpvb21TbGlkZXJXaWR0aCAmJiBiLnpvb21TbGlkZXJXaWR0aCA8IDE1MClcbiAgICAgICAgICAgIG51bVNsaWRlclRpY2tzID0gMztcbiAgICAgICAgbWFya1NsaWRlcihyb3VuZFNsaWRlclZhbHVlKHptaW4pKTtcbiAgICAgICAgZm9yICh2YXIgc3RpID0gMTsgc3RpIDwgbnVtU2xpZGVyVGlja3MgLSAxOyArK3N0aSkge1xuICAgICAgICAgICAgbWFya1NsaWRlcihyb3VuZFNsaWRlclZhbHVlKHptaW4gKyAoMS4wICogc3RpICogenJhbmdlIC8gKG51bVNsaWRlclRpY2tzIC0xKSkpKTtcbiAgICAgICAgfVxuICAgICAgICBtYXJrU2xpZGVyKHJvdW5kU2xpZGVyVmFsdWUoem1heCkpO1xuXG4gICAgICAgIGlmIChiLnN0b3JlU3RhdHVzKSB7XG4gICAgICAgICAgICBiLnN0b3JlVmlld1N0YXR1cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGIuaGlnaGxpZ2h0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjbGVhckhpZ2hsaWdodHNCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xlYXJIaWdobGlnaHRzQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkVGllckxpc3RlbmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYi5zdG9yZVN0YXR1cykge1xuICAgICAgICAgICAgYi5zdG9yZVRpZXJTdGF0dXMoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgbG9jRmllbGQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGlmIChldi5rZXlDb2RlID09IDQwKSB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGIuc2V0U2VsZWN0ZWRUaWVyKDApO1xuICAgICAgICB9IGlmIChldi5rZXlDb2RlID09IDEwIHx8IGV2LmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG5cblxuICAgICAgICAgICAgdmFyIGcgPSBsb2NGaWVsZC52YWx1ZTtcbiAgICAgICAgICAgIGIuc2VhcmNoKGcsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jU3RhdHVzRmllbGQudGV4dENvbnRlbnQgPSAnJyArIGVycjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2NTdGF0dXNGaWVsZC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgdmFyIHRyYWNrQWRkUG9wdXA7XG4gICAgYWRkVHJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBiLnNob3dUcmFja0FkZGVyKGV2KTtcbiAgICB9LCBmYWxzZSk7XG4gICAgYi5tYWtlVG9vbHRpcChhZGRUcmFja0J0biwgJ0FkZCBhIG5ldyB0cmFjayBmcm9tIHRoZSByZWdpc3RyeSBvciBhbiBpbmRleGVkIGZpbGUuIChBKScpO1xuXG4gICAgem9vbUluQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBiLnpvb21TdGVwKC0xMCk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGIubWFrZVRvb2x0aXAoem9vbUluQnRuLCAnWm9vbSBpbiAoKyknKTtcblxuICAgIHpvb21PdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGIuem9vbVN0ZXAoMTApO1xuICAgIH0sIGZhbHNlKTtcbiAgICBiLm1ha2VUb29sdGlwKHpvb21PdXRCdG4sICdab29tIG91dCAoLSknKTtcblxuICAgIHpvb21TbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIHdhbnRTbmFwID0gem9vbVNsaWRlci5hY3RpdmUgPT0gMjtcbiAgICAgICAgaWYgKHdhbnRTbmFwICE9IGIuaXNTbmFwWm9vbWluZykge1xuICAgICAgICAgICAgYi5zYXZlZFpvb20gPSBiLnpvb21TbGlkZXJWYWx1ZSAgLSBiLnpvb21NaW47XG4gICAgICAgICAgICBiLmlzU25hcFpvb21pbmcgPSB3YW50U25hcDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWN0aXZlWlNWID0gem9vbVNsaWRlci5hY3RpdmUgPT0gMSA/IHpvb21TbGlkZXIudmFsdWUgOiB6b29tU2xpZGVyLnZhbHVlMjtcblxuICAgIFx0Yi56b29tU2xpZGVyVmFsdWUgPSAoMS4wICogYWN0aXZlWlNWKTtcbiAgICBcdGIuem9vbShNYXRoLmV4cCgoMS4wICogYWN0aXZlWlNWKSAvIGIuem9vbUV4cHQpKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICBmYXZCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBiLm1ha2VUb29sdGlwKGZhdkJ0biwgJ0Zhdm91cml0ZSByZWdpb25zJyk7XG5cbiAgICBzdmdCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBiLm9wZW5FeHBvcnRQYW5lbCgpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBiLm1ha2VUb29sdGlwKHN2Z0J0biwgJ0V4cG9ydCBwdWJsaWNhdGlvbi1xdWFsaXR5IFNWRy4gKFgpJyk7XG5cbiAgICB2YXIgb3B0c1BvcHVwO1xuICAgIG9wdHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBiLnRvZ2dsZU9wdHNQb3B1cChldik7XG4gICAgfSwgZmFsc2UpO1xuICAgIGIubWFrZVRvb2x0aXAob3B0c0J1dHRvbiwgJ0NvbmZpZ3VyZSBvcHRpb25zLicpO1xuXG4gICAgaGVscEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBiLnRvZ2dsZUhlbHBQb3B1cChldik7XG4gICAgfSk7XG4gICAgYi5tYWtlVG9vbHRpcChoZWxwQnV0dG9uLCAnSGVscDsgS2V5Ym9hcmQgc2hvcnRjdXRzLiAoSCknKTtcblxuICAgIHRpZXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChiLnNlbGVjdGVkVGllcnMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGIub3BlblRpZXJQYW5lbChiLnRpZXJzW2Iuc2VsZWN0ZWRUaWVyc1swXV0pO1xuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgbGVhcExlZnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBiLmxlYXAoYi5yZXZlcnNlS2V5U2Nyb2xsaW5nID8gLTEgOiAxLCBmYWxzZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgbGVhcFJpZ2h0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgYi5sZWFwKGIucmV2ZXJzZUtleVNjcm9sbGluZyA/IDEgOiAtMSwgZmFsc2UpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIGIuYWRkVGllclNlbGVjdGlvbkxpc3RlbmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3QgPSBiLmdldFNlbGVjdGVkVGllcigpO1xuICAgICAgICB2YXIgdGllcjtcbiAgICAgICAgaWYgKHN0ID49IDApXG4gICAgICAgICAgICB0aWVyID0gYi50aWVyc1tzdF07XG5cbiAgICAgICAgdmFyIGNhbkxlYXAgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRpZXIgJiYgdGllci5mZWF0dXJlU291cmNlKSB7XG4gICAgICAgICAgICBpZiAoYi5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ3F1YW50TGVhcCcpICYmIHR5cGVvZih0aWVyLnF1YW50TGVhcFRocmVzaG9sZCkgPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBjYW5MZWFwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBsZWFwTGVmdEJ1dHRvbi50aXRsZSA9ICdKdW1wIHRvIHRoZSBuZXh0IGZlYXR1cmUgaW4gdGhlIHNlbGVjdGVkIHRyYWNrIFwiJyArICh0aWVyLmNvbmZpZy5uYW1lIHx8IHRpZXIuZGFzU291cmNlLm5hbWUpICsgJ1wiIChjdHJsK0xFRlQpJztcbiAgICAgICAgICAgICAgICBsZWFwUmlnaHRCdXR0b24udGl0bGUgPSAnSnVtcCB0byB0aGUgbmV4dCByZWdpb24gd2l0aCBhIHNjb3JlIGFib3ZlIHRoZSB0aHJlc2hvbGQgaW4gdGhlIHNlbGVjdGVkIHRyYWNrIFwiJyArICh0aWVyLmNvbmZpZy5uYW1lIHx8IHRpZXIuZGFzU291cmNlLm5hbWUpICsgJ1wiXCIgKGN0cmwrUklHSFQpJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYi5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ2xlYXAnKSkge1xuICAgICAgICAgICAgICAgIGxlYXBMZWZ0QnV0dG9uLnRpdGxlID0gJ0p1bXAgdG8gdGhlIG5leHQgZmVhdHVyZSBpbiB0aGUgc2VsZWN0ZWQgdHJhY2sgXCInICsgKHRpZXIuY29uZmlnLm5hbWUgfHwgdGllci5kYXNTb3VyY2UubmFtZSkgKyAnXCIgKGN0cmwrTEVGVCknO1xuICAgICAgICAgICAgICAgIGxlYXBSaWdodEJ1dHRvbi50aXRsZSA9ICdKdW1wIHRvIHRoZSBuZXh0IGZlYXR1cmUgaW4gdGhlIHNlbGVjdGVkIHRyYWNrIFwiJyArICh0aWVyLmNvbmZpZy5uYW1lIHx8IHRpZXIuZGFzU291cmNlLm5hbWUpICsgJ1wiIChjdHJsK1JJR0hUKSc7XG4gICAgICAgICAgICAgICAgY2FuTGVhcCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxlYXBMZWZ0QnV0dG9uLnRpdGxlID0gJ0p1bXAgbGVmdCAoc2hpZnQrTEVGVCknO1xuICAgICAgICAgICAgICAgIGxlYXBSaWdodEJ1dHRvbi50aXRsZSA9ICdKdW1wIHJpZ2h0IChzaGlmdCtSSUdIVCknO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGVhcExlZnRCdXR0b24uZmlyc3RDaGlsZC5jbGFzc05hbWUgPSBjYW5MZWFwID8gJ2ZhIGZhLWFuZ2xlLWRvdWJsZS1sZWZ0JyA6ICdmYSBmYS1hbmdsZS1sZWZ0JztcbiAgICAgICAgbGVhcFJpZ2h0QnV0dG9uLmZpcnN0Q2hpbGQuY2xhc3NOYW1lID0gY2FuTGVhcCA/ICdmYSBmYS1hbmdsZS1kb3VibGUtcmlnaHQnIDogJ2ZhIGZhLWFuZ2xlLXJpZ2h0JztcbiAgICB9KTtcblxuICAgIGNsZWFySGlnaGxpZ2h0c0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGIuY2xlYXJIaWdobGlnaHRzKCk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGIubWFrZVRvb2x0aXAoY2xlYXJIaWdobGlnaHRzQnV0dG9uLCAnQ2xlYXIgaGlnaGxpZ2h0cyAoQyknKTtcblxuICAgIGIuYWRkVGllclNlbGVjdGlvbldyYXBMaXN0ZW5lcihmdW5jdGlvbihkaXIpIHtcbiAgICAgICAgaWYgKGRpciA8IDApIHtcbiAgICAgICAgICAgIGIuc2V0U2VsZWN0ZWRUaWVyKG51bGwpO1xuICAgICAgICAgICAgbG9jRmllbGQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgYi5hZGRUaWVyU2VsZWN0aW9uTGlzdGVuZXIoZnVuY3Rpb24oc2VsKSB7XG4gICAgICAgIGlmIChiLnVpTW9kZSA9PT0gJ3RpZXInKSB7XG4gICAgICAgICAgICBpZiAoc2VsLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgYi5oaWRlVG9vbFBhbmVsKCk7XG4gICAgICAgICAgICAgICAgYi5tYW5pcHVsYXRpbmdUaWVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBiLnVpTW9kZSA9ICdub25lJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGZ0ID0gYi50aWVyc1tzZWxbMF1dO1xuICAgICAgICAgICAgICAgIGlmIChmdCAhPSBiLm1hbmlwdWxhdGluZ1RpZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYi5vcGVuVGllclBhbmVsKGZ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciB1aUtleUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnYnVraDogJyArIGV2LmtleUNvZGUpO1xuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PSA2NSB8fCBldi5rZXlDb2RlID09IDk3KSB7ICAvLyBhXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGIuc2hvd1RyYWNrQWRkZXIoKTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDcyIHx8IGV2LmtleUNvZGUgPT0gMTA0KSB7IC8vIGhcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYi50b2dnbGVIZWxwUG9wdXAoZXYpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gNjkgfHwgZXYua2V5Q29kZSA9PSAxMDEpIHsgLy9lXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChiLnNlbGVjdGVkVGllcnMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICBiLm9wZW5UaWVyUGFuZWwoYi50aWVyc1tiLnNlbGVjdGVkVGllcnNbMF1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDg4IHx8IGV2LmtleUNvZGUgPT0gMTIwKSB7IC8vIHhcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYi5vcGVuRXhwb3J0UGFuZWwoKTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDY3IHx8IGV2LmtleUNvZGUgPT0gOTkpIHsgLy8gY1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBiLmNsZWFySGlnaGxpZ2h0cygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdWlLZXlIYW5kbGVyLCBmYWxzZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaG9sZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB1aUtleUhhbmRsZXIsIGZhbHNlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICBob2xkZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGlmIChldi5rZXlDb2RlID09PSAyNykge1xuICAgICAgICAgICAgaWYgKGIudWlNb2RlICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnN1bWUgZXZlbnQgaWYgdG9vbCBwYW5lbCBpcyBvcGVuLlxuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgYi5zZXRVaU1vZGUoJ25vbmUnKTtcbiAgICAgICAgICAgICAgICBiLmhpZGVUb29sUGFuZWwoKTtcblxuICAgICAgICAgICAgICAgIGlmIChiLnNlbGVjdGVkVGllcnMgJiYgYi5zZWxlY3RlZFRpZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYi5icm93c2VySG9sZGVyLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5zaG93VG9vbFBhbmVsID0gZnVuY3Rpb24ocGFuZWwsIG5vd3JhcCkge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5hY3RpdmVUb29sUGFuZWwpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUb29sUGFuZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmFjdGl2ZVRvb2xQYW5lbCk7XG4gICAgfVxuXG4gICAgdmFyIGNvbnRlbnQ7XG4gICAgaWYgKG5vd3JhcClcbiAgICAgICAgY29udGVudCA9IHBhbmVsO1xuICAgIGVsc2VcbiAgICAgICAgY29udGVudCA9IG1ha2VFbGVtZW50KCdkaXYnLCBwYW5lbCwge30sIHtvdmVyZmxvd1k6ICdhdXRvJywgd2lkdGg6ICcxMDAlJ30pO1xuXG5cbiAgICB2YXIgZGl2aWRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBtYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1jYXJldC1yaWdodCd9KSwge2NsYXNzTmFtZTogJ3Rvb2wtZGl2aWRlcid9KTtcbiAgICBkaXZpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdGhpc0IuaGlkZVRvb2xQYW5lbCgpO1xuICAgICAgICB0aGlzQi5zZXRVaU1vZGUoJ25vbmUnKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgdGhpcy5tYWtlVG9vbHRpcChkaXZpZGVyLCAnQ2xvc2UgdG9vbCBwYW5lbCAoRVNDKScpO1xuICAgIHRoaXMuYWN0aXZlVG9vbFBhbmVsID0gbWFrZUVsZW1lbnQoJ2RpdicsIFtkaXZpZGVyLCBjb250ZW50XSwge2NsYXNzTmFtZTogJ3Rvb2wtaG9sZGVyJ30pO1xuICAgIHRoaXMuc3ZnSG9sZGVyLmFwcGVuZENoaWxkKHRoaXMuYWN0aXZlVG9vbFBhbmVsKTtcbiAgICB0aGlzLnJlc2l6ZVZpZXdlcigpO1xuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuaGlkZVRvb2xQYW5lbCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmFjdGl2ZVRvb2xQYW5lbCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRvb2xQYW5lbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuYWN0aXZlVG9vbFBhbmVsKTtcbiAgICB9XG4gICAgdGhpcy5zdmdIb2xkZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5hY3RpdmVUb29sUGFuZWwgPSBudWxsO1xuICAgIHRoaXMucmVzaXplVmlld2VyKCk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnRvZ2dsZUhlbHBQb3B1cCA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgaWYgKHRoaXMudWlNb2RlID09PSAnaGVscCcpIHtcbiAgICAgICAgdGhpcy5oaWRlVG9vbFBhbmVsKCk7XG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdub25lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGhlbHBGcmFtZSA9IG1ha2VFbGVtZW50KCdpZnJhbWUnLCBudWxsLCB7c2Nyb2xsaW5nOiAneWVzJywgc2VhbWxlc3M6ICdzZWFtbGVzcycsIHNyYzogdGhpcy5yZXNvbHZlVVJMKCckJGhlbHAvaW5kZXguaHRtbCcpLCBjbGFzc05hbWU6ICdoZWxwLXBhbmVsJ30pO1xuICAgICAgICB0aGlzLnNob3dUb29sUGFuZWwoaGVscEZyYW1lLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdoZWxwJyk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS50b2dnbGVPcHRzUG9wdXAgPSBmdW5jdGlvbihldikge1xuICAgIHZhciBiID0gdGhpcztcblxuICAgIGlmICh0aGlzLnVpTW9kZSA9PT0gJ29wdHMnKSB7XG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xuICAgICAgICB0aGlzLnNldFVpTW9kZSgnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvcHRzRm9ybSA9IG1ha2VFbGVtZW50KCdkaXYnLCBudWxsLCB7Y2xhc3NOYW1lOiAnZm9ybS1ob3Jpem9udGFsJ30sIHtib3hTaXppbmc6ICdib3JkZXItYm94JywgTW96Qm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCB2ZXJ0aWNhbEFsaWduOiAndG9wJ30pO1xuICAgICAgICB2YXIgb3B0c1RhYmxlID0gbWFrZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgIG9wdHNUYWJsZS5jZWxsUGFkZGluZyA9IDU7XG5cbiAgICAgICAgdmFyIHNjcm9sbE1vZGVCdXR0b24gPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3R5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IGIucmV2ZXJzZVNjcm9sbGluZ30pO1xuICAgICAgICBzY3JvbGxNb2RlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBiLnJldmVyc2VTY3JvbGxpbmcgPSBzY3JvbGxNb2RlQnV0dG9uLmNoZWNrZWQ7XG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgb3B0c1RhYmxlLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0cicsIFttYWtlRWxlbWVudCgndGQnLCAnUmV2ZXJzZSB0cmFja3BhZCBzY3JvbGxpbmcnLCB7YWxpZ246ICdyaWdodCd9KSwgbWFrZUVsZW1lbnQoJ3RkJywgc2Nyb2xsTW9kZUJ1dHRvbildKSk7XG5cbiAgICAgICAgdmFyIHNjcm9sbEtleUJ1dHRvbiA9IG1ha2VFbGVtZW50KCdpbnB1dCcsICcnLCB7dHlwZTogJ2NoZWNrYm94JywgY2hlY2tlZDogYi5yZXZlcnNlS2V5U2Nyb2xsaW5nfSk7XG4gICAgICAgIHNjcm9sbEtleUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgYi5yZXZlcnNlS2V5U2Nyb2xsaW5nID0gc2Nyb2xsS2V5QnV0dG9uLmNoZWNrZWQ7XG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgb3B0c1RhYmxlLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0cicsIFttYWtlRWxlbWVudCgndGQnLCAnUmV2ZXJzZSBzY3JvbGxpbmcgYnV0dG9ucyBhbmQga2V5cycsIHthbGlnbjogJ3JpZ2h0J30pLCBtYWtlRWxlbWVudCgndGQnLCBzY3JvbGxLZXlCdXR0b24pXSkpO1xuXG5cbiAgICAgICAgdmFyIHJ1bGVyU2VsZWN0ID0gbWFrZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgICAgICBydWxlclNlbGVjdC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgJ0xlZnQnLCB7dmFsdWU6ICdsZWZ0J30pKTtcbiAgICAgICAgcnVsZXJTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdDZW50ZXInLCB7dmFsdWU6ICdjZW50ZXInfSkpO1xuICAgICAgICBydWxlclNlbGVjdC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgJ1JpZ2h0Jywge3ZhbHVlOiAncmlnaHQnfSkpO1xuICAgICAgICBydWxlclNlbGVjdC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgJ05vbmUnLCB7dmFsdWU6ICdub25lJ30pKTtcbiAgICAgICAgcnVsZXJTZWxlY3QudmFsdWUgPSBiLnJ1bGVyTG9jYXRpb247XG4gICAgICAgIHJ1bGVyU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBiLnJ1bGVyTG9jYXRpb24gPSBydWxlclNlbGVjdC52YWx1ZTtcbiAgICAgICAgICAgIGIucG9zaXRpb25SdWxlcigpO1xuICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IGIudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgICAgICAgICAgYi50aWVyc1t0aV0ucGFpbnRRdWFudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYi5zdG9yZVN0YXR1cygpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIG9wdHNUYWJsZS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndHInLCBbbWFrZUVsZW1lbnQoJ3RkJywgJ1ZlcnRpY2FsIGd1aWRlbGluZScsIHthbGlnbjogJ3JpZ2h0J30pLCBtYWtlRWxlbWVudCgndGQnLCBydWxlclNlbGVjdCldKSk7XG5cbiAgICAgICAgdmFyIHNpbmdsZUJhc2VIaWdobGlnaHRCdXR0b24gPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3R5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IGIuc2luZ2xlQmFzZUhpZ2hsaWdodH0pO1xuICAgICAgICBzaW5nbGVCYXNlSGlnaGxpZ2h0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBiLnNpbmdsZUJhc2VIaWdobGlnaHQgPSBzaW5nbGVCYXNlSGlnaGxpZ2h0QnV0dG9uLmNoZWNrZWQ7XG4gICAgICAgICAgICBiLnBvc2l0aW9uUnVsZXIoKTtcbiAgICAgICAgICAgIGIuc3RvcmVTdGF0dXMoKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICBzaW5nbGVCYXNlSGlnaGxpZ2h0QnV0dG9uLnNldEF0dHJpYnV0ZSgnaWQnLCdzaW5nbGVCYXNlSGlnaHRsaWdodEJ1dHRvbicpOyAvLyBtYWtpbmcgdGhpcyBiZWNhdXNlIGFjY2VzcyBpcyByZXF1aXJlZCB3aGVuIHRoZSBrZXkgJ3UnIGlzIHByZXNzZWQgYW5kIHRoZSBvcHRpb25zIGFyZSB2aXNpYmxlXG4gICAgICAgIG9wdHNUYWJsZS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndHInLCBbbWFrZUVsZW1lbnQoJ3RkJywgJ0Rpc3BsYXkgYW5kIGhpZ2hsaWdodCBjdXJyZW50IGdlbm9tZSBsb2NhdGlvbicsIHthbGlnbjogJ3JpZ2h0J30pLCBtYWtlRWxlbWVudCgndGQnLCBzaW5nbGVCYXNlSGlnaGxpZ2h0QnV0dG9uKV0pKTtcblxuICAgICAgICBvcHRzRm9ybS5hcHBlbmRDaGlsZChvcHRzVGFibGUpO1xuXG4gICAgICAgIHZhciByZXNldEJ1dHRvbiA9IG1ha2VFbGVtZW50KCdidXR0b24nLCAnUmVzZXQgYnJvd3NlcicsIHtjbGFzc05hbWU6ICdidG4nfSwge21hcmdpbkxlZnQ6ICdhdXRvJywgbWFyZ2luUmlnaHQ6ICdhdXRvJywgZGlzcGxheTogJ2Jsb2NrJ30pO1xuICAgICAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBiLnJlc2V0KCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgb3B0c0Zvcm0uYXBwZW5kQ2hpbGQocmVzZXRCdXR0b24pO1xuXG4gICAgICAgIHRoaXMuc2hvd1Rvb2xQYW5lbChvcHRzRm9ybSk7XG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdvcHRzJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBodW1hblJlYWRhYmxlU2NhbGUoeCkge1xuICAgIHZhciBzdWZmaXggPSAnYnAnO1xuICAgIGlmICh4ID4gMTAwMDAwMDAwMCkge1xuICAgICAgICB4IC89IDEwMDAwMDAwMDA7XG4gICAgICAgIHN1ZmZpeCA9ICdHYic7XG4gICAgfSBlbHNlIGlmICh4ID4gMTAwMDAwMCkge1xuICAgICAgICB4IC89IDEwMDAwMDBcbiAgICAgICAgc3VmZml4ID0gJ01iJztcbiAgICB9IGVsc2UgaWYgKHggPiAxMDAwKSB7XG4gICAgICAgIHggLz0gMTAwMDtcbiAgICAgICAgc3VmZml4ID0gJ2tiJztcbiAgICB9XG4gICAgcmV0dXJuICcnICsgTWF0aC5yb3VuZCh4KSArIHN1ZmZpeDtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vL1xuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMVxuLy9cbi8vIGNicm93c2VyLmpzOiBjYW52YXMgYnJvd3NlciBjb250YWluZXJcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgT2JzZXJ2ZWQgPSB1dGlscy5PYnNlcnZlZDtcbiAgICB2YXIgQXdhaXRlZCA9IHV0aWxzLkF3YWl0ZWQ7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XG4gICAgdmFyIG1pbmlKU09OaWZ5ID0gdXRpbHMubWluaUpTT05pZnk7XG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XG4gICAgdmFyIHRleHRYSFIgPSB1dGlscy50ZXh0WEhSO1xuICAgIHZhciBhcnJheUVxdWFscyA9IHV0aWxzLmFycmF5RXF1YWxzO1xuXG4gICAgdmFyIHRpZXIgPSByZXF1aXJlKCcuL3RpZXInKTtcbiAgICB2YXIgRGFzVGllciA9IHRpZXIuRGFzVGllcjtcblxuICAgIHZhciBzaGExID0gcmVxdWlyZSgnLi9zaGExJyk7XG4gICAgdmFyIGhleF9zaGExID0gc2hhMS5oZXhfc2hhMTtcblxuICAgIHZhciB0aHViID0gcmVxdWlyZSgnLi90aHViJyk7XG4gICAgdmFyIGNvbm5lY3RUcmFja0h1YiA9IHRodWIuY29ubmVjdFRyYWNrSHViO1xuXG4gICAgdmFyIFZFUlNJT04gPSByZXF1aXJlKCcuL3ZlcnNpb24nKTtcblxuICAgIHZhciBuZiA9IHJlcXVpcmUoJy4vbnVtZm9ybWF0cycpO1xuICAgIHZhciBmb3JtYXRRdWFudExhYmVsID0gbmYuZm9ybWF0UXVhbnRMYWJlbDtcbiAgICB2YXIgZm9ybWF0TG9uZ0ludCA9IG5mLmZvcm1hdExvbmdJbnQ7XG5cbiAgICB2YXIgQ2hhaW5zZXQgPSByZXF1aXJlKCcuL2NoYWluc2V0JykuQ2hhaW5zZXQ7XG5cbiAgICB2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcblxuICAgIHZhciBzb3VyY2Vjb21wYXJlID0gcmVxdWlyZSgnLi9zb3VyY2Vjb21wYXJlJyk7XG4gICAgdmFyIHNvdXJjZXNBcmVFcXVhbCA9IHNvdXJjZWNvbXBhcmUuc291cmNlc0FyZUVxdWFsO1xuICAgIHZhciBzb3VyY2VzQXJlRXF1YWxNb2R1bG9TdHlsZSA9IHNvdXJjZWNvbXBhcmUuc291cmNlc0FyZUVxdWFsTW9kdWxvU3R5bGU7XG4gICAgdmFyIHNvdXJjZURhdGFVUkkgPSBzb3VyY2Vjb21wYXJlLnNvdXJjZURhdGFVUkk7XG4gICAgdmFyIHNvdXJjZVN0eWxlVVJJID0gc291cmNlY29tcGFyZS5zb3VyY2VTdHlsZVVSSTtcblxuICAgIHZhciBEZWZhdWx0UmVuZGVyZXIgPSByZXF1aXJlKCcuL2RlZmF1bHQtcmVuZGVyZXInKTtcblxuICAgIHZhciBNdWx0aVJlbmRlcmVyID0gcmVxdWlyZSgnLi9tdWx0aS1yZW5kZXJlcicpO1xuICAgIHZhciBTdWJSZW5kZXJlciA9IHJlcXVpcmUoJy4vc3ViLXJlbmRlcmVyJyk7XG5cbiAgICB2YXIgRHVtbXlSZW5kZXJlciA9IHJlcXVpcmUoJy4vZHVtbXktcmVuZGVyZXInKTtcbn1cblxuZnVuY3Rpb24gUmVnaW9uKGNociwgbWluLCBtYXgpIHtcbiAgICB0aGlzLm1pbiA9IG1pbjtcbiAgICB0aGlzLm1heCA9IG1heDtcbiAgICB0aGlzLmNociA9IGNocjtcbn1cblxuZnVuY3Rpb24gQnJvd3NlcihvcHRzKSB7XG4gICAgaWYgKCFvcHRzKSB7XG4gICAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcmVycyA9XG4gICAgICAgIHsgJ2RlZmF1bHQnOiBEZWZhdWx0UmVuZGVyZXIsXG4gICAgICAgICAgJ2R1bW15JzogRHVtbXlSZW5kZXJlcixcbiAgICAgICAgICAnbXVsdGknOiBNdWx0aVJlbmRlcmVyLFxuICAgICAgICAgICdzdWInOiBTdWJSZW5kZXJlclxuICAgICAgICB9O1xuXG4gICAgdGhpcy5kZWZhdWx0UmVuZGVyZXIgPSBvcHRzLnJlbmRlcmVyIHx8IERlZmF1bHRSZW5kZXJlcjtcblxuICAgIHRoaXMucHJlZml4ID0gJy8vd3d3LmJpb2RhbGxpYW5jZS5vcmcvcmVsZWFzZS0wLjE0Lyc7XG5cbiAgICB0aGlzLnNvdXJjZXMgPSBbXTtcbiAgICB0aGlzLnRpZXJzID0gW107XG4gICAgdGhpcy50aWVyR3JvdXBzID0ge307XG5cbiAgICB0aGlzLnNlYXJjaE9ubHlTb3VyY2VzID0gW107XG4gICAgdGhpcy5zZWFyY2hPbmx5U291cmNlSG9sZGVycyA9IFtdO1xuXG4gICAgdGhpcy5mZWF0dXJlTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5mZWF0dXJlSG92ZXJMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLnZpZXdMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLnJlZ2lvblNlbGVjdExpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMudGllckxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMudGllclNlbGVjdGlvbkxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMudGllclNlbGVjdGlvbldyYXBMaXN0ZW5lcnMgPSBbXTtcblxuICAgIHRoaXMuY29va2llS2V5ID0gJ2Jyb3dzZXInO1xuXG4gICAgdGhpcy5jaGFpbnMgPSB7fTtcblxuICAgIHRoaXMucGFnZU5hbWUgPSAnc3ZnSG9sZGVyJ1xuICAgIHRoaXMuem9vbUZhY3RvciA9IDEuMDtcbiAgICB0aGlzLm1heFBpeGVsc1BlckJhc2UgPSAxMDtcbiAgICB0aGlzLm9yaWdpbiA9IDA7XG4gICAgdGhpcy50YXJnZXRRdWFudFJlcyA9IDEuMDtcbiAgICB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoID0gNzUwO1xuICAgIHRoaXMuem9vbUJhc2UgPSAxMDA7XG4gICAgdGhpcy56b29tRXhwdCA9IDMwLjA7IC8vIEJhY2sgdG8gYmVpbmcgZml4ZWQuLi4uXG4gICAgdGhpcy56b29tU2xpZGVyVmFsdWUgPSAxMDA7XG4gICAgdGhpcy5lbnRyeVBvaW50cyA9IG51bGw7XG4gICAgdGhpcy5jdXJyZW50U2VxTWF4ID0gLTE7IC8vIGluaXQgb25jZSBFUHMgYXJlIGZldGNoZWQuXG5cbiAgICB0aGlzLmhpZ2hsaWdodHMgPSBbXTtcbiAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbMV07XG5cbiAgICB0aGlzLm1heFZpZXdXaWR0aCA9IDUwMDAwMDtcbiAgICB0aGlzLmRlZmF1bHRTdWJ0aWVyTWF4ID0gMTAwO1xuXG4gICAgdGhpcy5oaWdoWm9vbVRocmVzaG9sZCA9IDAuMjtcbiAgICB0aGlzLm1lZGl1bVpvb21UaHJlc2hvbGQgPSAwLjAxXG5cbiAgICB0aGlzLm1pbkV4dHJhV2lkdGggPSAxMDAuMDtcbiAgICB0aGlzLm1heEV4dHJhV2lkdGggPSAxMDAwLjA7XG5cbiAgICAvLyBPcHRpb25zLlxuXG4gICAgdGhpcy5yZXZlcnNlU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgdGhpcy5ydWxlckxvY2F0aW9uID0gJ2NlbnRlcic7XG4gICAgdGhpcy5kZWZhdWx0SGlnaGxpZ2h0RmlsbCA9ICdyZWQnO1xuICAgIHRoaXMuZGVmYXVsdEhpZ2hsaWdodEFscGhhID0gMC4zO1xuICAgIHRoaXMuZXhwb3J0SGlnaGxpZ2h0cyA9IHRydWU7XG4gICAgdGhpcy5leHBvcnRSdWxlciA9IHRydWU7XG4gICAgdGhpcy5leHBvcnRCYW5uZXIgPSB0cnVlO1xuICAgIHRoaXMuZXhwb3J0UmVnaW9uID0gdHJ1ZTtcbiAgICB0aGlzLnNpbmdsZUJhc2VIaWdobGlnaHQgPSB0cnVlO1xuXG4gICAgLy8gVmlzdWFsIGNvbmZpZy5cblxuICAgIC8vIHRoaXMudGllckJhY2tncm91bmRDb2xvcnMgPSBbXCJyZ2IoMjQ1LDI0NSwyNDUpXCIsIFwicmdiKDIzMCwyMzAsMjUwKVwiIC8qICd3aGl0ZScgKi9dO1xuICAgIHRoaXMudGllckJhY2tncm91bmRDb2xvcnMgPSBbXCJyZ2IoMjQ1LDI0NSwyNDUpXCIsICd3aGl0ZSddO1xuICAgIHRoaXMubWluVGllckhlaWdodCA9IDIwO1xuICAgIHRoaXMubm9EZWZhdWx0TGFiZWxzID0gZmFsc2U7XG4gICAgdGhpcy5kaXNhYmxlRmVhdHVyZVBvcHVwRHJhZyA9IG9wdHMuZGlzYWJsZUZlYXR1cmVQb3B1cERyYWc7XG5cbiAgICAvLyBSZWdpc3RyeVxuXG4gICAgdGhpcy5hdmFpbGFibGVTb3VyY2VzID0gbmV3IE9ic2VydmVkKCk7XG4gICAgdGhpcy5kZWZhdWx0U291cmNlcyA9IFtdO1xuICAgIHRoaXMubWFwcGFibGVTb3VyY2VzID0ge307XG5cbiAgICAvLyBDZW50cmFsIERBUyBSZWdpc3RyeSBubyBsb25nZXIgYXZhaWxhYmxlIDIwMTUtMDVcblxuICAgIHRoaXMucmVnaXN0cnkgPSBudWxsOyAvLyAnLy93d3cuZGFzcmVnaXN0cnkub3JnL2Rhcy9zb3VyY2VzJztcbiAgICB0aGlzLm5vUmVnaXN0cnlUYWJzID0gdHJ1ZTtcblxuICAgIHRoaXMuZGVmYXVsdFRyYWNrQWRkZXJUYWIgPSBudWxsO1xuXG4gICAgdGhpcy5odWJzID0gW107XG4gICAgdGhpcy5odWJPYmplY3RzID0gW107XG5cbiAgICB0aGlzLnNvdXJjZUNhY2hlID0gbmV3IFNvdXJjZUNhY2hlKCk7XG5cbiAgICB0aGlzLnJldGluYSA9IHRydWU7XG5cbiAgICB0aGlzLnVzZUZldGNoV29ya2VycyA9IHRydWU7XG4gICAgdGhpcy5tYXhXb3JrZXJzID0gMjtcbiAgICB0aGlzLndvcmtlclBhdGggPSAnJCR3b3JrZXItYWxsLmpzJztcbiAgICB0aGlzLnJlc29sdmVycyA9IHt9O1xuICAgIHRoaXMucmVzb2x2ZXJTZWVkID0gMTtcblxuICAgIHRoaXMuYXNzZW1ibHlOYW1lUHJpbWFyeSA9IHRydWU7XG4gICAgdGhpcy5hc3NlbWJseU5hbWVVY3NjID0gdHJ1ZTtcblxuICAgIHRoaXMuZGVmYXVsdFNlYXJjaFJlZ2lvblBhZGRpbmcgPSAxMDAwMDtcblxuICAgIC8vIEhUVFAgd2FybmluZyBzdXBwb3J0XG5cbiAgICB0aGlzLmh0dHBDYW5hcnlVUkwgPSAnaHR0cDovL3d3dy5iaW9kYWxsaWFuY2Uub3JnL2h0dHAtY2FuYXJ5LnR4dCc7XG4gICAgdGhpcy5odHRwV2FybmluZ1VSTCA9ICcvL3d3dy5iaW9kYWxsaWFuY2Uub3JnL2h0dHBzLmh0bWwnO1xuXG4gICAgdGhpcy5pbml0TGlzdGVuZXJzID0gW107XG5cbiAgICBpZiAob3B0cy5iYXNlQ29sb3JzKSB7XG4gICAgICAgIHRoaXMuYmFzZUNvbG9ycyA9IG9wdHMuYmFzZUNvbG9yc1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYmFzZUNvbG9ycyA9IHtcbiAgICAgICAgICAgIEE6ICdncmVlbicsXG4gICAgICAgICAgICBDOiAnYmx1ZScsXG4gICAgICAgICAgICBHOiAnb3JhbmdlJyxcbiAgICAgICAgICAgIFQ6ICdyZWQnLFxuICAgICAgICAgICAgJy0nIDogJ2hvdHBpbmsnLCAvLyBkZWxldGlvblxuICAgICAgICAgICAgJ0knIDogJ3JlZCcgLy8gaW5zZXJ0aW9uXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKG9wdHMudmlld1N0YXJ0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mKG9wdHMudmlld1N0YXJ0KSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ3ZpZXdTdGFydCBtdXN0IGJlIGFuIGludGVnZXInKTtcbiAgICB9XG4gICAgaWYgKG9wdHMudmlld0VuZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZihvcHRzLnZpZXdFbmQpICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBFcnJvcigndmlld0VuZCBtdXN0IGJlIGFuIGludGVnZXInKTtcbiAgICB9XG4gICAgaWYgKG9wdHMub2Zmc2NyZWVuSW5pdFdpZHRoICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mKG9wdHMub2Zmc2NyZWVuSW5pdFdpZHRoKSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ29mZnNjcmVlbkluaXRXaWR0aCBtdXN0IGJlIGFuIGludGVnZXInKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBrIGluIG9wdHMpIHtcbiAgICAgICAgdGhpc1trXSA9IG9wdHNba107XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZihvcHRzLnVpUHJlZml4KSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mKG9wdHMucHJlZml4KSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5wcmVmaXggPSBvcHRzLnVpUHJlZml4O1xuICAgIH1cbiAgICAvLyBJZiB0aGUgcHJlZml4IG9ubHkgc3RhcnRzIHdpdGggYSBzaW5nbGUgJy8nIHRoaXMgaXMgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnRcbiAgICAvLyBzaXRlLCBzbyB3ZSBuZWVkIHRvIHByZWZpeCB0aGUgcHJlZml4IHdpdGggLy97aG9zdG5hbWV9XG4gICAgaWYgKHRoaXMucHJlZml4LmluZGV4T2YoJy8vJykgPCAwICYmIHRoaXMucHJlZml4LmluZGV4T2YoJy8nKSA9PT0gMCkge1xuICAgICAgICB2YXIgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7XG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucG9ydCkge1xuICAgICAgICAgICAgbG9jYXRpb24gKz0gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnRcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcmVmaXggPSAnLy8nICsgbG9jYXRpb24gKyB0aGlzLnByZWZpeDtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJlZml4LmluZGV4T2YoJy8vJykgPT09IDApIHtcbiAgICAgICAgdmFyIHByb3RvID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICBpZiAocHJvdG8gPT0gJ2h0dHA6JyB8fCBwcm90byA9PSAnaHR0cHM6Jykge1xuICAgICAgICAgICAgLy8gUHJvdG9jb2wtcmVsYXRpdmUgVVJMcyBva2F5LlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2cod2luZG93LmxvY2F0aW9uLnByb3RvY29sKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXQVJOSU5HOiBwcmVmaXggaXMgc2V0IHRvIGEgcHJvdG9jb2wtcmVsYXRpdmUgVVJMICgnICsgdGhpcy5wcmVmaXggKyAnIHdoZW4gbG9hZGluZyBmcm9tIGEgbm9uLUhUVFAgc291cmNlJyk7XG4gICAgICAgICAgICB0aGlzLnByZWZpeCA9ICdodHRwOicgKyB0aGlzLnByZWZpeDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGhpcy5jb29yZFN5c3RlbSkge1xuICAgICAgICB0aHJvdyBFcnJvcignQ29vcmRpbmF0ZSBzeXN0ZW0gbXVzdCBiZSBjb25maWd1cmVkJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2hyID09PSB1bmRlZmluZWQgfHwgdGhpcy52aWV3U3RhcnQgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnZpZXdFbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBFcnJvcignVmlld2VkIHJlZ2lvbiAoY2hyOnN0YXJ0Li5lbmQpIG11c3QgYmUgZGVmaW5lZCcpO1xuICAgIH1cblxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG5cbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICB0aGlzQi5yZWFsSW5pdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBsb2FkTGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBsb2FkTGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXNCLnJlYWxJbml0KCk7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBsb2FkTGlzdGVuZXIsIGZhbHNlKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlc29sdmVVUkwgPSBmdW5jdGlvbih1cmwpIHtcbiAgICByZXR1cm4gdXJsLnJlcGxhY2UoJyQkJywgdGhpcy5wcmVmaXgpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVzaXplTGlzdGVuZXIsIGZhbHNlKTtcbiAgICBpZiAodGhpcy5mZXRjaFdvcmtlcnMpIHtcbiAgICAgICAgZm9yIChjb25zdCB3b3JrZXIgb2YgdGhpcy5mZXRjaFdvcmtlcnMpIHtcbiAgICAgICAgICAgIHdvcmtlci50ZXJtaW5hdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVhbEluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIGlmICh0aGlzLndhc0luaXRpYWxpemVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXBpbmcgdG8gY2FsbCByZWFsSW5pdCBvbiBhbiBhbHJlYWR5LWluaXRpYWxpemVkIERhbGxpYW5jZSBpbnN0YW5jZScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy53YXNJbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICBpZiAodHlwZW9mKG5hdmlnYXRvcikgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgJ2R1bW15JztcbiAgICAgICAgaWYgKHVhLmluZGV4T2YoJ1RyaWRlbnQnKSA+PSAwICYmIHVhLmluZGV4T2YoJ3J2OjExJykgPj0gMCkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0RldGVjdGVkIElFMTEsIGRpc2FibGluZyB0aWVyIHBpbm5pbmcuJyk7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVQaW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGVmYXVsdENociA9IHRoaXMuY2hyO1xuICAgIHRoaXMuZGVmYXVsdFN0YXJ0ID0gdGhpcy52aWV3U3RhcnQ7XG4gICAgdGhpcy5kZWZhdWx0RW5kID0gdGhpcy52aWV3RW5kO1xuICAgIHRoaXMuZGVmYXVsdFNvdXJjZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc291cmNlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgcyA9IHRoaXMuc291cmNlc1tpXTtcbiAgICAgICAgaWYgKHMpXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRTb3VyY2VzLnB1c2gocyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVzdG9yZVN0YXR1cykge1xuICAgICAgICB0aGlzLnN0YXR1c1Jlc3RvcmVkID0gdGhpcy5yZXN0b3JlU3RhdHVzKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5qZWN0aW9uUG9pbnQgJiYgdGhpcy5pbmplY3Rpb25Qb2ludCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5icm93c2VySG9sZGVySG9sZGVyID0gdGhpcy5pbmplY3Rpb25Qb2ludDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5qZWN0aW9uUG9pbnQpIHtcbiAgICAgICAgdGhpcy5icm93c2VySG9sZGVySG9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pbmplY3Rpb25Qb2ludCk7XG4gICAgICAgIGlmICghdGhpcy5icm93c2VySG9sZGVySG9sZGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignaW5qZWN0aW9uUG9pbnQgbXVzdCBwb2ludCB0byBhIHZhbGlkIERPTSBlbGVtZW50IG9mIGVsZW1lbnQgSUQnKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYnJvd3NlckhvbGRlckhvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGFnZU5hbWUpO1xuICAgICAgICBpZiAoIXRoaXMuYnJvd3NlckhvbGRlckhvbGRlcikge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ3BhZ2VOYW1lIG11c3QgYmUgYSB2YWxpZCBlbGVtZW50IElEIChvciB1c2UgdGhlIGluamVjdGlvblBvaW50IG9wdGlvbiBpbnN0ZWFkKScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5icm93c2VySG9sZGVySG9sZGVyLmNsYXNzTGlzdC5hZGQoJ2RhbGxpYW5jZS1pbmplY3Rpb24tcG9pbnQnKTtcbiAgICB0aGlzLmJyb3dzZXJIb2xkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ2RhbGxpYW5jZSBkYWxsaWFuY2Utcm9vdCcsIHRhYkluZGV4OiAtMX0pO1xuICAgIGlmICh0aGlzLm1heEhlaWdodCkge1xuICAgICAgICB0aGlzLmJyb3dzZXJIb2xkZXIuc3R5bGUubWF4SGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQgKyAncHgnO1xuICAgIH0gZWxzZSBpZiAodGhpcy5tYXhIZWlnaHQgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuYnJvd3NlckhvbGRlci5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLmJyb3dzZXJIb2xkZXJIb2xkZXIpO1xuICAgIHRoaXMuYnJvd3NlckhvbGRlckhvbGRlci5hcHBlbmRDaGlsZCh0aGlzLmJyb3dzZXJIb2xkZXIpO1xuICAgIHRoaXMuc3ZnSG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdtYWluLWhvbGRlcid9KTtcblxuICAgIHRoaXMuaW5pdFVJKHRoaXMuYnJvd3NlckhvbGRlciwgdGhpcy5zdmdIb2xkZXIpO1xuXG4gICAgdGhpcy5waW5uZWRUaWVySG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICd0aWVyLWhvbGRlciB0aWVyLWhvbGRlci1waW5uZWQnfSk7XG4gICAgdGhpcy50aWVySG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIHRoaXMubWFrZUxvYWRlcigyNCksIHtjbGFzc05hbWU6ICd0aWVyLWhvbGRlciB0aWVyLWhvbGRlci1yZXN0J30pO1xuXG4gICAgdGhpcy5sb2NTaW5nbGVCYXNlID0gbWFrZUVsZW1lbnQoJ3NwYW4nLCAnJywge2NsYXNzTmFtZTogJ2xvYy1zaW5nbGUtYmFzZSd9KTtcbiAgICB2YXIgbG9jU2luZ2xlQmFzZUhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCB0aGlzLmxvY1NpbmdsZUJhc2Use2NsYXNzTmFtZTogJ2xvYy1zaW5nbGUtYmFzZS1ob2xkZXInfSk7XG4gICAgLy8gQWRkIGxpc3RlbmVyIHRvIHVwZGF0ZSBzaW5nbGUgYmFzZSBsb2NhdGlvblxuICAgIHRoaXMuYWRkVmlld0xpc3RlbmVyKGZ1bmN0aW9uKGNociwgbWluRmxvb3IsIG1heEZsb29yLCB6b29tU2xpZGVyVmFsdWUsIHpvb21TbGlkZXJEaWN0LCBtaW4sIG1heCkge1xuICAgICAgICAvLyBKdXN0IHNldHRpbmcgdGV4dENvbnRlbnQgY2F1c2VzIGxheW91dCBmbGlja2VyaW5nIGluIEJsaW5rLlxuICAgICAgICAvLyBUaGlzIGFwcHJvYWNoIG1lYW5zIHRoYXQgdGhlIGVsZW1lbnQgaXMgbmV2ZXIgZW1wdHkuXG4gICAgICAgIHZhciBsb2MgPSBNYXRoLnJvdW5kKChtYXggKyBtaW4pIC8gMik7XG4gICAgICAgIHNlbGYubG9jU2luZ2xlQmFzZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjaHIgKyAnOicgKyBmb3JtYXRMb25nSW50KGxvYykpKTtcbiAgICAgICAgc2VsZi5sb2NTaW5nbGVCYXNlLnJlbW92ZUNoaWxkKHNlbGYubG9jU2luZ2xlQmFzZS5maXJzdENoaWxkKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmRpc2FibGVQaW5uaW5nKSB7XG4gICAgICAgIHRoaXMudGllckhvbGRlckhvbGRlciA9IHRoaXMudGllckhvbGRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgW2xvY1NpbmdsZUJhc2VIb2xkZXIsIHRoaXMucGlubmVkVGllckhvbGRlciwgdGhpcy50aWVySG9sZGVyXSwge2NsYXNzTmFtZTogJ3RpZXItaG9sZGVyLWhvbGRlcid9KTtcbiAgICAgICAgdGhpcy5zdmdIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy50aWVySG9sZGVySG9sZGVyKTtcbiAgICB9XG4gICAgdGhpcy5zdmdIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy50aWVySG9sZGVySG9sZGVyKTtcblxuICAgIHRoaXMuYmh0bWxSb290ID0gbWFrZUVsZW1lbnQoJ2RpdicpO1xuICAgIGlmICghdGhpcy5kaXNhYmxlUG93ZXJlZEJ5KSB7XG4gICAgICAgIHRoaXMuYmh0bWxSb290LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdzcGFuJywgWydQb3dlcmVkIGJ5ICcsIG1ha2VFbGVtZW50KCdhJywgJ0Jpb2RhbGxpYW5jZScsIHtocmVmOiAnaHR0cDovL3d3dy5iaW9kYWxsaWFuY2Uub3JnLyd9KSwgJyAnICsgVkVSU0lPTl0sIHtjbGFzc05hbWU6ICdwb3dlcmVkLWJ5J30pKTtcbiAgICB9XG4gICAgdGhpcy5icm93c2VySG9sZGVyLmFwcGVuZENoaWxkKHRoaXMuYmh0bWxSb290KTtcblxuICAgIHRoaXMucmVzaXplTGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICB0aGlzQi5yZXNpemVWaWV3ZXIoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5ydWxlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBudWxsLCB7Y2xhc3NOYW1lOiAnZ3VpZGVsaW5lJ30pXG4gICAgdGhpcy5ydWxlcjIgPSBtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ3NpbmdsZS1iYXNlLWd1aWRlbGluZSd9KTtcbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy5ydWxlcik7XG4gICAgdGhpcy50aWVySG9sZGVySG9sZGVyLmFwcGVuZENoaWxkKHRoaXMucnVsZXIyKTtcbiAgICB0aGlzLmNoYWluQ29uZmlncyA9IHRoaXMuY2hhaW5zIHx8IHt9O1xuICAgIHRoaXMuY2hhaW5zID0ge307XG4gICAgZm9yICh2YXIgayBpbiB0aGlzLmNoYWluQ29uZmlncykge1xuICAgICAgICB2YXIgY2MgPSB0aGlzLmNoYWluQ29uZmlnc1trXTtcbiAgICAgICAgaWYgKGNjIGluc3RhbmNlb2YgQ2hhaW5zZXQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXQVJOSU5HOiBTaG91bGQgbm8gbG9uZ2VyIHVzZSBcIm5ldyBDaGFpbnNldFwiIGluIEJpb2RhbGxpYW5jZSBjb25maWd1cmF0aW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYWluc1trXSA9IG5ldyBDaGFpbnNldChjYyk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2VkV29ya2VycztcbiAgICBpZiAodGhpcy5tYXhXb3JrZXJzID4gMCkge1xuICAgICAgICB2YXIgcHcgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IHRoaXMubWF4V29ya2VyczsgKytmaSlcbiAgICAgICAgICAgIHB3LnB1c2gobWFrZUZldGNoV29ya2VyKHRoaXMpKTtcbiAgICAgICAgcHJvbWlzZWRXb3JrZXJzID0gUHJvbWlzZS5hbGwocHcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2VkV29ya2VycyA9IFByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgfVxuXG4gICAgdGhpcy5mZXRjaFdvcmtlcnMgPSBudWxsO1xuICAgIHRoaXMubmV4dFdvcmtlciA9IDA7XG4gICAgcHJvbWlzZWRXb3JrZXJzLnRoZW4oZnVuY3Rpb24odikge1xuICAgICAgICBjb25zb2xlLmxvZygnQm9vdGVkICcgKyB2Lmxlbmd0aCArICcgd29ya2VycycpO1xuICAgICAgICB0aGlzQi5mZXRjaFdvcmtlcnMgPSB2O1xuICAgIH0sIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBib290IHdvcmtlcnMnLCB2KTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoc2VsZi5vZmZzY3JlZW5Jbml0V2lkdGggfHwgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXNCLmJyb3dzZXJIb2xkZXJIb2xkZXIpLmRpc3BsYXkgIT0gJ25vbmUnICYmXG4gICAgICAgICAgICB0aGlzQi50aWVySG9sZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoID4gMCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7dGhpc0IucmVhbEluaXQyKCl9LCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwb2xsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpc0IuYnJvd3NlckhvbGRlckhvbGRlcikuZGlzcGxheSAhPSAnbm9uZScgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IudGllckhvbGRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA+IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHBvbGxJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLnJlYWxJbml0MigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVhbEluaXQyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIC8vIFJlbW92ZSB0aGUgbG9hZGVyIGljb24sIGlmIG5lZWRlZFxuICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMudGllckhvbGRlcik7XG4gICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5waW5uZWRUaWVySG9sZGVyKTtcblxuICAgIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggPSB0aGlzLnRpZXJIb2xkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggfCB0aGlzQi5vZmZzY3JlZW5Jbml0V2lkdGggfCAwO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlc2l6ZUxpc3RlbmVyLCBmYWxzZSk7XG5cbiAgICB0aGlzLnNjYWxlID0gdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCAvICh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCk7XG4gICAgaWYgKCF0aGlzLnpvb21NYXgpIHtcbiAgICAgICAgdGhpcy56b29tTWF4ID0gdGhpcy56b29tRXhwdCAqIE1hdGgubG9nKHRoaXMubWF4Vmlld1dpZHRoIC8gdGhpcy56b29tQmFzZSk7XG4gICAgICAgIHRoaXMuem9vbU1pbiA9IHRoaXMuem9vbUV4cHQgKiBNYXRoLmxvZyh0aGlzLmZlYXR1cmVQYW5lbFdpZHRoIC8gdGhpcy5tYXhQaXhlbHNQZXJCYXNlIC8gdGhpcy56b29tQmFzZSk7XG4gICAgfVxuICAgIHRoaXMuem9vbVNsaWRlclZhbHVlID0gdGhpcy56b29tRXhwdCAqIE1hdGgubG9nKCh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDEpIC8gdGhpcy56b29tQmFzZSk7XG5cbiAgICAvLyBFdmVudCBoYW5kbGVyc1xuXG4gICAgdGhpcy50aWVySG9sZGVySG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoZXYud2hlZWxEZWx0YVgpIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGV2LndoZWVsRGVsdGFYLzU7XG4gICAgICAgICAgICBpZiAoIXRoaXNCLnJldmVyc2VTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICBkZWx0YSA9IC1kZWx0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNCLm1vdmUoZGVsdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2LndoZWVsRGVsdGFZKSB7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBldi53aGVlbERlbHRhWTtcbiAgICAgICAgICAgIGlmICh0aGlzQi5yZXZlcnNlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgZGVsdGEgPSAtZGVsdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCArPSBkZWx0YTtcbiAgICAgICAgfVxuICAgIH0sIGZhbHNlKTtcblxuICAgIHRoaXMudGllckhvbGRlckhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdNb3pNb3VzZVBpeGVsU2Nyb2xsJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChldi5heGlzID09IDEpIHtcbiAgICAgICAgICAgIGlmIChldi5kZXRhaWwgIT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGV2LmRldGFpbC80O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzQi5yZXZlcnNlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhID0gLWRlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzQi5tb3ZlKGRlbHRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGV2LmRldGFpbDtcbiAgICAgICAgICAgIGlmICghdGhpc0IucmV2ZXJzZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICBkZWx0YSA9IC1kZWx0YTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpc0IudGllckhvbGRlci5zY3JvbGxUb3AgKz0gZGVsdGE7XG4gICAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGV2KSB7cmV0dXJuIHRoaXNCLnRvdWNoU3RhcnRIYW5kbGVyKGV2KX0sIGZhbHNlKTtcbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZnVuY3Rpb24oZXYpIHtyZXR1cm4gdGhpc0IudG91Y2hNb3ZlSGFuZGxlcihldil9LCBmYWxzZSk7XG4gICAgdGhpcy50aWVySG9sZGVySG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZnVuY3Rpb24oZXYpIHtyZXR1cm4gdGhpc0IudG91Y2hFbmRIYW5kbGVyKGV2KX0sIGZhbHNlKTtcbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBmdW5jdGlvbihldikge3JldHVybiB0aGlzQi50b3VjaENhbmNlbEhhbmRsZXIoZXYpfSwgZmFsc2UpO1xuXG4gICAgdmFyIGtleUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnY2JraDogJyArIGV2LmtleUNvZGUpO1xuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PSAxMykgeyAvLyBlbnRlclxuICAgICAgICAgICAgdmFyIGxheW91dHNDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpc0IudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzQi50aWVyc1t0aV07XG4gICAgICAgICAgICAgICAgaWYgKHQud2FudGVkTGF5b3V0SGVpZ2h0ICYmIHQud2FudGVkTGF5b3V0SGVpZ2h0ICE9IHQubGF5b3V0SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHQubGF5b3V0SGVpZ2h0ID0gdC53YW50ZWRMYXlvdXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHQuY2xpcFRpZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0c0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXlvdXRzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHRoaXNCLmFycmFuZ2VUaWVycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMzIgfHwgZXYuY2hhckNvZGUgPT0gMzIpIHsgLy8gc3BhY2VcbiAgICAgICAgICAgIGlmICghdGhpc0IuaXNTbmFwWm9vbWluZykge1xuICAgICAgICAgICAgICAgIHRoaXNCLmlzU25hcFpvb21pbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBuZXdab29tID0gKHRoaXNCLnNhdmVkWm9vbSB8fCAwLjApICsgdGhpc0Iuem9vbU1pbjtcbiAgICAgICAgICAgICAgICB0aGlzQi5zYXZlZFpvb20gPSB0aGlzQi56b29tU2xpZGVyVmFsdWUgLSB0aGlzQi56b29tTWluO1xuICAgICAgICAgICAgICAgIHRoaXNCLnpvb21TbGlkZXJWYWx1ZSA9IG5ld1pvb207XG4gICAgICAgICAgICAgICAgdGhpc0Iuem9vbShNYXRoLmV4cCgoMS4wICogbmV3Wm9vbSkgLyB0aGlzQi56b29tRXhwdCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzQi5pc1NuYXBab29taW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1pvb20gPSAodGhpc0Iuc2F2ZWRab29tIHx8IDIwLjApICsgdGhpc0Iuem9vbU1pbjtcbiAgICAgICAgICAgICAgICB0aGlzQi5zYXZlZFpvb20gPSB0aGlzQi56b29tU2xpZGVyVmFsdWUgLSB0aGlzQi56b29tTWluO1xuICAgICAgICAgICAgICAgIHRoaXNCLnpvb21TbGlkZXJWYWx1ZSA9IG5ld1pvb207XG4gICAgICAgICAgICAgICAgdGhpc0Iuem9vbShNYXRoLmV4cCgoMS4wICogbmV3Wm9vbSkgLyB0aGlzQi56b29tRXhwdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA4NSkgeyAvLyB1XG4gICAgICAgICAgICBpZiAodGhpc0IudWlNb2RlID09PSAnb3B0cycpIHsgLy8gaWYgdGhlIG9wdGlvbnMgYXJlIHZpc2libGUsIHRvZ2dsZSB0aGUgY2hlY2tib3ggdG9vXG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaW5nbGVCYXNlSGlnaHRsaWdodEJ1dHRvblwiKS5jaGVja2VkO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2luZ2xlQmFzZUhpZ2h0bGlnaHRCdXR0b25cIikuY2hlY2tlZCA9ICFjaGVjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNCLnNpbmdsZUJhc2VIaWdobGlnaHQgPSAhdGhpc0Iuc2luZ2xlQmFzZUhpZ2hsaWdodDtcbiAgICAgICAgICAgIHRoaXNCLnBvc2l0aW9uUnVsZXIoKTtcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMzkpIHsgLy8gcmlnaHQgYXJyb3dcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpc0Iuc2Nyb2xsQXJyb3dLZXkoZXYsIC0xKTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDM3KSB7IC8vIGxlZnQgYXJyb3dcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpc0Iuc2Nyb2xsQXJyb3dLZXkoZXYsIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMzggfHwgZXYua2V5Q29kZSA9PSA4NykgeyAvLyB1cCBhcnJvdyB8IHdcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gdGhpc0IudGllcnNbc3RdO1xuICAgICAgICAgICAgICAgIHZhciBjaCA9IHR0LmZvcmNlSGVpZ2h0IHx8IHR0LnN1YnRpZXJzWzBdLmhlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoY2ggPj0gNDApIHtcbiAgICAgICAgICAgICAgICAgICAgdHQubWVyZ2VDb25maWcoe2hlaWdodDogY2gtMTB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkge1xuICAgICAgICAgICAgICAgIHZhciBzdCA9IHRoaXNCLmdldFNlbGVjdGVkVGllcigpO1xuICAgICAgICAgICAgICAgIGlmIChzdCA8IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgdHQgPSB0aGlzQi50aWVyc1tzdF07XG5cbiAgICAgICAgICAgICAgICBpZiAodHQucXVhbnRMZWFwVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aCA9IHR0LnN1YnRpZXJzWzBdLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRxID0gdHQuc3VidGllcnNbMF0ucXVhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdHEpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHFtaW4gPSAxLjAgKiB0cS5taW47XG4gICAgICAgICAgICAgICAgICAgIHZhciBxbWF4ID0gMS4wICogdHEubWF4O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBxc2NhbGUgPSAocW1heCAtIHFtaW4pIC8gdGg7XG4gICAgICAgICAgICAgICAgICAgIHR0Lm1lcmdlQ29uZmlnKHtxdWFudExlYXBUaHJlc2hvbGQ6IHFtaW4gKyAoKE1hdGgucm91bmQoKHR0LnF1YW50TGVhcFRocmVzaG9sZCAtIHFtaW4pL3FzY2FsZSl8MCkrMSkqcXNjYWxlfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdHQubm90aWZ5KCdUaHJlc2hvbGQ6ICcgKyBmb3JtYXRRdWFudExhYmVsKHR0LnF1YW50TGVhcFRocmVzaG9sZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXYuYWx0S2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNudCA9IHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChjbnQgPT0gMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgdmFyIHN0ID0gdGhpc0Iuc2VsZWN0ZWRUaWVyc1swXTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGlndW91cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIG10ID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgIG10LnB1c2godGhpc0IudGllcnNbdGhpc0Iuc2VsZWN0ZWRUaWVyc1tzaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpID4gMCAmJiB0aGlzQi5zZWxlY3RlZFRpZXJzW3NpXSAtIHRoaXNCLnNlbGVjdGVkVGllcnNbc2kgLSAxXSAhPSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGlndW91cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjb250aWd1b3VzICYmIHN0IDw9IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gdGhpc0Iuc2VsZWN0ZWRUaWVycy5sZW5ndGggLSAxOyBzaSA+PSAwOyAtLXNpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVycy5zcGxpY2UodGhpc0Iuc2VsZWN0ZWRUaWVyc1tzaV0sIDEpO1xuXG4gICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5zcGxpY2UoMCwgY250KTtcblxuICAgICAgICAgICAgICAgIHZhciBpcCA9IGNvbnRpZ3VvdXMgPyBzdCAtIDEgOiBzdDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgbXQubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLnRpZXJzLnNwbGljZShpcCtzaSwgMCwgbXRbc2ldKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5wdXNoKGlwICsgc2kpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXNCLndpdGhQcmVzZXJ2ZWRTZWxlY3Rpb24odGhpc0IuX2Vuc3VyZVRpZXJzR3JvdXBlZCk7XG4gICAgICAgICAgICAgICAgdGhpc0IubWFya1NlbGVjdGVkVGllcnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpc0IucmVvcmRlclRpZXJzKCk7XG4gICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllcihcInNlbGVjdGVkXCIsIHN0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0ID0gdGhpc0IuZ2V0U2VsZWN0ZWRUaWVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZXRTZWxlY3RlZFRpZXIoc3QgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5zdCA9IHRoaXNCLnRpZXJzW3RoaXNCLmdldFNlbGVjdGVkVGllcigpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IG5zdC5yb3cub2Zmc2V0VG9wLCBib3R0b20gPSB0b3AgKyBuc3Qucm93Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvcCA8IHRoaXNCLnRpZXJIb2xkZXIuc2Nyb2xsVG9wIHx8IGJvdHRvbSA+IHRoaXNCLnRpZXJIb2xkZXIuc2Nyb2xsVG9wICsgdGhpc0IudGllckhvbGRlci5vZmZzZXRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLnRpZXJIb2xkZXIuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllclNlbGVjdGlvbldyYXAoLTEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDQwIHx8IGV2LmtleUNvZGUgPT0gODMpIHsgLy8gZG93biBhcnJvdyB8IHNcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gdGhpc0IudGllcnNbc3RdO1xuICAgICAgICAgICAgICAgIHZhciBjaCA9IHR0LmZvcmNlSGVpZ2h0IHx8IHR0LnN1YnRpZXJzWzBdLmhlaWdodDtcbiAgICAgICAgICAgICAgICB0dC5tZXJnZUNvbmZpZyh7aGVpZ2h0OiBjaCsxMH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gdGhpc0IudGllcnNbc3RdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR0LnF1YW50TGVhcFRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGggPSB0dC5zdWJ0aWVyc1swXS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cSA9IHR0LnN1YnRpZXJzWzBdLnF1YW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRxKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBxbWluID0gMS4wICogdHEubWluO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcW1heCA9IDEuMCAqIHRxLm1heDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHFzY2FsZSA9IChxbWF4IC0gcW1pbikgLyB0aDtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaXQgPSBNYXRoLnJvdW5kKCh0dC5xdWFudExlYXBUaHJlc2hvbGQgLSBxbWluKS9xc2NhbGUpfDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR0Lm1lcmdlQ29uZmlnKHtxdWFudExlYXBUaHJlc2hvbGQ6IHFtaW4gKyAoaXQtMSkqcXNjYWxlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0dC5ub3RpZnkoJ1RocmVzaG9sZDogJyArIGZvcm1hdFF1YW50TGFiZWwodHQucXVhbnRMZWFwVGhyZXNob2xkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2LmFsdEtleSkge1xuICAgICAgICAgICAgICAgIHZhciBjbnQgPSB0aGlzQi5zZWxlY3RlZFRpZXJzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoY250ID09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIHZhciBzdCA9IHRoaXNCLnNlbGVjdGVkVGllcnNbMF07XG4gICAgICAgICAgICAgICAgdmFyIGRpc2NvbnRpZyA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIG10ID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgIG10LnB1c2godGhpc0IudGllcnNbdGhpc0Iuc2VsZWN0ZWRUaWVyc1tzaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2NvbnRpZyArPSAodGhpc0Iuc2VsZWN0ZWRUaWVyc1tzaV0gLSB0aGlzQi5zZWxlY3RlZFRpZXJzW3NpIC0gMV0gLSAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRpZ3VvdXMgPSBkaXNjb250aWcgPT0gMDtcblxuICAgICAgICAgICAgICAgIGlmIChjb250aWd1b3VzICYmIHN0ICsgY250ID49IHRoaXNCLnRpZXJzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSB0aGlzQi5zZWxlY3RlZFRpZXJzLmxlbmd0aCAtIDE7IHNpID49IDA7IC0tc2kpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLnRpZXJzLnNwbGljZSh0aGlzQi5zZWxlY3RlZFRpZXJzW3NpXSwgMSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzQi5zZWxlY3RlZFRpZXJzLnNwbGljZSgwLCBjbnQpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGlwID0gY29udGlndW91cyA/IHN0ICsgMSA6IHN0ICsgZGlzY29udGlnO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBtdC5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IudGllcnMuc3BsaWNlKGlwK3NpLCAwLCBtdFtzaV0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZWxlY3RlZFRpZXJzLnB1c2goaXAgKyBzaSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpc0Iud2l0aFByZXNlcnZlZFNlbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuX2Vuc3VyZVRpZXJzR3JvdXBlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzQi5tYXJrU2VsZWN0ZWRUaWVycygpO1xuICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeVRpZXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzQi5yZW9yZGVyVGllcnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyKFwic2VsZWN0ZWRcIiwgc3QpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCB0aGlzQi50aWVycy5sZW5ndGggLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2V0U2VsZWN0ZWRUaWVyKHN0ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuc3QgPSB0aGlzQi50aWVyc1t0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSBuc3Qucm93Lm9mZnNldFRvcCwgYm90dG9tID0gdG9wICsgbnN0LnJvdy5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3AgPCB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCB8fCBib3R0b20gPiB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCArIHRoaXNCLnRpZXJIb2xkZXIub2Zmc2V0SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCA9IE1hdGgubWluKHRvcCwgYm90dG9tIC0gdGhpc0IudGllckhvbGRlci5vZmZzZXRIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMTg3IHx8IGV2LmtleUNvZGUgPT0gNjEpIHsgLy8gK1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzQi56b29tU3RlcCgtMTApO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMTg5IHx8IGV2LmtleUNvZGUgPT0gMTczKSB7IC8vIC1cbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpc0Iuem9vbVN0ZXAoMTApO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gNzMgfHwgZXYua2V5Q29kZSA9PSAxMDUpIHsgLy8gaVxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgIGlmIChzdCA8IDApIHJldHVybjtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpc0IudGllcnNbc3RdO1xuICAgICAgICAgICAgaWYgKCF0LmluZm9WaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdC5pbmZvRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICB0LnVwZGF0ZUhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHQuaW5mb1Zpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0LmluZm9FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdC51cGRhdGVIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB0LmluZm9WaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA4NCB8fCBldi5rZXlDb2RlID09IDExNikgeyAvLyB0XG4gICAgICAgICAgICB2YXIgYnVtcFN0YXR1cztcbiAgICAgICAgICAgIGlmKCBldi5zaGlmdEtleSApe1xuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzQi50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzQi50aWVyc1t0aV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0LmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVtcFN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVtcFN0YXR1cyA9ICF0LmJ1bXBlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHQubWVyZ2VDb25maWcoe2J1bXBlZDogYnVtcFN0YXR1c30pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghZXYuY3RybEtleSAmJiAhZXYubWV0YUtleSkge1xuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZhciBzdCA9IHRoaXNCLmdldFNlbGVjdGVkVGllcigpO1xuICAgICAgICAgICAgICAgIGlmIChzdCA8IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXNCLnRpZXJzW3N0XTtcblxuICAgICAgICAgICAgICAgIGlmICh0LmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChidW1wU3RhdHVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bXBTdGF0dXMgPSAhdC5idW1wZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdC5tZXJnZUNvbmZpZyh7YnVtcGVkOiBidW1wU3RhdHVzfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gNzcgfHwgZXYua2V5Q29kZSA9PSAxMDkpIHsgLy8gbVxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkgJiYgdGhpc0Iuc2VsZWN0ZWRUaWVycy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgdGhpc0IubWVyZ2VTZWxlY3RlZFRpZXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA2OCB8fCBldi5rZXlDb2RlID09IDEwMCkgeyAvLyBkXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhpc0IuYWRkVGllcih0aGlzQi50aWVyc1tzdF0uZGFzU291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDgwIHx8IGV2LmtleUNvZGUgPT0gMTEyKSB7IC8vIHBcbiAgICAgICAgICAgIGlmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGJlIGNhcmVmdWwgYmVjYXVzZSBvcmRlciBvZiB0aWVycyBjb3VsZCBjaGFuZ2VcbiAgICAgICAgICAgICAgICAvLyBvbmNlIHdlIHN0YXJ0IHVwZGF0aW5nIHBpbm5pbmcuXG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc3QgPSAwOyBzdCA8IHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoOyArK3N0KSB7XG4gICAgICAgICAgICAgICAgICAgIHR0LnB1c2godGhpc0IudGllcnNbdGhpc0Iuc2VsZWN0ZWRUaWVyc1tzdF1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHR0Lmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgICAgICB0dFt0aV0ubWVyZ2VDb25maWcoe3Bpbm5lZDogIXR0W3RpXS5waW5uZWR9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygna2V5OiAnICsgZXYua2V5Q29kZSArICc7IGNoYXI6ICcgKyBldi5jaGFyQ29kZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5icm93c2VySG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdGhpc0IuYnJvd3NlckhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5SGFuZGxlciwgZmFsc2UpO1xuICAgIH0sIGZhbHNlKTtcbiAgICB0aGlzLmJyb3dzZXJIb2xkZXIuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIHRoaXNCLmJyb3dzZXJIb2xkZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleUhhbmRsZXIsIGZhbHNlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICAvLyBQb3B1cCBzdXBwb3J0IChkb2VzIHRoaXMgcmVhbGx5IGJlbG9uZyBoZXJlPyBGSVhNRSlcbiAgICB0aGlzLmhQb3B1cEhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmhQb3B1cEhvbGRlci5zdHlsZVsnZm9udC1mYW1pbHknXSA9ICdoZWx2ZXRpY2EnO1xuICAgIHRoaXMuaFBvcHVwSG9sZGVyLnN0eWxlWydmb250LXNpemUnXSA9ICcxMnB0JztcbiAgICB0aGlzLmhQb3B1cEhvbGRlci5jbGFzc0xpc3QuYWRkKCdkYWxsaWFuY2UnKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuaFBvcHVwSG9sZGVyKTtcbiAgICB0aGlzLnBvcHVwcyA9IFtdO1xuXG4gICAgdmFyIHRpZXJDcmVhdGlvblByb21pc2VzID0gW107XG4gICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLnNvdXJjZXMubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlc1t0XTtcbiAgICAgICAgaWYgKCFzb3VyY2UpXG4gICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICB2YXIgY29uZmlnID0ge307XG4gICAgICAgIGlmICh0aGlzLnJlc3RvcmVkQ29uZmlncykge1xuICAgICAgICAgICAgY29uZmlnID0gdGhpcy5yZXN0b3JlZENvbmZpZ3NbdF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNvdXJjZS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGllckNyZWF0aW9uUHJvbWlzZXMucHVzaCh0aGlzLm1ha2VUaWVyKHNvdXJjZSwgY29uZmlnKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHNvdXJjZSBvZiB0aGlzLnNlYXJjaE9ubHlTb3VyY2VzKSB7XG4gICAgICAgIGlmICghc291cmNlLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBjb25zdCB7ZmVhdHVyZXN9ID0gdGhpcy5jcmVhdGVTb3VyY2VzKHNvdXJjZSk7XG5cbiAgICAgICAgICAgIGlmIChmZWF0dXJlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoT25seVNvdXJjZUhvbGRlcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRhc1NvdXJjZTogc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlU291cmNlOiBmZWF0dXJlc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub25GaXJzdFJlbmRlcikge1xuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLnRpZXJzLm1hcCh0ID0+IHQuZmlyc3RSZW5kZXJQcm9taXNlKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMub25GaXJzdFJlbmRlcigpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgIH1cblxuICAgIHRoaXNCLl9lbnN1cmVUaWVyc0dyb3VwZWQoKTtcbiAgICB0aGlzQi5hcnJhbmdlVGllcnMoKTtcbiAgICB0aGlzQi5yZW9yZGVyVGllcnMoKTtcblxuXG4gICAgdmFyIHNzID0gdGhpcy5nZXRTZXF1ZW5jZVNvdXJjZSgpO1xuICAgIGlmIChzcykge1xuICAgICAgICBzcy5nZXRTZXFJbmZvKHRoaXMuY2hyLCBmdW5jdGlvbihzaSkge1xuICAgICAgICAgICAgaWYgKHNpKVxuICAgICAgICAgICAgICAgIHRoaXNCLmN1cnJlbnRTZXFNYXggPSBzaS5sZW5ndGg7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpc0IuY3VycmVudFNlcU1heCA9IC0xO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLnF1ZXJ5UmVnaXN0cnkoKTtcbiAgICBmb3IgKHZhciBtIGluIHRoaXMuY2hhaW5zKSB7XG4gICAgICAgIHRoaXMucXVlcnlSZWdpc3RyeShtLCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5odWJzKSB7XG4gICAgICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCB0aGlzLmh1YnMubGVuZ3RoOyArK2hpKSB7XG4gICAgICAgICAgICB2YXIgaGMgPSB0aGlzLmh1YnNbaGldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBoYyA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGhjID0ge3VybDogaGN9O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgKGZ1bmN0aW9uKGhjKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdFRyYWNrSHViKGhjLnVybCwgZnVuY3Rpb24oaHViLCBlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZGI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGMuZ2Vub21lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRkYiA9IGh1Yi5nZW5vbWVzW2hjLmdlbm9tZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGRiID0gaHViLmdlbm9tZXNbdGhpc0IuY29vcmRTeXN0ZW0udWNzY05hbWVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGRiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhjLm1hcHBpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRkYi5tYXBwaW5nID0gaGMubWFwcGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGMubGFiZWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRkYi5odWIuYWx0TGFiZWwgPSBoYy5sYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmh1Yk9iamVjdHMucHVzaCh0ZGIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGMpO1xuICAgICAgICAgICAgfSkoaGMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZnVsbFNjcmVlbikge1xuICAgICAgICB0aGlzLnNldEZ1bGxTY3JlZW5IZWlnaHQoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3RhdHVzUmVzdG9yZWQgJiYgdGhpcy5zdG9yZVN0YXR1cykge1xuICAgICAgICB0aGlzLnN0b3JlU3RhdHVzKCk7XG4gICAgfVxuXG4gICAgdGhpc0Iuc2V0TG9jYXRpb24odGhpcy5jaHIsIHRoaXMudmlld1N0YXJ0LCB0aGlzLnZpZXdFbmQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGllckNyZWF0aW9uUHJvbWlzZXMuZm9yRWFjaCgocCkgPT4gcC50aGVuKCh0KSA9PiB7XG4gICAgICAgICAgICB0aGlzQi5yZWZyZXNoVGllcih0LCBudWxsLCB0cnVlKVxuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXNCLnNldFNlbGVjdGVkVGllcigxKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFBpbmcgYW55IGluaXQgbGlzdGVuZXJzLlxuICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgdGhpc0IuaW5pdExpc3RlbmVycy5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpc0IuaW5pdExpc3RlbmVyc1tpaV0uY2FsbCh0aGlzQik7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCBmYWxzZSwgdHJ1ZSk7XG59XG5cbi8vXG4vLyBUb3VjaCBldmVudCBzdXBwb3J0XG4vL1xuXG5Ccm93c2VyLnByb3RvdHlwZS50b3VjaFN0YXJ0SGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgLy8gRXZlbnRzIG5vdCBjb25zdW1lZCBzbyB0aGV5IGNhbiBiZSBpbnRlcnByZXR0ZWQgYXMgY2xpY2tzIGFzIHdlbGwuXG5cbiAgICB0aGlzLnRvdWNoT3JpZ2luWCA9IGV2LnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgdGhpcy50b3VjaE9yaWdpblkgPSBldi50b3VjaGVzWzBdLnBhZ2VZO1xuICAgIGlmIChldi50b3VjaGVzLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgIHZhciBzZXAgPSBNYXRoLmFicyhldi50b3VjaGVzWzBdLnBhZ2VYIC0gZXYudG91Y2hlc1sxXS5wYWdlWCk7XG4gICAgICAgIHRoaXMuem9vbWluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuem9vbUxhc3RTZXAgPSB0aGlzLnpvb21Jbml0aWFsU2VwID0gc2VwO1xuICAgICAgICB0aGlzLnpvb21Jbml0aWFsU2NhbGUgPSB0aGlzLnNjYWxlO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUudG91Y2hNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgLy8gVGhlc2UgZXZlbnRzICphcmUqIGNvbnN1bWVkIHRvIGVuc3VyZSB3ZSBuZXZlciBnZXQgYW55IGRyYWdnaW5nIHRoYXRcbiAgICAvLyB3ZSBkb24ndCBtYW5hZ2Ugb3Vyc2VsdmVzLlxuXG4gICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAoZXYudG91Y2hlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICB2YXIgdG91Y2hYID0gZXYudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgdmFyIHRvdWNoWSA9IGV2LnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgICAgIGlmICh0aGlzLnRvdWNoT3JpZ2luWCAmJiB0b3VjaFggIT0gdGhpcy50b3VjaE9yaWdpblgpIHtcbiAgICAgICAgICAgIHRoaXMubW92ZSh0b3VjaFggLSB0aGlzLnRvdWNoT3JpZ2luWCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudG91Y2hPcmlnaW5ZICYmIHRvdWNoWSAhPSB0aGlzLnRvdWNoT3JpZ2luWSkge1xuICAgICAgICAgICAgdGhpcy50aWVySG9sZGVyLnNjcm9sbFRvcCAtPSAodG91Y2hZIC0gdGhpcy50b3VjaE9yaWdpblkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG91Y2hPcmlnaW5YID0gdG91Y2hYO1xuICAgICAgICB0aGlzLnRvdWNoT3JpZ2luWSA9IHRvdWNoWTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuem9vbWluZyAmJiBldi50b3VjaGVzLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgIHZhciBzZXAgPSBNYXRoLmFicyhldi50b3VjaGVzWzBdLnBhZ2VYIC0gZXYudG91Y2hlc1sxXS5wYWdlWCk7XG4gICAgICAgIGlmIChzZXAgIT0gdGhpcy56b29tTGFzdFNlcCkge1xuICAgICAgICAgICAgdmFyIGNwID0gKGV2LnRvdWNoZXNbMF0ucGFnZVggKyBldi50b3VjaGVzWzFdLnBhZ2VYKS8yO1xuICAgICAgICAgICAgdmFyIHNjcCA9IHRoaXMudmlld1N0YXJ0ICsgKGNwL3RoaXMuc2NhbGUpfDBcbiAgICAgICAgICAgIHRoaXMuc2NhbGUgPSB0aGlzLnpvb21Jbml0aWFsU2NhbGUgKiAoc2VwL3RoaXMuem9vbUluaXRpYWxTZXApO1xuICAgICAgICAgICAgdGhpcy52aWV3U3RhcnQgPSBzY3AgLSAoY3AvdGhpcy5zY2FsZSl8MDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGllclJlbmRlcmVyKHRpZXJzW2ldKS5kcmF3VGllcih0aWVyc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy56b29tTGFzdFNlcCA9IHNlcDtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnRvdWNoRW5kSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnRvdWNoQ2FuY2VsSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG59XG5cblxuQnJvd3Nlci5wcm90b3R5cGUubWFrZVRpZXIgPSBmdW5jdGlvbihzb3VyY2UsIGNvbmZpZykge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWxNYWtlVGllcihzb3VyY2UsIGNvbmZpZyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgaW5pdGlhbGl6aW5nJywgc291cmNlKTtcbiAgICAgICAgY29uc29sZS5sb2coZS5zdGFjayB8fCBlKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlYWxNYWtlVGllciA9IGZ1bmN0aW9uKHNvdXJjZSwgY29uZmlnKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB2YXIgYmFja2dyb3VuZCA9IG51bGw7XG4gICAgaWYgKHRoaXMudGllckJhY2tncm91bmRDb2xvcnMpIHtcbiAgICAgICAgYmFja2dyb3VuZCA9IHRoaXMudGllckJhY2tncm91bmRDb2xvcnNbdGhpcy50aWVycy5sZW5ndGggJSB0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzLmxlbmd0aF07XG4gICAgfVxuXG4gICAgdmFyIHRpZXIgPSBuZXcgRGFzVGllcih0aGlzLCBzb3VyY2UsIGNvbmZpZywgYmFja2dyb3VuZCk7XG4gICAgdGllci5vb3JpZ2luID0gdGhpcy52aWV3U3RhcnRcblxuICAgIHZhciBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgdmFyIGRyYWdPcmlnaW4sIGRyYWdNb3ZlT3JpZ2luO1xuICAgIHZhciBob3ZlclRpbWVvdXQ7XG5cbiAgICB2YXIgZmVhdHVyZUxvb2t1cCA9IGZ1bmN0aW9uKHJ4LCByeSkge1xuICAgICAgICBjb25zdCByZW5kZXJlciA9IHRoaXNCLmdldFRpZXJSZW5kZXJlcih0aWVyKTtcbiAgICAgICAgaWYgKHJlbmRlcmVyLmZlYXR1cmVMb29rdXApXG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyZXIuZmVhdHVyZUxvb2t1cCh0aWVyLCByeCwgcnkpO1xuICAgIH1cblxuICAgIHZhciBkcmFnTW92ZUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdmFyIHJ4ID0gZXYuY2xpZW50WDtcbiAgICAgICAgaWYgKHJ4ICE9IGRyYWdNb3ZlT3JpZ2luKSB7XG4gICAgICAgICAgICB0aGlzQi5tb3ZlKChyeCAtIGRyYWdNb3ZlT3JpZ2luKSwgdHJ1ZSk7XG4gICAgICAgICAgICBkcmFnTW92ZU9yaWdpbiA9IHJ4O1xuICAgICAgICB9XG4gICAgICAgIHRoaXNCLmlzRHJhZ2dpbmcgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciBkcmFnVXBIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRyYWdNb3ZlSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZHJhZ1VwSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgIHRoaXNCLm1vdmUoKGV2LmNsaWVudFggLSBkcmFnTW92ZU9yaWdpbikpOyAvLyBTbmFwIGJhY2sgKEZJWE1FOiBjb25zaWRlciBhbmltYXRpb24pXG4gICAgfVxuXG5cbiAgICB0aWVyLnZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIHRoaXNCLmJyb3dzZXJIb2xkZXIuZm9jdXMoKTtcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGJyID0gdGllci5yb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciByeCA9IGV2LmNsaWVudFgsIHJ5ID0gZXYuY2xpZW50WTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhZ01vdmVIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBkcmFnVXBIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgZHJhZ09yaWdpbiA9IGRyYWdNb3ZlT3JpZ2luID0gcng7XG4gICAgICAgIHRoaXNCLmlzRHJhZ2dpbmcgPSBmYWxzZTsgLy8gTm90IGRyYWdnaW5nIHVudGlsIGEgbW92ZW1lbnQgZXZlbnQgYXJyaXZlcy5cbiAgICB9LCBmYWxzZSk7XG5cbiAgICB0aWVyLnZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIHZhciBiciA9IHRpZXIucm93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgcnggPSBldi5jbGllbnRYIC0gYnIubGVmdCwgcnkgPSBldi5jbGllbnRZIC0gYnIudG9wO1xuXG4gICAgICAgIHZhciBoaXQgPSBmZWF0dXJlTG9va3VwKHJ4LCByeSk7XG4gICAgICAgIGlmIChoaXQgJiYgaGl0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRpZXIucm93LnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRpZXIucm93LnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChob3ZlclRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVvdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIC8vIGlmICh0aWVyLmRhc1NvdXJjZS50aWVyX3R5cGUgIT09ICdzZXF1ZW5jZScgJiYgcnggIT0gZHJhZ01vdmVPcmlnaW4pIHtcbiAgICAgICAgICAgIC8vICAgIHRoaXNCLm1vdmUoKHJ4IC0gZHJhZ01vdmVPcmlnaW4pKTtcbiAgICAgICAgICAgIC8vICAgIGRyYWdNb3ZlT3JpZ2luID0gcng7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoaGl0ICE9PSB0aGlzQi5fb3ZlckZlYXR1cmVzICYmICFhcnJheUVxdWFscyhoaXQsIHRoaXNCLl9vdmVyRmVhdHVyZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpc0IuX292ZXJGZWF0dXJlcyA9IGhpdDtcbiAgICAgICAgICAgICAgICBpZiAoaGl0ICYmIGhpdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeUltbWVkaWF0ZUZlYXR1cmVIb3ZlcihldiwgaGl0W2hpdC5sZW5ndGggLSAxXSwgaGl0LCB0aWVyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlJbW1lZGlhdGVGZWF0dXJlSG92ZXIoZXYsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhpdCA9IGZlYXR1cmVMb29rdXAocngsIHJ5KTtcbiAgICAgICAgICAgICAgICBpZiAoaGl0ICYmIGhpdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZsYWcsIHRoYXQgdGhlcmUgaXMgc29tZXRoaW5nIGhvdmVyZWQgb24gdGhpcyB0aWVyXG4gICAgICAgICAgICAgICAgICAgIHRpZXIuaG92ZXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeURlZmVycmVkRmVhdHVyZUhvdmVyKGV2LCBoaXRbaGl0Lmxlbmd0aCAtIDFdLCBoaXQsIHRpZXIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0aWVyLmhvdmVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGllci5ob3ZlcmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeURlZmVycmVkRmVhdHVyZUhvdmVyKGV2LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGllcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGRvdWJsZUNsaWNrVGltZW91dCA9IG51bGw7XG4gICAgdGllci52aWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIGJyID0gdGllci5yb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciByeCA9IGV2LmNsaWVudFggLSBici5sZWZ0LCByeSA9IGV2LmNsaWVudFkgLSBici50b3A7XG5cbiAgICAgICAgdmFyIGhpdCA9IGZlYXR1cmVMb29rdXAocngsIHJ5KTtcbiAgICAgICAgaWYgKGhpdCAmJiBoaXQubGVuZ3RoID4gMCAmJiAhdGhpc0IuaXNEcmFnZ2luZykge1xuICAgICAgICAgICAgaWYgKGRvdWJsZUNsaWNrVGltZW91dCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChkb3VibGVDbGlja1RpbWVvdXQpO1xuICAgICAgICAgICAgICAgIGRvdWJsZUNsaWNrVGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpc0IuZmVhdHVyZURvdWJsZUNsaWNrKGhpdCwgcngsIHJ5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG91YmxlQ2xpY2tUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZG91YmxlQ2xpY2tUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5RmVhdHVyZShldiwgaGl0W2hpdC5sZW5ndGgtMV0sIGhpdCwgdGllcik7XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzQi5pc0RyYWdnaW5nICYmIHJ4ICE9IGRyYWdPcmlnaW4gJiYgdGllci5zZXF1ZW5jZVNvdXJjZSkge1xuICAgICAgICAgICAgdmFyIGEgPSB0aGlzQi52aWV3U3RhcnQgKyAocngvdGhpc0Iuc2NhbGUpO1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzQi52aWV3U3RhcnQgKyAoZHJhZ09yaWdpbi90aGlzQi5zY2FsZSk7XG5cbiAgICAgICAgICAgIHZhciBtaW4sIG1heDtcbiAgICAgICAgICAgIGlmIChhIDwgYikge1xuICAgICAgICAgICAgICAgIG1pbiA9IGF8MDsgbWF4ID0gYnwwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaW4gPSBifDA7IG1heCA9IGF8MDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpc0Iubm90aWZ5UmVnaW9uU2VsZWN0KHRoaXNCLmNociwgbWluLCBtYXgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNCLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICB0aWVyLnZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgIH0pO1xuXG4gICAgdGllci5yZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgaWYgKHRoaXNCLnRpZXJzW3RpXSA9PT0gdGllcikge1xuICAgICAgICAgICAgICAgIHRoaXNCLnJlbW92ZVRpZXIoe2luZGV4OiB0aX0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xuICAgIHRpZXIubmFtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmIChldi5zaGlmdEtleSkge1xuICAgICAgICAgICAgdmFyIGhpdFRpZXIgPSAtMTtcbiAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzQi50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpc0IudGllcnNbdGldID09PSB0aWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpdFRpZXIgPSB0aTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhpdFRpZXIgPj0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gdGhpc0Iuc2VsZWN0ZWRUaWVycy5pbmRleE9mKGhpdFRpZXIpO1xuICAgICAgICAgICAgICAgIGlmIChpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5wdXNoKGhpdFRpZXIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZWxlY3RlZFRpZXJzLnNvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpc0IubWFya1NlbGVjdGVkVGllcnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpc0Iuc2VsZWN0ZWRUaWVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmJyb3dzZXJIb2xkZXIuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyU2VsZWN0aW9uV3JhcCgtMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzQi50aWVyc1t0aV0gPT09IHRpZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuYnJvd3NlckhvbGRlci5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0Iuc2VsZWN0ZWRUaWVycy5sZW5ndGggIT0gMSB8fCB0aGlzQi5zZWxlY3RlZFRpZXJzWzBdICE9IHRpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZXRTZWxlY3RlZFRpZXIodGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRpZXIuaW5mb1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aWVyLmluZm9FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIHRpZXIudXBkYXRlSGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgdGllci5pbmZvVmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpZXIuaW5mb0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB0aWVyLnVwZGF0ZUhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHRpZXIuaW5mb1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIGZhbHNlKTtcbiAgICB0aWVyLmJ1bXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGJ1bXBTdGF0dXM7XG4gICAgICAgIHZhciB0ID0gdGllcjtcbiAgICAgICAgaWYgKHQuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMpIHtcbiAgICAgICAgICAgIGlmIChidW1wU3RhdHVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBidW1wU3RhdHVzID0gIXQuYnVtcGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5tZXJnZUNvbmZpZyh7YnVtcGVkOiBidW1wU3RhdHVzfSk7XG4gICAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cblxuICAgIHZhciBkcmFnTGFiZWw7XG4gICAgdmFyIGRyYWdUaWVySG9sZGVyO1xuICAgIHZhciBkcmFnVGllckhvbGRlclNjcm9sbExpbWl0O1xuICAgIHZhciB0aWVyT3JkaW5hbDtcbiAgICB2YXIgeUF0TGFzdFJlb3JkZXI7XG4gICAgdmFyIHRpZXJzV2VyZVJlb3JkZXJlZCA9IGZhbHNlO1xuXG4gICAgdmFyIGxhYmVsRHJhZ0hhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICB2YXIgbGFiZWwgPSB0aWVyLmxhYmVsO1xuXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoIWRyYWdMYWJlbCkge1xuICAgICAgICAgICAgaWYgKHRpZXIucGlubmVkKSB7XG4gICAgICAgICAgICAgICAgZHJhZ1RpZXJIb2xkZXIgPSB0aGlzQi5waW5uZWRUaWVySG9sZGVyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkcmFnVGllckhvbGRlciA9IHRoaXNCLnRpZXJIb2xkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkcmFnVGllckhvbGRlclNjcm9sbExpbWl0ID0gZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsSGVpZ2h0IC0gZHJhZ1RpZXJIb2xkZXIub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICBkcmFnTGFiZWwgPSBsYWJlbC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICBkcmFnTGFiZWwuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgZHJhZ1RpZXJIb2xkZXIuYXBwZW5kQ2hpbGQoZHJhZ0xhYmVsKTtcbiAgICAgICAgICAgIGxhYmVsLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblxuICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzQi50aWVyc1t0aV0gPT09IHRpZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGllck9yZGluYWwgPSB0aTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB5QXRMYXN0UmVvcmRlciA9IGV2LmNsaWVudFk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaG9sZGVyQkNSID0gZHJhZ1RpZXJIb2xkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGRyYWdMYWJlbC5zdHlsZS5sZWZ0ID0gKGxhYmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBob2xkZXJCQ1IubGVmdCkgKyAncHgnO1xuICAgICAgICBkcmFnTGFiZWwuc3R5bGUudG9wID0gKGV2LmNsaWVudFkgLSBob2xkZXJCQ1IudG9wICsgZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsVG9wIC0gMTApICsgJ3B4JztcblxuICAgICAgICB2YXIgcHR5ID0gZXYuY2xpZW50WSAtIGhvbGRlckJDUi50b3AgKyBkcmFnVGllckhvbGRlci5zY3JvbGxUb3A7XG4gICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzQi50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgIHZhciB0dCA9IHRoaXNCLnRpZXJzW3RpXTtcbiAgICAgICAgICAgIGlmICh0dC5waW5uZWQgXiB0aWVyLnBpbm5lZClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgdmFyIHR0ciA9IHR0LnJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHB0eSAtPSAodHRyLmJvdHRvbSAtIHR0ci50b3ApO1xuICAgICAgICAgICAgaWYgKHB0eSA8IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGkgPCB0aWVyT3JkaW5hbCAmJiBldi5jbGllbnRZIDwgeUF0TGFzdFJlb3JkZXIgfHwgdGkgPiB0aWVyT3JkaW5hbCAmJiBldi5jbGllbnRZID4geUF0TGFzdFJlb3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iud2l0aFByZXNlcnZlZFNlbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLnRpZXJzLnNwbGljZSh0aWVyT3JkaW5hbCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVycy5zcGxpY2UodGksIDAsIHRpZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuX2Vuc3VyZVRpZXJzR3JvdXBlZCh0aSA+IHRpZXJPcmRpbmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdGl4ID0gMDsgdGl4IDwgdGhpc0IudGllcnMubGVuZ3RoOyArK3RpeClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzQi50aWVyc1t0aXhdID09IHRpZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGllck9yZGluYWwgPSB0aXg7XG5cbiAgICAgICAgICAgICAgICAgICAgeUF0TGFzdFJlb3JkZXIgPSBldi5jbGllbnRZO1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5yZW9yZGVyVGllcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1RpZXJIb2xkZXIuYXBwZW5kQ2hpbGQoZHJhZ0xhYmVsKTsgLy8gQmVjYXVzZSByZW9yZGVyVGllcnMgcmVtb3ZlcyBhbGwgY2hpbGRyZW4uXG4gICAgICAgICAgICAgICAgICAgIHRpZXJzV2VyZVJlb3JkZXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRyYWdMYWJlbC5vZmZzZXRUb3AgPCBkcmFnVGllckhvbGRlci5zY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIGRyYWdUaWVySG9sZGVyLnNjcm9sbFRvcCAtPSAoZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsVG9wIC0gZHJhZ0xhYmVsLm9mZnNldFRvcCk7XG4gICAgICAgIH0gZWxzZSBpZiAoKGRyYWdMYWJlbC5vZmZzZXRUb3AgKyBkcmFnTGFiZWwub2Zmc2V0SGVpZ2h0KSA+IChkcmFnVGllckhvbGRlci5zY3JvbGxUb3AgKyBkcmFnVGllckhvbGRlci5vZmZzZXRIZWlnaHQpKSB7XG4gICAgICAgICAgICBkcmFnVGllckhvbGRlci5zY3JvbGxUb3AgPSBNYXRoLm1pbihkcmFnVGllckhvbGRlci5zY3JvbGxUb3AgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRyYWdMYWJlbC5vZmZzZXRUb3AgKyBkcmFnTGFiZWwub2Zmc2V0SGVpZ2h0KSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsVG9wICsgZHJhZ1RpZXJIb2xkZXIub2Zmc2V0SGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdUaWVySG9sZGVyU2Nyb2xsTGltaXQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBsYWJlbFJlbGVhc2VIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIGxhYmVsID0gdGllci5sYWJlbDtcblxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGRyYWdMYWJlbCkge1xuICAgICAgICAgICAgZHJhZ0xhYmVsLnN0eWxlLmN1cnNvciA9ICdhdXRvJztcbiAgICAgICAgICAgIGRyYWdUaWVySG9sZGVyLnJlbW92ZUNoaWxkKGRyYWdMYWJlbCk7XG4gICAgICAgICAgICBkcmFnTGFiZWwgPSBudWxsO1xuICAgICAgICAgICAgbGFiZWwuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBsYWJlbERyYWdIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBsYWJlbFJlbGVhc2VIYW5kbGVyLCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKHRpZXJzV2VyZVJlb3JkZXJlZCkge1xuICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzQi50aWVyc1t0aV0gPT0gdGllcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZXRTZWxlY3RlZFRpZXIodGkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyKFwicmVvcmRlcmVkXCIsIHRpZXIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRpZXIubGFiZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRpZXJzV2VyZVJlb3JkZXJlZCA9IGZhbHNlO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBsYWJlbERyYWdIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBsYWJlbFJlbGVhc2VIYW5kbGVyLCBmYWxzZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgdGhpcy50aWVycy5wdXNoKHRpZXIpOyAgLy8gTkIgdGhpcyBjdXJyZW50bHkgdGVsbHMgYW55IGV4dGFudCBrbm93blNwYWNlIGFib3V0IHRoZSBuZXcgdGllci5cblxuIC8vIGZldGNoZXMgc3R5bGVzaGVldFxuICAgIHJldHVybiB0aWVyLmluaXQoKS50aGVuKGZ1bmN0aW9uICh1cGRhdGVkVGllcikge1xuICAgICAgICB1cGRhdGVkVGllci5jdXJyZW50bHlIZWlnaHQgPSA1MDtcbiAgICAgICAgdGhpc0IudXBkYXRlSGVpZ2h0KCk7XG4gICAgICAgIHVwZGF0ZWRUaWVyLnVwZGF0ZUxhYmVsKCk7XG5cbiAgICAgICAgdGhpc0Iud2l0aFByZXNlcnZlZFNlbGVjdGlvbih0aGlzQi5fZW5zdXJlVGllcnNHcm91cGVkKTtcbiAgICAgICAgdXBkYXRlZFRpZXIuX3VwZGF0ZUZyb21Db25maWcoKTtcbiAgICAgICAgdGhpc0IucmVvcmRlclRpZXJzKCk7XG5cbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRUaWVyO1xuICAgIH0pO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZW9yZGVyVGllcnMgPSBmdW5jdGlvbigpIHtcbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLnRpZXJIb2xkZXIpO1xuICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMucGlubmVkVGllckhvbGRlcik7XG4gICAgaWYgKHRoaXMuZGlzYWJsZVBpbm5pbmcpIHtcbiAgICAgICAgdGhpcy50aWVySG9sZGVyLmFwcGVuZENoaWxkKHRoaXMucnVsZXIpO1xuICAgICAgICB0aGlzLnRpZXJIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy5ydWxlcjIpO1xuICAgIH1cbiAgICB2YXIgaGFzUGlubmVkID0gZmFsc2U7XG4gICAgdmFyIHBpbm5lZFRpZXJzID0gW10sIHVucGlubmVkVGllcnMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGllcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzLnRpZXJzW2ldO1xuICAgICAgICB2YXIgdmlzaWJsZSA9IFsnc3ViJywnZHVtbXknXS5pbmRleE9mKHRoaXMudGllcnNbaV0uZGFzU291cmNlLnJlbmRlcmVyKSA9PT0gLTE7XG4gICAgICAgIGlmICh0LnBpbm5lZCAmJiAhdGhpcy5kaXNhYmxlUGlubmluZykge1xuICAgICAgICAgICAgcGlubmVkVGllcnMucHVzaCh0KTtcbiAgICAgICAgICAgIGlmICh2aXNpYmxlKVxuICAgICAgICAgICAgICAgIHRoaXMucGlubmVkVGllckhvbGRlci5hcHBlbmRDaGlsZCh0aGlzLnRpZXJzW2ldLnJvdyk7XG4gICAgICAgICAgICBoYXNQaW5uZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdW5waW5uZWRUaWVycy5wdXNoKHQpO1xuICAgICAgICAgICAgaWYgKHZpc2libGUpXG4gICAgICAgICAgICAgICAgdGhpcy50aWVySG9sZGVyLmFwcGVuZENoaWxkKHRoaXMudGllcnNbaV0ucm93KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMud2l0aFByZXNlcnZlZFNlbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy50aWVycy5zcGxpY2UoMCwgdGhpcy50aWVycy5sZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBpbm5lZFRpZXJzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgdGhpcy50aWVycy5wdXNoKHBpbm5lZFRpZXJzW2ldKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bnBpbm5lZFRpZXJzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgdGhpcy50aWVycy5wdXNoKHVucGlubmVkVGllcnNbaV0pO1xuICAgIH0pO1xuXG4gICAgaWYgKGhhc1Bpbm5lZClcbiAgICAgICAgdGhpcy5waW5uZWRUaWVySG9sZGVyLmNsYXNzTGlzdC5hZGQoJ3RpZXItaG9sZGVyLXBpbm5lZC1mdWxsJyk7XG4gICAgZWxzZVxuICAgICAgICB0aGlzLnBpbm5lZFRpZXJIb2xkZXIuY2xhc3NMaXN0LnJlbW92ZSgndGllci1ob2xkZXItcGlubmVkLWZ1bGwnKTtcblxuICAgIHRoaXMuYXJyYW5nZVRpZXJzKCk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLndpdGhQcmVzZXJ2ZWRTZWxlY3Rpb24gPSBmdW5jdGlvbihmKSB7XG4gICAgdmFyIHN0ID0gW107XG4gICAgZm9yICh2YXIgeGkgPSAwOyB4aSA8IHRoaXMuc2VsZWN0ZWRUaWVycy5sZW5ndGg7ICsreGkpIHtcbiAgICAgICAgc3QucHVzaCh0aGlzLnRpZXJzW3RoaXMuc2VsZWN0ZWRUaWVyc1t4aV1dKTtcbiAgICB9XG5cbiAgICBmLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbXTtcbiAgICBmb3IgKHZhciBzdGkgPSAwOyBzdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKytzdGkpIHtcbiAgICAgICAgaWYgKHN0LmluZGV4T2YodGhpcy50aWVyc1tzdGldKSA+PSAwKVxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRpZXJzLnB1c2goc3RpKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlZnJlc2hUaWVyID0gZnVuY3Rpb24odGllciwgdGllckNhbGxiYWNrLCBub0ludmFsaWRhdGUpIHtcbiAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmdldFRpZXJSZW5kZXJlcih0aWVyKTtcbiAgICBpZiAodGllci5kYXNTb3VyY2UucmVuZGVyZXIgPT09ICdtdWx0aScpIHtcbiAgICAgICAgcmVuZGVyZXIuZHJhd1RpZXIodGllcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlbmRlckNhbGxiYWNrID0gdGllckNhbGxiYWNrIHx8IHJlbmRlcmVyLnJlbmRlclRpZXI7XG4gICAgICAgIGlmICh0aGlzLmtub3duU3BhY2UpIHtcbiAgICAgICAgICAgIGlmIChub0ludmFsaWRhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5rbm93blNwYWNlLnBvb2wpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMua25vd25TcGFjZS5zdGFydEZldGNoZXNGb3JUaWVycyhbdGllcl0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtub3duU3BhY2UuaW52YWxpZGF0ZSh0aWVyLCByZW5kZXJDYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmdldFRpZXJSZW5kZXJlciA9IGZ1bmN0aW9uKHRpZXIpIHtcbiAgICB2YXIgcmVuZGVyZXIgPSB0aWVyLmRhc1NvdXJjZS5yZW5kZXJlciB8fCB0aGlzLmRlZmF1bHRSZW5kZXJlcjtcbiAgICBpZiAodHlwZW9mKHJlbmRlcmVyKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJzW3JlbmRlcmVyXTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZihyZW5kZXJlci5yZW5kZXJUaWVyKSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgICAgdHlwZW9mKHJlbmRlcmVyLmRyYXdUaWVyKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gcmVuZGVyZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJUaWVyIGRvZXNuJ3QgaGF2ZSBhIHJlbmRlcmVyXCIpO1xuICAgIH1cbn1cblxuLyogSW50ZXJuYWwgdXNlIG9ubHksIGFzc3VtZXMgc2VsZWN0aW9uIGlzIGJlaW5nIG1hbmFnZWQgZWxzZXdoZXJlLi4uICovXG5cbkJyb3dzZXIucHJvdG90eXBlLl9lbnN1cmVUaWVyc0dyb3VwZWQgPSBmdW5jdGlvbihkb3duKSB7XG4gICAgdmFyIGdyb3VwZWRUaWVycyA9IHt9O1xuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICB2YXIgdCA9IHRoaXMudGllcnNbdGldO1xuICAgICAgICBpZiAodC5kYXNTb3VyY2UudGllckdyb3VwKSB7XG4gICAgICAgICAgICBwdXNobyhncm91cGVkVGllcnMsIHQuZGFzU291cmNlLnRpZXJHcm91cCwgdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbmV3VGllcnMgPSBbXTtcbiAgICBpZiAoZG93bilcbiAgICAgICAgdGhpcy50aWVycy5yZXZlcnNlKCk7XG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy50aWVyc1t0aV07XG4gICAgICAgIGlmICh0LmRhc1NvdXJjZS50aWVyR3JvdXApIHtcbiAgICAgICAgICAgIHZhciBudCA9IGdyb3VwZWRUaWVyc1t0LmRhc1NvdXJjZS50aWVyR3JvdXBdO1xuICAgICAgICAgICAgaWYgKG50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGRvd24pXG4gICAgICAgICAgICAgICAgICAgIG50LnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBudGkgPSAwOyBudGkgPCBudC5sZW5ndGg7ICsrbnRpKVxuICAgICAgICAgICAgICAgICAgICBuZXdUaWVycy5wdXNoKG50W250aV0pO1xuICAgICAgICAgICAgICAgIGdyb3VwZWRUaWVyc1t0LmRhc1NvdXJjZS50aWVyR3JvdXBdID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1RpZXJzLnB1c2godCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRvd24pXG4gICAgICAgIG5ld1RpZXJzLnJldmVyc2UoKTtcbiAgICB0aGlzLnRpZXJzLnNwbGljZSgwLCB0aGlzLnRpZXJzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgbnRpID0gMDsgbnRpIDwgbmV3VGllcnMubGVuZ3RoOyArK250aSlcbiAgICAgICAgdGhpcy50aWVycy5wdXNoKG5ld1RpZXJzW250aV0pO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5hcnJhbmdlVGllcnMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJyYW5nZWRUaWVycyA9IFtdO1xuICAgIHZhciBncm91cGVkVGllcnMgPSB7fTtcblxuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICB2YXIgdCA9IHRoaXMudGllcnNbdGldO1xuICAgICAgICBpZiAodC5waW5uZWQpIHtcbiAgICAgICAgICAgIGFycmFuZ2VkVGllcnMucHVzaCh0KTtcbiAgICAgICAgICAgIGlmICh0LmRhc1NvdXJjZS50aWVyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBwdXNobyhncm91cGVkVGllcnMsIHQuZGFzU291cmNlLnRpZXJHcm91cCwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzLnRpZXJzW3RpXTtcbiAgICAgICAgaWYgKCF0LnBpbm5lZCkge1xuICAgICAgICAgICAgYXJyYW5nZWRUaWVycy5wdXNoKHQpO1xuICAgICAgICAgICAgaWYgKHQuZGFzU291cmNlLnRpZXJHcm91cCkge1xuICAgICAgICAgICAgICAgIHB1c2hvKGdyb3VwZWRUaWVycywgdC5kYXNTb3VyY2UudGllckdyb3VwLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGcgaW4gZ3JvdXBlZFRpZXJzKSB7XG4gICAgICAgIHZhciB0aWVycyA9IGdyb3VwZWRUaWVyc1tnXTtcbiAgICAgICAgdmFyIHRpZXJHcm91cCA9IHRoaXMudGllckdyb3Vwc1tnXTtcbiAgICAgICAgaWYgKCF0aWVyR3JvdXApIHtcbiAgICAgICAgICAgIHRpZXJHcm91cCA9IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBtYWtlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCdzcGFuJywgZywge2NsYXNzTmFtZTogJ3RpZXItZ3JvdXAtbGFiZWwnfSksXG4gICAgICAgICAgICAgICAgICAgIHtjbGFzc05hbWU6IFwidGllci1ncm91cFwifSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnRpZXJHcm91cHNbZ10gPSB0aWVyR3JvdXA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGllckdyb3VwLmVsZW1lbnQucGFyZW50Tm9kZSlcbiAgICAgICAgICAgIHRpZXJHcm91cC5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGllckdyb3VwLmVsZW1lbnQpO1xuXG4gICAgICAgIHZhciBob2xkZXIgPSB0aWVyc1swXS5waW5uZWQgPyB0aGlzLnBpbm5lZFRpZXJIb2xkZXIgOiB0aGlzLnRpZXJIb2xkZXI7XG4gICAgICAgIHZhciBtaW4gPSAxMDAwMDAwMCwgbWF4ID0gMDtcbiAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHRpZXJzW3RpXS5yb3c7XG4gICAgICAgICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIHJvdy5vZmZzZXRUb3ApO1xuICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCByb3cub2Zmc2V0VG9wICsgcm93Lm9mZnNldEhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGllckdyb3VwLmVsZW1lbnQuc3R5bGUudG9wID0gbWluICsgJ3B4JztcbiAgICAgICAgdGllckdyb3VwLmVsZW1lbnQuc3R5bGUubGVmdCA9ICcwcHgnO1xuICAgICAgICB0aWVyR3JvdXAuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAobWF4LW1pbikgKyAncHgnO1xuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQodGllckdyb3VwLmVsZW1lbnQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzKSB7XG4gICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCBhcnJhbmdlZFRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgdmFyIHQgPSBhcnJhbmdlZFRpZXJzW3RpXTtcbiAgICAgICAgICAgIHQuc2V0QmFja2dyb3VuZCh0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzW3RpICUgdGhpcy50aWVyQmFja2dyb3VuZENvbG9ycy5sZW5ndGhdKTtcbiAgICAgICAgICAgIGlmICh0LmRhc1NvdXJjZS50aWVyR3JvdXApXG4gICAgICAgICAgICAgICAgdC5sYWJlbC5zdHlsZS5sZWZ0ID0gJzE4cHgnO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHQubGFiZWwuc3R5bGUubGVmdCA9ICcycHgnO1xuICAgICAgICAgICAgdC5iYWNrZ3JvdW5kID0gdGhpcy50aWVyQmFja2dyb3VuZENvbG9yc1t0aSAlIHRoaXMudGllckJhY2tncm91bmRDb2xvcnMubGVuZ3RoXTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKG5vU3RhcnRGZXRjaGVzKSB7XG4gICAgdGhpcy5yZXRyaWV2ZVRpZXJEYXRhKHRoaXMudGllcnMsIG5vU3RhcnRGZXRjaGVzKTtcbiAgICB0aGlzLmRyYXdPdmVybGF5cygpO1xuICAgIHRoaXMucG9zaXRpb25SdWxlcigpO1xufTtcblxudmFyIGRlZmF1bHRUaWVyUmVuZGVyZXIgPSBmdW5jdGlvbihzdGF0dXMsIHRpZXIpIHtcbiAgICBjb25zb2xlLmxvZyhcIkRFUFJFQ0FURUQhXCIpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZXRyaWV2ZVRpZXJEYXRhID0gZnVuY3Rpb24odGllcnMsIG5vU3RhcnRGZXRjaGVzKSB7XG4gICAgdGhpcy5ub3RpZnlMb2NhdGlvbigpO1xuICAgIHZhciB3aWR0aCA9ICh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCkgKyAxO1xuICAgIHZhciBtaW5FeHRyYVcgPSAodGhpcy5taW5FeHRyYVdpZHRoIC8gdGhpcy5zY2FsZSl8MDtcbiAgICB2YXIgbWF4RXh0cmFXID0gKHRoaXMubWF4RXh0cmFXaWR0aCAvIHRoaXMuc2NhbGUpfDA7XG5cbiAgICB2YXIgbmV3T3JpZ2luID0gKHRoaXMudmlld1N0YXJ0ICsgdGhpcy52aWV3RW5kKSAvIDI7XG4gICAgdmFyIG9oID0gbmV3T3JpZ2luIC0gdGhpcy5vcmlnaW47XG4gICAgdGhpcy5vcmlnaW4gPSBuZXdPcmlnaW47XG4gICAgdGhpcy5zY2FsZUF0TGFzdFJlZHJhdyA9IHRoaXMuc2NhbGU7XG4gICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aWVycy5sZW5ndGg7ICsrdCkge1xuICAgICAgICB2YXIgb2QgPSBvaDtcbiAgICAgICAgaWYgKHRpZXJzW3RdLm9yaWdpbkhheHgpIHtcbiAgICAgICAgICAgIG9kICs9IHRpZXJzW3RdLm9yaWdpbkhheHg7XG4gICAgICAgIH1cbiAgICAgICAgdGllcnNbdF0ub3JpZ2luSGF4eCA9IG9kO1xuICAgIH1cblxuICAgIHZhciBzY2FsZWRRdWFudFJlcyA9IHRoaXMudGFyZ2V0UXVhbnRSZXMgLyB0aGlzLnNjYWxlO1xuXG4gICAgdmFyIGlubmVyRHJhd25TdGFydCA9IE1hdGgubWF4KDEsICh0aGlzLnZpZXdTdGFydHwwKSAtIG1pbkV4dHJhVyk7XG4gICAgdmFyIGlubmVyRHJhd25FbmQgPSBNYXRoLm1pbigodGhpcy52aWV3RW5kfDApICsgbWluRXh0cmFXLCAoKHRoaXMuY3VycmVudFNlcU1heHwwKSA+IDAgPyAodGhpcy5jdXJyZW50U2VxTWF4fDApIDogMTAwMDAwMDAwMCkpXG4gICAgdmFyIG91dGVyRHJhd25TdGFydCA9IE1hdGgubWF4KDEsICh0aGlzLnZpZXdTdGFydHwwKSAtIG1heEV4dHJhVyk7XG4gICAgdmFyIG91dGVyRHJhd25FbmQgPSBNYXRoLm1pbigodGhpcy52aWV3RW5kfDApICsgbWF4RXh0cmFXLCAoKHRoaXMuY3VycmVudFNlcU1heHwwKSA+IDAgPyAodGhpcy5jdXJyZW50U2VxTWF4fDApIDogMTAwMDAwMDAwMCkpO1xuXG4gICAgaWYgKCF0aGlzLmtub3duU3BhY2UgfHwgdGhpcy5rbm93blNwYWNlLmNociAhPT0gdGhpcy5jaHIpIHtcbiAgICAgICAgdmFyIHNzID0gdGhpcy5nZXRTZXF1ZW5jZVNvdXJjZSgpO1xuICAgICAgICBpZiAodGhpcy5rbm93blNwYWNlKVxuICAgICAgICAgICAgdGhpcy5rbm93blNwYWNlLmNhbmNlbCgpO1xuICAgICAgICAvLyBrbm93biBzcGFjZSBpcyBjcmVhdGVkIGJhc2VkIG9uIHRoZSBlbnRpcmUgdGllciBsaXN0LCBmb3IgZnV0dXJlIGNhY2hpbmcgcHVycG9zZXMsIGV2ZW4gaWYgb25seSBhIHN1YnNldCBvZiB0aGUgdGllcnMgYXJlIG5lZWRlZCB0byBiZSByZW5kZXJlZCBub3cuXG4gICAgICAgIHRoaXMua25vd25TcGFjZSA9IG5ldyBLbm93blNwYWNlKHRoaXMudGllcnMsIHRoaXMuY2hyLCBvdXRlckRyYXduU3RhcnQsIG91dGVyRHJhd25FbmQsIHNjYWxlZFF1YW50UmVzLCBzcyk7XG4gICAgfVxuXG4gICAgdmFyIHNlZyA9IHRoaXMua25vd25TcGFjZS5iZXN0Q2FjaGVPdmVybGFwcGluZyh0aGlzLmNociwgaW5uZXJEcmF3blN0YXJ0LCBpbm5lckRyYXduRW5kKTtcbiAgICBpZiAoc2VnICYmIHNlZy5taW4gPD0gaW5uZXJEcmF3blN0YXJ0ICYmIHNlZy5tYXggPj0gaW5uZXJEcmF3bkVuZCkge1xuICAgICAgICB0aGlzLmRyYXduU3RhcnQgPSBNYXRoLm1heChzZWcubWluLCBvdXRlckRyYXduU3RhcnQpO1xuICAgICAgICB0aGlzLmRyYXduRW5kID0gTWF0aC5taW4oc2VnLm1heCwgb3V0ZXJEcmF3bkVuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kcmF3blN0YXJ0ID0gb3V0ZXJEcmF3blN0YXJ0O1xuICAgICAgICB0aGlzLmRyYXduRW5kID0gb3V0ZXJEcmF3bkVuZDtcbiAgICB9XG4gICAgLy8gc2VuZCBpbiB0aGUgc3Vic2V0IG9mIHRpZXJzIHRvIHJldHJpZXZlLlxuICAgIHRoaXMua25vd25TcGFjZS5yZXRyaWV2ZUZlYXR1cmVzKHRpZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd25TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXduRW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlZFF1YW50UmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vU3RhcnRGZXRjaGVzKTtcbn1cblxuZnVuY3Rpb24gc2V0U291cmNlcyhtc2gsIGF2YWlsYWJsZVNvdXJjZXMsIG1heWJlTWFwcGluZykge1xuICAgIGlmIChtYXliZU1hcHBpbmcpIHtcbiAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBhdmFpbGFibGVTb3VyY2VzLmxlbmd0aDsgKytzKSB7XG4gICAgICAgICAgICBhdmFpbGFibGVTb3VyY2VzW3NdLm1hcHBpbmcgPSBtYXliZU1hcHBpbmc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbXNoLnNldChhdmFpbGFibGVTb3VyY2VzKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucXVlcnlSZWdpc3RyeSA9IGZ1bmN0aW9uKG1heWJlTWFwcGluZywgdHJ5Q2FjaGUpIHtcbiAgICBpZiAoIXRoaXMucmVnaXN0cnkpXG4gICAgICAgIHJldHVybjtcblxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdmFyIGNvb3JkcywgbXNoO1xuICAgIGlmIChtYXliZU1hcHBpbmcpIHtcbiAgICAgICAgY29vcmRzID0gdGhpcy5jaGFpbnNbbWF5YmVNYXBwaW5nXS5jb29yZHM7XG4gICAgICAgIGlmICghdGhpc0IubWFwcGFibGVTb3VyY2VzW21heWJlTWFwcGluZ10pIHtcbiAgICAgICAgICAgIHRoaXNCLm1hcHBhYmxlU291cmNlc1ttYXliZU1hcHBpbmddID0gbmV3IE9ic2VydmVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgbXNoID0gdGhpc0IubWFwcGFibGVTb3VyY2VzW21heWJlTWFwcGluZ107XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29vcmRzID0gdGhpcy5jb29yZFN5c3RlbTtcbiAgICAgICAgbXNoID0gdGhpcy5hdmFpbGFibGVTb3VyY2VzO1xuICAgIH1cbiAgICB2YXIgY2FjaGVIYXNoID0gaGV4X3NoYTEobWluaUpTT05pZnkoY29vcmRzKSk7XG4gICAgaWYgKHRyeUNhY2hlKSB7XG4gICAgICAgIHZhciBjYWNoZVRpbWUgPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS5yZWdpc3RyeS4nICsgY2FjaGVIYXNoICsgJy5sYXN0X3F1ZXJpZWQnXTtcbiAgICAgICAgaWYgKGNhY2hlVGltZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzZXRTb3VyY2VzKG1zaCwgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS5yZWdpc3RyeS4nICsgY2FjaGVIYXNoICsgJy5zb3VyY2VzJ10pLCBtYXliZU1hcHBpbmcpO1xuICAgICAgICAgICAgICAgIHZhciBjYWNoZUFnZSA9IChEYXRlLm5vdygpfDApIC0gKGNhY2hlVGltZXwwKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVBZ2UgPCAoMTIgKiA2MCAqIDYwICogMTAwMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKHJleCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdCYWQgcmVnaXN0cnkgY2FjaGU6ICcgKyByZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJ1cmwgPSB0aGlzLnJlZ2lzdHJ5O1xuICAgIGlmIChydXJsLmluZGV4T2YoJy8vJykgPT0gMCkge1xuICAgICAgICB2YXIgcHJvdG8gPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XG4gICAgICAgIGlmIChwcm90byAhPSAnaHR0cHM6JyAmJiBwcm90byAhPSAnaHR0cDonKVxuICAgICAgICAgICAgcnVybCA9ICdodHRwOicgKyBydXJsO1xuICAgIH1cbiAgICBuZXcgREFTUmVnaXN0cnkocnVybCkuc291cmNlcyhmdW5jdGlvbihzb3VyY2VzKSB7XG4gICAgICAgIHZhciBhdmFpbGFibGVTb3VyY2VzID0gW107XG4gICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgc291cmNlcy5sZW5ndGg7ICsrcykge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbc107XG4gICAgICAgICAgICBpZiAoIXNvdXJjZS5jb29yZHMgfHwgc291cmNlLmNvb3Jkcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNjb29yZHMgPSBzb3VyY2UuY29vcmRzWzBdO1xuICAgICAgICAgICAgaWYgKHNjb29yZHMudGF4b24gIT0gY29vcmRzLnRheG9uIHx8IHNjb29yZHMuYXV0aCAhPSBjb29yZHMuYXV0aCB8fCBzY29vcmRzLnZlcnNpb24gIT0gY29vcmRzLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF2YWlsYWJsZVNvdXJjZXMucHVzaChzb3VyY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UucmVnaXN0cnkuJyArIGNhY2hlSGFzaCArICcuc291cmNlcyddID0gSlNPTi5zdHJpbmdpZnkoYXZhaWxhYmxlU291cmNlcyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLnJlZ2lzdHJ5LicgKyBjYWNoZUhhc2ggKyAnLmxhc3RfcXVlcmllZCddID0gJycgKyBEYXRlLm5vdygpO1xuXG4gICAgICAgIHNldFNvdXJjZXMobXNoLCBhdmFpbGFibGVTb3VyY2VzLCBtYXliZU1hcHBpbmcpO1xuICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIC8vIG1zaC5zZXQobnVsbCk7XG4gICAgfSwgY29vcmRzKTtcbn1cblxuLy9cbi8vIE5hdmlnYXRpb25cbi8vXG5cbkJyb3dzZXIucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbihwb3MsIHNvZnQpXG57XG4gICAgdmFyIHdpZCA9IHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0O1xuICAgIHZhciBuU3RhcnQgPSB0aGlzLnZpZXdTdGFydCAtICgoMS4wICogcG9zKSAvIHRoaXMuc2NhbGUpO1xuICAgIHZhciBuRW5kID0gblN0YXJ0ICsgd2lkO1xuXG4gICAgaWYgKCFzb2Z0KSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZXFNYXggPiAwICYmIG5FbmQgPiB0aGlzLmN1cnJlbnRTZXFNYXgpIHtcbiAgICAgICAgICAgIG5FbmQgPSB0aGlzLmN1cnJlbnRTZXFNYXg7XG4gICAgICAgICAgICBuU3RhcnQgPSB0aGlzLnZpZXdFbmQgLSB3aWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5TdGFydCA8IDEpIHtcbiAgICAgICAgICAgIG5TdGFydCA9IDE7XG4gICAgICAgICAgICBuRW5kID0gblN0YXJ0ICsgd2lkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXRMb2NhdGlvbihudWxsLCBuU3RhcnQsIG5FbmQsIG51bGwsIHNvZnQpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS56b29tU3RlcCA9IGZ1bmN0aW9uKGRlbHRhKSB7XG4gICAgdmFyIG96ID0gMS4wICogdGhpcy56b29tU2xpZGVyVmFsdWU7XG4gICAgdmFyIG56ID0gb3ogKyBkZWx0YTtcbiAgICBpZiAobnogPCB0aGlzLnpvb21NaW4pIHtcbiAgICAgICAgbno9IHRoaXMuem9vbU1pbjtcbiAgICB9XG4gICAgaWYgKG56ID4gdGhpcy56b29tTWF4KSB7XG4gICAgICAgIG56ID0gdGhpcy56b29tTWF4O1xuICAgIH1cblxuICAgIGlmIChueiAhPSBveikge1xuICAgICAgICB0aGlzLnpvb21TbGlkZXJWYWx1ZSA9IG56OyAvLyBGSVhNRSBtYXliZSBvdWdodCB0byBzZXQgaW5zaWRlIHpvb20hXG4gICAgICAgIHRoaXMuem9vbShNYXRoLmV4cCgoMS4wICogbnopIC8gdGhpcy56b29tRXhwdCkpO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuem9vbSA9IGZ1bmN0aW9uKGZhY3Rvcikge1xuICAgIHRoaXMuem9vbUZhY3RvciA9IGZhY3RvcjtcbiAgICB2YXIgdmlld0NlbnRlciA9IE1hdGgucm91bmQoKHRoaXMudmlld1N0YXJ0ICsgdGhpcy52aWV3RW5kKSAvIDIuMCl8MDtcbiAgICB0aGlzLnZpZXdTdGFydCA9IHZpZXdDZW50ZXIgLSB0aGlzLnpvb21CYXNlICogdGhpcy56b29tRmFjdG9yIC8gMjtcbiAgICB0aGlzLnZpZXdFbmQgPSB2aWV3Q2VudGVyICsgdGhpcy56b29tQmFzZSAqIHRoaXMuem9vbUZhY3RvciAvIDI7XG4gICAgaWYgKHRoaXMuY3VycmVudFNlcU1heCA+IDAgJiYgKHRoaXMudmlld0VuZCA+IHRoaXMuY3VycmVudFNlcU1heCArIDUpKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDE7XG4gICAgICAgIHRoaXMudmlld0VuZCA9IHRoaXMuY3VycmVudFNlcU1heDtcbiAgICAgICAgdGhpcy52aWV3U3RhcnQgPSB0aGlzLnZpZXdFbmQgLSBsZW4gKyAxO1xuICAgIH1cbiAgICBpZiAodGhpcy52aWV3U3RhcnQgPCAxKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDE7XG4gICAgICAgIHRoaXMudmlld1N0YXJ0ID0gMTtcbiAgICAgICAgdGhpcy52aWV3RW5kID0gdGhpcy52aWV3U3RhcnQgKyBsZW4gLSAxO1xuICAgIH1cbiAgICB0aGlzLnNjYWxlID0gdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCAvICh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydClcbiAgICB2YXIgd2lkdGggPSB0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDE7XG5cbiAgICB2YXIgc2NhbGVSYXQgPSAodGhpcy5zY2FsZSAvIHRoaXMuc2NhbGVBdExhc3RSZWRyYXcpO1xuXG4gICAgdGhpcy5ub3RpZnlMb2NhdGlvbigpO1xuICAgIHRoaXMucmVmcmVzaCgpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5zcGFjZUNoZWNrID0gZnVuY3Rpb24oZG9udFJlZnJlc2gpIHtcbiAgICBpZiAoIXRoaXMua25vd25TcGFjZSB8fCB0aGlzLmtub3duU3BhY2UuY2hyICE9PSB0aGlzLmNocikge1xuICAgICAgICB0aGlzLnJlZnJlc2goZG9udFJlZnJlc2gpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHdpZHRoID0gKCh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCl8MCkgKyAxO1xuICAgIHZhciBtaW5FeHRyYVcgPSAodGhpcy5taW5FeHRyYVdpZHRoIC8gdGhpcy5zY2FsZSl8MDtcbiAgICB2YXIgbWF4RXh0cmFXID0gKHRoaXMubWF4RXh0cmFXaWR0aCAvIHRoaXMuc2NhbGUpfDA7XG5cbiAgICBpZiAoKHRoaXMuZHJhd25TdGFydHwwKSA+IE1hdGgubWF4KDEsICgodGhpcy52aWV3U3RhcnR8MCkgLSBtaW5FeHRyYVcpfDApICB8fCAodGhpcy5kcmF3bkVuZHwwKSA8IE1hdGgubWluKCh0aGlzLnZpZXdFbmR8MCkgKyBtaW5FeHRyYVcsICgodGhpcy5jdXJyZW50U2VxTWF4fDApID4gMCA/ICh0aGlzLmN1cnJlbnRTZXFNYXh8MCkgOiAxMDAwMDAwMDAwKSkpICB7XG4gICAgICAgIHRoaXMucmVmcmVzaChkb250UmVmcmVzaCk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZXNpemVWaWV3ZXIgPSBmdW5jdGlvbihza2lwUmVmcmVzaCkge1xuICAgIHZhciB3aWR0aCA9IHRoaXMudGllckhvbGRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCB8IDA7XG4gICAgaWYgKHdpZHRoID09IDApXG4gICAgICAgIHJldHVybjtcblxuICAgIHZhciBvbGRGUFcgPSBNYXRoLm1heCh0aGlzLmZlYXR1cmVQYW5lbFdpZHRoLCAzMDApOyAvLyBDYW4gZ2V0IHNpbGx5IHZhbHVlcyBzdG9yZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgYnJvd3NlciBpcyBoaWRkZW4uXG4gICAgdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCA9IHdpZHRofDA7XG5cbiAgICBpZiAob2xkRlBXICE9IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGgpIHtcbiAgICAgICAgdGhpcy56b29tTWF4ID0gdGhpcy56b29tRXhwdCAqIE1hdGgubG9nKHRoaXMubWF4Vmlld1dpZHRoIC8gdGhpcy56b29tQmFzZSk7XG4gICAgICAgIHRoaXMuem9vbU1pbiA9IHRoaXMuem9vbUV4cHQgKiBNYXRoLmxvZyh0aGlzLmZlYXR1cmVQYW5lbFdpZHRoIC8gdGhpcy5tYXhQaXhlbHNQZXJCYXNlIC8gdGhpcy56b29tQmFzZSk7ICAgLy8gRklYTUUgaGFyZC1jb2RlZCBtaW5pbXVtLlxuICAgICAgICB0aGlzLnpvb21TbGlkZXJWYWx1ZSA9IHRoaXMuem9vbUV4cHQgKiBNYXRoLmxvZygodGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQgKyAxKSAvIHRoaXMuem9vbUJhc2UpO1xuXG4gICAgICAgIHZhciB2aWV3V2lkdGggPSB0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydDtcbiAgICAgICAgdmFyIG52ZSA9IHRoaXMudmlld1N0YXJ0ICsgKHZpZXdXaWR0aCAqIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGgpIC8gb2xkRlBXO1xuXG4gICAgICAgIHRoaXMudmlld0VuZCA9IG52ZTtcblxuICAgICAgICB2YXIgd2lkID0gdGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQgKyAxO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VxTWF4ID4gMCAmJiB0aGlzLnZpZXdFbmQgPiB0aGlzLmN1cnJlbnRTZXFNYXgpIHtcbiAgICAgICAgICAgIHRoaXMudmlld0VuZCA9IHRoaXMuY3VycmVudFNlcU1heDtcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXJ0ID0gdGhpcy52aWV3RW5kIC0gd2lkICsgMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52aWV3U3RhcnQgPCAxKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdTdGFydCA9IDE7XG4gICAgICAgICAgICB0aGlzLnZpZXdFbmQgPSB0aGlzLnZpZXdTdGFydCArIHdpZCAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBvc2l0aW9uUnVsZXIoKTtcblxuICAgICAgICBpZiAoIXNraXBSZWZyZXNoKSB7XG4gICAgICAgICAgICB0aGlzLnNwYWNlQ2hlY2soKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5vdGlmeUxvY2F0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZnVsbFNjcmVlbikge1xuICAgICAgICB0aGlzLnNldEZ1bGxTY3JlZW5IZWlnaHQoKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnNldEZ1bGxTY3JlZW5IZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVzdCA9IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0IC0gdGhpcy5icm93c2VySG9sZGVyLm9mZnNldEhlaWdodDtcbiAgICB0aGlzLmJyb3dzZXJIb2xkZXIuc3R5bGUubWF4SGVpZ2h0ID0gTWF0aC5tYXgoMzAwLCB3aW5kb3cuaW5uZXJIZWlnaHQgLSByZXN0IC0gMjApICsgJ3B4J1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5hZGRUaWVyID0gZnVuY3Rpb24oY29uZikge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgY29uZiA9IHNoYWxsb3dDb3B5KGNvbmYpO1xuICAgIGNvbmYuZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgIHJldHVybiB0aGlzLm1ha2VUaWVyKGNvbmYpLnRoZW4oZnVuY3Rpb24gKHRpZXIpIHtcbiAgICAgICAgdGhpc0IucmVmcmVzaFRpZXIodGllcik7XG4gICAgICAgIHRoaXNCLm1hcmtTZWxlY3RlZFRpZXJzKCk7XG4gICAgICAgIHRoaXNCLnBvc2l0aW9uUnVsZXIoKTtcbiAgICAgICAgdGhpc0Iubm90aWZ5VGllcihcImFkZGVkXCIsIHRpZXIpO1xuICAgICAgICByZXR1cm4gdGllcjtcbiAgICB9KVxufTtcblxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVUaWVyID0gZnVuY3Rpb24oY29uZiwgZm9yY2UpIHtcbiAgICB2YXIgdGFyZ2V0ID0gLTE7XG5cbiAgICBpZiAodHlwZW9mIGNvbmYuaW5kZXggIT09ICd1bmRlZmluZWQnICYmIGNvbmYuaW5kZXggPj0wICYmIGNvbmYuaW5kZXggPCB0aGlzLnRpZXJzLmxlbmd0aCkge1xuICAgICAgICB0YXJnZXQgPSBjb25mLmluZGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgdmFyIHRzID0gdGhpcy50aWVyc1t0aV0uZGFzU291cmNlO1xuXG4gICAgICAgICAgICBpZiAoc291cmNlc0FyZUVxdWFsKGNvbmYsIHRzKSkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRpOyBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0YXJnZXQgPCAwKSB7XG4gICAgICAgIHRocm93IFwiQ291bGRuJ3QgZmluZCByZXF1ZXN0ZWQgdGllclwiO1xuICAgIH1cblxuICAgIHZhciB0YXJnZXRUaWVyID0gdGhpcy50aWVyc1t0YXJnZXRdO1xuICAgIHRoaXMudGllcnMuc3BsaWNlKHRhcmdldCwgMSk7XG5cbiAgICB2YXIgbnN0ID0gW107XG4gICAgZm9yICh2YXIgc3RpID0gMDsgc3RpIDwgdGhpcy5zZWxlY3RlZFRpZXJzLmxlbmd0aDsgKytzdGkpIHtcbiAgICAgICAgdmFyIHN0ID0gdGhpcy5zZWxlY3RlZFRpZXJzW3N0aV07XG4gICAgICAgIGlmIChzdCA8IHRhcmdldCkge1xuICAgICAgICAgICAgbnN0LnB1c2goc3QpO1xuICAgICAgICB9IGVsc2UgaWYgKHN0ID4gdGFyZ2V0KSB7XG4gICAgICAgICAgICBuc3QucHVzaChzdCAtIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuc2VsZWN0ZWRUaWVycyA9IG5zdDtcbiAgICB0aGlzLm1hcmtTZWxlY3RlZFRpZXJzKCk7XG5cbiAgICB0YXJnZXRUaWVyLmRlc3Ryb3koKTtcbiAgICBpZiAodGhpcy5rbm93blNwYWNlKSB7XG4gICAgICAgIHRoaXMua25vd25TcGFjZS5mZWF0dXJlQ2FjaGVbdGFyZ2V0VGllcl0gPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMucmVvcmRlclRpZXJzKCk7XG4gICAgdGhpcy5ub3RpZnlUaWVyKFwicmVtb3ZlZFwiLCB0YXJnZXRUaWVyKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVtb3ZlQWxsVGllcnMgPSBmdW5jdGlvbigpIHtcblx0dmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbXTtcbiAgICB0aGlzLm1hcmtTZWxlY3RlZFRpZXJzKCk7XG4gICAgdGhpcy50aWVycy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRUaWVyKSB7XG4gICAgICAgIHRhcmdldFRpZXIuZGVzdHJveSgpO1xuICAgICAgICBpZiAodGhpc0Iua25vd25TcGFjZSkge1xuICAgICAgICAgICAgdGhpc0Iua25vd25TcGFjZS5mZWF0dXJlQ2FjaGVbdGFyZ2V0VGllcl0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy50aWVycy5sZW5ndGggPSAwO1xuICAgIHRoaXMucmVvcmRlclRpZXJzKCk7XG4gICAgdGhpcy5ub3RpZnlUaWVyKFwicmVtb3ZlZEFsbFwiLCBudWxsKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuZ2V0U2VxdWVuY2VTb3VyY2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fc2VxdWVuY2VTb3VyY2UgPT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5fc2VxdWVuY2VTb3VyY2UgPSB0aGlzLl9nZXRTZXF1ZW5jZVNvdXJjZSgpO1xuICAgIHJldHVybiB0aGlzLl9zZXF1ZW5jZVNvdXJjZTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuX2dldFNlcXVlbmNlU291cmNlID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgIGlmICh0aGlzLnRpZXJzW3RpXS5zZXF1ZW5jZVNvdXJjZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGllcnNbdGldLnNlcXVlbmNlU291cmNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXMuZGVmYXVsdFNvdXJjZXMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgIHZhciBzID0gdGhpcy5kZWZhdWx0U291cmNlc1tzaV07XG4gICAgICAgIGlmIChzLnByb3ZpZGVzX2VudHJ5cG9pbnRzIHx8IHMudGllcl90eXBlID09ICdzZXF1ZW5jZScgfHwgcy50d29CaXRVUkkgfHwgcy50d29CaXRCbG9iKSB7XG4gICAgICAgICAgICBpZiAocy50d29CaXRVUkkgfHwgcy50d29CaXRCbG9iKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUd29CaXRTZXF1ZW5jZVNvdXJjZShzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocy5lbnNlbWJsVVJJKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnNlbWJsU2VxdWVuY2VTb3VyY2Uocyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgREFTU2VxdWVuY2VTb3VyY2Uocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnNldExvY2F0aW9uID0gZnVuY3Rpb24obmV3Q2hyLCBuZXdNaW4sIG5ld01heCwgY2FsbGJhY2ssIHNvZnQsIG5vUmVmcmVzaCkge1xuICAgIGlmICh0eXBlb2YobmV3TWluKSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ21pbmltdW0gbXVzdCBiZSBhIG51bWJlciAoZ290ICcgKyBKU09OLnN0cmluZ2lmeShuZXdNaW4pICsgJyknKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZihuZXdNYXgpICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBFcnJvcignbWF4aW11bSBtdXN0IGJlIGEgbnVtYmVyIChnb3QgJyArIEpTT04uc3RyaW5naWZ5KG5ld01heCkgKyAnKScpO1xuICAgIH1cblxuICAgIGlmIChuZXdNaW4gPiBuZXdNYXgpIHtcbiAgICAgICAgdmFyIG9sZE5ld01pbiA9IG5ld01pbjtcbiAgICAgICAgbmV3TWluID0gbmV3TWF4O1xuICAgICAgICBuZXdNYXggPSBvbGROZXdNaW47XG4gICAgfSBlbHNlIGlmIChuZXdNaW4gPT09IG5ld01heCkge1xuICAgICAgICBuZXdNYXggKz0gMTtcbiAgICB9XG5cbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG5cbiAgICBpZiAoKCFuZXdDaHIgfHwgbmV3Q2hyID09IHRoaXMuY2hyKSAmJiB0aGlzLmN1cnJlbnRTZXFNYXggPiAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXRMb2NhdGlvbihudWxsLCBuZXdNaW4sIG5ld01heCwgbnVsbCwgY2FsbGJhY2ssIHNvZnQsIG5vUmVmcmVzaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNzID0gdGhpcy5nZXRTZXF1ZW5jZVNvdXJjZSgpO1xuICAgICAgICBpZiAoIXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ05lZWQgYSBzZXF1ZW5jZSBzb3VyY2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmaW5kQ2hyID0gbmV3Q2hyIHx8IHRoaXMuY2hyO1xuICAgICAgICBzcy5nZXRTZXFJbmZvKGZpbmRDaHIsIGZ1bmN0aW9uKHNpKSB7XG4gICAgICAgICAgICBpZiAoIXNpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsdENocjtcbiAgICAgICAgICAgICAgICBpZiAoZmluZENoci5pbmRleE9mKCdjaHInKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsdENociA9IGZpbmRDaHIuc3Vic3RyKDMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFsdENociA9ICdjaHInICsgZmluZENocjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3MuZ2V0U2VxSW5mbyhhbHRDaHIsIGZ1bmN0aW9uKHNpMikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNpMiAmJiBuZXdDaHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhcIkNvdWxkbid0IGZpbmQgc2VxdWVuY2UgJ1wiICsgbmV3Q2hyICsgXCInXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFzaTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5fc2V0TG9jYXRpb24obnVsbCwgbmV3TWluLCBuZXdNYXgsIG51bGwsIGNhbGxiYWNrLCBzb2Z0LCBub1JlZnJlc2gpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNCLl9zZXRMb2NhdGlvbihhbHRDaHIsIG5ld01pbiwgbmV3TWF4LCBzaTIsIGNhbGxiYWNrLCBzb2Z0LCBub1JlZnJlc2gpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5fc2V0TG9jYXRpb24obmV3Q2hyLCBuZXdNaW4sIG5ld01heCwgc2ksIGNhbGxiYWNrLCBzb2Z0LCBub1JlZnJlc2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLl9zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKG5ld0NociwgbmV3TWluLCBuZXdNYXgsIG5ld0NockluZm8sIGNhbGxiYWNrLCBzb2Z0LCBub1JlZnJlc2gpIHtcbiAgICB2YXIgY2hyQ2hhbmdlZCA9IGZhbHNlO1xuICAgIGlmIChuZXdDaHIpIHtcbiAgICAgICAgaWYgKG5ld0Noci5pbmRleE9mKCdjaHInKSA9PSAwKVxuICAgICAgICAgICAgbmV3Q2hyID0gbmV3Q2hyLnN1YnN0cmluZygzKTtcblxuICAgICAgICBpZiAodGhpcy5jaHIgIT0gbmV3Q2hyKVxuICAgICAgICAgICAgY2hyQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY2hyID0gbmV3Q2hyO1xuICAgICAgICB0aGlzLmN1cnJlbnRTZXFNYXggPSBuZXdDaHJJbmZvLmxlbmd0aDtcbiAgICB9XG5cbiAgICBuZXdNaW4gPSBwYXJzZUZsb2F0KG5ld01pbik7IG5ld01heD1wYXJzZUZsb2F0KG5ld01heCk7XG5cbiAgICB2YXIgbmV3V2lkdGggPSBNYXRoLm1heCgxMCwgbmV3TWF4LW5ld01pbisxKTtcblxuICAgIGlmICghc29mdCkge1xuICAgICAgICB2YXIgY3NtID0gdGhpcy5jdXJyZW50U2VxTWF4O1xuICAgICAgICBpZiAoY3NtIDw9IDApXG4gICAgICAgICAgICBjc20gPSAxMDAwMDAwMDAwMDAwO1xuICAgICAgICBpZiAobmV3TWluIDwgMSkge1xuICAgICAgICAgICAgbmV3TWluID0gMTsgbmV3TWF4ID0gbmV3TWluICsgbmV3V2lkdGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdNYXggPiBjc20pIHtcbiAgICAgICAgICAgIG5ld01heCA9IGNzbTtcbiAgICAgICAgICAgIG5ld01pbiA9IE1hdGgubWF4KDEsIG5ld01heCAtIG5ld1dpZHRoICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnZpZXdTdGFydCA9IG5ld01pbjtcbiAgICB0aGlzLnZpZXdFbmQgPSBuZXdNYXg7XG4gICAgdmFyIG5ld1NjYWxlID0gTWF0aC5tYXgodGhpcy5mZWF0dXJlUGFuZWxXaWR0aCB8fCB0aGlzLm9mZnNjcmVlbkluaXRXaWR0aCwgNTApIC8gKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KTtcbiAgICB2YXIgb2xkU2NhbGUgPSB0aGlzLnNjYWxlO1xuICAgIHZhciBzY2FsZUNoYW5nZWQgPSAoTWF0aC5hYnMobmV3U2NhbGUgLSBvbGRTY2FsZSkpID4gMC4wMDAwMDE7XG4gICAgdGhpcy5zY2FsZSA9IG5ld1NjYWxlO1xuXG4gICAgdmFyIG5ld1pTLCBvbGRaUztcbiAgICBvbGRaUyA9IHRoaXMuem9vbVNsaWRlclZhbHVlO1xuICAgIHRoaXMuem9vbVNsaWRlclZhbHVlID0gbmV3WlMgPSB0aGlzLnpvb21FeHB0ICogTWF0aC5sb2coKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMSkgLyB0aGlzLnpvb21CYXNlKTtcblxuICAgIGlmIChzY2FsZUNoYW5nZWQgfHwgY2hyQ2hhbmdlZCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGllcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMudGllcnNbaV0udmlld3BvcnRIb2xkZXIuc3R5bGUubGVmdCA9ICc1MDAwcHgnO1xuICAgICAgICAgICAgdGhpcy50aWVyc1tpXS5vdmVybGF5LnN0eWxlLmxlZnQgPSAnNTAwMHB4JztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbm9SZWZyZXNoKVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKG5vUmVmcmVzaCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2F2ZWRab29tKSB7XG4gICAgICAgICAgICBuZXdaUyAtPSB0aGlzLnpvb21NaW47XG4gICAgICAgICAgICBvbGRaUyAtPSB0aGlzLnpvb21NaW47XG4gICAgICAgICAgICB2YXIgZGlmVG9BY3RpdmUgPSBuZXdaUyAtIG9sZFpTO1xuICAgICAgICAgICAgdmFyIGRpZlRvU2F2ZWQgPSBuZXdaUyAtIHRoaXMuc2F2ZWRab29tO1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpZlRvQWN0aXZlKSA+IE1hdGguYWJzKGRpZlRvU2F2ZWQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1NuYXBab29taW5nID0gIXRoaXMuaXNTbmFwWm9vbWluZztcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVkWm9vbSA9IG9sZFpTO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc1NuYXBab29taW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNhdmVkWm9vbSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdmlld0NlbnRlciA9ICh0aGlzLnZpZXdTdGFydCArIHRoaXMudmlld0VuZCkvMjtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGllcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAodGhpcy52aWV3U3RhcnQgLSB0aGlzLnRpZXJzW2ldLm5vcmlnaW4pKnRoaXMuc2NhbGU7XG4gICAgICAgICAgICB0aGlzLnRpZXJzW2ldLnZpZXdwb3J0SG9sZGVyLnN0eWxlLmxlZnQgPSAnJyArICgoLW9mZnNldHwwKSAtIDEwMDApICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMudGllcnNbaV0uZHJhd092ZXJsYXkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubm90aWZ5TG9jYXRpb24oKTtcblxuICAgIHRoaXMuc3BhY2VDaGVjayhub1JlZnJlc2gpO1xuICAgIGlmICh0aGlzLmluc3RydW1lbnRBY3Rpdml0eSlcbiAgICAgICAgdGhpcy5hY3Rpdml0eVN0YXJ0VGltZSA9IERhdGUubm93KCl8MDtcbiAgICByZXR1cm4gY2FsbGJhY2soKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuc2V0Q2VudGVyTG9jYXRpb24gPSBmdW5jdGlvbihuZXdDaHIsIG5ld0NlbnRlckxvYykge1xuICAgIHZhciBoYWxmV2lkdGggPSAodGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQpLzIsXG4gICAgbmV3TWluID0gbmV3Q2VudGVyTG9jIC0gaGFsZldpZHRoLFxuICAgIG5ld01heCA9IG5ld0NlbnRlckxvYyArIGhhbGZXaWR0aDtcbiAgICB0aGlzLnNldExvY2F0aW9uKG5ld0NociwgbmV3TWluLCBuZXdNYXgpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5waW5nQWN0aXZpdHkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuaW5zdHJ1bWVudEFjdGl2aXR5IHx8ICF0aGlzLmFjdGl2aXR5U3RhcnRUaW1lKVxuICAgICAgICByZXR1cm47XG5cbiAgICB2YXIgYWN0aXZpdHkgPSAwO1xuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICBpZiAodGhpcy50aWVyc1t0aV0ubG9hZGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJylcbiAgICAgICAgICAgICsrYWN0aXZpdHk7XG4gICAgfVxuXG4gICAgaWYgKGFjdGl2aXR5ID09IDApIHtcbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCl8MDtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvYWRpbmcgdG9vayAnICsgKG5vdy10aGlzLmFjdGl2aXR5U3RhcnRUaW1lKSArICdtcycpO1xuICAgICAgICB0aGlzLmFjdGl2aXR5U3RhcnRUaW1lID0gbnVsbDtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmFkZEluaXRMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICB0aGlzLmluaXRMaXN0ZW5lcnMucHVzaChoYW5kbGVyKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuYWRkRmVhdHVyZUxpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlciwgb3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHRoaXMuZmVhdHVyZUxpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVGZWF0dXJlTGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyLCBvcHRzKSB7XG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLmZlYXR1cmVMaXN0ZW5lcnMsIGhhbmRsZXIpO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLmZlYXR1cmVMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5ub3RpZnlGZWF0dXJlID0gZnVuY3Rpb24oZXYsIGZlYXR1cmUsIGhpdCwgdGllcikge1xuICBmb3IgKHZhciBmbGkgPSAwOyBmbGkgPCB0aGlzLmZlYXR1cmVMaXN0ZW5lcnMubGVuZ3RoOyArK2ZsaSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlTGlzdGVuZXJzW2ZsaV0oZXYsIGZlYXR1cmUsIGhpdCwgdGllcikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGV4LnN0YWNrKTtcbiAgICAgIH1cbiAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5hZGRGZWF0dXJlSG92ZXJMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIsIG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICB0aGlzLmZlYXR1cmVIb3Zlckxpc3RlbmVycy5wdXNoKE9iamVjdC5hc3NpZ24oe2hhbmRsZXI6IGhhbmRsZXJ9LCBvcHRzKSk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZUZlYXR1cmVIb3Zlckxpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlciwgb3B0cykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5mZWF0dXJlSG92ZXJMaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHRoaXMuZmVhdHVyZUhvdmVyTGlzdGVuZXJzW2ldLmhhbmRsZXIgPT0gaGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlSG92ZXJMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm5vdGlmeUltbWVkaWF0ZUZlYXR1cmVIb3ZlciA9IGZ1bmN0aW9uKGV2LCBmZWF0dXJlLCBoaXQsIHRpZXIpIHtcbiAgICBmb3IgKHZhciBmbGkgPSAwOyBmbGkgPCB0aGlzLmZlYXR1cmVIb3Zlckxpc3RlbmVycy5sZW5ndGg7ICsrZmxpKSB7XG4gICAgICAgIGlmICh0aGlzLmZlYXR1cmVIb3Zlckxpc3RlbmVyc1tmbGldLmltbWVkaWF0ZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVIb3Zlckxpc3RlbmVyc1tmbGldLmhhbmRsZXIoZXYsIGZlYXR1cmUsIGhpdCwgdGllcik7XG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4LnN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubm90aWZ5RGVmZXJyZWRGZWF0dXJlSG92ZXIgPSBmdW5jdGlvbihldiwgZmVhdHVyZSwgaGl0LCB0aWVyKSB7XG4gICAgZm9yICh2YXIgZmxpID0gMDsgZmxpIDwgdGhpcy5mZWF0dXJlSG92ZXJMaXN0ZW5lcnMubGVuZ3RoOyArK2ZsaSkge1xuICAgICAgICBpZiAoIXRoaXMuZmVhdHVyZUhvdmVyTGlzdGVuZXJzW2ZsaV0uaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZUhvdmVyTGlzdGVuZXJzW2ZsaV0uaGFuZGxlcihldiwgZmVhdHVyZSwgaGl0LCB0aWVyKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5hZGRWaWV3TGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyLCBvcHRzKSB7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdGhpcy52aWV3TGlzdGVuZXJzLnB1c2goaGFuZGxlcik7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZVZpZXdMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIsIG9wdHMpIHtcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMudmlld0xpc3RlbmVycywgaGFuZGxlcik7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMudmlld0xpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm5vdGlmeUxvY2F0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG52cyA9IE1hdGgubWF4KDEsIHRoaXMudmlld1N0YXJ0fDApO1xuICAgIHZhciBudmUgPSB0aGlzLnZpZXdFbmR8MDtcbiAgICBpZiAodGhpcy5jdXJyZW50U2VxTWF4ID4gMCAmJiBudmUgPiB0aGlzLmN1cnJlbnRTZXFNYXgpXG4gICAgICAgIG52ZSA9IHRoaXMuY3VycmVudFNlcU1heDtcblxuICAgIGZvciAodmFyIGxsaSA9IDA7IGxsaSA8IHRoaXMudmlld0xpc3RlbmVycy5sZW5ndGg7ICsrbGxpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdMaXN0ZW5lcnNbbGxpXShcbiAgICAgICAgICAgICAgICB0aGlzLmNocixcbiAgICAgICAgICAgICAgICBudnMsXG4gICAgICAgICAgICAgICAgbnZlLFxuICAgICAgICAgICAgICAgIHRoaXMuem9vbVNsaWRlclZhbHVlLFxuICAgICAgICAgICAgICAgIHtjdXJyZW50OiB0aGlzLnpvb21TbGlkZXJWYWx1ZSxcbiAgICAgICAgICAgICAgICAgYWx0ZXJuYXRlOiAodGhpcy5zYXZlZFpvb20rdGhpcy56b29tTWluKSB8fCB0aGlzLnpvb21NaW4sXG4gICAgICAgICAgICAgICAgIGlzU25hcFpvb21pbmc6IHRoaXMuaXNTbmFwWm9vbWluZyxcbiAgICAgICAgICAgICAgICAgbWluOiB0aGlzLnpvb21NaW4sXG4gICAgICAgICAgICAgICAgIG1heDogdGhpcy56b29tTWF4fSxcbiAgICAgICAgICAgICAgICAgdGhpcy52aWV3U3RhcnQsXG4gICAgICAgICAgICAgICAgIHRoaXMudmlld0VuZCk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleC5zdGFjayk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmFkZFRpZXJMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICB0aGlzLnRpZXJMaXN0ZW5lcnMucHVzaChoYW5kbGVyKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVtb3ZlVGllckxpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy50aWVyTGlzdGVuZXJzLCBoYW5kbGVyKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgdGhpcy50aWVyTGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubm90aWZ5VGllciA9IGZ1bmN0aW9uKHN0YXR1cywgdGllcikge1xuICAgIGZvciAodmFyIHRsaSA9IDA7IHRsaSA8IHRoaXMudGllckxpc3RlbmVycy5sZW5ndGg7ICsrdGxpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnRpZXJMaXN0ZW5lcnNbdGxpXShzdGF0dXMsIHRpZXIpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5hZGRSZWdpb25TZWxlY3RMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICB0aGlzLnJlZ2lvblNlbGVjdExpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVSZWdpb25TZWxlY3RMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMucmVnaW9uU2VsZWN0TGlzdGVuZXJzLCBoYW5kbGVyKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgdGhpcy5yZWdpb25TZWxlY3RMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5ub3RpZnlSZWdpb25TZWxlY3QgPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4KSB7XG4gICAgZm9yICh2YXIgcmxpID0gMDsgcmxpIDwgdGhpcy5yZWdpb25TZWxlY3RMaXN0ZW5lcnMubGVuZ3RoOyArK3JsaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5yZWdpb25TZWxlY3RMaXN0ZW5lcnNbcmxpXShjaHIsIG1pbiwgbWF4KTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4LnN0YWNrKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5Ccm93c2VyLnByb3RvdHlwZS5oaWdobGlnaHRSZWdpb24gPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4KSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIGlmIChjaHIgPT0gdGhpcy5jaHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hpZ2hsaWdodFJlZ2lvbihjaHIsIG1pbiwgbWF4KTtcbiAgICB9XG5cbiAgICB2YXIgc3MgPSB0aGlzLmdldFNlcXVlbmNlU291cmNlKCk7XG4gICAgaWYgKCFzcykge1xuICAgICAgICB0aHJvdyAnTmVlZCBhIHNlcXVlbmNlIHNvdXJjZSc7XG4gICAgfVxuXG4gICAgc3MuZ2V0U2VxSW5mbyhjaHIsIGZ1bmN0aW9uKHNpKSB7XG4gICAgICAgIGlmICghc2kpIHtcbiAgICAgICAgICAgIHZhciBhbHRDaHI7XG4gICAgICAgICAgICBpZiAoY2hyLmluZGV4T2YoJ2NocicpID09IDApIHtcbiAgICAgICAgICAgICAgICBhbHRDaHIgPSBjaHIuc3Vic3RyKDMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbHRDaHIgPSAnY2hyJyArIGNocjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNzLmdldFNlcUluZm8oYWx0Q2hyLCBmdW5jdGlvbihzaTIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNpMikge1xuICAgICAgICAgICAgICAgICAgICAvLyBGYWlsIHNpbGVudGx5LlxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5faGlnaGxpZ2h0UmVnaW9uKGFsdENociwgbWluLCBtYXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNCLl9oaWdobGlnaHRSZWdpb24oY2hyLCBtaW4sIG1heCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuX2hpZ2hsaWdodFJlZ2lvbiA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgpIHtcbiAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpcy5oaWdobGlnaHRzLmxlbmd0aDsgKytoaSkge1xuICAgICAgICB2YXIgaCA9IHRoaXMuaGlnaGxpZ2h0c1toaV07XG4gICAgICAgIGlmIChoLmNociA9PSBjaHIgJiYgaC5taW4gPT0gbWluICYmIGgubWF4ID09IG1heClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmhpZ2hsaWdodHMucHVzaChuZXcgUmVnaW9uKGNociwgbWluLCBtYXgpKTtcbiAgICB2YXIgdmlzU3RhcnQgPSB0aGlzLnZpZXdTdGFydCAtICgxMDAwL3RoaXMuc2NhbGUpO1xuICAgIHZhciB2aXNFbmQgPSB0aGlzLnZpZXdFbmQgKyAoMTAwMC90aGlzLnNjYWxlKTtcbiAgICBpZiAoKGNociA9PSB0aGlzLmNociB8fCBjaHIgPT0gKCdjaHInK3RoaXMuY2hyKSkgJiYgbWluIDwgdmlzRW5kICYmIG1heCA+IHZpc1N0YXJ0KSB7XG4gICAgICAgIHRoaXMuZHJhd092ZXJsYXlzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5ub3RpZnlMb2NhdGlvbigpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5jbGVhckhpZ2hsaWdodHMgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmhpZ2hsaWdodHMgPSBbXTtcbiAgICB0aGlzLmRyYXdPdmVybGF5cygpO1xuICAgIHRoaXMubm90aWZ5TG9jYXRpb24oKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuZHJhd092ZXJsYXlzID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgIHRoaXMudGllcnNbdGldLmRyYXdPdmVybGF5KCk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5mZWF0dXJlc0luUmVnaW9uID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCkge1xuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgIGlmIChjaHIgIT09IHRoaXMuY2hyKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIGZsID0gdGhpcy50aWVyc1t0aV0uY3VycmVudEZlYXR1cmVzIHx8IFtdO1xuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmwubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICB2YXIgZiA9IGZsW2ZpXTtcbiAgICAgICAgICAgIGlmIChmLm1pbiA8PSBtYXggJiYgZi5tYXggPj0gbWluKSB7XG4gICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmVhdHVyZXM7XG59XG5cblxuQnJvd3Nlci5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRUaWVyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRUaWVycy5sZW5ndGggPiAwKVxuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFRpZXJzWzBdO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIC0xO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5zZXRTZWxlY3RlZFRpZXIgPSBmdW5jdGlvbih0KSB7XG4gICAgaWYgKHQgPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbdF07XG4gICAgfVxuICAgIHRoaXMubWFya1NlbGVjdGVkVGllcnMoKTtcbiAgICB0aGlzLm5vdGlmeVRpZXJTZWxlY3Rpb24oKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubWFya1NlbGVjdGVkVGllcnMgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIGJ1dHRvbiA9IHRoaXMudGllcnNbdGldLm5hbWVCdXR0b247XG5cbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUaWVycy5pbmRleE9mKHRpKSA+PSAwKSB7XG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRUaWVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBicm93c2VyTWlkID0gdGhpcy5icm93c2VySG9sZGVyLm9mZnNldFRvcCArIHRoaXMuYnJvd3NlckhvbGRlci5vZmZzZXRIZWlnaHQvMjtcbiAgICAgICAgaWYgKGJyb3dzZXJNaWQgPiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCAmJiAoYnJvd3Nlck1pZCArIDEwMCkgPCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArIHdpbmRvdy5pbm5lckhlaWdodClcbiAgICAgICAgICAgIHRoaXMuYnJvd3NlckhvbGRlci5mb2N1cygpO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuYWRkVGllclNlbGVjdGlvbkxpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgIHRoaXMudGllclNlbGVjdGlvbkxpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVUaWVyU2VsZWN0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLnRpZXJTZWxlY3Rpb25MaXN0ZW5lcnMsIGhhbmRsZXIpO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLnRpZXJTZWxlY3Rpb25MaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5ub3RpZnlUaWVyU2VsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgZmxpID0gMDsgZmxpIDwgdGhpcy50aWVyU2VsZWN0aW9uTGlzdGVuZXJzLmxlbmd0aDsgKytmbGkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMudGllclNlbGVjdGlvbkxpc3RlbmVyc1tmbGldKHRoaXMuc2VsZWN0ZWRUaWVycyk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleC5zdGFjayk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuYWRkVGllclNlbGVjdGlvbldyYXBMaXN0ZW5lciA9IGZ1bmN0aW9uKGYpIHtcbiAgICB0aGlzLnRpZXJTZWxlY3Rpb25XcmFwTGlzdGVuZXJzLnB1c2goZik7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZVRpZXJTZWxlY3Rpb25XcmFwTGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLnRpZXJTZWxlY3Rpb25XcmFwTGlzdGVuZXJzLCBoYW5kbGVyKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgdGhpcy50aWVyU2VsZWN0aW9uV3JhcExpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm5vdGlmeVRpZXJTZWxlY3Rpb25XcmFwID0gZnVuY3Rpb24oaSkge1xuICAgIGZvciAodmFyIGZsaSA9IDA7IGZsaSA8IHRoaXMudGllclNlbGVjdGlvbldyYXBMaXN0ZW5lcnMubGVuZ3RoOyArK2ZsaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy50aWVyU2VsZWN0aW9uV3JhcExpc3RlbmVyc1tmbGldKGkpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbkJyb3dzZXIucHJvdG90eXBlLnBvc2l0aW9uUnVsZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGlzcGxheSA9ICdub25lJztcbiAgICB2YXIgbGVmdCA9ICcnO1xuICAgIHZhciByaWdodCA9ICcnO1xuXG4gICAgaWYgKHRoaXMucnVsZXJMb2NhdGlvbiA9PSAnY2VudGVyJykge1xuICAgICAgICBkaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgbGVmdCA9ICcnICsgKCh0aGlzLmZlYXR1cmVQYW5lbFdpZHRoLzIpfDApICsgJ3B4JztcbiAgICB9IGVsc2UgaWYgKHRoaXMucnVsZXJMb2NhdGlvbiA9PSAnbGVmdCcpIHtcbiAgICAgICAgZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGxlZnQgPSAnMHB4JztcbiAgICB9IGVsc2UgaWYgKHRoaXMucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgIGRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICByaWdodCA9ICcwcHgnXG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGxheSA9ICdub25lJztcbiAgICB9XG5cbiAgICB0aGlzLnJ1bGVyLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuICAgIHRoaXMucnVsZXIuc3R5bGUubGVmdCA9IGxlZnQ7XG4gICAgdGhpcy5ydWxlci5zdHlsZS5yaWdodCA9IHJpZ2h0O1xuXG4gICAgaWYodGhpcy5zaW5nbGVCYXNlSGlnaGxpZ2h0KSB7XG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB0aGlzLnJ1bGVyMi5zdHlsZS5ib3JkZXJXaWR0aCA9ICcxcHgnO1xuICAgICAgICBpZiAodGhpcy5zY2FsZSA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLndpZHRoID0gJzBweCc7XG4gICAgICAgICAgICB0aGlzLnJ1bGVyMi5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gJzBweCdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLndpZHRoID0gdGhpcy5zY2FsZSArICdweCc7XG4gICAgICAgICAgICB0aGlzLnJ1bGVyMi5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gJzFweCdcbiAgICAgICAgfVxuICAgICAgICAvLyBQb3NpdGlvbiBhY2NvbXBhbnlpbmcgc2luZ2xlIGJhc2UgbG9jYXRpb24gdGV4dFxuICAgICAgICB0aGlzLmxvY1NpbmdsZUJhc2Uuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgdmFyIGNlbnRyZU9mZnNldCA9IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGgvMiAtIHRoaXMubG9jU2luZ2xlQmFzZS5vZmZzZXRXaWR0aC8yICsgdGhpcy5ydWxlcjIub2Zmc2V0V2lkdGgvMjtcbiAgICAgICAgdGhpcy5sb2NTaW5nbGVCYXNlLnN0eWxlLmxlZnQgPSAnJyArIChjZW50cmVPZmZzZXR8MCkgKyAncHgnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9jU2luZ2xlQmFzZS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLndpZHRoID0gJzFweCc7XG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLmJvcmRlcldpZHRoID0gJzBweCc7XG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLmRpc3BsYXkgPSB0aGlzLnJ1bGVyTG9jYXRpb24gPT0gJ2NlbnRlcicgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgIH1cblxuICAgIHRoaXMucnVsZXIyLnN0eWxlLmxlZnQgPSAnJyArICgodGhpcy5mZWF0dXJlUGFuZWxXaWR0aC8yKXwwKSArICdweCc7XG5cbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIHRpZXIgPSB0aGlzLnRpZXJzW3RpXTtcbiAgICAgICAgdmFyIHEgPSB0aWVyLnF1YW50T3ZlcmxheTtcblxuICAgICAgICB2YXIgcXVhbnQ7XG4gICAgICAgIGlmICh0aWVyLnN1YnRpZXJzICYmIHRpZXIuc3VidGllcnMubGVuZ3RoID4gMClcbiAgICAgICAgICAgIHF1YW50ID0gdGllci5zdWJ0aWVyc1swXS5xdWFudDtcblxuICAgICAgICBpZiAocSkge1xuICAgICAgICAgICAgcS5zdHlsZS5kaXNwbGF5ID0gcXVhbnQgPyBkaXNwbGF5IDogJ25vbmUnO1xuICAgICAgICAgICAgcS5zdHlsZS5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgIHEuc3R5bGUucmlnaHQgPSByaWdodDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuZmVhdHVyZURvdWJsZUNsaWNrID0gZnVuY3Rpb24oaGl0LCByeCwgcnkpIHtcbiAgICBpZiAoIWhpdCB8fCBoaXQubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybjtcblxuICAgIHZhciBmID0gaGl0W2hpdC5sZW5ndGggLSAxXTtcblxuICAgIGlmICghZi5taW4gfHwgIWYubWF4KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZnN0YXJ0ID0gKCgoZi5taW58MCkgLSAodGhpcy52aWV3U3RhcnR8MCkpICogdGhpcy5zY2FsZSk7XG4gICAgdmFyIGZ3aWR0aCA9ICgoKGYubWF4IC0gZi5taW4pICsgMSkgKiB0aGlzLnNjYWxlKTtcblxuICAgIHZhciBuZXdNaWQgPSAoKChmLm1pbnwwKSArIChmLm1heHwwKSkpLzI7XG4gICAgaWYgKGZ3aWR0aCA+IDEwKSB7XG4gICAgICAgIHZhciBmcmFjID0gKDEuMCAqIChyeCAtIGZzdGFydCkpIC8gZndpZHRoO1xuICAgICAgICBpZiAoZnJhYyA8IDAuMykge1xuICAgICAgICAgICAgbmV3TWlkID0gKGYubWlufDApO1xuICAgICAgICB9IGVsc2UgIGlmIChmcmFjID4gMC43KSB7XG4gICAgICAgICAgICBuZXdNaWQgPSAoZi5tYXh8MCkgKyAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHdpZHRoID0gdGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQ7XG4gICAgdGhpcy5zZXRMb2NhdGlvbihudWxsLCBuZXdNaWQgLSAod2lkdGgvMiksIG5ld01pZCArICh3aWR0aC8yKSk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnpvb21Gb3JTY2FsZSA9IGZ1bmN0aW9uKHNjYWxlKSB7XG4gICAgdmFyIHNzU2NhbGU7XG4gICAgaWYgKHNjYWxlID4gdGhpcy5oaWdoWm9vbVRocmVzaG9sZCkge1xuICAgICAgICBzc1NjYWxlID0gJ2hpZ2gnO1xuICAgIH0gZWxzZSBpZiAoc2NhbGUgPiB0aGlzLm1lZGl1bVpvb21UaHJlc2hvbGQpIHtcbiAgICAgICAgc3NTY2FsZSA9ICdtZWRpdW0nO1xuICAgIH0gZWxzZSAge1xuICAgICAgICBzc1NjYWxlID0gJ2xvdyc7XG4gICAgfVxuICAgIHJldHVybiBzc1NjYWxlO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS56b29tRm9yQ3VycmVudFNjYWxlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuem9vbUZvclNjYWxlKHRoaXMuc2NhbGUpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS51cGRhdGVIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGllclRvdGFsID0gMDtcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpXG4gICAgICAgIHRpZXJUb3RhbCArPSAodGhpcy50aWVyc1t0aV0uY3VycmVudEhlaWdodCB8fCAzMCk7XG4gICAgdGhpcy5ydWxlci5zdHlsZS5oZWlnaHQgPSAnJyArIHRpZXJUb3RhbCArICdweCc7XG4gICAgdGhpcy5ydWxlcjIuc3R5bGUuaGVpZ2h0ID0gJycgKyB0aWVyVG90YWwgKyAncHgnO1xuICAgIHRoaXMuYnJvd3NlckhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLmJyb3dzZXJIb2xkZXIuc3R5bGUuZGlzcGxheSA9ICctd2Via2l0LWZsZXgnO1xuICAgIHRoaXMuYnJvd3NlckhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIC8vIHRoaXMuc3ZnSG9sZGVyLnN0eWxlLm1heEhlaWdodCA9ICcnICsgTWF0aC5tYXgodGllclRvdGFsLCA1MDApICsgJ3B4Jztcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuc2Nyb2xsQXJyb3dLZXkgPSBmdW5jdGlvbihldiwgZGlyKSB7XG4gICAgaWYgKHRoaXMucmV2ZXJzZUtleVNjcm9sbGluZylcbiAgICAgICAgZGlyID0gLWRpcjtcblxuICAgIGlmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgdmFyIGZlZGdlID0gZmFsc2U7XG4gICAgICAgIGlmKGV2LnNoaWZ0S2V5KXtcbiAgICAgICAgICAgIGZlZGdlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGVhcChkaXIsIGZlZGdlKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2NhbGUgPiAxKSB7XG4gICAgICAgIC8vIHBlci1iYXNlIHNjcm9sbGluZyBtb2RlLCB0cmllcyB0byBwZXJmZWN0bHkgY2VudGVyLlxuICAgICAgICB2YXIgbWlkID0gKHRoaXMudmlld1N0YXJ0ICsgdGhpcy52aWV3RW5kKS8yXG4gICAgICAgIHZhciBlcnIgPSBtaWQgLSBNYXRoLnJvdW5kKG1pZCk7XG4gICAgICAgIHZhciBuID0gMTtcbiAgICAgICAgaWYgKGV2LnNoaWZ0S2V5KVxuICAgICAgICAgICAgbiAqPSAxMDtcbiAgICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgICAgIG4gPSAtbjtcbiAgICAgICAgICAgIG4gLT0gZXJyO1xuICAgICAgICAgICAgaWYgKGVyciA+IDApXG4gICAgICAgICAgICAgICAgbiArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbiAtPSBlcnI7XG4gICAgICAgICAgICBpZiAoZXJyIDwgMClcbiAgICAgICAgICAgICAgICBuIC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRMb2NhdGlvbihudWxsLCB0aGlzLnZpZXdTdGFydCArIG4sIHRoaXMudmlld0VuZCArIG4pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubW92ZShldi5zaGlmdEtleSA/IDEwMCpkaXIgOiAyNSpkaXIpO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubGVhcCA9IGZ1bmN0aW9uKGRpciwgZmVkZ2UpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHZhciBwb3M9KCh0aGlzQi52aWV3U3RhcnQgKyB0aGlzQi52aWV3RW5kICsgMSkvMil8MDtcbiAgICBpZiAoZGlyID4gMCAmJiB0aGlzQi52aWV3U3RhcnQgPD0gMSkge1xuICAgICAgICBwb3MgLT0gMTAwMDAwMDAwO1xuICAgIH0gZWxzZSBpZiAoZGlyIDwgMCAmJiB0aGlzQi52aWV3RW5kID49IHRoaXNCLmN1cnJlbnRTZXFNYXgpIHtcbiAgICAgICAgcG9zICs9IDEwMDAwMDAwMDtcbiAgICB9XG5cbiAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICBpZiAoc3QgPCAwKSByZXR1cm47XG4gICAgdmFyIHRpZXIgPSB0aGlzQi50aWVyc1tzdF07XG5cbiAgICBpZiAodGllciAmJiAoKHRpZXIuZmVhdHVyZVNvdXJjZSAmJiB0aGlzLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGllci5mZWF0dXJlU291cmNlLCAncXVhbnRMZWFwJykgJiYgdHlwZW9mKHRpZXIucXVhbnRMZWFwVGhyZXNob2xkKSA9PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICAgfHwgKHRpZXIuZmVhdHVyZVNvdXJjZSAmJiB0aGlzLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGllci5mZWF0dXJlU291cmNlLCAnbGVhcCcpKSkpIHtcbiAgICAgICAgdGllci5maW5kTmV4dEZlYXR1cmUoXG4gICAgICAgICAgICAgIHRoaXNCLmNocixcbiAgICAgICAgICAgICAgcG9zLFxuICAgICAgICAgICAgICAtZGlyLFxuICAgICAgICAgICAgICBmZWRnZSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24obnh0KSB7XG4gICAgICAgICAgICAgICAgICBpZiAobnh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIG5taW4gPSBueHQubWluO1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBubWF4ID0gbnh0Lm1heDtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVkZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChubWluPnBvcysxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWF4PW5taW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWF4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWluPW5tYXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm1heDxwb3MtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWF4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5taW49bm1heDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWF4PW5taW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB2YXIgd2lkID0gdGhpc0Iudmlld0VuZCAtIHRoaXNCLnZpZXdTdGFydCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgaWYocGFyc2VGbG9hdCh3aWQvMikgPT0gcGFyc2VJbnQod2lkLzIpKXt3aWQtLTt9XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1N0YXJ0ID0gKG5taW4gKyBubWF4IC0gd2lkKS8yICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RW5kID0gbmV3U3RhcnQgKyB3aWQgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MyPXBvcztcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZXRMb2NhdGlvbihueHQuc2VnbWVudCwgbmV3U3RhcnQsIG5ld0VuZCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdubyBuZXh0IGZlYXR1cmUnKTsgLy8gRklYTUUgYmV0dGVyIHJlcG9ydGluZyB3b3VsZCBiZSBuaWNlIVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1vdmUoMTAwKmRpcik7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5uYW1lRm9yQ29vcmRTeXN0ZW0gPSBmdW5jdGlvbihjcykge1xuICAgIHZhciBwcmltYXJ5ID0gbnVsbCwgdWNzYyA9IG51bGw7XG4gICAgaWYgKHRoaXMuYXNzZW1ibHlOYW1lUHJpbWFyeSkge1xuICAgICAgICBwcmltYXJ5ID0gJycgKyBjcy5hdXRoO1xuICAgICAgICBpZiAodHlwZW9mKGNzLnZlcnNpb24pICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHByaW1hcnkgKz0gY3MudmVyc2lvbjtcbiAgICB9XG4gICAgaWYgKHRoaXMuYXNzZW1ibHlOYW1lVWNzYykge1xuICAgICAgICB1Y3NjID0gY3MudWNzY05hbWU7XG4gICAgfVxuICAgIGlmIChwcmltYXJ5ICE9IG51bGwgJiYgdWNzYyAhPSBudWxsKVxuICAgICAgICByZXR1cm4gcHJpbWFyeSArICcvJyArIHVjc2M7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gcHJpbWFyeSB8fCB1Y3NjIHx8ICd1bmtub3duJztcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubWFrZUxvYWRlciA9IGZ1bmN0aW9uKHNpemUpIHtcbiAgICBzaXplID0gc2l6ZSB8fCAxNjtcbiAgICB2YXIgcmV0aW5hID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxO1xuICAgIGlmIChzaXplIDwgMjApIHtcbiAgICAgICAgcmV0dXJuIG1ha2VFbGVtZW50KCdpbWcnLCBudWxsLCB7c3JjOiB0aGlzLnJlc29sdmVVUkwoJyQkaW1nL3NwaW5uZXJfJyArIChyZXRpbmEgPyAxNiA6IDMyKSArICcuZ2lmJyksIHdpZHRoOiAnMTYnLCBoZWlnaHQ6ICcxNid9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbWFrZUVsZW1lbnQoJ2ltZycsIG51bGwsIHtzcmM6IHRoaXMucmVzb2x2ZVVSTCgnJCRpbWcvc3Bpbm5lcl8nICsgKHJldGluYSA/IDI0IDogNDgpICsgJy5naWYnKSwgd2lkdGg6ICcyNCcsIGhlaWdodDogJzI0J30pO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuY2FuRmV0Y2hQbGFpbkhUVFAgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKCF0aGlzLl9wbGFpbkhUVFBQcm9taXNlKSB7XG4gICAgICAgIHZhciB3b3JrZXIgPSB0aGlzLmdldFdvcmtlcigpO1xuICAgICAgICBpZiAod29ya2VyKSB7XG4gICAgICAgICAgICB0aGlzLl9wbGFpbkhUVFBQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgd29ya2VyLnBvc3RDb21tYW5kKFxuICAgICAgICAgICAgICAgICAgICB7Y29tbWFuZDogJ3RleHR4aHInLFxuICAgICAgICAgICAgICAgICAgICAgdXJpOiBzZWxmLmh0dHBDYW5hcnlVUkx9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXN1bHQsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgdGhpcy5fcGxhaW5IVFRQUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHRleHRYSFIoXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaHR0cENhbmFyeVVSTCxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzdWx0LCBlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge3RpbWVvdXQ6IDIwMDB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9wbGFpbkhUVFBQcm9taXNlO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5nZXRXb3JrZXIgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMudXNlRmV0Y2hXb3JrZXJzIHx8ICF0aGlzLmZldGNoV29ya2VycyB8fCB0aGlzLmZldGNoV29ya2Vycy5sZW5ndGg9PTApXG4gICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgaWYgKHRoaXMubmV4dFdvcmtlciA+PSB0aGlzLmZldGNoV29ya2Vycy5sZW5ndGgpXG4gICAgICAgIHRoaXMubmV4dFdvcmtlciA9IDA7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hXb3JrZXJzW3RoaXMubmV4dFdvcmtlcisrXTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVnaXN0ZXJSZXNvbHZlciA9IGZ1bmN0aW9uKHJlc29sdmVyKSB7XG4gICAgdmFyIGlkID0gJ3JlcycgKyAoKyt0aGlzLnJlc29sdmVyU2VlZCk7XG4gICAgdGhpcy5yZXNvbHZlcnNbaWRdID0gcmVzb2x2ZXI7XG4gICAgcmV0dXJuIGlkO1xufVxuXG5mdW5jdGlvbiBGZXRjaFdvcmtlcihicm93c2VyLCB3b3JrZXIpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMudGFnU2VlZCA9IDA7XG4gICAgdGhpcy5jYWxsYmFja3MgPSB7fTtcbiAgICB0aGlzLmJyb3dzZXIgPSBicm93c2VyO1xuICAgIHRoaXMud29ya2VyID0gd29ya2VyO1xuXG4gICAgdGhpcy53b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBldi5kYXRhO1xuXG4gICAgICAgIGlmICghZGF0YS5jbWQpIHtcbiAgICAgICAgICAgIHZhciBjYiA9IHRoaXNCLmNhbGxiYWNrc1tkYXRhLnRhZ107XG4gICAgICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICAgICAgICBjYihkYXRhLnJlc3VsdCwgZGF0YS5lcnJvcik7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNCLmNhbGxiYWNrc1tkYXRhLnRhZ107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jbWQgPT0gJ3Jlc29sdmUnKSB7XG4gICAgICAgICAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzQi5icm93c2VyLnJlc29sdmVyc1tkYXRhLnJlc29sdmVyXTtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlcikge1xuICAgICAgICAgICAgICAgIHJlc29sdmVyKGRhdGEudXJsKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi53b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiBkYXRhLnRhZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLndvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWc6IGRhdGEudGFnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyOiBlcnIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHJlc29sdmVyICcgKyBkYXRhLnJlc29sdmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdCYWQgd29ya2VyIGNhbGxiYWNrICcgKyBkYXRhLmNtZCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBtYWtlRmV0Y2hXb3JrZXIoYnJvd3Nlcikge1xuICAgIHZhciB3dXJsID0gYnJvd3Nlci5yZXNvbHZlVVJMKGJyb3dzZXIud29ya2VyUGF0aCk7XG4gICAgaWYgKHd1cmwuaW5kZXhPZignLy8nKSA9PSAwKSB7XG4gICAgICAgIHZhciBwcm90byA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDtcbiAgICAgICAgaWYgKHByb3RvID09ICdodHRwczonKVxuICAgICAgICAgICAgd3VybCA9ICdodHRwczonICsgd3VybDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgd3VybCA9ICdodHRwOicgKyB3dXJsO1xuICAgIH1cblxuICAgIHZhciB3c2NyaXB0ID0gJ2ltcG9ydFNjcmlwdHMoXCInICsgd3VybCArICc/dmVyc2lvbj0nICsgVkVSU0lPTiArICdcIik7JztcbiAgICB2YXIgd2Jsb2IgPSBuZXcgQmxvYihbd3NjcmlwdF0sIHt0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCd9KTtcblxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihVUkwuY3JlYXRlT2JqZWN0VVJMKHdibG9iKSk7XG5cbiAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBpZiAoZXYuZGF0YS50YWcgPT09ICdpbml0Jykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXb3JrZXIgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBGZXRjaFdvcmtlcihicm93c2VyLCB3b3JrZXIpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICB3b3JrZXIub25lcnJvciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICByZWplY3QoZXYubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuRmV0Y2hXb3JrZXIucHJvdG90eXBlLnBvc3RDb21tYW5kID0gZnVuY3Rpb24oY21kLCBjYWxsYmFjaywgdHJhbnNmZXIpIHtcbiAgICB2YXIgdGFnID0gJ3gnICsgKCsrdGhpcy50YWdTZWVkKTtcbiAgICBjbWQudGFnID0gdGFnO1xuICAgIHRoaXMuY2FsbGJhY2tzW3RhZ10gPSBjYWxsYmFjaztcbiAgICB0aGlzLndvcmtlci5wb3N0TWVzc2FnZShjbWQsIHRyYW5zZmVyKTtcbn1cblxuRmV0Y2hXb3JrZXIucHJvdG90eXBlLnRlcm1pbmF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMud29ya2VyLnRlcm1pbmF0ZSgpO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIEJyb3dzZXI6IEJyb3dzZXJcbiAgICB9O1xuXG4gICAgLy8gUmVxdWlyZWQgYmVjYXVzZSB0aGV5IGFkZCBzdHVmZiB0byBCcm93c2VyLnByb3RvdHlwZVxuICAgIHJlcXVpcmUoJy4vYnJvd3Nlci11aScpO1xuICAgIHJlcXVpcmUoJy4vdHJhY2stYWRkZXInKTtcbiAgICByZXF1aXJlKCcuL2ZlYXR1cmUtcG9wdXAnKTtcbiAgICByZXF1aXJlKCcuL3RpZXItYWN0aW9ucycpO1xuICAgIHJlcXVpcmUoJy4vZG9tdWknKTtcbiAgICByZXF1aXJlKCcuL3NlYXJjaCcpO1xuXG4gICAgdmFyIHNhID0gcmVxdWlyZSgnLi9zb3VyY2VhZGFwdGVycycpO1xuICAgIHZhciBUd29CaXRTZXF1ZW5jZVNvdXJjZSA9IHNhLlR3b0JpdFNlcXVlbmNlU291cmNlO1xuICAgIHZhciBFbnNlbWJsU2VxdWVuY2VTb3VyY2UgPSBzYS5FbnNlbWJsU2VxdWVuY2VTb3VyY2U7XG4gICAgdmFyIERBU1NlcXVlbmNlU291cmNlID0gc2EuREFTU2VxdWVuY2VTb3VyY2U7XG5cbiAgICB2YXIgS25vd25TcGFjZSA9IHJlcXVpcmUoJy4va3NwYWNlJykuS25vd25TcGFjZTtcblxuICAgIHZhciBEQVNSZWdpc3RyeSA9IHJlcXVpcmUoJy4vZGFzJykuREFTUmVnaXN0cnk7XG59XG5cbmZ1bmN0aW9uIFNvdXJjZUNhY2hlKCkge1xuICAgIHRoaXMuc291cmNlc0J5VVJJID0ge31cbn1cblxuU291cmNlQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGNvbmYpIHtcbiAgICB2YXIgc2NiID0gdGhpcy5zb3VyY2VzQnlVUklbc291cmNlRGF0YVVSSShjb25mKV07XG4gICAgaWYgKHNjYikge1xuICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc2NiLmNvbmZpZ3MubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICBpZiAoc291cmNlc0FyZUVxdWFsTW9kdWxvU3R5bGUoc2NiLmNvbmZpZ3Nbc2ldLCBjb25mKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzY2Iuc291cmNlc1tzaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cblNvdXJjZUNhY2hlLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbihjb25mLCBzb3VyY2UpIHtcbiAgICB2YXIgdXJpID0gc291cmNlRGF0YVVSSShjb25mKTtcbiAgICB2YXIgc2NiID0gdGhpcy5zb3VyY2VzQnlVUklbdXJpXTtcbiAgICBpZiAoIXNjYikge1xuICAgICAgICBzY2IgPSB7Y29uZmlnczogW10sIHNvdXJjZXM6IFtdfTtcbiAgICAgICAgdGhpcy5zb3VyY2VzQnlVUklbdXJpXSA9IHNjYjtcbiAgICB9XG4gICAgc2NiLmNvbmZpZ3MucHVzaChjb25mKTtcbiAgICBzY2Iuc291cmNlcy5wdXNoKHNvdXJjZSk7XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gY2hhaW5zZXQuanM6IGxpZnRvdmVyIHN1cHBvcnRcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBEQVNTb3VyY2UgPSBkYXMuREFTU291cmNlO1xuICAgIHZhciBEQVNTZWdtZW50ID0gZGFzLkRBU1NlZ21lbnQ7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIHB1c2hvID0gdXRpbHMucHVzaG87XG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XG5cbiAgICB2YXIgcGFyc2VDaWdhciA9IHJlcXVpcmUoJy4vY2lnYXInKS5wYXJzZUNpZ2FyO1xuXG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XG4gICAgdmFyIFVSTEZldGNoYWJsZSA9IGJpbi5VUkxGZXRjaGFibGU7XG5cbiAgICB2YXIgYmJpID0gcmVxdWlyZSgnLi9iaWd3aWcnKTtcbiAgICB2YXIgbWFrZUJ3ZyA9IGJiaS5tYWtlQndnO1xuXG4gICAgdmFyIFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XG59XG5cbmZ1bmN0aW9uIENoYWluc2V0KGNvbmYsIHNyY1RhZywgZGVzdFRhZywgY29vcmRzKSB7XG4gICAgaWYgKHR5cGVvZihjb25mKSA9PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLnVyaSA9IGNvbmY7XG4gICAgICAgIHRoaXMuc3JjVGFnID0gc3JjVGFnO1xuICAgICAgICB0aGlzLmRlc3RUYWcgPSBkZXN0VGFnO1xuICAgICAgICB0aGlzLmNvb3JkcyA9IGNvb3JkcztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnVyaSA9IGNvbmYudXJpO1xuICAgICAgICB0aGlzLnNyY1RhZyA9IGNvbmYuc3JjVGFnO1xuICAgICAgICB0aGlzLmRlc3RUYWcgPSBjb25mLmRlc3RUYWc7XG4gICAgICAgIHRoaXMuY29vcmRzID0gc2hhbGxvd0NvcHkoY29uZi5jb29yZHMpO1xuICAgICAgICB0aGlzLnR5cGUgPSBjb25mLnR5cGU7XG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBjb25mLmNyZWRlbnRpYWxzO1xuICAgIH1cblxuICAgIHRoaXMuY2hhaW5zQnlTcmMgPSB7fTtcbiAgICB0aGlzLmNoYWluc0J5RGVzdCA9IHt9O1xuICAgIHRoaXMucG9zdEZldGNoUXVldWVzID0ge307XG4gICAgdGhpcy5mZXRjaGVkVGlsZXMgPSB7fTtcbiAgICB0aGlzLmdyYW51bGFyaXR5ID0gMTAwMDAwMDsgIC8vIHNpemUgaW4gYmFzZXMgb2YgdGlsZSB0byBmZXRjaFxuXG4gICAgaWYgKHRoaXMudHlwZSA9PSAnYmlnYmVkJykge1xuICAgICAgICB0aGlzLmNoYWluRmV0Y2hlciA9IG5ldyBCQklDaGFpbkZldGNoZXIodGhpcy51cmksIHRoaXMuY3JlZGVudGlhbHMpO1xuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09ICdhbGlhcycpIHtcbiAgICAgICAgdGhpcy5jaGFpbkZldGNoZXIgPSBuZXcgQWxpYXNDaGFpbkZldGNoZXIoY29uZik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jaGFpbkZldGNoZXIgPSBuZXcgREFTQ2hhaW5GZXRjaGVyKHRoaXMudXJpLCB0aGlzLnNyY1RhZywgdGhpcy5kZXN0VGFnKTtcbiAgICB9XG59O1xuXG5DaGFpbnNldC5wcm90b3R5cGUuZXhwb3J0Q29uZmlnID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXJpOiB0aGlzLnVyaSxcbiAgICAgICAgc3JjVGFnOiB0aGlzLnNyY1RhZyxcbiAgICAgICAgZGVzdFRhZzogdGhpcy5kZXN0VGFnLFxuICAgICAgICBjb29yZHM6IHRoaXMuY29vcmRzLFxuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgIGNyZWRlbnRpYWxzOiB0aGlzLmNyZWRlbnRpYWxzXG4gICAgfTtcbn1cblxuQ2hhaW5zZXQucHJvdG90eXBlLm1hcFBvaW50ID0gZnVuY3Rpb24oY2hyLCBwb3MpIHtcbiAgICB2YXIgY2hhaW5zID0gdGhpcy5jaGFpbnNCeVNyY1tjaHJdIHx8IFtdO1xuICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgIHZhciBjID0gY2hhaW5zW2NpXTtcbiAgICAgICAgaWYgKHBvcyA+PSBjLnNyY01pbiAmJiBwb3MgPD0gYy5zcmNNYXgpIHtcbiAgICAgICAgICAgIHZhciBjcG9zO1xuICAgICAgICAgICAgaWYgKGMuc3JjT3JpID09ICctJykge1xuICAgICAgICAgICAgICAgIGNwb3MgPSBjLnNyY01heCAtIHBvcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3BvcyA9IHBvcyAtIGMuc3JjTWluO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGMuYmxvY2tzO1xuICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGJsb2Nrcy5sZW5ndGg7ICsrYmkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYiA9IGJsb2Nrc1tiaV07XG4gICAgICAgICAgICAgICAgdmFyIGJTcmMgPSBiWzBdO1xuICAgICAgICAgICAgICAgIHZhciBiRGVzdCA9IGJbMV07XG4gICAgICAgICAgICAgICAgdmFyIGJTaXplID0gYlsyXTtcbiAgICAgICAgICAgICAgICBpZiAoY3BvcyA+PSBiU3JjICYmIGNwb3MgPD0gKGJTcmMgKyBiU2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFwb3MgPSBjcG9zIC0gYlNyYztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZHBvcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMuZGVzdE9yaSA9PSAnLScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRwb3MgPSBjLmRlc3RNYXggLSBiRGVzdCAtIGFwb3M7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcG9zID0gYXBvcyArIGJEZXN0ICsgYy5kZXN0TWluO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7c2VxOiBjLmRlc3RDaHIsIHBvczogZHBvcywgZmxpcHBlZDogKGMuc3JjT3JpICE9IGMuZGVzdE9yaSl9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5DaGFpbnNldC5wcm90b3R5cGUubWFwU2VnbWVudCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgpIHtcbiAgICB2YXIgY2hhaW5zID0gdGhpcy5jaGFpbnNCeVNyY1tjaHJdIHx8IFtdO1xuICAgIHZhciBtYXBwaW5ncyA9IFtdO1xuICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgIHZhciBjID0gY2hhaW5zW2NpXTtcbiAgICAgICAgaWYgKG1heCA+PSBjLnNyY01pbiAmJiBtaW4gPD0gYy5zcmNNYXgpIHtcbiAgICAgICAgICAgIHZhciBjbWluLCBjbWF4O1xuICAgICAgICAgICAgaWYgKGMuc3JjT3JpID09ICctJykge1xuICAgICAgICAgICAgICAgIGNtaW4gPSBjLnNyY01heCAtIG1heDtcbiAgICAgICAgICAgICAgICBjbWF4ID0gYy5zcmNNYXggLSBtaW47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNtaW4gPSBtaW4gLSBjLnNyY01pbjtcbiAgICAgICAgICAgICAgICBjbWF4ID0gbWF4IC0gYy5zcmNNaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmxvY2tzID0gYy5ibG9ja3M7XG4gICAgICAgICAgICBmb3IgKHZhciBiaSA9IDA7IGJpIDwgYmxvY2tzLmxlbmd0aDsgKytiaSkge1xuICAgICAgICAgICAgICAgIHZhciBiID0gYmxvY2tzW2JpXTtcbiAgICAgICAgICAgICAgICB2YXIgYlNyYyA9IGJbMF07XG4gICAgICAgICAgICAgICAgdmFyIGJEZXN0ID0gYlsxXTtcbiAgICAgICAgICAgICAgICB2YXIgYlNpemUgPSBiWzJdO1xuICAgICAgICAgICAgICAgIGlmIChjbWF4ID49IGJTcmMgJiYgY21pbiA8PSAoYlNyYyArIGJTaXplKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnQ6IGMuZGVzdENocixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsaXBwZWQ6IChjLnNyY09yaSA9PSAnLScpIF4gKGMuZGVzdE9yaSA9PSAnLScpfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYy5kZXN0T3JpID09ICctJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNtaW4gPj0gYlNyYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ubWF4ID0gYy5kZXN0TWF4IC0gYkRlc3QgLSBjbWluICsgYlNyYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5tYXggPSBjLmRlc3RNYXggLSBiRGVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnBhcnRpYWxNYXggPSBiU3JjIC0gY21pbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbWF4IDw9IChiU3JjICsgYlNpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5taW4gPSBjLmRlc3RNYXggLSBiRGVzdCAtIGNtYXggKyBiU3JjO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLm1pbiA9IGMuZGVzdE1heCAtIGJEZXN0IC0gYlNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5wYXJ0aWFsTWluID0gY21heCAtIGJTcmMgLSBiU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbWluID49IGJTcmMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLm1pbiA9IGMuZGVzdE1pbiArIGJEZXN0ICsgY21pbiAtIGJTcmM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ubWluID0gYy5kZXN0TWluICsgYkRlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5wYXJ0aWFsTWluID0gYlNyYyAtIGNtaW47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY21heCA8PSAoYlNyYyArIGJTaXplKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ubWF4ID0gYy5kZXN0TWluICsgYkRlc3QgKyBjbWF4IC0gYlNyYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5tYXggPSBjLmRlc3RNaW4gKyBiRGVzdCArIGJTaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ucGFydGlhbE1heCA9IGNtYXggLSBiU3JjIC0gYlNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWFwcGluZ3MucHVzaChtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcHBpbmdzO1xufVxuXG5DaGFpbnNldC5wcm90b3R5cGUudW5tYXBQb2ludCA9IGZ1bmN0aW9uKGNociwgcG9zKSB7XG4gICAgdmFyIGNoYWlucyA9IHRoaXMuY2hhaW5zQnlEZXN0W2Nocl0gfHwgW107XG4gICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNoYWlucy5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgdmFyIGMgPSBjaGFpbnNbY2ldO1xuICAgICAgICBpZiAocG9zID49IGMuZGVzdE1pbiAmJiBwb3MgPD0gYy5kZXN0TWF4KSB7XG4gICAgICAgICAgICB2YXIgY3BvcztcbiAgICAgICAgICAgIGlmIChjLnNyY09yaSA9PSAnLScpIHtcbiAgICAgICAgICAgICAgICBjcG9zID0gYy5kZXN0TWF4IC0gcG9zO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjcG9zID0gcG9zIC0gYy5kZXN0TWluO1xuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGMuYmxvY2tzO1xuICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGJsb2Nrcy5sZW5ndGg7ICsrYmkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYiA9IGJsb2Nrc1tiaV07XG4gICAgICAgICAgICAgICAgdmFyIGJTcmMgPSBiWzBdO1xuICAgICAgICAgICAgICAgIHZhciBiRGVzdCA9IGJbMV07XG4gICAgICAgICAgICAgICAgdmFyIGJTaXplID0gYlsyXTtcblxuICAgICAgICAgICAgICAgIGlmIChjcG9zID49IGJEZXN0ICYmIGNwb3MgPD0gKGJEZXN0ICsgYlNpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcG9zID0gY3BvcyAtIGJEZXN0O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkcG9zID0gYXBvcyArIGJTcmMgKyBjLnNyY01pbjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRwb3M7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjLmRlc3RPcmkgPT0gJy0nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcG9zID0gYy5zcmNNYXggLSBiU3JjIC0gYXBvcztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRwb3MgPSBhcG9zICsgYlNyYyArIGMuc3JjTWluO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7c2VxOiBjLnNyY0NociwgcG9zOiBkcG9zLCBmbGlwcGVkOiAoYy5zcmNPcmkgIT0gYy5kZXN0T3JpKX1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuQ2hhaW5zZXQucHJvdG90eXBlLnNvdXJjZUJsb2Nrc0ZvclJhbmdlID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgY2FsbGJhY2spIHtcbiAgICB2YXIgU1RBVEVfUEVORElORyA9IDE7XG4gICAgdmFyIFNUQVRFX0ZFVENIRUQgPSAyO1xuXG4gICAgdmFyIHRoaXNDUyA9IHRoaXM7XG4gICAgdmFyIG1pblRpbGUgPSAobWluL3RoaXMuZ3JhbnVsYXJpdHkpfDA7XG4gICAgdmFyIG1heFRpbGUgPSAobWF4L3RoaXMuZ3JhbnVsYXJpdHkpfDA7XG5cbiAgICB2YXIgbmVlZHNOZXdPclBlbmRpbmcgPSBmYWxzZTtcbiAgICB2YXIgbmVlZHNOZXdGZXRjaCA9IGZhbHNlO1xuICAgIGZvciAodmFyIHQgPSBtaW5UaWxlOyB0IDw9IG1heFRpbGU7ICsrdCkge1xuICAgICAgICB2YXIgdG4gPSBjaHIgKyAnXycgKyB0O1xuICAgICAgICBpZiAodGhpcy5mZXRjaGVkVGlsZXNbdG5dICE9IFNUQVRFX0ZFVENIRUQpIHtcbiAgICAgICAgICAgIG5lZWRzTmV3T3JQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZldGNoZWRUaWxlc1t0bl0gIT0gU1RBVEVfUEVORElORykge1xuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hlZFRpbGVzW3RuXSA9IFNUQVRFX1BFTkRJTkc7XG4gICAgICAgICAgICAgICAgbmVlZHNOZXdGZXRjaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmVlZHNOZXdPclBlbmRpbmcpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBvc3RGZXRjaFF1ZXVlc1tjaHJdKSB7XG4gICAgICAgICAgICB0aGlzLmNoYWluRmV0Y2hlci5mZXRjaENoYWlucyhcbiAgICAgICAgICAgICAgICBjaHIsIFxuICAgICAgICAgICAgICAgIG1pblRpbGUgKiB0aGlzLmdyYW51bGFyaXR5LCBcbiAgICAgICAgICAgICAgICAobWF4VGlsZSsxKSAqIHRoaXMuZ3JhbnVsYXJpdHkgLSAxKVxuICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihjaGFpbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXNDUy5jaGFpbnNCeURlc3QpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDUy5jaGFpbnNCeURlc3RbY2hyXSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFpbiA9IGNoYWluc1tjaV07XG5cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNicyA9IHRoaXNDUy5jaGFpbnNCeVNyY1tjaGFpbi5zcmNDaHJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQ1MuY2hhaW5zQnlTcmNbY2hhaW4uc3JjQ2hyXSA9IFtjaGFpbl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmVzZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb2NpID0gMDsgb2NpIDwgY2JzLmxlbmd0aDsgKytvY2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9jID0gY2JzW29jaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYy5zcmNNaW4gPT0gY2hhaW4uc3JjTWluICYmIG9jLnNyY01heCA9PSBjaGFpbi5zcmNNYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXNlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmVzZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYnMucHVzaChjaGFpbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2JkID0gdGhpc0NTLmNoYWluc0J5RGVzdFtjaGFpbi5kZXN0Q2hyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2JkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0NTLmNoYWluc0J5RGVzdFtjaGFpbi5kZXN0Q2hyXSA9IFtjaGFpbl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmVzZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb2NpID0gMDsgb2NpIDwgY2JkLmxlbmd0aDsgKytvY2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9jID0gY2JkW29jaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYy5kZXN0TWluID09IGNoYWluLmRlc3RNaW4gJiYgb2MuZGVzdE1heCA9PSBjaGFpbi5kZXN0TWF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcHJlc2VudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2JkLnB1c2goY2hhaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSBtaW5UaWxlOyB0IDw9IG1heFRpbGU7ICsrdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG4gPSBjaHIgKyAnXycgKyB0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzQ1MuZmV0Y2hlZFRpbGVzW3RuXSA9IFNUQVRFX0ZFVENIRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzQ1MucG9zdEZldGNoUXVldWVzW2Nocl0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBmcSA9IHRoaXNDUy5wb3N0RmV0Y2hRdWV1ZXNbY2hyXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZnEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBmcVtpXSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXNDUy5wb3N0RmV0Y2hRdWV1ZXNbY2hyXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgfSk7ICAgXG4gICAgICAgIH1cblxuICAgICAgICBwdXNobyh0aGlzLnBvc3RGZXRjaFF1ZXVlcywgY2hyLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIFdpbGwgZWl0aGVyIHN1Y2NlZWQgaWYgdGhlIHRpbGVzIHRoYXQgYXJlIG5lZWRlZCBoYXZlIGFscmVhZHkgYmVlbiBmZXRjaGVkLFxuICAgICAgICAgICAgLy8gb3IgcXVldWUgdXAgYSBuZXcgZmV0Y2guXG5cbiAgICAgICAgICAgIHRoaXNDUy5zb3VyY2VCbG9ja3NGb3JSYW5nZShjaHIsIG1pbiwgbWF4LCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzcmNCbG9ja3MgPSBbXTtcbiAgICAgICAgdmFyIGNoYWlucyA9IHRoaXMuY2hhaW5zQnlEZXN0W2Nocl0gfHwgW107XG4gICAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGNoYWluc1tjaV07XG4gICAgICAgICAgICBpZiAobWluIDw9IGMuZGVzdE1heCAmJiBtYXggPj0gYy5kZXN0TWluKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNtaW4sIGNtYXg7XG4gICAgICAgICAgICAgICAgaWYgKGMuc3JjT3JpID09ICctJykge1xuICAgICAgICAgICAgICAgICAgICBjbWluID0gYy5kZXN0TWF4IC0gbWF4O1xuICAgICAgICAgICAgICAgICAgICBjbWF4ID0gYy5kZXN0TWF4IC0gbWluO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNtaW4gPSBtaW4gLSBjLmRlc3RNaW47XG4gICAgICAgICAgICAgICAgICAgIGNtYXggPSBtYXggLSBjLmRlc3RNaW47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGMuYmxvY2tzO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGJpID0gMDsgYmkgPCBibG9ja3MubGVuZ3RoOyArK2JpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gYmxvY2tzW2JpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJTcmMgPSBiWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYkRlc3QgPSBiWzFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYlNpemUgPSBiWzJdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbWF4ID49IGJEZXN0ICYmIGNtaW4gPD0gKGJEZXN0ICsgYlNpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW1pbiA9IE1hdGgubWF4KGNtaW4sIGJEZXN0KSAtIGJEZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFtYXggPSBNYXRoLm1pbihjbWF4LCBiRGVzdCArIGJTaXplKSAtIGJEZXN0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5kZXN0T3JpID09ICctJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY0Jsb2Nrcy5wdXNoKG5ldyBEQVNTZWdtZW50KGMuc3JjQ2hyLCBjLnNyY01heCAtIGJTcmMgLSBhbWF4LCBjLnNyY01heCAtIGJTcmMgLSBhbWluKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY0Jsb2Nrcy5wdXNoKG5ldyBEQVNTZWdtZW50KGMuc3JjQ2hyLCBjLnNyY01pbiArIGFtaW4gKyBiU3JjLCBjLnNyY01pbiArIGFtYXggKyBiU3JjKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soc3JjQmxvY2tzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIERBU0NoYWluRmV0Y2hlcih1cmksIHNyY1RhZywgZGVzdFRhZykge1xuICAgIHRoaXMuc291cmNlID0gbmV3IERBU1NvdXJjZSh1cmkpO1xuICAgIHRoaXMuc3JjVGFnID0gc3JjVGFnO1xuICAgIHRoaXMuZGVzdFRhZyA9ZGVzdFRhZztcbn1cblxuREFTQ2hhaW5GZXRjaGVyLnByb3RvdHlwZS5mZXRjaENoYWlucyA9IGZ1bmN0aW9uKGNociwgX21pbiwgX21heCkge1xuICAgIHZhciB0aGlzQ1MgPSB0aGlzO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB0aGlzQ1Muc291cmNlLmFsaWdubWVudHMoY2hyLCB7fSwgZnVuY3Rpb24oYWxpZ25zKSB7XG4gICAgICAgICAgICB2YXIgY2hhaW5zID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGFpID0gMDsgYWkgPCBhbGlnbnMubGVuZ3RoOyArK2FpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsbiA9IGFsaWduc1thaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGFsbi5ibG9ja3MubGVuZ3RoOyArK2JpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9jayA9IGFsbi5ibG9ja3NbYmldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3JjU2VnLCBkZXN0U2VnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgYmxvY2suc2VnbWVudHMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VnID0gYmxvY2suc2VnbWVudHNbc2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IGFsbi5vYmplY3RzW3NlZy5vYmplY3RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5kYlNvdXJjZSA9PT0gdGhpc0NTLnNyY1RhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY1NlZyA9IHNlZztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLmRiU291cmNlID09PSB0aGlzQ1MuZGVzdFRhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RTZWcgPSBzZWc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNyY1NlZyAmJiBkZXN0U2VnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhaW4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjQ2hyOiAgICAgYWxuLm9iamVjdHNbc3JjU2VnLm9iamVjdF0uYWNjZXNzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY01pbjogICAgIHNyY1NlZy5taW58MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNNYXg6ICAgICBzcmNTZWcubWF4fDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjT3JpOiAgICAgc3JjU2VnLnN0cmFuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0Q2hyOiAgICBhbG4ub2JqZWN0c1tkZXN0U2VnLm9iamVjdF0uYWNjZXNzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RNaW46ICAgIGRlc3RTZWcubWlufDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdE1heDogICAgZGVzdFNlZy5tYXh8MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0T3JpOiAgICBkZXN0U2VnLnN0cmFuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3M6ICAgICBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Jjb3BzID0gcGFyc2VDaWdhcihzcmNTZWcuY2lnYXIpLCBkZXN0b3BzID0gcGFyc2VDaWdhcihkZXN0U2VnLmNpZ2FyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyY09mZnNldCA9IDAsIGRlc3RPZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyY2kgPSAwLCBkZXN0aSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3JjaSA8IHNyY29wcy5sZW5ndGggJiYgZGVzdGkgPCBkZXN0b3BzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcmNvcHNbc3JjaV0ub3AgPT0gJ00nICYmIGRlc3RvcHNbZGVzdGldLm9wID09ICdNJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2tMZW4gPSBNYXRoLm1pbihzcmNvcHNbc3JjaV0uY250LCBkZXN0b3BzW2Rlc3RpXS5jbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbi5ibG9ja3MucHVzaChbc3JjT2Zmc2V0LCBkZXN0T2Zmc2V0LCBibG9ja0xlbl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Jjb3BzW3NyY2ldLmNudCA9PSBibG9ja0xlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKytzcmNpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Jjb3BzW3NyY2ldLmNudCAtPSBibG9ja0xlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdG9wc1tkZXN0aV0uY250ID09IGJsb2NrTGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2Rlc3RpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdG9wc1tkZXN0aV0gLT0gYmxvY2tMZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjT2Zmc2V0ICs9IGJsb2NrTGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0T2Zmc2V0ICs9IGJsb2NrTGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3Jjb3BzW3NyY2ldLm9wID09ICdJJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0T2Zmc2V0ICs9IHNyY29wc1tzcmNpKytdLmNudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlc3RvcHNbZGVzdGldLm9wID09ICdJJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgKz0gZGVzdG9wc1tkZXN0aSsrXS5jbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbnMucHVzaChjaGFpbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKGNoYWlucyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBCQklDaGFpbkZldGNoZXIodXJpLCBjcmVkZW50aWFscykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLnVyaSA9IHVyaTtcbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gY3JlZGVudGlhbHM7XG5cbiAgICB0aGlzLmJ3ZyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBtYWtlQndnKG5ldyBVUkxGZXRjaGFibGUoc2VsZi51cmksIHtjcmVkZW50aWFsczogc2VsZi5jcmVkZW50aWFscywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVyOiBzZWxmLnJlc29sdmVyfSksIFxuICAgICAgICAgIGZ1bmN0aW9uKGJ3ZywgZXJyKSB7XG4gICAgICAgICAgICBpZiAoYndnKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShid2cpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuYndnLnRoZW4oZnVuY3Rpb24oYndnLCBlcnIpIHtcbiAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHBpKHgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoeCk7XG59XG5cbmZ1bmN0aW9uIGNsZWFuQ2hyKGMpIHtcbiAgICBpZiAoYy5pbmRleE9mKCdjaHInKSA9PSAwKVxuICAgICAgICByZXR1cm4gYy5zdWJzdHIoMyk7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gYztcbn1cblxuZnVuY3Rpb24gYmJpRmVhdHVyZVRvQ2hhaW4oZmVhdHVyZSkge1xuICAgIHZhciBjaGFpbiA9IHtcbiAgICAgICAgc3JjQ2hyOiAgICAgY2xlYW5DaHIoZmVhdHVyZS5zcmNDaHJvbSksXG4gICAgICAgIHNyY01pbjogICAgIHBhcnNlSW50KGZlYXR1cmUuc3JjU3RhcnQpLFxuICAgICAgICBzcmNNYXg6ICAgICBwYXJzZUludChmZWF0dXJlLnNyY0VuZCksXG4gICAgICAgIHNyY09yaTogICAgIGZlYXR1cmUuc3JjT3JpLFxuICAgICAgICBkZXN0Q2hyOiAgICBjbGVhbkNocihmZWF0dXJlLnNlZ21lbnQpLFxuICAgICAgICBkZXN0TWluOiAgICBmZWF0dXJlLm1pbiAtIDEsICAgICAvLyBDb252ZXJ0IGJhY2sgZnJvbSBiaWdiZWQgcGFyc2VyXG4gICAgICAgIGRlc3RNYXg6ICAgIGZlYXR1cmUubWF4LFxuICAgICAgICBkZXN0T3JpOiAgICBmZWF0dXJlLm9yaSxcbiAgICAgICAgYmxvY2tzOiAgICAgW11cbiAgICB9O1xuICAgIHZhciBzcmNTdGFydHMgPSBmZWF0dXJlLnNyY1N0YXJ0cy5zcGxpdCgnLCcpLm1hcChwaSk7XG4gICAgdmFyIGRlc3RTdGFydHMgPSBmZWF0dXJlLmRlc3RTdGFydHMuc3BsaXQoJywnKS5tYXAocGkpO1xuICAgIHZhciBibG9ja0xlbmd0aHMgPSBmZWF0dXJlLmJsb2NrTGVucy5zcGxpdCgnLCcpLm1hcChwaSk7XG4gICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IHNyY1N0YXJ0cy5sZW5ndGg7ICsrYmkpIHtcbiAgICAgICAgY2hhaW4uYmxvY2tzLnB1c2goW3NyY1N0YXJ0c1tiaV0sIGRlc3RTdGFydHNbYmldLCBibG9ja0xlbmd0aHNbYmldXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYWluO1xufVxuXG5CQklDaGFpbkZldGNoZXIucHJvdG90eXBlLmZldGNoQ2hhaW5zID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCkge1xuICAgIHJldHVybiB0aGlzLmJ3Zy50aGVuKGZ1bmN0aW9uKGJ3ZywgZXJyKSB7XG4gICAgICAgIGlmICghYndnKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJObyBCV0dcIik7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgYndnLmdldFVuem9vbWVkVmlldygpLnJlYWRXaWdEYXRhKGNociwgbWluLCBtYXgsIGZ1bmN0aW9uKGZlYXRzKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmZWF0cy5tYXAoYmJpRmVhdHVyZVRvQ2hhaW4pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmZ1bmN0aW9uIEFsaWFzQ2hhaW5GZXRjaGVyKGNvbmYpIHtcbiAgICB0aGlzLmNvbmYgPSBjb25mO1xuICAgIHRoaXMuZm9yd2FyZEFsaWFzZXMgPSB7fTtcbiAgICB2YXIgc2EgPSBjb25mLnNlcXVlbmNlQWxpYXNlcyB8fCBbXTtcbiAgICBmb3IgKHZhciBhaSA9IDA7IGFpIDwgc2EubGVuZ3RoOyArK2FpKSB7XG4gICAgICAgIHZhciBhbCA9IHNhW2FpXTtcbiAgICAgICAgaWYgKGFsLmxlbmd0aCA8IDIpXG4gICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICB2YXIgZmEgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbC5sZW5ndGggLSAxOyArK2kpXG4gICAgICAgICAgICBmYS5wdXNoKGFsW2ldKTtcbiAgICAgICAgdGhpcy5mb3J3YXJkQWxpYXNlc1thbFthbC5sZW5ndGggLSAxXV0gPSBmYTtcbiAgICB9XG59XG5cbkFsaWFzQ2hhaW5GZXRjaGVyLnByb3RvdHlwZS5mZXRjaENoYWlucyA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgpIHtcbiAgICB2YXIgcmVzcCA9IFtdO1xuICAgIHZhciBmYSA9IHRoaXMuZm9yd2FyZEFsaWFzZXNbY2hyXSB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHJlc3AucHVzaChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzcmNDaHI6ICAgICAgICAgZmFbaV0sXG4gICAgICAgICAgICAgICAgc3JjTWluOiAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgc3JjTWF4OiAgICAgICAgIDEwMDAwMDAwMDAsXG4gICAgICAgICAgICAgICAgc3JjT3JpOiAgICAgICAgICcrJyxcbiAgICAgICAgICAgICAgICBkZXN0Q2hyOiAgICAgICAgY2hyLFxuICAgICAgICAgICAgICAgIGRlc3RNaW46ICAgICAgICAxLFxuICAgICAgICAgICAgICAgIGRlc3RNYXg6ICAgICAgICAxMDAwMDAwMDAwLFxuICAgICAgICAgICAgICAgIGRlc3RPcmk6ICAgICAgICAnKycsXG4gICAgICAgICAgICAgICAgYmxvY2tzOiBbWzEsIDEsIDEwMDAwMDAwMDBdXVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwKTtcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBDaGFpbnNldDogQ2hhaW5zZXRcbiAgICB9O1xufVxuIiwiXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcbi8vXG4vLyBjaGFpbnNldC5qczogbGlmdG92ZXIgc3VwcG9ydFxuLy9cblxudmFyIENJR0FSX1JFR0VYUCA9IG5ldyBSZWdFeHAoJyhbMC05XSopKFtNSURTXSknLCAnZycpO1xuXG5mdW5jdGlvbiBwYXJzZUNpZ2FyKGNpZ2FyKVxue1xuICAgIHZhciBjaWdvcHMgPSBbXTtcbiAgICB2YXIgbWF0Y2g7XG4gICAgd2hpbGUgKChtYXRjaCA9IENJR0FSX1JFR0VYUC5leGVjKGNpZ2FyKSkgIT0gbnVsbCkge1xuICAgICAgICB2YXIgY291bnQgPSBtYXRjaFsxXTtcbiAgICAgICAgaWYgKGNvdW50Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb3VudCA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgY2lnb3BzLnB1c2goe2NudDogY291bnR8MCwgb3A6IG1hdGNoWzJdfSk7XG4gICAgfVxuICAgIHJldHVybiBjaWdvcHM7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgcGFyc2VDaWdhcjogcGFyc2VDaWdhclxuICAgIH07XG59IiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIGNvbG9yLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gRENvbG91cihyZWQsIGdyZWVuLCBibHVlLCBuYW1lKSB7XG4gICAgdGhpcy5yZWQgPSByZWR8MDtcbiAgICB0aGlzLmdyZWVuID0gZ3JlZW58MDtcbiAgICB0aGlzLmJsdWUgPSBibHVlfDA7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG59XG5cbkRDb2xvdXIucHJvdG90eXBlLnRvU3ZnU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLm5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJyZ2IoXCIgKyB0aGlzLnJlZCArIFwiLFwiICsgdGhpcy5ncmVlbiArIFwiLFwiICsgdGhpcy5ibHVlICsgXCIpXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubmFtZTtcbn1cblxuZnVuY3Rpb24gaGV4Mih4KSB7XG4gICAgdmFyIHkgPSAnMDAnICsgeC50b1N0cmluZygxNik7XG4gICAgcmV0dXJuIHkuc3Vic3RyaW5nKHkubGVuZ3RoIC0gMik7XG59XG5cbkRDb2xvdXIucHJvdG90eXBlLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICcjJyArIGhleDIodGhpcy5yZWQpICsgaGV4Mih0aGlzLmdyZWVuKSArIGhleDIodGhpcy5ibHVlKTtcbn1cblxudmFyIHBhbGV0dGUgPSB7XG4gICAgcmVkOiBuZXcgRENvbG91cigyNTUsIDAsIDAsICdyZWQnKSxcbiAgICBncmVlbjogbmV3IERDb2xvdXIoMCwgMjU1LCAwLCAnZ3JlZW4nKSxcbiAgICBibHVlOiBuZXcgRENvbG91cigwLCAwLCAyNTUsICdibHVlJyksXG4gICAgeWVsbG93OiBuZXcgRENvbG91cigyNTUsIDI1NSwgMCwgJ3llbGxvdycpLFxuICAgIHdoaXRlOiBuZXcgRENvbG91cigyNTUsIDI1NSwgMjU1LCAnd2hpdGUnKSxcbiAgICBibGFjazogbmV3IERDb2xvdXIoMCwgMCwgMCwgJ2JsYWNrJyksXG4gICAgZ3JheTogbmV3IERDb2xvdXIoMTgwLCAxODAsIDE4MCwgJ2dyYXknKSxcbiAgICBncmV5OiBuZXcgRENvbG91cigxODAsIDE4MCwgMTgwLCAnZ3JleScpLFxuICAgIGxpZ2h0c2t5Ymx1ZTogbmV3IERDb2xvdXIoMTM1LCAyMDYsIDI1MCwgJ2xpZ2h0c2t5Ymx1ZScpLFxuICAgIGxpZ2h0c2FsbW9uOiBuZXcgRENvbG91cigyNTUsIDE2MCwgMTIyLCAnbGlnaHRzYWxtb24nKSxcbiAgICBob3RwaW5rOiBuZXcgRENvbG91cigyNTUsIDEwNSwgMTgwLCAnaG90cGluaycpXG59O1xuXG52YXIgQ09MT1JfUkUgPSBuZXcgUmVnRXhwKCdeIyhbMC05QS1GYS1mXXsyfSkoWzAtOUEtRmEtZl17Mn0pKFswLTlBLUZhLWZdezJ9KSQnKTtcbnZhciBDU1NfQ09MT1JfUkUgPSAvcmdiXFwoKFswLTldKyksKFswLTldKyksKFswLTldKylcXCkvXG5cbmZ1bmN0aW9uIGRhc0NvbG91ckZvck5hbWUobmFtZSkge1xuICAgIHZhciBjID0gcGFsZXR0ZVtuYW1lXTtcbiAgICBpZiAoIWMpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gQ09MT1JfUkUuZXhlYyhuYW1lKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBjID0gbmV3IERDb2xvdXIoKCcweCcgKyBtYXRjaFsxXSl8MCwgKCcweCcgKyBtYXRjaFsyXSl8MCwgKCcweCcgKyBtYXRjaFszXSl8MCwgbmFtZSk7XG4gICAgICAgICAgICBwYWxldHRlW25hbWVdID0gYztcbiAgICAgICAgfSBlbHNlIHtcbiAgICBcdCAgICBtYXRjaCA9IENTU19DT0xPUl9SRS5leGVjKG5hbWUpO1xuICAgIFx0ICAgIGlmIChtYXRjaCkge1xuICAgICAgICBcdFx0YyA9IG5ldyBEQ29sb3VyKG1hdGNoWzFdfDAsIG1hdGNoWzJdfDAsIG1hdGNoWzNdfDAsIG5hbWUpO1xuICAgICAgICBcdFx0cGFsZXR0ZVtuYW1lXSA9IGM7XG5cdCAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgIGNvbnNvbGUubG9nKFwiY291bGRuJ3QgaGFuZGxlIGNvbG9yOiBcIiArIG5hbWUpO1xuXHRcdCAgICAgIGMgPSBwYWxldHRlLmJsYWNrO1xuXHRcdCAgICAgIHBhbGV0dGVbbmFtZV0gPSBjO1xuXHQgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjO1xufVxuXG5mdW5jdGlvbiBtYWtlQ29sb3VyU3RlcHMoc3RlcHMsIHN0b3BzLCBjb2xvdXJzKSB7XG4gICAgdmFyIGRjb2xvdXJzID0gW107XG4gICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNvbG91cnMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgIGRjb2xvdXJzLnB1c2goZGFzQ29sb3VyRm9yTmFtZShjb2xvdXJzW2NpXSkpO1xuICAgIH1cblxuICAgIHZhciBncmFkID0gW107XG4gIFNURVBfTE9PUDpcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3RlcHM7ICsrc2kpIHtcbiAgICAgICAgdmFyIHJzID0gKDEuMCAqIHNpKSAvIChzdGVwcy0xKTtcbiAgICAgICAgdmFyIHNjb3JlID0gc3RvcHNbMF0gKyAoc3RvcHNbc3RvcHMubGVuZ3RoIC0xXSAtIHN0b3BzWzBdKSAqIHJzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0b3BzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICAgICAgaWYgKHNjb3JlID49IHN0b3BzW2ldICYmIHNjb3JlIDw9IHN0b3BzW2krMV0pIHtcbiAgICAgICAgICAgICAgICB2YXIgZnJhYyA9IChzY29yZSAtIHN0b3BzW2ldKSAvIChzdG9wc1tpKzFdIC0gc3RvcHNbaV0pO1xuICAgICAgICAgICAgICAgIHZhciBjYSA9IGRjb2xvdXJzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBjYiA9IGRjb2xvdXJzW2krMV07XG5cbiAgICAgICAgICAgICAgICB2YXIgZmlsbCA9IG5ldyBEQ29sb3VyKFxuICAgICAgICAgICAgICAgICAgICAoKGNhLnJlZCAqICgxLjAgLSBmcmFjKSkgKyAoY2IucmVkICogZnJhYykpfDAsXG4gICAgICAgICAgICAgICAgICAgICgoY2EuZ3JlZW4gKiAoMS4wIC0gZnJhYykpICsgKGNiLmdyZWVuICogZnJhYykpfDAsXG4gICAgICAgICAgICAgICAgICAgICgoY2EuYmx1ZSAqICgxLjAgLSBmcmFjKSkgKyAoY2IuYmx1ZSAqIGZyYWMpKXwwXG4gICAgICAgICAgICAgICAgKS50b1N2Z1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGdyYWQucHVzaChmaWxsKTtcblxuICAgICAgICAgICAgICAgIGNvbnRpbnVlIFNURVBfTE9PUDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyAnQmFkIHN0ZXAnO1xuICAgIH1cblxuICAgIHJldHVybiBncmFkO1xufVxuXG5mdW5jdGlvbiBtYWtlR3JhZGllbnQoc3RlcHMsIGNvbG9yMSwgY29sb3IyLCBjb2xvcjMpIHtcbiAgICBpZiAoY29sb3IzKSB7XG4gICAgICAgIHJldHVybiBtYWtlQ29sb3VyU3RlcHMoc3RlcHMsIFswLCAwLjUsIDFdLCBbY29sb3IxLCBjb2xvcjIsIGNvbG9yM10pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBtYWtlQ29sb3VyU3RlcHMoc3RlcHMsIFswLCAxXSwgW2NvbG9yMSwgY29sb3IyXSk7XG4gICAgfVxufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIG1ha2VDb2xvdXJTdGVwczogbWFrZUNvbG91clN0ZXBzLFxuICAgICAgICBtYWtlR3JhZGllbnQ6IG1ha2VHcmFkaWVudCxcbiAgICAgICAgZGFzQ29sb3VyRm9yTmFtZTogZGFzQ29sb3VyRm9yTmFtZVxuICAgIH07XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gZGFzLmpzOiBxdWVyaWVzIGFuZCBsb3ctbGV2ZWwgZGF0YSBtb2RlbC5cbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcbiAgICB2YXIgcHVzaG8gPSB1dGlscy5wdXNobztcblxuICAgIHZhciBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcbiAgICB2YXIgbWFrZUNvbG91clN0ZXBzID0gY29sb3IubWFrZUNvbG91clN0ZXBzO1xufVxuXG52YXIgZGFzTGliRXJyb3JIYW5kbGVyID0gZnVuY3Rpb24oZXJyTXNnKSB7XG4gICAgYWxlcnQoZXJyTXNnKTtcbn1cbnZhciBkYXNMaWJSZXF1ZXN0UXVldWUgPSBuZXcgQXJyYXkoKTtcblxuZnVuY3Rpb24gREFTU2VnbWVudChuYW1lLCBzdGFydCwgZW5kLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbn1cbkRBU1NlZ21lbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZSArICc6JyArIHRoaXMuc3RhcnQgKyAnLi4nICsgdGhpcy5lbmQ7XG59O1xuREFTU2VnbWVudC5wcm90b3R5cGUuaXNCb3VuZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnQgJiYgdGhpcy5lbmQ7XG59XG5EQVNTZWdtZW50LnByb3RvdHlwZS50b0RBU1F1ZXJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHEgPSAnc2VnbWVudD0nICsgdGhpcy5uYW1lO1xuICAgIGlmICh0aGlzLnN0YXJ0ICYmIHRoaXMuZW5kKSB7XG4gICAgICAgIHEgKz0gKCc6JyArIHRoaXMuc3RhcnQgKyAnLCcgKyB0aGlzLmVuZCk7XG4gICAgfVxuICAgIHJldHVybiBxO1xufVxuXG5cbmZ1bmN0aW9uIERBU1NvdXJjZShhMSwgYTIpIHtcbiAgICB2YXIgb3B0aW9ucztcbiAgICBpZiAodHlwZW9mIGExID09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMudXJpID0gYTE7XG4gICAgICAgIG9wdGlvbnMgPSBhMiB8fCB7fTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zID0gYTEgfHwge307XG4gICAgfVxuICAgIGZvciAodmFyIGsgaW4gb3B0aW9ucykge1xuICAgICAgICB0aGlzW2tdID0gb3B0aW9uc1trXTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuY29vcmRzKSB7XG4gICAgICAgIHRoaXMuY29vcmRzID0gW107XG4gICAgfVxuICAgIGlmICghdGhpcy5wcm9wcykge1xuICAgICAgICB0aGlzLnByb3BzID0ge307XG4gICAgfVxuXG4gICAgdGhpcy5kYXNCYXNlVVJJID0gdGhpcy51cmk7XG4gICAgaWYgKHRoaXMuZGFzQmFzZVVSSSAmJiB0aGlzLmRhc0Jhc2VVUkkuc3Vic3RyKHRoaXMudXJpLmxlbmd0aCAtIDEpICE9ICcvJykge1xuICAgICAgICB0aGlzLmRhc0Jhc2VVUkkgPSB0aGlzLmRhc0Jhc2VVUkkgKyAnLyc7XG4gICAgfVxufVxuXG5EQVNTb3VyY2UucHJvdG90eXBlLmdldFVSSSA9IGZ1bmN0aW9uKHVyaSkge1xuICAgIGlmICh0aGlzLnJlc29sdmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVyKHVyaSkudGhlbihmdW5jdGlvbiAodXJsT3JPYmopIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJsT3JPYmogPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybE9yT2JqO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsT3JPYmoudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVyaSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBEQVNDb29yZHMoKSB7XG59XG5cbmZ1bmN0aW9uIGNvb3Jkc01hdGNoKGMxLCBjMikge1xuICAgIHJldHVybiBjMS50YXhvbiA9PSBjMi50YXhvbiAmJiBjMS5hdXRoID09IGMyLmF1dGggJiYgYzEudmVyc2lvbiA9PSBjMi52ZXJzaW9uO1xufVxuXG4vL1xuLy8gREFTIDEuNiBlbnRyeV9wb2ludHMgY29tbWFuZFxuLy9cblxuREFTU291cmNlLnByb3RvdHlwZS5lbnRyeVBvaW50cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIGRhc1VSSSA9IHRoaXMuZGFzQmFzZVVSSSArICdlbnRyeV9wb2ludHMnO1xuICAgIHRoaXMuZG9Dcm9zc0RvbWFpblJlcXVlc3QoZGFzVVJJLCBmdW5jdGlvbihyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhbXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZW50cnlQb2ludHMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2VncyA9IHJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdTRUdNRU5UJyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWcgPSBzZWdzW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnSWQgPSBzZWcuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZ1NpemUgPSBzZWcuZ2V0QXR0cmlidXRlKCdzaXplJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdNaW4sIHNlZ01heDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ1NpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ01pbiA9IDE7IHNlZ01heCA9IHNlZ1NpemV8MDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ01pbiA9IHNlZy5nZXRBdHRyaWJ1dGUoJ3N0YXJ0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VnTWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnTWluIHw9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdNYXggPSBzZWcuZ2V0QXR0cmlidXRlKCdzdG9wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VnTWF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnTWF4IHw9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZ0Rlc2MgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VnLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ0Rlc2MgPSBzZWcuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZW50cnlQb2ludHMucHVzaChuZXcgREFTU2VnbWVudChzZWdJZCwgc2VnTWluLCBzZWdNYXgsIHNlZ0Rlc2MpKTtcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgIFxuICAgICAgICAgICAgICAgY2FsbGJhY2soZW50cnlQb2ludHMpO1xuICAgIH0pOyAgICAgICAgIFxufVxuXG4vL1xuLy8gREFTIDEuNiBzZXF1ZW5jZSBjb21tYW5kXG4vLyBEbyB3ZSBuZWVkIGFuIG9wdGlvbiB0byBmYWxsIGJhY2sgdG8gdGhlIGRuYSBjb21tYW5kP1xuLy9cblxuZnVuY3Rpb24gREFTU2VxdWVuY2UobmFtZSwgc3RhcnQsIGVuZCwgYWxwaGEsIHNlcSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIHRoaXMuYWxwaGFiZXQgPSBhbHBoYTtcbiAgICB0aGlzLnNlcSA9IHNlcTtcbn1cblxuREFTU291cmNlLnByb3RvdHlwZS5zZXF1ZW5jZSA9IGZ1bmN0aW9uKHNlZ21lbnQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGRhc1VSSSA9IHRoaXMuZGFzQmFzZVVSSSArICdzZXF1ZW5jZT8nICsgc2VnbWVudC50b0RBU1F1ZXJ5KCk7XG4gICAgdGhpcy5kb0Nyb3NzRG9tYWluUmVxdWVzdChkYXNVUkksIGZ1bmN0aW9uKHJlc3BvbnNlWE1MKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2VYTUwpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKFtdKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VxcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBzZWdzID0gcmVzcG9uc2VYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1NFUVVFTkNFJyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWcgPSBzZWdzW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnSWQgPSBzZWcuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnTWluID0gc2VnLmdldEF0dHJpYnV0ZSgnc3RhcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZ01heCA9IHNlZy5nZXRBdHRyaWJ1dGUoJ3N0b3AnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZ0FscGhhID0gJ0ROQSc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdTZXEgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VnLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYXdTZXEgPSBzZWcuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdTZXEgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2UgPSByYXdTZXEuaW5kZXhPZignXFxuJywgaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BhY2UgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdTZXEgKz0gcmF3U2VxLnN1YnN0cmluZyhpZHgsIHNwYWNlKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHggPSBzcGFjZSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnU2VxICs9IHJhd1NlcS5zdWJzdHJpbmcoaWR4KS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2Vxcy5wdXNoKG5ldyBEQVNTZXF1ZW5jZShzZWdJZCwgc2VnTWluLCBzZWdNYXgsIHNlZ0FscGhhLCBzZWdTZXEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soc2Vxcyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy9cbi8vIERBUyAxLjYgZmVhdHVyZXMgY29tbWFuZFxuLy9cblxuZnVuY3Rpb24gREFTRmVhdHVyZSgpIHtcbn1cblxuZnVuY3Rpb24gREFTR3JvdXAoaWQpIHtcbiAgICBpZiAoaWQpXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbn1cblxuZnVuY3Rpb24gREFTTGluayhkZXNjLCB1cmkpIHtcbiAgICB0aGlzLmRlc2MgPSBkZXNjO1xuICAgIHRoaXMudXJpID0gdXJpO1xufVxuXG5EQVNTb3VyY2UucHJvdG90eXBlLmZlYXR1cmVzID0gZnVuY3Rpb24oc2VnbWVudCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdmFyIGRhc1VSSTtcbiAgICBpZiAodGhpcy5mZWF0dXJlc191cmkpIHtcbiAgICAgICAgZGFzVVJJID0gdGhpcy5mZWF0dXJlc191cmk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGZpbHRlcnMgPSBbXTtcblxuICAgICAgICBpZiAoc2VnbWVudCkge1xuICAgICAgICAgICAgZmlsdGVycy5wdXNoKHNlZ21lbnQudG9EQVNRdWVyeSgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmdyb3VwKSB7XG4gICAgICAgICAgICB2YXIgZyA9IG9wdGlvbnMuZ3JvdXA7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGcgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2goJ2dyb3VwX2lkPScgKyBnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZ2kgPSAwOyBnaSA8IGcubGVuZ3RoOyArK2dpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcnMucHVzaCgnZ3JvdXBfaWQ9JyArIGdbZ2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5hZGphY2VudCkge1xuICAgICAgICAgICAgdmFyIGFkaiA9IG9wdGlvbnMuYWRqYWNlbnQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFkaiA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGFkaiA9IFthZGpdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgYWkgPSAwOyBhaSA8IGFkai5sZW5ndGg7ICsrYWkpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2goJ2FkamFjZW50PScgKyBhZGpbYWldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnR5cGUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKCd0eXBlPScgKyBvcHRpb25zLnR5cGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgb3B0aW9ucy50eXBlLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2goJ3R5cGU9JyArIG9wdGlvbnMudHlwZVt0aV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKG9wdGlvbnMubWF4Ymlucykge1xuICAgICAgICAgICAgZmlsdGVycy5wdXNoKCdtYXhiaW5zPScgKyBvcHRpb25zLm1heGJpbnMpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZmlsdGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBkYXNVUkkgPSB0aGlzLmRhc0Jhc2VVUkkgKyAnZmVhdHVyZXM/JyArIGZpbHRlcnMuam9pbignOycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soW10sICdObyBmaWx0ZXJzIHNwZWNpZmllZCcpO1xuICAgICAgICB9XG4gICAgfSBcbiAgIFxuXG4gICAgdGhpcy5kb0Nyb3NzRG9tYWluUmVxdWVzdChkYXNVUkksIGZ1bmN0aW9uKHJlc3BvbnNlWE1MLCByZXEpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgdmFyIG1zZztcbiAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDApIHtcbiAgICAgICAgICAgICAgICBtc2cgPSAnc2VydmVyIG1heSBub3Qgc3VwcG9ydCBDT1JTJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbXNnID0gJ3N0YXR1cz0nICsgcmVxLnN0YXR1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKFtdLCAnRmFpbGVkIHJlcXVlc3Q6ICcgKyBtc2cpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4vKiAgICAgIGlmIChyZXEpIHtcbiAgICAgICAgICAgIHZhciBjYXBzID0gcmVxLmdldFJlc3BvbnNlSGVhZGVyKCdYLURBUy1DYXBhYmlsdGllcycpO1xuICAgICAgICAgICAgaWYgKGNhcHMpIHtcbiAgICAgICAgICAgICAgICBhbGVydChjYXBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAqL1xuXG4gICAgICAgIHZhciBmZWF0dXJlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB2YXIgc2VnbWVudE1hcCA9IHt9O1xuXG4gICAgICAgIHZhciBzZWdzID0gcmVzcG9uc2VYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1NFR01FTlQnKTtcbiAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNlZ3MubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICB2YXIgc2VnbWVudFhNTCA9IHNlZ3Nbc2ldO1xuICAgICAgICAgICAgdmFyIHNlZ21lbnRJRCA9IHNlZ21lbnRYTUwuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgc2VnbWVudE1hcFtzZWdtZW50SURdID0ge1xuICAgICAgICAgICAgICAgIG1pbjogc2VnbWVudFhNTC5nZXRBdHRyaWJ1dGUoJ3N0YXJ0JyksXG4gICAgICAgICAgICAgICAgbWF4OiBzZWdtZW50WE1MLmdldEF0dHJpYnV0ZSgnc3RvcCcpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgZmVhdHVyZVhNTHMgPSBzZWdtZW50WE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdGRUFUVVJFJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZlYXR1cmVYTUxzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlWE1Mc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgZGFzRmVhdHVyZSA9IG5ldyBEQVNGZWF0dXJlKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5zZWdtZW50ID0gc2VnbWVudElEO1xuICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUuaWQgPSBmZWF0dXJlLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLmxhYmVsID0gZmVhdHVyZS5nZXRBdHRyaWJ1dGUoJ2xhYmVsJyk7XG5cblxuLypcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGROb2RlcyA9IGZlYXR1cmUuY2hpbGROb2RlcztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGNoaWxkTm9kZXMubGVuZ3RoOyArK2MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNuID0gY2hpbGROb2Rlc1tjXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNuLm5vZGVUeXBlID09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gY24udGFnTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIHZhbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmIChjbi5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHZhbCA9IGNuLmZpcnN0Q2hpbGQubm9kZVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlW2tleV0gPSAneCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICovXG5cblxuICAgICAgICAgICAgICAgIHZhciBzcG9zID0gZWxlbWVudFZhbHVlKGZlYXR1cmUsIFwiU1RBUlRcIik7XG4gICAgICAgICAgICAgICAgdmFyIGVwb3MgPSBlbGVtZW50VmFsdWUoZmVhdHVyZSwgXCJFTkRcIik7XG4gICAgICAgICAgICAgICAgaWYgKChzcG9zfDApID4gKGVwb3N8MCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5taW4gPSBlcG9zfDA7XG4gICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUubWF4ID0gc3Bvc3wwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUubWluID0gc3Bvc3wwO1xuICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLm1heCA9IGVwb3N8MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVjID0gZmVhdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVFlQRScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGVjLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZSA9IHRlY1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS50eXBlID0gdGUuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnR5cGVJZCA9IHRlLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUudHlwZUN2ID0gdGUuZ2V0QXR0cmlidXRlKCdjdklkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGFzRmVhdHVyZS50eXBlID0gZWxlbWVudFZhbHVlKGZlYXR1cmUsIFwiVFlQRVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRhc0ZlYXR1cmUudHlwZSAmJiBkYXNGZWF0dXJlLnR5cGVJZCkge1xuICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnR5cGUgPSBkYXNGZWF0dXJlLnR5cGVJZDsgLy8gRklYTUU/XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUubWV0aG9kID0gZWxlbWVudFZhbHVlKGZlYXR1cmUsIFwiTUVUSE9EXCIpO1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yaSA9IGVsZW1lbnRWYWx1ZShmZWF0dXJlLCBcIk9SSUVOVEFUSU9OXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW9yaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpID0gJzAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUub3JpZW50YXRpb24gPSBvcmk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUuc2NvcmUgPSBlbGVtZW50VmFsdWUoZmVhdHVyZSwgXCJTQ09SRVwiKTtcbiAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLmxpbmtzID0gZGFzTGlua3NPZihmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLm5vdGVzID0gZGFzTm90ZXNPZihmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBzID0gZmVhdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIkdST1VQXCIpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGdpICA9IDA7IGdpIDwgZ3JvdXBzLmxlbmd0aDsgKytnaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBYTUwgPSBncm91cHNbZ2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGFzR3JvdXAgPSBuZXcgREFTR3JvdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgZGFzR3JvdXAudHlwZSA9IGdyb3VwWE1MLmdldEF0dHJpYnV0ZSgndHlwZScpO1xuICAgICAgICAgICAgICAgICAgICBkYXNHcm91cC5pZCA9IGdyb3VwWE1MLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZGFzR3JvdXAubGlua3MgPSBkYXNMaW5rc09mKGdyb3VwWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgZGFzR3JvdXAubm90ZXMgPSBkYXNOb3Rlc09mKGdyb3VwWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXNGZWF0dXJlLmdyb3Vwcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5ncm91cHMgPSBuZXcgQXJyYXkoZGFzR3JvdXApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5ncm91cHMucHVzaChkYXNHcm91cCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBNYWdpYyBub3Rlcy4gIENoZWNrIHdpdGggVEFEIGJlZm9yZSBjaGFuZ2luZyB0aGlzLlxuICAgICAgICAgICAgICAgIGlmIChkYXNGZWF0dXJlLm5vdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5pID0gMDsgbmkgPCBkYXNGZWF0dXJlLm5vdGVzLmxlbmd0aDsgKytuaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBkYXNGZWF0dXJlLm5vdGVzW25pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmluZGV4T2YoJ0dlbmVuYW1lPScpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2cgPSBuZXcgREFTR3JvdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZy50eXBlPSdnZW5lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZy5pZCA9IG4uc3Vic3RyaW5nKDkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGFzRmVhdHVyZS5ncm91cHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5ncm91cHMgPSBuZXcgQXJyYXkoZ2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUuZ3JvdXBzLnB1c2goZ2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZWMgPSBmZWF0dXJlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdQQVJUJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZWMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwaSA9IDA7IHBpIDwgcGVjLmxlbmd0aDsgKytwaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzLnB1c2gocGVjW3BpXS5nZXRBdHRyaWJ1dGUoJ2lkJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5wYXJ0cyA9IHBhcnRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlYyA9IGZlYXR1cmUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1BBUkVOVCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVjLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwaSA9IDA7IHBpIDwgcGVjLmxlbmd0aDsgKytwaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChwZWNbcGldLmdldEF0dHJpYnV0ZSgnaWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnBhcmVudHMgPSBwYXJlbnRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZGFzRmVhdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgY2FsbGJhY2soZmVhdHVyZXMsIHVuZGVmaW5lZCwgc2VnbWVudE1hcCk7XG4gICAgfSxcbiAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGNhbGxiYWNrKFtdLCBlcnIpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBEQVNBbGlnbm1lbnQodHlwZSkge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5vYmplY3RzID0ge307XG4gICAgdGhpcy5ibG9ja3MgPSBbXTtcbn1cblxuREFTU291cmNlLnByb3RvdHlwZS5hbGlnbm1lbnRzID0gZnVuY3Rpb24oc2VnbWVudCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgZGFzVVJJID0gdGhpcy5kYXNCYXNlVVJJICsgJ2FsaWdubWVudD9xdWVyeT0nICsgc2VnbWVudDtcbiAgICB0aGlzLmRvQ3Jvc3NEb21haW5SZXF1ZXN0KGRhc1VSSSwgZnVuY3Rpb24ocmVzcG9uc2VYTUwpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgY2FsbGJhY2soW10sICdGYWlsZWQgcmVxdWVzdCAnICsgZGFzVVJJKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhbGlnbm1lbnRzID0gW107XG4gICAgICAgIHZhciBhbGlYTUxzID0gcmVzcG9uc2VYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2FsaWdubWVudCcpO1xuICAgICAgICBmb3IgKHZhciBhaSA9IDA7IGFpIDwgYWxpWE1Mcy5sZW5ndGg7ICsrYWkpIHtcbiAgICAgICAgICAgIHZhciBhbGlYTUwgPSBhbGlYTUxzW2FpXTtcbiAgICAgICAgICAgIHZhciBhbGkgPSBuZXcgREFTQWxpZ25tZW50KGFsaVhNTC5nZXRBdHRyaWJ1dGUoJ2FsaWduVHlwZScpKTtcbiAgICAgICAgICAgIHZhciBvYmpYTUxzID0gYWxpWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhbGlnbk9iamVjdCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgb2kgPSAwOyBvaSA8IG9ialhNTHMubGVuZ3RoOyArK29pKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9ialhNTCA9IG9ialhNTHNbb2ldO1xuICAgICAgICAgICAgICAgIHZhciBvYmogPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAgICAgICAgICBvYmpYTUwuZ2V0QXR0cmlidXRlKCdpbnRPYmplY3RJZCcpLFxuICAgICAgICAgICAgICAgICAgICBhY2Nlc3Npb246ICAgb2JqWE1MLmdldEF0dHJpYnV0ZSgnZGJBY2Nlc3Npb25JZCcpLFxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiAgICAgb2JqWE1MLmdldEF0dHJpYnV0ZSgnb2JqZWN0VmVyc2lvbicpLFxuICAgICAgICAgICAgICAgICAgICBkYlNvdXJjZTogICAgb2JqWE1MLmdldEF0dHJpYnV0ZSgnZGJTb3VyY2UnKSxcbiAgICAgICAgICAgICAgICAgICAgZGJWZXJzaW9uOiAgIG9ialhNTC5nZXRBdHRyaWJ1dGUoJ2RiVmVyc2lvbicpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbGkub2JqZWN0c1tvYmouaWRdID0gb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgYmxvY2tYTUxzID0gYWxpWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdibG9jaycpO1xuICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGJsb2NrWE1Mcy5sZW5ndGg7ICsrYmkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2tYTUwgPSBibG9ja1hNTHNbYmldO1xuICAgICAgICAgICAgICAgIHZhciBibG9jayA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6ICAgICAgYmxvY2tYTUwuZ2V0QXR0cmlidXRlKCdibG9ja09yZGVyJyksXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRzOiAgIFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgc2VnWE1McyA9IGJsb2NrWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzZWdtZW50Jyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNlZ1hNTHMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdYTUwgPSBzZWdYTUxzW3NpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogICAgICBzZWdYTUwuZ2V0QXR0cmlidXRlKCdpbnRPYmplY3RJZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAgICAgICAgIHNlZ1hNTC5nZXRBdHRyaWJ1dGUoJ3N0YXJ0JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6ICAgICAgICAgc2VnWE1MLmdldEF0dHJpYnV0ZSgnZW5kJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJhbmQ6ICAgICAgc2VnWE1MLmdldEF0dHJpYnV0ZSgnc3RyYW5kJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaWdhcjogICAgICAgZWxlbWVudFZhbHVlKHNlZ1hNTCwgJ2NpZ2FyJylcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suc2VnbWVudHMucHVzaChzZWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhbGkuYmxvY2tzLnB1c2goYmxvY2spO1xuICAgICAgICAgICAgfSAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBhbGlnbm1lbnRzLnB1c2goYWxpKTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayhhbGlnbm1lbnRzKTtcbiAgICB9KTtcbn1cblxuXG5mdW5jdGlvbiBEQVNTdHlsZXNoZWV0KCkge1xuICAgIHRoaXMuc3R5bGVzID0gW107XG59XG5cbkRBU1N0eWxlc2hlZXQucHJvdG90eXBlLnB1c2hTdHlsZSA9IGZ1bmN0aW9uKGZpbHRlcnMsIHpvb20sIHN0eWxlKSB7XG4gICAgaWYgKCFmaWx0ZXJzKSB7XG4gICAgICAgIGZpbHRlcnMgPSB7dHlwZTogJ2RlZmF1bHQnfTtcbiAgICB9XG4gICAgdmFyIHN0eWxlSG9sZGVyID0gc2hhbGxvd0NvcHkoZmlsdGVycyk7XG4gICAgaWYgKHpvb20pIHtcbiAgICAgICAgc3R5bGVIb2xkZXIuem9vbSA9IHpvb207XG4gICAgfVxuICAgIHN0eWxlSG9sZGVyLnN0eWxlID0gc3R5bGU7XG4gICAgdGhpcy5zdHlsZXMucHVzaChzdHlsZUhvbGRlcik7XG59XG5cbmZ1bmN0aW9uIERBU1N0eWxlKCkge1xufVxuXG5mdW5jdGlvbiBwYXJzZUdyYWRpZW50KGdyYWQpIHtcbiAgICB2YXIgc3RlcHMgPSBncmFkLmdldEF0dHJpYnV0ZSgnc3RlcHMnKTtcbiAgICBpZiAoc3RlcHMpIHtcbiAgICAgICAgc3RlcHMgPSBzdGVwc3wwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ZXBzID0gNTA7XG4gICAgfVxuXG4gICAgdmFyIHN0b3BzID0gW107XG4gICAgdmFyIGNvbG9ycyA9IFtdO1xuICAgIHZhciBzZSA9IGdyYWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1NUT1AnKTtcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc2UubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgIHZhciBzdG9wID0gc2Vbc2ldO1xuICAgICAgICBzdG9wcy5wdXNoKDEuMCAqIHN0b3AuZ2V0QXR0cmlidXRlKCdzY29yZScpKTtcbiAgICAgICAgY29sb3JzLnB1c2goc3RvcC5maXJzdENoaWxkLm5vZGVWYWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1ha2VDb2xvdXJTdGVwcyhzdGVwcywgc3RvcHMsIGNvbG9ycyk7XG59XG5cbkRBU1NvdXJjZS5wcm90b3R5cGUuc3R5bGVzaGVldCA9IGZ1bmN0aW9uKHN1Y2Nlc3NDQiwgZmFpbHVyZUNCKSB7XG4gICAgdmFyIGRhc1VSSSwgY3JlZHMgPSB0aGlzLmNyZWRlbnRpYWxzO1xuICAgIGlmICh0aGlzLnN0eWxlc2hlZXRfdXJpKSB7XG4gICAgICAgIGRhc1VSSSA9IHRoaXMuc3R5bGVzaGVldF91cmk7XG4gICAgICAgIGNyZWRzID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGFzVVJJID0gdGhpcy5kYXNCYXNlVVJJICsgJ3N0eWxlc2hlZXQnO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0VVJJKGRhc1VSSSkudGhlbihmdW5jdGlvbihkYXNVUkkpIHtcbiAgICAgICAgZG9Dcm9zc0RvbWFpblJlcXVlc3QoZGFzVVJJLCBmdW5jdGlvbihyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlQ0IpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZUNCKCk7XG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XG4gICAgICAgICAgICB2YXIgdHlwZVhNTHMgPSByZXNwb25zZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVFlQRScpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlWE1Mcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlU3R5bGUgPSB0eXBlWE1Mc1tpXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSB7fTtcbiAgICAgICAgICAgICAgICBmaWx0ZXIudHlwZSA9IHR5cGVTdHlsZS5nZXRBdHRyaWJ1dGUoJ2lkJyk7IC8vIEFtIEkgcmlnaHQgaW4gdGhpbmtpbmcgdGhhdCB0aGlzIG1ha2VzIERBU1NUWUxFIFhNTCBpbnZhbGlkPyAgVWdoLlxuICAgICAgICAgICAgICAgIGZpbHRlci5sYWJlbCA9IHR5cGVTdHlsZS5nZXRBdHRyaWJ1dGUoJ2xhYmVsJyk7XG4gICAgICAgICAgICAgICAgZmlsdGVyLm1ldGhvZCA9IHR5cGVTdHlsZS5nZXRBdHRyaWJ1dGUoJ21ldGhvZCcpO1xuICAgICAgICAgICAgICAgIHZhciBnbHlwaFhNTHMgPSB0eXBlU3R5bGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0dMWVBIJyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZ2kgPSAwOyBnaSA8IGdseXBoWE1Mcy5sZW5ndGg7ICsrZ2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdseXBoWE1MID0gZ2x5cGhYTUxzW2dpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHpvb20gPSBnbHlwaFhNTC5nZXRBdHRyaWJ1dGUoJ3pvb20nKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdseXBoID0gY2hpbGRFbGVtZW50T2YoZ2x5cGhYTUwpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZ2x5cGggPSBnbHlwaC5sb2NhbE5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGdseXBoLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5sb2NhbE5hbWUgPT0gJ0JHR1JBRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVbY2hpbGQubG9jYWxOYW1lXSA9IHBhcnNlR3JhZGllbnQoY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlW2NoaWxkLmxvY2FsTmFtZV0gPSBjaGlsZC5maXJzdENoaWxkLm5vZGVWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKGZpbHRlciwgem9vbSwgc3R5bGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1Y2Nlc3NDQihzdHlsZXNoZWV0KTtcbiAgICAgICAgfSwgY3JlZHMpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICBmYWlsdXJlQ0IoKTtcbiAgICB9KTtcbn1cblxuLy9cbi8vIHNvdXJjZXMgY29tbWFuZFxuLy8gXG5cbmZ1bmN0aW9uIERBU1JlZ2lzdHJ5KHVyaSwgb3B0cylcbntcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICB0aGlzLnVyaSA9IHVyaTtcbiAgICB0aGlzLm9wdHMgPSBvcHRzOyAgIFxufVxuXG5EQVNSZWdpc3RyeS5wcm90b3R5cGUuc291cmNlcyA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBmYWlsdXJlLCBvcHRzKVxue1xuICAgIGlmICghb3B0cykge1xuICAgICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIGZpbHRlcnMgPSBbXTtcbiAgICBpZiAob3B0cy50YXhvbikge1xuICAgICAgICBmaWx0ZXJzLnB1c2goJ29yZ2FuaXNtPScgKyBvcHRzLnRheG9uKTtcbiAgICB9XG4gICAgaWYgKG9wdHMuYXV0aCkge1xuICAgICAgICBmaWx0ZXJzLnB1c2goJ2F1dGhvcml0eT0nICsgb3B0cy5hdXRoKTtcbiAgICB9XG4gICAgaWYgKG9wdHMudmVyc2lvbikge1xuICAgICAgICBmaWx0ZXJzLnB1c2goJ3ZlcnNpb249JyArIG9wdHMudmVyc2lvbik7XG4gICAgfVxuICAgIHZhciBxdXJpID0gdGhpcy51cmk7XG4gICAgaWYgKGZpbHRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICBxdXJpID0gcXVyaSArICc/JyArIGZpbHRlcnMuam9pbignJicpOyAgIC8vICcmJyBhcyBhIHNlcGFyYXRvciB0byBoYWNrIGFyb3VuZCBkYXNyZWdpc3RyeS5vcmcgYnVnLlxuICAgIH1cblxuICAgIGRvQ3Jvc3NEb21haW5SZXF1ZXN0KHF1cmksIGZ1bmN0aW9uKHJlc3BvbnNlWE1MKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2VYTUwgJiYgZmFpbHVyZSkge1xuICAgICAgICAgICAgZmFpbHVyZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNvdXJjZXMgPSBbXTsgICAgICAgXG4gICAgICAgIHZhciBzb3VyY2VYTUxzID0gcmVzcG9uc2VYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1NPVVJDRScpO1xuICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc291cmNlWE1Mcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VYTUwgPSBzb3VyY2VYTUxzW3NpXTtcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uWE1McyA9IHNvdXJjZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVkVSU0lPTicpO1xuICAgICAgICAgICAgaWYgKHZlcnNpb25YTUxzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2ZXJzaW9uWE1MID0gdmVyc2lvblhNTHNbMF07XG5cbiAgICAgICAgICAgIHZhciBjb29yZFhNTHMgPSB2ZXJzaW9uWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdDT09SRElOQVRFUycpO1xuICAgICAgICAgICAgdmFyIGNvb3JkcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNvb3JkWE1Mcy5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29vcmRYTUwgPSBjb29yZFhNTHNbY2ldO1xuICAgICAgICAgICAgICAgIHZhciBjb29yZCA9IG5ldyBEQVNDb29yZHMoKTtcbiAgICAgICAgICAgICAgICBjb29yZC5hdXRoID0gY29vcmRYTUwuZ2V0QXR0cmlidXRlKCdhdXRob3JpdHknKTtcbiAgICAgICAgICAgICAgICBjb29yZC50YXhvbiA9IGNvb3JkWE1MLmdldEF0dHJpYnV0ZSgndGF4aWQnKTtcbiAgICAgICAgICAgICAgICBjb29yZC52ZXJzaW9uID0gY29vcmRYTUwuZ2V0QXR0cmlidXRlKCd2ZXJzaW9uJyk7XG4gICAgICAgICAgICAgICAgY29vcmRzLnB1c2goY29vcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgY2FwcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGNhcFhNTHMgPSB2ZXJzaW9uWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdDQVBBQklMSVRZJyk7XG4gICAgICAgICAgICB2YXIgdXJpO1xuICAgICAgICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNhcFhNTHMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhcFhNTCA9IGNhcFhNTHNbY2ldO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhcHMucHVzaChjYXBYTUwuZ2V0QXR0cmlidXRlKCd0eXBlJykpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNhcFhNTC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PSAnZGFzMTpmZWF0dXJlcycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZlcCA9IGNhcFhNTC5nZXRBdHRyaWJ1dGUoJ3F1ZXJ5X3VyaScpO1xuICAgICAgICAgICAgICAgICAgICB1cmkgPSBmZXAuc3Vic3RyaW5nKDAsIGZlcC5sZW5ndGggLSAoJ2ZlYXR1cmVzJy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwcm9wcyA9IHt9O1xuICAgICAgICAgICAgdmFyIHByb3BYTUxzID0gdmVyc2lvblhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnUFJPUCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgcGkgPSAwOyBwaSA8IHByb3BYTUxzLmxlbmd0aDsgKytwaSkge1xuICAgICAgICAgICAgICAgIHB1c2hvKHByb3BzLCBwcm9wWE1Mc1twaV0uZ2V0QXR0cmlidXRlKCduYW1lJyksIHByb3BYTUxzW3BpXS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodXJpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBEQVNTb3VyY2UodXJpLCB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZV91cmk6IHNvdXJjZVhNTC5nZXRBdHRyaWJ1dGUoJ3VyaScpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAgc291cmNlWE1MLmdldEF0dHJpYnV0ZSgndGl0bGUnKSxcbiAgICAgICAgICAgICAgICAgICAgZGVzYzogIHNvdXJjZVhNTC5nZXRBdHRyaWJ1dGUoJ2Rlc2NyaXB0aW9uJyksXG4gICAgICAgICAgICAgICAgICAgIGNvb3JkczogY29vcmRzLFxuICAgICAgICAgICAgICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgICAgICAgICAgICAgIGNhcGFiaWxpdGllczogY2Fwc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNvdXJjZXMucHVzaChzb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjYWxsYmFjayhzb3VyY2VzKTtcbiAgICB9KTtcbn1cblxuXG4vL1xuLy8gVXRpbGl0eSBmdW5jdGlvbnNcbi8vXG5cbmZ1bmN0aW9uIGVsZW1lbnRWYWx1ZShlbGVtZW50LCB0YWcpXG57XG4gICAgdmFyIGNoaWxkcmVuID0gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcpO1xuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAwICYmIGNoaWxkcmVuWzBdLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgdmFyIGMgPSBjaGlsZHJlblswXTtcbiAgICAgICAgaWYgKGMuY2hpbGROb2Rlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGMuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcyA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgbmkgPSAwOyBuaSA8IGMuY2hpbGROb2Rlcy5sZW5ndGg7ICsrbmkpIHtcbiAgICAgICAgICAgICAgICBzICs9IGMuY2hpbGROb2Rlc1tuaV0ubm9kZVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hpbGRFbGVtZW50T2YoZWxlbWVudClcbntcbiAgICBpZiAoZWxlbWVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5maXJzdENoaWxkO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfSB3aGlsZSAoY2hpbGQgIT0gbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5cbmZ1bmN0aW9uIGRhc0xpbmtzT2YoZWxlbWVudClcbntcbiAgICB2YXIgbGlua3MgPSBuZXcgQXJyYXkoKTtcbiAgICB2YXIgbWF5YmVMaW5rQ2hpbGRlbiA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0xJTksnKTtcbiAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgbWF5YmVMaW5rQ2hpbGRlbi5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgdmFyIGxpbmtYTUwgPSBtYXliZUxpbmtDaGlsZGVuW2NpXTtcbiAgICAgICAgaWYgKGxpbmtYTUwucGFyZW50Tm9kZSA9PSBlbGVtZW50KSB7XG4gICAgICAgICAgICBsaW5rcy5wdXNoKG5ldyBEQVNMaW5rKGxpbmtYTUwuZmlyc3RDaGlsZCA/IGxpbmtYTUwuZmlyc3RDaGlsZC5ub2RlVmFsdWUgOiAnVW5rbm93bicsIGxpbmtYTUwuZ2V0QXR0cmlidXRlKCdocmVmJykpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbGlua3M7XG59XG5cbmZ1bmN0aW9uIGRhc05vdGVzT2YoZWxlbWVudClcbntcbiAgICB2YXIgbm90ZXMgPSBbXTtcbiAgICB2YXIgbWF5YmVOb3RlcyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ05PVEUnKTtcbiAgICBmb3IgKHZhciBuaSA9IDA7IG5pIDwgbWF5YmVOb3Rlcy5sZW5ndGg7ICsrbmkpIHtcbiAgICAgICAgaWYgKG1heWJlTm90ZXNbbmldLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIG5vdGVzLnB1c2gobWF5YmVOb3Rlc1tuaV0uZmlyc3RDaGlsZC5ub2RlVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub3Rlcztcbn1cblxuZnVuY3Rpb24gZG9Dcm9zc0RvbWFpblJlcXVlc3QodXJsLCBoYW5kbGVyLCBjcmVkZW50aWFscywgY3VzdEF1dGgpIHtcbiAgICAvLyBUT0RPOiBleHBsaWNpdCBlcnJvciBoYW5kbGVycz9cblxuICAgIGlmICh3aW5kb3cuWERvbWFpblJlcXVlc3QpIHtcbiAgICAgICAgdmFyIHJlcSA9IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xuICAgICAgICByZXEub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZG9tID0gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MRE9NXCIpO1xuICAgICAgICAgICAgZG9tLmFzeW5jID0gZmFsc2U7XG4gICAgICAgICAgICBkb20ubG9hZFhNTChyZXEucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIGhhbmRsZXIoZG9tKTtcbiAgICAgICAgfVxuICAgICAgICByZXEub3BlbihcImdldFwiLCB1cmwpO1xuICAgICAgICByZXEuc2VuZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aW1pbmcgb3V0ICcgICsgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIobnVsbCwgcmVxKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIDUwMDBcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJlcS5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGltZW91dCBvbiAnICsgdXJsKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID49IDIwMCB8fCByZXEuc3RhdHVzID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIocmVxLnJlc3BvbnNlWE1MLCByZXEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcS5vcGVuKFwiZ2V0XCIsIHVybCwgdHJ1ZSk7XG4gICAgICAgICAgICAvLyBJRTEwLzExIGZpeDogVGhlIHRpbWVvdXQgcHJvcGVydHkgbWF5IGJlIHNldCBvbmx5IGluIHRoZSB0aW1lIGludGVydmFsIGJldHdlZW4gYSBjYWxsIHRvIHRoZSBvcGVuIG1ldGhvZFxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgIGFuZCB0aGUgZmlyc3QgY2FsbCB0byB0aGUgc2VuZCBtZXRob2QuXG4gICAgICAgICAgICByZXEudGltZW91dCA9IDUwMDA7XG4gICAgICAgICAgICBpZiAoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICByZXEud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXN0QXV0aCkge1xuICAgICAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdYLURBUy1BdXRob3Jpc2F0aW9uJywgY3VzdEF1dGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQveG1sJyk7XG4gICAgICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL3htbCwqLyonKTtcbiAgICAgICAgICAgIHJlcS5zZW5kKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGhhbmRsZXIobnVsbCwgcmVxLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuREFTU291cmNlLnByb3RvdHlwZS5kb0Nyb3NzRG9tYWluUmVxdWVzdCA9IGZ1bmN0aW9uKHVybCwgaGFuZGxlciwgZXJySGFuZGxlcikge1xuICAgIHZhciBjdXN0QXV0aDtcbiAgICBpZiAodGhpcy54VXNlcikge1xuICAgICAgICBjdXN0QXV0aCA9ICdCYXNpYyAnICsgYnRvYSh0aGlzLnhVc2VyICsgJzonICsgdGhpcy54UGFzcyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRvQ3Jvc3NEb21haW5SZXF1ZXN0KHVybCwgaGFuZGxlciwgdGhpcy5jcmVkZW50aWFscywgY3VzdEF1dGgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoZXJySGFuZGxlcikge1xuICAgICAgICAgICAgZXJySGFuZGxlcihlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0Rhc0Jvb2xlYW5UcnVlKHMpIHtcbiAgICBzID0gKCcnICsgcykudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gcz09PSd5ZXMnIHx8IHM9PT0ndHJ1ZSc7XG59XG5cbmZ1bmN0aW9uIGlzRGFzQm9vbGVhbk5vdEZhbHNlKHMpIHtcbiAgICBpZiAoIXMpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIHMgPSAoJycgKyBzKS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBzIT09J25vJyB8fCBzIT09J2ZhbHNlJztcbn1cblxuZnVuY3Rpb24gY29weVN0eWxlc2hlZXQoc3MpIHtcbiAgICB2YXIgbnNzID0gc2hhbGxvd0NvcHkoc3MpO1xuICAgIG5zcy5zdHlsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3Muc3R5bGVzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICB2YXIgc2ggPSBuc3Muc3R5bGVzW3NpXSA9IHNoYWxsb3dDb3B5KHNzLnN0eWxlc1tzaV0pO1xuICAgICAgICBzaC5fbWV0aG9kUkUgPSBzaC5fbGFiZWxSRSA9IHNoLl90eXBlUkUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHNoLnN0eWxlID0gc2hhbGxvd0NvcHkoc2guc3R5bGUpO1xuICAgICAgICBzaC5zdHlsZS5pZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgc2guc3R5bGUuX2dyYWRpZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbnNzO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIERBU0dyb3VwOiBEQVNHcm91cCxcbiAgICAgICAgREFTRmVhdHVyZTogREFTRmVhdHVyZSxcbiAgICAgICAgREFTU3R5bGVzaGVldDogREFTU3R5bGVzaGVldCxcbiAgICAgICAgREFTU3R5bGU6IERBU1N0eWxlLFxuICAgICAgICBEQVNTb3VyY2U6IERBU1NvdXJjZSxcbiAgICAgICAgREFTU2VnbWVudDogREFTU2VnbWVudCxcbiAgICAgICAgREFTUmVnaXN0cnk6IERBU1JlZ2lzdHJ5LFxuICAgICAgICBEQVNTZXF1ZW5jZTogREFTU2VxdWVuY2UsXG4gICAgICAgIERBU0xpbms6IERBU0xpbmssXG5cbiAgICAgICAgaXNEYXNCb29sZWFuVHJ1ZTogaXNEYXNCb29sZWFuVHJ1ZSxcbiAgICAgICAgaXNEYXNCb29sZWFuTm90RmFsc2U6IGlzRGFzQm9vbGVhbk5vdEZhbHNlLFxuICAgICAgICBjb3B5U3R5bGVzaGVldDogY29weVN0eWxlc2hlZXQsXG4gICAgICAgIGNvb3Jkc01hdGNoOiBjb29yZHNNYXRjaFxuICAgIH07XG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgU3ViVGllciB9IGZyb20gXCIuL2ZlYXR1cmUtZHJhdy5qc1wiO1xuXG5pbXBvcnQgeyBkcmF3U2VxVGllciB9IGZyb20gXCIuL3NlcXVlbmNlLWRyYXcuanNcIjtcblxuXG5pbXBvcnQgeyBSYW5nZSwgdW5pb24gfSBmcm9tIFwiLi9zcGFucy5qc1wiO1xuXG5pbXBvcnQgeyBzaGFsbG93Q29weSwgcHVzaG8gfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG5cbmltcG9ydCAqIGFzIEdseXBocyBmcm9tIFwiLi9nbHlwaHMuanNcIjtcblxuaW1wb3J0IHsgaXNEYXNCb29sZWFuVHJ1ZSxcbiAgICAgICAgIGlzRGFzQm9vbGVhbk5vdEZhbHNlLFxuICAgICAgICAgREFTRmVhdHVyZSB9IGZyb20gXCIuL2Rhcy5qc1wiO1xuXG5pbXBvcnQgeyBtYWtlR3JhZGllbnQgfSBmcm9tIFwiLi9jb2xvci5qc1wiO1xuXG5pbXBvcnQgeyBwYXJzZUNpZ2FyIH0gZnJvbSBcIi4vY2lnYXIuanNcIjtcblxuaW1wb3J0IHsgZm9ybWF0UXVhbnRMYWJlbCB9IGZyb20gXCIuL251bWZvcm1hdHNcIjtcblxuaW1wb3J0ICogYXMgUiBmcm9tIFwicmFtZGFcIjtcblxuLy8gVGhlIG9ubHkgZnVuY3Rpb25zIHRoYXQgbXVzdCBiZSBleHBvcnRlZCBieSBhIHJlbmRlcmVyIGFyZSByZW5kZXJUaWVyXG4vLyBhbmQgZHJhd1RpZXIsIHRoZSByZXN0IGFyZSBleHBvcnRlZCBmb3IgdXNlIGluIG90aGVyIHJlbmRlcmVycy5cbmV4cG9ydCB7IHJlbmRlclRpZXIsXG4gICAgICAgICBkcmF3VGllcixcbiAgICAgICAgIHByZXBhcmVTdWJ0aWVycyxcbiAgICAgICAgIHByZXBhcmVWaWV3cG9ydCxcbiAgICAgICAgIHBhaW50LFxuICAgICAgICAgZHJhd1VubWFwcGVkLFxuICAgICAgICAgY2xlYXJWaWV3cG9ydCxcbiAgICAgICAgIGNyZWF0ZVF1YW50T3ZlcmxheSxcbiAgICAgICAgIHBhaW50UXVhbnQsXG4gICAgICAgICBmZWF0dXJlTG9va3VwXG4gICAgICAgfTtcblxuZnVuY3Rpb24gcmVuZGVyVGllcihzdGF0dXMsIHRpZXIpIHtcbiAgICBkcmF3VGllcih0aWVyKTtcbiAgICB0aWVyLnVwZGF0ZVN0YXR1cyhzdGF0dXMpO1xufVxuXG5mdW5jdGlvbiBkcmF3VGllcih0aWVyKSB7XG4gICAgbGV0IGNhbnZhcyA9IHRpZXIudmlld3BvcnQuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGxldCByZXRpbmEgPSB0aWVyLmJyb3dzZXIucmV0aW5hICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMTtcblxuICAgIGlmICh0aWVyLnNlcXVlbmNlU291cmNlKSB7XG4gICAgICAgIGxldCBzZXF1ZW5jZSA9IHRpZXIuY3VycmVudFNlcXVlbmNlO1xuICAgICAgICBkcmF3U2VxVGllcih0aWVyLCBzZXF1ZW5jZSk7XG4gICAgfSBlbHNlIGlmICh0aWVyLmN1cnJlbnRGZWF0dXJlcykge1xuICAgICAgICBwcmVwYXJlU3VidGllcnModGllciwgY2FudmFzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHNlcXVlbmNlIG9yIGZlYXR1cmVzIGluIHRpZXIhXCIpO1xuICAgIH1cblxuICAgIGlmICh0aWVyLnN1YnRpZXJzKSB7XG4gICAgICAgIGxldCB2T2Zmc2V0ID0gUi5kZWZhdWx0VG8oMCwgdGllci5kYXNTb3VyY2Uudk9mZnNldCk7XG5cbiAgICAgICAgcHJlcGFyZVZpZXdwb3J0KHRpZXIsIGNhbnZhcywgcmV0aW5hLCB0cnVlLCB2T2Zmc2V0KTsgICAvLyBOQiBjYWxscyBjYW52YXMuc2F2ZVxuICAgICAgICBwYWludCh0aWVyLCBjYW52YXMsIHZPZmZzZXQpO1xuICAgICAgICBjYW52YXMucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIHRpZXIuZHJhd092ZXJsYXkoKTtcbiAgICB0aWVyLnBhaW50UXVhbnQoKTtcblxuICAgIGlmICh0eXBlb2YodGllci5kYXNTb3VyY2UuZHJhd0NhbGxiYWNrKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRpZXIuZGFzU291cmNlLmRyYXdDYWxsYmFjayhjYW52YXMsIHRpZXIpO1xuICAgIH1cblxuICAgIHRpZXIub3JpZ2luSGF4eCA9IDA7XG4gICAgdGllci5icm93c2VyLmFycmFuZ2VUaWVycygpO1xufVxuXG5mdW5jdGlvbiBnbHlwaHNGb3JHcm91cChjYW52YXMsIGZlYXR1cmVzLCB5LCBncm91cEVsZW1lbnQsIHRpZXIpIHtcbiAgICBsZXQgZ3N0eWxlID0gdGllci5zdHlsZUZvckZlYXR1cmUoZ3JvdXBFbGVtZW50KTtcbiAgICBsZXQgbGFiZWw7XG4gICAgbGV0IGxhYmVsV2FudGVkID0gZmFsc2U7XG5cbiAgICBsZXQgZ2x5cGhzID0gW107XG4gICAgbGV0IHN0cmFuZCA9IG51bGw7XG5cbiAgICBmZWF0dXJlcy5mb3JFYWNoKGYgPT4ge1xuICAgICAgICBpZiAoZi5vcmllbnRhdGlvbiAmJiBzdHJhbmQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHN0cmFuZCA9IGYub3JpZW50YXRpb247XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWxhYmVsICYmIGYubGFiZWwpIHtcbiAgICAgICAgICAgIGxhYmVsID0gZi5sYWJlbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdHlsZSA9IHRpZXIuc3R5bGVGb3JGZWF0dXJlKGYpO1xuICAgICAgICBpZiAoc3R5bGUgJiYgIWYucGFydHMpIHtcbiAgICAgICAgICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkxBQkVMKSlcbiAgICAgICAgICAgICAgICBsYWJlbFdhbnRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIGxldCBnbHlwaCA9IGdseXBoRm9yRmVhdHVyZShjYW52YXMsIGYsIHksIHN0eWxlLCB0aWVyLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIGlmIChnbHlwaClcbiAgICAgICAgICAgICAgICBnbHlwaHMucHVzaChnbHlwaCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChnbHlwaHMubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgIGxldCBjb25uZWN0b3IgPSAnZmxhdCc7XG4gICAgaWYgKGdzdHlsZSAmJiBnc3R5bGUuZ2x5cGggPT09ICdMSU5FJykge1xuICAgICAgICAvLyBTdGljayB3aXRoIGZsYXQuLi5cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGllci5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyAmJiAhdGllci5idW1wZWQpIHtcbiAgICAgICAgICAgIGlmIChzdHJhbmQgPT09ICcrJyB8fCBzdHJhbmQgPT09ICctJykge1xuICAgICAgICAgICAgICAgIGNvbm5lY3RvciA9ICdjb2xsYXBzZWQnICsgc3RyYW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHN0cmFuZCA9PT0gJysnIHx8IHN0cmFuZCA9PT0gJy0nKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdG9yID0gJ2hhdCcgKyBzdHJhbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgbGFiZWxUZXh0ID0gbnVsbDtcbiAgICBpZiAoKGxhYmVsICYmIGxhYmVsV2FudGVkKSB8fFxuICAgICAgICAoZ3N0eWxlICYmIChpc0Rhc0Jvb2xlYW5UcnVlKGdzdHlsZS5MQUJFTCkgfHxcbiAgICAgICAgICAgICAgICAgICAgaXNEYXNCb29sZWFuVHJ1ZShnc3R5bGUuTEFCRUxTKSkpKSB7ICAvLyBIQUNLLCBMQUJFTFMgc2hvdWxkIHdvcmsuXG4gICAgICAgIGxhYmVsVGV4dCA9IGdyb3VwRWxlbWVudC5sYWJlbCB8fCBsYWJlbDtcbiAgICB9XG5cbiAgICBnbHlwaHMuc29ydCgoZzEsIGcyKSA9PiAoZzEuemluZGV4IHx8IDApIC0gKGcyLnppbmRleCB8fCAwKSk7XG5cbiAgICBsZXQgZ3JvdXBHbHlwaCA9IG5ldyBHbHlwaHMuR3JvdXBHbHlwaChnbHlwaHMsIGNvbm5lY3Rvcik7XG4gICAgaWYgKGxhYmVsVGV4dCkge1xuICAgICAgICBpZiAoc3RyYW5kID09PSAnKycpIHtcbiAgICAgICAgICAgIGxhYmVsVGV4dCA9ICc+JyArIGxhYmVsVGV4dDtcbiAgICAgICAgfSBlbHNlIGlmIChzdHJhbmQgPT09ICctJykge1xuICAgICAgICAgICAgbGFiZWxUZXh0ID0gJzwnICsgbGFiZWxUZXh0O1xuICAgICAgICB9XG4gICAgICAgIGdyb3VwR2x5cGggPSBuZXcgR2x5cGhzLkxhYmVsbGVkR2x5cGgoY2FudmFzLCBncm91cEdseXBoLCBsYWJlbFRleHQsIGZhbHNlKTtcbiAgICB9XG4gICAgZ3JvdXBHbHlwaC5idW1wID0gdHJ1ZTtcbiAgICByZXR1cm4gZ3JvdXBHbHlwaDtcbn1cblxuZnVuY3Rpb24gZ2x5cGhGb3JGZWF0dXJlKGNhbnZhcywgZmVhdHVyZSwgeSwgc3R5bGUsIHRpZXIsIGZvcmNlSGVpZ2h0LCBub0xhYmVsKSB7XG4gICAgbGV0IHNjYWxlID0gdGllci5icm93c2VyLnNjYWxlO1xuICAgIGxldCBvcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xuICAgIGxldCBnbHlwaFR5cGUgPSBzdHlsZS5nbHlwaCB8fCAnQk9YJztcblxuICAgIGxldCBtaW4gPSBmZWF0dXJlLm1pbjtcbiAgICBsZXQgbWF4ID0gZmVhdHVyZS5tYXg7XG4gICAgbGV0IHN0cmFuZCA9IGZlYXR1cmUub3JpZW50YXRpb247XG4gICAgbGV0IHNjb3JlID0gZmVhdHVyZS5zY29yZTtcbiAgICBsZXQgbGFiZWwgPSBmZWF0dXJlLmxhYmVsIHx8IGZlYXR1cmUuaWQ7XG5cbiAgICAvLyBIaWRlIGdseXBocyB0aGF0IGFyZSBzbWFsbGVyIHRoYW4gYSBwaXhlbCBpbiB3aWR0aC5cbiAgICBpZiAodGllci5kYXNTb3VyY2UuaGlkZVN1YnBpeGVsR2x5cGhzICYmIChtYXggLSBtaW4pICogc2NhbGUgPCAxKSByZXR1cm4gbnVsbDtcblxuICAgIGxldCBtaW5Qb3MgPSAobWluIC0gb3JpZ2luKSAqIHNjYWxlO1xuICAgIGxldCByYXdNYXhQb3MgPSAoKG1heCAtIG9yaWdpbiArIDEpICogc2NhbGUpO1xuICAgIGxldCBtYXhQb3MgPSBNYXRoLm1heChyYXdNYXhQb3MsIG1pblBvcyArIDEpO1xuXG4gICAgZm9yY2VIZWlnaHQgPSBmb3JjZUhlaWdodCAqIDEuMDtcbiAgICBsZXQgaGVpZ2h0ID0gKHRpZXIuZm9yY2VIZWlnaHQgfHwgc3R5bGUuSEVJR0hUIHx8IGZvcmNlSGVpZ2h0IHx8IDEyKSAqIDEuMDtcbiAgICBoZWlnaHQgPSBoZWlnaHQgKiAxLjA7XG4gICAgbGV0IGJ1bXAgPSBzdHlsZS5CVU1QICYmIGlzRGFzQm9vbGVhblRydWUoc3R5bGUuQlVNUCk7XG5cbiAgICBsZXQgZ2x5cGg7XG4gICAgbGV0IHF1YW50O1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBnbHlwaFxuICAgIGlmIChnbHlwaFR5cGUgPT09ICdDUk9TUycgfHxcbiAgICAgICAgZ2x5cGhUeXBlID09PSAnRVgnIHx8XG4gICAgICAgIGdseXBoVHlwZSA9PT0gJ1RSSUFOR0xFJyB8fFxuICAgICAgICBnbHlwaFR5cGUgPT09ICdET1QnIHx8XG4gICAgICAgIGdseXBoVHlwZSA9PT0gJ1NRVUFSRScgfHxcbiAgICAgICAgZ2x5cGhUeXBlID09PSAnU1RBUicgfHxcbiAgICAgICAgZ2x5cGhUeXBlID09PSAnUExJTVNPTEwnKSB7XG4gICAgICAgIGNvbnN0IGdseXBoSG9sZGVyID0gZmVhdHVyZVRvQ3Jvc3NMaWtlR2x5cGgoY2FudmFzLCB0aWVyLCBmZWF0dXJlLCB5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdseXBoVHlwZSwgc3R5bGUsIGZvcmNlSGVpZ2h0LCBub0xhYmVsKTtcbiAgICAgICAgaWYgKGdseXBoSG9sZGVyKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgW2dseXBoLCBxdWFudF0gPSBnbHlwaEhvbGRlcjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnSElTVE9HUkFNJyB8fCBnbHlwaFR5cGUgPT09ICdHUkFESUVOVCcgJiYgc2NvcmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIFtnbHlwaCwgcXVhbnRdID0gZmVhdHVyZVRvR3JhZGllbnRMaWtlR2x5cGgoY2FudmFzLCB0aWVyLCBmZWF0dXJlLCB5LCBnbHlwaFR5cGUsIHN0eWxlLCBmb3JjZUhlaWdodCk7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ0hJRERFTicpIHtcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLlBhZGRlZEdseXBoKG51bGwsIG1pblBvcywgbWF4UG9zKTtcbiAgICAgICAgbm9MYWJlbCA9IHRydWU7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ0FSUk9XJykge1xuICAgICAgICBsZXQgY29sb3IgPSBzdHlsZS5GR0NPTE9SIHx8ICdwdXJwbGUnO1xuICAgICAgICBsZXQgcGFyYWxsZWwgPSBpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLlBBUkFMTEVMKTtcbiAgICAgICAgbGV0IHN3ID0gaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5TT1VUSFdFU1QpO1xuICAgICAgICBsZXQgbmUgPSBpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLk5PUlRIRUFTVCk7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5BcnJvd0dseXBoKG1pblBvcywgbWF4UG9zLCBoZWlnaHQsIGNvbG9yLCBwYXJhbGxlbCwgc3csIG5lKTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnQU5DSE9SRURfQVJST1cnKSB7XG4gICAgICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8ICdub25lJztcbiAgICAgICAgbGV0IGZpbGwgPSBzdHlsZS5CR0NPTE9SIHx8ICdncmVlbic7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5BQXJyb3dHbHlwaChtaW5Qb3MsIG1heFBvcywgaGVpZ2h0LCBmaWxsLCBzdHJva2UsIHN0cmFuZCk7XG4gICAgICAgIGdseXBoLmJ1bXAgPSB0cnVlO1xuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdTUEFOJykge1xuICAgICAgICBsZXQgc3Ryb2tlID0gc3R5bGUuRkdDT0xPUiB8fCAnYmxhY2snO1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuU3BhbkdseXBoKG1pblBvcywgbWF4UG9zLCBoZWlnaHQsIHN0cm9rZSk7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ0xJTkUnKSB7XG4gICAgICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8ICdibGFjayc7XG4gICAgICAgIGxldCBsaW5lU3R5bGUgPSBzdHlsZS5TVFlMRSB8fCAnc29saWQnO1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuTGluZUdseXBoKG1pblBvcywgbWF4UG9zLCBoZWlnaHQsIGxpbmVTdHlsZSwgc3RyYW5kLCBzdHJva2UpO1xuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdQUklNRVJTJykge1xuICAgICAgICBsZXQgc3Ryb2tlID0gc3R5bGUuRkdDT0xPUiB8fCAnYmxhY2snO1xuICAgICAgICBsZXQgZmlsbCA9IHN0eWxlLkJHQ09MT1IgfHwgJ3JlZCc7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5QcmltZXJzR2x5cGgobWluUG9zLCBtYXhQb3MsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnVEVYVCcpIHtcbiAgICAgICAgbGV0IHN0cmluZyA9IHN0eWxlLlNUUklORyB8fCAndGV4dCc7XG4gICAgICAgIGxldCBmaWxsID0gc3R5bGUuRkdDT0xPUiB8fCAnYmxhY2snO1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuVGV4dEdseXBoKGNhbnZhcywgbWluUG9zLCBtYXhQb3MsIGhlaWdodCwgZmlsbCwgc3RyaW5nKTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnVE9PTUFOWScpIHtcbiAgICAgICAgbGV0IHN0cm9rZSA9IHN0eWxlLkZHQ09MT1IgfHwgJ2dyYXknO1xuICAgICAgICBsZXQgZmlsbCA9IHN0eWxlLkJHQ09MT1IgfHwgJ29yYW5nZSc7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5Ub29NYW55R2x5cGgobWluUG9zLCBtYXhQb3MsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnUE9JTlQnKSB7XG4gICAgICAgIFtnbHlwaCwgcXVhbnRdID0gZmVhdHVyZVRvUG9pbnRHbHlwaCh0aWVyLCBmZWF0dXJlLCBzdHlsZSk7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ19fU0VRVUVOQ0UnKSB7XG4gICAgICAgIGdseXBoID0gc2VxdWVuY2VHbHlwaChjYW52YXMsIHRpZXIsIGZlYXR1cmUsIHN0eWxlLCBmb3JjZUhlaWdodCk7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ19fSU5TRVJUSU9OJykge1xuICAgICAgICBsZXQgaW5zZXJ0aW9uTGFiZWxzID0gdHJ1ZTtcbiAgICAgICAgaWYgKHN0eWxlLl9fSU5TRVJUSU9OUyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgaW5zZXJ0aW9uTGFiZWxzID0gaXNEYXNCb29sZWFuTm90RmFsc2Uoc3R5bGUuX19JTlNFUlRJT05TKVxuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuVHJpYW5nbGVHbHlwaChtaW5Qb3MsIDUsICdTJywgNSwgdGllci5icm93c2VyLmJhc2VDb2xvcnNbJ0knXSk7XG4gICAgICAgIGlmIChpbnNlcnRpb25MYWJlbHMpXG4gICAgICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuTGFiZWxsZWRHbHlwaChjYW52YXMsIGdseXBoLCBmZWF0dXJlLmluc2VydGlvbiB8fCBmZWF0dXJlLmFsdEFsbGVsZXNbMF0sIGZhbHNlLCAnY2VudGVyJywgJ2Fib3ZlJywgJzdweCBzYW5zLXNlcmlmJyk7XG5cbiAgICAgICAgaWYgKChtYXhQb3MgLSBtaW5Qb3MpID4gMSkge1xuICAgICAgICAgICAgbGV0IHN0cm9rZSA9IHN0eWxlLkZHQ09MT1IgfHwgJ3JlZCc7XG4gICAgICAgICAgICBsZXQgZmlsbCA9IHN0eWxlLkJHQ09MT1IgfHwgc3R5bGUuQ09MT1IxIHx8ICdncmVlbic7XG4gICAgICAgICAgICBsZXQgYmcgPSBuZXcgR2x5cGhzLkJveEdseXBoKG1pblBvcywgNSwgKG1heFBvcyAtIG1pblBvcyksIGhlaWdodCwgZmlsbCwgc3Ryb2tlKTtcbiAgICAgICAgICAgIGdseXBoID0gbmV3IEdseXBocy5Hcm91cEdseXBoKFtiZywgZ2x5cGhdKTtcbiAgICAgICAgfVxuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdfX05PTkUnKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdCT1gnKSB7XG4gICAgICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8IG51bGw7XG4gICAgICAgIGxldCBmaWxsID0gc3R5bGUuQkdDT0xPUiB8fCBzdHlsZS5DT0xPUjEgfHwgJ2dyZWVuJztcbiAgICAgICAgaWYgKHN0eWxlLkJHSVRFTSAmJiBmZWF0dXJlLml0ZW1SZ2IpXG4gICAgICAgICAgICBmaWxsID0gZmVhdHVyZS5pdGVtUmdiO1xuICAgICAgICBsZXQgc2NhbGUgPSAobWF4UG9zIC0gbWluUG9zKSAvIChtYXggLSBtaW4pO1xuICAgICAgICBpZiAoZmVhdHVyZS50eXBlID09ICd0cmFuc2xhdGlvbicgJiZcbiAgICAgICAgICAgIChmZWF0dXJlLm1ldGhvZCA9PSAncHJvdGVpbl9jb2RpbmcnIHx8IGZlYXR1cmUucmVhZGZyYW1lRXhwbGljaXQpICYmXG4gICAgICAgICAgICAoIWZlYXR1cmUudGFncyB8fCBmZWF0dXJlLnRhZ3MuaW5kZXhPZignY2RzX3N0YXJ0X05GJykgPCAwIHx8IGZlYXR1cmUucmVhZGZyYW1lRXhwbGljaXQpICYmXG4gICAgICAgICAgICAoIXRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMgfHwgdGllci5idW1wZWQpICYmXG4gICAgICAgICAgICBzY2FsZSA+PSAwLjUpIHtcbiAgICAgICAgICAgIGxldCByZWZTZXEgPSBnZXRSZWZTZXEodGllciwgbWluLCBtYXgpO1xuICAgICAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkFtaW5vQWNpZEdseXBoKG1pblBvcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhQb3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmU2VxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUub3JpZW50YXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5yZWFkZnJhbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkJveEdseXBoKG1pblBvcywgMCwgKG1heFBvcyAtIG1pblBvcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFnbHlwaClcbiAgICAgICAgcmV0dXJuO1xuICAgIFxuICAgIGlmICgoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5MQUJFTCkgfHwgZmVhdHVyZS5mb3JjZUxhYmVsKSAmJlxuICAgICAgICBsYWJlbCAmJiAhbm9MYWJlbCkge1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuTGFiZWxsZWRHbHlwaChjYW52YXMsIGdseXBoLCBsYWJlbCwgZmFsc2UpO1xuICAgIH1cblxuICAgIGlmIChidW1wKSB7XG4gICAgICAgIGdseXBoLmJ1bXAgPSB0cnVlO1xuICAgIH1cblxuICAgIGdseXBoLmZlYXR1cmUgPSBmZWF0dXJlO1xuXG4gICAgaWYgKGlzRGFzQm9vbGVhblRydWUoc3R5bGVbXCJISURFQVhJU0xBQkVMXCJdKSlcbiAgICAgICAgcXVhbnQgPSBudWxsO1xuXG4gICAgaWYgKHF1YW50KSB7XG4gICAgICAgIGdseXBoLnF1YW50ID0gcXVhbnQ7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlLlpJTkRFWCkge1xuICAgICAgICBnbHlwaC56aW5kZXggPSBzdHlsZS5aSU5ERVggfCAwO1xuICAgIH1cblxuICAgIHJldHVybiBnbHlwaDtcbn1cblxuXG5mdW5jdGlvbiBncm91cEZlYXR1cmVzKHRpZXIsIGNhbnZhcywgeSkge1xuICAgIGxldCBnbHlwaHMgPSBbXTtcbiAgICBsZXQgZ2JzRmVhdHVyZXMgPSB7fTtcbiAgICBsZXQgZ2JzU3R5bGVzID0ge307XG4gICAgbGV0IHN0YWNrZWRGZWF0dXJlcyA9IFtdO1xuXG4gICAgUi5tYXAoZmVhdHVyZXMgPT4ge1xuICAgICAgICBmZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICAgICAgbGV0IHN0eWxlID0gdGllci5zdHlsZUZvckZlYXR1cmUoZmVhdHVyZSk7XG5cbiAgICAgICAgICAgIGlmIChmZWF0dXJlLnBhcnRzIHx8ICFzdHlsZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIGlmIChzdHlsZS5nbHlwaCA9PT0gJ0xJTkVQTE9UJykge1xuICAgICAgICAgICAgICAgIHB1c2hvKGdic0ZlYXR1cmVzLCBzdHlsZS5pZCwgZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgZ2JzU3R5bGVzW3N0eWxlLmlkXSA9IHN0eWxlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdHlsZS5nbHlwaCA9PT0gJ1NUQUNLRUQnKSB7XG4gICAgICAgICAgICAgICAgc3RhY2tlZEZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBnbHlwaCA9IGdseXBoRm9yRmVhdHVyZShjYW52YXMsIGZlYXR1cmUsIHksIHN0eWxlLCB0aWVyKTtcbiAgICAgICAgICAgICAgICBpZiAoZ2x5cGgpXG4gICAgICAgICAgICAgICAgICAgIGdseXBocy5wdXNoKGdseXBoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSwgdGllci51bmdyb3VwZWRGZWF0dXJlcyk7XG5cbiAgICBpZiAoc3RhY2tlZEZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZ2x5cGhzID0gZ2x5cGhzLmNvbmNhdChtYWtlU3RhY2tlZEJhcnMoc3RhY2tlZEZlYXR1cmVzLCB0aWVyKSk7XG4gICAgfVxuICAgIFxuICAgIGZvciAobGV0IGdicyBpbiBnYnNGZWF0dXJlcykge1xuICAgICAgICBsZXQgZ2YgPSBnYnNGZWF0dXJlc1tnYnNdO1xuICAgICAgICBsZXQgc3R5bGUgPSBnYnNTdHlsZXNbZ2JzXTtcbiAgICAgICAgaWYgKHN0eWxlLmdseXBoID09PSAnTElORVBMT1QnKSB7XG4gICAgICAgICAgICBsZXQgbGluZUdyYXBoR2x5cGhzID0gbWFrZUxpbmVQbG90KGdmLCBzdHlsZSwgdGllciwgeSk7XG4gICAgICAgICAgICBsaW5lR3JhcGhHbHlwaHMuZm9yRWFjaChnID0+IGdseXBocy5wdXNoKGcpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBnbHlwaHM7XG59XG5cbmZ1bmN0aW9uIGdseXBoaWZ5R3JvdXBzKHRpZXIsIGNhbnZhcywgZ2x5cGhzLCB5KSB7XG4gICAgbGV0IGdyb3VwSWRzID0gT2JqZWN0LmtleXModGllci5ncm91cGVkRmVhdHVyZXMpO1xuICAgIGxldCBncm91cEdseXBocyA9IHt9O1xuXG4gICAgZ3JvdXBJZHMuc29ydCgoZzEsIGcyKSA9PlxuICAgICAgICAgICAgICAgICAgdGllci5ncm91cGVkRmVhdHVyZXNbZzJdWzBdLnNjb3JlIC0gdGllci5ncm91cGVkRmVhdHVyZXNbZzFdWzBdLnNjb3JlKTtcblxuXG4gICAgZ3JvdXBJZHMuZm9yRWFjaChnSWQgPT4ge1xuICAgICAgICBsZXQgZ2x5cGhzID0gZ2x5cGhzRm9yR3JvdXAoY2FudmFzLCB0aWVyLmdyb3VwZWRGZWF0dXJlc1tnSWRdLCB5LCB0aWVyLmdyb3Vwc1tnSWRdLCB0aWVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMgJiYgIXRpZXIuYnVtcGVkKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29sbGFwc2VkX2dlbmUnIDogJ3RlbnQnKTtcblxuICAgICAgICBpZiAoZ2x5cGhzKSB7XG4gICAgICAgICAgICBnbHlwaHMuZ3JvdXAgPSB0aWVyLmdyb3Vwc1tnSWRdO1xuICAgICAgICAgICAgZ3JvdXBHbHlwaHNbZ0lkXSA9IGdseXBocztcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGdyb3VwR2x5cGhzO1xufVxuXG5mdW5jdGlvbiBidW1wU3VidGllcnModGllciwgZ2x5cGhzLCBncmlkLCBncmlkT2Zmc2V0LCBncmlkU3BhY2luZykge1xuICAgIGxldCBzdWJ0aWVyTWF4ID1cbiAgICAgICAgICAgIHRpZXIuc3VidGllck1heCB8fFxuICAgICAgICAgICAgdGllci5kYXNTb3VyY2Uuc3VidGllck1heCB8fFxuICAgICAgICAgICAgdGllci5icm93c2VyLmRlZmF1bHRTdWJ0aWVyTWF4O1xuXG4gICAgbGV0IHN1YnRpZXJzRXhjZWVkZWQgPSBmYWxzZTtcblxuICAgIGxldCB1bmJ1bXBlZFNUID0gbmV3IFN1YlRpZXIodHJ1ZSk7XG4gICAgbGV0IGJ1bXBlZFNUcyA9IFtdO1xuXG4gICAgLy8gV2Ugd2FudCB0byBhZGQgZWFjaCBnbHlwaCB0byBlaXRoZXIgdGhlIHN1YnRpZXJcbiAgICAvLyBjb250YWluaW5nIHVuYnVtcGVkIHN1YnRpZXJzLCBvciB0byB0aGUgZmlyc3QgYnVtcGVkIHN1YnRpZXIuXG4gICAgZ2x5cGhzLmZvckVhY2goZ2x5cGggPT4ge1xuICAgICAgICAvLyBpZiB0aGUgZ2x5cGggaXMgdG8gYmUgYnVtcGVkLi4uXG4gICAgICAgIGlmIChnbHlwaC5idW1wICYmXG4gICAgICAgICAgICAodGllci5idW1wZWQgfHxcbiAgICAgICAgICAgIHRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMpKSB7XG5cbiAgICAgICAgICAgIGxldCBnbHlwaFRpZXIgPSBidW1wZWRTVHMuZmluZChzdCA9PiBzdC5oYXNTcGFjZUZvcihnbHlwaCkpO1xuXG4gICAgICAgICAgICBpZiAoZ2x5cGhUaWVyKSB7XG4gICAgICAgICAgICAgICAgZ2x5cGhUaWVyLmFkZChnbHlwaCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJ1bXBlZFNUcy5sZW5ndGggPj0gc3VidGllck1heCkge1xuICAgICAgICAgICAgICAgIHN1YnRpZXJzRXhjZWVkZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgc3VidGllciA9IG5ldyBTdWJUaWVyKCk7XG4gICAgICAgICAgICAgICAgc3VidGllci5hZGQoZ2x5cGgpO1xuICAgICAgICAgICAgICAgIGJ1bXBlZFNUcy5wdXNoKHN1YnRpZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdW5idW1wZWRTVC5hZGQoZ2x5cGgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB1bmJ1bXBlZFNULmdseXBocy5zb3J0KChnMSwgZzIpID0+IGcxLm1pbigpIC0gZzIubWluKCkpO1xuICAgIFxuICAgIGlmICh1bmJ1bXBlZFNULmdseXBocy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGJ1bXBlZFNUcyA9IFt1bmJ1bXBlZFNUXS5jb25jYXQoYnVtcGVkU1RzKTtcbiAgICB9XG5cbiAgICAvLyBTaW1wbGUgaGFjayB0byBtYWtlIHRoZSBob3Jpem9udGFsIGdyaWQgaW4gYnVtcGVkIHN1YnRpZXJzIChlLmcuIGxpbmVwbG90cylcbiAgICAvLyBvcHRpb25hbCBhbmQgY29uZmlndXJhYmxlLlxuICAgIGlmIChncmlkKSB7XG4gICAgICAgIGJ1bXBlZFNUcy5mb3JFYWNoKHN1YnRpZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHN1YnRpZXIucXVhbnQpIHtcbiAgICAgICAgICAgICAgICBzdWJ0aWVyLmdseXBocy51bnNoaWZ0KG5ldyBHbHlwaHMuR3JpZEdseXBoKHN1YnRpZXIuaGVpZ2h0LCBncmlkT2Zmc2V0LCBncmlkU3BhY2luZykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBidW1wZWRTVHMuZm9yRWFjaChzdWJ0aWVyID0+IHtcbiAgICAgICAgc3VidGllci5nbHlwaHMuc29ydCgoZzEsIGcyKSA9PiAoZzEuemluZGV4IHx8IDApIC0gKGcyLnppbmRleCB8fCAwKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gW2J1bXBlZFNUcywgc3VidGllcnNFeGNlZWRlZF07XG59XG5cbi8vIFRoZSB3aG9sZSB0aWVyIGlzIHRyYW5zbGF0ZWQgZG93bndhcmQgb24gaXRzIGNhbnZhcyBieSB5IHBpeGVsc1xuZnVuY3Rpb24gcHJlcGFyZVN1YnRpZXJzKHRpZXIsIGNhbnZhcywgeT0wLCBncmlkPXRydWUpIHtcblxuICAgIGxldCBNSU5fUEFERElORyA9IDM7XG4gICAgdGllci5wYWRkaW5nID0gdHlwZW9mKHRpZXIuZGFzU291cmNlLnBhZGRpbmcpID09PSAnbnVtYmVyJyA/XG4gICAgICAgIHRpZXIuZGFzU291cmNlLnBhZGRpbmcgOiBNSU5fUEFERElORztcblxuICAgIHRpZXIuc2NhbGVWZXJ0aWNhbCA9IHR5cGVvZih0aWVyLmRhc1NvdXJjZS5zY2FsZVZlcnRpY2FsKSA9PT0gJ2Jvb2xlYW4nID9cbiAgICAgICAgdGllci5kYXNTb3VyY2Uuc2NhbGVWZXJ0aWNhbCA6IGZhbHNlO1xuXG4gICAgbGV0IGdseXBocyA9IGdyb3VwRmVhdHVyZXModGllciwgY2FudmFzLCB5KTtcblxuICAgIC8vIE1lcmdlIHN1cGVyZ3JvdXBzXG4gICAgaWYgKHRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMgJiYgIXRpZXIuYnVtcGVkKSB7XG4gICAgICAgIGZvciAobGV0IHNnSWQgaW4gdGllci5zdXBlckdyb3Vwcykge1xuICAgICAgICAgICAgbGV0IHNnR3JvdXAgPSB0aWVyLnN1cGVyR3JvdXBzW3NnSWRdO1xuICAgICAgICAgICAgdGllci5ncm91cHNbc2dJZF0gPSBzaGFsbG93Q29weSh0aWVyLmdyb3Vwc1tzZ0lkXSk7XG4gICAgICAgICAgICBsZXQgZ3JvdXAgPSB0aWVyLmdyb3Vwc1tzZ0lkXTtcbiAgICAgICAgICAgIGdyb3VwLmlzU3VwZXJHcm91cCA9IHRydWU7XG4gICAgICAgICAgICBsZXQgZmVhdHVyZXNCeVR5cGUgPSB7fTtcblxuICAgICAgICAgICAgbGV0IHNnTWluID0gMTAwMDAwMDAwMDAsIHNnTWF4ID0gLTEwMDAwMDAwMDAwO1xuICAgICAgICAgICAgbGV0IHNnU2VnID0gbnVsbDtcblxuICAgICAgICAgICAgc2dHcm91cC5mb3JFYWNoKChnLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwZWRGZWF0dXJlID0gdGllci5ncm91cGVkRmVhdHVyZXNbc2dHcm91cFtpXV07XG4gICAgICAgICAgICAgICAgaWYgKCFncm91cGVkRmVhdHVyZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgZ3JvdXBlZEZlYXR1cmUuZm9yRWFjaChmZWF0dXJlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcHVzaG8oZmVhdHVyZXNCeVR5cGUsIGZlYXR1cmUudHlwZSwgZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIHNnTWluID0gTWF0aC5taW4oZmVhdHVyZS5taW4sIHNnTWluKTtcbiAgICAgICAgICAgICAgICAgICAgc2dNYXggPSBNYXRoLm1heChmZWF0dXJlLm1heCwgc2dNYXgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZS5zZWdtZW50ICYmICFzZ1NlZylcbiAgICAgICAgICAgICAgICAgICAgICAgIHNnU2VnID0gZmVhdHVyZS5zZWdtZW50O1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwICYmICFncm91cC5saW5rcyB8fCBncm91cC5saW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAubGlua3MgPSB0aWVyLmdyb3Vwc1tzZ0dyb3VwWzBdXS5saW5rcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWxldGUgdGllci5ncm91cGVkRmVhdHVyZXNbc2dHcm91cFtpXV07XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aWVyLmdyb3Vwc1tzZ0lkXS5tYXggPSBzZ01heDtcbiAgICAgICAgICAgIHRpZXIuZ3JvdXBzW3NnSWRdLm1pbiA9IHNnTWluO1xuICAgICAgICAgICAgdGllci5ncm91cHNbc2dJZF0uc2VnbWVudCA9IHNnU2VnO1xuXG4gICAgICAgICAgICBSLm1hcChmZWF0dXJlcyA9PiB7XG5cbiAgICAgICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBmZWF0dXJlc1swXTtcbiAgICAgICAgICAgICAgICBsZXQgbG9jID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIGZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmbCA9IG5ldyBSYW5nZShmZWF0dXJlLm1pbiwgZmVhdHVyZS5tYXgpO1xuICAgICAgICAgICAgICAgICAgICBsb2MgPSBsb2MgPyB1bmlvbihsb2MsIGZsKSA6IGZsO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbGV0IG1lcmdlZFJhbmdlcyA9IGxvYy5yYW5nZXMoKTtcblxuICAgICAgICAgICAgICAgIG1lcmdlZFJhbmdlcy5mb3JFYWNoKHJhbmdlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBvc0NvdmVyYWdlID0gKChyYW5nZS5tYXgoKSB8IDApIC0gKHJhbmdlLm1pbigpIHwgMCkgKyAxKSAqIHNnR3JvdXAubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0Q292ZXJhZ2UgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm1pbiA9IGZlYXR1cmUubWluIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm1heCA9IGZlYXR1cmUubWF4IHx8IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm1pbiA8PSByYW5nZS5tYXgoKSAmJiBmbWF4ID49IHJhbmdlLm1pbigpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RDb3ZlcmFnZSArPSAoTWF0aC5taW4oZm1heCwgcmFuZ2UubWF4KCkpIC1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoZm1pbiwgcmFuZ2UubWluKCkpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdGZWF0dXJlID0gbmV3IERBU0ZlYXR1cmUoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdGZWF0dXJlW2tleV0gPSB0ZW1wbGF0ZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3RmVhdHVyZS5taW4gPSByYW5nZS5taW4oKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmVhdHVyZS5tYXggPSByYW5nZS5tYXgoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0ZlYXR1cmUubGFiZWwgJiYgc2dHcm91cC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdGZWF0dXJlLmxhYmVsICs9ICcgKCcgKyBzZ0dyb3VwLmxlbmd0aCArICcgdmFycyknO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3RmVhdHVyZS52aXN1YWxXZWlnaHQgPSAoKDEuMCAqIGFjdENvdmVyYWdlKSAvIHBvc0NvdmVyYWdlKTtcblxuICAgICAgICAgICAgICAgICAgICBwdXNobyh0aWVyLmdyb3VwZWRGZWF0dXJlcywgc2dJZCwgbmV3RmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBmZWF0dXJlc0J5VHlwZSk7XG5cbiAgICAgICAgICAgIGRlbGV0ZSB0aWVyLnN1cGVyR3JvdXBzW3NnSWRdOyAvLyBEbyB3ZSB3YW50IHRoaXM/XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHbHlwaGlmeSBncm91cHMuXG4gICAgbGV0IGdyb3VwR2x5cGhzID0gZ2x5cGhpZnlHcm91cHModGllciwgY2FudmFzLCBnbHlwaHMsIHkpO1xuXG4gICAgUi5tYXAoc3VwZXJHcm91cCA9PiB7XG4gICAgICAgIGxldCBzZ0dseXBocyA9IFtdO1xuICAgICAgICBsZXQgc2dNaW4gPSAxMDAwMDAwMDAwMDtcbiAgICAgICAgbGV0IHNnTWF4ID0gLTEwMDAwMDAwMDAwO1xuXG4gICAgICAgIHN1cGVyR3JvdXAuZm9yRWFjaChnbHlwaHMgPT4ge1xuICAgICAgICAgICAgbGV0IGdHbHlwaHMgPSBncm91cEdseXBoc1tnbHlwaHNdO1xuICAgICAgICAgICAgaWYgKGdHbHlwaHMpIHtcbiAgICAgICAgICAgICAgICBzZ0dseXBocy5wdXNoKGdHbHlwaHMpO1xuICAgICAgICAgICAgICAgIHNnTWluID0gTWF0aC5taW4oc2dNaW4sIGdHbHlwaHMubWluKCkpO1xuICAgICAgICAgICAgICAgIHNnTWF4ID0gTWF0aC5tYXgoc2dNYXgsIGdHbHlwaHMubWF4KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzZ0dseXBocy5mb3JFYWNoKGdseXBoID0+IHtcbiAgICAgICAgICAgIGdseXBocy5wdXNoKG5ldyBHbHlwaHMuUGFkZGVkR2x5cGgoZ2x5cGgsIHNnTWluLCBzZ01heCkpO1xuICAgICAgICB9KTtcbiAgICB9LCB0aWVyLnN1cGVyR3JvdXBzKTtcblxuICAgIFIubWFwKGdseXBoID0+IGdseXBocy5wdXNoKGdseXBoKSwgZ3JvdXBHbHlwaHMpO1xuXG4gICAgbGV0IFtzdWJ0aWVycywgc3VidGllcnNFeGNlZWRlZF0gPSBidW1wU3VidGllcnModGllciwgZ2x5cGhzLCBncmlkLCB5KTtcblxuICAgIHRpZXIuZ2x5cGhDYWNoZU9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XG5cbiAgICBpZiAoc3VidGllcnNFeGNlZWRlZClcbiAgICAgICAgdGllci51cGRhdGVTdGF0dXMoJ0J1bXBpbmcgbGltaXQgZXhjZWVkZWQsIHVzZSB0aGUgdHJhY2sgZWRpdG9yIHRvIHNlZSBtb3JlIGZlYXR1cmVzJyk7XG4gICAgZWxzZVxuICAgICAgICB0aWVyLnVwZGF0ZVN0YXR1cygpO1xuXG4gICAgdGllci5zdWJ0aWVycyA9IHN1YnRpZXJzO1xufVxuXG4vLyBGaWxscyBvdXQgYXJlYXMgdGhhdCBoYXZlbid0IGJlZW4gZmV0Y2hlZCBhcyBncmF5IGJsb2Nrc1xuZnVuY3Rpb24gZHJhd1VubWFwcGVkKHRpZXIsIGNhbnZhcywgcGFkZGluZykge1xuICAgIGxldCBkcmF3U3RhcnQgPSAgdGllci5icm93c2VyLnZpZXdTdGFydCAtIDEwMDAuMC90aWVyLmJyb3dzZXIuc2NhbGU7XG4gICAgbGV0IGRyYXdFbmQgPSB0aWVyLmJyb3dzZXIudmlld0VuZCArIDEwMDAuMC90aWVyLmJyb3dzZXIuc2NhbGU7XG4gICAgbGV0IHVubWFwcGVkQmxvY2tzID0gW107XG4gICAgaWYgKHRpZXIua25vd25Db3ZlcmFnZSkge1xuICAgICAgICBsZXQga25vd25SYW5nZXMgPSB0aWVyLmtub3duQ292ZXJhZ2UucmFuZ2VzKCk7XG4gICAgICAgIGtub3duUmFuZ2VzLmZvckVhY2goKHJhbmdlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlLm1pbigpID4gZHJhd1N0YXJ0KVxuICAgICAgICAgICAgICAgICAgICB1bm1hcHBlZEJsb2Nrcy5wdXNoKHttaW46IGRyYXdTdGFydCwgbWF4OiByYW5nZS5taW4oKSAtIDF9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdW5tYXBwZWRCbG9ja3MucHVzaCh7bWluOiBrbm93blJhbmdlc1tpbmRleC0xXS5tYXgoKSArIDEsIG1heDogcmFuZ2UubWluKCkgLSAxfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA9PSBrbm93blJhbmdlcy5sZW5ndGggLSAxICYmIHJhbmdlLm1heCgpIDwgZHJhd0VuZCkge1xuICAgICAgICAgICAgICAgIHVubWFwcGVkQmxvY2tzLnB1c2goe21pbjogcmFuZ2UubWF4KCkgKyAxLCBtYXg6IGRyYXdFbmR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh1bm1hcHBlZEJsb2Nrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNhbnZhcy5maWxsU3R5bGUgPSAnZ3JheSc7XG4gICAgICAgIHVubWFwcGVkQmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xuICAgICAgICAgICAgbGV0IG1pbiA9IChibG9jay5taW4gLSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0KSAqIHRpZXIuYnJvd3Nlci5zY2FsZSArIDEwMDA7XG4gICAgICAgICAgICBsZXQgbWF4ID0gKGJsb2NrLm1heCAtIHRpZXIuYnJvd3Nlci52aWV3U3RhcnQpICogdGllci5icm93c2VyLnNjYWxlICsgMTAwMDtcbiAgICAgICAgICAgIGNhbnZhcy5maWxsUmVjdChtaW4sIDAsIG1heCAtIG1pbiwgcGFkZGluZyk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2xlYXJWaWV3cG9ydChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBjYW52YXMuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xufVxuXG4vLyBNYWtlIHRoZSB2aWV3cG9ydCAmIGNhbnZhcyB0aGUgY29ycmVjdCBzaXplIGZvciB0aGUgdGllclxuZnVuY3Rpb24gcHJlcGFyZVZpZXdwb3J0KHRpZXIsIGNhbnZhcywgcmV0aW5hLCBjbGVhcj10cnVlLCB2T2Zmc2V0PTApIHtcbiAgICBsZXQgZGVzaXJlZFdpZHRoID0gdGllci5icm93c2VyLmZlYXR1cmVQYW5lbFdpZHRoICsgMjAwMDtcbiAgICBpZiAocmV0aW5hKSB7XG4gICAgICAgIGRlc2lyZWRXaWR0aCAqPSAyO1xuICAgIH1cblxuICAgIGxldCBmcHcgPSB0aWVyLnZpZXdwb3J0LndpZHRofDA7XG4gICAgaWYgKGZwdyA8IGRlc2lyZWRXaWR0aCAtIDUwKSB7XG4gICAgICAgIHRpZXIudmlld3BvcnQud2lkdGggPSBmcHcgPSBkZXNpcmVkV2lkdGg7XG4gICAgfVxuXG4gICAgbGV0IGxoID0gdGllci5wYWRkaW5nICsgdk9mZnNldDtcblxuICAgIHRpZXIuc3VidGllcnMuZm9yRWFjaChzID0+IGxoICs9IHMuaGVpZ2h0ICsgdGllci5wYWRkaW5nKTtcblxuICAgIGxoICs9IDY7XG4gICAgbGggPSBNYXRoLm1heChsaCwgdGllci5icm93c2VyLm1pblRpZXJIZWlnaHQpO1xuXG4gICAgbGV0IGNhbnZhc0hlaWdodCA9IGxoO1xuICAgIGlmIChyZXRpbmEpIHtcbiAgICAgICAgY2FudmFzSGVpZ2h0ICo9IDI7XG4gICAgfVxuXG4gICAgaWYgKGNhbnZhc0hlaWdodCAhPSB0aWVyLnZpZXdwb3J0LmhlaWdodCkge1xuICAgICAgICB0aWVyLnZpZXdwb3J0LmhlaWdodCA9IGNhbnZhc0hlaWdodDtcbiAgICB9XG5cbiAgICB0aWVyLnZpZXdwb3J0SG9sZGVyLnN0eWxlLmxlZnQgPSAnLTEwMDBweCc7XG4gICAgdGllci52aWV3cG9ydC5zdHlsZS53aWR0aCA9IHJldGluYSA/ICgnJyArIChmcHcvMikgKyAncHgnKSA6ICgnJyArIGZwdyArICdweCcpO1xuICAgIHRpZXIudmlld3BvcnQuc3R5bGUuaGVpZ2h0ID0gJycgKyBsaCArICdweCc7XG4gICAgdGllci5sYXlvdXRIZWlnaHQgPSAgTWF0aC5tYXgobGgsIHRpZXIuYnJvd3Nlci5taW5UaWVySGVpZ2h0KTtcblxuICAgIHRpZXIudXBkYXRlSGVpZ2h0KCk7XG4gICAgdGllci5ub3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydDtcblxuICAgIGNhbnZhcy5zYXZlKCk7XG4gICAgaWYgKHJldGluYSkge1xuICAgICAgICBjYW52YXMuc2NhbGUoMiwgMik7XG4gICAgfVxuXG4gICAgaWYgKGNsZWFyKSB7XG4gICAgICAgIGNsZWFyVmlld3BvcnQoY2FudmFzLCBmcHcsIGNhbnZhc0hlaWdodCk7XG4gICAgfVxuXG4gICAgZHJhd1VubWFwcGVkKHRpZXIsIGNhbnZhcywgbGgpO1xuXG59XG5cbmZ1bmN0aW9uIHBhaW50KHRpZXIsIGNhbnZhcywgdk9mZnNldD0wKSB7XG4gICAgbGV0IG92ZXJsYXlMYWJlbENhbnZhcyA9IG5ldyBHbHlwaHMuT3ZlcmxheUxhYmVsQ2FudmFzKCk7XG4gICAgbGV0IG9mZnNldCA9ICgodGllci5nbHlwaENhY2hlT3JpZ2luIC0gdGllci5icm93c2VyLnZpZXdTdGFydCkqdGllci5icm93c2VyLnNjYWxlKSsxMDAwO1xuICAgIGNhbnZhcy50cmFuc2xhdGUob2Zmc2V0LCB2T2Zmc2V0ICsgdGllci5wYWRkaW5nKTtcbiAgICBvdmVybGF5TGFiZWxDYW52YXMudHJhbnNsYXRlKDAsIHRpZXIucGFkZGluZyk7XG5cbiAgICB0aWVyLnBhaW50VG9Db250ZXh0KGNhbnZhcywgb3ZlcmxheUxhYmVsQ2FudmFzLCBvZmZzZXQpO1xuXG4gICAgaWYgKG92ZXJsYXlMYWJlbENhbnZhcy5nbHlwaHMubGVuZ3RoID4gMClcbiAgICAgICAgdGllci5vdmVybGF5TGFiZWxDYW52YXMgPSBvdmVybGF5TGFiZWxDYW52YXM7XG4gICAgZWxzZVxuICAgICAgICB0aWVyLm92ZXJsYXlMYWJlbENhbnZhcyA9IG51bGw7XG5cbiAgICBjYW52YXMucmVzdG9yZSgpO1xufVxuXG5mdW5jdGlvbiBnZXRTY29yZU1pbk1heCh0aWVyLCBzdHlsZSkge1xuICAgIGxldCBzbWluID0gdGllci5xdWFudE1pbihzdHlsZSk7XG4gICAgbGV0IHNtYXggPSB0aWVyLnF1YW50TWF4KHN0eWxlKTtcblxuICAgIGlmICghc21heCkge1xuICAgICAgICBpZiAoc21pbiA8IDApIHtcbiAgICAgICAgICAgIHNtYXggPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc21heCA9IDEwO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghc21pbikge1xuICAgICAgICBzbWluID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIFtzbWluLCBzbWF4XTtcbn1cblxuZnVuY3Rpb24gcmVsU2NvcmVPcmlnaW4oc2NvcmUsIHNtaW4sIHNtYXgpIHtcbiAgICBsZXQgcmVsU2NvcmUgPSAoKDEuMCAqIHNjb3JlKSAtIHNtaW4pIC8gKHNtYXgtc21pbik7XG4gICAgbGV0IHJlbE9yaWdpbiA9ICgtMS4wICogc21pbikgLyAoc21heCAtIHNtaW4pO1xuXG4gICAgcmV0dXJuIFtyZWxTY29yZSwgcmVsT3JpZ2luXTtcbn1cblxuZnVuY3Rpb24gZ2V0UmVmU2VxKHRpZXIsIG1pbiwgbWF4KSB7XG4gICAgbGV0IHJlZlNlcSA9IG51bGw7XG4gICAgaWYgKHRpZXIuY3VycmVudFNlcXVlbmNlKSB7XG4gICAgICAgIGxldCBjc1N0YXJ0ID0gdGllci5jdXJyZW50U2VxdWVuY2Uuc3RhcnR8MDtcbiAgICAgICAgbGV0IGNzRW5kID0gdGllci5jdXJyZW50U2VxdWVuY2UuZW5kfDA7XG4gICAgICAgIGlmIChjc1N0YXJ0IDw9IG1heCAmJiBjc0VuZCA+PSBtaW4pIHtcbiAgICAgICAgICAgIGxldCBzZk1pbiA9IE1hdGgubWF4KG1pbiwgY3NTdGFydCk7XG4gICAgICAgICAgICBsZXQgc2ZNYXggPSBNYXRoLm1pbihtYXgsIGNzRW5kKTtcblxuICAgICAgICAgICAgcmVmU2VxID0gdGllci5jdXJyZW50U2VxdWVuY2Uuc2VxLnN1YnN0cihzZk1pbiAtIGNzU3RhcnQsIHNmTWF4IC0gc2ZNaW4gKyAxKTtcbiAgICAgICAgICAgIHdoaWxlIChtaW4gPCBzZk1pbikge1xuICAgICAgICAgICAgICAgIHJlZlNlcSA9ICdOJyArIHJlZlNlcTtcbiAgICAgICAgICAgICAgICBzZk1pbi0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKG1heCA+IHNmTWF4KSB7XG4gICAgICAgICAgICAgICAgcmVmU2VxID0gcmVmU2VxICsgJ04nO1xuICAgICAgICAgICAgICAgIHNmTWF4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlZlNlcTtcbn1cblxuZnVuY3Rpb24gZmVhdHVyZVRvQ3Jvc3NMaWtlR2x5cGgoY2FudmFzLCB0aWVyLCBmZWF0dXJlLCB5LCBnbHlwaFR5cGUsIHN0eWxlLCBmb3JjZUhlaWdodCwgbm9MYWJlbCkge1xuICAgIGxldCBzY2FsZSA9IHRpZXIuYnJvd3Nlci5zY2FsZTtcbiAgICBsZXQgb3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydDtcblxuICAgIGxldCBzY29yZSA9IGZlYXR1cmUuc2NvcmU7XG4gICAgbGV0IGxhYmVsID0gZmVhdHVyZS5sYWJlbCB8fCBmZWF0dXJlLmlkO1xuXG4gICAgbGV0IG1pblBvcyA9IChmZWF0dXJlLm1pbiAtIG9yaWdpbikgKiBzY2FsZTtcbiAgICBsZXQgbWF4UG9zID0gTWF0aC5tYXgoKGZlYXR1cmUubWF4IC0gb3JpZ2luICsgMSkgKiBzY2FsZSwgbWluUG9zICsgMSk7XG5cbiAgICBsZXQgaGVpZ2h0ID0gKHRpZXIuZm9yY2VIZWlnaHQgfHwgc3R5bGUuSEVJR0hUIHx8IGZvcmNlSGVpZ2h0IHx8IDEyKSAqIDEuMDtcbiAgICBsZXQgcmVxdWlyZWRIZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICBsZXQgZ2x5cGggPSBudWxsO1xuICAgIGxldCBxdWFudCA9IG51bGw7XG5cbiAgICBsZXQgc3Ryb2tlID0gc3R5bGUuRkdDT0xPUiB8fCAnYmxhY2snO1xuICAgIGxldCBmaWxsID0gc3R5bGUuQkdDT0xPUiB8fCAnbm9uZSc7XG4gICAgbGV0IG91dGxpbmUgPSBzdHlsZS5TVFJPS0VDT0xPUjtcblxuICAgIGlmIChzdHlsZS5CR0lURU0gJiYgZmVhdHVyZS5pdGVtUmdiKSB7XG4gICAgICAgIHN0cm9rZSA9IGZlYXR1cmUuaXRlbVJnYjtcblxuICAgIH0gZWxzZSBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5DT0xPUl9CWV9TQ09SRTIpKSB7XG4gICAgICAgIGxldCBncmFkID0gc3R5bGUuQkdHUkFEIHx8IHN0eWxlLl9ncmFkaWVudDtcbiAgICAgICAgaWYgKCFncmFkKSB7XG4gICAgICAgICAgICBncmFkID0gbWFrZUdyYWRpZW50KDUwLCBzdHlsZS5DT0xPUjEsIHN0eWxlLkNPTE9SMiwgc3R5bGUuQ09MT1IzKTtcbiAgICAgICAgICAgIHN0eWxlLl9ncmFkaWVudCA9IGdyYWQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc2NvcmUyID0gZmVhdHVyZS5zY29yZTI7XG4gICAgICAgIGlmIChzY29yZTIgIT09IHVuZGVmaW5lZCB8fCAhc3Ryb2tlKSB7XG4gICAgICAgICAgICBzY29yZTIgPSBzY29yZTIgfHwgMDtcblxuICAgICAgICAgICAgbGV0IHNtaW4yID0gc3R5bGUuTUlOMiA/ICgxLjAgKiBzdHlsZS5NSU4yKSA6IDAuMDtcbiAgICAgICAgICAgIGxldCBzbWF4MiA9IHN0eWxlLk1BWDIgPyAoMS4wICogc3R5bGUuTUFYMikgOiAxLjA7XG4gICAgICAgICAgICBsZXQgcmVsU2NvcmUyID0gKCgxLjAgKiBzY29yZTIpIC0gc21pbjIpIC8gKHNtYXgyLXNtaW4yKTtcblxuICAgICAgICAgICAgbGV0IHN0ZXAgPSAocmVsU2NvcmUyKmdyYWQubGVuZ3RoKSB8IDA7XG4gICAgICAgICAgICBSLmNsYW1wKDAsIHN0ZXAsIGdyYWQubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBzdHJva2UgPSBncmFkW3N0ZXBdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHNpemUgPSBzdHlsZS5TSVpFIHx8IGhlaWdodDtcbiAgICBpZiAoc3R5bGUuUlNJWkUpIHtcbiAgICAgICAgc2l6ZSA9ICgxLjAgKiBzdHlsZS5SU0laRSkgKiBoZWlnaHQ7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlLlNUUk9LRVRIUkVTSE9MRCkge1xuICAgICAgICBpZiAoc2l6ZSA8ICgxLjAgKiBzdHlsZS5TVFJPS0VUSFJFU0hPTEQpKVxuICAgICAgICAgICAgb3V0bGluZSA9IG51bGw7XG4gICAgfVxuXG4gICAgbGV0IG1pZCA9IChtaW5Qb3MgKyBtYXhQb3MpLzI7XG5cbiAgICBpZiAoZ2x5cGhUeXBlID09PSAnRVgnKSB7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5FeEdseXBoKG1pZCwgc2l6ZSwgc3Ryb2tlKTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnVFJJQU5HTEUnKSB7XG4gICAgICAgIGxldCBkaXIgPSBzdHlsZS5ESVJFQ1RJT04gfHwgJ04nO1xuICAgICAgICBsZXQgd2lkdGggPSBzdHlsZS5MSU5FV0lEVEggfHwgc2l6ZTtcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLlRyaWFuZ2xlR2x5cGgobWlkLCBzaXplLCBkaXIsIHdpZHRoLCBzdHJva2UsIG91dGxpbmUpO1xuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdET1QnKSB7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5Eb3RHbHlwaChtaWQsIHNpemUsIHN0cm9rZSwgb3V0bGluZSk7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ1BMSU1TT0xMJykge1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuUGxpbXNvbGxHbHlwaChtaWQsIHNpemUsIDAuMiAqIHNpemUsIHN0cm9rZSwgb3V0bGluZSk7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ1NRVUFSRScpIHtcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkJveEdseXBoKG1pZCAtIHNpemUvMiwgMCwgc2l6ZSwgc2l6ZSwgc3Ryb2tlLCBvdXRsaW5lKTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnU1RBUicpIHtcbiAgICAgICAgbGV0IHBvaW50cyA9IHN0eWxlLlBPSU5UUyB8fCA1O1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuU3RhckdseXBoKG1pZCwgc2l6ZS8yLCBwb2ludHMsIHN0cm9rZSwgb3V0bGluZSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuQ3Jvc3NHbHlwaChtaWQsIHNpemUsIHN0cm9rZSk7XG5cbiAgICB9XG5cbiAgICBpZiAoZmlsbCAmJiBmaWxsICE9PSAnbm9uZScgJiYgKG1heFBvcyAtIG1pblBvcykgPiA1KSB7XG4gICAgICAgIGxldCBib3hHbHlwaCA9IG5ldyBHbHlwaHMuQm94R2x5cGgobWluUG9zLCAwLCAobWF4UG9zIC0gbWluUG9zKSwgc2l6ZSwgZmlsbCk7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5Hcm91cEdseXBoKFtib3hHbHlwaCwgZ2x5cGhdKTtcbiAgICB9XG5cbiAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5TQ0FUVEVSKSkge1xuICAgICAgICBsZXQgW3NtaW4sIHNtYXhdID0gZ2V0U2NvcmVNaW5NYXgodGllciwgc3R5bGUpO1xuXG4gICAgICAgIGxldCBbcmVsU2NvcmUsIHJlbE9yaWdpbl0gPSByZWxTY29yZU9yaWdpbihzY29yZSwgc21pbiwgc21heCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNjb3JlLCByZWxTY29yZSwgcmVsT3JpZ2luKTtcblxuICAgICAgICBpZiAocmVsU2NvcmUgPCAwLjAgfHwgcmVsU2NvcmUgPiAxLjApIHtcbiAgICAgICAgICAgIC8vIEdseXBoIGlzIG91dCBvZiBib3VuZHMuXG4gICAgICAgICAgICAvLyBTaG91bGQgd2UgYWxsb3cgZm9yIFwicGFydGlhbGx5IHNob3dpbmdcIiBnbHlwaHM/XG5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeSA9ICgxLjAgLSByZWxTY29yZSkgKiByZXF1aXJlZEhlaWdodDtcblxuICAgICAgICAgICAgcXVhbnQgPSB7bWluOiBzbWluLCBtYXg6IHNtYXh9O1xuXG4gICAgICAgICAgICBsZXQgaGVpZ2h0RnVkZ2UgPSAwO1xuICAgICAgICAgICAgbGV0IGZlYXR1cmVMYWJlbCA9IFIuZGVmYXVsdFRvKHN0eWxlLkxBQkVMLCBmZWF0dXJlLmZvcmNlTGFiZWwpO1xuXG4gICAgICAgICAgICBpZiAoaXNEYXNCb29sZWFuTm90RmFsc2UoZmVhdHVyZUxhYmVsKSAmJiBsYWJlbCAmJiAhbm9MYWJlbCkge1xuICAgICAgICAgICAgICAgIGdseXBoID0gbmV3IEdseXBocy5MYWJlbGxlZEdseXBoKGNhbnZhcywgZ2x5cGgsIGxhYmVsLCB0cnVlLCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVMYWJlbCA9PSAnYWJvdmUnID8gJ2Fib3ZlJyA6ICdiZWxvdycpO1xuICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlTGFiZWwgPT09ICdhYm92ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0RnVkZ2UgPSBnbHlwaC50ZXh0SGVpZ2h0ICsgMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbm9MYWJlbCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuVHJhbnNsYXRlZEdseXBoKGdseXBoLCAwLCB5IC0gKHNpemUgLyAyKSAtIGhlaWdodEZ1ZGdlLCByZXF1aXJlZEhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW2dseXBoLCBxdWFudF07XG59XG5cbmZ1bmN0aW9uIGZlYXR1cmVUb0dyYWRpZW50TGlrZUdseXBoKGNhbnZhcywgdGllciwgZmVhdHVyZSwgeSwgZ2x5cGhUeXBlLCBzdHlsZSwgZm9yY2VIZWlnaHQpIHtcbiAgICBsZXQgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XG4gICAgbGV0IG9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XG5cbiAgICBsZXQgc2NvcmUgPSBmZWF0dXJlLnNjb3JlO1xuXG4gICAgbGV0IG1pblBvcyA9IChmZWF0dXJlLm1pbiAtIG9yaWdpbikgKiBzY2FsZTtcbiAgICBsZXQgbWF4UG9zID0gTWF0aC5tYXgoKGZlYXR1cmUubWF4IC0gb3JpZ2luICsgMSkgKiBzY2FsZSwgbWluUG9zICsgMSk7XG5cbiAgICBsZXQgaGVpZ2h0ID0gKHRpZXIuZm9yY2VIZWlnaHQgfHwgc3R5bGUuSEVJR0hUIHx8IGZvcmNlSGVpZ2h0IHx8IDEyKSAqIDEuMDtcbiAgICBsZXQgcmVxdWlyZWRIZWlnaHQgPSBoZWlnaHQgKiAxLjA7XG5cbiAgICBsZXQgZ2x5cGggPSBudWxsO1xuICAgIGxldCBxdWFudCA9IG51bGw7XG5cbiAgICBsZXQgY2VudGVyT25BeGlzID0gaXNEYXNCb29sZWFuVHJ1ZShzdHlsZVtcIkFYSVNDRU5URVJcIl0pO1xuXG5cbiAgICBsZXQgW3NtaW4sIHNtYXhdID0gZ2V0U2NvcmVNaW5NYXgodGllciwgc3R5bGUpO1xuXG4gICAgLy8gQVVUT01JTiAmIEFVVE9NQVggcmVzcGVjdGl2ZWx5IHNldCB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kc1xuICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFVVE9NSU4pKSB7XG4gICAgICAgIHNtaW4gPSB0aWVyLmN1cnJlbnRGZWF0dXJlc01pblNjb3JlKjAuOTU7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic21pbjpcXHRcIiArIHNtaW4pO1xuICAgIH1cbiAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5BVVRPTUFYKSkge1xuICAgICAgICBzbWF4ID0gdGllci5jdXJyZW50RmVhdHVyZXNNYXhTY29yZSoxLjA1O1xuICAgICAgICBjb25zb2xlLmxvZyhcInNtYXg6XFx0XCIgKyBzbWF4KTtcbiAgICB9XG5cbiAgICBpZiAoKDEuMCAqIHNjb3JlKSA8ICgxLjAgKiBzbWluKSkge1xuICAgICAgICBzY29yZSA9IHNtaW47XG4gICAgfVxuICAgIGlmICgoMS4wICogc2NvcmUpID4gKDEuMCAqIHNtYXgpKSB7XG4gICAgICAgIHNjb3JlID0gc21heDtcbiAgICB9XG5cbiAgICAvLyBTaGlmdCBzbWluL3NtYXggaW4gY2FzZSB3ZSB3YW50IHRvIGNlbnRlciB0aGUgaGlzdG9ncmFtXG4gICAgLy8gb24gdGhlIGhvcml6b250YWwgYXhpc1xuICAgIGlmIChjZW50ZXJPbkF4aXMpIHtcbiAgICAgICAgbGV0IHRtaW4gPSB0aWVyLnF1YW50TWluKHN0eWxlKTtcbiAgICAgICAgbGV0IHRtYXggPSB0aWVyLnF1YW50TWF4KHN0eWxlKTtcblxuICAgICAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5BVVRPTUlOKSkge1xuICAgICAgICAgICAgdG1pbiA9IHRpZXIuY3VycmVudEZlYXR1cmVzTWluU2NvcmUqMC45NTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5BVVRPTUFYKSkge1xuICAgICAgICAgICAgdG1heCA9IHRpZXIuY3VycmVudEZlYXR1cmVzTWF4U2NvcmUqMS4wNTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNtaW4gPSB0bWluIC0gKCh0bWF4IC0gdG1pbikgLyAyKTtcbiAgICAgICAgc21heCA9IHRtYXggLSAoKHRtYXggLSB0bWluKSAvIDIpO1xuICAgIH1cblxuICAgIGxldCBbcmVsU2NvcmUsIHJlbE9yaWdpbl0gPSByZWxTY29yZU9yaWdpbihzY29yZSwgc21pbiwgc21heCk7XG5cbiAgICBpZiAoZ2x5cGhUeXBlID09PSAnSElTVE9HUkFNJykge1xuICAgICAgICBsZXQgb3JpZ2luU2hpZnQgPSB4ID0+IHggLSBNYXRoLm1heCgwLCByZWxPcmlnaW4pO1xuICAgICAgICBoZWlnaHQgPSBNYXRoLmFicyhvcmlnaW5TaGlmdChyZWxTY29yZSkpICogcmVxdWlyZWRIZWlnaHQ7XG4gICAgICAgIHkgPSB5ICsgb3JpZ2luU2hpZnQoMS4wKSAqIHJlcXVpcmVkSGVpZ2h0O1xuXG4gICAgICAgIGlmIChyZWxTY29yZSA+PSByZWxPcmlnaW4pXG4gICAgICAgICAgICB5IC09IGhlaWdodDtcblxuICAgICAgICBpZiAoY2VudGVyT25BeGlzKVxuICAgICAgICAgICAgeSArPSBoZWlnaHQgLyAyO1xuXG4gICAgICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlW1wiSElERUFYSVNMQUJFTFwiXSkpXG4gICAgICAgICAgICBxdWFudCA9IG51bGw7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHF1YW50ID0ge21pbjogc21pbiwgbWF4OiBzbWF4fTtcbiAgICB9XG5cbiAgICBsZXQgc3Ryb2tlID0gc3R5bGUuRkdDT0xPUiB8fCBudWxsO1xuICAgIGxldCBmaWxsID0gc3R5bGUuQkdDT0xPUiB8fCBzdHlsZS5DT0xPUjEgfHwgJ2dyZWVuJztcbiAgICBpZiAoc3R5bGUuQkdJVEVNICYmIGZlYXR1cmUuaXRlbVJnYilcbiAgICAgICAgZmlsbCA9IGZlYXR1cmUuaXRlbVJnYjtcbiAgICBsZXQgYWxwaGEgPSBzdHlsZS5BTFBIQSA/ICgxLjAgKiBzdHlsZS5BTFBIQSkgOiBudWxsO1xuXG4gICAgaWYgKHN0eWxlLkJHR1JBRCkge1xuICAgICAgICBsZXQgZ3JhZCA9IHN0eWxlLkJHR1JBRDtcbiAgICAgICAgbGV0IHN0ZXAgPSAocmVsU2NvcmUqZ3JhZC5sZW5ndGgpfDA7XG4gICAgICAgIHN0ZXAgPSBSLmNsYW1wKDAsIHN0ZXAsIGdyYWQubGVuZ3RoIC0gMSk7XG4gICAgICAgIGZpbGwgPSBncmFkW3N0ZXBdO1xuICAgIH1cblxuICAgIGlmIChzdHlsZS5DT0xPUjIpIHtcbiAgICAgICAgbGV0IGdyYWQgPSBzdHlsZS5fZ3JhZGllbnQ7XG4gICAgICAgIGlmICghZ3JhZCkge1xuICAgICAgICAgICAgZ3JhZCA9IG1ha2VHcmFkaWVudCg1MCwgc3R5bGUuQ09MT1IxLCBzdHlsZS5DT0xPUjIsIHN0eWxlLkNPTE9SMyk7XG4gICAgICAgICAgICBzdHlsZS5fZ3JhZGllbnQgPSBncmFkO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN0ZXAgPSAocmVsU2NvcmUqZ3JhZC5sZW5ndGgpIHwgMDtcbiAgICAgICAgc3RlcCA9IFIuY2xhbXAoMCwgc3RlcCwgZ3JhZC5sZW5ndGggLSAxKTtcbiAgICAgICAgZmlsbCA9IGdyYWRbc3RlcF07XG4gICAgfVxuXG4gICAgbGV0IHRlbXBHbHlwaCA9IG5ldyBHbHlwaHMuQm94R2x5cGgobWluUG9zLCB5LCAobWF4UG9zIC0gbWluUG9zKSwgaGVpZ2h0LCBmaWxsLCBzdHJva2UsIGFscGhhKTtcbiAgICBnbHlwaCA9IG5ldyBHbHlwaHMuVHJhbnNsYXRlZEdseXBoKHRlbXBHbHlwaCwgMCwgMCwgcmVxdWlyZWRIZWlnaHQpO1xuXG4gICAgcmV0dXJuIFtnbHlwaCwgcXVhbnRdO1xufVxuXG5mdW5jdGlvbiBmZWF0dXJlVG9Qb2ludEdseXBoKHRpZXIsIGZlYXR1cmUsIHN0eWxlKSB7XG4gICAgbGV0IHNjYWxlID0gdGllci5icm93c2VyLnNjYWxlO1xuICAgIGxldCBvcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xuXG4gICAgbGV0IHNjb3JlID0gZmVhdHVyZS5zY29yZTtcblxuICAgIGxldCBtaW5Qb3MgPSAoZmVhdHVyZS5taW4gLSBvcmlnaW4pICogc2NhbGU7XG4gICAgbGV0IG1heFBvcyA9IE1hdGgubWF4KChmZWF0dXJlLm1heCAtIG9yaWdpbiArIDEpICogc2NhbGUsIG1pblBvcyArIDEpO1xuXG4gICAgbGV0IGhlaWdodCA9IHRpZXIuZm9yY2VIZWlnaHQgfHwgc3R5bGUuSEVJR0hUIHx8IDMwO1xuXG4gICAgbGV0IGdseXBoID0gbnVsbDtcbiAgICBsZXQgcXVhbnQgPSBudWxsO1xuXG4gICAgbGV0IFtzbWluLCBzbWF4XSA9IGdldFNjb3JlTWluTWF4KHRpZXIsIHN0eWxlKTtcbiAgICBsZXQgeXNjYWxlID0gKCgxLjAgKiBoZWlnaHQpIC8gKHNtYXggLSBzbWluKSk7XG4gICAgbGV0IHJlbFNjb3JlID0gKCgxLjAgKiBzY29yZSkgLSBzbWluKSAvIChzbWF4LXNtaW4pO1xuICAgIGxldCBzYyA9ICgoc2NvcmUgLSAoMS4wKnNtaW4pKSAqIHlzY2FsZSl8MDtcbiAgICBxdWFudCA9IHttaW46IHNtaW4sIG1heDogc21heH07XG5cbiAgICBsZXQgZmlsbCA9IHN0eWxlLkZHQ09MT1IgfHwgc3R5bGUuQ09MT1IxIHx8ICdibGFjayc7XG4gICAgaWYgKHN0eWxlLkNPTE9SMikge1xuICAgICAgICBsZXQgZ3JhZCA9IHN0eWxlLl9ncmFkaWVudDtcbiAgICAgICAgaWYgKCFncmFkKSB7XG4gICAgICAgICAgICBncmFkID0gbWFrZUdyYWRpZW50KDUwLCBzdHlsZS5DT0xPUjEsIHN0eWxlLkNPTE9SMiwgc3R5bGUuQ09MT1IzKTtcbiAgICAgICAgICAgIHN0eWxlLl9ncmFkaWVudCA9IGdyYWQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3RlcCA9IChyZWxTY29yZSpncmFkLmxlbmd0aCl8MDtcbiAgICAgICAgc3RlcCA9IFIuY2xhbXAoMCwgc3RlcCwgZ3JhZC5sZW5ndGggLSAxKTtcbiAgICAgICAgZmlsbCA9IGdyYWRbc3RlcF07XG4gICAgfVxuXG4gICAgZ2x5cGggPSBuZXcgR2x5cGhzLlBvaW50R2x5cGgoKG1pblBvcyArIG1heFBvcykvMiwgaGVpZ2h0LXNjLCBoZWlnaHQsIGZpbGwpO1xuXG4gICAgcmV0dXJuIFtnbHlwaCwgcXVhbnRdO1xufVxuXG5mdW5jdGlvbiBzZXF1ZW5jZUdseXBoKGNhbnZhcywgdGllciwgZmVhdHVyZSwgc3R5bGUsIGZvcmNlSGVpZ2h0KSB7XG4gICAgbGV0IHNjYWxlID0gdGllci5icm93c2VyLnNjYWxlO1xuICAgIGxldCBvcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xuXG4gICAgbGV0IG1pbiA9IGZlYXR1cmUubWluO1xuICAgIGxldCBtYXggPSBmZWF0dXJlLm1heDtcbiAgICBsZXQgbWluUG9zID0gKGZlYXR1cmUubWluIC0gb3JpZ2luKSAqIHNjYWxlO1xuICAgIGxldCBtYXhQb3MgPSBNYXRoLm1heCgoZmVhdHVyZS5tYXggLSBvcmlnaW4gKyAxKSAqIHNjYWxlLCBtaW5Qb3MgKyAxKTtcblxuICAgIGxldCBoZWlnaHQgPSAodGllci5mb3JjZUhlaWdodCB8fCBzdHlsZS5IRUlHSFQgfHwgZm9yY2VIZWlnaHQgfHwgMTIpICogMS4wO1xuXG4gICAgbGV0IGdseXBoID0gbnVsbDtcblxuICAgIGxldCByYXdzZXEgPSBmZWF0dXJlLnNlcTtcbiAgICBsZXQgc2VxID0gcmF3c2VxO1xuICAgIGxldCByYXdxdWFscyA9IGZlYXR1cmUucXVhbHM7XG4gICAgbGV0IHF1YWxzID0gcmF3cXVhbHM7XG4gICAgbGV0IGluc2VydGlvbkxhYmVscyA9IGlzRGFzQm9vbGVhblRydWUoc3R5bGUuX19JTlNFUlRJT05TKTtcblxuICAgIGxldCBpbmRlbHMgPSBbXTtcbiAgICBpZiAoZmVhdHVyZS5jaWdhcikge1xuICAgICAgICBsZXQgb3BzID0gcGFyc2VDaWdhcihmZWF0dXJlLmNpZ2FyKTtcbiAgICAgICAgc2VxID0gJyc7XG4gICAgICAgIHF1YWxzID0gJyc7XG4gICAgICAgIGxldCBjdXJzb3IgPSAwO1xuXG4gICAgICAgIG9wcy5mb3JFYWNoKGNvID0+IHtcbiAgICAgICAgICAgIGlmIChjby5vcCA9PT0gJ00nKSB7XG4gICAgICAgICAgICAgICAgc2VxICs9IHJhd3NlcS5zdWJzdHIoY3Vyc29yLCBjby5jbnQpO1xuICAgICAgICAgICAgICAgIHF1YWxzICs9IHJhd3F1YWxzLnN1YnN0cihjdXJzb3IsIGNvLmNudCk7XG4gICAgICAgICAgICAgICAgY3Vyc29yICs9IGNvLmNudDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY28ub3AgPT09ICdEJykge1xuICAgICAgICAgICAgICAgIHNlcSArPSBcIi1cIi5yZXBlYXQoY28uY250KTtcbiAgICAgICAgICAgICAgICBxdWFscyArPSBcIlpcIi5yZXBlYXQoY28uY250KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY28ub3AgPT09ICdJJykge1xuICAgICAgICAgICAgICAgIGxldCBpbnNlcSA9IHJhd3NlcS5zdWJzdHIoY3Vyc29yLCBjby5jbnQpO1xuICAgICAgICAgICAgICAgIGxldCBpZyA9IG5ldyBHbHlwaHMuVHJhbnNsYXRlZEdseXBoKFxuICAgICAgICAgICAgICAgICAgICBuZXcgR2x5cGhzLlRyaWFuZ2xlR2x5cGgobWluUG9zICsgKHNlcS5sZW5ndGgqc2NhbGUpLCA2LCAnUycsIDUsIHRpZXIuYnJvd3Nlci5iYXNlQ29sb3JzWydJJ10pLFxuICAgICAgICAgICAgICAgICAgICAwLCAtMiwgMFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGluc2VydGlvbkxhYmVscylcbiAgICAgICAgICAgICAgICAgICAgaWcgPSBuZXcgR2x5cGhzLkxhYmVsbGVkR2x5cGgoY2FudmFzLCBpZywgaW5zZXEsIGZhbHNlLCAnY2VudGVyJywgJ2Fib3ZlJywgJzdweCBzYW5zLXNlcmlmJyk7XG4gICAgICAgICAgICAgICAgaWcuZmVhdHVyZSA9IHtsYWJlbDogJ0luc2VydGlvbjogJyArIGluc2VxLCB0eXBlOiAnaW5zZXJ0aW9uJywgbWV0aG9kOiAnaW5zZXJ0aW9uJ307XG4gICAgICAgICAgICAgICAgaW5kZWxzLnB1c2goaWcpO1xuXG4gICAgICAgICAgICAgICAgY3Vyc29yICs9IGNvLmNudDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY28ub3AgPT09ICdTJykge1xuICAgICAgICAgICAgICAgIGN1cnNvciArPSBjby5jbnQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1bmtub3duIGNpZ29wJyArIGNvLm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGV0IHJlZlNlcSA9IGdldFJlZlNlcSh0aWVyLCBtaW4sIG1heCk7XG4gICAgaWYgKHNlcSAmJiByZWZTZXEgJiZcbiAgICAgICAgKHN0eWxlLl9fU0VRQ09MT1IgPT09ICdtaXNtYXRjaCcgfHxcbiAgICAgICAgIHN0eWxlLl9fU0VRQ09MT1IgPT09ICdtaXNtYXRjaC1hbGwnKSkge1xuICAgICAgICBsZXQgbWlzbWF0Y2hTZXEgPSBbXTtcbiAgICAgICAgbGV0IG1hdGNoID0gZmVhdHVyZS5vcmllbnRhdGlvbiA9PT0gJy0nID8gJywnIDogJy4nO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlcS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgbWlzbWF0Y2hTZXEucHVzaChzZXFbaV0gPT0gcmVmU2VxW2ldID8gbWF0Y2ggOiBzZXFbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHNlcSA9IG1pc21hdGNoU2VxLmpvaW4oJycpO1xuICAgIH1cblxuICAgIGxldCBzdHJhbmRDb2xvciA9IGZlYXR1cmUub3JpZW50YXRpb24gPT09ICctJyA/XG4gICAgICAgICAgICAgIHN0eWxlLl9taW51c0NvbG9yIHx8ICdsaWdodHNreWJsdWUnXG4gICAgICAgICAgICA6IHN0eWxlLl9wbHVzQ29sb3IgfHwgJ2xpZ2h0c2FsbW9uJztcblxuICAgIGlmIChzdHlsZS5fX2Rpc2FibGVRdWFscylcbiAgICAgICAgcXVhbHMgPSBmYWxzZTtcblxuICAgIGdseXBoID0gbmV3IEdseXBocy5TZXF1ZW5jZUdseXBoKFxuICAgICAgICB0aWVyLmJyb3dzZXIuYmFzZUNvbG9ycyxcbiAgICAgICAgc3RyYW5kQ29sb3IsXG4gICAgICAgIG1pblBvcyxcbiAgICAgICAgbWF4UG9zLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIHNlcSxcbiAgICAgICAgcmVmU2VxLFxuICAgICAgICBzdHlsZS5fX1NFUUNPTE9SLFxuICAgICAgICBxdWFscyxcbiAgICAgICAgIWlzRGFzQm9vbGVhblRydWUoc3R5bGUuX19DTEVBUkJHKSxcbiAgICAgICAgdGllci5zY2FsZVZlcnRpY2FsXG4gICAgKTtcblxuICAgIGlmIChpbnNlcnRpb25MYWJlbHMpXG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5UcmFuc2xhdGVkR2x5cGgoZ2x5cGgsIDAsIDcpO1xuXG4gICAgaWYgKGluZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGluZGVscy5zcGxpY2UoMCwgMCwgZ2x5cGgpO1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuR3JvdXBHbHlwaChpbmRlbHMpO1xuICAgIH1cblxuICAgIHJldHVybiBnbHlwaDtcbn1cblxuZnVuY3Rpb24gbWFrZUxpbmVQbG90KGZlYXR1cmVzLCBzdHlsZSwgdGllciwgeXNoaWZ0KSB7XG4gICAgeXNoaWZ0ID0geXNoaWZ0IHx8IDA7XG5cbiAgICBsZXQgb3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydCwgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XG4gICAgbGV0IGhlaWdodCA9IHRpZXIuZm9yY2VIZWlnaHQgfHwgc3R5bGUuSEVJR0hUIHx8IDMwO1xuICAgIGxldCBtaW4gPSB0aWVyLnF1YW50TWluKHN0eWxlKTtcbiAgICBsZXQgbWF4ID0gdGllci5xdWFudE1heChzdHlsZSk7XG5cbiAgICAvLyBBVVRPTUlOICYgQVVUT01BWCByZXNwZWN0aXZlbHkgc2V0IHRoZSBsb3dlciBhbmQgdXBwZXIgYm91bmRzXG4gICAgaWYgKGlzRGFzQm9vbGVhblRydWUoc3R5bGUuQVVUT01JTikpIHtcbiAgICAgICAgLy8gYWRkIHNvbWUgYmFzaWNhbGx5IGFyYml0cmFyeSBwYWRkaW5nXG4gICAgICAgIG1pbiA9IHRpZXIuY3VycmVudEZlYXR1cmVzTWluU2NvcmUqMC45NTtcbiAgICB9XG4gICAgaWYgKGlzRGFzQm9vbGVhblRydWUoc3R5bGUuQVVUT01BWCkpIHtcbiAgICAgICAgbWF4ID0gdGllci5jdXJyZW50RmVhdHVyZXNNYXhTY29yZSoxLjA1O1xuICAgIH1cblxuICAgIGxldCB5c2NhbGUgPSAoKDEuMCAqIGhlaWdodCkgLyAobWF4IC0gbWluKSk7XG4gICAgbGV0IGNvbG9yID0gc3R5bGUuRkdDT0xPUiB8fCBzdHlsZS5DT0xPUjEgfHwgJ2JsYWNrJztcblxuICAgIGxldCBwcmV2U2lnbiA9IDE7XG4gICAgbGV0IGN1clNpZ24gPSBudWxsO1xuXG4gICAgbGV0IGN1ckdseXBoUG9pbnRzID0gW107XG4gICAgbGV0IGdseXBoU2VxdWVuY2VzID0gW107XG5cbiAgICBsZXQgcHJldlBvaW50ID0gbnVsbDtcblxuICAgIGZlYXR1cmVzLmZvckVhY2goZiA9PiB7XG4gICAgICAgIGxldCBweCA9ICgoKChmLm1pbnwwKSArIChmLm1heHwwKSkgLyAyKSAtIG9yaWdpbikgKiBzY2FsZTtcbiAgICAgICAgbGV0IHNjID0gKChmLnNjb3JlIC0gKDEuMCptaW4pKSAqIHlzY2FsZSl8MDtcblxuICAgICAgICAvLyBBZGRpdGl2ZSB0cmFja3MgYXJlIGFsd2F5cyBhYm92ZSB0aGUgeC1heGlzLCBhbmQgYXJlIGNvbG9yZWRcbiAgICAgICAgLy8gZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHNjb3JlIGlzIHBvc2l0aXZlIG9yIG5lZ2F0aXZlLlxuICAgICAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5BRERJVElWRSkpIHtcbiAgICAgICAgICAgIGN1clNpZ24gPSBmLnNjb3JlIDwgMCA/IC0xIDogMTtcblxuICAgICAgICAgICAgaWYgKGN1clNpZ24gIT09IHByZXZTaWduKSB7XG4gICAgICAgICAgICAgICAgZ2x5cGhTZXF1ZW5jZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50czogY3VyR2x5cGhQb2ludHMsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBwcmV2U2lnbiA9PT0gMSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5QT1NDT0xPUlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzdHlsZS5ORUdDT0xPUlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGN1ckdseXBoUG9pbnRzID0gW107XG4gICAgICAgICAgICAgICAgLy8gTmVlZCB0byBhZGQgdGhlIHByZXZpb3VzIHBvaW50IHRvIHRoaXMgc2VxdWVuY2UsXG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZXJlIGlzIGEgZ2FwIGluIHRoZSByZXN1bHRpbmcgcGxvdFxuICAgICAgICAgICAgICAgIGN1ckdseXBoUG9pbnRzLnB1c2gocHJldlBvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZTaWduID0gY3VyU2lnbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1clNpZ24gPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHB5ID0gKGhlaWdodCAtIChzYyAqIGN1clNpZ24pKSArIHlzaGlmdDtcbiAgICAgICAgcHJldlBvaW50ID0ge3g6IHB4LCB5OiBweX07XG4gICAgICAgIGN1ckdseXBoUG9pbnRzLnB1c2gocHJldlBvaW50KTtcbiAgICB9KTtcblxuXG4gICAgLy8gTmVlZCB0byBhZGQgdGhlIGZpbmFsIHNlcXVlbmNlIG9mIHBvaW50cyBhcyB3ZWxsLlxuICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFERElUSVZFKSkge1xuICAgICAgICBjb2xvciA9IGN1clNpZ24gPT09IDEgPyBzdHlsZS5QT1NDT0xPUiA6IHN0eWxlLk5FR0NPTE9SO1xuICAgIH1cbiAgICBnbHlwaFNlcXVlbmNlcy5wdXNoKHtcbiAgICAgICAgcG9pbnRzOiBjdXJHbHlwaFBvaW50cyxcbiAgICAgICAgY29sb3I6IGNvbG9yXG4gICAgfSk7XG5cblxuICAgIGxldCBsZ2dzID0gZ2x5cGhTZXF1ZW5jZXMubWFwKGdzID0+IHtcbiAgICAgICAgbGV0IGxnZyA9IG5ldyBHbHlwaHMuTGluZUdyYXBoR2x5cGgoZ3MucG9pbnRzLCBncy5jb2xvciwgaGVpZ2h0KTtcbiAgICAgICAgbGdnLnF1YW50ID0ge21pbiwgbWF4fTtcblxuICAgICAgICBpZiAoc3R5bGUuWklOREVYKVxuICAgICAgICAgICAgbGdnLnppbmRleCA9IHN0eWxlLlpJTkRFWHwwO1xuXG4gICAgICAgIHJldHVybiBsZ2c7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbGdncztcbn1cblxuZnVuY3Rpb24gbWFrZVN0YWNrZWRCYXJzKGZlYXR1cmVzLCB0aWVyKSB7XG4gICAgbGV0IGdseXBocyA9IFtdO1xuXG4gICAgbGV0IHBvc1N0YWNrcyA9IFtdLFxuICAgICAgICBuZWdTdGFja3MgPSBbXTtcblxuICAgIGNvbnN0IHNjYWxlID0gdGllci5icm93c2VyLnNjYWxlLCBvcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xuICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmZWF0dXJlcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZSA9IGZlYXR1cmVzW2ZpXTtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aWVyLnN0eWxlRm9yRmVhdHVyZShmZWF0dXJlKTtcbiAgICAgICAgbGV0IHNjb3JlID0gZmVhdHVyZS5zY29yZSAqIDEuMDtcblxuICAgICAgICBsZXQgaGVpZ2h0ID0gdGllci5mb3JjZUhlaWdodCB8fCBzdHlsZS5IRUlHSFQgfHwgMTI7XG4gICAgICAgIGNvbnN0IHJlcXVpcmVkSGVpZ2h0ID0gaGVpZ2h0ID0gMS4wICogaGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IG1pbiA9IGZlYXR1cmUubWluO1xuICAgICAgICBjb25zdCBtYXggPSBmZWF0dXJlLm1heDtcblxuICAgICAgICBjb25zdCBtaW5Qb3MgPSAobWluIC0gb3JpZ2luKSAqIHNjYWxlO1xuICAgICAgICBjb25zdCByYXdNYXhQb3MgPSAoKG1heCAtIG9yaWdpbiArIDEpICogc2NhbGUpO1xuICAgICAgICBjb25zdCBtYXhQb3MgPSBNYXRoLm1heChyYXdNYXhQb3MsIG1pblBvcyArIDEpO1xuXG4gICAgICAgIC8vIFRoaXMgc2hvdWxkIHNvbWV3aGF0IG1hdGNoIHRoZSAnSElTVE9HUkFNJyBwYXRoLlxuXG4gICAgICAgIHZhciBzbWluID0gdGllci5xdWFudE1pbihzdHlsZSk7XG4gICAgICAgIHZhciBzbWF4ID0gdGllci5xdWFudE1heChzdHlsZSk7XG5cbiAgICAgICAgaWYgKCFzbWF4KSB7XG4gICAgICAgICAgICBpZiAoc21pbiA8IDApIHtcbiAgICAgICAgICAgICAgICBzbWF4ID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc21heCA9IDEwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc21heCA9IHNtYXggKiAxLjA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNtaW4pIHtcbiAgICAgICAgICAgIHNtaW4gPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc21pbiA9IHNtaW4gKiAxLjA7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3RhY2tPcmlnaW47XG4gICAgICAgIGlmIChzY29yZSA+PSAwKSB7XG4gICAgICAgICAgICBzdGFja09yaWdpbiA9IHBvc1N0YWNrc1ttaW5dIHx8IDA7XG4gICAgICAgICAgICBwb3NTdGFja3NbbWluXSA9IHN0YWNrT3JpZ2luICsgc2NvcmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGFja09yaWdpbiA9IG5lZ1N0YWNrc1ttaW5dIHx8IDA7XG4gICAgICAgICAgICBuZWdTdGFja3NbbWluXSA9IHN0YWNrT3JpZ2luICsgc2NvcmU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RhY2tPcmlnaW4gPiBzbWF4IHx8IHN0YWNrT3JpZ2luIDwgc21pbikge1xuICAgICAgICAgICAgLy8gU3RhY2sgaGFzIGV4dGVuZGVkIG91dHNpZGUgb2YgcmFuZ2UuXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdGFja09yaWdpbiArIHNjb3JlIDwgc21pbikge1xuICAgICAgICAgICAgc2NvcmUgPSBzbWluIC0gc3RhY2tPcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YWNrT3JpZ2luICsgc2NvcmUgPiBzbWF4KSB7XG4gICAgICAgICAgICBzY29yZSA9IHNtYXggLSBzdGFja09yaWdpbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWxTY29yZUVuZCA9IChzY29yZSArIHN0YWNrT3JpZ2luIC0gc21pbikgLyAoc21heCAtIHNtaW4pO1xuICAgICAgICB2YXIgcmVsU2NvcmVTdGFydCA9IChzdGFja09yaWdpbiAtIHNtaW4pIC8gKHNtYXggLSBzbWluKVxuICAgICAgICB2YXIgcmVsU2NvcmVNYXggPSBNYXRoLm1heChyZWxTY29yZVN0YXJ0LCByZWxTY29yZUVuZCk7XG4gICAgICAgIHZhciByZWxTY29yZU1pbiA9IE1hdGgubWluKHJlbFNjb3JlU3RhcnQsIHJlbFNjb3JlRW5kKTtcblxuICAgICAgICBoZWlnaHQgPSAocmVsU2NvcmVNYXggLSByZWxTY29yZU1pbikgKiByZXF1aXJlZEhlaWdodDtcbiAgICAgICAgdmFyIHkgPSAoMS4wIC0gcmVsU2NvcmVNYXgpICogcmVxdWlyZWRIZWlnaHQ7XG5cbiAgICAgICAgbGV0IHN0cm9rZSA9IHN0eWxlLkZHQ09MT1IgfHwgbnVsbDtcbiAgICAgICAgbGV0IGZpbGwgPSBzdHlsZS5CR0NPTE9SIHx8IHN0eWxlLkNPTE9SMSB8fCAnZ3JlZW4nO1xuICAgICAgICBpZiAoc3R5bGUuQkdJVEVNICYmIGZlYXR1cmUuaXRlbVJnYilcbiAgICAgICAgICAgIGZpbGwgPSBmZWF0dXJlLml0ZW1SZ2I7XG4gICAgICAgIGNvbnN0IGFscGhhID0gc3R5bGUuQUxQSEEgPyAoMS4wICogc3R5bGUuQUxQSEEpIDogbnVsbDtcblxuICAgICAgICBsZXQgZ2cgPSBuZXcgR2x5cGhzLkJveEdseXBoKG1pblBvcywgeSwgKG1heFBvcyAtIG1pblBvcyksIGhlaWdodCwgZmlsbCwgc3Ryb2tlLCBhbHBoYSk7XG4gICAgICAgIGdnID0gbmV3IEdseXBocy5UcmFuc2xhdGVkR2x5cGgoZ2csIDAsIDAsIHJlcXVpcmVkSGVpZ2h0KTtcbiAgICAgICAgZ2cuZmVhdHVyZSA9IGZlYXR1cmU7XG4gICAgICAgIGdnLnF1YW50ID0ge1xuICAgICAgICAgICAgbWluOiBzbWluLCBtYXg6IHNtYXhcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHN0eWxlLlpJTkRFWCkge1xuICAgICAgICAgICAgZ2cuemluZGV4ID0gc3R5bGUuWklOREVYIHwgMDtcbiAgICAgICAgfVxuICAgICAgICBnbHlwaHMucHVzaChnZyk7XG5cbiAgICB9XG4gICAgcmV0dXJuIGdseXBocztcbn1cblxuLy8gaGVpZ2h0IGlzIHN1YnRpZXIgaGVpZ2h0XG5mdW5jdGlvbiBjcmVhdGVRdWFudE92ZXJsYXkodGllciwgaGVpZ2h0LCByZXRpbmE9ZmFsc2UpIHtcbiAgICBsZXQgd2lkdGggPSA1MDtcblxuICAgIHRpZXIucXVhbnRPdmVybGF5LmhlaWdodCA9IGhlaWdodDtcbiAgICB0aWVyLnF1YW50T3ZlcmxheS53aWR0aCA9IHJldGluYSA/IHdpZHRoKjIgOiB3aWR0aDtcbiAgICB0aWVyLnF1YW50T3ZlcmxheS5zdHlsZS5oZWlnaHQgPSAnJyArIChyZXRpbmEgPyBoZWlnaHQvMiA6IGhlaWdodCkgKyAncHgnO1xuICAgIHRpZXIucXVhbnRPdmVybGF5LnN0eWxlLndpZHRoID0gJycgKyB3aWR0aCArICdweCc7XG4gICAgdGllci5xdWFudE92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICBsZXQgY2FudmFzID0gdGllci5xdWFudE92ZXJsYXkuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIGlmIChyZXRpbmEpIHtcbiAgICAgICAgY2FudmFzLnNjYWxlKDIsIDIpO1xuICAgIH1cblxuICAgIHJldHVybiBjYW52YXM7XG59XG5cbmZ1bmN0aW9uIHBhaW50UXVhbnQoY2FudmFzLCB0aWVyLCBxdWFudCwgdGljcykge1xuICAgIGNhbnZhcy5zYXZlKCk7XG5cbiAgICBsZXQgaCA9IHRpZXIucXVhbnRPdmVybGF5LmhlaWdodDtcbiAgICBsZXQgdyA9IDEwMDtcblxuICAgIGxldCB0aWNTcGFjaW5nID0gKGggKyB0aWVyLnBhZGRpbmcqMikgLyB0aWNzO1xuICAgIGxldCB0aWNJbnRlcnZhbCA9IChxdWFudC5tYXggLSBxdWFudC5taW4pIC8gdGljcztcblxuICAgIGNhbnZhcy5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgIGNhbnZhcy5nbG9iYWxBbHBoYSA9IDAuNjtcbiAgICBpZiAodGllci5icm93c2VyLnJ1bGVyTG9jYXRpb24gPT0gJ3JpZ2h0Jykge1xuICAgICAgICBjYW52YXMuZmlsbFJlY3Qody0zMCwgMCwgMzAsIGggKyB0aWVyLnBhZGRpbmcqMik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2FudmFzLmZpbGxSZWN0KDAsIDAsIDMwLCBoICsgdGllci5wYWRkaW5nKjIpO1xuICAgIH1cbiAgICBjYW52YXMuZ2xvYmFsQWxwaGEgPSAxLjA7XG5cbiAgICBjYW52YXMuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgIGNhbnZhcy5saW5lV2lkdGggPSAxO1xuICAgIGNhbnZhcy5iZWdpblBhdGgoKTtcbiAgICBpZiAodGllci5icm93c2VyLnJ1bGVyTG9jYXRpb24gPT0gJ3JpZ2h0Jykge1xuICAgICAgICBjYW52YXMubW92ZVRvKHcgLSA4LCB0aWVyLnBhZGRpbmcpO1xuICAgICAgICBjYW52YXMubGluZVRvKHcsIHRpZXIucGFkZGluZyk7XG4gICAgICAgIGNhbnZhcy5saW5lVG8odywgaCArIHRpZXIucGFkZGluZyk7XG4gICAgICAgIGNhbnZhcy5saW5lVG8odyAtIDgsIGggKyB0aWVyLnBhZGRpbmcpO1xuXG4gICAgICAgIGZvciAobGV0IHQgPSAxOyB0IDwgdGljcy0xOyB0KyspIHtcbiAgICAgICAgICAgIGxldCB0eSA9IHQqdGljU3BhY2luZztcbiAgICAgICAgICAgIGNhbnZhcy5tb3ZlVG8odywgdHkpO1xuICAgICAgICAgICAgY2FudmFzLmxpbmVUbyh3IC0gNSwgdHkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2FudmFzLm1vdmVUbyg4LCB0aWVyLnBhZGRpbmcpO1xuICAgICAgICBjYW52YXMubGluZVRvKDAsIHRpZXIucGFkZGluZyk7XG4gICAgICAgIGNhbnZhcy5saW5lVG8oMCwgaCArIHRpZXIucGFkZGluZyk7XG4gICAgICAgIGNhbnZhcy5saW5lVG8oOCwgaCArIHRpZXIucGFkZGluZyk7XG5cbiAgICAgICAgZm9yIChsZXQgdCA9IDE7IHQgPCB0aWNzLTE7IHQrKykge1xuICAgICAgICAgICAgbGV0IHR5ID0gdCp0aWNTcGFjaW5nO1xuICAgICAgICAgICAgY2FudmFzLm1vdmVUbygwLCB0eSk7XG4gICAgICAgICAgICBjYW52YXMubGluZVRvKDUsIHR5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYW52YXMuc3Ryb2tlKCk7XG5cbiAgICBjYW52YXMuZmlsbFN0eWxlID0gJ2JsYWNrJztcblxuICAgIGlmICh0aWVyLmJyb3dzZXIucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgIGNhbnZhcy50ZXh0QWxpZ24gPSAncmlnaHQnO1xuICAgICAgICBjYW52YXMuZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbChxdWFudC5tYXgpLCB3LTksIDgpO1xuICAgICAgICBjYW52YXMuZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbChxdWFudC5taW4pLCB3LTksIGggKyB0aWVyLnBhZGRpbmcpO1xuXG4gICAgICAgIGZvciAobGV0IHQgPSAxOyB0IDwgdGljcy0xOyB0KyspIHtcbiAgICAgICAgICAgIGxldCB0eSA9IHQqdGljU3BhY2luZztcbiAgICAgICAgICAgIGNhbnZhcy5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKCgxLjAqcXVhbnQubWF4KSAtICh0KnRpY0ludGVydmFsKSksIHcgLSA5LCB0eSArIDMpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2FudmFzLnRleHRBbGlnbiA9ICdsZWZ0JztcbiAgICAgICAgY2FudmFzLmZpbGxUZXh0KGZvcm1hdFF1YW50TGFiZWwocXVhbnQubWF4KSwgOSwgOCk7XG4gICAgICAgIGNhbnZhcy5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1pbiksIDksIGggKyB0aWVyLnBhZGRpbmcpO1xuXG4gICAgICAgIGZvciAobGV0IHQgPSAxOyB0IDwgdGljcy0xOyB0KyspIHtcbiAgICAgICAgICAgIGxldCB0eSA9IHQqdGljU3BhY2luZztcbiAgICAgICAgICAgIGNhbnZhcy5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKCgxLjAqcXVhbnQubWF4KSAtICh0KnRpY0ludGVydmFsKSksIDksIHR5ICsgMyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjYW52YXMucmVzdG9yZSgpO1xufVxuXG5mdW5jdGlvbiBmZWF0dXJlTG9va3VwKHRpZXIsIHJ4LCByeSkge1xuICAgIHZhciBzdCA9IHRpZXIuc3VidGllcnM7XG4gICAgaWYgKCFzdCkgeyAgICAgICAgICAgXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc3RpID0gMDtcbiAgICByeSAtPSB0aWVyLnBhZGRpbmc7XG4gICAgd2hpbGUgKHN0aSA8IHN0Lmxlbmd0aCAmJiByeSA+IHN0W3N0aV0uaGVpZ2h0ICYmIHN0aSA8IChzdC5sZW5ndGggLSAxKSkge1xuICAgICAgICByeSA9IHJ5IC0gc3Rbc3RpXS5oZWlnaHQgLSB0aWVyLnBhZGRpbmc7XG4gICAgICAgICsrc3RpO1xuICAgIH1cbiAgICBpZiAoc3RpID49IHN0Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHZhciBnbHlwaHMgPSBzdFtzdGldLmdseXBocztcbiAgICB2YXIgdmlld0NlbnRlciA9ICh0aWVyLmJyb3dzZXIudmlld1N0YXJ0ICsgdGllci5icm93c2VyLnZpZXdFbmQpLzI7XG4gICAgdmFyIG9mZnNldCA9ICh0aWVyLmdseXBoQ2FjaGVPcmlnaW4gLSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0KSp0aWVyLmJyb3dzZXIuc2NhbGU7XG4gICAgcnggLT0gb2Zmc2V0O1xuXG4gICAgcmV0dXJuIGdseXBoTG9va3VwKGdseXBocywgcngsIHJ5KTtcbn1cblxuZnVuY3Rpb24gZ2x5cGhMb29rdXAoZ2x5cGhzLCByeCwgcnksIG1hdGNoZXMpIHtcbiAgICBtYXRjaGVzID0gbWF0Y2hlcyB8fCBbXTtcblxuICAgIGZvciAodmFyIGdpID0gZ2x5cGhzLmxlbmd0aCAtIDE7IGdpID49IDA7IC0tZ2kpIHtcbiAgICAgICAgdmFyIGcgPSBnbHlwaHNbZ2ldO1xuICAgICAgICBpZiAoIWcubm90U2VsZWN0YWJsZSAmJiBnLm1pbigpIDw9IHJ4ICYmIGcubWF4KCkgPj0gcngpIHtcbiAgICAgICAgICAgIGlmIChnLm1pblkpIHtcbiAgICAgICAgICAgICAgICBpZiAocnkgPCBnLm1pblkoKSB8fCByeSA+IGcubWF4WSgpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGcuZmVhdHVyZSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChnLmZlYXR1cmUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChnLmdyb3VwKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGcuZ3JvdXApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZy5nbHlwaHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2x5cGhMb29rdXAoZy5nbHlwaHMsIHJ4LCByeSwgbWF0Y2hlcyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGcuZ2x5cGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2x5cGhMb29rdXAoW2cuZ2x5cGhdLCByeCwgcnksIG1hdGNoZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWF0Y2hlcztcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vL1xuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIGRvbXVpLmpzOiBTVkcgVUkgY29tcG9uZW50c1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZUFsbFBvcHVwcyA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIHBpID0gMDsgcGkgPCB0aGlzLnBvcHVwcy5sZW5ndGg7ICsrcGkpIHtcbiAgICAgICAgdmFyIHBvcHVwID0gdGhpcy5wb3B1cHNbcGldO1xuICAgICAgICBpZiAocG9wdXAub25DbG9zZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwb3B1cC5vbkNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhQb3B1cEhvbGRlci5yZW1vdmVDaGlsZChwb3B1cC5jb21wb25lbnQpO1xuICAgIH1cbiAgICB0aGlzLnBvcHVwcyA9IFtdO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5tYWtlVG9vbHRpcCA9IGZ1bmN0aW9uKGVsZSwgdGV4dClcbntcbiAgICBlbGUudGl0bGUgPSB0ZXh0O1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5wb3BpdCA9IGZ1bmN0aW9uKGV2LCBuYW1lLCBlbGUsIG9wdHMpXG57XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICBpZiAoIW9wdHMpXG4gICAgICAgIG9wdHMgPSB7fTtcbiAgICBpZiAoIWV2KVxuICAgICAgICBldiA9IHt9O1xuXG4gICAgdmFyIHdpZHRoID0gb3B0cy53aWR0aCB8fCAyMDA7XG5cbiAgICB2YXIgbXgsIG15O1xuXG4gICAgaWYgKGV2LmNsaWVudFgpIHtcbiAgICAgICAgdmFyIG14ID0gIGV2LmNsaWVudFgsIG15ID0gZXYuY2xpZW50WTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBteCA9IDUwMDsgbXk9IDUwO1xuICAgIH1cbiAgICBteCArPSAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xuICAgIG15ICs9ICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuICAgIHZhciB3aW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXG4gICAgdmFyIHRvcCA9IG15O1xuICAgIHZhciBsZWZ0ID0gTWF0aC5taW4obXggLSAod2lkdGgvMikgLSA0LCAod2luV2lkdGggLSB3aWR0aCAtIDMwKSk7XG5cbiAgICB2YXIgcG9wdXAgPSBtYWtlRWxlbWVudCgnZGl2Jyk7XG4gICAgcG9wdXAuY2xhc3NOYW1lID0gJ3BvcG92ZXIgZmFkZSAnICsgKGV2LmNsaWVudFggPyAnYm90dG9tICcgOiAnJykgKyAnaW4nO1xuICAgIHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHBvcHVwLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBwb3B1cC5zdHlsZS50b3AgPSAnJyArIHRvcCArICdweCc7XG4gICAgcG9wdXAuc3R5bGUubGVmdCA9ICcnICsgbGVmdCArICdweCc7XG4gICAgcG9wdXAuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XG4gICAgaWYgKHdpZHRoID4gMjc2KSB7XG4gICAgICAgIC8vIEhBQ0sgQm9vdHN0cmFwcGlmaWNhdGlvbi4uLlxuICAgICAgICBwb3B1cC5zdHlsZS5tYXhXaWR0aCA9IHdpZHRoICsgJ3B4JztcbiAgICB9XG5cbiAgICBwb3B1cC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ2Fycm93J30pKTtcblxuICAgIGlmIChuYW1lKSB7XG4gICAgICAgIHZhciBjbG9zZUJ1dHRvbiA9IG1ha2VFbGVtZW50KCdidXR0b24nLCAnJywge2NsYXNzTmFtZTogJ2Nsb3NlJ30pO1xuICAgICAgICBjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSAnJnRpbWVzOydcblxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgY2xvc2VCdXR0b24uc3R5bGUuY29sb3IgPSAncmVkJztcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBjbG9zZUJ1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB0aGlzQi5yZW1vdmVBbGxQb3B1cHMoKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB2YXIgdGJhciA9IG1ha2VFbGVtZW50KCdoNCcsIFttYWtlRWxlbWVudCgnc3BhbicsIG5hbWUsIG51bGwsIHttYXhXaWR0aDogJzIwMHB4J30pLCBjbG9zZUJ1dHRvbl0sIHsvKmNsYXNzTmFtZTogJ3BvcG92ZXItdGl0bGUnICovfSwge3BhZGRpbmdMZWZ0OiAnMTBweCcsIHBhZGRpbmdSaWdodDogJzEwcHgnfSk7XG5cbiAgICAgICAgaWYgKCAhb3B0cy5kaXNhYmxlRHJhZyApIHtcbiAgICAgICAgICAgIHZhciBkcmFnT1gsIGRyYWdPWTtcbiAgICAgICAgICAgIHZhciBtb3ZlSGFuZGxlciwgdXBIYW5kbGVyO1xuICAgICAgICAgICAgbW92ZUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGxlZnQgPSBsZWZ0ICsgKGV2LmNsaWVudFggLSBkcmFnT1gpO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0IDwgOCkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gODtcbiAgICAgICAgICAgICAgICB9IGlmIChsZWZ0ID4gKHdpbldpZHRoIC0gd2lkdGggLSAzMikpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9ICh3aW5XaWR0aCAtIHdpZHRoIC0gMjYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b3AgPSB0b3AgKyAoZXYuY2xpZW50WSAtIGRyYWdPWSk7XG4gICAgICAgICAgICAgICAgdG9wID0gTWF0aC5tYXgoMTAsIHRvcCk7XG4gICAgICAgICAgICAgICAgcG9wdXAuc3R5bGUudG9wID0gJycgKyB0b3AgKyAncHgnO1xuICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLmxlZnQgPSAnJyArIE1hdGgubWluKGxlZnQsICh3aW5XaWR0aCAtIHdpZHRoIC0gMTApKSArICdweCc7XG4gICAgICAgICAgICAgICAgZHJhZ09YID0gZXYuY2xpZW50WDsgZHJhZ09ZID0gZXYuY2xpZW50WTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdmVIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB1cEhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRiYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBkcmFnT1ggPSBldi5jbGllbnRYOyBkcmFnT1kgPSBldi5jbGllbnRZO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlSGFuZGxlciwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdXBIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwb3B1cC5hcHBlbmRDaGlsZCh0YmFyKTtcbiAgICB9XG5cbiAgICBwb3B1cC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnZGl2JywgZWxlLCB7Y2xhc3NOYW1lOiAncG9wb3Zlci1jb250ZW50J30sIHtcbiAgICAgICAgcGFkZGluZzogJzBweCdcbiAgICB9KSk7XG4gICAgdGhpcy5oUG9wdXBIb2xkZXIuYXBwZW5kQ2hpbGQocG9wdXApO1xuXG4gICAgdGhpcy5wb3B1cHMucHVzaCh7XG4gICAgICAgIGNvbXBvbmVudDogcG9wdXAsXG4gICAgICAgIG9uQ2xvc2U6IG9wdHMub25DbG9zZVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlVHJlZVRhYmxlU2VjdGlvbih0aXRsZSwgY29udGVudCwgdmlzaWJsZSkge1xuXG4gICAgdmFyIHR0QnV0dG9uID0gbWFrZUVsZW1lbnQoJ2knKTtcbiAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICAgICAgICB0dEJ1dHRvbi5jbGFzc05hbWUgPSAnZmEgZmEtY2FyZXQtZG93bic7XG4gICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAndGFibGUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHRCdXR0b24uY2xhc3NOYW1lID0gJ2ZhIGZhLWNhcmV0LXJpZ2h0JztcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoKTtcblxuICAgIHZhciBzaG93SGlkZSA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB2aXNpYmxlID0gIXZpc2libGU7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgIH07XG5cbiAgICB0dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dIaWRlLCBmYWxzZSk7XG5cbiAgICB2YXIgaGVhZGluZyA9IG1ha2VFbGVtZW50KCdoNicsIFt0dEJ1dHRvbiwgJyAnLCB0aXRsZV0sIHt9LCB7ZGlzcGxheTogJ2Jsb2NrJywgYmFja2dyb3VuZDogJ2dyYXknLCBjb2xvcjogJ3doaXRlJywgd2lkdGg6ICcxMDAlJywgcGFkZGluZzogJzVweCAycHgnLCBtYXJnaW46ICcwcHgnfSk7XG4gICAgaGVhZGluZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dIaWRlLCBmYWxzZSk7XG5cbiAgICByZXR1cm4gbWFrZUVsZW1lbnQoJ2RpdicsIFtoZWFkaW5nLCBjb250ZW50XSwge30pO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIG1ha2VUcmVlVGFibGVTZWN0aW9uOiBtYWtlVHJlZVRhYmxlU2VjdGlvblxuICAgIH07XG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0ICogYXMgRGVmYXVsdFJlbmRlcmVyIGZyb20gXCIuL2RlZmF1bHQtcmVuZGVyZXJcIjtcblxuZXhwb3J0IHsgcmVuZGVyVGllciwgZHJhd1RpZXIgfTtcblxuZnVuY3Rpb24gcmVuZGVyVGllcihzdGF0dXMsIHRpZXIpIHtcbiAgICBkcmF3VGllcih0aWVyKTtcbiAgICB0aWVyLnVwZGF0ZVN0YXR1cyhzdGF0dXMpO1xufVxuXG5mdW5jdGlvbiBkcmF3VGllcih0aWVyKSB7XG4gICAgbGV0IGNhbnZhcyA9IHRpZXIudmlld3BvcnQuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGxldCByZXRpbmEgPSB0aWVyLmJyb3dzZXIucmV0aW5hICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMTtcbiAgICBpZiAocmV0aW5hKSB7XG4gICAgICAgIGNhbnZhcy5zY2FsZSgyLCAyKTtcbiAgICB9XG5cbiAgICBsZXQgZmVhdHVyZXMgPSB0aWVyLmN1cnJlbnRGZWF0dXJlcztcbiAgICBsZXQgc2VxdWVuY2UgPSB0aWVyLmN1cnJlbnRTZXF1ZW5jZTtcbiAgICBpZiAodGllci5zZXF1ZW5jZVNvdXJjZSkge1xuICAgICAgICBEZWZhdWx0UmVuZGVyZXIuZHJhd1NlcVRpZXIodGllciwgc2VxdWVuY2UpO1xuICAgIH0gZWxzZSBpZiAoZmVhdHVyZXMpIHtcbiAgICAgICAgRGVmYXVsdFJlbmRlcmVyLnByZXBhcmVTdWJ0aWVycyh0aWVyLCBjYW52YXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gc2VxdWVuY2Ugb3IgZmVhdHVyZXMgaW4gdGllciFcIik7XG4gICAgfVxuXG4gICAgaWYgKHRpZXIuc3VidGllcnMpIHtcbiAgICAgICAgRGVmYXVsdFJlbmRlcmVyLnByZXBhcmVWaWV3cG9ydCh0aWVyLCBjYW52YXMsIHJldGluYSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGllci5kcmF3T3ZlcmxheSgpO1xuICAgIHRpZXIucGFpbnRRdWFudCgpO1xuXG4gICAgaWYgKHR5cGVvZih0aWVyLmRhc1NvdXJjZS5kcmF3Q2FsbGJhY2spID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGllci5kYXNTb3VyY2UuZHJhd0NhbGxiYWNrKGNhbnZhcywgdGllcik7XG4gICAgfVxuXG4gICAgdGllci5vcmlnaW5IYXh4ID0gMDtcbiAgICB0aWVyLmJyb3dzZXIuYXJyYW5nZVRpZXJzKCk7XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDE0XG4vL1xuLy8gZW5jb2RlLmpzOiBpbnRlcmZhY2UgZm9yIEVOQ09ERSBEQ0Mgc2VydmljZXNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBQcm9taXNlID0gcmVxdWlyZSgnZXM2LXByb21pc2UnKS5Qcm9taXNlO1xufVxuXG5mdW5jdGlvbiBsb29rdXBFbmNvZGVVUkkodXJpLCBqc29uKSB7XG4gICAgaWYgKHVyaS5pbmRleE9mKCc/JykgPCAwKVxuICAgICAgICB1cmkgPSB1cmkgKyAnP3NvZnQ9dHJ1ZSc7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYWNjZXB0LCByZWplY3QpIHtcbiAgICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID49IDMwMCkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoJ0Vycm9yIGNvZGUgJyArIHJlcS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNwID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBhY2NlcHQoanNvbiA/IHJlc3AgOiByZXNwLmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHJlcS5vcGVuKCdHRVQnLCB1cmksIHRydWUpO1xuICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgcmVxLnJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgcmVxLnNlbmQoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gRW5jb2RlVVJMSG9sZGVyKHVybCkge1xuICAgIHRoaXMucmF3dXJsID0gdXJsO1xufVxuXG5FbmNvZGVVUkxIb2xkZXIucHJvdG90eXBlLmdldFVSTFByb21pc2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy51cmxQcm9taXNlICYmIHRoaXMudXJsUHJvbWlzZVZhbGlkaXR5ID4gRGF0ZS5ub3coKSkge1xuICAgICAgICByZXR1cm4gdGhpcy51cmxQcm9taXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudXJsUHJvbWlzZSA9IGxvb2t1cEVuY29kZVVSSSh0aGlzLnJhd3VybCwgdHJ1ZSkudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcC5sb2NhdGlvbjtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXJsUHJvbWlzZVZhbGlkaXR5ID0gRGF0ZS5ub3coKSArICgxMiAqIDM2MDAgKiAxMDAwKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXJsUHJvbWlzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEVuY29kZUZldGNoYWJsZSh1cmwsIHN0YXJ0LCBlbmQsIG9wdHMpIHtcbiAgICBpZiAoIW9wdHMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIG9wdHMgPSBzdGFydDtcbiAgICAgICAgICAgIHN0YXJ0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy51cmwgPSAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycgPyBuZXcgRW5jb2RlVVJMSG9sZGVyKHVybCkgOiB1cmwpO1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydCB8fCAwO1xuICAgIGlmIChlbmQpIHtcbiAgICAgICAgdGhpcy5lbmQgPSBlbmQ7XG4gICAgfVxuICAgIHRoaXMub3B0cyA9IG9wdHM7XG59XG5cblxuXG5FbmNvZGVGZXRjaGFibGUucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24ocywgbCkge1xuICAgIGlmIChzIDwgMCkge1xuICAgICAgICB0aHJvdyAnQmFkIHNsaWNlICcgKyBzO1xuICAgIH1cblxuICAgIHZhciBucyA9IHRoaXMuc3RhcnQsIG5lID0gdGhpcy5lbmQ7XG4gICAgaWYgKG5zICYmIHMpIHtcbiAgICAgICAgbnMgPSBucyArIHM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbnMgPSBzIHx8IG5zO1xuICAgIH1cbiAgICBpZiAobCAmJiBucykge1xuICAgICAgICBuZSA9IG5zICsgbCAtIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmUgPSBuZSB8fCBsIC0gMTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFbmNvZGVGZXRjaGFibGUodGhpcy51cmwsIG5zLCBuZSwgdGhpcy5vcHRzKTtcbn1cblxuRW5jb2RlRmV0Y2hhYmxlLnByb3RvdHlwZS5mZXRjaEFzVGV4dCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB2YXIgbGVuZ3RoO1xuICAgIHNlbGYudXJsLmdldFVSTFByb21pc2UoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcblxuICAgICAgICBpZiAoc2VsZi5lbmQpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmVuZCAtIHNlbGYuc3RhcnQgPiAxMDAwMDAwMDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnTW9uc3RlciBmZXRjaCEnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ1JhbmdlJywgJ2J5dGVzPScgKyBzZWxmLnN0YXJ0ICsgJy0nICsgc2VsZi5lbmQpO1xuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5lbmQgLSBzZWxmLnN0YXJ0ICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gMjAwIHx8IHJlcS5zdGF0dXMgPT0gMjA2KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhyZXEucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoc2VsZi5vcHRzLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICByZXEud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXEuc2VuZCgpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgfSk7XG59XG5cbkVuY29kZUZldGNoYWJsZS5wcm90b3R5cGUuc2FsdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG59XG5cbkVuY29kZUZldGNoYWJsZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjYWxsYmFjaywgYXR0ZW1wdCwgdHJ1bmNhdGVkTGVuZ3RoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgYXR0ZW1wdCA9IGF0dGVtcHQgfHwgMTtcbiAgICBpZiAoYXR0ZW1wdCA+IDMpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgIH1cblxuICAgIHNlbGYudXJsLmdldFVSTFByb21pc2UoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB2YXIgbGVuZ3RoO1xuICAgICAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgcmVxLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQvcGxhaW47IGNoYXJzZXQ9eC11c2VyLWRlZmluZWQnKTtcbiAgICAgICAgaWYgKHNlbGYuZW5kKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5lbmQgLSBzZWxmLnN0YXJ0ID4gMTAwMDAwMDAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ01vbnN0ZXIgZmV0Y2ghJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdSYW5nZScsICdieXRlcz0nICsgc2VsZi5zdGFydCArICctJyArIHNlbGYuZW5kKTtcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYuZW5kIC0gc2VsZi5zdGFydCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmVxLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gMjAwIHx8IHJlcS5zdGF0dXMgPT0gMjA2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEucmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibCA9IHJlcS5yZXNwb25zZS5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aCAmJiBsZW5ndGggIT0gYmwgJiYgKCF0cnVuY2F0ZWRMZW5ndGggfHwgYmwgIT0gdHJ1bmNhdGVkTGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmZldGNoKGNhbGxiYWNrLCBhdHRlbXB0ICsgMSwgYmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVxLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXEubW96UmVzcG9uc2VBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlcS5tb3pSZXNwb25zZUFycmF5QnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gcmVxLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggJiYgbGVuZ3RoICE9IHIubGVuZ3RoICYmICghdHJ1bmNhdGVkTGVuZ3RoIHx8IHIubGVuZ3RoICE9IHRydW5jYXRlZExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5mZXRjaChjYWxsYmFjaywgYXR0ZW1wdCArIDEsIHIubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGJzdHJpbmdUb0J1ZmZlcihyZXEucmVzcG9uc2VUZXh0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5mZXRjaChjYWxsYmFjaywgYXR0ZW1wdCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHNlbGYub3B0cy5jcmVkZW50aWFscykge1xuICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVxLnNlbmQoKTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYnN0cmluZ1RvQnVmZmVyKHJlc3VsdCkge1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHJlc3VsdC5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgYmFbaV0gPSByZXN1bHQuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJhLmJ1ZmZlcjtcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBsb29rdXBFbmNvZGVVUkk6IGxvb2t1cEVuY29kZVVSSSxcbiAgICAgICAgRW5jb2RlRmV0Y2hhYmxlOiBFbmNvZGVGZXRjaGFibGVcbiAgICB9O1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xuLy9cbi8vIGVuc2VtYmxqc29uLmpzIC0tIHF1ZXJ5IHRoZSBFbnNlbWJsIFJFU1QgQVBJLlxuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHNhID0gcmVxdWlyZSgnLi9zb3VyY2VhZGFwdGVycycpO1xuICAgIHZhciBkYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSA9IHNhLnJlZ2lzdGVyU291cmNlQWRhcHRlckZhY3Rvcnk7XG4gICAgdmFyIEZlYXR1cmVTb3VyY2VCYXNlID0gc2EuRmVhdHVyZVNvdXJjZUJhc2U7XG5cbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgREFTU3R5bGVzaGVldCA9IGRhcy5EQVNTdHlsZXNoZWV0O1xuICAgIHZhciBEQVNTdHlsZSA9IGRhcy5EQVNTdHlsZTtcbiAgICB2YXIgREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xuICAgIHZhciBEQVNHcm91cCA9IGRhcy5EQVNHcm91cDtcbn1cblxuZnVuY3Rpb24gRW5zZW1ibEZlYXR1cmVTb3VyY2Uoc291cmNlKSB7XG4gICAgRmVhdHVyZVNvdXJjZUJhc2UuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLmJhc2UgPSBzb3VyY2UudXJpIHx8ICcvL3Jlc3QuZW5zZW1ibC5vcmcnO1xuICAgIGlmICh0aGlzLmJhc2UuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuICAgICAgICB2YXIgcHJvdG8gPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XG4gICAgICAgIGlmIChwcm90byA9PSAnaHR0cDonIHx8IHByb3RvID09ICdodHRwczonKSB7XG4gICAgICAgICAgICAvLyBQcm90b2NvbC1yZWxhdGl2ZSBVUkxzIG9rYXkuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJhc2UgPSAnaHR0cDonICsgdGhpcy5iYXNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuc3BlY2llcyA9IHNvdXJjZS5zcGVjaWVzIHx8ICdodW1hbic7XG5cbiAgICBpZiAodHlwZW9mIHNvdXJjZS50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLnR5cGUgPSBbc291cmNlLnR5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHNvdXJjZS50eXBlIHx8IFsncmVndWxhdG9yeSddO1xuICAgIH1cbn1cblxuRW5zZW1ibEZlYXR1cmVTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShGZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUpO1xuRW5zZW1ibEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRW5zZW1ibEZlYXR1cmVTb3VyY2U7XG5cbkVuc2VtYmxGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XG5cbiAgICB2YXIgdHNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgIHRzU3R5bGUuZ2x5cGggPSAnX19OT05FJztcbiAgICBpZiAodGhpcy50eXBlLmluZGV4T2YoJ2V4b24nKSA+PSAwKVxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zY3JpcHQnfSwgbnVsbCwgdHNTdHlsZSk7XG4gICAgaWYgKHRoaXMudHlwZS5pbmRleE9mKCdleG9uJykgPj0gMCB8fCB0aGlzLnR5cGUuaW5kZXhPZigndHJhbnNjcmlwdCcpID49IDApXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZ2VuZSd9LCBudWxsLCB0c1N0eWxlKTtcblxuICAgIHZhciBjZHNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgIGNkc1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgY2RzU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgY2RzU3R5bGUuQkdDT0xPUiA9ICdyZWQnXG4gICAgY2RzU3R5bGUuSEVJR0hUID0gODtcbiAgICBjZHNTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICBjZHNTdHlsZS5MQUJFTCA9IHRydWU7XG4gICAgY2RzU3R5bGUuWklOREVYID0gMTA7XG4gICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdjZHMnfSwgbnVsbCwgY2RzU3R5bGUpO1xuXG4gICAge1xuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnU1FVQVJFJztcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XG4gICAgICAgIC8vIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAnYmx1ZSc7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndmFyaWF0aW9uJywgbWV0aG9kOiAnLitfVVRSX3ZhcmlhbnQnfSwgbnVsbCwgdmFyU3R5bGUpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICB2YXJTdHlsZS5nbHlwaCA9ICdUUklBTkdMRSc7XG4gICAgICAgIHZhclN0eWxlLkRJUkVDVElPTiA9ICdTJztcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XG4gICAgICAgIC8vIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAnYmx1ZSc7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndmFyaWF0aW9uJywgbWV0aG9kOiAnbWlzc2Vuc2VfdmFyaWFudCd9LCBudWxsLCB2YXJTdHlsZSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1RSSUFOR0xFJztcbiAgICAgICAgdmFyU3R5bGUuRElSRUNUSU9OID0gJ04nO1xuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcbiAgICAgICAgLy8gdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdibHVlJztcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd2YXJpYXRpb24nLCBtZXRob2Q6ICdzcGxpY2VfLitfdmFyaWFudCd9LCBudWxsLCB2YXJTdHlsZSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1NUQVInO1xuICAgICAgICB2YXJTdHlsZS5QT0lOVFMgPSA2O1xuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcbiAgICAgICAgLy8gdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdibHVlJztcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd2YXJpYXRpb24nLCBtZXRob2Q6ICdyZWd1bGF0b3J5X3JlZ2lvbl92YXJpYW50J30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG4gICAge1xuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnUExJTVNPTEwnO1xuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcbiAgICAgICAgLy8gdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZ2IoNTAsODAsMjU1KSc7XG4gICAgICAgIHZhclN0eWxlLlNUUk9LRUNPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd2YXJpYXRpb24nfSwgbnVsbCwgdmFyU3R5bGUpO1xuICAgIH1cbiAgICAgICAge1xuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnU1FVQVJFJztcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XG4gICAgICAgIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAncmVkJztcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdpbmRlbCcsIG1ldGhvZDogJy4rX1VUUl92YXJpYW50J30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG4gICAge1xuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnVFJJQU5HTEUnO1xuICAgICAgICB2YXJTdHlsZS5ESVJFQ1RJT04gPSAnUyc7XG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xuICAgICAgICB2YXJTdHlsZS5CR0NPTE9SID0gJyM4ODg4ODgnO1xuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ3JlZCc7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnaW5kZWwnLCBtZXRob2Q6ICdtaXNzZW5zZV92YXJpYW50J30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG4gICAge1xuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnVFJJQU5HTEUnO1xuICAgICAgICB2YXJTdHlsZS5ESVJFQ1RJT04gPSAnTic7XG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xuICAgICAgICB2YXJTdHlsZS5CR0NPTE9SID0gJyM4ODg4ODgnO1xuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ3JlZCc7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnaW5kZWwnLCBtZXRob2Q6ICdzcGxpY2VfLitfdmFyaWFudCd9LCBudWxsLCB2YXJTdHlsZSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1NUQVInO1xuICAgICAgICB2YXJTdHlsZS5QT0lOVFMgPSA2O1xuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZWQnO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2luZGVsJywgbWV0aG9kOiAncmVndWxhdG9yeV9yZWdpb25fdmFyaWFudCd9LCBudWxsLCB2YXJTdHlsZSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1BMSU1TT0xMJztcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XG4gICAgICAgIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAncmVkJztcbiAgICAgICAgdmFyU3R5bGUuU1RST0tFQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2luZGVsJ30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG5cbiAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICB3aWdTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgIHdpZ1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAnb3JhbmdlJ1xuICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDg7XG4gICAgd2lnU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgd2lnU3R5bGUuTEFCRUwgPSB0cnVlO1xuICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xuICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVmYXVsdCd9LCBudWxsLCB3aWdTdHlsZSk7XG4gICAgcmV0dXJuIGNhbGxiYWNrKHN0eWxlc2hlZXQpO1xufVxuXG5cbkVuc2VtYmxGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gW107XG59XG5cbkVuc2VtYmxGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHZhciB1cmwgPSB0aGlzLmJhc2UgKyAnL292ZXJsYXAvcmVnaW9uLycgKyB0aGlzLnNwZWNpZXMgKyAnLycgKyBjaHIgKyAnOicgKyBtaW4gKyAnLScgKyBtYXg7XG5cbiAgICB2YXIgZmlsdGVycyA9IFtdO1xuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnR5cGUubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgIGZpbHRlcnMucHVzaCgnZmVhdHVyZT0nICsgdGhpcy50eXBlW3RpXSk7XG4gICAgfVxuICAgIGZpbHRlcnMucHVzaCgnY29udGVudC10eXBlPWFwcGxpY2F0aW9uL2pzb24nKTtcbiAgICB1cmwgPSB1cmwgKyAnPycgKyBmaWx0ZXJzLmpvaW4oJzsnKTtcblxuICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgXHRpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcblxuICAgIFx0ICAgIGlmIChyZXEuc3RhdHVzID49IDMwMCkge1xuICAgICAgICAgICAgICAgIHZhciBlcnIgPSAnRXJyb3IgY29kZSAnICsgcmVxLnN0YXR1cztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIganIgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqci5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0ganIuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge307XG5cbiAgICBcdFx0ICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgXHQgICAgfSBlbHNlIHtcbiAgICAgICAgXHRcdHZhciBqZiA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlKTtcbiAgICAgICAgXHRcdHZhciBmZWF0dXJlcyA9IFtdO1xuICAgICAgICBcdFx0Zm9yICh2YXIgZmkgPSAwOyBmaSA8IGpmLmxlbmd0aDsgKytmaSkge1xuICAgICAgICBcdFx0ICAgIHZhciBqID0gamZbZmldO1xuXG4gICAgICAgIFx0XHQgICAgdmFyIG5vdGVzID0gW107XG4gICAgICAgIFx0XHQgICAgdmFyIGYgPSBuZXcgREFTRmVhdHVyZSgpO1xuICAgICAgICBcdFx0ICAgIGYuc2VnbWVudCA9IGNocjtcbiAgICAgICAgXHRcdCAgICBmLm1pbiA9IGpbJ3N0YXJ0J10gfCAwO1xuICAgICAgICBcdFx0ICAgIGYubWF4ID0galsnZW5kJ10gfCAwO1xuICAgICAgICBcdFx0ICAgIGYudHlwZSA9IGouZmVhdHVyZV90eXBlIHx8ICd1bmtub3duJztcbiAgICAgICAgXHRcdCAgICBmLmlkID0gai5JRDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoai5QYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncnAgPSBuZXcgREFTR3JvdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdycC5pZCA9IGouUGFyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgZi5ncm91cHMgPSBbZ3JwXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChqLnN0cmFuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGouc3RyYW5kIDwgMCkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5vcmllbnRhdGlvbiA9ICctJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGouc3RyYW5kID4gMCkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5vcmllbnRhdGlvbiA9ICcrJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChqLmNvbnNlcXVlbmNlX3R5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBmLm1ldGhvZCA9IGouY29uc2VxdWVuY2VfdHlwZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoai5hbHRfYWxsZWxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZXMucHVzaCgnQWxsZWxlcz0nICsgai5hbHRfYWxsZWxlcy5qb2luKCcvJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGouYWx0X2FsbGVsZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqLmFsdF9hbGxlbGVzWzFdLmxlbmd0aCAhPSBqLmFsdF9hbGxlbGVzWzBdLmxlbmd0aCB8fCBqLmFsdF9hbGxlbGVzWzFdID09ICctJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLnR5cGUgPSAnaW5kZWwnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICBcdFx0ICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobm90ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZi5ub3RlcyA9IG5vdGVzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIFx0XHQgICAgZmVhdHVyZXMucHVzaChmKTtcbiAgICAgICAgXHRcdH1cbiAgICAgICAgXHRcdGNhbGxiYWNrKG51bGwsIGZlYXR1cmVzKTtcbiAgICBcdCAgICB9XG4gICAgXHR9XG5cdFxuICAgIH07XG4gICAgXG4gICAgdGhpc0IuYnVzeSsrO1xuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICByZXEucmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgIHJlcS5zZW5kKCk7XG59XG5cbkVuc2VtYmxGZWF0dXJlU291cmNlLnByb3RvdHlwZS5jYXBhYmlsaXRpZXMgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBjYXBzID0ge307XG4gICAgaWYgKHRoaXMudHlwZSAmJiB0aGlzLnR5cGUuaW5kZXhPZigndHJhbnNjcmlwdCcpID49IDApIHtcbiAgICAgICAgY2Fwcy5zZWFyY2ggPSBbJ2dlbmUnXTtcbiAgICB9XG4gICAgcmV0dXJuIGNhcHM7XG59XG5cbkVuc2VtYmxGZWF0dXJlU291cmNlLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbihxdWVyeSwgY2FsbGJhY2spIHtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2V9L2xvb2t1cC9zeW1ib2wvJHt0aGlzLnNwZWNpZXN9LyR7cXVlcnl9P2NvbnRlbnQtdHlwZT1hcHBsaWNhdGlvbi9qc29uYDtcbiAgICBjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNClcbiAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID49IDMwMCB8fCByZXEuc3RhdHVzIDwgMjAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVyciA9ICdFcnJvciBjb2RlICcgKyByZXEuc3RhdHVzO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqciA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpyLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBqci5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7fTtcblxuICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDQwMCkgICAgLy8gRSEgcmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbG9va3VwIGZhaWxzLiAgV2hvIGtub3dzP1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soW10pO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3AgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzcCAmJiByZXNwLnNlcV9yZWdpb25fbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50OiByZXNwLnNlcV9yZWdpb25fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogcmVzcC5zdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogcmVzcC5lbmRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICByZXEucmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgIHJlcS5zZW5kKCk7XG59XG5cbmRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5KCdlbnNlbWJsJywgZnVuY3Rpb24oc291cmNlKSB7XG4gICAgcmV0dXJuIHtmZWF0dXJlczogbmV3IEVuc2VtYmxGZWF0dXJlU291cmNlKHNvdXJjZSl9O1xufSk7XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDE0XG4vL1xuLy8gZXhwb3J0LWNvbmZpZy5qc1xuLy9cblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcblxuICAgIHZhciBzaGExID0gcmVxdWlyZSgnLi9zaGExJyk7XG4gICAgdmFyIGhleF9zaGExID0gc2hhMS5oZXhfc2hhMTtcblxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBjb3B5U3R5bGVzaGVldCA9IGRhcy5jb3B5U3R5bGVzaGVldDtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuZXhwb3J0RnVsbENvbmZpZyA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgIGNocjogdGhpcy5jaHIsXG4gICAgICAgIHZpZXdTdGFydDogdGhpcy52aWV3U3RhcnR8MCxcbiAgICAgICAgdmlld0VuZDogdGhpcy52aWV3RW5kfDAsXG4gICAgICAgIGNvb2tpZUtleTogJ2RhbGxpYW5jZV8nICsgaGV4X3NoYTEoRGF0ZS5ub3coKSksXG5cbiAgICAgICAgY29vcmRTeXN0ZW06IHRoaXMuY29vcmRTeXN0ZW0sXG5cbiAgICAgICAgc291cmNlczogdGhpcy5leHBvcnRTb3VyY2VDb25maWcoKSxcblxuICAgICAgICBjaGFpbnM6IHRoaXMuZXhwb3J0Q2hhaW5zKClcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMucHJlZml4KVxuICAgICAgICBjb25maWcucHJlZml4ID0gdGhpcy5wcmVmaXg7XG5cbiAgICByZXR1cm4gY29uZmlnO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5leHBvcnRDaGFpbnMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2MgPSB7fTtcbiAgICB2YXIgY3MgPSB0aGlzLmNoYWlucyB8fCB7fTtcbiAgICBmb3IgKHZhciBrIGluIGNzKSB7XG4gICAgICAgIGNjW2tdID0gY3Nba10uZXhwb3J0Q29uZmlnKCk7XG4gICAgfVxuICAgIHJldHVybiBjYztcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuZXhwb3J0U291cmNlQ29uZmlnID0gZnVuY3Rpb24ob3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgdmFyIHNvdXJjZUNvbmZpZyA9IFtdO1xuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICB2YXIgdGllciA9IHRoaXMudGllcnNbdGldO1xuICAgICAgICB2YXIgc291cmNlID0gc2hhbGxvd0NvcHkodGllci5kYXNTb3VyY2UpO1xuXG4gICAgICAgIGlmIChzb3VyY2Uubm9QZXJzaXN0KVxuICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgc291cmNlLmNvb3JkcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgc291cmNlLnByb3BzID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoIXNvdXJjZS5kaXNhYmxlZClcbiAgICAgICAgICAgIHNvdXJjZS5kaXNhYmxlZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAodGllci5jb25maWcuc3R5bGVzaGVldCkge1xuICAgICAgICAgICAgc291cmNlLnN0eWxlID0gY29weVN0eWxlc2hlZXQodGllci5jb25maWcuc3R5bGVzaGVldCkuc3R5bGVzO1xuICAgICAgICAgICAgc291cmNlLnN0eWxlc2hlZXRfdXJpID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZS5zdHlsZSkge1xuICAgICAgICAgICAgc291cmNlLnN0eWxlID0gY29weVN0eWxlc2hlZXQoe3N0eWxlczogc291cmNlLnN0eWxlfSkuc3R5bGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZih0aWVyLmNvbmZpZy5uYW1lKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHNvdXJjZS5uYW1lID0gdGllci5jb25maWcubmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aWVyLmNvbmZpZy5oZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc291cmNlLmZvcmNlSGVpZ2h0ID0gdGllci5jb25maWcuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aWVyLmNvbmZpZy5mb3JjZU1pbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzb3VyY2UuZm9yY2VNaW4gPSB0aWVyLmNvbmZpZy5mb3JjZU1pbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGllci5jb25maWcuZm9yY2VNaW5EeW5hbWljKVxuICAgICAgICAgICAgc291cmNlLmZvcmNlTWluRHluYW1pYyA9IHRpZXIuY29uZmlnLmZvcmNlTWluRHluYW1pYztcbiAgICAgICAgaWYgKHRpZXIuY29uZmlnLmZvcmNlTWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNvdXJjZS5mb3JjZU1heCA9IHRpZXIuY29uZmlnLmZvcmNlTWF4O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aWVyLmNvbmZpZy5idW1wZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc291cmNlLmJ1bXBlZCA9IHRpZXIuY29uZmlnLmJ1bXBlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGllci5jb25maWcuZm9yY2VNYXhEeW5hbWljKVxuICAgICAgICAgICAgc291cmNlLmZvcmNlTWF4RHluYW1pYyA9IHRpZXIuY29uZmlnLmZvcmNlTWF4RHluYW1pYztcblxuICAgICAgICBzb3VyY2VDb25maWcucHVzaChzb3VyY2UpO1xuICAgIH1cblxuICAgIHJldHVybiBzb3VyY2VDb25maWc7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmV4cG9ydFBhZ2VUZW1wbGF0ZSA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICB2YXIgdGVtcGxhdGUgPSAnPGh0bWw+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgJyAgPGhlYWQ+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgJyAgICA8c2NyaXB0IGxhbmd1YWdlPVwiamF2YXNjcmlwdFwiIHNyYz1cIicgKyB0aGlzLnJlc29sdmVVUkwoJyQkZGFsbGlhbmNlLWNvbXBpbGVkLmpzJykgKyAnXCI+PC9zY3JpcHQ+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgJyAgICA8c2NyaXB0IGxhbmd1YWdlPVwiamF2YXNjcmlwdFwiPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICcgICAgICB2YXIgZGFsbGlhbmNlX2Jyb3dzZXIgPSBuZXcgQnJvd3NlcignICsgSlNPTi5zdHJpbmdpZnkodGhpcy5leHBvcnRGdWxsQ29uZmlnKG9wdHMpLCBudWxsLCAyKSArICcpO1xcbicgK1xuICAgICAgICAgICAgICAgICAgICcgICAgPC9zY3JpcHQ+XFxuJyArICBcbiAgICAgICAgICAgICAgICAgICAnICA8L2hlYWQ+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgJyAgPGJvZHk+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgJyAgICA8ZGl2IGlkPVwic3ZnSG9sZGVyXCI+RGFsbGlhbmNlIGdvZXMgaGVyZTwvZGl2PlxcbicgK1xuICAgICAgICAgICAgICAgICAgICcgIDwvYm9keT5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAnPGh0bWw+XFxuJztcblxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn0iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDE0XG4vL1xuLy8gZXhwb3J0LWltYWdlLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcblxuICAgIHZhciBnID0gcmVxdWlyZSgnLi9nbHlwaHMnKTtcbiAgICB2YXIgT3ZlcmxheUxhYmVsQ2FudmFzID0gZy5PdmVybGF5TGFiZWxDYW52YXM7XG5cbiAgICB2YXIgbmYgPSByZXF1aXJlKCcuL251bWZvcm1hdHMnKTtcbiAgICB2YXIgZm9ybWF0UXVhbnRMYWJlbCA9IG5mLmZvcm1hdFF1YW50TGFiZWw7XG4gICAgdmFyIGZvcm1hdExvbmdJbnQgPSBuZi5mb3JtYXRMb25nSW50O1xuXG4gICAgdmFyIG1ha2VFbGVtZW50ID0gcmVxdWlyZSgnLi91dGlscycpLm1ha2VFbGVtZW50O1xuXG4gICAgdmFyIFZFUlNJT04gPSByZXF1aXJlKCcuL3ZlcnNpb24nKTtcblxuICAgIHZhciBkcmF3U2VxVGllckdDID0gcmVxdWlyZSgnLi9zZXF1ZW5jZS1kcmF3JykuZHJhd1NlcVRpZXJHQztcbn1cblxuZnVuY3Rpb24gZmlsbFRleHRSaWdodEp1c3RpZmllZChnLCB0ZXh0LCB4LCB5KSB7XG4gICAgZy5maWxsVGV4dCh0ZXh0LCB4IC0gZy5tZWFzdXJlVGV4dCh0ZXh0KS53aWR0aCwgeSk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmV4cG9ydEltYWdlID0gZnVuY3Rpb24ob3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgdmFyIGZwdyA9IG9wdHMud2lkdGggfHwgdGhpcy5mZWF0dXJlUGFuZWxXaWR0aDtcbiAgICB2YXIgcGFkZGluZyA9IDM7XG4gICAgdmFyIHlwb3MgPSAwO1xuICAgIGlmIChvcHRzLmJhbm5lciB8fCBvcHRzLnJlZ2lvbikge1xuICAgICAgICB5cG9zID0gNDA7XG4gICAgfVxuXG4gICAgdmFyIGJhY2t1cEZQVyA9IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGg7XG4gICAgdmFyIGJhY2t1cFNjYWxlID0gdGhpcy5zY2FsZTtcbiAgICB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoID0gZnB3O1xuICAgIHRoaXMuc2NhbGUgPSB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoIC8gKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KTtcbiAgICBcbiAgICB2YXIgdG90SGVpZ2h0ID0geXBvcztcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgaWYgKHRpID4gMClcbiAgICAgICAgICAgIHRvdEhlaWdodCArPSBwYWRkaW5nO1xuICAgICAgICB2YXIgdGllciA9IHRoaXMudGllcnNbdGldO1xuXG4gICAgICAgIHRpZXIuYmFja3VwU3VidGllcnMgPSB0aWVyLnN1YnRpZXJzO1xuICAgICAgICB0aWVyLmJhY2t1cE9yaWdpbkhheHggPSB0aWVyLm9yaWdpbkhheHg7XG4gICAgICAgIHRpZXIuYmFja3VwTGF5b3V0SGVpZ2h0ID0gdGllci5sYXlvdXRIZWlnaHQ7XG5cbiAgICAgICAgaWYgKHRpZXIuc3VidGllcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5nZXRUaWVyUmVuZGVyZXIodGllcik7XG4gICAgICAgICAgICBpZiAocmVuZGVyZXIgJiYgcmVuZGVyZXIucHJlcGFyZVN1YnRpZXJzKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucHJlcGFyZVN1YnRpZXJzKHRpZXIsIHRpZXIudmlld3BvcnQuZ2V0Q29udGV4dCgnMmQnKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aWVyLnN1YnRpZXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxoID0gdGllci5wYWRkaW5nO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgdGllci5zdWJ0aWVycy5sZW5ndGg7ICsrcykge1xuICAgICAgICAgICAgICAgICAgICBsaCA9IGxoICsgdGllci5zdWJ0aWVyc1tzXS5oZWlnaHQgKyB0aWVyLnBhZGRpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxoICs9IDZcbiAgICAgICAgICAgICAgICB0aWVyLmxheW91dEhlaWdodCA9IE1hdGgubWF4KGxoLCB0aGlzLm1pblRpZXJIZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRpZXIubGF5b3V0SGVpZ2h0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgdG90SGVpZ2h0ICs9IHRpZXIubGF5b3V0SGVpZ2h0O1xuICAgIH1cbiAgICB2YXIgbXVsdCA9IG9wdHMucmVzb2x1dGlvbk11bHRpcGxpZXIgfHwgMS4wO1xuICAgIHZhciBmb250ID0gJzEwcHggc2Fucy1zZXJpZic7XG4gICAgdmFyIG1hcmdpbiA9IDIwMDtcblxuICAgIHtcbiAgICAgICAgdmFyIHRtcENhbnZhcyA9IG1ha2VFbGVtZW50KCdjYW52YXMnLCBudWxsLCAxLCAxKTtcbiAgICAgICAgdmFyIHRtcEcgPSB0bXBDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgdG1wRy5mb250ID0gZm9udDtcbiAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgICAgICB2YXIgdGllciA9IHRoaXMudGllcnNbdGldO1xuICAgICAgICAgICAgdmFyIGxhYmVsTmFtZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGllci5jb25maWcubmFtZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgbGFiZWxOYW1lID0gdGllci5jb25maWcubmFtZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBsYWJlbE5hbWUgPSB0aWVyLmRhc1NvdXJjZS5uYW1lO1xuICAgICAgICAgICAgdmFyIGxhYmVsV2lkdGggPSB0bXBHLm1lYXN1cmVUZXh0KGxhYmVsTmFtZSkud2lkdGg7XG4gICAgICAgICAgICBsYWJlbFdpZHRoICs9IDMyO1xuICAgICAgICAgICAgaWYgKGxhYmVsV2lkdGggPiBtYXJnaW4pXG4gICAgICAgICAgICAgICAgbWFyZ2luID0gbGFiZWxXaWR0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcblxuICAgIHZhciBjdyA9ICgoZnB3ICsgbWFyZ2luKSAqIG11bHQpfDA7XG4gICAgdmFyIGNoID0gKHRvdEhlaWdodCAqIG11bHQpfDA7XG4gICAgdmFyIGMgPSBtYWtlRWxlbWVudCgnY2FudmFzJywgbnVsbCwge3dpZHRoOiBjdywgaGVpZ2h0OiBjaH0pO1xuICAgIHZhciBnID0gYy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGcuZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgICBnLmZpbGxSZWN0KDAsIDAsIGN3LCBjaCk7XG5cbiAgICBnLnNjYWxlKG11bHQsIG11bHQpO1xuXG4gICAgaWYgKG9wdHMucmVnaW9uKSB7XG4gICAgICAgIGcuc2F2ZSgpO1xuICAgICAgICBnLmZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIGcuZm9udCA9ICcxMnB0IHNhbnMtc2VyaWYnO1xuICAgICAgICBnLmZpbGxUZXh0KFxuICAgICAgICAgICAgdGhpcy5jaHIgKyAnOicgKyBmb3JtYXRMb25nSW50KHRoaXMudmlld1N0YXJ0KSArICcuLicgKyBmb3JtYXRMb25nSW50KHRoaXMudmlld0VuZCksXG4gICAgICAgICAgICBtYXJnaW4gKyAxMDAsXG4gICAgICAgICAgICAyOFxuICAgICAgICApO1xuICAgICAgICBnLnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICBpZiAob3B0cy5iYW5uZXIpIHtcbiAgICAgICAgZy5zYXZlKCk7XG4gICAgICAgIGcuZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgZy5mb250ID0gJzEycHQgc2Fucy1zZXJpZic7XG4gICAgICAgIGZpbGxUZXh0UmlnaHRKdXN0aWZpZWQoZywgJ0dyYXBoaWNzIGZyb20gQmlvZGFsbGlhbmNlICcgKyBWRVJTSU9OLCBtYXJnaW4gKyBmcHcgLSAxMDAsIDI4KTtcbiAgICAgICAgZy5yZXN0b3JlKCk7XG4gICAgfVxuXG4gICAgZy5mb250ID0gZm9udDtcbiAgICBcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIHRpZXIgPSB0aGlzLnRpZXJzW3RpXTtcbiAgICAgICAgdmFyIG9mZnNldCA9ICgodGllci5nbHlwaENhY2hlT3JpZ2luIC0gdGhpcy52aWV3U3RhcnQpKnRoaXMuc2NhbGUpO1xuXG4gICAgICAgIHZhciBvYyA9IG5ldyBPdmVybGF5TGFiZWxDYW52YXMoKTtcbiAgICAgICAgZy5zYXZlKCk7ICAgICAgIC8vIDFcbiAgICAgICAgZy50cmFuc2xhdGUoMCwgeXBvcyk7XG5cbiAgICAgICAgZy5zYXZlKCk7ICAgICAgIC8vIDJcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcbiAgICAgICAgZy5tb3ZlVG8obWFyZ2luLCAwKTtcbiAgICAgICAgZy5saW5lVG8obWFyZ2luICsgZnB3LCAwKTtcbiAgICAgICAgZy5saW5lVG8obWFyZ2luICsgZnB3LCB0aWVyLmxheW91dEhlaWdodCk7XG4gICAgICAgIGcubGluZVRvKG1hcmdpbiwgdGllci5sYXlvdXRIZWlnaHQpO1xuICAgICAgICBnLmNsb3NlUGF0aCgpO1xuICAgICAgICBnLmNsaXAoKTtcbiAgICAgICAgZy50cmFuc2xhdGUobWFyZ2luLCAwKTtcblxuICAgICAgICBnLnNhdmUoKTsgICAgICAvLyAzXG4gICAgICAgIGcudHJhbnNsYXRlKG9mZnNldCwgMCk7XG4gICAgICAgIGlmICh0aWVyLnN1YnRpZXJzKSB7XG4gICAgICAgICAgICB0aWVyLnBhaW50VG9Db250ZXh0KGcsIG9jLCBvZmZzZXQgKyAxMDAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZHJhd1NlcVRpZXJHQyh0aWVyLCB0aWVyLmN1cnJlbnRTZXF1ZW5jZSwgZyk7XG4gICAgICAgIH1cbiAgICAgICAgZy5yZXN0b3JlKCk7ICAgLy8gMlxuICAgICAgICBcbiAgICAgICAgZy5zYXZlKCkgICAgICAgLy8gM1xuICAgICAgICBnLnRyYW5zbGF0ZShvZmZzZXQsIDApO1xuICAgICAgICBvYy5kcmF3KGcsIC1vZmZzZXQsIGZwdyAtIG9mZnNldCk7XG4gICAgICAgIGcucmVzdG9yZSgpOyAgIC8vIDJcbiAgICAgICAgZy5yZXN0b3JlKCk7ICAgLy8gMVxuXG4gICAgICAgIHZhciBoYXNRdWFudCA9IGZhbHNlO1xuICAgICAgICB2YXIgcG9zID0gMDtcbiAgICAgICAgdmFyIHN1YnRpZXJzID0gdGllci5zdWJ0aWVycyB8fCBbXTtcbiAgICAgICAgZm9yICh2YXIgc3RpID0gMDsgc3RpIDwgc3VidGllcnMubGVuZ3RoOyArK3N0aSkge1xuICAgICAgICAgICAgdmFyIHN1YnRpZXIgPSBzdWJ0aWVyc1tzdGldO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzdWJ0aWVyLnF1YW50KSB7XG4gICAgICAgICAgICAgICAgaGFzUXVhbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBxID0gc3VidGllci5xdWFudDtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IHN1YnRpZXIuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgdmFyIG51bVRpY3MgPSAyO1xuICAgICAgICAgICAgICAgIGlmIChoID4gNDApIHtcbiAgICAgICAgICAgICAgICAgICAgbnVtVGljcyA9IDEgKyAoKGgvMjApIHwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0aWNTcGFjaW5nID0gaCAvIChudW1UaWNzIC0gMSk7XG4gICAgICAgICAgICAgICAgdmFyIHRpY0ludGVydmFsID0gKHEubWF4IC0gcS5taW4pIC8gKG51bVRpY3MgLSAxKTtcblxuICAgICAgICAgICAgICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgZy5tb3ZlVG8obWFyZ2luICsgNSwgcG9zKTtcbiAgICAgICAgICAgICAgICBnLmxpbmVUbyhtYXJnaW4sIHBvcyk7XG4gICAgICAgICAgICAgICAgZy5saW5lVG8obWFyZ2luLCBwb3MgKyBzdWJ0aWVyLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgZy5saW5lVG8obWFyZ2luICsgNSwgcG9zICsgc3VidGllci5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgbnVtVGljcy0xOyArK3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5ID0gdCp0aWNTcGFjaW5nO1xuICAgICAgICAgICAgICAgICAgICBnLm1vdmVUbyhtYXJnaW4sIHBvcyArIHR5KTtcbiAgICAgICAgICAgICAgICAgICAgZy5saW5lVG8obWFyZ2luKzMsIHBvcyArIHR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZy5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgZy5zdHJva2VXaWR0aCA9IDI7XG4gICAgICAgICAgICAgICAgZy5zdHJva2UoKTtcblxuICAgICAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgICAgICAgICBmaWxsVGV4dFJpZ2h0SnVzdGlmaWVkKGcsIGZvcm1hdFF1YW50TGFiZWwocS5tYXgpLCBtYXJnaW4gLSAzLCBwb3MgKyA3KTtcbiAgICAgICAgICAgICAgICBmaWxsVGV4dFJpZ2h0SnVzdGlmaWVkKGcsIGZvcm1hdFF1YW50TGFiZWwocS5taW4pLCBtYXJnaW4gLSAzLCBwb3MgKyBzdWJ0aWVyLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHkgPSB0KnRpY1NwYWNpbmc7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxUZXh0UmlnaHRKdXN0aWZpZWQoZywgZm9ybWF0UXVhbnRMYWJlbCgoMS4wKnEubWF4KSAtICh0KnRpY0ludGVydmFsKSksIG1hcmdpbiAtIDMsIHBvcyArIHR5ICsgMyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwb3MgKz0gc3VidGllci5oZWlnaHQgKyBwYWRkaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGxhYmVsTmFtZTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aWVyLmNvbmZpZy5uYW1lID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgIGxhYmVsTmFtZSA9IHRpZXIuY29uZmlnLm5hbWU7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxhYmVsTmFtZSA9IHRpZXIuZGFzU291cmNlLm5hbWU7XG4gICAgICAgIHZhciBsYWJlbFdpZHRoID0gZy5tZWFzdXJlVGV4dChsYWJlbE5hbWUpLndpZHRoO1xuICAgICAgICBnLmZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIGcuZmlsbFRleHQobGFiZWxOYW1lLCBtYXJnaW4gLSAoaGFzUXVhbnQgPyAyOCA6IDEyKSAtIGxhYmVsV2lkdGgsICh0aWVyLmxheW91dEhlaWdodCArIDMpIC8gMik7XG5cbiAgICAgICAgZy5yZXN0b3JlKCk7IC8vIDBcblxuICAgICAgICB5cG9zICs9IHRpZXIubGF5b3V0SGVpZ2h0ICsgcGFkZGluZztcblxuICAgICAgICB0aWVyLnN1YnRpZXJzID0gdGllci5iYWNrdXBTdWJ0aWVycztcbiAgICAgICAgdGllci5vcmlnaW5IYXh4ID0gdGllci5iYWNrdXBPcmlnaW5IYXh4O1xuICAgICAgICB0aWVyLmxheW91dEhlaWdodCA9IHRpZXIuYmFja3VwTGF5b3V0SGVpZ2h0O1xuICAgIH1cblxuICAgIGlmIChvcHRzLmhpZ2hsaWdodHMpIHtcbiAgICAgICAgZy5zYXZlKCk7XG5cbiAgICAgICAgZy5iZWdpblBhdGgoKTtcbiAgICAgICAgZy5tb3ZlVG8obWFyZ2luLCAwKTtcbiAgICAgICAgZy5saW5lVG8obWFyZ2luICsgZnB3LCAwKTtcbiAgICAgICAgZy5saW5lVG8obWFyZ2luICsgZnB3LCB5cG9zKTtcbiAgICAgICAgZy5saW5lVG8obWFyZ2luLCB5cG9zKTtcbiAgICAgICAgZy5jbG9zZVBhdGgoKTtcbiAgICAgICAgZy5jbGlwKCk7XG5cbiAgICAgICAgZy50cmFuc2xhdGUobWFyZ2luICsgb2Zmc2V0LCAwKTtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMudmlld1N0YXJ0O1xuICAgICAgICB2YXIgdmlzU3RhcnQgPSB0aGlzLnZpZXdTdGFydDtcbiAgICAgICAgdmFyIHZpc0VuZCA9IHRoaXMudmlld0VuZDtcblxuICAgICAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpcy5oaWdobGlnaHRzLmxlbmd0aDsgKytoaSkge1xuICAgICAgICAgICAgdmFyIGggPSB0aGlzLmhpZ2hsaWdodHNbaGldO1xuICAgICAgICAgICAgaWYgKCgoaC5jaHIgPT09IHRoaXMuY2hyKSB8fCAoaC5jaHIgPT09ICgnY2hyJyArIHRoaXMuY2hyKSkpICYmIGgubWluIDwgdmlzRW5kICYmIGgubWF4ID4gdmlzU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBnLmdsb2JhbEFscGhhID0gdGhpcy5kZWZhdWx0SGlnaGxpZ2h0QWxwaGE7XG4gICAgICAgICAgICAgICAgZy5maWxsU3R5bGUgPSB0aGlzLmRlZmF1bHRIaWdobGlnaHRGaWxsO1xuICAgICAgICAgICAgICAgIGcuZmlsbFJlY3QoKGgubWluIC0gb3JpZ2luKSAqIHRoaXMuc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGgubWF4IC0gaC5taW4pICogdGhpcy5zY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHlwb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICBnLnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICB2YXIgcnVsZXJQb3MgPSAtMTsgXG4gICAgaWYgKG9wdHMucnVsZXIgPT0gJ2NlbnRlcicpIHtcbiAgICAgICAgcnVsZXJQb3MgPSBtYXJnaW4gKyAoKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMSkqdGhpcy5zY2FsZSkgLyAyO1xuICAgIH0gZWxzZSBpZiAob3B0cy5ydWxlciA9PSAnbGVmdCcpIHtcbiAgICAgICAgcnVsZXJQb3MgPSBtYXJnaW47XG4gICAgfSBlbHNlIGlmIChvcHRzLnJ1bGVyID09ICdyaWdodCcpIHtcbiAgICAgICAgcnVsZXJQb3MgPSBtYXJnaW4gKyAoKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMSkqdGhpcy5zY2FsZSk7XG4gICAgfVxuICAgIGlmIChydWxlclBvcyA+PSAwKSB7XG4gICAgICAgIGcuc3Ryb2tlU3R5bGUgPSAnYmx1ZSc7XG4gICAgICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgICAgIGcubW92ZVRvKHJ1bGVyUG9zLCAwKTtcbiAgICAgICAgZy5saW5lVG8ocnVsZXJQb3MsIHlwb3MpO1xuICAgICAgICBnLnN0cm9rZSgpO1xuICAgIH1cblxuICAgIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggPSBiYWNrdXBGUFc7XG4gICAgdGhpcy5zY2FsZSA9IGJhY2t1cFNjYWxlO1xuXG4gICAgaWYgKG9wdHMuYmxvYkNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBjLnRvQmxvYihvcHRzLmJsb2JDYWxsYmFjaywgJ2ltYWdlL3BuZycpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG4gICAgfSBcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcbi8vXG4vLyBleHBvcnQtdWkuanNcbi8vXG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm9wZW5FeHBvcnRQYW5lbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiID0gdGhpcztcbiAgICBpZiAodGhpcy51aU1vZGUgPT09ICdleHBvcnQnKSB7XG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xuICAgICAgICB0aGlzLnNldFVpTW9kZSgnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBleHBvcnRGb3JtID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdleHBvcnQtZm9ybSd9KTtcbiAgICAgICAgdmFyIGV4cG9ydFNlbGVjdCA9IG1ha2VFbGVtZW50KCdzZWxlY3QnKTtcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnU1ZHJywge3ZhbHVlOiAnc3ZnJ30pKTtcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnSW1hZ2UnLCB7dmFsdWU6ICdwbmcnfSkpO1xuICAgICAgICBleHBvcnRTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdEYWxsaWFuY2UgY29uZmlnJywge3ZhbHVlOiAnY29uZmlnJ30pKTtcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnRGFsbGlhbmNlIHNvdXJjZXMnLCB7dmFsdWU6ICdzb3VyY2VzJ30pKTtcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnRGFsbGlhbmNlIHBhZ2UnLCB7dmFsdWU6ICdwYWdlJ30pKTtcbiAgICAgICAgZXhwb3J0U2VsZWN0LnZhbHVlID0gJ3N2Zyc7XG5cbiAgICAgICAgZXhwb3J0U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICByZW1vdmVDaGlsZHJlbihleHBvcnRDb250ZW50KTtcbiAgICAgICAgICAgIHNldHVwRU9UKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgZXhwb3J0Rm9ybS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFsnRXhwb3J0IGFzOiAnLCBleHBvcnRTZWxlY3RdKSk7XG5cbiAgICAgICAgdmFyIGV4cG9ydEhpZ2hsaWdodHNUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94JywgY2hlY2tlZDogdGhpcy5leHBvcnRIaWdobGlnaHRzfSk7XG4gICAgICAgIGV4cG9ydEhpZ2hsaWdodHNUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGIuZXhwb3J0SGlnaGxpZ2h0cyA9IGV4cG9ydEhpZ2hsaWdodHNUb2dnbGUuY2hlY2tlZDtcbiAgICAgICAgICAgIGIuc3RvcmVTdGF0dXMoKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB2YXIgZXhwb3J0UnVsZXJUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94JywgY2hlY2tlZDogdGhpcy5leHBvcnRSdWxlcn0pO1xuICAgICAgICBleHBvcnRSdWxlclRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgYi5leHBvcnRSdWxlciA9IGV4cG9ydFJ1bGVyVG9nZ2xlLmNoZWNrZWQ7XG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgdmFyIGV4cG9ydFJlZ2lvblRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnLCBjaGVja2VkOiB0aGlzLmV4cG9ydFJlZ2lvbn0pO1xuICAgICAgICBleHBvcnRSZWdpb25Ub2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGIuZXhwb3J0UmVnaW9uID0gZXhwb3J0UmVnaW9uVG9nZ2xlLmNoZWNrZWQ7XG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgdmFyIGV4cG9ydEJhbm5lclRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnLCBjaGVja2VkOiB0aGlzLmV4cG9ydEJhbm5lcn0pO1xuICAgICAgICBleHBvcnRCYW5uZXJUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGIuZXhwb3J0QmFubmVyID0gZXhwb3J0QmFubmVyVG9nZ2xlLmNoZWNrZWQ7XG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgdmFyIGV4cG9ydFNjYWxlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0JywgdmFsdWU6ICcxLjAnfSk7XG4gICAgICAgIHZhciBleHBvcnRXaWR0aCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnODAwJ30pO1xuXG4gICAgICAgIHZhciBleHBvcnRCdXR0b24gPSBtYWtlRWxlbWVudCgnYnV0dG9uJywgJ0V4cG9ydCcsIHtjbGFzc05hbWU6ICdidG4gYnRuLXByaW1hcnknfSk7XG5cbiAgICAgICAgdmFyIGV4cG9ydERvbmUgPSBmdW5jdGlvbihibG9iVVJMLCBub3RlLCB0eXBlLCBuYW1lKSB7XG4gICAgICAgICAgICBpZiAoYmxvYlVSTCkge1xuICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZExpbmsgPSBtYWtlRWxlbWVudCgnYScsICdbRG93bmxvYWRdJywge1xuICAgICAgICAgICAgICAgICAgICBocmVmOiBibG9iVVJMLFxuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZDogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdmFyIHByZXZpZXdMaW5rID0gbWFrZUVsZW1lbnQoJ2EnLCAnW1ByZXZpZXcgaW4gYnJvd3Nlcl0nLCB7XG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IGJsb2JVUkwsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogJ19uZXcnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBleHBvcnRDb250ZW50LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgWycnICsgbm90ZSArICcgY3JlYXRlZDogJywgZG93bmxvYWRMaW5rLCBwcmV2aWV3TGlua10pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICByZW1vdmVDaGlsZHJlbihleHBvcnRDb250ZW50KTtcblxuICAgICAgICAgICAgdmFyIGJsb2JVUkw7XG4gICAgICAgICAgICBpZiAoZXhwb3J0U2VsZWN0LnZhbHVlID09PSAnc3ZnJykge1xuICAgICAgICAgICAgICAgIGJsb2JVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGIubWFrZVNWRyh7aGlnaGxpZ2h0czogZXhwb3J0SGlnaGxpZ2h0c1RvZ2dsZS5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVyOiBiLmV4cG9ydEJhbm5lcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogYi5leHBvcnRSZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcjogZXhwb3J0UnVsZXJUb2dnbGUuY2hlY2tlZCA/IGIucnVsZXJMb2NhdGlvbiA6ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBwYXJzZUludChleHBvcnRXaWR0aC52YWx1ZSkgfHwgODAwfSkpO1xuICAgICAgICAgICAgICAgIGV4cG9ydERvbmUoXG4gICAgICAgICAgICAgICAgICAgIGJsb2JVUkwsXG4gICAgICAgICAgICAgICAgICAgICdTVkcnLFxuICAgICAgICAgICAgICAgICAgICAnaW1hZ2Uvc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgJ2RhbGxpYW5jZS12aWV3LnN2ZydcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleHBvcnRTZWxlY3QudmFsdWUgPT09ICdwbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIG11bHQgPSBwYXJzZUZsb2F0KGV4cG9ydFNjYWxlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAobXVsdCA8IDAuMSB8fCBtdWx0ID4gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ2JhZCBzY2FsZSAnICsgbXVsdCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYi5leHBvcnRJbWFnZSh7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodHM6IGV4cG9ydEhpZ2hsaWdodHNUb2dnbGUuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgYmFubmVyOiBiLmV4cG9ydEJhbm5lcixcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBiLmV4cG9ydFJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgcnVsZXI6IGV4cG9ydFJ1bGVyVG9nZ2xlLmNoZWNrZWQgPyBiLnJ1bGVyTG9jYXRpb24gOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb25NdWx0aXBsaWVyOiBtdWx0LFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VJbnQoZXhwb3J0V2lkdGgudmFsdWUpIHx8IDgwMCxcbiAgICAgICAgICAgICAgICAgICAgYmxvYkNhbGxiYWNrOiBmdW5jdGlvbihibG9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvcnREb25lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ltYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGFsbGlhbmNlLXZpZXcucG5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleHBvcnRTZWxlY3QudmFsdWUgPT09ICdjb25maWcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IEpTT04uc3RyaW5naWZ5KGIuZXhwb3J0RnVsbENvbmZpZygpLCBudWxsLCAyKTtcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjb25maWddLCB7dHlwZTogJ3RleHQvcGxhaW4nfSk7XG4gICAgICAgICAgICAgICAgZXhwb3J0RG9uZShcbiAgICAgICAgICAgICAgICAgICAgVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSxcbiAgICAgICAgICAgICAgICAgICAgJ0NvbmZpZ3VyYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAndGV4dC9wbGFpbicsXG4gICAgICAgICAgICAgICAgICAgICdkYWxsaWFuY2UtY29uZmlnLmpzb24nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhwb3J0U2VsZWN0LnZhbHVlID09PSAnc291cmNlcycpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gSlNPTi5zdHJpbmdpZnkoYi5leHBvcnRTb3VyY2VDb25maWcoKSwgbnVsbCwgMik7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY29uZmlnXSwge3R5cGU6ICd0ZXh0L3BsYWluJ30pO1xuICAgICAgICAgICAgICAgIGV4cG9ydERvbmUoXG4gICAgICAgICAgICAgICAgICAgIGJsb2JVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpLFxuICAgICAgICAgICAgICAgICAgICAnU291cmNlIGFycmF5JyxcbiAgICAgICAgICAgICAgICAgICAgJ3RleHQvcGxhaW4nLFxuICAgICAgICAgICAgICAgICAgICAnZGFsbGlhbmNlLXNvdXJjZXMuanNvbidcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleHBvcnRTZWxlY3QudmFsdWUgPT09ICdwYWdlJykge1xuICAgICAgICAgICAgICAgIHZhciBwYWdlID0gYi5leHBvcnRQYWdlVGVtcGxhdGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9ICd0ZXh0L2h0bWwnO1xuICAgICAgICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3BhZ2VdLCB7dHlwZTogdHlwZX0pO1xuICAgICAgICAgICAgICAgIGV4cG9ydERvbmUoXG4gICAgICAgICAgICAgICAgICAgIFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYiksXG4gICAgICAgICAgICAgICAgICAgICdQYWdlIHRlbXBsYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RleHQvaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgICdkYWxsaWFuY2Utdmlldy5odG1sJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICAgICAgXG5cbiAgICAgICAgYi5hZGRWaWV3TGlzdGVuZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZW1vdmVDaGlsZHJlbihleHBvcnRDb250ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGIuYWRkVGllckxpc3RlbmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oZXhwb3J0Q29udGVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBleHBvcnRDb250ZW50ID0gbWFrZUVsZW1lbnQoJ3AnLCAnJyk7XG5cbiAgICAgICAgdmFyIGVvdEhpZ2hsaWdodHMgPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnSW5jbHVkZSBoaWdobGlnaHRzJywge30sIHt3aWR0aDogJzQwMHB4JywgdGV4dEFsaWduOiAncmlnaHQnfSksXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGV4cG9ydEhpZ2hsaWdodHNUb2dnbGUpXSk7XG4gICAgICAgIHZhciBlb3RHdWlkZWxpbmUgPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnSW5jbHVkZSB2ZXJ0aWNhbCBndWlkZWxpbmUnLCB7fSwge3RleHRBbGlnbjogJ3JpZ2h0J30pLFxuICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBleHBvcnRSdWxlclRvZ2dsZSldKTtcbiAgICAgICAgdmFyIGVvdFNjYWxlID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnU2NhbGUgbXVsdGlwbGllcicsIHt9LCB7dGV4dEFsaWduOiAncmlnaHQnfSksXG4gICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgZXhwb3J0U2NhbGUpXSk7XG4gICAgICAgIHZhciBlb3RXaWR0aCA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ1dpZHRoIChsb2dpY2FsIHB4KScsIHt9LCB7dGV4dEFsaWduOiAncmlnaHQnfSksXG4gICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgZXhwb3J0V2lkdGgpXSk7XG4gICAgICAgIHZhciBlb3RSZWdpb24gPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdMYWJlbCB3aXRoIGdlbm9taWMgY29vcmRpbmF0ZXMnLCB7fSwge3RleHRBbGlnbjogJ3JpZ2h0J30pLFxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGV4cG9ydFJlZ2lvblRvZ2dsZSldKTtcbiAgICAgICAgdmFyIGVvdEJhbm5lciA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ0luY2x1ZGUgYmFubmVyJywge30sIHt0ZXh0QWxpZ246ICdyaWdodCd9KSxcbiAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBleHBvcnRCYW5uZXJUb2dnbGUpXSk7XG5cbiAgICAgICAgdmFyIGV4cG9ydE9wdHNUYWJsZSA9IG1ha2VFbGVtZW50KCd0YWJsZScsXG4gICAgICAgICAgICBbZW90SGlnaGxpZ2h0cyxcbiAgICAgICAgICAgICBlb3RHdWlkZWxpbmUsXG4gICAgICAgICAgICAgZW90V2lkdGgsXG4gICAgICAgICAgICAgZW90U2NhbGUsXG4gICAgICAgICAgICAgZW90UmVnaW9uXSwgbnVsbCwge3dpZHRoOiAnNTAwcHgnfSk7XG4gICAgICAgIHZhciBzZXR1cEVPVCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGVzID0gZXhwb3J0U2VsZWN0LnZhbHVlO1xuICAgICAgICAgICAgZW90SGlnaGxpZ2h0cy5zdHlsZS5kaXNwbGF5ID0gKGVzID09ICdzdmcnIHx8IGVzID09ICdwbmcnKSA/ICd0YWJsZS1yb3cnIDogJ25vbmUnO1xuICAgICAgICAgICAgZW90R3VpZGVsaW5lLnN0eWxlLmRpc3BsYXkgPSAoZXMgPT0gJ3N2ZycgfHwgZXMgPT0gJ3BuZycpID8gJ3RhYmxlLXJvdycgOiAnbm9uZSc7XG4gICAgICAgICAgICBlb3RTY2FsZS5zdHlsZS5kaXNwbGF5ID0gKGVzID09ICdwbmcnKSA/ICd0YWJsZS1yb3cnIDogJ25vbmUnO1xuICAgICAgICAgICAgZW90V2lkdGguc3R5bGUuZGlzcGxheSA9IChlcyA9PSAnc3ZnJyB8fCBlcyA9PSAncG5nJykgPyAndGFibGUtcm93JyA6ICdub25lJztcbiAgICAgICAgICAgIGVvdFJlZ2lvbi5zdHlsZS5kaXNwbGF5ID0gKGVzID09ICdzdmcnIHx8IGVzID09ICdwbmcnKSA/ICd0YWJsZS1yb3cnIDogJ25vbmUnO1xuICAgICAgICAgICAgZW90QmFubmVyLnN0eWxlLmRpc3BsYXkgPSAoZXMgPT0gJ3N2ZycgfHwgZXMgPT0gJ3BuZycpID8gJ3RhYmxlLXJvdycgOiAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgICAgc2V0dXBFT1QoKTtcblxuICAgICAgICBleHBvcnRGb3JtLmFwcGVuZENoaWxkKGV4cG9ydE9wdHNUYWJsZSk7XG4gICAgICAgIGV4cG9ydEZvcm0uYXBwZW5kQ2hpbGQoZXhwb3J0QnV0dG9uKTtcbiAgICAgICAgZXhwb3J0Rm9ybS5hcHBlbmRDaGlsZChleHBvcnRDb250ZW50KTtcblxuICAgICAgICBpZiAodGhpcy51aU1vZGUgIT09ICdub25lJylcbiAgICAgICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xuICAgICAgICB0aGlzLmJyb3dzZXJIb2xkZXIuaW5zZXJ0QmVmb3JlKGV4cG9ydEZvcm0sIHRoaXMuc3ZnSG9sZGVyKTtcbiAgICAgICAgdGhpcy5hY3RpdmVUb29sUGFuZWwgPSBleHBvcnRGb3JtO1xuXG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdleHBvcnQnKTtcbiAgICB9XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDE0XG4vL1xuLy8gZXhwb3J0cy5qczogc2hpbSB0byBleHBvcnQgc3ltYm9scyBpbnRvIGdsb2JhbCBuYW1lc3BhY2UgZm9yIGVhc2Ugb2YgZW1iZWRkaW5nXG4vL1xuXG52YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbnZhciBjaGFpbnNldCA9IHJlcXVpcmUoJy4vY2hhaW5zZXQnKTtcbnZhciBzYSA9IHJlcXVpcmUoJy4vc291cmNlYWRhcHRlcnMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xudmFyIHNjID0gcmVxdWlyZSgnLi9zb3VyY2Vjb21wYXJlJyk7XG5cbndpbmRvdy5Ccm93c2VyID0gYnJvd3Nlci5Ccm93c2VyO1xud2luZG93LnNvdXJjZXNBcmVFcXVhbCA9IHNjLnNvdXJjZXNBcmVFcXVhbDtcbndpbmRvdy5DaGFpbnNldCA9IGNoYWluc2V0LkNoYWluc2V0OyAgICAvLyBQcmUtMC4xMiBjb25maWd1cmF0aW9ucyBuZWVkIHRoaXMuXG5cbi8vIFVzZWZ1bCBmb3IgaW5mbyBwbHVnaW5zLiAgU2hvdWxkIGJlIHJlY29uc2lkZXJlZCBpbiB0aGUgZnV0dXJlLlxud2luZG93Lm1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG5cbi8vIEFsbG93IHNvdXJjZSBwbHVnaW5zIHRvIGJlIGxvYWRlZCBzZXBhcmF0ZWx5Llxud2luZG93LmRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5ID0gc2EucmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeTtcbndpbmRvdy5kYWxsaWFuY2VfcmVnaXN0ZXJQYXJzZXJGYWN0b3J5ID0gc2EucmVnaXN0ZXJQYXJzZXJGYWN0b3J5O1xud2luZG93LmRhbGxpYW5jZV9tYWtlUGFyc2VyID0gc2EubWFrZVBhcnNlcjtcblxuLy8gREFTKiBvYmplY3RzIGZvciBzb21lIHBsdWdpbnMgLS0gcmVtb3ZlIHdoZW4gcGx1Z2luIEFQSSBjaGFuZ2VzLi4uXG5cbndpbmRvdy5EQVNTZXF1ZW5jZSA9IGRhcy5EQVNTZXF1ZW5jZTtcbndpbmRvdy5EQVNGZWF0dXJlID0gZGFzLkRBU0ZlYXR1cmU7XG53aW5kb3cuREFTR3JvdXAgPSBkYXMuREFTR3JvdXA7XG53aW5kb3cuREFTU3R5bGVzaGVldCA9IGRhcy5EQVNTdHlsZXNoZWV0O1xud2luZG93LkRBU1N0eWxlID0gZGFzLkRBU1N0eWxlO1xud2luZG93LkRBU1NvdXJjZSA9IGRhcy5EQVNTb3VyY2U7ICAgIC8vIFByZS0wLjggY29uZmlndXJhdGlvbnMgdXNlZCB0aGlzLiAgU3RpbGwgc29tZSBhcm91bmQuLi5cblxudmFyIHJ1bGVyID0gcmVxdWlyZShcIi4vcnVsZXJzXCIpO1xud2luZG93LlJ1bGVyID0gcnVsZXIuUnVsZXI7XG53aW5kb3cucnVsZXJEcmF3Q2FsbGJhY2sgPSBydWxlci5ydWxlckRyYXdDYWxsYmFjaztcbiIsIi8vXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gZmVhdHVyZS1kcmF3LmpzOiBuZXcgZmVhdHVyZS10aWVyIHJlbmRlcmVyXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgdGllciA9IHJlcXVpcmUoJy4vdGllcicpO1xuICAgIHZhciBEYXNUaWVyID0gdGllci5EYXNUaWVyO1xuXG4gICAgdmFyIG5mID0gcmVxdWlyZSgnLi9udW1mb3JtYXRzJyk7XG4gICAgdmFyIGZvcm1hdFF1YW50TGFiZWwgPSBuZi5mb3JtYXRRdWFudExhYmVsO1xufVxuXG5mdW5jdGlvbiBTdWJUaWVyKGRpcmVjdCkge1xuICAgIHRoaXMuZ2x5cGhzID0gW107XG4gICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgIHRoaXMucXVhbnQgPSBudWxsO1xuICAgIHRoaXMuZGlyZWN0ID0gZGlyZWN0O1xufVxuXG5TdWJUaWVyLnByb3RvdHlwZS5pbmRleEZvciA9IGZ1bmN0aW9uKGdseXBoKSB7XG4gICAgdmFyIGdtaW4gPSBnbHlwaC5taW4oKTtcbiAgICB2YXIgbGIgPSAwLCB1YiA9IHRoaXMuZ2x5cGhzLmxlbmd0aDtcbiAgICB3aGlsZSAodWIgPiBsYikge1xuICAgICAgICB2YXIgbWlkID0gKChsYiArIHViKS8yKXwwO1xuICAgICAgICBpZiAobWlkID49IHRoaXMuZ2x5cGhzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdseXBocy5sZW5ndGg7XG4gICAgICAgIHZhciBtZyA9IHRoaXMuZ2x5cGhzW21pZF07XG4gICAgICAgIGlmIChnbWluIDwgbWcubWluKCkpIHtcbiAgICAgICAgICAgIHViID0gbWlkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGIgPSBtaWQgKyAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1Yjtcbn1cblxuU3ViVGllci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oZ2x5cGgpIHtcbiAgICBpZiAodGhpcy5kaXJlY3QpIHtcbiAgICAgICAgdGhpcy5nbHlwaHMucHVzaChnbHlwaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGluZCA9IHRoaXMuaW5kZXhGb3IoZ2x5cGgpO1xuICAgICAgICB0aGlzLmdseXBocy5zcGxpY2UoaW5kLCAwLCBnbHlwaCk7XG4gICAgfVxuICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgodGhpcy5oZWlnaHQsIGdseXBoLmhlaWdodCgpKTtcbiAgICBpZiAoZ2x5cGgucXVhbnQgJiYgdGhpcy5xdWFudCA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucXVhbnQgPSBnbHlwaC5xdWFudDtcbiAgICB9XG59XG5cblN1YlRpZXIucHJvdG90eXBlLmhhc1NwYWNlRm9yID0gZnVuY3Rpb24oZ2x5cGgpIHtcbiAgICBpZiAodGhpcy5kaXJlY3QpXG4gICAgICAgIHRocm93IEVycm9yKCdQcm9iaW5nIGluIGRpcmVjdC1hZGRpdGlvbiBzdWJ0aWVyJyk7XG4gICAgXG4gICAgdmFyIGluZCA9IHRoaXMuaW5kZXhGb3IoZ2x5cGgpO1xuICAgIGlmIChpbmQgPiAwICYmIHRoaXMuZ2x5cGhzW2luZC0xXS5tYXgoKSA+PSBnbHlwaC5taW4oKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChpbmQgPCB0aGlzLmdseXBocy5sZW5ndGggJiYgdGhpcy5nbHlwaHNbaW5kXS5taW4oKSA8PSBnbHlwaC5tYXgoKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnBhaW50VG9Db250ZXh0ID0gZnVuY3Rpb24oZ2MsIG9jLCBvZmZzZXQpIHtcbiAgICB2YXIgc3VidGllcnMgPSB0aGlzLnN1YnRpZXJzO1xuICAgIHZhciBmcHcgPSB0aGlzLnZpZXdwb3J0LndpZHRofDA7XG5cbiAgICBnYy5zYXZlKCk7XG4gICAgZm9yICh2YXIgcyA9IDA7IHMgPCBzdWJ0aWVycy5sZW5ndGg7ICsrcykge1xuICAgICAgICB2YXIgcXVhbnQgPSBudWxsO1xuICAgICAgICB2YXIgZ2x5cGhzID0gc3VidGllcnNbc10uZ2x5cGhzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdseXBocy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGdseXBoID0gZ2x5cGhzW2ldO1xuICAgICAgICAgICAgaWYgKGdseXBoLm1pbigpIDwgZnB3LW9mZnNldCAmJiBnbHlwaC5tYXgoKSA+IC1vZmZzZXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XG4gICAgICAgICAgICAgICAgZ2x5cGguZHJhdyhnYywgb2MpO1xuICAgICAgICAgICAgICAgIGlmIChnbHlwaC5xdWFudCkge1xuICAgICAgICAgICAgICAgICAgICBxdWFudCA9IGdseXBoLnF1YW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cdGlmIChxdWFudCAmJiBxdWFudC5taW4gPCAwICYmIHF1YW50Lm1heCA+IDAgJiYgdGhpcy5kYXNTb3VyY2UuemVyb0xpbmUpIHtcblx0ICAgIHZhciByeSA9IHN1YnRpZXJzWzBdLmhlaWdodCAqIChxdWFudC5tYXggLyAocXVhbnQubWF4IC0gcXVhbnQubWluKSlcblx0ICAgIGdjLnNhdmUoKTtcblx0ICAgIGdjLnN0cm9rZVN0eWxlID0gdGhpcy5kYXNTb3VyY2UuemVyb0xpbmU7XG5cdCAgICBnYy5saW5lV2lkdGggPSAwLjU7XG5cdCAgICBnYy5iZWdpblBhdGgoKTtcblx0ICAgIGdjLm1vdmVUbygtMTAwMCwgcnkpO1xuXHQgICAgZ2MubGluZVRvKGZwdyArIDEwMDAsIHJ5KTtcblx0ICAgIGdjLnN0cm9rZSgpO1xuXHQgICAgZ2MucmVzdG9yZSgpO1xuXHR9XG5cbiAgICAgICAgaWYgKHRoaXMuc2NhbGVWZXJ0aWNhbCkge1xuICAgICAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5icm93c2VyLnNjYWxlO1xuICAgICAgICAgICAgZ2MudHJhbnNsYXRlKDAsIHNjYWxlICsgdGhpcy5wYWRkaW5nKTtcbiAgICAgICAgICAgIG9jLnRyYW5zbGF0ZSgwLCBzY2FsZSArIHRoaXMucGFkZGluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnYy50cmFuc2xhdGUoMCwgc3VidGllcnNbc10uaGVpZ2h0ICsgdGhpcy5wYWRkaW5nKTtcbiAgICAgICAgICAgIG9jLnRyYW5zbGF0ZSgwLCBzdWJ0aWVyc1tzXS5oZWlnaHQgKyB0aGlzLnBhZGRpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdjLnJlc3RvcmUoKTtcblxuICAgIGlmIChxdWFudCAmJiB0aGlzLnF1YW50TGVhcFRocmVzaG9sZCAmJiB0aGlzLmZlYXR1cmVTb3VyY2UgJiYgdGhpcy5icm93c2VyLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGhpcy5mZWF0dXJlU291cmNlLCAncXVhbnRMZWFwJykpIHtcbiAgICAgICAgdmFyIHJ5ID0gc3VidGllcnNbMF0uaGVpZ2h0ICogKDEuMCAtICgodGhpcy5xdWFudExlYXBUaHJlc2hvbGQgLSBxdWFudC5taW4pIC8gKHF1YW50Lm1heCAtIHF1YW50Lm1pbikpKTtcblxuICAgICAgICBnYy5zYXZlKCk7XG4gICAgICAgIGdjLnN0cm9rZVN0eWxlID0gJ3JlZCc7XG4gICAgICAgIGdjLmxpbmVXaWR0aCA9IDAuMztcbiAgICAgICAgZ2MuYmVnaW5QYXRoKCk7XG4gICAgICAgIGdjLm1vdmVUbygtMTAwMCwgcnkpO1xuICAgICAgICBnYy5saW5lVG8oZnB3ICsgMTAwMCwgcnkpO1xuICAgICAgICBnYy5zdHJva2UoKTtcbiAgICAgICAgZ2MucmVzdG9yZSgpO1xuICAgIH1cbn1cblxuRGFzVGllci5wcm90b3R5cGUucGFpbnRRdWFudCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5xdWFudE92ZXJsYXkpXG4gICAgICAgIHJldHVybjtcblxuICAgIHZhciByZXRpbmEgPSB0aGlzLmJyb3dzZXIucmV0aW5hICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMTtcblxuICAgIHZhciBxdWFudDtcbiAgICBpZiAodGhpcy5zdWJ0aWVycyAmJiB0aGlzLnN1YnRpZXJzLmxlbmd0aCA+IDApXG4gICAgICAgIHF1YW50ID0gdGhpcy5zdWJ0aWVyc1swXS5xdWFudDtcblxuICAgIGlmIChxdWFudCkge1xuICAgICAgICB2YXIgaCA9IHRoaXMuc3VidGllcnNbMF0uaGVpZ2h0O1xuICAgICAgICB2YXIgdyA9IDUwO1xuICAgICAgICB0aGlzLnF1YW50T3ZlcmxheS5oZWlnaHQgPSB0aGlzLnZpZXdwb3J0LmhlaWdodDtcbiAgICAgICAgdGhpcy5xdWFudE92ZXJsYXkud2lkdGggPSByZXRpbmEgPyB3KjIgOiB3O1xuICAgICAgICB0aGlzLnF1YW50T3ZlcmxheS5zdHlsZS5oZWlnaHQgPSAnJyArIChyZXRpbmEgPyB0aGlzLnF1YW50T3ZlcmxheS5oZWlnaHQvMiA6IHRoaXMucXVhbnRPdmVybGF5LmhlaWdodCkgKyAncHgnO1xuICAgICAgICB0aGlzLnF1YW50T3ZlcmxheS5zdHlsZS53aWR0aCA9ICcnICsgdyArICdweCc7XG4gICAgICAgIHRoaXMucXVhbnRPdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB2YXIgY3R4ID0gdGhpcy5xdWFudE92ZXJsYXkuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgaWYgKHJldGluYSlcbiAgICAgICAgICAgIGN0eC5zY2FsZSgyLCAyKTtcblxuICAgICAgICB2YXIgbnVtVGljcyA9IDI7XG4gICAgICAgIGlmIChoID4gNDApIHtcbiAgICAgICAgICAgIG51bVRpY3MgPSAxICsgKChoLzIwKSB8IDApO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWNTcGFjaW5nID0gKGggKyB0aGlzLnBhZGRpbmcqMikgLyAobnVtVGljcyAtIDEpO1xuICAgICAgICB2YXIgdGljSW50ZXJ2YWwgPSAocXVhbnQubWF4IC0gcXVhbnQubWluKSAvIChudW1UaWNzIC0gMSk7XG5cbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICd3aGl0ZSdcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC42O1xuICAgICAgICBpZiAodGhpcy5icm93c2VyLnJ1bGVyTG9jYXRpb24gPT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHctMzAsIDAsIDMwLCBoICsgdGhpcy5wYWRkaW5nKjIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIDMwLCBoICsgdGhpcy5wYWRkaW5nKjIpO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEuMDtcblxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gMTtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuXG4gICAgICAgIGlmICh0aGlzLmJyb3dzZXIucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBjdHgubW92ZVRvKHcgLSA4LCB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh3LCB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh3LCBoICsgdGhpcy5wYWRkaW5nKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8odyAtIDgsIGggKyB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xuICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHcsIHR5KTtcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKHcgLSA1LCB0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHgubW92ZVRvKDgsIHRoaXMucGFkZGluZyk7XG4gICAgICAgICAgICBjdHgubGluZVRvKDAsIHRoaXMucGFkZGluZyk7XG4gICAgICAgICAgICBjdHgubGluZVRvKDAsIGggKyB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyg4LCBoICsgdGhpcy5wYWRkaW5nKTtcbiAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgbnVtVGljcy0xOyArK3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHkgPSB0KnRpY1NwYWNpbmc7XG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygwLCB0eSk7XG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyg1LCB0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnYmxhY2snO1xuXG4gICAgICAgIGlmICh0aGlzLmJyb3dzZXIucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1heCksIHctOSwgOCk7XG4gICAgICAgICAgICBjdHguZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbChxdWFudC5taW4pLCB3LTksIGggKyB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xuICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcbiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbCgoMS4wKnF1YW50Lm1heCkgLSAodCp0aWNJbnRlcnZhbCkpLCB3IC0gOSwgdHkgKyAzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7XG4gICAgICAgICAgICBjdHguZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbChxdWFudC5tYXgpLCA5LCA4KTtcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1pbiksIDksIGggKyB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xuICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcbiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbCgoMS4wKnF1YW50Lm1heCkgLSAodCp0aWNJbnRlcnZhbCkpLCA5LCB0eSArIDMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWFudE92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnN0eWxlRm9yRmVhdHVyZSA9IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgc3NTY2FsZSA9IHRoaXMuYnJvd3Nlci56b29tRm9yQ3VycmVudFNjYWxlKCk7XG5cbiAgICBpZiAoIXRoaXMuc3R5bGVzaGVldCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbWF5YmUgPSBudWxsO1xuICAgIHZhciBzcyA9IHRoaXMuc3R5bGVzaGVldC5zdHlsZXM7XG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICB2YXIgc2ggPSBzc1tzaV07XG4gICAgICAgIGlmIChzaC56b29tICYmIHNoLnpvb20gIT0gc3NTY2FsZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2gub3JpZW50YXRpb24pIHtcbiAgICAgICAgICAgIGlmIChzaC5vcmllbnRhdGlvbiAhPSBmLm9yaWVudGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbGFiZWxSRSA9IHNoLl9sYWJlbFJFO1xuICAgICAgICBpZiAoIWxhYmVsUkUgfHwgIWxhYmVsUkUudGVzdCkge1xuICAgICAgICAgICAgbGFiZWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgc2gubGFiZWwgKyAnJCcpO1xuICAgICAgICAgICAgc2guX2xhYmVsUkUgPSBsYWJlbFJFO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaC5sYWJlbCAmJiAhKGxhYmVsUkUudGVzdChmLmxhYmVsKSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtZXRob2RSRSA9IHNoLl9tZXRob2RSRTtcbiAgICAgICAgaWYgKCFtZXRob2RSRSB8fCAhbWV0aG9kUkUudGVzdCkge1xuICAgICAgICAgICAgbWV0aG9kUkUgPSBuZXcgUmVnRXhwKCdeJyArIHNoLm1ldGhvZCArICckJyk7XG4gICAgICAgICAgICBzaC5fbWV0aG9kUkUgPSBtZXRob2RSRTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2gubWV0aG9kICYmICEobWV0aG9kUkUudGVzdChmLm1ldGhvZCkpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2gudHlwZSkge1xuICAgICAgICAgICAgaWYgKHNoLnR5cGUgPT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXliZSkge1xuICAgICAgICAgICAgICAgICAgICBtYXliZSA9IHNoLnN0eWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGVSRSA9IHNoLl90eXBlUkU7XG4gICAgICAgICAgICAgICAgaWYgKCF0eXBlUkUgfHwgIXR5cGVSRS50ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVSRSA9IG5ldyBSZWdFeHAoJ14nICsgc2gudHlwZSArICckJyk7XG4gICAgICAgICAgICAgICAgICAgIHNoLl90eXBlUkUgPSB0eXBlUkU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdHlwZVJFLnRlc3QoZi50eXBlKSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoLnN0eWxlO1xuICAgIH1cbiAgICByZXR1cm4gbWF5YmU7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnF1YW50TWluID0gZnVuY3Rpb24oc3R5bGUpIHtcbiAgICBpZiAodGhpcy5mb3JjZU1pbkR5bmFtaWMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEZlYXR1cmVzTWluU2NvcmUgfHwgMDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZih0aGlzLmZvcmNlTWluKSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VNaW47XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc29mdE1pbiA9IHR5cGVvZihzdHlsZS5TT0ZUTUlOKSAhPT0gJ3VuZGVmaW5lZCcgPyBzdHlsZS5TT0ZUTUlOIDogTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgcmV0dXJuIHN0eWxlLk1JTiB8fCBNYXRoLm1pbihzb2Z0TWluLCB0aGlzLmN1cnJlbnRGZWF0dXJlc01pblNjb3JlIHx8IDApO1xuICAgIH1cbn1cblxuRGFzVGllci5wcm90b3R5cGUucXVhbnRNYXggPSBmdW5jdGlvbihzdHlsZSkge1xuICAgIGlmICh0aGlzLmZvcmNlTWF4RHluYW1pYykge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50RmVhdHVyZXNNYXhTY29yZSB8fCAwO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mKHRoaXMuZm9yY2VNYXgpID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZU1heDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzb2Z0TWF4ID0gdHlwZW9mKHN0eWxlLlNPRlRNQVgpICE9PSAndW5kZWZpbmVkJyA/IHN0eWxlLlNPRlRNQVggOiBOdW1iZXIuTUlOX1ZBTFVFO1xuICAgICAgICByZXR1cm4gc3R5bGUuTUFYIHx8IE1hdGgubWF4KHNvZnRNYXgsIHRoaXMuY3VycmVudEZlYXR1cmVzTWF4U2NvcmUgfHwgMCk7XG4gICAgfVxufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIFN1YlRpZXI6IFN1YlRpZXJcbiAgICB9O1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXG4vL1xuLy8gZmVhdHVyZS1wb3B1cC5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIHBpY2sgPSB1dGlscy5waWNrO1xuICAgIHZhciBwdXNobmV3ID0gdXRpbHMucHVzaG5ldztcbiAgICB2YXIgbWFrZUVsZW1lbnQgPSB1dGlscy5tYWtlRWxlbWVudDtcbn1cblxuXG52YXIgVEFHVkFMX05PVEVfUkUgPSBuZXcgUmVnRXhwKCdeKFtBLVphLXpfLV0rKT0oLispJyk7XG5cbkJyb3dzZXIucHJvdG90eXBlLmFkZEZlYXR1cmVJbmZvUGx1Z2luID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgIGlmICghdGhpcy5mZWF0dXJlSW5mb1BsdWdpbnMpIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlSW5mb1BsdWdpbnMgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5mZWF0dXJlSW5mb1BsdWdpbnMucHVzaChoYW5kbGVyKTtcbn1cblxuZnVuY3Rpb24gRmVhdHVyZUluZm8oaGl0LCBmZWF0dXJlLCBncm91cCkge1xuICAgIHZhciBuYW1lID0gcGljayhncm91cC50eXBlLCBmZWF0dXJlLnR5cGUpO1xuICAgIHZhciBmaWQgPSBwaWNrKGdyb3VwLmxhYmVsLCBmZWF0dXJlLmxhYmVsLCBncm91cC5pZCwgZmVhdHVyZS5pZCk7XG4gICAgaWYgKGZpZCAmJiBmaWQuaW5kZXhPZignX19kYXp6bGUnKSAhPSAwKSB7XG4gICAgICAgIC8qIDxzeW46MjAxOC0wMS0yOT4gKi9cbiAgICAgICAgLy8gbmFtZSA9IG5hbWUgKyAnOiAnICsgZmlkO1xuICAgICAgICBuYW1lID0gZmlkO1xuICAgICAgICAvKiA8L3N5bjoyMDE4LTAxLTI5PiAqL1xuICAgIH1cblxuICAgIHRoaXMuaGl0ID0gaGl0O1xuICAgIHRoaXMuZmVhdHVyZSA9IGZlYXR1cmU7XG4gICAgdGhpcy5ncm91cCA9IGdyb3VwO1xuICAgIHRoaXMudGl0bGUgPSBuYW1lO1xuICAgIHRoaXMuc2VjdGlvbnMgPSBbXTtcbiAgICB0aGlzLmNsb3NlTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5faW5oaWJpdFBvcHVwID0gZmFsc2U7XG59XG5cbkZlYXR1cmVJbmZvLnByb3RvdHlwZS5zZXRUaXRsZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLnRpdGxlID0gdDtcbn1cblxuRmVhdHVyZUluZm8ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGxhYmVsLCBpbmZvKSB7XG4gICAgaWYgKHR5cGVvZiBpbmZvID09PSAnc3RyaW5nJykge1xuICAgICAgICBpbmZvID0gbWFrZUVsZW1lbnQoJ3NwYW4nLCBpbmZvKTtcbiAgICB9XG4gICAgdGhpcy5zZWN0aW9ucy5wdXNoKHtsYWJlbDogbGFiZWwsIGluZm86IGluZm99KTtcbn1cblxuRmVhdHVyZUluZm8ucHJvdG90eXBlLmluaGliaXRQb3B1cCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2luaGliaXRQb3B1cCA9IHRydWU7XG59XG5cbkZlYXR1cmVJbmZvLnByb3RvdHlwZS5hZGRDbG9zZUxpc3RlbmVyID0gZnVuY3Rpb24oZikge1xuICAgIHRoaXMuY2xvc2VMaXN0ZW5lcnMucHVzaChmKTtcbn1cblxuRmVhdHVyZUluZm8ucHJvdG90eXBlLl9ub3RpZnlDbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGNsaSA9IDA7IGNsaSA8IHRoaXMuY2xvc2VMaXN0ZW5lcnMubGVuZ3RoOyArK2NsaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZUxpc3RlbmVyc1tjbGldKCk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmZlYXR1cmVQb3B1cCA9IGZ1bmN0aW9uKGV2LCBfX2lnbm9yZWRfZmVhdHVyZSwgaGl0LCB0aWVyLCBvcHRzKSB7XG4gICAgaWYgKCFvcHRzKSB7XG4gICAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cblxuICAgIHZhciBoaSA9IGhpdC5sZW5ndGg7XG4gICAgdmFyIGZlYXR1cmUgPSAtLWhpID49IDAgPyBoaXRbaGldIDoge307XG4gICAgdmFyIGdyb3VwID0gLS1oaSA+PSAwID8gaGl0W2hpXSA6IHt9O1xuXG4gICAgdmFyIGZlYXR1cmVJbmZvID0gbmV3IEZlYXR1cmVJbmZvKGhpdCwgZmVhdHVyZSwgZ3JvdXApO1xuICAgIGZlYXR1cmVJbmZvLnRpZXIgPSB0aWVyO1xuICAgIHZhciBmaXBzID0gdGhpcy5mZWF0dXJlSW5mb1BsdWdpbnMgfHwgW107XG4gICAgZm9yICh2YXIgZmlwaSA9IDA7IGZpcGkgPCBmaXBzLmxlbmd0aDsgKytmaXBpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmaXBzW2ZpcGldKGZlYXR1cmUsIGZlYXR1cmVJbmZvKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZS5zdGFjayB8fCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaXBzID0gdGllci5mZWF0dXJlSW5mb1BsdWdpbnMgfHwgW107XG4gICAgZm9yIChmaXBpID0gMDsgZmlwaSA8IGZpcHMubGVuZ3RoOyArK2ZpcGkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZpcHNbZmlwaV0oZmVhdHVyZSwgZmVhdHVyZUluZm8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLnN0YWNrIHx8IGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGZlYXR1cmVJbmZvLl9pbmhpYml0UG9wdXApIHtcbiAgICAgICAgLy8gVGhpcyBpcyBlZmZlY3RpdmVseSBhbiBcImluc3RhbnQgY2xvc2VcIiwgc28gbm90aWZ5IGFueSBGSVBzIHRoYXQgY2FyZS5cbiAgICAgICAgZmVhdHVyZUluZm8uX25vdGlmeUNsb3NlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJlbW92ZUFsbFBvcHVwcygpO1xuXG4gICAgdmFyIHRhYmxlID0gbWFrZUVsZW1lbnQoJ3RhYmxlJywgbnVsbCwge2NsYXNzTmFtZTogJ3RhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtY29uZGVuc2VkJ30pO1xuICAgIHRhYmxlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRhYmxlLnN0eWxlLm1hcmdpbiA9ICcwcHgnO1xuXG4gICAgdmFyIGlkeCA9IDA7XG4gICAgaWYgKGZlYXR1cmUubWV0aG9kICYmICF0aWVyLmRhc1NvdXJjZS5zdXBwcmVzc01ldGhvZCkge1xuICAgICAgICB2YXIgcm93ID0gbWFrZUVsZW1lbnQoJ3RyJywgW1xuICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RoJywgJ01ldGhvZCcpLFxuICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgZmVhdHVyZS5tZXRob2QpXG4gICAgICAgIF0pO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICArK2lkeDtcbiAgICB9XG4gICAge1xuICAgICAgICB2YXIgbG9jO1xuICAgICAgICBpZiAoZ3JvdXAuc2VnbWVudCkge1xuICAgICAgICAgICAgbG9jID0gZ3JvdXA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2MgPSBmZWF0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInLCBbXG4gICAgICAgICAgICBtYWtlRWxlbWVudCgndGgnLCAnTG9jYXRpb24nKSxcbiAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGxvYy5zZWdtZW50ICsgJzonICsgbG9jLm1pbiArICctJyArIGxvYy5tYXgsIHt9LCB7bWluV2lkdGg6ICcyMDBweCd9KVxuICAgICAgICBdKTtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgKytpZHg7XG4gICAgfVxuICAgIGlmIChmZWF0dXJlLnNjb3JlICE9PSB1bmRlZmluZWQgJiYgZmVhdHVyZS5zY29yZSAhPT0gbnVsbCAmJiBmZWF0dXJlLnNjb3JlICE9ICctJ1xuICAgICAgICAmJiAhZmVhdHVyZS5zdXBwcmVzc1Njb3JlICYmICF0aWVyLmRhc1NvdXJjZS5zdXBwcmVzc1Njb3JlXG4gICAgKSB7XG4gICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInLCBbXG4gICAgICAgICAgICBtYWtlRWxlbWVudCgndGgnLCAnU2NvcmUnKSxcbiAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsICcnICsgZmVhdHVyZS5zY29yZSlcbiAgICAgICAgXSk7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICsraWR4O1xuICAgIH1cbiAgICB7XG4gICAgICAgIHZhciBsaW5rcyA9IG1heWJlQ29uY2F0KGdyb3VwLmxpbmtzLCBmZWF0dXJlLmxpbmtzKTtcbiAgICAgICAgaWYgKGxpbmtzICYmIGxpbmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInLCBbXG4gICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RoJywgJ0xpbmtzJyksXG4gICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgbGlua3MubWFwKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VFbGVtZW50KCdkaXYnLCBtYWtlRWxlbWVudCgnYScsIGwuZGVzYywge2hyZWY6IGwudXJpLCB0YXJnZXQ6ICdfbmV3J30pKTtcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgICsraWR4O1xuICAgICAgICB9XG4gICAgfVxuICAgIHtcbiAgICAgICAgdmFyIG5vdGVzID0gbWF5YmVDb25jYXQoZ3JvdXAubm90ZXMsIGZlYXR1cmUubm90ZXMpO1xuICAgICAgICBmb3IgKHZhciBuaSA9IDA7IG5pIDwgbm90ZXMubGVuZ3RoOyArK25pKSB7XG4gICAgICAgICAgICB2YXIgayA9ICdOb3RlJztcbiAgICAgICAgICAgIHZhciB2ID0gbm90ZXNbbmldO1xuICAgICAgICAgICAgdmFyIG0gPSB2Lm1hdGNoKFRBR1ZBTF9OT1RFX1JFKTtcbiAgICAgICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICAgICAgayA9IG1bMV07XG4gICAgICAgICAgICAgICAgdiA9IG1bMl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInLCBbXG4gICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RoJywgayksXG4gICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgdilcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgICsraWR4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgZmlzaSA9IDA7IGZpc2kgPCBmZWF0dXJlSW5mby5zZWN0aW9ucy5sZW5ndGg7ICsrZmlzaSkge1xuICAgICAgICB2YXIgc2VjdGlvbiA9IGZlYXR1cmVJbmZvLnNlY3Rpb25zW2Zpc2ldO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndHInLCBbXG4gICAgICAgICAgICBtYWtlRWxlbWVudCgndGgnLCBzZWN0aW9uLmxhYmVsKSxcbiAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIHNlY3Rpb24uaW5mbyldKSk7XG4gICAgfVxuXG4gICAgdGhpcy5wb3BpdChcbiAgICAgICAgZXYsXG4gICAgICAgIGZlYXR1cmVJbmZvLnRpdGxlIHx8ICdGZWF0dXJlJyxcbiAgICAgICAgdGFibGUsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHdpZHRoOiA0NTAsXG4gICAgICAgICAgICBvbkNsb3NlOiBmZWF0dXJlSW5mby5fbm90aWZ5Q2xvc2UuYmluZChmZWF0dXJlSW5mbyksXG4gICAgICAgICAgICBkaXNhYmxlRHJhZzogb3B0cy5kaXNhYmxlRHJhZ1xuICAgICAgICB9XG4gICAgKTtcbn1cblxuZnVuY3Rpb24gbWF5YmVDb25jYXQoYSwgYikge1xuICAgIHZhciBsID0gW107XG4gICAgaWYgKGEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBwdXNobmV3KGwsIGFbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChiKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcHVzaG5ldyhsLCBiW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbDtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgcHVzaG8gPSB1dGlscy5wdXNobztcbiAgICB2YXIgcHVzaG5ld28gPSB1dGlscy5wdXNobmV3bztcbn1cblxuZnVuY3Rpb24gc29ydEZlYXR1cmVzKHRpZXIpXG57XG4gICAgdmFyIGRtaW4gPSB0aWVyLmJyb3dzZXIuZHJhd25TdGFydCwgZG1heCA9IHRpZXIuYnJvd3Nlci5kcmF3bkVuZDtcbiAgICB2YXIgdW5ncm91cGVkRmVhdHVyZXMgPSB7fTtcbiAgICB2YXIgZ3JvdXBlZEZlYXR1cmVzID0ge307XG4gICAgdmFyIGRyYXduR3JvdXBlZEZlYXR1cmVzID0ge307XG4gICAgdmFyIGdyb3VwTWlucyA9IHt9LCBncm91cE1heGVzID0ge307XG4gICAgdmFyIGdyb3VwcyA9IHt9O1xuICAgIHZhciBzdXBlckdyb3VwcyA9IHt9O1xuICAgIHZhciBncm91cHNUb1N1cGVycyA9IHt9O1xuICAgIHZhciBub25Qb3NpdGlvbmFsID0gW107XG4gICAgdmFyIG1pblNjb3JlLCBtYXhTY29yZTtcbiAgICB2YXIgZmJpZDtcblxuICAgIHZhciBpbml0X2ZiaWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZmJpZCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgdGllci5jdXJyZW50RmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICB2YXIgZiA9IHRpZXIuY3VycmVudEZlYXR1cmVzW2ZpXTtcbiAgICAgICAgICAgIGlmIChmLmlkKSB7XG4gICAgICAgICAgICAgICAgZmJpZFtmLmlkXSA9IGY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHZhciBzdXBlclBhcmVudHNPZiA9IGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgLy8gRklYTUU6IHNob3VsZCByZWN1ci5cbiAgICAgICAgdmFyIHNwaWRzID0gW107XG4gICAgICAgIGlmIChmLnBhcmVudHMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHBpID0gMDsgcGkgPCBmLnBhcmVudHMubGVuZ3RoOyArK3BpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBpZCA9IGYucGFyZW50c1twaV07XG4gICAgICAgICAgICAgICAgdmFyIHAgPSBmYmlkW3BpZF07XG4gICAgICAgICAgICAgICAgaWYgKCFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBhbGVydChwLnR5cGUgKyAnOicgKyBwLnR5cGVDdik7XG4gICAgICAgICAgICAgICAgaWYgKHAudHlwZUN2ID09ICdTTzowMDAwNzA0Jykge1xuICAgICAgICAgICAgICAgICAgICBwdXNobmV3KHNwaWRzLCBwaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BpZHM7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IHRpZXIuY3VycmVudEZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICB2YXIgZiA9IHRpZXIuY3VycmVudEZlYXR1cmVzW2ZpXTtcbiAgICAgICAgaWYgKGYucGFydHMpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRyYXduID0gZi5taW4gPD0gZG1heCAmJiBmLm1heCA+PSBkbWluO1xuXG4gICAgICAgIGlmICghZi5taW4gfHwgIWYubWF4KSB7XG4gICAgICAgICAgICBub25Qb3NpdGlvbmFsLnB1c2goZik7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmLnNjb3JlICYmIGYuc2NvcmUgIT0gJy4nICYmIGYuc2NvcmUgIT0gJy0nKSB7XG4gICAgICAgICAgICB2YXIgc2MgPSAxLjAgKiBmLnNjb3JlO1xuICAgICAgICAgICAgaWYgKCFtaW5TY29yZSB8fCBzYyA8IG1pblNjb3JlKSB7XG4gICAgICAgICAgICAgICAgbWluU2NvcmUgPSBzYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWF4U2NvcmUgfHwgc2MgPiBtYXhTY29yZSkge1xuICAgICAgICAgICAgICAgIG1heFNjb3JlID0gc2M7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZkdyb3VwcyA9IFtdO1xuICAgICAgICB2YXIgZlN1cGVyR3JvdXAgPSBudWxsO1xuICAgICAgICBpZiAoZi5ncm91cHMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGdpID0gMDsgZ2kgPCBmLmdyb3Vwcy5sZW5ndGg7ICsrZ2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgZyA9IGYuZ3JvdXBzW2dpXTtcbiAgICAgICAgICAgICAgICB2YXIgZ2lkID0gZy5pZDtcbiAgICAgICAgICAgICAgICBpZiAoZy50eXBlID09ICdnZW5lJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBMaWtlIGEgc3VwZXItZ3JvdXBlci4uLlxuICAgICAgICAgICAgICAgICAgICBmU3VwZXJHcm91cCA9IGdpZDsgXG4gICAgICAgICAgICAgICAgICAgIGdyb3Vwc1tnaWRdID0gZztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGcudHlwZSA9PSAndHJhbnNsYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgdG8gaWdub3JlIHRoaXMgdG8gZ2V0IHNlbnNpYmxlIHJlc3VsdHMgZnJvbSBiai1lIDotKC5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwdXNobyhncm91cGVkRmVhdHVyZXMsIGdpZCwgZik7XG4gICAgICAgICAgICAgICAgICAgIGdyb3Vwc1tnaWRdID0gZztcbiAgICAgICAgICAgICAgICAgICAgZkdyb3Vwcy5wdXNoKGdpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9nbSA9IGdyb3VwTWluc1tnaWRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW9nbSB8fCBmLm1pbiA8IG9nbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTWluc1tnaWRdID0gZi5taW47XG5cbiAgICAgICAgICAgICAgICAgICAgb2dtID0gZ3JvdXBNYXhlc1tnaWRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW9nbSB8fCBmLm1heCA+IG9nbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTWF4ZXNbZ2lkXSA9IGYubWF4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmLnBhcmVudHMpIHtcbiAgICAgICAgICAgIGlmICghZmJpZCkge1xuICAgICAgICAgICAgICAgIGluaXRfZmJpZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgcGkgPSAwOyBwaSA8IGYucGFyZW50cy5sZW5ndGg7ICsrcGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGlkID0gZi5wYXJlbnRzW3BpXTtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IGZiaWRbcGlkXTtcbiAgICAgICAgICAgICAgICBpZiAoIXApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoXCJjb3VsZG4ndCBmaW5kIFwiICsgcGlkKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghcC5wYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICBwLnBhcnRzID0gW2ZdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwdXNobmV3byhncm91cGVkRmVhdHVyZXMsIHBpZCwgcCk7XG4gICAgICAgICAgICAgICAgcHVzaG8oZ3JvdXBlZEZlYXR1cmVzLCBwaWQsIGYpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICghZ3JvdXBzW3BpZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW3BpZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBwLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBwLmxhYmVsIHx8IHAuaWRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZkdyb3Vwcy5wdXNoKHBpZCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgb2dtID0gZ3JvdXBNaW5zW3BpZF07XG4gICAgICAgICAgICAgICAgaWYgKCFvZ20gfHwgZi5taW4gPCBvZ20pXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwTWluc1twaWRdID0gZi5taW47XG5cbiAgICAgICAgICAgICAgICBvZ20gPSBncm91cE1heGVzW3BpZF07XG4gICAgICAgICAgICAgICAgaWYgKCFvZ20gfHwgZi5tYXggPiBvZ20pXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwTWF4ZXNbcGlkXSA9IGYubWF4O1xuXG4gICAgICAgICAgICAgICAgdmFyIHNncyA9IHN1cGVyUGFyZW50c09mKHApO1xuICAgICAgICAgICAgICAgIGlmIChzZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmU3VwZXJHcm91cCA9IHNnc1swXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwID0gZmJpZFtzZ3NbMF1dO1xuICAgICAgICAgICAgICAgICAgICBncm91cHNbc2dzWzBdXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHNwLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogc3AuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3AubGFiZWwgfHwgc3AuaWRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aWVyLmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWVyLmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gICBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmR3JvdXBzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBpZiAoZHJhd24pXG4gICAgICAgICAgICAgICAgcHVzaG8odW5ncm91cGVkRmVhdHVyZXMsIGYudHlwZSwgZik7XG4gICAgICAgIH0gZWxzZSBpZiAoZlN1cGVyR3JvdXApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGcgPSAwOyBnIDwgZkdyb3Vwcy5sZW5ndGg7ICsrZykge1xuICAgICAgICAgICAgICAgIHZhciBnaWQgPSBmR3JvdXBzW2ddO1xuICAgICAgICAgICAgICAgIHB1c2huZXdvKHN1cGVyR3JvdXBzLCBmU3VwZXJHcm91cCwgZ2lkKTtcbiAgICAgICAgICAgICAgICBncm91cHNUb1N1cGVyc1tnaWRdID0gZlN1cGVyR3JvdXA7XG4gICAgICAgICAgICB9IFxuICAgICAgICB9ICAgICAgIFxuICAgIH1cblxuICAgIGZvciAodmFyIGdpZCBpbiBncm91cGVkRmVhdHVyZXMpIHtcbiAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzW2dpZF07XG4gICAgICAgIGlmICh0eXBlb2YoZ3JvdXAubWluKSAhPT0gJ251bWJlcicpIFxuICAgICAgICAgICAgZ3JvdXAubWluID0gZ3JvdXBNaW5zW2dpZF07XG4gICAgICAgIGlmICh0eXBlb2YoZ3JvdXAubWF4KSAhPT0gJ251bWJlcicpIFxuICAgICAgICAgICAgZ3JvdXAubWF4ID0gZ3JvdXBNYXhlc1tnaWRdO1xuXG4gICAgICAgIGlmIChncm91cE1heGVzW2dpZF0gPj0gZG1pbiAmJiBncm91cE1pbnNbZ2lkXSA8PSBkbWF4KVxuICAgICAgICAgICAgZHJhd25Hcm91cGVkRmVhdHVyZXNbZ2lkXSA9IGdyb3VwZWRGZWF0dXJlc1tnaWRdO1xuICAgIH1cblxuICAgIHRpZXIudW5ncm91cGVkRmVhdHVyZXMgPSB1bmdyb3VwZWRGZWF0dXJlcztcbiAgICB0aWVyLmdyb3VwZWRGZWF0dXJlcyA9IGRyYXduR3JvdXBlZEZlYXR1cmVzO1xuICAgIHRpZXIuZ3JvdXBzID0gZ3JvdXBzO1xuICAgIHRpZXIuc3VwZXJHcm91cHMgPSBzdXBlckdyb3VwcztcbiAgICB0aWVyLmdyb3Vwc1RvU3VwZXJzID0gZ3JvdXBzVG9TdXBlcnM7XG5cbiAgICBpZiAobWluU2NvcmUpIHtcbiAgICAgICAgaWYgKG1pblNjb3JlID4gMCkge1xuICAgICAgICAgICAgbWluU2NvcmUgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKG1heFNjb3JlIDwgMCkge1xuICAgICAgICAgICAgbWF4U2NvcmUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRpZXIuY3VycmVudEZlYXR1cmVzTWluU2NvcmUgPSBtaW5TY29yZTtcbiAgICAgICAgdGllci5jdXJyZW50RmVhdHVyZXNNYXhTY29yZSA9IG1heFNjb3JlO1xuICAgIH1cbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBzb3J0RmVhdHVyZXM6IHNvcnRGZWF0dXJlc1xuICAgIH07XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gZ2x5cGhzLmpzOiBjb21wb25lbnRzIHdoaWNoIGtub3cgaG93IHRvIGRyYXcgdGhlbXNlbHZlc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHNwYW5zID0gcmVxdWlyZSgnLi9zcGFucycpO1xuICAgIHZhciB1bmlvbiA9IHNwYW5zLnVuaW9uO1xuICAgIHZhciBSYW5nZSA9IHNwYW5zLlJhbmdlO1xuXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBtYWtlRWxlbWVudE5TID0gdXRpbHMubWFrZUVsZW1lbnROUztcbiAgICB2YXIgQU1JTk9fQUNJRF9UUkFOU0xBVElPTiA9IHV0aWxzLkFNSU5PX0FDSURfVFJBTlNMQVRJT047XG5cbiAgICB2YXIgc3ZndSA9IHJlcXVpcmUoJy4vc3ZnLXV0aWxzJyk7XG4gICAgdmFyIE5TX1NWRyA9IHN2Z3UuTlNfU1ZHO1xuICAgIHZhciBOU19YTElOSyA9IHN2Z3UuTlNfWExJTks7XG4gICAgdmFyIFNWR1BhdGggPSBzdmd1LlNWR1BhdGg7XG59XG5cbmZ1bmN0aW9uIFBhdGhHbHlwaEJhc2Uoc3Ryb2tlLCBmaWxsKSB7XG4gICAgdGhpcy5fc3Ryb2tlID0gc3Ryb2tlO1xuICAgIHRoaXMuX2ZpbGwgPSBmaWxsO1xufVxuXG5QYXRoR2x5cGhCYXNlLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xuICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5kcmF3UGF0aChnKTtcblxuICAgIGlmICh0aGlzLl9maWxsKSB7XG4gICAgICAgIGcuZmlsbFN0eWxlID0gdGhpcy5fZmlsbDtcbiAgICAgICAgZy5maWxsKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9zdHJva2UpIHtcbiAgICAgICAgZy5zdHJva2VTdHlsZSA9IHRoaXMuX3N0cm9rZTtcbiAgICAgICAgZy5zdHJva2UoKTtcbiAgICB9XG59XG5cblBhdGhHbHlwaEJhc2UucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGcgPSBuZXcgU1ZHUGF0aCgpO1xuICAgIHRoaXMuZHJhd1BhdGgoZyk7XG4gICAgXG4gICAgcmV0dXJuIG1ha2VFbGVtZW50TlMoXG4gICAgICAgIE5TX1NWRywgJ3BhdGgnLFxuICAgICAgICBudWxsLFxuICAgICAgICB7ZDogZy50b1BhdGhEYXRhKCksXG4gICAgICAgICBmaWxsOiB0aGlzLl9maWxsIHx8ICdub25lJyxcbiAgICAgICAgIHN0cm9rZTogdGhpcy5fc3Ryb2tlIHx8ICdub25lJ30pO1xufVxuXG5QYXRoR2x5cGhCYXNlLnByb3RvdHlwZS5kcmF3UGF0aCA9IGZ1bmN0aW9uKGcpIHtcbiAgICB0aHJvdyAnZHJhd1BhdGggbWV0aG9kIG9uIFBhdGhHbHlwaEJhc2UgbXVzdCBiZSBvdmVycmlkZGVuJztcbn1cblxuZnVuY3Rpb24gQm94R2x5cGgoeCwgeSwgd2lkdGgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlLCBhbHBoYSwgcmFkaXVzKSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuZmlsbCA9IGZpbGw7XG4gICAgdGhpcy5zdHJva2UgPSBzdHJva2U7XG4gICAgdGhpcy5fYWxwaGEgPSBhbHBoYTtcbiAgICB0aGlzLl9yYWRpdXMgPSByYWRpdXMgfHwgMDtcbn1cblxuQm94R2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XG4gICAgdmFyIHIgPSB0aGlzLl9yYWRpdXM7XG5cbiAgICBpZiAociA+IDApIHtcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcbiAgICAgICAgZy5tb3ZlVG8odGhpcy54ICsgciwgdGhpcy55KTtcbiAgICAgICAgZy5saW5lVG8odGhpcy54ICsgdGhpcy5fd2lkdGggLSByLCB0aGlzLnkpO1xuICAgICAgICBnLmFyY1RvKHRoaXMueCArIHRoaXMuX3dpZHRoLCB0aGlzLnksIHRoaXMueCArIHRoaXMuX3dpZHRoLCB0aGlzLnkgKyByLCByKTtcbiAgICAgICAgZy5saW5lVG8odGhpcy54ICsgdGhpcy5fd2lkdGgsIHRoaXMueSArIHRoaXMuX2hlaWdodCAtIHIpO1xuICAgICAgICBnLmFyY1RvKHRoaXMueCArIHRoaXMuX3dpZHRoLCB0aGlzLnkgKyB0aGlzLl9oZWlnaHQsIHRoaXMueCArIHRoaXMuX3dpZHRoIC0gciwgdGhpcy55ICsgdGhpcy5faGVpZ2h0LCByKTtcbiAgICAgICAgZy5saW5lVG8odGhpcy54ICsgciwgdGhpcy55ICsgdGhpcy5faGVpZ2h0KTtcbiAgICAgICAgZy5hcmNUbyh0aGlzLngsIHRoaXMueSArIHRoaXMuX2hlaWdodCwgdGhpcy54LCB0aGlzLnkgKyB0aGlzLl9oZWlnaHQgLSByLCByKTtcbiAgICAgICAgZy5saW5lVG8odGhpcy54LCB0aGlzLnkgKyByKTtcbiAgICAgICAgZy5hcmNUbyh0aGlzLngsIHRoaXMueSwgdGhpcy54ICsgciwgdGhpcy55LCByKTtcbiAgICAgICAgZy5jbG9zZVBhdGgoKTtcblxuICAgICAgICBpZiAodGhpcy5fYWxwaGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgZy5zYXZlKCk7XG4gICAgICAgICAgICBnLmdsb2JhbEFscGhhID0gdGhpcy5fYWxwaGE7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmZpbGwpIHtcbiAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gdGhpcy5maWxsO1xuICAgICAgICAgICAgZy5maWxsKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3Ryb2tlKSB7XG4gICAgICAgICAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5zdHJva2U7XG4gICAgICAgICAgICBnLmxpbmVXaWR0aCA9IDAuNTtcbiAgICAgICAgICAgIGcuc3Ryb2tlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fYWxwaGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgZy5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5fYWxwaGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgZy5zYXZlKCk7XG4gICAgICAgICAgICBnLmdsb2JhbEFscGhhID0gdGhpcy5fYWxwaGE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5maWxsKSB7XG4gICAgICAgICAgICBnLmZpbGxTdHlsZSA9IHRoaXMuZmlsbDtcbiAgICAgICAgICAgIGcuZmlsbFJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMuX3dpZHRoLCB0aGlzLl9oZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3Ryb2tlKSB7XG4gICAgICAgICAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5zdHJva2U7XG4gICAgICAgICAgICBnLmxpbmVXaWR0aCA9IDAuNTtcbiAgICAgICAgICAgIGcuc3Ryb2tlUmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9hbHBoYSAhPSBudWxsKSB7XG4gICAgICAgICAgICBnLnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuQm94R2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHt4OiB0aGlzLngsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICB5OiB0aGlzLnksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5fd2lkdGgsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuX2hlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLnN0cm9rZSB8fCAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAwLjUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IHRoaXMuZmlsbCB8fCAnbm9uZSd9KTtcbiAgICBpZiAodGhpcy5fYWxwaGEgIT0gbnVsbCkge1xuICAgICAgICBzLnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsIHRoaXMuX2FscGhhKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcztcbn1cblxuQm94R2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLng7XG59XG5cbkJveEdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy54ICsgdGhpcy5fd2lkdGg7XG59XG5cbkJveEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy55ICsgdGhpcy5faGVpZ2h0O1xufVxuXG5cbmZ1bmN0aW9uIEdyb3VwR2x5cGgoZ2x5cGhzLCBjb25uZWN0b3IpIHtcbiAgICB0aGlzLmdseXBocyA9IGdseXBocztcbiAgICB0aGlzLmNvbm5lY3RvciA9IGNvbm5lY3RvcjtcbiAgICB0aGlzLmggPSBnbHlwaHNbMF0uaGVpZ2h0KCk7XG5cbiAgICB2YXIgY292TGlzdCA9IFtdO1xuICAgIGZvciAodmFyIGcgPSAwOyBnIDwgZ2x5cGhzLmxlbmd0aDsgKytnKSB7XG4gICAgICAgIHZhciBnZyA9IGdseXBoc1tnXTtcbiAgICAgICAgY292TGlzdC5wdXNoKG5ldyBSYW5nZShnZy5taW4oKSwgZ2cubWF4KCkpKTtcbiAgICAgICAgdGhpcy5oID0gTWF0aC5tYXgodGhpcy5oLCBnZy5oZWlnaHQoKSk7XG4gICAgfVxuICAgIHRoaXMuY292ZXJhZ2UgPSB1bmlvbihjb3ZMaXN0KTtcbn1cblxuR3JvdXBHbHlwaC5wcm90b3R5cGUuZHJhd0Nvbm5lY3RvcnMgPSBmdW5jdGlvbihnKSB7XG4gICAgdmFyIHJhbmdlcyA9IHRoaXMuY292ZXJhZ2UucmFuZ2VzKCk7XG4gICAgZm9yICh2YXIgciA9IDE7IHIgPCByYW5nZXMubGVuZ3RoOyArK3IpIHtcbiAgICAgICAgdmFyIGdsID0gcmFuZ2VzW3JdO1xuICAgICAgICB2YXIgbGFzdCA9IHJhbmdlc1tyIC0gMV07XG4gICAgICAgIGlmIChsYXN0ICYmIGdsLm1pbigpID4gbGFzdC5tYXgoKSkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gbGFzdC5tYXgoKTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBnbC5taW4oKTtcbiAgICAgICAgICAgIHZhciBtaWQgPSAoc3RhcnQrZW5kKS8yXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RvciA9PT0gJ2hhdCsnKSB7XG4gICAgICAgICAgICAgICAgZy5tb3ZlVG8oc3RhcnQsIHRoaXMuaC8yKTtcbiAgICAgICAgICAgICAgICBnLmxpbmVUbyhtaWQsIDApO1xuICAgICAgICAgICAgICAgIGcubGluZVRvKGVuZCwgdGhpcy5oLzIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbm5lY3RvciA9PT0gJ2hhdC0nKSB7XG4gICAgICAgICAgICAgICAgZy5tb3ZlVG8oc3RhcnQsIHRoaXMuaC8yKTtcbiAgICAgICAgICAgICAgICBnLmxpbmVUbyhtaWQsIHRoaXMuaCk7XG4gICAgICAgICAgICAgICAgZy5saW5lVG8oZW5kLCB0aGlzLmgvMik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29ubmVjdG9yID09PSAnY29sbGFwc2VkKycpIHtcbiAgICAgICAgICAgICAgICBnLm1vdmVUbyhzdGFydCwgdGhpcy5oLzIpO1xuICAgICAgICAgICAgICAgIGcubGluZVRvKGVuZCwgdGhpcy5oLzIpO1xuICAgICAgICAgICAgICAgIGlmIChlbmQgLSBzdGFydCA+IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgZy5tb3ZlVG8obWlkIC0gMiwgKHRoaXMuaC8yKSAtIDMpO1xuICAgICAgICAgICAgICAgICAgICBnLmxpbmVUbyhtaWQgKyAyLCB0aGlzLmgvMik7XG4gICAgICAgICAgICAgICAgICAgIGcubGluZVRvKG1pZCAtIDIsICh0aGlzLmgvMikgKyAzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29ubmVjdG9yID09PSAnY29sbGFwc2VkLScpIHtcbiAgICAgICAgICAgICAgICBnLm1vdmVUbyhzdGFydCwgdGhpcy5oLzIpO1xuICAgICAgICAgICAgICAgIGcubGluZVRvKGVuZCwgdGhpcy5oLzIpO1xuICAgICAgICAgICAgICAgIGlmIChlbmQgLSBzdGFydCA+IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgZy5tb3ZlVG8obWlkICsgMiwgKHRoaXMuaC8yKSAtIDMpO1xuICAgICAgICAgICAgICAgICAgICBnLmxpbmVUbyhtaWQgLSAyLCB0aGlzLmgvMik7XG4gICAgICAgICAgICAgICAgICAgIGcubGluZVRvKG1pZCArIDIsICh0aGlzLmgvMikgKyAzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGcubW92ZVRvKHN0YXJ0LCB0aGlzLmgvMik7XG4gICAgICAgICAgICAgICAgZy5saW5lVG8oZW5kLCB0aGlzLmgvMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGFzdCA9IGdsO1xuICAgIH1cbn1cblxuR3JvdXBHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcsIG9jKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdseXBocy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdseXBoc1tpXTtcbiAgICAgICAgZ2wuZHJhdyhnLCBvYyk7XG4gICAgfVxuXG4gICAgZy5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgZy5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmRyYXdDb25uZWN0b3JzKGcpO1xuICAgIGcuc3Ryb2tlKCk7XG59XG5cbkdyb3VwR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGcgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2cnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ2x5cGhzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGcuYXBwZW5kQ2hpbGQodGhpcy5nbHlwaHNbaV0udG9TVkcoKSk7XG4gICAgfVxuXG4gICAgdmFyIHAgPSBuZXcgU1ZHUGF0aCgpO1xuICAgIHRoaXMuZHJhd0Nvbm5lY3RvcnMocCk7XG5cbiAgICB2YXIgcGF0aERhdGEgPSBwLnRvUGF0aERhdGEoKTtcbiAgICBpZiAocGF0aERhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgcGF0aCA9IG1ha2VFbGVtZW50TlMoXG4gICAgICAgICAgICBOU19TVkcsICdwYXRoJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICB7ZDogcC50b1BhdGhEYXRhKCksXG4gICAgICAgICAgICAgZmlsbDogJ25vbmUnLFxuICAgICAgICAgICAgIHN0cm9rZTogJ2JsYWNrJyxcbiAgICAgICAgICAgICBzdHJva2VXaWR0aDogMC41fSk7XG4gICAgICAgIGcuYXBwZW5kQ2hpbGQocGF0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGc7XG59XG5cbkdyb3VwR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvdmVyYWdlLm1pbigpO1xufVxuXG5Hcm91cEdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb3ZlcmFnZS5tYXgoKTtcbn1cblxuR3JvdXBHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaDtcbn1cblxuXG5mdW5jdGlvbiBMaW5lR3JhcGhHbHlwaChwb2ludHMsIGNvbG9yLCBoZWlnaHQpIHtcbiAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0IHx8IDUwO1xufVxuXG5MaW5lR3JhcGhHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucG9pbnRzWzBdLng7XG4gICAgLy8gcmV0dXJuIHRoaXMucG9pbnRzWzBdO1xufTtcblxuTGluZUdyYXBoR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnBvaW50c1t0aGlzLnBvaW50cy5sZW5ndGggLSAxXS54O1xuICAgIC8vIHJldHVybiB0aGlzLnBvaW50c1t0aGlzLnBvaW50cy5sZW5ndGggLSAyXTtcbn07XG5cbkxpbmVHcmFwaEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xufVxuXG5MaW5lR3JhcGhHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcbiAgICBnLnNhdmUoKTtcbiAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjtcbiAgICBnLmxpbmVXaWR0aCA9IDI7XG4gICAgZy5iZWdpblBhdGgoKTtcbiAgICB0aGlzLnBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uKHAsIGkpIHtcbiAgICAgICAgaWYgKGkgPT09IDApXG4gICAgICAgICAgICBnLm1vdmVUbyhwLngsIHAueSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGcubGluZVRvKHAueCwgcC55KTtcbiAgICB9KTtcbiAgICBnLnN0cm9rZSgpO1xuICAgIGcucmVzdG9yZSgpO1xufVxuXG5MaW5lR3JhcGhHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcCA9IG5ldyBTVkdQYXRoKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgeCA9IHRoaXMucG9pbnRzW2ldLng7XG4gICAgICAgIHZhciB5ID0gdGhpcy5wb2ludHNbaV0ueTtcbiAgICAgICAgaWYgKGkgPT0gMCkge1xuICAgICAgICAgICAgcC5tb3ZlVG8oeCwgeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwLmxpbmVUbyh4LCB5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcbiAgICAgICAgTlNfU1ZHLCAncGF0aCcsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHtkOiBwLnRvUGF0aERhdGEoKSxcbiAgICAgICAgIGZpbGw6ICdub25lJyxcbiAgICAgICAgIHN0cm9rZTogdGhpcy5jb2xvcixcbiAgICAgICAgIHN0cm9rZVdpZHRoOiAnMnB4J30pO1xufVxuXG5mdW5jdGlvbiBMYWJlbGxlZEdseXBoKEdMT0JBTF9HQywgZ2x5cGgsIHRleHQsIHVubWVhc3VyZWQsIGFuY2hvciwgYWxpZ24sIGZvbnQpIHtcbiAgICB0aGlzLmdseXBoID0gZ2x5cGg7XG4gICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICB0aGlzLmFuY2hvciA9IGFuY2hvciB8fCAnbGVmdCc7XG4gICAgdGhpcy5hbGlnbiA9IGFsaWduIHx8ICdiZWxvdyc7XG4gICAgaWYgKGZvbnQpIHtcbiAgICAgICAgdGhpcy5mb250ID0gZm9udDtcbiAgICB9XG4gICAgaWYgKHRoaXMuZm9udCkge1xuICAgICAgICBHTE9CQUxfR0Muc2F2ZSgpO1xuICAgICAgICBHTE9CQUxfR0MuZm9udCA9IHRoaXMuZm9udDtcbiAgICB9XG4gICAgdmFyIG1ldHJpY3MgPSBHTE9CQUxfR0MubWVhc3VyZVRleHQodGV4dCk7XG4gICAgaWYgKHRoaXMuZm9udCkge1xuICAgICAgICBHTE9CQUxfR0MucmVzdG9yZSgpO1xuICAgIH1cbiAgICB0aGlzLnRleHRMZW4gPSBtZXRyaWNzLndpZHRoO1xuICAgIHRoaXMudGV4dEhlaWdodCA9IDU7XG4gICAgdGhpcy5idW1wID0gZ2x5cGguYnVtcDtcbiAgICB0aGlzLm1lYXN1cmVkID0gIXVubWVhc3VyZWQ7XG59XG5cbkxhYmVsbGVkR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNoaWxkID0gdGhpcy5nbHlwaC50b1NWRygpO1xuICAgIHZhciBvcHRzID0ge307XG4gICAgXG4gICAgaWYgKHRoaXMuYWxpZ24gPT0gJ2Fib3ZlJykge1xuICAgICAgICBjaGlsZCA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycsIGNoaWxkLCB7dHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgwLCBcIiArICh0aGlzLnRleHRIZWlnaHR8MCArIDIpICsgXCIpXCJ9KTtcbiAgICAgICAgb3B0cy55ID0gdGhpcy50ZXh0SGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdHMueSA9IHRoaXMuZ2x5cGguaGVpZ2h0KCkgKyAxNTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5mb250KSB7XG4gICAgICAgIG9wdHMuZm9udFNpemUgID0gNztcbiAgICB9XG5cbiAgICBpZiAoJ2NlbnRlcicgPT0gdGhpcy5hbmNob3IpIHtcbiAgICAgICAgb3B0cy54ID0gKHRoaXMuZ2x5cGgubWluKCkgKyB0aGlzLmdseXBoLm1heCgpIC0gdGhpcy50ZXh0TGVuKSAvIDI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb3B0cy54ID0gdGhpcy5nbHlwaC5taW4oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJyxcbiAgICAgICAgW2NoaWxkLFxuICAgICAgICAgbWFrZUVsZW1lbnROUyhOU19TVkcsICd0ZXh0JywgdGhpcy50ZXh0LCBvcHRzKV0pO1xufVxuXG5MYWJlbGxlZEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nbHlwaC5taW4oKTtcbn1cblxuTGFiZWxsZWRHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMubWVhc3VyZWQpXG4gICAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLmdseXBoLm1heCgpLCAoMS4wKnRoaXMuZ2x5cGgubWluKCkpICsgdGhpcy50ZXh0TGVuICsgMTApO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2x5cGgubWF4KCk7XG59XG5cbkxhYmVsbGVkR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoID0gdGhpcy5nbHlwaC5oZWlnaHQoKTtcbiAgICBpZiAodGhpcy5tZWFzdXJlZCkge1xuICAgICAgICBpZiAodGhpcy5hbGlnbiA9PSAnYWJvdmUnKSB7XG4gICAgICAgICAgICBoICs9IHRoaXMudGV4dEhlaWdodCArIDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoICs9IDIwO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoO1xufVxuXG5MYWJlbGxlZEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZywgb2MpIHtcbiAgICBpZiAodGhpcy5hbGlnbiA9PSAnYWJvdmUnKSB7XG4gICAgICAgIGcuc2F2ZSgpO1xuICAgICAgICBnLnRyYW5zbGF0ZSgwLCB0aGlzLnRleHRIZWlnaHQgKyAyKTtcbiAgICB9XG4gICAgdGhpcy5nbHlwaC5kcmF3KGcpO1xuICAgIGlmICh0aGlzLmFsaWduID09ICdhYm92ZScpIHtcbiAgICAgICAgZy5yZXN0b3JlKCk7XG4gICAgfVxuXG4gICAgb2MucmVnaXN0ZXJHbHlwaCh0aGlzKTtcbn1cblxuTGFiZWxsZWRHbHlwaC5wcm90b3R5cGUuZHJhd092ZXJsYXkgPSBmdW5jdGlvbihnLCBtaW5WaXNpYmxlLCBtYXhWaXNpYmxlKSB7XG4gICAgZy5maWxsU3R5bGUgPSAnYmxhY2snO1xuICAgIGlmICh0aGlzLmZvbnQpIHtcbiAgICAgICAgZy5zYXZlKCk7XG4gICAgICAgIGcuZm9udCA9IHRoaXMuZm9udDtcbiAgICB9XG4gICAgdmFyIHA7XG4gICAgaWYgKCdjZW50ZXInID09IHRoaXMuYW5jaG9yKSB7XG4gICAgICAgIHAgPSAodGhpcy5nbHlwaC5taW4oKSArIHRoaXMuZ2x5cGgubWF4KCkgLSB0aGlzLnRleHRMZW4pIC8gMjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwID0gdGhpcy5nbHlwaC5taW4oKTtcbiAgICAgICAgaWYgKHAgPCBtaW5WaXNpYmxlKSB7XG4gICAgICAgICAgICBwID0gTWF0aC5taW4obWluVmlzaWJsZSwgdGhpcy5nbHlwaC5tYXgoKSAtIHRoaXMudGV4dExlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZy5maWxsVGV4dCh0aGlzLnRleHQsIHAsIHRoaXMuYWxpZ24gPT0gJ2Fib3ZlJyA/IHRoaXMudGV4dEhlaWdodCA6IHRoaXMuZ2x5cGguaGVpZ2h0KCkgKyAxNSk7XG4gICAgaWYgKHRoaXMuZm9udCkge1xuICAgICAgICBnLnJlc3RvcmUoKTtcbiAgICB9XG59XG5cblxuXG5mdW5jdGlvbiBDcm9zc0dseXBoKHgsIGhlaWdodCwgc3Ryb2tlKSB7XG4gICAgdGhpcy5feCA9IHg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuX3N0cm9rZSA9IHN0cm9rZTtcbn1cblxuQ3Jvc3NHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcbiAgICBcbiAgICBnLmJlZ2luUGF0aCgpO1xuICAgIGcubW92ZVRvKHRoaXMuX3gsIDApO1xuICAgIGcubGluZVRvKHRoaXMuX3gsIHRoaXMuX2hlaWdodCk7XG4gICAgZy5tb3ZlVG8odGhpcy5feCAtIGhoLCBoaCk7XG4gICAgZy5saW5lVG8odGhpcy5feCArIGhoLCBoaCk7XG5cbiAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5fc3Ryb2tlO1xuICAgIGcubGluZVdpZHRoID0gMTtcblxuICAgIGcuc3Ryb2tlKCk7XG59XG5cbkNyb3NzR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhoID0gdGhpcy5faGVpZ2h0LzI7XG5cbiAgICB2YXIgZyA9IG5ldyBTVkdQYXRoKCk7XG4gICAgZy5tb3ZlVG8odGhpcy5feCwgMCk7XG4gICAgZy5saW5lVG8odGhpcy5feCwgdGhpcy5faGVpZ2h0KTtcbiAgICBnLm1vdmVUbyh0aGlzLl94IC0gaGgsIGhoKTtcbiAgICBnLmxpbmVUbyh0aGlzLl94ICsgaGgsIGhoKTtcbiAgICBcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcbiAgICAgICAgTlNfU1ZHLCAncGF0aCcsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHtkOiBnLnRvUGF0aERhdGEoKSxcbiAgICAgICAgIGZpbGw6ICdub25lJyxcbiAgICAgICAgIHN0cm9rZTogdGhpcy5fc3Ryb2tlLFxuICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxcHgnfSk7XG59XG5cbkNyb3NzR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94IC0gdGhpcy5faGVpZ2h0LzI7XG59XG5cbkNyb3NzR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94ICsgdGhpcy5faGVpZ2h0LzI7XG59XG5cbkNyb3NzR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG59XG5cbmZ1bmN0aW9uIEV4R2x5cGgoeCwgaGVpZ2h0LCBzdHJva2UpIHtcbiAgICB0aGlzLl94ID0geDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fc3Ryb2tlID0gc3Ryb2tlO1xufVxuXG5FeEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xuICAgIHZhciBoaCA9IHRoaXMuX2hlaWdodC8yO1xuICAgIFxuICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgZy5tb3ZlVG8odGhpcy5feCAtIGhoLCAwKTtcbiAgICBnLmxpbmVUbyh0aGlzLl94ICsgaGgsIHRoaXMuX2hlaWdodCk7XG4gICAgZy5tb3ZlVG8odGhpcy5feCAtIGhoLCB0aGlzLl9oZWlnaHQpO1xuICAgIGcubGluZVRvKHRoaXMuX3ggKyBoaCwgMCk7XG5cbiAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5fc3Ryb2tlO1xuICAgIGcubGluZVdpZHRoID0gMTtcblxuICAgIGcuc3Ryb2tlKCk7XG59XG5cbkV4R2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhoID0gdGhpcy5faGVpZ2h0LzI7XG5cbiAgICB2YXIgZyA9IG5ldyBTVkdQYXRoKCk7XG4gICAgZy5tb3ZlVG8odGhpcy5feCAtIGhoLCAwKTtcbiAgICBnLmxpbmVUbyh0aGlzLl94ICsgaGgsIHRoaXMuX2hlaWdodCk7XG4gICAgZy5tb3ZlVG8odGhpcy5feCAtIGhoLCB0aGlzLl9oZWlnaHQpO1xuICAgIGcubGluZVRvKHRoaXMuX3ggKyBoaCwgMCk7XG4gICAgXG4gICAgcmV0dXJuIG1ha2VFbGVtZW50TlMoXG4gICAgICAgIE5TX1NWRywgJ3BhdGgnLFxuICAgICAgICBudWxsLFxuICAgICAgICB7ZDogZy50b1BhdGhEYXRhKCksXG4gICAgICAgICBmaWxsOiAnbm9uZScsXG4gICAgICAgICBzdHJva2U6IHRoaXMuX3N0cm9rZSxcbiAgICAgICAgIHN0cm9rZVdpZHRoOiAnMXB4J30pO1xufVxuXG5FeEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5feCAtIHRoaXMuX2hlaWdodC8yO1xufVxuXG5FeEdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5feCArIHRoaXMuX2hlaWdodC8yO1xufVxuXG5FeEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xufVxuXG5cblxuZnVuY3Rpb24gVHJpYW5nbGVHbHlwaCh4LCBoZWlnaHQsIGRpciwgd2lkdGgsIGZpbGwsIHN0cm9rZSkge1xuICAgIFBhdGhHbHlwaEJhc2UuY2FsbCh0aGlzLCBzdHJva2UsIGZpbGwpO1xuXG4gICAgdGhpcy5feCA9IHg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuX2RpciA9IGRpcjtcbiAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xufVxuXG5UcmlhbmdsZUdseXBoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGF0aEdseXBoQmFzZS5wcm90b3R5cGUpO1xuXG5UcmlhbmdsZUdseXBoLnByb3RvdHlwZS5kcmF3UGF0aCA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcbiAgICB2YXIgaHcgPSB0aGlzLl93aWR0aC8yO1xuXG4gICAgaWYgKHRoaXMuX2RpciA9PT0gJ1MnKSB7XG4gICAgICAgIGcubW92ZVRvKHRoaXMuX3gsIHRoaXMuX2hlaWdodCk7XG4gICAgICAgIGcubGluZVRvKHRoaXMuX3ggLSBodywgMCk7XG4gICAgICAgIGcubGluZVRvKHRoaXMuX3ggKyBodywgMCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9kaXIgPT09ICdXJykge1xuICAgICAgICBnLm1vdmVUbyh0aGlzLl94ICsgaHcsIGhoKTtcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCAtIGh3LCAwKTtcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCAtIGh3LCB0aGlzLl9oZWlnaHQpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fZGlyID09PSAnRScpIHtcbiAgICAgICAgZy5tb3ZlVG8odGhpcy5feCAtIGh3LCBoaCk7XG4gICAgICAgIGcubGluZVRvKHRoaXMuX3ggKyBodywgMCk7XG4gICAgICAgIGcubGluZVRvKHRoaXMuX3ggKyBodywgdGhpcy5faGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBnLm1vdmVUbyh0aGlzLl94ICwgMCk7XG4gICAgICAgIGcubGluZVRvKHRoaXMuX3ggKyBodywgdGhpcy5faGVpZ2h0KTtcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCAtIGh3LCB0aGlzLl9oZWlnaHQpO1xuICAgIH1cblxuICAgIGcuY2xvc2VQYXRoKCk7XG59XG5cblRyaWFuZ2xlR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94IC0gdGhpcy5faGVpZ2h0LzI7XG59XG5cblRyaWFuZ2xlR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94ICsgdGhpcy5faGVpZ2h0LzI7XG59XG5cblRyaWFuZ2xlR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG59XG5cblxuXG5cbmZ1bmN0aW9uIERvdEdseXBoKHgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKSB7XG4gICAgdGhpcy5feCA9IHg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuX2ZpbGwgPSBmaWxsO1xuICAgIHRoaXMuX3N0cm9rZSA9IHN0cm9rZTtcbn1cblxuRG90R2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XG4gICAgdmFyIGhoID0gdGhpcy5faGVpZ2h0LzI7XG4gICAgZy5maWxsU3R5bGUgPSB0aGlzLl9zdHJva2U7XG4gICAgZy5iZWdpblBhdGgoKTtcbiAgICBnLmFyYyh0aGlzLl94LCBoaCwgaGgsIDAsIDYuMjkpO1xuXG4gICAgaWYgKHRoaXMuX2ZpbGwpIHtcbiAgICAgICAgZy5maWxsU3R5bGUgPSB0aGlzLl9maWxsO1xuICAgICAgICBnLmZpbGwoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc3Ryb2tlKSB7XG4gICAgICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLl9zdHJva2U7XG4gICAgICAgIGcuc3Ryb2tlKCk7XG4gICAgfVxufVxuXG5Eb3RHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcbiAgICAgICAgTlNfU1ZHLCAnY2lyY2xlJyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAge2N4OiB0aGlzLl94LCBjeTogaGgsIHI6IGhoLFxuICAgICAgICAgZmlsbDogdGhpcy5fZmlsbCB8fCAnbm9uZScsXG4gICAgICAgICBzdHJva2U6IHRoaXMuX3N0cm9rZSB8fCAnbm9uZScsXG4gICAgICAgICBzdHJva2VXaWR0aDogJzFweCd9KTtcbn1cblxuRG90R2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94IC0gdGhpcy5faGVpZ2h0LzI7XG59XG5cbkRvdEdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5feCArIHRoaXMuX2hlaWdodC8yO1xufVxuXG5Eb3RHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbn1cblxuXG5mdW5jdGlvbiBQYWRkZWRHbHlwaChnbHlwaCwgbWlucCwgbWF4cCkge1xuICAgIHRoaXMuZ2x5cGggPSBnbHlwaDtcbiAgICB0aGlzLl9taW4gPSBtaW5wO1xuICAgIHRoaXMuX21heCA9IG1heHA7XG4gICAgaWYgKGdseXBoKSB7XG4gICAgICAgIHRoaXMuYnVtcCA9IGdseXBoLmJ1bXA7XG4gICAgfVxufVxuXG5QYWRkZWRHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcsIG9jKSB7XG4gICAgaWYgKHRoaXMuZ2x5cGgpIFxuICAgICAgICB0aGlzLmdseXBoLmRyYXcoZywgb2MpO1xufVxuXG5QYWRkZWRHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5nbHlwaCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nbHlwaC50b1NWRygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2cnKTtcbiAgICB9XG59XG5cblBhZGRlZEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbWluO1xufVxuXG5QYWRkZWRHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX21heDtcbn1cblxuUGFkZGVkR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmdseXBoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdseXBoLmhlaWdodCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBBQXJyb3dHbHlwaChtaW4sIG1heCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UsIG9yaSkge1xuICAgIFBhdGhHbHlwaEJhc2UuY2FsbCh0aGlzLCBzdHJva2UsIGZpbGwpO1xuICAgIHRoaXMuX21pbiA9IG1pbjtcbiAgICB0aGlzLl9tYXggPSBtYXg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuX29yaSA9IG9yaTtcbn1cblxuQUFycm93R2x5cGgucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQYXRoR2x5cGhCYXNlLnByb3RvdHlwZSk7XG5cbkFBcnJvd0dseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbWluO1xufVxuXG5BQXJyb3dHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX21heDtcbn1cblxuQUFycm93R2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG59XG5cbkFBcnJvd0dseXBoLnByb3RvdHlwZS5kcmF3UGF0aCA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgbWF4UG9zID0gdGhpcy5fbWF4O1xuICAgIHZhciBtaW5Qb3MgPSB0aGlzLl9taW47XG4gICAgdmFyIGhlaWdodCA9IHRoaXMuX2hlaWdodDtcbiAgICB2YXIgbEluc2V0ID0gMDtcbiAgICB2YXIgckluc2V0ID0gMDtcbiAgICB2YXIgbWluTGVuZ3RoID0gdGhpcy5faGVpZ2h0ICsgMjtcbiAgICB2YXIgaW5zdGVwID0gMC4zMzMzMzMgKiB0aGlzLl9oZWlnaHQ7XG4gICAgdmFyIHkgPSAwO1xuXG4gICAgaWYgKHRoaXMuX29yaSkge1xuICAgICAgICBpZiAodGhpcy5fb3JpID09PSAnKycpIHtcbiAgICAgICAgICAgIHJJbnNldCA9IDAuNSAqIHRoaXMuX2hlaWdodDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9vcmkgPT09ICctJykge1xuICAgICAgICAgICAgbEluc2V0ID0gMC41ICogdGhpcy5faGVpZ2h0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1heFBvcyAtIG1pblBvcyA8IG1pbkxlbmd0aCkge1xuICAgICAgICBtaW5Qb3MgPSAobWF4UG9zICsgbWluUG9zIC0gbWluTGVuZ3RoKSAvIDI7XG4gICAgICAgIG1heFBvcyA9IG1pblBvcyArIG1pbkxlbmd0aDtcbiAgICB9XG5cbiAgICBnLm1vdmVUbyhtaW5Qb3MgKyBsSW5zZXQsIHkraW5zdGVwKTtcbiAgICBnLmxpbmVUbyhtYXhQb3MgLSBySW5zZXQsIHkraW5zdGVwKTtcbiAgICBnLmxpbmVUbyhtYXhQb3MgLSBySW5zZXQsIHkpO1xuICAgIGcubGluZVRvKG1heFBvcywgeSArIHRoaXMuX2hlaWdodC8yKTtcbiAgICBnLmxpbmVUbyhtYXhQb3MgLSBySW5zZXQsIHkraGVpZ2h0KTtcbiAgICBnLmxpbmVUbyhtYXhQb3MgLSBySW5zZXQsIHkraW5zdGVwK2luc3RlcCk7XG4gICAgZy5saW5lVG8obWluUG9zICsgbEluc2V0LCB5K2luc3RlcCtpbnN0ZXApO1xuICAgIGcubGluZVRvKG1pblBvcyArIGxJbnNldCwgeStoZWlnaHQpO1xuICAgIGcubGluZVRvKG1pblBvcywgeStoZWlnaHQvMik7XG4gICAgZy5saW5lVG8obWluUG9zICsgbEluc2V0LCB5KTtcbiAgICBnLmxpbmVUbyhtaW5Qb3MgKyBsSW5zZXQsIHkraW5zdGVwKTtcbn1cblxuZnVuY3Rpb24gU3BhbkdseXBoKG1pbiwgbWF4LCBoZWlnaHQsIHN0cm9rZSkge1xuICAgIFBhdGhHbHlwaEJhc2UuY2FsbCh0aGlzLCBzdHJva2UsIG51bGwpO1xuICAgIHRoaXMuX21pbiA9IG1pbjtcbiAgICB0aGlzLl9tYXggPSBtYXg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xufVxuXG5TcGFuR2x5cGgucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQYXRoR2x5cGhCYXNlLnByb3RvdHlwZSk7XG5cblNwYW5HbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21pbn07XG5TcGFuR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9tYXh9O1xuU3BhbkdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5faGVpZ2h0fTtcblxuU3BhbkdseXBoLnByb3RvdHlwZS5kcmF3UGF0aCA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgbWluUG9zID0gdGhpcy5fbWluLCBtYXhQb3MgPSB0aGlzLl9tYXg7XG4gICAgdmFyIGhlaWdodCA9IHRoaXMuX2hlaWdodCwgaGggPSBoZWlnaHQvMjtcbiAgICBnLm1vdmVUbyhtaW5Qb3MsIGhoKTtcbiAgICBnLmxpbmVUbyhtYXhQb3MsIGhoKTtcbiAgICBnLm1vdmVUbyhtaW5Qb3MsIDApO1xuICAgIGcubGluZVRvKG1pblBvcywgaGVpZ2h0KTtcbiAgICBnLm1vdmVUbyhtYXhQb3MsIDApO1xuICAgIGcubGluZVRvKG1heFBvcywgaGVpZ2h0KTtcbn1cblxuZnVuY3Rpb24gTGluZUdseXBoKG1pbiwgbWF4LCBoZWlnaHQsIHN0eWxlLCBzdHJhbmQsIHN0cm9rZSkge1xuICAgIHRoaXMuX21pbiA9IG1pbjtcbiAgICB0aGlzLl9tYXggPSBtYXg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuX3N0eWxlID0gc3R5bGU7XG4gICAgdGhpcy5fc3RyYW5kID0gc3RyYW5kO1xuICAgIHRoaXMuX3N0cm9rZSA9IHN0cm9rZTtcbn1cblxuTGluZUdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWlufTtcbkxpbmVHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21heH07XG5MaW5lR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9oZWlnaHR9O1xuXG5MaW5lR2x5cGgucHJvdG90eXBlLmRyYXdQYXRoID0gZnVuY3Rpb24oZykge1xuICAgIHZhciBtaW5Qb3MgPSB0aGlzLl9taW4sIG1heFBvcyA9IHRoaXMuX21heDtcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5faGVpZ2h0LCBoaCA9IGhlaWdodC8yO1xuXG4gICAgaWYgKHRoaXMuX3N0eWxlID09PSAnaGF0Jykge1xuICAgICAgICBnLm1vdmVUbyhtaW5Qb3MsIGhoKTtcbiAgICAgICAgZy5saW5lVG8oKG1pblBvcyArIG1heFBvcykvMiwgdGhpcy5fc3RyYW5kID09PSAnLScgPyBoZWlnaHQgOiAwKTtcbiAgICAgICAgZy5saW5lVG8obWF4UG9zLCBoaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZy5tb3ZlVG8obWluUG9zLCBoaCk7XG4gICAgICAgIGcubGluZVRvKG1heFBvcywgaGgpO1xuICAgIH1cbn1cblxuXG5MaW5lR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XG4gICAgZy5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmRyYXdQYXRoKGcpO1xuICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLl9zdHJva2U7XG4gICAgaWYgKHRoaXMuX3N0eWxlID09PSAnZGFzaGVkJyAmJiBnLnNldExpbmVEYXNoKSB7XG4gICAgICAgIGcuc2F2ZSgpO1xuICAgICAgICBnLnNldExpbmVEYXNoKFszXSk7XG4gICAgICAgIGcuc3Ryb2tlKCk7XG4gICAgICAgIGcucmVzdG9yZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGcuc3Ryb2tlKCk7XG4gICAgfVxufVxuXG5MaW5lR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGcgPSBuZXcgU1ZHUGF0aCgpO1xuICAgIHRoaXMuZHJhd1BhdGgoZyk7XG4gICAgXG4gICAgdmFyIG9wdHMgPSB7ZDogZy50b1BhdGhEYXRhKCksXG4gICAgICAgICAgICBzdHJva2U6IHRoaXMuX3N0cm9rZSB8fCAnbm9uZSd9O1xuICAgIGlmICh0aGlzLl9zdHlsZSA9PT0gJ2Rhc2hlZCcpIHtcbiAgICAgICAgb3B0c1snc3Ryb2tlRGFzaGFycmF5J10gPSAnMyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1ha2VFbGVtZW50TlMoXG4gICAgICAgIE5TX1NWRywgJ3BhdGgnLFxuICAgICAgICBudWxsLCBvcHRzXG4gICAgKTtcbn1cblxuXG5cblxuXG5mdW5jdGlvbiBQcmltZXJzR2x5cGgobWluLCBtYXgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKSB7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fZmlsbCA9IGZpbGw7XG4gICAgdGhpcy5fc3Ryb2tlID0gc3Ryb2tlO1xufVxuXG5QcmltZXJzR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9taW59O1xuUHJpbWVyc0dseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWF4fTtcblByaW1lcnNHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX2hlaWdodH07XG5cblxuUHJpbWVyc0dseXBoLnByb3RvdHlwZS5kcmF3U3RlbVBhdGggPSBmdW5jdGlvbihnKSB7XG4gICAgdmFyIG1pblBvcyA9IHRoaXMuX21pbiwgbWF4UG9zID0gdGhpcy5fbWF4O1xuICAgIHZhciBoZWlnaHQgPSB0aGlzLl9oZWlnaHQsIGhoID0gaGVpZ2h0LzI7XG4gICAgZy5tb3ZlVG8obWluUG9zLCBoaCk7XG4gICAgZy5saW5lVG8obWF4UG9zLCBoaCk7XG59XG5cblByaW1lcnNHbHlwaC5wcm90b3R5cGUuZHJhd1RyaWdzUGF0aCA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgbWluUG9zID0gdGhpcy5fbWluLCBtYXhQb3MgPSB0aGlzLl9tYXg7XG4gICAgdmFyIGhlaWdodCA9IHRoaXMuX2hlaWdodCwgaGggPSBoZWlnaHQvMjtcbiAgICBnLm1vdmVUbyhtaW5Qb3MsIDApO1xuICAgIGcubGluZVRvKG1pblBvcyArIGhlaWdodCwgaGgpO1xuICAgIGcubGluZVRvKG1pblBvcywgaGVpZ2h0KTtcbiAgICBnLmxpbmVUbyhtaW5Qb3MsIDApO1xuICAgIGcubW92ZVRvKG1heFBvcywgMCk7XG4gICAgZy5saW5lVG8obWF4UG9zIC0gaGVpZ2h0LCBoaCk7XG4gICAgZy5saW5lVG8obWF4UG9zLCBoZWlnaHQpO1xuICAgIGcubGluZVRvKG1heFBvcywgMCk7XG59XG5cblxuUHJpbWVyc0dseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xuICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5kcmF3U3RlbVBhdGgoZyk7XG4gICAgZy5zdHJva2VTdHlsZSA9IHRoaXMuX3N0cm9rZTtcbiAgICBnLnN0cm9rZSgpO1xuICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5kcmF3VHJpZ3NQYXRoKGcpO1xuICAgIGcuZmlsbFN0eWxlID0gdGhpcy5fZmlsbDtcbiAgICBnLmZpbGwoKTtcbn1cblxuUHJpbWVyc0dseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzID0gbmV3IFNWR1BhdGgoKTtcbiAgICB0aGlzLmRyYXdTdGVtUGF0aChzKTtcbiAgICB2YXIgdCA9IG5ldyBTVkdQYXRoKCk7XG4gICAgdGhpcy5kcmF3VHJpZ3NQYXRoKHQpO1xuICAgIFxuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKFxuICAgICAgICBOU19TVkcsICdnJyxcbiAgICAgICAgW21ha2VFbGVtZW50TlMoXG4gICAgICAgICAgICBOU19TVkcsICdwYXRoJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICB7ZDogcy50b1BhdGhEYXRhKCksXG4gICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLl9zdHJva2UgfHwgJ25vbmUnfSksXG4gICAgICAgICBtYWtlRWxlbWVudE5TKFxuICAgICAgICAgICAgIE5TX1NWRywgJ3BhdGgnLFxuICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAge2Q6IHQudG9QYXRoRGF0YSgpLFxuICAgICAgICAgICAgICBmaWxsOiB0aGlzLl9maWxsIHx8ICdub25lJ30pXSk7XG59XG5cbmZ1bmN0aW9uIEFycm93R2x5cGgobWluLCBtYXgsIGhlaWdodCwgY29sb3IsIHBhcmFsbGVsLCBzdywgbmUpIHtcbiAgICBQYXRoR2x5cGhCYXNlLmNhbGwodGhpcywgbnVsbCwgY29sb3IpO1xuICAgIHRoaXMuX21pbiA9IG1pbjtcbiAgICB0aGlzLl9tYXggPSBtYXg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuX2NvbG9yID0gY29sb3I7XG4gICAgdGhpcy5fcGFyYWxsZWwgPSBwYXJhbGxlbDtcbiAgICB0aGlzLl9zdyA9IHN3O1xuICAgIHRoaXMuX25lID0gbmU7XG59XG5cbkFycm93R2x5cGgucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQYXRoR2x5cGhCYXNlLnByb3RvdHlwZSk7XG5cbkFycm93R2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9taW59O1xuQXJyb3dHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21heH07XG5BcnJvd0dseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5faGVpZ2h0fTtcblxuQXJyb3dHbHlwaC5wcm90b3R5cGUuZHJhd1BhdGggPSBmdW5jdGlvbihnKSB7XG4gICAgdmFyIG1pbiA9IHRoaXMuX21pbiwgbWF4ID0gdGhpcy5fbWF4LCBoZWlnaHQgPSB0aGlzLl9oZWlnaHQ7XG4gICAgXG4gICAgaWYgKHRoaXMuX3BhcmFsbGVsKSB7XG4gICAgICAgIHZhciBoaCA9IGhlaWdodC8yO1xuICAgICAgICB2YXIgaW5zdGVwID0gMC40ICogaGVpZ2h0O1xuICAgICAgICBpZiAodGhpcy5fc3cpIHtcbiAgICAgICAgICAgIGcubW92ZVRvKG1pbiArIGhoLCBoZWlnaHQtaW5zdGVwKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1pbiArIGhoLCBoZWlnaHQpO1xuICAgICAgICAgICAgZy5saW5lVG8obWluLCBoaCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtaW4gKyBoaCwgMCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtaW4gKyBoaCwgaW5zdGVwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGcubW92ZVRvKG1pbiwgaGVpZ2h0LWluc3RlcCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtaW4sIGluc3RlcCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX25lKSB7XG4gICAgICAgICAgICBnLmxpbmVUbyhtYXggLSBoaCwgaW5zdGVwKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1heCAtIGhoLCAwKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1heCwgaGgpO1xuICAgICAgICAgICAgZy5saW5lVG8obWF4IC0gaGgsIGhlaWdodCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtYXggLSBoaCwgaGVpZ2h0IC0gaW5zdGVwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGcubGluZVRvKG1heCwgaW5zdGVwKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1heCwgaGVpZ2h0LWluc3RlcCk7XG4gICAgICAgIH1cbiAgICAgICAgZy5jbG9zZVBhdGgoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbWlkID0gKG1pbittYXgpLzI7XG4gICAgICAgIHZhciBpbnN0ZXAgPSAwLjQqKG1heC1taW4pO1xuICAgICAgICB2YXIgdGggPSBoZWlnaHQvMztcblxuICAgICAgICBpZiAodGhpcy5fbmUpIHtcbiAgICAgICAgICAgIGcubW92ZVRvKG1pbiArIGluc3RlcCwgdGgpO1xuICAgICAgICAgICAgZy5saW5lVG8obWluLCB0aCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtaWQsIDApO1xuICAgICAgICAgICAgZy5saW5lVG8obWF4LCB0aCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtYXggLSBpbnN0ZXAsIHRoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGcubW92ZVRvKG1pbitpbnN0ZXAsIDApO1xuICAgICAgICAgICAgZy5saW5lVG8obWF4LWluc3RlcCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3N3KSB7XG4gICAgICAgICAgICBnLmxpbmVUbyhtYXggLSBpbnN0ZXAsIGhlaWdodC10aCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtYXgsIGhlaWdodC10aCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtaWQsIGhlaWdodCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtaW4sIGhlaWdodC10aClcbiAgICAgICAgICAgIGcubGluZVRvKG1pbiArIGluc3RlcCwgaGVpZ2h0LXRoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGcubGluZVRvKG1heCAtIGluc3RlcCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGcubGluZVRvKG1pbiArIGluc3RlcCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBnLmNsb3NlUGF0aCgpO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBUb29NYW55R2x5cGgobWluLCBtYXgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKSB7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fZmlsbCA9IGZpbGw7XG4gICAgdGhpcy5fc3Ryb2tlID0gc3Ryb2tlO1xufVxuXG5Ub29NYW55R2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9taW59O1xuVG9vTWFueUdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWF4fTtcblRvb01hbnlHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX2hlaWdodH07XG5cblRvb01hbnlHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhOU19TVkcsICdyZWN0JywgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICB7eDogdGhpcy5fbWluLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeTogMCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLl9tYXggLSB0aGlzLl9taW4sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuX2hlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLl9zdHJva2UgfHwgJ25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiB0aGlzLl9maWxsIHx8ICdub25lJ30pO1xufVxuXG5Ub29NYW55R2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XG4gICAgaWYgKHRoaXMuX2ZpbGwpIHtcbiAgICAgICAgZy5maWxsU3R5bGUgPSB0aGlzLl9maWxsO1xuICAgICAgICBnLmZpbGxSZWN0KHRoaXMuX21pbiwgMCwgdGhpcy5fbWF4IC0gdGhpcy5fbWluLCB0aGlzLl9oZWlnaHQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3Ryb2tlKSB7XG4gICAgICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLl9zdHJva2U7XG4gICAgICAgIGcuc3Ryb2tlUmVjdCh0aGlzLl9taW4sIDAsIHRoaXMuX21heCAtIHRoaXMuX21pbiwgdGhpcy5faGVpZ2h0KTtcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcbiAgICAgICAgZm9yICh2YXIgbiA9IDI7IG4gPCB0aGlzLl9oZWlnaHQ7IG4gKz0gMykge1xuICAgICAgICAgICAgZy5tb3ZlVG8odGhpcy5fbWluLCBuKTtcbiAgICAgICAgICAgIGcubGluZVRvKHRoaXMuX21heCwgbik7XG4gICAgICAgIH1cbiAgICAgICAgZy5zdHJva2UoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFRleHRHbHlwaChHTE9CQUxfR0MsIG1pbiwgbWF4LCBoZWlnaHQsIGZpbGwsIHN0cmluZykge1xuICAgIHRoaXMuX21pbiA9IG1pbjtcbiAgICB0aGlzLl9tYXggPSBtYXg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuX2ZpbGwgPSBmaWxsO1xuICAgIHRoaXMuX3N0cmluZyA9IHN0cmluZztcbiAgICB0aGlzLl90ZXh0TGVuID0gR0xPQkFMX0dDLm1lYXN1cmVUZXh0KHN0cmluZykud2lkdGg7XG59XG5cblRleHRHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21pbn07XG5UZXh0R2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge3JldHVybiBNYXRoLm1heCh0aGlzLl9tYXgsIHRoaXMuX21pbiArIHRoaXMuX3RleHRMZW4pfTtcblRleHRHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX2hlaWdodH07XG5cblRleHRHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcbiAgICBnLmZpbGxTdHlsZSA9IHRoaXMuX2ZpbGw7XG4gICAgZy5maWxsVGV4dCh0aGlzLl9zdHJpbmcsIHRoaXMuX21pbiwgdGhpcy5faGVpZ2h0IC0gNCk7XG59XG5cblRleHRHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhOU19TVkcsICd0ZXh0JywgdGhpcy5fc3RyaW5nLCB7eDogdGhpcy5fbWluLCB5OiB0aGlzLl9oZWlnaHQgLSA0fSk7XG59O1xuXG5mdW5jdGlvbiBhbWlub1RpbGVDb2xvcihhYSwgc3RhcnQsIGNvbG9yKSB7XG4gICAgdmFyIEFMVEVSTkFURV9DT0xPUiA9IHtcbiAgICAgICAgJ3JlZCc6ICdkYXJrcmVkJyxcbiAgICAgICAgJ3B1cnBsZSc6ICdtZWRpdW1wdXJwbGUnLFxuICAgICAgICAnYmx1ZSc6ICdkYXJrYmx1ZScsXG4gICAgICAgICdncmVlbic6ICdkYXJrZ3JlZW4nXG4gICAgfTtcbiAgICB2YXIgY29sb3IyID0gQUxURVJOQVRFX0NPTE9SW2NvbG9yLnRvTG93ZXJDYXNlKCldO1xuICAgIHZhciB0aWxlQ29sb3JzO1xuICAgIGlmICghY29sb3IyKVxuICAgICAgICB0aWxlQ29sb3JzID0gWydyZ2IoNzMsIDY4LCAxNDkpJywgJ3JnYig5LCAwLCAxMDMpJ107XG4gICAgICAgIC8vIGRlZmF1bHQgdG8gVUNTQyBjb2xvcnNcbiAgICBlbHNlXG4gICAgICAgIHRpbGVDb2xvcnMgPSBbY29sb3IsIGNvbG9yMl07XG5cbiAgICBpZiAoYWEgPT0gJz8nKVxuICAgICAgICByZXR1cm4gJ2JsYWNrJztcbiAgICBlbHNlIGlmIChhYSA9PSAnTScpXG4gICAgICAgIHJldHVybiAnZ3JlZW55ZWxsb3cnO1xuICAgIGVsc2UgaWYgKGFhID09ICcqJylcbiAgICAgICAgcmV0dXJuICdjcmltc29uJztcbiAgICBlbHNlXG4gICAgICAgIHJldHVybiB0aWxlQ29sb3JzW3N0YXJ0ICUgMl07XG59XG5cbmZ1bmN0aW9uIHJldmVyc2VDb21wbGVtZW50KHNlcXVlbmNlKSB7XG4gICAgdmFyIHNlcV9kaWN0ID0geydBJzogJ1QnLCAnVCc6ICdBJywgJ0cnOiAnQycsICdDJzogJ0cnfTtcbiAgICB2YXIgcmV2X3NlcSA9IHNlcXVlbmNlLnNwbGl0KCcnKS5yZXZlcnNlKCkuam9pbignJyk7XG4gICAgdmFyIHJldl9jb21wbF9zZXEgPSBbXTtcbiAgICBmb3IgKHZhciBiID0gMDsgYiA8IHJldl9zZXEubGVuZ3RoOyArK2IpIHtcbiAgICAgICAgdmFyIGJhc2UgPSByZXZfc2VxLnN1YnN0cihiLCAxKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICByZXZfY29tcGxfc2VxLnB1c2goYmFzZSBpbiBzZXFfZGljdCA/IHNlcV9kaWN0W2Jhc2VdIDogJ04nKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldl9jb21wbF9zZXEuam9pbignJyk7XG59XG5cbmZ1bmN0aW9uIEFtaW5vQWNpZEdseXBoKG1pbiwgbWF4LCBoZWlnaHQsIGZpbGwsIHNlcSwgb3JpZW50YXRpb24sIHJlYWRmcmFtZSkge1xuICAgIHRoaXMuX21pbiA9IG1pbjtcbiAgICB0aGlzLl9tYXggPSBtYXg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuX2ZpbGwgPSBmaWxsO1xuICAgIHRoaXMuX3NlcSA9IHNlcTtcbiAgICB0aGlzLl9vcmllbnRhdGlvbiA9IG9yaWVudGF0aW9uO1xuICAgIHRoaXMuX3JlYWRmcmFtZSA9IHJlYWRmcmFtZTtcbn1cblxuQW1pbm9BY2lkR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9taW59O1xuQW1pbm9BY2lkR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9tYXh9O1xuQW1pbm9BY2lkR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9oZWlnaHR9O1xuXG5BbWlub0FjaWRHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGdjKSB7XG4gICAgdmFyIHNlcSA9IHRoaXMuX3NlcTtcbiAgICB2YXIgY29sb3IgPSB0aGlzLl9maWxsO1xuXG4gICAgaWYgKCFzZXEpIHJldHVybjtcblxuICAgIHZhciBzY2FsZSA9ICh0aGlzLl9tYXggLSB0aGlzLl9taW4gKyAxKSAvIHNlcS5sZW5ndGg7XG5cbiAgICB2YXIgcHJldk92ZXJoYW5nID0gKDMgLSB0aGlzLl9yZWFkZnJhbWUpICUgMztcbiAgICB2YXIgbmV4dE92ZXJoYW5nID0gKHNlcS5sZW5ndGggLSBwcmV2T3ZlcmhhbmcpICUgMztcbiAgICB2YXIgbGVmdE92ZXJoYW5nID0gdGhpcy5fb3JpZW50YXRpb24gPT0gJysnID8gcHJldk92ZXJoYW5nIDogbmV4dE92ZXJoYW5nO1xuICAgIFxuICAgIGlmIChsZWZ0T3ZlcmhhbmcgPiAwKSB7XG4gICAgICAgIGdjLmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICBnYy5maWxsUmVjdCh0aGlzLl9taW4sIDAsIHNjYWxlICogbGVmdE92ZXJoYW5nLCB0aGlzLl9oZWlnaHQpO1xuICAgIH1cblxuICAgIGZvciAodmFyIHAgPSBsZWZ0T3Zlcmhhbmc7IHAgPCBzZXEubGVuZ3RoOyBwICs9IDMpIHtcbiAgICAgICAgdmFyIGNvZG9uID0gc2VxLnN1YnN0cihwLCAzKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAodGhpcy5fb3JpZW50YXRpb24gPT0gJy0nKVxuICAgICAgICAgICAgY29kb24gPSByZXZlcnNlQ29tcGxlbWVudChjb2Rvbik7XG4gICAgICAgIHZhciBhYSA9IGNvZG9uIGluIEFNSU5PX0FDSURfVFJBTlNMQVRJT04gPyBBTUlOT19BQ0lEX1RSQU5TTEFUSU9OW2NvZG9uXSA6ICc/JztcbiAgICAgICAgY29sb3IgPSBjb2Rvbi5sZW5ndGggPT0gMyA/IGFtaW5vVGlsZUNvbG9yKGFhLCBwLCB0aGlzLl9maWxsKSA6IHRoaXMuX2ZpbGw7XG4gICAgICAgIGdjLmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICBnYy5maWxsUmVjdCh0aGlzLl9taW4gKyBwICogc2NhbGUsIDAsIHNjYWxlICogY29kb24ubGVuZ3RoLCB0aGlzLl9oZWlnaHQpO1xuXG4gICAgICAgIGlmIChzY2FsZSA+PSA4ICYmIGNvZG9uLmxlbmd0aCA9PSAzKSB7XG4gICAgICAgICAgICBnYy5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICAgICAgZ2MuZmlsbFRleHQoYWEsIHRoaXMuX21pbiArIChwKzEpICogc2NhbGUsIHRoaXMuX2hlaWdodCk7XG4gICAgICAgIH0gXG4gICAgfVxufVxuXG5BbWlub0FjaWRHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZyA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycpO1xuICAgIHZhciBzZXEgPSB0aGlzLl9zZXE7XG4gICAgdmFyIGNvbG9yID0gdGhpcy5fZmlsbDtcblxuICAgIGlmICghc2VxKVxuICAgICAgICByZXR1cm4gZztcblxuICAgIHZhciBzY2FsZSA9ICh0aGlzLl9tYXggLSB0aGlzLl9taW4gKyAxKSAvIHNlcS5sZW5ndGg7XG5cbiAgICB2YXIgcHJldk92ZXJoYW5nID0gKDMgLSB0aGlzLl9yZWFkZnJhbWUpICUgMztcbiAgICB2YXIgbmV4dE92ZXJoYW5nID0gKHNlcS5sZW5ndGggLSBwcmV2T3ZlcmhhbmcpICUgMztcbiAgICB2YXIgbGVmdE92ZXJoYW5nID0gdGhpcy5fb3JpZW50YXRpb24gPT0gJysnID8gcHJldk92ZXJoYW5nIDogbmV4dE92ZXJoYW5nO1xuXG4gICAgaWYgKGxlZnRPdmVyaGFuZyA+IDApIHtcbiAgICAgICAgZy5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAncmVjdCcsIG51bGwsIHtcbiAgICAgICAgICAgICAgICB4OiB0aGlzLl9taW4sXG4gICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICB3aWR0aDogc2NhbGUgKiBsZWZ0T3ZlcmhhbmcsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLl9oZWlnaHQsXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3J9KSk7XG4gICAgfVxuICAgIGZvciAodmFyIHAgPSBsZWZ0T3Zlcmhhbmc7IHAgPCBzZXEubGVuZ3RoOyBwICs9IDMpIHtcbiAgICAgICAgdmFyIGNvZG9uID0gc2VxLnN1YnN0cihwLCAzKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAodGhpcy5fb3JpZW50YXRpb24gPT0gJy0nKVxuICAgICAgICAgICAgY29kb24gPSByZXZlcnNlQ29tcGxlbWVudChjb2Rvbik7XG4gICAgICAgIHZhciBhYSA9IGNvZG9uIGluIEFNSU5PX0FDSURfVFJBTlNMQVRJT04gPyBBTUlOT19BQ0lEX1RSQU5TTEFUSU9OW2NvZG9uXSA6ICc/JztcbiAgICAgICAgY29sb3IgPSBjb2Rvbi5sZW5ndGggPT0gMyA/IGFtaW5vVGlsZUNvbG9yKGFhLCBwLCB0aGlzLl9maWxsKSA6IHRoaXMuX2ZpbGw7XG4gICAgICAgIGcuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLCB7XG4gICAgICAgICAgICAgICAgeDogdGhpcy5fbWluICsgcCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHNjYWxlICogY29kb24ubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5faGVpZ2h0LFxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yfSkpO1xuXG4gICAgICAgIGlmIChzY2FsZSA+PSA4ICYmIGNvZG9uLmxlbmd0aCA9PSAzKSB7XG4gICAgICAgICAgICBnLmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAndGV4dCcsIGFhLCB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHRoaXMuX21pbiArIChwKzEpICogc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIHk6IHRoaXMuX2hlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJ3doaXRlJ30pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZztcbn07XG5cbnZhciBpc1JldGluYSA9IHR5cGVvZih3aW5kb3cpICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDE7XG52YXIgX19kYWxsaWFuY2VfU2VxdWVuY2VHbHlwaENhY2hlID0ge307XG52YXIgYWx0UGF0dGVybiA9IG5ldyBSZWdFeHAoJ15bQUNHVC1dJCcpO1xudmFyIGlzQ2xvc2VVcCA9IGZ1bmN0aW9uKHNjYWxlKSB7XG4gICAgcmV0dXJuIHNjYWxlID49IDg7XG59XG5cbmZ1bmN0aW9uIFNlcXVlbmNlR2x5cGgoYmFzZUNvbG9ycywgc3RyYW5kQ29sb3IsIG1pbiwgbWF4LCBoZWlnaHQsIHNlcSwgcmVmLCBzY2hlbWUsIHF1YWxzLCBmaWxsYmcsIHNjYWxlVmVydGljYWwpIHtcbiAgICB0aGlzLmJhc2VDb2xvcnMgPSBiYXNlQ29sb3JzO1xuICAgIHRoaXMuX3N0cmFuZENvbG9yID0gc3RyYW5kQ29sb3I7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fc2VxID0gc2VxO1xuICAgIHRoaXMuX3JlZiA9IHJlZjtcbiAgICB0aGlzLl9zY2hlbWUgPSBzY2hlbWU7XG4gICAgdGhpcy5fcXVhbHMgPSBxdWFscztcbiAgICB0aGlzLl9maWxsYmcgPSBmaWxsYmc7XG4gICAgdGhpcy5fc2NhbGVWZXJ0aWNhbCA9IHNjYWxlVmVydGljYWw7XG59XG5cblNlcXVlbmNlR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9taW59O1xuU2VxdWVuY2VHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21heH07XG5TZXF1ZW5jZUdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5faGVpZ2h0fTtcblxuXG5TZXF1ZW5jZUdseXBoLnByb3RvdHlwZS5hbHBoYUZvclF1YWwgPSBmdW5jdGlvbihxdWFsKSB7XG4gICAgcmV0dXJuIDAuMSArIDAuOSpNYXRoLm1heCgwLjAsIE1hdGgubWluKCgxLjAgKiBxdWFsKSAvIDMwLjAsIDEuMCkpO1xufVxuXG5TZXF1ZW5jZUdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZ2MpIHtcbiAgICB2YXIgc2VxID0gdGhpcy5fc2VxO1xuICAgIHZhciByZWYgPSB0aGlzLl9yZWY7XG4gICAgdmFyIG1pc21hdGNoID0gdGhpcy5fc2NoZW1lID09PSAnbWlzbWF0Y2gnIHx8IHRoaXMuX3NjaGVtZSA9PT0gJ21pc21hdGNoLWFsbCc7XG4gICAgdmFyIGFsbCA9IHRoaXMuX3NjaGVtZSA9PT0gJ21pc21hdGNoLWFsbCc7XG4gICAgXG4gICAgdmFyIHNlcUxlbmd0aCA9IHNlcSA/IHNlcS5sZW5ndGggOiAodGhpcy5fbWF4IC0gdGhpcy5fbWluICsgMSk7XG4gICAgdmFyIHNjYWxlID0gKHRoaXMuX21heCAtIHRoaXMuX21pbiArIDEpIC8gc2VxTGVuZ3RoO1xuXG4gICAgaWYgKG1pc21hdGNoICYmICFpc0Nsb3NlVXAoc2NhbGUpKSB7XG4gICAgICAgIGdjLmZpbGxTdHlsZSA9IHRoaXMuX3N0cmFuZENvbG9yO1xuICAgICAgICBpZiAodGhpcy5fc2NhbGVWZXJ0aWNhbClcbiAgICAgICAgICAgIGdjLmZpbGxSZWN0KHRoaXMuX21pbiwgc2NhbGUsIHRoaXMuX21heCAtIHRoaXMuX21pbiwgc2NhbGUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBnYy5maWxsUmVjdCh0aGlzLl9taW4sIHRoaXMuX2hlaWdodC80LCB0aGlzLl9tYXggLSB0aGlzLl9taW4sIHRoaXMuX2hlaWdodC8yKTtcbiAgICB9XG5cbiAgICBcbiAgICBmb3IgKHZhciBwID0gMDsgcCA8IHNlcUxlbmd0aDsgKytwKSB7XG4gICAgICAgIHZhciBiYXNlID0gc2VxID8gc2VxLnN1YnN0cihwLCAxKS50b1VwcGVyQ2FzZSgpIDogJ04nO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFhbHRQYXR0ZXJuLnRlc3QoYmFzZSkgJiYgIWlzQ2xvc2VVcChzY2FsZSkpXG4gICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICB2YXIgY29sb3IgPSB0aGlzLmJhc2VDb2xvcnNbYmFzZV07XG5cbiAgICAgICAgaWYgKHRoaXMuX3F1YWxzKSB7XG4gICAgICAgICAgICB2YXIgcWMgPSB0aGlzLl9xdWFscy5jaGFyQ29kZUF0KHApIC0gMzM7XG4gICAgICAgICAgICB2YXIgb2xkQWxwaGEgPSBnYy5nbG9iYWxBbHBoYTsgICAgICAgICAgICAvLyBOQiBob2lzdGVkIVxuICAgICAgICAgICAgZ2MuZ2xvYmFsQWxwaGEgPSB0aGlzLmFscGhhRm9yUXVhbChxYyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbG9yKSB7XG4gICAgICAgICAgICB2YXIgcmVmQmFzZSA9IHJlZiA/IHJlZi5zdWJzdHIocCwgMSkudG9VcHBlckNhc2UoKSA6ICdOJztcbiAgICAgICAgICAgIGlmIChiYXNlID09ICdOJyB8fCByZWZCYXNlID09ICdOJylcbiAgICAgICAgICAgICAgICBjb2xvciA9ICdncmF5JztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjb2xvciA9IHRoaXMuX3N0cmFuZENvbG9yO1xuXG4gICAgICAgICAgICBpZiAoYWxsKVxuICAgICAgICAgICAgICAgIGJhc2UgPSByZWZCYXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2MuZmlsbFN0eWxlID0gY29sb3I7XG5cbiAgICAgICAgdmFyIGFsdCA9IGFsdFBhdHRlcm4udGVzdChiYXNlKTtcbiAgICAgICAgaWYgKHRoaXMuX2ZpbGxiZyB8fCAhaXNDbG9zZVVwKHNjYWxlKSB8fCAhYWx0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fc2NhbGVWZXJ0aWNhbClcbiAgICAgICAgICAgICAgICBnYy5maWxsUmVjdCh0aGlzLl9taW4gKyBwKnNjYWxlLCBzY2FsZSwgc2NhbGUsIHNjYWxlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBnYy5maWxsUmVjdCh0aGlzLl9taW4gKyBwKnNjYWxlLCAwLCBzY2FsZSwgdGhpcy5faGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDbG9zZVVwKHNjYWxlKSAmJiBhbHQpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBjb2xvciArICdfJyArIGJhc2VcbiAgICAgICAgICAgIHZhciBpbWcgPSBfX2RhbGxpYW5jZV9TZXF1ZW5jZUdseXBoQ2FjaGVba2V5XTtcbiAgICAgICAgICAgIGlmICghaW1nKSB7XG4gICAgICAgICAgICAgICAgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICAgICAgaWYgKGlzUmV0aW5hKSB7XG4gICAgICAgICAgICAgICAgICAgIGltZy53aWR0aCA9IDE2O1xuICAgICAgICAgICAgICAgICAgICBpbWcuaGVpZ2h0ID0gMjA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW1nLndpZHRoID0gODtcbiAgICAgICAgICAgICAgICAgICAgaW1nLmhlaWdodCA9IDEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaW1nR2MgPSBpbWcuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNSZXRpbmEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1nR2Muc2NhbGUoMiwgMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGltZ0djLmZpbGxTdHlsZSA9IHRoaXMuX2ZpbGxiZyA/ICdibGFjaycgOiBjb2xvcjtcbiAgICAgICAgICAgICAgICB2YXIgdyA9IGltZ0djLm1lYXN1cmVUZXh0KGJhc2UpLndpZHRoO1xuICAgICAgICAgICAgICAgIGltZ0djLmZpbGxUZXh0KGJhc2UsIDAuNSAqICg4LjAgLSB3KSwgOCk7XG4gICAgICAgICAgICAgICAgX19kYWxsaWFuY2VfU2VxdWVuY2VHbHlwaENhY2hlW2tleV0gPSBpbWc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZHkgPSB0aGlzLl9zY2FsZVZlcnRpY2FsID8gc2NhbGUgOiAwO1xuICAgICAgICAgICAgaWYgKGlzUmV0aW5hKVxuICAgICAgICAgICAgICAgIGdjLmRyYXdJbWFnZShpbWcsIHRoaXMuX21pbiArIHAqc2NhbGUgKyAwLjUqKHNjYWxlLTgpLCBkeSwgOCwgMTApO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGdjLmRyYXdJbWFnZShpbWcsIHRoaXMuX21pbiArIHAqc2NhbGUgKyAwLjUqKHNjYWxlLTgpLCBkeSk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgaWYgKHRoaXMuX3F1YWxzKSB7XG4gICAgICAgICAgICBnYy5nbG9iYWxBbHBoYSA9IG9sZEFscGhhO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5TZXF1ZW5jZUdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZXEgPSB0aGlzLl9zZXE7XG4gICAgdmFyIHJlZiA9IHRoaXMuX3JlZjtcbiAgICB2YXIgbWlzbWF0Y2ggPSB0aGlzLl9zY2hlbWUgPT09ICdtaXNtYXRjaCcgfHwgdGhpcy5fc2NoZW1lID09PSAnbWlzbWF0Y2gtYWxsJztcbiAgICB2YXIgYWxsID0gdGhpcy5fc2NoZW1lID09PSAnbWlzbWF0Y2gtYWxsJztcbiAgICB2YXIgc2NhbGUgPSAodGhpcy5fbWF4IC0gdGhpcy5fbWluICsgMSkgLyB0aGlzLl9zZXEubGVuZ3RoO1xuICAgIHZhciAgZyA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycpOyBcblxuICAgIGZvciAodmFyIHAgPSAwOyBwIDwgc2VxLmxlbmd0aDsgKytwKSB7XG4gICAgICAgIHZhciBiYXNlID0gc2VxID8gc2VxLnN1YnN0cihwLCAxKS50b1VwcGVyQ2FzZSgpIDogJ04nO1xuICAgICAgICB2YXIgY29sb3IgPSB0aGlzLmJhc2VDb2xvcnNbYmFzZV07XG5cbiAgICAgICAgaWYgKCFjb2xvcikge1xuICAgICAgICAgICAgdmFyIHJlZkJhc2UgPSByZWYgPyByZWYuc3Vic3RyKHAsIDEpLnRvVXBwZXJDYXNlKCkgOiAnTic7XG4gICAgICAgICAgICBpZiAoYmFzZSA9PSAnTicgfHwgcmVmQmFzZSA9PSAnTicpXG4gICAgICAgICAgICAgICAgY29sb3IgPSAnZ3JheSc7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY29sb3IgPSB0aGlzLl9zdHJhbmRDb2xvcjtcblxuICAgICAgICAgICAgaWYgKGFsbClcbiAgICAgICAgICAgICAgICBiYXNlID0gcmVmQmFzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhbHBoYSA9IDEuMDtcbiAgICAgICAgaWYgKHRoaXMuX3F1YWxzKSB7XG4gICAgICAgICAgICB2YXIgcWMgPSB0aGlzLl9xdWFscy5jaGFyQ29kZUF0KHApIC0gMzM7XG4gICAgICAgICAgICBhbHBoYSA9IHRoaXMuYWxwaGFGb3JRdWFsKHFjKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhbHQgPSBhbHRQYXR0ZXJuLnRlc3QoYmFzZSk7XG4gICAgICAgIGlmICh0aGlzLl9maWxsYmcgfHwgIWlzQ2xvc2VVcChzY2FsZSkgfHwgIWFsdCkge1xuICAgICAgICAgICAgZy5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgIHg6dGhpcy5fbWluICsgcCpzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuX2hlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogY29sb3IsXG4gICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiBhbHBoYX0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Nsb3NlVXAoc2NhbGUpICYmIGFsdCkge1xuICAgICAgICAgICAgZy5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCBiYXNlLCB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHRoaXMuX21pbiArICgwLjUrcCkqc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIHk6IDgsXG4gICAgICAgICAgICAgICAgICAgIHRleHRBbmNob3I6ICdtaWRkbGUnLFxuICAgICAgICAgICAgICAgICAgICBmaWxsOiB0aGlzLl9maWxsYmcgPyAnYmxhY2snIDogY29sb3IsXG4gICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiBhbHBoYX0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBnO1xufVxuXG5mdW5jdGlvbiBUcmFuc2xhdGVkR2x5cGgoZ2x5cGgsIHgsIHksIGhlaWdodCkge1xuICAgIHRoaXMuZ2x5cGggPSBnbHlwaDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5feCA9IHg7XG4gICAgdGhpcy5feSA9IHk7XG59XG5cblRyYW5zbGF0ZWRHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2hlaWdodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdseXBoLmhlaWdodCgpICsgdGhpcy5feTtcbiAgICB9XG59XG5cblRyYW5zbGF0ZWRHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2x5cGgubWluKCkgKyB0aGlzLl94O1xufVxuXG5UcmFuc2xhdGVkR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdseXBoLm1heCgpICsgdGhpcy5feDtcbn1cblxuVHJhbnNsYXRlZEdseXBoLnByb3RvdHlwZS5taW5ZID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3k7XG59XG5cblRyYW5zbGF0ZWRHbHlwaC5wcm90b3R5cGUubWF4WSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl95ICsgdGhpcy5nbHlwaC5oZWlnaHQoKTtcbn1cblxuVHJhbnNsYXRlZEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZywgbykge1xuICAgIGcuc2F2ZSgpO1xuICAgIGcudHJhbnNsYXRlKHRoaXMuX3gsIHRoaXMuX3kpO1xuICAgIHRoaXMuZ2x5cGguZHJhdyhnLCBvKTtcbiAgICBnLnJlc3RvcmUoKTtcbn1cblxuVHJhbnNsYXRlZEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzID0gIHRoaXMuZ2x5cGgudG9TVkcoKTtcbiAgICBzLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgdGhpcy5feCArICcsJyArIHRoaXMuX3kgKyAnKScpO1xuICAgIHJldHVybiBzO1xufVxuXG5mdW5jdGlvbiBQb2ludEdseXBoKHgsIHksIGhlaWdodCwgZmlsbCkge1xuICAgIHRoaXMuX3ggPSB4O1xuICAgIHRoaXMuX3kgPSB5O1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLl9maWxsID0gZmlsbDtcbn1cblxuUG9pbnRHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ggLSAyO1xufVxuXG5Qb2ludEdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5feCArIDI7XG59XG5cblBvaW50R2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG59XG5cblBvaW50R2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XG4gICAgZy5zYXZlKCk7XG4gICAgZy5nbG9iYWxBbHBoYSA9IDAuMztcbiAgICBnLmZpbGxTdHlsZSA9IHRoaXMuX2ZpbGw7XG4gICAgZy5iZWdpblBhdGgoKTtcbiAgICBnLmFyYyh0aGlzLl94LCB0aGlzLl95LCAxLjUsIDAsIDYuMjkpO1xuICAgIGcuZmlsbCgpO1xuICAgIGcucmVzdG9yZSgpO1xufVxuXG5Qb2ludEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKFxuICAgICAgICBOU19TVkcsICdjaXJjbGUnLFxuICAgICAgICBudWxsLFxuICAgICAgICB7Y3g6IHRoaXMuX3gsIGN5OiB0aGlzLl95LCByOiAyLFxuICAgICAgICAgZmlsbDogdGhpcy5fZmlsbCxcbiAgICAgICAgIHN0cm9rZTogJ25vbmUnfSk7XG59XG5cblxuZnVuY3Rpb24gR3JpZEdseXBoKGhlaWdodCwgeU9mZnNldCwgc3BhY2luZykge1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodCB8fCA1MDtcbiAgICB0aGlzLnlPZmZzZXQgPSB5T2Zmc2V0IHx8IDA7XG4gICAgdGhpcy5zcGFjaW5nID0gc3BhY2luZyB8fCAxMDtcbn1cblxuR3JpZEdseXBoLnByb3RvdHlwZS5ub3RTZWxlY3RhYmxlID0gdHJ1ZTtcblxuR3JpZEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gLTEwMDAwMDtcbn07XG5cbkdyaWRHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIDEwMDAwMDtcbn07XG5cbkdyaWRHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbn1cblxuR3JpZEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xuICAgIGcuc2F2ZSgpO1xuICAgIGcuc3Ryb2tlU3R5bGUgPSAnYmxhY2snXG4gICAgZy5saW5lV2lkdGggPSAwLjE7XG5cbiAgICBnLmJlZ2luUGF0aCgpO1xuICAgIGZvciAodmFyIHkgPSB0aGlzLnlPZmZzZXQ7IHkgPD0gdGhpcy5faGVpZ2h0K3RoaXMueU9mZnNldDsgeSArPSB0aGlzLnNwYWNpbmcpIHtcbiAgICAvLyBmb3IgKHZhciB5ID0gMDsgeSA8PSB0aGlzLl9oZWlnaHQ7IHkgKz0gMTApIHtcbiAgICAgICAgZy5tb3ZlVG8oLTUwMDAsIHkpO1xuICAgICAgICBnLmxpbmVUbyg1MDAwLCB5KTtcbiAgICB9XG4gICAgZy5zdHJva2UoKTtcbiAgICBnLnJlc3RvcmUoKTtcbn1cblxuR3JpZEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwID0gbmV3IFNWR1BhdGgoKTtcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8PSB0aGlzLl9oZWlnaHQ7IHkgKz0gMTApIHtcbiAgICAgICAgcC5tb3ZlVG8oLTUwMDAsIHkpO1xuICAgICAgICBwLmxpbmVUbyg1MDAwLCB5KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG1ha2VFbGVtZW50TlMoXG4gICAgICAgIE5TX1NWRywgJ3BhdGgnLFxuICAgICAgICBudWxsLFxuICAgICAgICB7ZDogcC50b1BhdGhEYXRhKCksXG4gICAgICAgICBmaWxsOiAnbm9uZScsXG4gICAgICAgICBzdHJva2U6ICdibGFjaycsXG4gICAgICAgICBzdHJva2VXaWR0aDogJzAuMXB4J30pO1xufVxuXG5mdW5jdGlvbiBTdGFyR2x5cGgoeCwgciwgcG9pbnRzLCBmaWxsLCBzdHJva2UpIHtcbiAgICBQYXRoR2x5cGhCYXNlLmNhbGwodGhpcywgc3Ryb2tlLCBmaWxsKTtcbiAgICB0aGlzLl94ID0geDtcbiAgICB0aGlzLl9yID0gcjtcbiAgICB0aGlzLl9wb2ludHMgPSBwb2ludHM7XG59XG5cblN0YXJHbHlwaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhdGhHbHlwaEJhc2UucHJvdG90eXBlKTtcblxuU3RhckdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5feCAtIHRoaXMuX3I7XG59XG5cblN0YXJHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ggKyB0aGlzLl9yO1xufVxuXG5TdGFyR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAyICogdGhpcy5fcjtcbn1cblxuU3RhckdseXBoLnByb3RvdHlwZS5kcmF3UGF0aCA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgbWlkWCA9IHRoaXMuX3gsIG1pZFkgPSB0aGlzLl9yLCByID0gdGhpcy5fcjtcbiAgICBmb3IgKHZhciBwID0gMDsgcCA8IHRoaXMuX3BvaW50czsgKytwKSB7XG4gICAgICAgIHZhciB0aGV0YSA9IChwICogNi4yOCkgLyB0aGlzLl9wb2ludHM7XG4gICAgICAgIHZhciBweCA9IG1pZFggKyByKk1hdGguc2luKHRoZXRhKTtcbiAgICAgICAgdmFyIHB5ID0gbWlkWSAtIHIqTWF0aC5jb3ModGhldGEpO1xuICAgICAgICBpZiAocCA9PSAwKSB7XG4gICAgICAgICAgICBnLm1vdmVUbyhweCwgcHkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZy5saW5lVG8ocHgsIHB5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGV0YSA9ICgocCswLjUpICogNi4yOCkgLyB0aGlzLl9wb2ludHM7XG4gICAgICAgIHB4ID0gbWlkWCArIDAuNCpyKk1hdGguc2luKHRoZXRhKTtcbiAgICAgICAgcHkgPSBtaWRZIC0gMC40KnIqTWF0aC5jb3ModGhldGEpO1xuICAgICAgICBnLmxpbmVUbyhweCwgcHkpO1xuICAgIH1cbiAgICBnLmNsb3NlUGF0aCgpO1xufVxuXG5mdW5jdGlvbiBQbGltc29sbEdseXBoKHgsIGhlaWdodCwgb3ZlcmhhbmcsIGZpbGwsIHN0cm9rZSkge1xuICAgIHRoaXMuX3ggPSB4O1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLl9vdmVyaGFuZyA9IG92ZXJoYW5nO1xuICAgIHRoaXMuX2ZpbGwgPSBmaWxsO1xuICAgIHRoaXMuX3N0cm9rZSA9IHN0cm9rZTtcbiAgICB0aGlzLl9oaCA9IGhlaWdodCAvIDI7XG59XG5cblBsaW1zb2xsR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XG4gICAgdmFyIGhoID0gdGhpcy5faGVpZ2h0LzI7XG4gICAgZy5maWxsU3R5bGUgPSB0aGlzLl9zdHJva2U7XG4gICAgZy5iZWdpblBhdGgoKTtcbiAgICBnLmFyYyh0aGlzLl94LCBoaCwgaGggLSB0aGlzLl9vdmVyaGFuZywgMCwgNi4yOSk7XG4gICAgZy5tb3ZlVG8odGhpcy5feCwgMCk7XG4gICAgZy5saW5lVG8odGhpcy5feCwgdGhpcy5faGVpZ2h0KTtcblxuICAgIGlmICh0aGlzLl9maWxsKSB7XG4gICAgICAgIGcuZmlsbFN0eWxlID0gdGhpcy5fZmlsbDtcbiAgICAgICAgZy5maWxsKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0cm9rZSkge1xuICAgICAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5fc3Ryb2tlO1xuICAgICAgICBnLnN0cm9rZSgpO1xuICAgIH1cbn1cblxuUGxpbXNvbGxHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaGggPSB0aGlzLl9oaDtcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgXG4gICAgICAgIFttYWtlRWxlbWVudE5TKE5TX1NWRywgJ2NpcmNsZScsIG51bGwsIHtjeDogdGhpcy5feCwgY3k6IGhoLCByOiBoaCAtIHRoaXMuX292ZXJoYW5nfSksXG4gICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2xpbmUnLCBudWxsLCB7eDE6IHRoaXMuX3gsIHkxOiAwLCB4MjogdGhpcy5feCwgeTI6IHRoaXMuX2hlaWdodH0pXSxcbiAgICAgICAge2ZpbGw6IHRoaXMuX2ZpbGwgfHwgJ25vbmUnLFxuICAgICAgICAgc3Ryb2tlOiB0aGlzLl9zdHJva2UgfHwgJ25vbmUnLFxuICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxcHgnfSk7XG59XG5cblBsaW1zb2xsR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94IC0gdGhpcy5faGg7XG59XG5cblBsaW1zb2xsR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94ICsgdGhpcy5faGg7XG59XG5cblBsaW1zb2xsR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG59XG5cblxuZnVuY3Rpb24gT3ZlcmxheUxhYmVsQ2FudmFzKCkge1xuICAgIHRoaXMub3ggPSAwO1xuICAgIHRoaXMub3kgPSAwO1xuICAgIHRoaXMuZ2x5cGhzID0gW107XG59XG5cbk92ZXJsYXlMYWJlbENhbnZhcy5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHRoaXMub3ggKz0geDtcbiAgICB0aGlzLm95ICs9IHk7XG59XG5cbk92ZXJsYXlMYWJlbENhbnZhcy5wcm90b3R5cGUucmVnaXN0ZXJHbHlwaCA9IGZ1bmN0aW9uKGcpIHtcbiAgICB0aGlzLmdseXBocy5wdXNoKHtcbiAgICAgICAgeDogdGhpcy5veCxcbiAgICAgICAgeTogdGhpcy5veSxcbiAgICAgICAgZ2x5cGg6IGdcbiAgICB9KTtcbn1cblxuXG5PdmVybGF5TGFiZWxDYW52YXMucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnLCBtaW5WaXNpYmxlLCBtYXhWaXNpYmxlKSB7XG4gICAgZm9yICh2YXIgZ2kgPSAwOyBnaSA8IHRoaXMuZ2x5cGhzLmxlbmd0aDsgKytnaSkge1xuICAgICAgICB2YXIgZ2cgPSB0aGlzLmdseXBoc1tnaV07XG4gICAgICAgIGcuc2F2ZSgpO1xuICAgICAgICBnLnRyYW5zbGF0ZShnZy54LCBnZy55KTtcbiAgICAgICAgZ2cuZ2x5cGguZHJhd092ZXJsYXkoZywgbWluVmlzaWJsZSwgbWF4VmlzaWJsZSk7XG4gICAgICAgIGcucmVzdG9yZSgpO1xuICAgIH1cbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBCb3hHbHlwaDogQm94R2x5cGgsXG4gICAgICAgIEdyb3VwR2x5cGg6IEdyb3VwR2x5cGgsXG4gICAgICAgIExpbmVHcmFwaEdseXBoOiBMaW5lR3JhcGhHbHlwaCxcbiAgICAgICAgTGFiZWxsZWRHbHlwaDogTGFiZWxsZWRHbHlwaCxcbiAgICAgICAgQ3Jvc3NHbHlwaDogQ3Jvc3NHbHlwaCxcbiAgICAgICAgRXhHbHlwaDogRXhHbHlwaCxcbiAgICAgICAgVHJpYW5nbGVHbHlwaDogVHJpYW5nbGVHbHlwaCxcbiAgICAgICAgRG90R2x5cGg6IERvdEdseXBoLFxuICAgICAgICBQYWRkZWRHbHlwaDogUGFkZGVkR2x5cGgsXG4gICAgICAgIEFBcnJvd0dseXBoOiBBQXJyb3dHbHlwaCxcbiAgICAgICAgU3BhbkdseXBoOiBTcGFuR2x5cGgsXG4gICAgICAgIExpbmVHbHlwaDogTGluZUdseXBoLFxuICAgICAgICBQcmltZXJzR2x5cGg6IFByaW1lcnNHbHlwaCxcbiAgICAgICAgQXJyb3dHbHlwaDogQXJyb3dHbHlwaCxcbiAgICAgICAgVG9vTWFueUdseXBoOiBUb29NYW55R2x5cGgsXG4gICAgICAgIFRleHRHbHlwaDogVGV4dEdseXBoLFxuICAgICAgICBTZXF1ZW5jZUdseXBoOiBTZXF1ZW5jZUdseXBoLFxuICAgICAgICBBbWlub0FjaWRHbHlwaDogQW1pbm9BY2lkR2x5cGgsXG4gICAgICAgIFRyYW5zbGF0ZWRHbHlwaDogVHJhbnNsYXRlZEdseXBoLFxuICAgICAgICBHcmlkR2x5cGg6IEdyaWRHbHlwaCxcbiAgICAgICAgU3RhckdseXBoOiBTdGFyR2x5cGgsXG4gICAgICAgIFBvaW50R2x5cGg6IFBvaW50R2x5cGgsXG4gICAgICAgIFBsaW1zb2xsR2x5cGg6IFBsaW1zb2xsR2x5cGgsXG5cbiAgICAgICAgT3ZlcmxheUxhYmVsQ2FudmFzOiBPdmVybGF5TGFiZWxDYW52YXNcbiAgICB9XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXG4vL1xuLy8gamJqc29uLmpzIC0tIHF1ZXJ5IEpCcm93c2Utc3R5bGUgUkVTVCBkYXRhIHN0b3Jlc1xuLy9cblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgREFTU3R5bGVzaGVldCA9IGRhcy5EQVNTdHlsZXNoZWV0O1xuICAgIHZhciBEQVNTdHlsZSA9IGRhcy5EQVNTdHlsZTtcbiAgICB2YXIgREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xuICAgIHZhciBEQVNHcm91cCA9IGRhcy5EQVNHcm91cDtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcblxuICAgIHZhciBzcGFucyA9IHJlcXVpcmUoJy4vc3BhbnMnKTtcbiAgICB2YXIgUmFuZ2UgPSBzcGFucy5SYW5nZTtcbiAgICB2YXIgdW5pb24gPSBzcGFucy51bmlvbjtcbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gc3BhbnMuaW50ZXJzZWN0aW9uO1xufVxuXG5mdW5jdGlvbiBKQnJvd3NlU3RvcmUoYmFzZSwgcXVlcnkpIHtcbiAgICB0aGlzLmJhc2UgPSBiYXNlO1xuICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbn1cblxuZnVuY3Rpb24gamJvcmkoc3RyYW5kKSB7XG4gICAgaWYgKHN0cmFuZCA+IDApXG4gICAgICAgIHJldHVybiAnKyc7XG4gICAgZWxzZSBpZiAoc3RyYW5kIDwgMClcbiAgICAgICAgcmV0dXJuICctJztcbn1cblxuSkJyb3dzZVN0b3JlLnByb3RvdHlwZS5mZWF0dXJlcyA9IGZ1bmN0aW9uKHNlZ21lbnQsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG5cbiAgICB1cmwgPSB0aGlzLmJhc2UgKyAnL2ZlYXR1cmVzLycgKyBzZWdtZW50Lm5hbWU7XG5cbiAgICB2YXIgZmlsdGVycyA9IFtdO1xuICAgIGlmICh0aGlzLnF1ZXJ5KSB7XG5cdCAgIGZpbHRlcnMucHVzaCh0aGlzLnF1ZXJ5KTtcbiAgICB9XG4gICAgaWYgKHNlZ21lbnQuaXNCb3VuZGVkKSB7XG4gICAgXHRmaWx0ZXJzLnB1c2goJ3N0YXJ0PScgKyBzZWdtZW50LnN0YXJ0KTtcbiAgICBcdGZpbHRlcnMucHVzaCgnZW5kPScgKyBzZWdtZW50LmVuZCk7XG4gICAgfVxuICAgIGlmIChmaWx0ZXJzLmxlbmd0aCA+IDApIHtcblx0ICAgIHVybCA9IHVybCArICc/JyArIGZpbHRlcnMuam9pbignJicpO1xuICAgIH1cblxuICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG5cdCAgICBpZiAocmVxLnN0YXR1cyA+PSAzMDApIHtcblx0XHQgICAgY2FsbGJhY2sobnVsbCwgJ0Vycm9yIGNvZGUgJyArIHJlcS5zdGF0dXMpO1xuXHQgICAgfSBlbHNlIHtcblx0XHR2YXIgamYgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSlbJ2ZlYXR1cmVzJ107XG5cdFx0dmFyIGZlYXR1cmVzID0gW107XG5cdFx0Zm9yIChmaSA9IDA7IGZpIDwgamYubGVuZ3RoOyArK2ZpKSB7XG5cdFx0ICAgIHZhciBqID0gamZbZmldO1xuXHRcdCAgICBcblx0XHQgICAgdmFyIGYgPSBuZXcgREFTRmVhdHVyZSgpO1xuXHRcdCAgICBmLnNlZ21lbnQgPSBzZWdtZW50Lm5hbWU7XG5cdFx0ICAgIGYubWluID0gKGpbJ3N0YXJ0J10gfCAwKSArIDE7XG5cdFx0ICAgIGYubWF4ID0galsnZW5kJ10gfCAwO1xuXHRcdCAgICBpZiAoai5uYW1lKSB7XG5cdFx0XHRmLmxhYmVsID0gai5uYW1lO1xuXHRcdCAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChqLnN0cmFuZClcbiAgICAgICAgICAgICAgICAgICAgICAgIGYub3JpZW50YXRpb24gPSBqYm9yaShqLnN0cmFuZCk7XG5cdFx0ICAgIGYudHlwZSA9IGoudHlwZSB8fCAndW5rbm93bic7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGouc3ViZmVhdHVyZXMgJiYgai5zdWJmZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmLmlkID0gai51bmlxdWVJRDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsbCA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgai5zdWJmZWF0dXJlcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2ogPSBqLnN1YmZlYXR1cmVzW3NpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2YgPSBzaGFsbG93Q29weShmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZi5taW4gPSBzai5zdGFydCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2YubWF4ID0gc2ouZW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNmLmdyb3VwcyA9IFtmXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC5wdXNoKHNmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3MucHVzaChuZXcgUmFuZ2Uoc2YubWluLCBzZi5tYXgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2oudHlwZSA9PT0gJ0NEUycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNkcy5wdXNoKHNmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbnMgPSB1bmlvbihibG9ja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eEdyb3VwID0gc2hhbGxvd0NvcHkoZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHhHcm91cC50eXBlID0gJ3RyYW5zY3JpcHQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5zLnJhbmdlcygpLmZvckVhY2goZnVuY3Rpb24oZXhvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnQ6ICAgICBzZWdtZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW46ICAgICAgICAgZXhvbi5taW4oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogICAgICAgICBleG9uLm1heCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb246IGYub3JpZW50YXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cHM6ICAgICAgW3R4R3JvdXBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogICAgICAgICd0cmFuc2NyaXB0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bEdyb3VwID0gc2hhbGxvd0NvcHkoZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2RzLmZvckVhY2goZnVuY3Rpb24oY2RzRXhvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZHNFeG9uLnR5cGUgPSAndHJhbnNsYXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNkc0V4b24uZ3JvdXBzID0gW3RsR3JvdXBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGNkc0V4b24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwuZm9yRWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgICBmZWF0dXJlcy5wdXNoKGYpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cdFx0fVxuXHRcdGNhbGxiYWNrKGZlYXR1cmVzKTtcblx0ICAgIH1cblx0fVxuXHRcbiAgICB9O1xuICAgIFxuICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgcmVxLnNlbmQoKTtcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBKQnJvd3NlU3RvcmU6IEpCcm93c2VTdG9yZVxuICAgIH07XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy9cbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTNcbi8vXG4vLyBrc3BhY2UuanNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgQXdhaXRlZCA9IHV0aWxzLkF3YWl0ZWQ7XG4gICAgdmFyIHB1c2hvID0gdXRpbHMucHVzaG87XG5cbiAgICB2YXIgc2EgPSByZXF1aXJlKCcuL3NvdXJjZWFkYXB0ZXJzJyk7XG4gICAgdmFyIE1hcHBlZEZlYXR1cmVTb3VyY2UgPSBzYS5NYXBwZWRGZWF0dXJlU291cmNlO1xuICAgIHZhciBDYWNoaW5nRmVhdHVyZVNvdXJjZSA9IHNhLkNhY2hpbmdGZWF0dXJlU291cmNlO1xuICAgIHZhciBCV0dGZWF0dXJlU291cmNlID0gc2EuQldHRmVhdHVyZVNvdXJjZTtcbiAgICB2YXIgUmVtb3RlQldHRmVhdHVyZVNvdXJjZSA9IHNhLlJlbW90ZUJXR0ZlYXR1cmVTb3VyY2U7XG4gICAgdmFyIEJBTUZlYXR1cmVTb3VyY2UgPSBzYS5CQU1GZWF0dXJlU291cmNlO1xuICAgIHZhciBSZW1vdGVCQU1GZWF0dXJlU291cmNlID0gc2EuUmVtb3RlQkFNRmVhdHVyZVNvdXJjZTtcbiAgICB2YXIgRHVtbXlTZXF1ZW5jZVNvdXJjZSA9IHNhLkR1bW15U2VxdWVuY2VTb3VyY2U7XG4gICAgdmFyIER1bW15RmVhdHVyZVNvdXJjZSA9IHNhLkR1bW15RmVhdHVyZVNvdXJjZTtcblxuICAgIHZhciBPdmVybGF5RmVhdHVyZVNvdXJjZSA9IHJlcXVpcmUoJy4vb3ZlcmxheScpLk92ZXJsYXlGZWF0dXJlU291cmNlO1xuXG4gICAgdmFyIHNwYW5zID0gcmVxdWlyZSgnLi9zcGFucycpO1xuICAgIHZhciBSYW5nZSA9IHNwYW5zLlJhbmdlO1xuICAgIHZhciB1bmlvbiA9IHNwYW5zLnVuaW9uO1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBzcGFucy5pbnRlcnNlY3Rpb247XG5cbiAgICB2YXIgc2FtcGxlID0gcmVxdWlyZSgnLi9zYW1wbGUnKTtcbiAgICB2YXIgZG93bnNhbXBsZSA9IHNhbXBsZS5kb3duc2FtcGxlO1xuICAgIHZhciBnZXRCYXNlQ292ZXJhZ2UgPSBzYW1wbGUuZ2V0QmFzZUNvdmVyYWdlO1xuXG4gICAgdmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XG4gICAgdmFyIERBU1NlcXVlbmNlID0gZGFzLkRBU1NlcXVlbmNlO1xuXG4gICAgdmFyIFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XG59XG5cbmZ1bmN0aW9uIEZldGNoUG9vbCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5yZXFzID0gW107XG4gICAgdGhpcy5hd2FpdGVkRmVhdHVyZXMgPSB7fTtcbiAgICB0aGlzLnJlcXVlc3RzSXNzdWVkID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYubm90aWZ5UmVxdWVzdHNJc3N1ZWQgPSByZXNvbHZlO1xuICAgIH0pO1xufVxuXG5GZXRjaFBvb2wucHJvdG90eXBlLmFkZFJlcXVlc3QgPSBmdW5jdGlvbih4aHIpIHtcbiAgICB0aGlzLnJlcXMucHVzaCh4aHIpO1xufVxuXG5GZXRjaFBvb2wucHJvdG90eXBlLmFib3J0QWxsID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlcXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdGhpcy5yZXFzW2ldLmFib3J0KCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBLU0NhY2hlQmF0b24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIGZlYXR1cmVzLCBzdGF0dXMsIGNvdmVyYWdlKSB7XG4gICAgdGhpcy5jaHIgPSBjaHI7XG4gICAgdGhpcy5taW4gPSBtaW47XG4gICAgdGhpcy5tYXggPSBtYXg7XG4gICAgdGhpcy5jb3ZlcmFnZSA9IGNvdmVyYWdlO1xuICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcbiAgICB0aGlzLmZlYXR1cmVzID0gZmVhdHVyZXMgfHwgW107XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG59XG5cbktTQ2FjaGVCYXRvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jaHIgKyBcIjpcIiArIHRoaXMubWluICsgXCIuLlwiICsgdGhpcy5tYXggKyBcIjtzY2FsZT1cIiArIHRoaXMuc2NhbGU7XG59XG5cbmZ1bmN0aW9uIEtub3duU3BhY2UodGllck1hcCwgY2hyLCBtaW4sIG1heCwgc2NhbGUsIHNlcVNvdXJjZSkge1xuICAgIHRoaXMudGllck1hcCA9IHRpZXJNYXA7XG4gICAgdGhpcy5jaHIgPSBjaHI7XG4gICAgdGhpcy5taW4gPSBtaW47XG4gICAgdGhpcy5tYXggPSBtYXg7XG4gICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuICAgIHRoaXMuc2VxU291cmNlID0gc2VxU291cmNlIHx8IG5ldyBEdW1teVNlcXVlbmNlU291cmNlKCk7XG4gICAgdGhpcy52aWV3Q291bnQgPSAwO1xuXG4gICAgdGhpcy5mZWF0dXJlQ2FjaGUgPSB7fTtcbiAgICB0aGlzLmxhdGVzdFZpZXdzID0ge307XG59XG5cbktub3duU3BhY2UucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY2FuY2VsbGVkID0gdHJ1ZTtcbn1cblxuS25vd25TcGFjZS5wcm90b3R5cGUuYmVzdENhY2hlT3ZlcmxhcHBpbmcgPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4KSB7XG4gICAgdmFyIGJhdG9uID0gdGhpcy5mZWF0dXJlQ2FjaGVbdGhpcy50aWVyTWFwWzBdXTtcbiAgICBpZiAoYmF0b24pIHtcbiAgICAgICAgcmV0dXJuIGJhdG9uO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuS25vd25TcGFjZS5wcm90b3R5cGUucmV0cmlldmVGZWF0dXJlcyA9IGZ1bmN0aW9uKHRpZXJzLCBjaHIsIG1pbiwgbWF4LCBzY2FsZSwgbm9TdGFydEZldGNoZXMpIHtcbiAgICBpZiAoc2NhbGUgIT0gc2NhbGUpIHtcbiAgICAgICAgdGhyb3cgXCJyZXRyaWV2ZUZlYXR1cmVzIGNhbGxlZCB3aXRoIHNpbGx5IHNjYWxlXCI7XG4gICAgfVxuXG4gICAgaWYgKGNociAhPSB0aGlzLmNocikge1xuICAgICAgICB0aHJvdyBcIkNhbid0IGV4dGVuZCBLbm93biBTcGFjZSB0byBhIG5ldyBjaHJvbW9zb21lXCI7XG4gICAgfVxuICAgIGlmIChtaW4gPCAxKSB7XG4gICAgICAgIG1pbiA9IDE7XG4gICAgfVxuXG4gICAgdGhpcy5taW4gPSBtaW47XG4gICAgdGhpcy5tYXggPSBtYXg7XG4gICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuXG4gICAgaWYgKHRoaXMucG9vbCkge1xuICAgICAgICB0aGlzLnBvb2wuYWJvcnRBbGwoKTtcbiAgICB9XG4gICAgdGhpcy5wb29sID0gbmV3IEZldGNoUG9vbCgpO1xuICAgIHRoaXMuYXdhaXRlZFNlcSA9IG5ldyBBd2FpdGVkKCk7XG4gICAgdGhpcy5zZXFXYXNGZXRjaGVkID0gZmFsc2U7XG4gICAgdGhpcy52aWV3Q291bnQrKztcblxuICAgIGlmICghbm9TdGFydEZldGNoZXMpIHtcbiAgICAgICAgdGhpcy5zdGFydEZldGNoZXNGb3JUaWVycyh0aWVycyk7XG4gICAgfVxuICAgIHRoaXMucG9vbC5ub3RpZnlSZXF1ZXN0c0lzc3VlZCgpO1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJGZWF0dXJlcyhmZWF0dXJlcywgbWluLCBtYXgpIHtcbiAgICB2YXIgZmYgPSBbXTtcbiAgICB2YXIgZmVhdHVyZXNCeUdyb3VwID0ge307XG5cbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xuICAgICAgICBpZiAoIWYubWluIHx8ICFmLm1heCkge1xuICAgICAgICAgICAgZmYucHVzaChmKTtcbiAgICAgICAgfSBlbHNlIGlmIChmLmdyb3VwcyAmJiBmLmdyb3Vwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBwdXNobyhmZWF0dXJlc0J5R3JvdXAsIGYuZ3JvdXBzWzBdLmlkLCBmKTtcbiAgICAgICAgfSBlbHNlIGlmIChmLm1pbiA8PSBtYXggJiYgZi5tYXggPj0gbWluKSB7XG4gICAgICAgICAgICBmZi5wdXNoKGYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgZ2lkIGluIGZlYXR1cmVzQnlHcm91cCkge1xuICAgICAgICB2YXIgZ2YgPSBmZWF0dXJlc0J5R3JvdXBbZ2lkXTtcbiAgICAgICAgdmFyIGdtaW4gPSAxMDAwMDAwMDAwMDAsIGdtYXggPSAtMTAwMDAwMDAwMDAwO1xuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZ2YubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICB2YXIgZiA9IGdmW2ZpXTtcbiAgICAgICAgICAgIGdtaW4gPSBNYXRoLm1pbihnbWluLCBmLm1pbik7XG4gICAgICAgICAgICBnbWF4ID0gTWF0aC5tYXgoZ21heCwgZi5tYXgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnbWluIDw9IG1heCB8fCBnbWF4ID49IG1pbikge1xuICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGdmLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgICAgIGZmLnB1c2goZ2ZbZmldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmZjtcbn1cblxuS25vd25TcGFjZS5wcm90b3R5cGUuaW52YWxpZGF0ZSA9IGZ1bmN0aW9uKHRpZXIpIHtcbiAgICBpZiAoIXRoaXMucG9vbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5mZWF0dXJlQ2FjaGVbdGllcl0gPSBudWxsO1xuICAgIHRoaXMuc3RhcnRGZXRjaGVzRm9yVGllcnMoW3RpZXJdKTtcbn1cblxuS25vd25TcGFjZS5wcm90b3R5cGUuc3RhcnRGZXRjaGVzRm9yVGllcnMgPSBmdW5jdGlvbih0aWVycykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG5cbiAgICB2YXIgYXdhaXRlZFNlcSA9IHRoaXMuYXdhaXRlZFNlcTtcbiAgICB2YXIgbmVlZFNlcSA9IGZhbHNlO1xuXG4gICAgdmFyIGdleDtcblxuICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGllcnMubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgdmFyIHRpZXJSZW5kZXJlciA9IHRpZXJzW3RdLmJyb3dzZXIuZ2V0VGllclJlbmRlcmVyKHRpZXJzW3RdKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0RmV0Y2hlc0Zvcih0aWVyc1t0XSwgYXdhaXRlZFNlcSkpIHtcbiAgICAgICAgICAgICAgICBuZWVkU2VxID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIHZhciB0aWVyID0gdGllcnNbdF07XG5cbiAgICAgICAgICAgIHRpZXIuY3VycmVudEZlYXR1cmVzID0gW107XG4gICAgICAgICAgICB0aWVyLmN1cnJlbnRTZXF1ZW5jZSA9IG51bGw7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZmV0Y2hpbmcgdGllciBzb3VyY2UnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4KTtcbiAgICAgICAgICAgIGdleCA9IGV4O1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xuICAgICAgICAgICAgdGllclJlbmRlcmVyLnJlbmRlclRpZXIoZXgsIHRpZXIpO1xuICAgICAgICAgICAgdGllci53YXNSZW5kZXJlZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5lZWRTZXEgJiYgIXRoaXMuc2VxV2FzRmV0Y2hlZCkge1xuICAgICAgICB0aGlzLnNlcVdhc0ZldGNoZWQgPSB0cnVlO1xuICAgICAgICB2YXIgc21pbiA9IHRoaXMubWluLCBzbWF4ID0gdGhpcy5tYXg7XG5cbiAgICAgICAgaWYgKHRoaXMuY3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNzLnN0YXJ0IDw9IHNtaW4gJiYgdGhpcy5jcy5lbmQgPj0gc21heCkge1xuICAgICAgICAgICAgICAgIHZhciBjYWNoZWRTZXE7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3Muc3RhcnQgPT0gc21pbiAmJiB0aGlzLmNzLmVuZCA9PSBzbWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlZFNlcSA9IHRoaXMuY3M7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkU2VxID0gbmV3IERBU1NlcXVlbmNlKHRoaXMuY3MubmFtZSwgc21pbiwgc21heCwgdGhpcy5jcy5hbHBoYWJldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3Muc2VxLnN1YnN0cmluZyhzbWluIC0gdGhpcy5jcy5zdGFydCwgc21heCArIDEgLSB0aGlzLmNzLnN0YXJ0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdGVkU2VxLnByb3ZpZGUoY2FjaGVkU2VxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2VxU291cmNlLmZldGNoKHRoaXMuY2hyLCBzbWluLCBzbWF4LCB0aGlzLnBvb2wsIGZ1bmN0aW9uKGVyciwgc2VxKSB7XG4gICAgICAgICAgICBpZiAoc2VxKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzQi5jcyB8fCAoc21pbiA8PSB0aGlzQi5jcy5zdGFydCAmJiBzbWF4ID49IHRoaXNCLmNzLmVuZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHNtaW4gPj0gdGhpc0IuY3MuZW5kKSB8fCAoc21heCA8PSB0aGlzQi5jcy5zdGFydCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKChzbWF4IC0gc21pbikgPiAodGhpc0IuY3MuZW5kIC0gdGhpc0IuY3Muc3RhcnQpKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmNzID0gc2VxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdGVkU2VxLnByb3ZpZGUoc2VxKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcXVlbmNlIGxvYWRpbmcgZmFpbGVkJywgZXJyKTtcbiAgICAgICAgICAgICAgICBhd2FpdGVkU2VxLnByb3ZpZGUobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChnZXgpXG4gICAgICAgIHRocm93IGdleDtcbn1cblxuS25vd25TcGFjZS5wcm90b3R5cGUuc3RhcnRGZXRjaGVzRm9yID0gZnVuY3Rpb24odGllciwgYXdhaXRlZFNlcSkge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG5cbiAgICB2YXIgdmlld0lEID0gdGhpcy52aWV3Q291bnQ7XG4gICAgdmFyIHNvdXJjZSA9IHRpZXIuZ2V0U291cmNlKCkgfHwgbmV3IER1bW15RmVhdHVyZVNvdXJjZSgpO1xuICAgIHZhciBuZWVkc1NlcSA9IHRpZXIubmVlZHNTZXF1ZW5jZSh0aGlzLnNjYWxlKTtcbiAgICB2YXIgYmF0b24gPSB0aGlzQi5mZWF0dXJlQ2FjaGVbdGllcl07XG4gICAgdmFyIHN0eWxlRmlsdGVycyA9IHRpZXIuZ2V0QWN0aXZlU3R5bGVGaWx0ZXJzKHRoaXMuc2NhbGUpO1xuICAgIHZhciB3YW50ZWRUeXBlcztcbiAgICBpZiAoc3R5bGVGaWx0ZXJzKVxuICAgICAgICB3YW50ZWRUeXBlcyA9IHN0eWxlRmlsdGVycy50eXBlTGlzdCgpO1xuICAgIHZhciBjaHIgPSB0aGlzLmNociwgbWluID0gdGhpcy5taW4sIG1heCA9IHRoaXMubWF4O1xuXG5cbiAgICBpZiAod2FudGVkVHlwZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChiYXRvbiAmJiBiYXRvbi5jaHIgPT09IHRoaXMuY2hyICYmIGJhdG9uLm1pbiA8PSBtaW4gJiYgYmF0b24ubWF4ID49IG1heCkge1xuICAgICAgICB2YXIgY2FjaGVkRmVhdHVyZXMgPSBiYXRvbi5mZWF0dXJlcztcbiAgICAgICAgaWYgKGJhdG9uLm1pbiA8IG1pbiB8fCBiYXRvbi5tYXggPiBtYXgpIHtcbiAgICAgICAgICAgIGNhY2hlZEZlYXR1cmVzID0gZmlsdGVyRmVhdHVyZXMoY2FjaGVkRmVhdHVyZXMsIG1pbiwgbWF4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXNCLnByb3Zpc2lvbih0aWVyLCBiYXRvbi5jaHIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24oYmF0b24uY292ZXJhZ2UsIG5ldyBSYW5nZShtaW4sIG1heCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmF0b24uc2NhbGUsIHdhbnRlZFR5cGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVkRmVhdHVyZXMsIGJhdG9uLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRzU2VxID8gYXdhaXRlZFNlcSA6IG51bGwpO1xuXG4gICAgICAgIHZhciBhdmFpbGFibGVTY2FsZXMgPSBzb3VyY2UuZ2V0U2NhbGVzKCk7XG5cbiAgICAgICAgaWYgKGJhdG9uLnNjYWxlIDw9IHRoaXMuc2NhbGUgfHwgIWF2YWlsYWJsZVNjYWxlcykge1xuICAgICAgICAgICAgcmV0dXJuIG5lZWRzU2VxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNvdXJjZS5pbnN0cnVtZW50KVxuICAgICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgIGZldGNoICcgKyB2aWV3SUQgKyAnICgnICsgbWluICsgJywgJyArIG1heCArICcpJyk7XG5cblxuICAgIHNvdXJjZS5mZXRjaChjaHIsIG1pbiwgbWF4LCB0aGlzLnNjYWxlLCB3YW50ZWRUeXBlcywgdGhpcy5wb29sLCBmdW5jdGlvbihzdGF0dXMsIGZlYXR1cmVzLCBzY2FsZSwgY292ZXJhZ2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5pbnN0cnVtZW50KVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZpbmlzaGluZyBmZXRjaCAnICsgdmlld0lEKTtcblxuICAgICAgICB2YXIgbGF0ZXN0Vmlld0lEID0gdGhpc0IubGF0ZXN0Vmlld3NbdGllcl0gfHwgLTE7XG4gICAgICAgIGlmICh0aGlzQi5jYW5jZWxsZWQgfHwgbGF0ZXN0Vmlld0lEID4gdmlld0lEKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvdmVyYWdlKSB7XG4gICAgICAgICAgICBjb3ZlcmFnZSA9IG5ldyBSYW5nZShtaW4sIG1heCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJhdG9uIHx8IChtaW4gPCBiYXRvbi5taW4pIHx8IChtYXggPiBiYXRvbi5tYXgpKSB7ICAgICAgICAgLy8gRklYTUUgc2hvdWxkIGJlIG1lcmdpbmcgaW4gc29tZSBjYXNlcz9cbiAgICAgICAgICAgIHRoaXNCLmZlYXR1cmVDYWNoZVt0aWVyXSA9IG5ldyBLU0NhY2hlQmF0b24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIGZlYXR1cmVzLCBzdGF0dXMsIGNvdmVyYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXNCLmxhdGVzdFZpZXdzW3RpZXJdID0gdmlld0lEO1xuICAgICAgICB0aGlzQi5wcm92aXNpb24odGllciwgY2hyLCBjb3ZlcmFnZSwgc2NhbGUsIHdhbnRlZFR5cGVzLCBmZWF0dXJlcywgc3RhdHVzLCBuZWVkc1NlcSA/IGF3YWl0ZWRTZXEgOiBudWxsKTtcbiAgICB9LCBzdHlsZUZpbHRlcnMpO1xuICAgIHJldHVybiBuZWVkc1NlcTtcbn1cblxuS25vd25TcGFjZS5wcm90b3R5cGUucHJvdmlzaW9uID0gZnVuY3Rpb24odGllciwgY2hyLCBjb3ZlcmFnZSwgYWN0dWFsU2NhbGUsIHdhbnRlZFR5cGVzLCBmZWF0dXJlcywgc3RhdHVzLCBhd2FpdGVkU2VxKSB7XG4gICAgdmFyIHRpZXJSZW5kZXJlciA9IHRpZXIuYnJvd3Nlci5nZXRUaWVyUmVuZGVyZXIodGllcik7XG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgICB0aWVyLnNldEZlYXR1cmVzKGNociwgY292ZXJhZ2UsIGFjdHVhbFNjYWxlLCBbXSwgbnVsbCk7XG4gICAgICAgIGlmICghZmVhdHVyZXMpIHtcbiAgICAgICAgICAgIHZhciBlID0gbmV3IEVycm9yKHN0YXR1cyk7XG4gICAgICAgICAgICBzdGF0dXMgPSBcIkVycm9yIGZldGNoaW5nIGRhdGE6IFwiICsgc3RhdHVzICsgXCI7IHNlZSBicm93c2VyIGNvbnNvbGVcIjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZmV0Y2hpbmcgZGF0YSBmb3IgdGllciBcIiArIHRpZXIuZGFzU291cmNlLm5hbWUgKyBcIjpcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aWVyLmRhc1NvdXJjZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0YWNrIHRyYWNlOlwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUuc3RhY2spXG4gICAgICAgIH1cbiAgICAgICAgdGllclJlbmRlcmVyLnJlbmRlclRpZXIoc3RhdHVzLCB0aWVyKTtcbiAgICAgICAgdGllci53YXNSZW5kZXJlZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtYXlEb3duc2FtcGxlID0gZmFsc2U7XG4gICAgICAgIHZhciBuZWVkQmFzZUNvbXBvc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIHZhciBzcmMgPSB0aWVyLmdldFNvdXJjZSgpO1xuICAgICAgICB3aGlsZSAoTWFwcGVkRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzcmMpIHx8XG4gICAgICAgICAgICAgICBDYWNoaW5nRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzcmMpIHx8XG4gICAgICAgICAgICAgICBPdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzcmMpKSB7XG5cbiAgICAgICAgICAgIGlmIChPdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzcmMpKSB7XG4gICAgICAgICAgICAgICAgc3JjID0gc3JjLnNvdXJjZXNbMF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNyYyA9IHNyYy5zb3VyY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc3JjKSB8fFxuICAgICAgICAgICAgUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzcmMpIHx8XG4gICAgICAgICAgICBCQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHNyYykgfHxcbiAgICAgICAgICAgIFJlbW90ZUJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc3JjKSkge1xuXG4gICAgICAgICAgICBtYXlEb3duc2FtcGxlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc3JjLm9wdHMgfHwgKCFzcmMub3B0cy5mb3JjZVJlZHVjdGlvbiAmJiAhc3JjLm9wdHMubm9Eb3duc2FtcGxlKSkge1xuICAgICAgICAgICAgaWYgKC8qIChhY3R1YWxTY2FsZSA8ICh0aGlzLnNjYWxlLzIpICYmIGZlYXR1cmVzLmxlbmd0aCA+IDIwMCkgIHx8ICovXG4gICAgICAgICAgICAgICAgKG1heURvd25zYW1wbGUgJiYgd2FudGVkVHlwZXMgJiYgd2FudGVkVHlwZXMubGVuZ3RoID09IDEgJiYgd2FudGVkVHlwZXMuaW5kZXhPZignZGVuc2l0eScpID49IDApKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZlYXR1cmVzID0gZG93bnNhbXBsZShmZWF0dXJlcywgdGhpcy5zY2FsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2FudGVkVHlwZXMgJiYgd2FudGVkVHlwZXMubGVuZ3RoID09IDEgJiYgd2FudGVkVHlwZXMuaW5kZXhPZignYmFzZS1jb3ZlcmFnZScpID49IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIEJhc2UtY29tcG9zaXRpb24gY292ZXJhZ2UgdHJhY2tcbiAgICAgICAgICAgIG5lZWRCYXNlQ29tcG9zaXRpb24gPSB0cnVlO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoYXdhaXRlZFNlcSkge1xuICAgICAgICAgICAgYXdhaXRlZFNlcS5hd2FpdChmdW5jdGlvbihzZXEpIHtcbiAgICAgICAgICAgICAgICBpZiAobmVlZEJhc2VDb21wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcyA9IGdldEJhc2VDb3ZlcmFnZShmZWF0dXJlcywgc2VxLCB0aWVyLmJyb3dzZXIuYmFzZUNvbG9ycyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRpZXIuc2V0RmVhdHVyZXMoY2hyLCBjb3ZlcmFnZSwgYWN0dWFsU2NhbGUsIGZlYXR1cmVzLCBzZXEpO1xuICAgICAgICAgICAgICAgIHRpZXJSZW5kZXJlci5yZW5kZXJUaWVyKHN0YXR1cywgdGllcik7XG4gICAgICAgICAgICAgICAgdGllci53YXNSZW5kZXJlZCgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRpZXIuc2V0RmVhdHVyZXMoY2hyLCBjb3ZlcmFnZSwgYWN0dWFsU2NhbGUsIGZlYXR1cmVzKTtcbiAgICAgICAgICAgIHRpZXJSZW5kZXJlci5yZW5kZXJUaWVyKHN0YXR1cywgdGllcik7XG4gICAgICAgICAgICB0aWVyLndhc1JlbmRlcmVkKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgS25vd25TcGFjZTogS25vd25TcGFjZVxuICAgIH07XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXG4vL1xuLy8gbGgzdXRpbHMuanM6IGNvbW1vbiBzdXBwb3J0IGZvciBsaDMncyBmaWxlIGZvcm1hdHNcbi8vXG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGpzemxpYiA9IHJlcXVpcmUoJ2pzemxpYicpO1xuICAgIHZhciBqc3psaWJfaW5mbGF0ZV9idWZmZXIgPSBqc3psaWIuaW5mbGF0ZUJ1ZmZlcjtcbiAgICB2YXIgYXJyYXlDb3B5ID0ganN6bGliLmFycmF5Q29weTtcbn1cblxuZnVuY3Rpb24gVm9iKGIsIG8pIHtcbiAgICB0aGlzLmJsb2NrID0gYjtcbiAgICB0aGlzLm9mZnNldCA9IG87XG59XG5cblZvYi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJycgKyB0aGlzLmJsb2NrICsgJzonICsgdGhpcy5vZmZzZXQ7XG59XG5cbmZ1bmN0aW9uIHJlYWRWb2IoYmEsIG9mZnNldCwgYWxsb3daZXJvKSB7XG4gICAgdmFyIGJsb2NrID0gKChiYVtvZmZzZXQrNl0gJiAweGZmKSAqIDB4MTAwMDAwMDAwKSArICgoYmFbb2Zmc2V0KzVdICYgMHhmZikgKiAweDEwMDAwMDApICsgKChiYVtvZmZzZXQrNF0gJiAweGZmKSAqIDB4MTAwMDApICsgKChiYVtvZmZzZXQrM10gJiAweGZmKSAqIDB4MTAwKSArICgoYmFbb2Zmc2V0KzJdICYgMHhmZikpO1xuICAgIHZhciBiaW50ID0gKGJhW29mZnNldCsxXSA8PCA4KSB8IChiYVtvZmZzZXRdKTtcbiAgICBpZiAoYmxvY2sgPT0gMCAmJiBiaW50ID09IDAgJiYgIWFsbG93WmVybykge1xuICAgICAgICByZXR1cm4gbnVsbDsgIC8vIFNob3VsZCBvbmx5IGhhcHBlbiBpbiB0aGUgbGluZWFyIGluZGV4P1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgVm9iKGJsb2NrLCBiaW50KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVuYmd6ZihkYXRhLCBsaW0pIHtcbiAgICBsaW0gPSBNYXRoLm1pbihsaW0gfHwgMSwgZGF0YS5ieXRlTGVuZ3RoIC0gNTApO1xuICAgIHZhciBvQmxvY2tMaXN0ID0gW107XG4gICAgdmFyIHB0ciA9IFswXTtcbiAgICB2YXIgdG90YWxTaXplID0gMDtcblxuICAgIHdoaWxlIChwdHJbMF0gPCBsaW0pIHtcbiAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSwgcHRyWzBdLCAxMik7IC8vIEZJWE1FIGlzIHRoaXMgZW5vdWdoIGZvciBhbGwgY3JlZGlibGUgQkdaRiBibG9jayBoZWFkZXJzP1xuICAgICAgICB2YXIgeGxlbiA9IChiYVsxMV0gPDwgOCkgfCAoYmFbMTBdKTtcbiAgICAgICAgLy8gZGxvZygneGxlblsnICsgKHB0clswXSkgKyddPScgKyB4bGVuKTtcbiAgICAgICAgdmFyIHVuYyA9IGpzemxpYl9pbmZsYXRlX2J1ZmZlcihkYXRhLCAxMiArIHhsZW4gKyBwdHJbMF0sIE1hdGgubWluKDY1NTM2LCBkYXRhLmJ5dGVMZW5ndGggLSAxMiAtIHhsZW4gLSBwdHJbMF0pLCBwdHIpO1xuICAgICAgICBwdHJbMF0gKz0gODtcbiAgICAgICAgdG90YWxTaXplICs9IHVuYy5ieXRlTGVuZ3RoO1xuICAgICAgICBvQmxvY2tMaXN0LnB1c2godW5jKTtcbiAgICB9XG5cbiAgICBpZiAob0Jsb2NrTGlzdC5sZW5ndGggPT0gMSkge1xuICAgICAgICByZXR1cm4gb0Jsb2NrTGlzdFswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3V0ID0gbmV3IFVpbnQ4QXJyYXkodG90YWxTaXplKTtcbiAgICAgICAgdmFyIGN1cnNvciA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb0Jsb2NrTGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGIgPSBuZXcgVWludDhBcnJheShvQmxvY2tMaXN0W2ldKTtcbiAgICAgICAgICAgIGFycmF5Q29weShiLCAwLCBvdXQsIGN1cnNvciwgYi5sZW5ndGgpO1xuICAgICAgICAgICAgY3Vyc29yICs9IGIubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQuYnVmZmVyO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQ2h1bmsobWludiwgbWF4dikge1xuICAgIHRoaXMubWludiA9IG1pbnY7IHRoaXMubWF4diA9IG1heHY7XG59XG5cblxuLy9cbi8vIEJpbm5pbmcgKHRyYW5zbGl0ZXJhdGVkIGZyb20gU0FNMS4zIHNwZWMpXG4vL1xuXG4vKiBjYWxjdWxhdGUgYmluIGdpdmVuIGFuIGFsaWdubWVudCBjb3ZlcmluZyBbYmVnLGVuZCkgKHplcm8tYmFzZWQsIGhhbGYtY2xvc2UtaGFsZi1vcGVuKSAqL1xuZnVuY3Rpb24gcmVnMmJpbihiZWcsIGVuZClcbntcbiAgICAtLWVuZDtcbiAgICBpZiAoYmVnPj4xNCA9PSBlbmQ+PjE0KSByZXR1cm4gKCgxPDwxNSktMSkvNyArIChiZWc+PjE0KTtcbiAgICBpZiAoYmVnPj4xNyA9PSBlbmQ+PjE3KSByZXR1cm4gKCgxPDwxMiktMSkvNyArIChiZWc+PjE3KTtcbiAgICBpZiAoYmVnPj4yMCA9PSBlbmQ+PjIwKSByZXR1cm4gKCgxPDw5KS0xKS83ICsgKGJlZz4+MjApO1xuICAgIGlmIChiZWc+PjIzID09IGVuZD4+MjMpIHJldHVybiAoKDE8PDYpLTEpLzcgKyAoYmVnPj4yMyk7XG4gICAgaWYgKGJlZz4+MjYgPT0gZW5kPj4yNikgcmV0dXJuICgoMTw8MyktMSkvNyArIChiZWc+PjI2KTtcbiAgICByZXR1cm4gMDtcbn1cblxuLyogY2FsY3VsYXRlIHRoZSBsaXN0IG9mIGJpbnMgdGhhdCBtYXkgb3ZlcmxhcCB3aXRoIHJlZ2lvbiBbYmVnLGVuZCkgKHplcm8tYmFzZWQpICovXG52YXIgTUFYX0JJTiA9ICgoKDE8PDE4KS0xKS83KTtcbmZ1bmN0aW9uIHJlZzJiaW5zKGJlZywgZW5kKSBcbntcbiAgICB2YXIgaSA9IDAsIGssIGxpc3QgPSBbXTtcbiAgICAtLWVuZDtcbiAgICBsaXN0LnB1c2goMCk7XG4gICAgZm9yIChrID0gMSArIChiZWc+PjI2KTsgayA8PSAxICsgKGVuZD4+MjYpOyArK2spIGxpc3QucHVzaChrKTtcbiAgICBmb3IgKGsgPSA5ICsgKGJlZz4+MjMpOyBrIDw9IDkgKyAoZW5kPj4yMyk7ICsraykgbGlzdC5wdXNoKGspO1xuICAgIGZvciAoayA9IDczICsgKGJlZz4+MjApOyBrIDw9IDczICsgKGVuZD4+MjApOyArK2spIGxpc3QucHVzaChrKTtcbiAgICBmb3IgKGsgPSA1ODUgKyAoYmVnPj4xNyk7IGsgPD0gNTg1ICsgKGVuZD4+MTcpOyArK2spIGxpc3QucHVzaChrKTtcbiAgICBmb3IgKGsgPSA0NjgxICsgKGJlZz4+MTQpOyBrIDw9IDQ2ODEgKyAoZW5kPj4xNCk7ICsraykgbGlzdC5wdXNoKGspO1xuICAgIHJldHVybiBsaXN0O1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIHVuYmd6ZjogdW5iZ3pmLFxuICAgICAgICByZWFkVm9iOiByZWFkVm9iLFxuICAgICAgICByZWcyYmluOiByZWcyYmluLFxuICAgICAgICByZWcyYmluczogcmVnMmJpbnMsXG4gICAgICAgIENodW5rOiBDaHVua1xuICAgIH07XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDE0XG4vL1xuLy8gbWVtc3RvcmUuanNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBzYSA9IHJlcXVpcmUoJy4vc291cmNlYWRhcHRlcnMnKTtcbiAgICB2YXIgZGFsbGlhbmNlX3JlZ2lzdGVyU291cmNlQWRhcHRlckZhY3RvcnkgPSBzYS5yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5O1xuICAgIHZhciBkYWxsaWFuY2VfbWFrZVBhcnNlciA9IHNhLm1ha2VQYXJzZXI7XG4gICAgdmFyIEZlYXR1cmVTb3VyY2VCYXNlID0gc2EuRmVhdHVyZVNvdXJjZUJhc2U7XG5cbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgREFTU3R5bGVzaGVldCA9IGRhcy5EQVNTdHlsZXNoZWV0O1xuICAgIHZhciBEQVNTdHlsZSA9IGRhcy5EQVNTdHlsZTtcbiAgICB2YXIgREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xuICAgIHZhciBEQVNHcm91cCA9IGRhcy5EQVNHcm91cDtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgQXdhaXRlZCA9IHV0aWxzLkF3YWl0ZWQ7XG4gICAgdmFyIHRleHRYSFIgPSB1dGlscy50ZXh0WEhSO1xufVxuXG5mdW5jdGlvbiBNZW1TdG9yZSgpIHtcbiAgICB0aGlzLmZlYXR1cmVzQnlDaHIgPSB7fTtcbiAgICB0aGlzLm1heExlbmd0aCA9IDE7XG4gICAgdGhpcy5jaHJSaW5nID0gbnVsbDtcbn1cblxuTWVtU3RvcmUucHJvdG90eXBlLmFkZEZlYXR1cmVzID0gZnVuY3Rpb24oZmVhdHVyZXMpIHtcbiAgICB2YXIgZGlydHkgPSB7fTtcbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xuICAgICAgICB2YXIgY2hyID0gZi5zZWdtZW50IHx8IGYuY2hyO1xuICAgICAgICB2YXIgZmEgPSB0aGlzLmZlYXR1cmVzQnlDaHJbY2hyXTtcbiAgICAgICAgaWYgKCFmYSkge1xuICAgICAgICAgICAgZmEgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXNCeUNocltjaHJdID0gZmE7XG4gICAgICAgIH1cbiAgICAgICAgZmEucHVzaChmKTtcbiAgICAgICAgZGlydHlbY2hyXSA9IHRydWU7XG5cbiAgICAgICAgdmFyIGxlbiA9IGYubWF4IC0gZi5taW4gKyAxO1xuICAgICAgICBpZiAobGVuID4gdGhpcy5tYXhMZW5ndGgpXG4gICAgICAgICAgICB0aGlzLm1heExlbmd0aCA9IGxlbjtcbiAgICB9XG5cbiAgICBmb3IgKGNociBpbiBkaXJ0eSkge1xuICAgICAgICB2YXIgZmEgPSB0aGlzLmZlYXR1cmVzQnlDaHJbY2hyXTtcbiAgICAgICAgZmEuc29ydChmdW5jdGlvbihmMSwgZjIpIHtcbiAgICAgICAgICAgIHZhciBkID0gZjEubWluIC0gZjIubWluO1xuICAgICAgICAgICAgaWYgKGQgIT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgICAgIHJldHVybiBmMS5tYXggLSBmMi5tYXg7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLmNoclJpbmcgPSBudWxsO1xufVxuXG5NZW1TdG9yZS5wcm90b3R5cGUuX2luZGV4Rm9yID0gZnVuY3Rpb24oZmEsIHApIHtcbiAgICB2YXIgbGIgPSAwLCB1YiA9IGZhLmxlbmd0aDtcbiAgICB3aGlsZSAodWIgPiBsYikge1xuICAgICAgICB2YXIgbWlkID0gKChsYiArIHViKS8yKXwwO1xuICAgICAgICBpZiAobWlkID49IGZhLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmYS5sZW5ndGg7XG4gICAgICAgIHZhciBtZyA9IGZhW21pZF07XG4gICAgICAgIGlmIChwIDwgbWcubWluKSB7XG4gICAgICAgICAgICB1YiA9IG1pZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxiID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdWI7XG59XG5cbk1lbVN0b3JlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgpIHtcbiAgICB2YXIgZmEgPSB0aGlzLmZlYXR1cmVzQnlDaHJbY2hyXTtcbiAgICBpZiAoIWZhKSB7XG4gICAgICAgIGlmIChjaHIuaW5kZXhPZignY2hyJykgPT0gMClcbiAgICAgICAgICAgIGZhID0gdGhpcy5mZWF0dXJlc0J5Q2hyW2Noci5zdWJzdHJpbmcoMyldO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBmYSA9IHRoaXMuZmVhdHVyZXNCeUNoclsnY2hyJyArIGNocl07XG4gICAgfVxuICAgIGlmICghZmEpXG4gICAgICAgIHJldHVybiBbXTtcblxuICAgIHZhciBtaW5pID0gTWF0aC5tYXgoMCwgdGhpcy5faW5kZXhGb3IoZmEsIG1pbiAtIHRoaXMubWF4TGVuZ3RoIC0gMSkpO1xuICAgIHZhciBtYXhpID0gTWF0aC5taW4oZmEubGVuZ3RoIC0gMSwgdGhpcy5faW5kZXhGb3IoZmEsIG1heCkpO1xuXG4gICAgdmFyIHJlcyA9IFtdO1xuICAgIGZvciAodmFyIGZpID0gbWluaTsgZmkgPD0gbWF4aTsgKytmaSkge1xuICAgICAgICB2YXIgZiA9IGZhW2ZpXTtcbiAgICAgICAgaWYgKGYubWluIDw9IG1heCAmJiBmLm1heCA+PSBtaW4pXG4gICAgICAgICAgICByZXMucHVzaChmKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cblxuTWVtU3RvcmUucHJvdG90eXBlLmZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIpIHtcbiAgICBpZiAodGhpcy5jaHJSaW5nID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5jaHJSaW5nID0gW107XG4gICAgICAgIGZvciAodmFyIGNociBpbiB0aGlzLmZlYXR1cmVzQnlDaHIpIHtcbiAgICAgICAgICAgIHRoaXMuY2hyUmluZy5wdXNoKGNocik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaHJSaW5nLnNvcnQoKTtcbiAgICB9XG5cbiAgICB2YXIgZmEgPSB0aGlzLmZlYXR1cmVzQnlDaHJbY2hyXTtcbiAgICBpZiAoIWZhKSB7XG4gICAgICAgIGlmIChjaHIuaW5kZXhPZignY2hyJykgPT0gMCkge1xuICAgICAgICAgICAgY2hyID0gY2hyLnN1YnN0cmluZygzKTtcbiAgICAgICAgICAgIGZhID0gdGhpcy5mZWF0dXJlc0J5Q2hyW2Nocl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaHIgPSAnY2hyJyArIGNocjtcbiAgICAgICAgICAgIGZhID0gdGhpcy5mZWF0dXJlc0J5Q2hyW2Nocl07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFmYSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICB2YXIgaSA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuX2luZGV4Rm9yKGZhLCBwb3MpLCBmYS5sZW5ndGggLSAxKSk7XG4gICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgd2hpbGUgKGkgPCBmYS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBmID0gZmFbaSsrXTtcbiAgICAgICAgICAgIGlmIChmLm1pbiA+IHBvcylcbiAgICAgICAgICAgICAgICByZXR1cm4gZjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2hySW5kID0gdGhpcy5jaHJSaW5nLmluZGV4T2YoY2hyKSArIDE7XG4gICAgICAgIGlmIChjaHJJbmQgPj0gdGhpcy5jaHJSaW5nLmxlbmd0aClcbiAgICAgICAgICAgIGNockluZCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmROZXh0RmVhdHVyZSh0aGlzLmNoclJpbmdbY2hySW5kXSwgMCwgZGlyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAoaSA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgZiA9IGZhW2ktLV07XG4gICAgICAgICAgICBpZiAoZi5tYXggPCBwb3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGY7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNockluZCA9IHRoaXMuY2hyUmluZy5pbmRleE9mKGNocikgLSAxO1xuICAgICAgICBpZiAoY2hySW5kIDwgMClcbiAgICAgICAgICAgIGNockluZCA9IHRoaXMuY2hyUmluZy5sZW5ndGggLSAxO1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kTmV4dEZlYXR1cmUodGhpcy5jaHJSaW5nW2NockluZF0sIDEwMDAwMDAwMDAwLCBkaXIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTWVtU3RvcmVGZWF0dXJlU291cmNlKHNvdXJjZSkge1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIEZlYXR1cmVTb3VyY2VCYXNlLmNhbGwodGhpcyk7XG4gICAgdGhpcy5zdG9yZUhvbGRlciA9IG5ldyBBd2FpdGVkKCk7XG4gICAgdGhpcy5wYXJzZXIgPSBkYWxsaWFuY2VfbWFrZVBhcnNlcihzb3VyY2UucGF5bG9hZCk7XG4gICAgaWYgKCF0aGlzLnBhcnNlcikge1xuICAgICAgICB0aHJvdyBcIlVuc3VwcG9ydGVkIG1lbXN0b3JlIHBheWxvYWQ6IFwiICsgc291cmNlLnBheWxvYWQ7XG4gICAgfVxuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLl9sb2FkKGZ1bmN0aW9uKHJlc3AsIGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzQi5lcnJvciA9IGVycjtcbiAgICAgICAgICAgIHRoaXNCLnN0b3JlSG9sZGVyLnByb3ZpZGUobnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSBuZXcgTWVtU3RvcmUoKTtcbiAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGxpbmVzID0gcmVzcC5zcGxpdCgnXFxuJyk7XG5cbiAgICAgICAgICAgIHZhciBzZXNzaW9uID0gdGhpc0IucGFyc2VyLmNyZWF0ZVNlc3Npb24oZnVuY3Rpb24oZikge2ZlYXR1cmVzLnB1c2goZil9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCBsaW5lcy5sZW5ndGg7ICsrbGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2xpXTtcbiAgICAgICAgICAgICAgICBpZiAobGluZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24ucGFyc2UobGluZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2Vzc2lvbi5mbHVzaCgpO1xuXG4gICAgICAgICAgICBzdG9yZS5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7XG5cbiAgICAgICAgICAgIHRoaXNCLnN0b3JlSG9sZGVyLnByb3ZpZGUoc3RvcmUpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZSk7XG5cbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuX2xvYWQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnNvdXJjZS5ibG9iKSB7XG4gICAgICAgIHZhciByID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhyLnJlc3VsdCwgci5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgci5yZWFkQXNUZXh0KHRoaXMuc291cmNlLmJsb2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZS5jcmVkZW50aWFscylcbiAgICAgICAgICAgIHZhciBvcHRzID0ge2NyZWRlbnRpYWxzIDogdGhpcy5zb3VyY2UuY3JlZGVudGlhbHN9O1xuICAgICAgICB0ZXh0WEhSKHRoaXMuc291cmNlLnVyaSwgY2FsbGJhY2ssIG9wdHMpO1xuICAgIH1cbn1cblxuTWVtU3RvcmVGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY250KSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLnN0b3JlSG9sZGVyLmF3YWl0KGZ1bmN0aW9uKHN0b3JlKSB7XG4gICAgICAgIGlmIChzdG9yZSkge1xuICAgICAgICAgICAgdmFyIGYgPSBzdG9yZS5mZXRjaChjaHIsIG1pbiwgbWF4KTtcbiAgICAgICAgICAgIHJldHVybiBjbnQobnVsbCwgZiwgMTAwMDAwMDAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjbnQodGhpc0IuZXJyb3IpXG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuTWVtU3RvcmVGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5wYXJzZXIgJiYgdGhpcy5wYXJzZXIuZ2V0U3R5bGVTaGVldClcbiAgICAgICAgdGhpcy5wYXJzZXIuZ2V0U3R5bGVTaGVldChjYWxsYmFjaylcbn1cblxuTWVtU3RvcmVGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXREZWZhdWx0RklQcyA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aWVyKSB7XG4gICAgaWYgKHRoaXMucGFyc2VyICYmIHRoaXMucGFyc2VyLmdldERlZmF1bHRGSVBzKVxuICAgICAgICB0aGlzLnBhcnNlci5nZXREZWZhdWx0RklQcyhjYWxsYmFjaywgdGllcik7XG59XG5cbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2NhbGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIDEwMDAwMDAwMDtcbn1cblxuTWVtU3RvcmVGZWF0dXJlU291cmNlLnByb3RvdHlwZS5maW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCBjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpcy5zdG9yZUhvbGRlci5hd2FpdChmdW5jdGlvbihzdG9yZSkge1xuICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhzdG9yZS5maW5kTmV4dEZlYXR1cmUoY2hyLCBwb3MsIGRpcikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRoaXNCLmVycm9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5cbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuY2FwYWJpbGl0aWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNhcHMgPSB7bGVhcDogdHJ1ZX07XG4gICAgcmV0dXJuIGNhcHM7XG59XG5cbmRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5KCdtZW1zdG9yZScsIGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgIHJldHVybiB7ZmVhdHVyZXM6IG5ldyBNZW1TdG9yZUZlYXR1cmVTb3VyY2Uoc291cmNlKX07XG59KTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBkcmF3U2VxVGllciB9IGZyb20gXCIuL3NlcXVlbmNlLWRyYXcuanNcIjtcblxuaW1wb3J0IHsgR3JpZEdseXBoIH0gZnJvbSBcIi4vZ2x5cGhzLmpzXCI7XG5cbmltcG9ydCAqIGFzIERlZmF1bHRSZW5kZXJlciBmcm9tIFwiLi9kZWZhdWx0LXJlbmRlcmVyXCI7XG5cbmltcG9ydCAqIGFzIFIgZnJvbSBcInJhbWRhXCI7XG5cbmV4cG9ydCB7IHJlbmRlclRpZXIsIGRyYXdUaWVyIH07XG5cblxuLyogUmVuZGVycyBtdWx0aXBsZSB0aWVycyBpbiBhIHNpbmdsZSB0cmFjay5cbiAgIFdvcmtzIGJ5IHNpbXBseSBkcmF3aW5nIHNldmVyYWwgdGllcnMgdG8gYSBzaW5nbGUgY2FudmFzLlxuICAgQWN0dWFsIHJlbmRlcmluZyBpcyBkb25lIHVzaW5nIGRlZmF1bHQtcmVuZGVyZXIuZXM2LlxuICAgQSBtdWx0aS10aWVyIHJlbmRlcmVyIGlzIGNvbmZpZ3VyZWQgYnkgYWRkaW5nIHRoZSBmb2xsb3dpbmcgdG8gYSB0aWVyJ3NcbiAgIGNvbmZpZ3VyYXRpb246XG4gICByZW5kZXJlcjogJ211bHRpJyxcbiAgIG11bHRpOiB7XG4gICAgICAgbXVsdGlfaWQ6IFwibXVsdGlfMVwiLFxuICAgfVxuXG4gICBBbGwgc3VidGllcnMgd2l0aCB0aGUgXCJtdWx0aV8xXCIgbXVsdGlfaWQgd2lsbCBiZSBkcmF3biB0byB0aGlzIHRpZXIncyBjYW52YXMuXG4gKi9cblxuZnVuY3Rpb24gcmVuZGVyVGllcihzdGF0dXMsIHRpZXIpIHtcbiAgICBkcmF3VGllcih0aWVyKTtcbiAgICB0aWVyLnVwZGF0ZVN0YXR1cyhzdGF0dXMpO1xufVxuXG5mdW5jdGlvbiBkcmF3VGllcihtdWx0aVRpZXIpIHtcbiAgICBsZXQgbXVsdGlDb25maWcgPSBtdWx0aVRpZXIuZGFzU291cmNlLm11bHRpO1xuICAgIGxldCBnZXRTdWJDb25maWcgPSB0ID0+IHQuZGFzU291cmNlLnN1YjtcblxuICAgIC8vIFBhZGRpbmcgaXMgdXNlZCBmb3IgZmluZGluZyB0aGUgY29ycmVjdCBjYW52YXMgc2l6ZSBhbmQgbXVzdCBiZSBzZXRcbiAgICBpZiAoIW11bHRpVGllci5wYWRkaW5nKVxuICAgICAgICBtdWx0aVRpZXIucGFkZGluZyA9IDM7XG5cbiAgICBsZXQgY2FudmFzID0gbXVsdGlUaWVyLnZpZXdwb3J0LmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBsZXQgcmV0aW5hID0gbXVsdGlUaWVyLmJyb3dzZXIucmV0aW5hICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMTtcbiAgICBpZiAocmV0aW5hKSB7XG4gICAgICAgIGNhbnZhcy5zY2FsZSgyLCAyKTtcbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgb3V0IG9ubHkgdGllcnMgdGhhdCBhcmUgdG8gYmUgZHJhd24gaW4gdGhpcyBtdWx0aXRpZXIsXG4gICAgLy8gYW5kIGFsc28gaGF2ZSBmZXRjaGVkIGRhdGEuXG4gICAgbGV0IHRpZXJzID0gbXVsdGlUaWVyLmJyb3dzZXIudGllcnMuXG4gICAgICAgICAgICBmaWx0ZXIodGllciA9PiB0eXBlb2YoZ2V0U3ViQ29uZmlnKHRpZXIpKSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgICAgIGdldFN1YkNvbmZpZyh0aWVyKS5tdWx0aV9pZCA9PT0gbXVsdGlDb25maWcubXVsdGlfaWQgJiZcbiAgICAgICAgICAgICAgICAgICAodGllci5jdXJyZW50RmVhdHVyZXMgfHwgdGllci5jdXJyZW50U2VxdWVuY2UpKTtcblxuICAgIC8vIFRoZSBzaG9ydGVzdCBkaXN0YW5jZSBmcm9tIHRoZSB0b3Agb2YgdGhlIGNhbnZhcyB0byBhIHN1YnRpZXJcbiAgICBsZXQgbWluT2Zmc2V0ID0gUi5waXBlKFxuICAgICAgICBSLm1hcCh0aWVyID0+IHRpZXIuZGFzU291cmNlLnN1Yi5vZmZzZXQpLFxuICAgICAgICBSLnJlZHVjZSgoYWNjLCBvZmZzZXQpID0+IG9mZnNldCA8IGFjYyA/IG9mZnNldCA6IGFjYywgMClcbiAgICApKHRpZXJzKTtcblxuICAgIHRpZXJzLmZvckVhY2godGllciA9PiB7XG4gICAgICAgIGlmICh0aWVyLnNlcXVlbmNlU291cmNlKSB7XG4gICAgICAgICAgICBkcmF3U2VxVGllcih0aWVyLCB0aWVyLmN1cnJlbnRTZXF1ZW5jZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTaGlmdCBzdWJ0aWVycyB1cCBieSB0aGUgbWluaW11bSBvZmZzZXQsXG4gICAgICAgICAgICAvLyBzbyB0aGF0IHRoZXJlJ3Mgbm8gZW1wdHkgc3BhY2UgYXQgdGhlIHRvcFxuICAgICAgICAgICAgRGVmYXVsdFJlbmRlcmVyLnByZXBhcmVTdWJ0aWVycyh0aWVyLCBjYW52YXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFN1YkNvbmZpZyh0aWVyKS5vZmZzZXQgLSBtaW5PZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE11c3QgYmUgc2V0IGZvciBwYWludGluZyB0byB3b3JrXG4gICAgICAgIGlmICghbXVsdGlUaWVyLmdseXBoQ2FjaGVPcmlnaW4pXG4gICAgICAgICAgICBtdWx0aVRpZXIuZ2x5cGhDYWNoZU9yaWdpbiA9IHRpZXIuZ2x5cGhDYWNoZU9yaWdpbjtcbiAgICB9KTtcblxuICAgIC8vIFRoZSBjYW52YXMgc2hvdWxkIGZpdCBhbGwgc3VidGllcnMsIGluY2x1ZGluZyBvZmZzZXRzLCBidXQgbm8gbW9yZVxuICAgIGxldCBjYW52YXNIZWlnaHQgPSBSLnBpcGUoXG4gICAgICAgIFIubWFwKHRpZXIgPT5cbiAgICAgICAgICAgICAgUi5tYXAoc3VidGllciA9PiBzdWJ0aWVyLmhlaWdodCArIGdldFN1YkNvbmZpZyh0aWVyKS5vZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgIHRpZXIuc3VidGllcnMpKSxcbiAgICAgICAgUi5mbGF0dGVuLFxuICAgICAgICBSLnJlZHVjZSgoYWNjLCBoKSA9PiBoID4gYWNjID8gaCA6IGFjYywgLUluZmluaXR5KSxcbiAgICAgICAgUi5hZGQoLW1pbk9mZnNldClcbiAgICApKHRpZXJzKTtcblxuICAgIHByZXBhcmVWaWV3cG9ydChtdWx0aVRpZXIsIGNhbnZhcywgcmV0aW5hLCBjYW52YXNIZWlnaHQsIHRydWUpO1xuXG4gICAgdGllcnMuc29ydCgodDEsIHQyKSA9PiBnZXRTdWJDb25maWcodDEpLnogPiBnZXRTdWJDb25maWcodDIpLnopO1xuXG4gICAgLy8gVE9ETzogbWFrZSBpdCBhZGQgdGhlIGdseXBoIG9uIHRvIHRoZSBmaXJzdCBhdmFpbGFibGUgdGllcjtcbiAgICAvLyBjcmFzaGVzIGlmIGxhc3QgdGllciBpcyBlbXB0eS4uLlxuICAgIGlmIChtdWx0aUNvbmZpZy5ncmlkICYmIHRpZXJzICYmIHRpZXJzW3RpZXJzLmxlbmd0aC0xXSAmJiB0aWVyc1t0aWVycy5sZW5ndGgtMV0uc3VidGllcnNbMF0pIHtcbiAgICAgICAgbGV0IGdyaWQgPSBuZXcgR3JpZEdseXBoKGNhbnZhc0hlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpQ29uZmlnLmdyaWRfb2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlDb25maWcuZ3JpZF9zcGFjaW5nKTtcbiAgICAgICAgLy8gcHJldHR5IGhhY2t5IHdheSBvZiBhZGRpbmcgdGhlIGdyaWQsIGJ1dCBpdCB3b3JrcyAobW9zdGx5KVxuICAgICAgICB0aWVyc1t0aWVycy5sZW5ndGgtMV0uc3VidGllcnNbMF0uZ2x5cGhzLnVuc2hpZnQoZ3JpZCk7XG4gICAgfVxuXG4gICAgdGllcnMuZm9yRWFjaCh0aWVyID0+IHtcbiAgICAgICAgLy8gTmVlZCB0byBzYXZlIGFuZCByZXN0b3JlIGNhbnZhcyB0byBtYWtlIHN1cmUgdGhhdCB0aGUgc3VidGllcnMgYXJlXG4gICAgICAgIC8vIGRyYXduIG9uIHRvcCBvZiBvbmUgYW5vdGhlciwgaWYgbm90IHNoaWZ0ZWQuLi5cbiAgICAgICAgY2FudmFzLnNhdmUoKTtcbiAgICAgICAgRGVmYXVsdFJlbmRlcmVyLnBhaW50KHRpZXIsIGNhbnZhcywgcmV0aW5hLCB0cnVlKTtcbiAgICAgICAgY2FudmFzLnJlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIG11bHRpVGllci5kcmF3T3ZlcmxheSgpO1xuXG4gICAgaWYgKG11bHRpQ29uZmlnLnF1YW50KSB7XG4gICAgICAgIGxldCBxdWFudENhbnZhcyA9IERlZmF1bHRSZW5kZXJlci5jcmVhdGVRdWFudE92ZXJsYXkobXVsdGlUaWVyLCBjYW52YXNIZWlnaHQrbXVsdGlUaWVyLnBhZGRpbmcqMiwgcmV0aW5hKTtcbiAgICAgICAgRGVmYXVsdFJlbmRlcmVyLnBhaW50UXVhbnQocXVhbnRDYW52YXMsIG11bHRpVGllciwgbXVsdGlDb25maWcucXVhbnQsIDEwKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mKG11bHRpVGllci5kYXNTb3VyY2UuZHJhd0NhbGxiYWNrKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIG11bHRpVGllci5kYXNTb3VyY2UuZHJhd0NhbGxiYWNrKGNhbnZhcywgbXVsdGlUaWVyKTtcbiAgICB9XG5cbiAgICBtdWx0aVRpZXIub3JpZ2luSGF4eCA9IDA7XG4gICAgbXVsdGlUaWVyLmJyb3dzZXIuYXJyYW5nZVRpZXJzKCk7XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVWaWV3cG9ydCh0aWVyLCBjYW52YXMsIHJldGluYSwgY2FudmFzSGVpZ2h0LCBjbGVhcj10cnVlKSB7XG4gICAgbGV0IGRlc2lyZWRXaWR0aCA9IHRpZXIuYnJvd3Nlci5mZWF0dXJlUGFuZWxXaWR0aCArIDIwMDA7XG4gICAgaWYgKHJldGluYSkge1xuICAgICAgICBkZXNpcmVkV2lkdGggKj0gMjtcbiAgICB9XG5cbiAgICBsZXQgZnB3ID0gdGllci52aWV3cG9ydC53aWR0aHwwO1xuICAgIGlmIChmcHcgPCBkZXNpcmVkV2lkdGggLSA1MCkge1xuICAgICAgICB0aWVyLnZpZXdwb3J0LndpZHRoID0gZnB3ID0gZGVzaXJlZFdpZHRoO1xuICAgIH1cblxuICAgIGNhbnZhc0hlaWdodCArPSAyKnRpZXIucGFkZGluZztcbiAgICBjYW52YXNIZWlnaHQgPSBNYXRoLm1heChjYW52YXNIZWlnaHQsIHRpZXIuYnJvd3Nlci5taW5UaWVySGVpZ2h0KTtcblxuICAgIGlmIChjYW52YXNIZWlnaHQgIT0gdGllci52aWV3cG9ydC5oZWlnaHQpIHtcbiAgICAgICAgdGllci52aWV3cG9ydC5oZWlnaHQgPSBjYW52YXNIZWlnaHQ7XG5cbiAgICAgICAgaWYgKHJldGluYSkge1xuICAgICAgICAgICAgdGllci52aWV3cG9ydC5oZWlnaHQgKj0gMjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRpZXIudmlld3BvcnRIb2xkZXIuc3R5bGUubGVmdCA9ICctMTAwMHB4JztcbiAgICB0aWVyLnZpZXdwb3J0LnN0eWxlLndpZHRoID0gcmV0aW5hID8gKCcnICsgKGZwdy8yKSArICdweCcpIDogKCcnICsgZnB3ICsgJ3B4Jyk7XG4gICAgdGllci52aWV3cG9ydC5zdHlsZS5oZWlnaHQgPSAnJyArIGNhbnZhc0hlaWdodCArICdweCc7XG4gICAgdGllci5sYXlvdXRIZWlnaHQgPSAgTWF0aC5tYXgoY2FudmFzSGVpZ2h0LCB0aWVyLmJyb3dzZXIubWluVGllckhlaWdodCk7XG5cbiAgICB0aWVyLnVwZGF0ZUhlaWdodCgpO1xuICAgIHRpZXIubm9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XG5cbiAgICBpZiAoY2xlYXIpIHtcbiAgICAgICAgRGVmYXVsdFJlbmRlcmVyLmNsZWFyVmlld3BvcnQoY2FudmFzLCBmcHcsIGNhbnZhc0hlaWdodCk7XG4gICAgfVxuXG4gICAgRGVmYXVsdFJlbmRlcmVyLmRyYXdVbm1hcHBlZCh0aWVyLCBjYW52YXMsIGNhbnZhc0hlaWdodCk7XG5cbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcbi8vXG4vLyBtZW1zdG9yZS5qc1xuLy9cblxuZnVuY3Rpb24gZm9ybWF0TG9uZ0ludChuKSB7XG4gICAgcmV0dXJuIChufDApLnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgJywnKVxufVxuXG5mdW5jdGlvbiBmb3JtYXRRdWFudExhYmVsKHYpIHtcbiAgICB2YXIgdCA9ICcnICsgdjtcbiAgICB2YXIgZG90ID0gdC5pbmRleE9mKCcuJyk7XG4gICAgaWYgKGRvdCA8IDApIHtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGRvdFRocmVzaG9sZCA9IDI7XG4gICAgICAgIGlmICh0LnN1YnN0cmluZygwLCAxKSA9PSAnLScpIHtcbiAgICAgICAgICAgICsrZG90VGhyZXNob2xkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvdCA+PSBkb3RUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHJldHVybiB0LnN1YnN0cmluZygwLCBkb3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHQuc3Vic3RyaW5nKDAsIGRvdCArIDIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGZvcm1hdExvbmdJbnQ6IGZvcm1hdExvbmdJbnQsXG4gICAgICAgIGZvcm1hdFF1YW50TGFiZWw6IGZvcm1hdFF1YW50TGFiZWxcbiAgICB9O1xufSIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTNcbi8vXG4vLyBvdmVybGF5LmpzOiBmZWF0dXJlc291cmNlcyBjb21wb3NlZCBmcm9tIG11bHRpcGxlIHVuZGVybHlpbmcgc291cmNlc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xuICAgIHZhciBhcnJheUluZGV4T2YgPSB1dGlscy5hcnJheUluZGV4T2Y7XG59XG5cbmZ1bmN0aW9uIE92ZXJsYXlGZWF0dXJlU291cmNlKHNvdXJjZXMsIG9wdHMpIHtcbiAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgIHRoaXMub3B0cyA9IG9wdHMgfHwge307XG4gICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMucmVhZGluZXNzTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5jaGFuZ2VMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLmJ1c2luZXNzID0gW107XG4gICAgdGhpcy5yZWFkaW5lc3MgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRoaXMuaW5pdE4oaSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZihvcHRzLm1lcmdlKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLm1lcmdlID0gb3B0cy5tZXJnZTtcbiAgICB9IGVsc2UgaWYgKG9wdHMubWVyZ2UgPT0gJ2NvbmNhdCcpIHtcbiAgICAgICAgdGhpcy5tZXJnZSA9IE92ZXJsYXlGZWF0dXJlU291cmNlX21lcmdlX2NvbmNhdDtcbiAgICB9IGVsc2UgaWYgKG9wdHMubWVyZ2UgPT0gJ2FsdGVybmF0ZXMnKSB7XG4gICAgICAgIHRoaXMubWVyZ2UgPSBPdmVybGF5RmVhdHVyZVNvdXJjZV9tZXJnZV9jb25jYXQ7XG4gICAgICAgIHRoaXMuZmlsdGVyRGlzcGF0Y2hPbk1ldGhvZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tZXJnZSA9IE92ZXJsYXlGZWF0dXJlU291cmNlX21lcmdlX2J5S2V5O1xuICAgIH1cbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmluaXROID0gZnVuY3Rpb24obikge1xuICAgIHZhciBzID0gdGhpcy5zb3VyY2VzW25dO1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpcy5idXNpbmVzc1tuXSA9IDA7XG5cbiAgICBpZiAocy5hZGRBY3Rpdml0eUxpc3RlbmVyKSB7XG4gICAgICAgIHMuYWRkQWN0aXZpdHlMaXN0ZW5lcihmdW5jdGlvbihiKSB7XG4gICAgICAgICAgICB0aGlzQi5idXNpbmVzc1tuXSA9IGI7XG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHMuYWRkQ2hhbmdlTGlzdGVuZXIpIHtcbiAgICAgICAgcy5hZGRDaGFuZ2VMaXN0ZW5lcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHMuYWRkUmVhZGluZXNzTGlzdGVuZXIpIHtcbiAgICAgICAgcy5hZGRSZWFkaW5lc3NMaXN0ZW5lcihmdW5jdGlvbihyKSB7XG4gICAgICAgICAgICB0aGlzQi5yZWFkaW5lc3Nbbl0gPSByO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5UmVhZGluZXNzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmFkZFJlYWRpbmVzc0xpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIHRoaXMucmVhZGluZXNzTGlzdGVuZXJzLnB1c2gobCk7XG4gICAgdGhpcy5ub3RpZnlSZWFkaW5lc3NMaXN0ZW5lcihsKTtcbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnJlbW92ZVJlYWRpbmVzc0xpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5yZWFkaW5lc3NMaXN0ZW5lcnMsIGwpO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5ub3RpZnlSZWFkaW5lc3MgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmVhZGluZXNzTGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRoaXMubm90aWZ5UmVhZGluZXNzTGlzdGVuZXIodGhpcy5yZWFkaW5lc3NMaXN0ZW5lcnNbaV0pO1xuICAgIH1cbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLm5vdGlmeVJlYWRpbmVzc0xpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIHZhciByID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmVhZGluZXNzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWRpbmVzc1tpXSAhPSBudWxsKSB7XG4gICAgICAgICAgICByID0gdGhpcy5yZWFkaW5lc3NbaV07IGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGwocik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5hZGRBY3Rpdml0eUxpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMucHVzaChsKTtcbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnJlbW92ZUFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLCBsKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5ub3RpZnlBY3Rpdml0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBidXN5ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYnVzaW5lc3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgYnVzeSArPSB0aGlzLmJ1c2luZXNzW2ldO1xuICAgIH1cblxuICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLmxlbmd0aDsgKytsaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVyc1tsaV0oYnVzeSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuYWRkQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIHRoaXMuY2hhbmdlTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLmNoYW5nZUxpc3RlbmVycywgbCk7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xuICAgIH1cbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLm5vdGlmeUNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCB0aGlzLmNoYW5nZUxpc3RlbmVycy5sZW5ndGg7ICsrbGkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXJzW2xpXSh0aGlzLmJ1c3kpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZXNbMF0uZ2V0U2NhbGVzKCk7XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzWzBdLmdldFN0eWxlU2hlZXQoY2FsbGJhY2spO1xufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuY2FwYWJpbGl0aWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNhcHMgPSB7fTtcbiAgICB2YXIgczAgPSB0aGlzLnNvdXJjZXNbMF07XG4gICAgaWYgKHMwLmNhcGFiaWxpdGllcykgXG4gICAgICAgIGNhcHMgPSBzaGFsbG93Q29weShzMC5jYXBhYmlsaXRpZXMoKSk7XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMuc291cmNlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgc2kgPSB0aGlzLnNvdXJjZXNbaV07XG4gICAgICAgIGlmIChzaS5jYXBhYmlsaXRpZXMpIHtcbiAgICAgICAgICAgIHZhciBjbyA9IHNpLmNhcGFiaWxpdGllcygpO1xuICAgICAgICAgICAgaWYgKGNvLnNlYXJjaCkge1xuICAgICAgICAgICAgICAgIGNhcHMuc2VhcmNoID0gY28uc2VhcmNoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhcHM7XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbihxdWVyeSwgY2FsbGJhY2spIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc291cmNlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAoX3NvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGhpcy5zb3VyY2VzW2ldLCAnc2VhcmNoJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZXNbaV0uc2VhcmNoKHF1ZXJ5LCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2ssIHN0eWxlRmlsdGVycykge1xuICAgIHZhciBzb3VyY2VzO1xuICAgIGlmICh0aGlzLmZpbHRlckRpc3BhdGNoT25NZXRob2QpIHtcbiAgICAgICAgc291cmNlcyA9IFtdO1xuICAgICAgICB2YXIgc2ZsID0gc3R5bGVGaWx0ZXJzLmxpc3QoKTtcbiAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXMuc291cmNlcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZXNbc2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IHNmbC5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gc2ZsW2ZpXTtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbHRlci5tZXRob2QgfHwgZmlsdGVyLm1ldGhvZCA9PSBzb3VyY2UubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzLnB1c2goc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc291cmNlcyA9IHRoaXMuc291cmNlcztcbiAgICB9XG5cbiAgICB2YXIgYmF0b24gPSBuZXcgT3ZlcmxheUJhdG9uKHRoaXMsIGNhbGxiYWNrLCBzb3VyY2VzKTtcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc291cmNlcy5sZW5ndGg7ICsrc2kpIHtcblx0ICAgdGhpcy5mZXRjaE4oYmF0b24sIHNpLCBzb3VyY2VzW3NpXSwgY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBzdHlsZUZpbHRlcnMpO1xuICAgIH1cbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoTiA9IGZ1bmN0aW9uKGJhdG9uLCBzaSwgc291cmNlLCBjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIHN0eWxlRmlsdGVycykge1xuICAgIC8vIEZJWE1FIHNob3VsZCB3ZSB0cnkgdG8gcHJ1bmUgc3R5bGVGaWx0ZXJzP1xuICAgIHNvdXJjZS5mZXRjaChjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGZ1bmN0aW9uKHN0YXR1cywgZmVhdHVyZXMsIHNjYWxlKSB7XG5cdCAgIHJldHVybiBiYXRvbi5jb21wbGV0ZWQoc2ksIHN0YXR1cywgZmVhdHVyZXMsIHNjYWxlKTtcbiAgICB9LCBzdHlsZUZpbHRlcnMpO1xufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucXVhbnRGaW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCB0aHJlc2hvbGQsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuc291cmNlc1swXS5xdWFudEZpbmROZXh0RmVhdHVyZShjaHIsIHBvcywgZGlyLCB0aHJlc2hvbGQsIGNhbGxiYWNrKTtcbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuc291cmNlc1swXS5maW5kTmV4dEZlYXR1cmUoY2hyLCBwb3MsIGRpciwgY2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiBPdmVybGF5QmF0b24oc291cmNlLCBjYWxsYmFjaywgc291cmNlcykge1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgIHRoaXMuY291bnQgPSBzb3VyY2VzLmxlbmd0aDtcblxuICAgIHRoaXMucmV0dXJuQ291bnQgPSAwO1xuICAgIHRoaXMuc3RhdHVzQ291bnQgPSAwO1xuICAgIHRoaXMucmV0dXJucyA9IFtdO1xuICAgIHRoaXMuZmVhdHVyZXMgPSBbXVxuICAgIHRoaXMuc3RhdHVzZXMgPSBbXTtcbiAgICB0aGlzLnNjYWxlID0gbnVsbDtcbn1cblxuT3ZlcmxheUJhdG9uLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbihpbmRleCwgc3RhdHVzLCBmZWF0dXJlcywgc2NhbGUpIHtcbiAgICBpZiAodGhpcy5zY2FsZSA9PSBudWxsIHx8IGluZGV4ID09IDApIFxuXHQgICB0aGlzLnNjYWxlID0gc2NhbGU7XG5cbiAgICBpZiAodGhpcy5yZXR1cm5zW2luZGV4XSlcblx0ICAgdGhyb3cgJ011bHRpcGxlIHJldHVybnMgZm9yIHNvdXJjZSAnICsgaW5kZXg7XG5cbiAgICB0aGlzLnJldHVybnNbaW5kZXhdID0gdHJ1ZTtcbiAgICB0aGlzLnJldHVybkNvdW50Kys7XG5cbiAgICB0aGlzLmZlYXR1cmVzW2luZGV4XSA9IGZlYXR1cmVzO1xuXG4gICAgaWYgKHN0YXR1cykge1xuICAgIFx0dGhpcy5zdGF0dXNlc1tpbmRleF0gPSBzdGF0dXM7XG4gICAgXHR0aGlzLnN0YXR1c0NvdW50Kys7XG4gICAgfVxuXG5cbiAgICBpZiAodGhpcy5yZXR1cm5Db3VudCA9PSB0aGlzLmNvdW50KSB7XG4gICAgXHRpZiAodGhpcy5zdGF0dXNDb3VudCA+IDApIHtcbiAgICBcdCAgICB2YXIgbWVzc2FnZSA9ICcnO1xuICAgIFx0ICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCB0aGlzLmNvdW50OyArK3NpKSB7XG4gICAgICAgIFx0XHR2YXIgcyA9IHRoaXMuc3RhdHVzZXNbc2ldO1xuICAgICAgICBcdFx0aWYgKHMpIHtcbiAgICAgICAgXHRcdCAgICBpZiAobWVzc2FnZS5sZW5ndGggPiAwKSBcbiAgICAgICAgXHRcdFx0bWVzc2FnZSArPSAnLCAnO1xuICAgICAgICBcdFx0ICAgIG1lc3NhZ2UgKz0gcztcbiAgICAgICAgXHRcdH1cbiAgICBcdCAgICB9XG4gICAgXHQgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2sobWVzc2FnZSwgbnVsbCwgdGhpcy5zY2FsZSk7XG4gICAgXHR9IGVsc2Uge1xuICAgIFx0ICAgIHRoaXMuY2FsbGJhY2sobnVsbCwgdGhpcy5zb3VyY2UubWVyZ2UodGhpcy5mZWF0dXJlcywgdGhpcy5zb3VyY2VzKSwgdGhpcy5zY2FsZSk7XG4gICAgXHR9XG4gICAgfVxufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0RGVmYXVsdEZJUHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCB0aGlzLnNvdXJjZXMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgIHZhciBzID0gdGhpcy5zb3VyY2VzW3NpXTtcbiAgICAgICAgaWYgKHMuZ2V0RGVmYXVsdEZJUHMpXG4gICAgICAgICAgICBzLmdldERlZmF1bHRGSVBzKGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5rZXlGb3JGZWF0dXJlID0gZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgIHJldHVybiAnJyArIGZlYXR1cmUubWluICsgJy4uJyArIGZlYXR1cmUubWF4O1xufVxuXG5mdW5jdGlvbiBPdmVybGF5RmVhdHVyZVNvdXJjZV9tZXJnZV9ieUtleShmZWF0dXJlU2V0cykge1xuICAgIHZhciBvbWFwcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgZnNpID0gMTsgZnNpIDwgZmVhdHVyZVNldHMubGVuZ3RoOyArK2ZzaSkge1xuICAgICAgICB2YXIgb20gPSB7fTtcbiAgICAgICAgdmFyIG9mID0gZmVhdHVyZVNldHNbZnNpXTtcbiAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IG9mLmxlbmd0aDsgKytmaSkge1xuICAgIFx0ICAgb21bdGhpcy5rZXlGb3JGZWF0dXJlKG9mW2ZpXSldID0gb2ZbZmldO1xuICAgICAgICB9XG4gICAgICAgIG9tYXBzLnB1c2gob20pO1xuICAgIH1cblxuXG4gICAgdmFyIG1mID0gW107XG4gICAgdmFyIGZsID0gZmVhdHVyZVNldHNbMF07XG4gICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZsLmxlbmd0aDsgKytmaSkge1xuICAgIFx0dmFyIGYgPSBmbFtmaV07XG5cbiAgICAgICAgZm9yICh2YXIgb2kgPSAwOyBvaSA8IG9tYXBzLmxlbmd0aDsgKytvaSkge1xuICAgICAgICAgICAgdmFyIG9tID0gb21hcHNbb2ldO1xuICAgICAgICBcdG9mID0gb21bdGhpcy5rZXlGb3JGZWF0dXJlKGYpXVxuICAgICAgICBcdGlmIChvZikge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gb2YpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT09ICdzY29yZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYuc2NvcmUyID0gb2Yuc2NvcmU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoayA9PT0gJ21pbicgfHwgayA9PT0gJ21heCcgfHwgayA9PT0gJ3NlZ21lbnQnIHx8IGsgPT09ICdfY2FjaGVkU3R5bGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmW2tdID0gb2Zba107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIFx0fVxuICAgICAgICB9XG4gICAgXHRtZi5wdXNoKGYpO1xuICAgIH1cbiAgICByZXR1cm4gbWY7XG59XG5cbmZ1bmN0aW9uIE92ZXJsYXlGZWF0dXJlU291cmNlX21lcmdlX2NvbmNhdChmZWF0dXJlU2V0cywgc291cmNlcykge1xuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgIGZvciAodmFyIGZzaSA9IDA7IGZzaSA8IGZlYXR1cmVTZXRzLmxlbmd0aDsgKytmc2kpIHtcbiAgICAgICAgdmFyIGZzID0gZmVhdHVyZVNldHNbZnNpXTtcbiAgICAgICAgdmFyIG5hbWUgPSBzb3VyY2VzW2ZzaV0ubmFtZTtcbiAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgdmFyIGYgPSBmc1tmaV07XG4gICAgICAgICAgICBmLm1ldGhvZCA9IG5hbWU7XG4gICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmZWF0dXJlcztcbn1cblxuZnVuY3Rpb24gX3NvdXJjZUFkYXB0ZXJJc0NhcGFibGUocywgY2FwKSB7XG4gICAgaWYgKCFzLmNhcGFiaWxpdGllcylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGVsc2UgXG4gICAgICAgIHJldHVybiBzLmNhcGFiaWxpdGllcygpW2NhcF07XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgT3ZlcmxheUZlYXR1cmVTb3VyY2U6IE92ZXJsYXlGZWF0dXJlU291cmNlXG4gICAgfTtcbn1cblxuXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDE0XG4vL1xuLy8gYmVkd2lnLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYmluID0gcmVxdWlyZSgnLi9iaW4nKTtcbiAgICB2YXIgVVJMRmV0Y2hhYmxlID0gYmluLlVSTEZldGNoYWJsZTtcbiAgICB2YXIgQmxvYkZldGNoYWJsZSA9IGJpbi5CbG9iRmV0Y2hhYmxlO1xuICAgIHZhciByZWFkSW50ID0gYmluLnJlYWRJbnQ7XG5cbiAgICB2YXIgYmJpID0gcmVxdWlyZSgnLi9iaWd3aWcnKTtcbiAgICB2YXIgQklHX1dJR19NQUdJQyA9IGJiaS5CSUdfV0lHX01BR0lDO1xuICAgIHZhciBCSUdfQkVEX01BR0lDID0gYmJpLkJJR19CRURfTUFHSUM7XG5cbiAgICB2YXIgbGgzdXRpbHMgPSByZXF1aXJlKCcuL2xoM3V0aWxzJyk7XG4gICAgdmFyIHVuYmd6ZiA9IGxoM3V0aWxzLnVuYmd6ZjtcblxuICAgIHZhciBiYW0gPSByZXF1aXJlKCcuL2JhbScpO1xuICAgIHZhciBCQU1fTUFHSUMgPSBiYW0uQkFNX01BR0lDO1xuICAgIHZhciBCQUlfTUFHSUMgPSBiYW0uQkFJX01BR0lDO1xuXG4gICAgdmFyIHRiaSA9IHJlcXVpcmUoJy4vdGFiaXgnKTtcbiAgICB2YXIgVEFCSVhfTUFHSUMgPSB0YmkuVEFCSVhfTUFHSUM7XG5cbiAgICB2YXIgRW5jb2RlRmV0Y2hhYmxlID0gcmVxdWlyZSgnLi9lbmNvZGUnKS5FbmNvZGVGZXRjaGFibGU7XG59XG5cbmZ1bmN0aW9uIHByb2JlUmVzb3VyY2Uoc291cmNlLCBsaXN0ZW5lciwgcmV0cnkpIHtcbiAgICB2YXIgQkVEX1JFR0VYUCA9IG5ldyBSZWdFeHAoJ15cXFxcdytcXFxccytbMC05XStcXFxccytbMC05XSsuKiQnKTtcbiAgICB2YXIgS1ZfUkVHRVhQPS8oW149XSspPVxcXCI/KFteXFxcIl0rKVxcXCI/LztcbiAgICB2YXIgVkNGSEVBRF9SRSA9IC9eIyNcXHMqZmlsZWZvcm1hdD1WQ0Z2NFxcLi4rLztcblxuICAgIHZhciBmZXRjaGFibGU7XG4gICAgaWYgKHNvdXJjZS5ibG9iKVxuICAgICAgICBmZXRjaGFibGUgPSBuZXcgQmxvYkZldGNoYWJsZShzb3VyY2UuYmxvYik7XG4gICAgZWxzZSBpZiAoc291cmNlLnRyYW5zcG9ydCA9PSAnZW5jb2RlJylcbiAgICAgICAgZmV0Y2hhYmxlID0gbmV3IEVuY29kZUZldGNoYWJsZShzb3VyY2UudXJpKTtcbiAgICBlbHNlXG4gICAgICAgIGZldGNoYWJsZSA9IG5ldyBVUkxGZXRjaGFibGUoc291cmNlLnVyaSwge2NyZWRlbnRpYWxzOiBzb3VyY2UuY3JlZGVudGlhbHN9KTtcblxuICAgIGZldGNoYWJsZS5zbGljZSgwLCAxPDwxNikuc2FsdGVkKCkuZmV0Y2goZnVuY3Rpb24ocmVzdWx0LCBlcnJvcikge1xuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKCFyZXRyeSkge1xuICAgICAgICAgICAgICAgIHNvdXJjZS5jcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgICAgICAgICAgcHJvYmVSZXNvdXJjZShzb3VyY2UsIGxpc3RlbmVyLCB0cnVlKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBcIkNvdWxkbid0IGZldGNoIGRhdGFcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyZXN1bHQpO1xuICAgICAgICB2YXIgbGEgPSBuZXcgVWludDMyQXJyYXkocmVzdWx0LCAwLCAxKTtcbiAgICAgICAgdmFyIG1hZ2ljID0gbGFbMF07XG4gICAgICAgIGlmIChtYWdpYyA9PSBCSUdfV0lHX01BR0lDIHx8IG1hZ2ljID09IEJJR19CRURfTUFHSUMpIHtcbiAgICAgICAgICAgIHNvdXJjZS50aWVyX3R5cGUgPSAnYndnJztcbiAgICAgICAgICAgIHZhciBuYW1lRXh0cmFjdFBhdHRlcm4gPSBuZXcgUmVnRXhwKCcvPyhbXi9dKz8pKC5id3wuYmJ8LmJpZ1dpZ3wuYmlnQmVkKT8kJyk7XG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBuYW1lRXh0cmFjdFBhdHRlcm4uZXhlYyhzb3VyY2UudXJpIHx8IHNvdXJjZS5ibG9iLm5hbWUpO1xuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLm5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSBpZiAobWFnaWMgPT0gQkFJX01BR0lDKSB7XG4gICAgICAgICAgICBzb3VyY2UudGllcl90eXBlID0gJ2JhaSc7XG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmIChiYVswXSA9PSAzMSB8fCBiYVsxXSA9PSAxMzkpIHtcbiAgICAgICAgICAgIHZhciB1bmMgPSB1bmJnemYocmVzdWx0KTtcbiAgICAgICAgICAgIHZhciB1bmNiYSA9IG5ldyBVaW50OEFycmF5KHVuYyk7XG4gICAgICAgICAgICBtYWdpYyA9IHJlYWRJbnQodW5jYmEsIDApO1xuICAgICAgICAgICAgaWYgKG1hZ2ljID09IEJBTV9NQUdJQykge1xuICAgICAgICAgICAgICAgIHNvdXJjZS50aWVyX3R5cGUgPSAnYmFtJztcbiAgICAgICAgICAgICAgICB2YXIgbmFtZUV4dHJhY3RQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnLz8oW14vXSs/KSguYmFtKT8kJyk7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbmFtZUV4dHJhY3RQYXR0ZXJuLmV4ZWMoc291cmNlLnVyaSB8fCBzb3VyY2UuYmxvYi5uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlLm5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWFnaWMgPT0gVEFCSVhfTUFHSUMpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UudGllcl90eXBlID0gJ3RhYml4LWluZGV4JztcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWFnaWMgPT0gMHg2OTY2MjMyMykge1xuICAgICAgICAgICAgICAgIHNvdXJjZS50aWVyX3R5cGUgPSAndGFiaXgnO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5wYXlsb2FkID0gJ3ZjZic7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWVFeHRyYWN0UGF0dGVybiA9IG5ldyBSZWdFeHAoJy8/KFteL10rPykoLnZjZik/KC5neik/JCcpO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG5hbWVFeHRyYWN0UGF0dGVybi5leGVjKHNvdXJjZS51cmkgfHwgc291cmNlLmJsb2IubmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZS5uYW1lID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgbnVsbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtYWdpYyA9ICcgKyBtYWdpYy50b1N0cmluZygxNikpO1xuICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgXCJVbnN1cHBvcnRlZCBmb3JtYXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYmEpO1xuICAgICAgICAgICAgdmFyIGxpbmVzID0gdGV4dC5zcGxpdChcIlxcblwiKTtcblxuICAgICAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+IDAgJiYgVkNGSEVBRF9SRS50ZXN0KGxpbmVzWzBdKSkge1xuICAgICAgICAgICAgICAgIHNvdXJjZS50aWVyX3R5cGUgPSAnbWVtc3RvcmUnO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5wYXlsb2FkID0gJ3ZjZic7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWVFeHRyYWN0UGF0dGVybiA9IG5ldyBSZWdFeHAoJy8/KFteL10rPykoXFwudmNmKT8kJyk7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbmFtZUV4dHJhY3RQYXR0ZXJuLmV4ZWMoc291cmNlLnVyaSB8fCBzb3VyY2UuYmxvYi5uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgIXNvdXJjZS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZS5uYW1lID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIG51bGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgbGluZXMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBsaW5lc1tsaV0ucmVwbGFjZSgnXFxyJywgJycpO1xuICAgICAgICAgICAgICAgIGlmIChsaW5lLmxlbmd0aCA9PSAwKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGlmIChsaW5lLmluZGV4T2YoJ2Jyb3dzZXInKSA9PSAwKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGlmIChsaW5lLmluZGV4T2YoJ3RyYWNrJykgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF5YmVUeXBlID0gJ2JlZCc7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tzID0gbGluZS5zcGxpdCgvXFxzLyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHRpID0gMTsgdGkgPCB0b2tzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBLVl9SRUdFWFAuZXhlYyh0b2tzW3RpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtWzFdID09ICd0eXBlJyAmJiBtWzJdID09ICd3aWdnbGVfMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVUeXBlID0gJ3dpZydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1bMF0gPT0gJ25hbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5uYW1lID0gbVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBmaW5pc2hQcm9iZUJlZFdpZyhzb3VyY2UsIG1heWJlVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsaW5lLmluZGV4T2YoJ2ZpeGVkU3RlcCcpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoUHJvYmVCZWRXaWcoc291cmNlLCAnd2lnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsaW5lLmluZGV4T2YoJ3ZhcmlhYmxlU3RlcCcpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoUHJvYmVCZWRXaWcoc291cmNlLCAnd2lnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChCRURfUkVHRVhQLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoUHJvYmVCZWRXaWcoc291cmNlLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIFwiVW5zdXBwb3J0ZWQgZm9ybWF0XCIpO1xuICAgICAgICB9XG4gICAgfSwge3RpbWVvdXQ6IDE1MDB9KTsgIC8vIFRpbWVvdXQgdG8gY2F0Y2ggbWl4ZWQtb3JpZ2luIGNhc2Ugb24gQ2hyb21pdW0uXG59XG5cbmZ1bmN0aW9uIGZpbmlzaFByb2JlQmVkV2lnKHNvdXJjZSwgbWF5YmVUeXBlKSB7XG4gICAgc291cmNlLnRpZXJfdHlwZSA9ICdtZW1zdG9yZSc7XG4gICAgdmFyIG5hbWVFeHRyYWN0UGF0dGVybiA9IG5ldyBSZWdFeHAoJy8/KFteL10rPykoLihiZWR8d2lnKSk/JCcpO1xuICAgIHZhciBtYXRjaCA9IG5hbWVFeHRyYWN0UGF0dGVybi5leGVjKHNvdXJjZS51cmkgfHwgc291cmNlLmJsb2IubmFtZSk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGlmICghc291cmNlLm5hbWUpXG4gICAgICAgICAgICBzb3VyY2UubmFtZSA9IG1hdGNoWzFdO1xuICAgICAgICBpZiAoIW1heWJlVHlwZSAmJiBtYXRjaFszXSkge1xuICAgICAgICAgICAgbWF5YmVUeXBlID0gbWF0Y2hbM107XG4gICAgICAgIH1cbiAgICB9XG4gICAgc291cmNlLnBheWxvYWQgPSBtYXliZVR5cGUgfHwgJ2JlZCc7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgcHJvYmVSZXNvdXJjZTogcHJvYmVSZXNvdXJjZVxuICAgIH07XG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cblwidXNlIHN0cmljdFwiO1xuXG5leHBvcnQgeyBSdWxlciwgcnVsZXJEcmF3Q2FsbGJhY2sgfTtcblxuXG5mdW5jdGlvbiBSdWxlcihvcHRpb25zKSB7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuXG4gICAgc2VsZi52YWx1ZSA9IG9wdGlvbnMudmFsdWU7XG4gICAgc2VsZi5taW4gPSBvcHRpb25zLm1pbjtcbiAgICBzZWxmLm1heCA9IG9wdGlvbnMubWF4O1xuICAgIHNlbGYud2lkdGggPSBvcHRpb25zLndpZHRoO1xuICAgIHNlbGYuY29sb3IgPSBvcHRpb25zLmNvbG9yO1xuXG4gICAgT2JqZWN0LmtleXMoc2VsZikubWFwKGtleSA9PiB7XG4gICAgICAgIGlmIChzZWxmW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJXQVJOSU5HOiBSdWxlciBvcHRpb24gXCIgKyBrZXkgKyBcIiBub3Qgc2V0XCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cblJ1bGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJ1bGVyO1xuXG5mdW5jdGlvbiBydWxlckRyYXdDYWxsYmFjayhjYW52YXMsIHRpZXIpIHtcbiAgICBsZXQgcnVsZXJzID0gdGllci5kYXNTb3VyY2UucnVsZXJzO1xuXG4gICAgaWYgKCFydWxlcnMpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJUaWVyIHVzZXMgcnVsZXIgY2FsbGJhY2sgYnV0IGhhcyBubyBydWxlcnMhXCIpO1xuICAgIH0gZWxzZSBpZiAoIShydWxlcnMgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJydWxlcnMuanM6ICdydWxlcnMnIHNob3VsZCBiZSBhbiBBcnJheVwiKTtcbiAgICB9XG5cblxuICAgIHJ1bGVycy5tYXAociA9PiB7XG4gICAgICAgIGxldCBydWxlclkgPSAoKHIubWF4IC0gci52YWx1ZSkgKiByLmhlaWdodCk7XG4gICAgICAgIGxldCB2aWV3V2lkdGggPSB0aWVyLnZpZXdwb3J0LndpZHRoO1xuICAgICAgICBsZXQgb2xkTGluZVdpZHRoID0gY2FudmFzLmxpbmVXaWR0aDtcblxuICAgICAgICBjYW52YXMuc3Ryb2tlU3R5bGUgPSByLmNvbG9yO1xuICAgICAgICBjYW52YXMuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNhbnZhcy5tb3ZlVG8oLXZpZXdXaWR0aCwgcnVsZXJZICsgci5vZmZzZXQpO1xuICAgICAgICAvLyBPdGhlciBwYXJ0cyBvZiB0aGUgY29kZSByZWx5IG9uIG5vdCBoYXZpbmcgY2hhbmdlZCB0aGUgbGluZVdpZHRoLi4uXG4gICAgICAgIC8vIFNvIHdlIG5lZWQgdG8gY2hhbmdlIGl0IGJhY2sgd2hlbiB3ZSdyZSBkb25lLlxuICAgICAgICBjYW52YXMubGluZVdpZHRoID0gci53aWR0aDtcbiAgICAgICAgY2FudmFzLmxpbmVUbygyKnZpZXdXaWR0aCwgcnVsZXJZICsgci5vZmZzZXQpO1xuICAgICAgICBjYW52YXMuc3Ryb2tlKCk7XG4gICAgICAgIGNhbnZhcy5saW5lV2lkdGggPSBvbGRMaW5lV2lkdGg7XG4gICAgfSk7XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gc2FtcGxlLmpzOiBkb3duc2FtcGxpbmcgb2YgcXVhbnRpdGF0aXZlIGZlYXR1cmVzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xuXG4gICAgdmFyIHBhcnNlQ2lnYXIgPSByZXF1aXJlKCcuL2NpZ2FyJykucGFyc2VDaWdhcjtcblxuICAgIHZhciBzaGFsbG93Q29weSA9IHJlcXVpcmUoJy4vdXRpbHMnKS5zaGFsbG93Q29weTtcbn1cblxudmFyIF9fRFNfU0NBTEVTID0gWzEsIDIsIDVdO1xuXG5mdW5jdGlvbiBkc19zY2FsZShuKSB7XG4gICAgcmV0dXJuIF9fRFNfU0NBTEVTW24gJSBfX0RTX1NDQUxFUy5sZW5ndGhdICogTWF0aC5wb3coMTAsIChuIC8gX19EU19TQ0FMRVMubGVuZ3RoKXwwKTtcbn1cblxuXG5mdW5jdGlvbiBEU0JpbihzY2FsZSwgbWluLCBtYXgpIHtcbiAgICB0aGlzLnNjYWxlID0gc2NhbGU7XG4gICAgdGhpcy50b3QgPSAwO1xuICAgIHRoaXMuY250ID0gMDtcbiAgICB0aGlzLmhhc1Njb3JlID0gZmFsc2U7XG4gICAgdGhpcy5taW4gPSBtaW47IHRoaXMubWF4ID0gbWF4O1xuICAgIHRoaXMuZmVhdHVyZXMgPSBbXTtcbn1cblxuZnVuY3Rpb24gX2ZlYXR1cmVPcmRlcihhLCBiKSB7XG4gICAgaWYgKGEubWluIDwgYi5taW4pIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSBpZiAoYS5taW4gPiBiLm1pbikge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGEubWF4IDwgYi5tYXgpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSBpZiAoYi5tYXggPiBhLm1heCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59XG5cbkRTQmluLnByb3RvdHlwZS5zY29yZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmNudCA9PSAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSBpZiAodGhpcy5oYXNTY29yZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50b3QgLyB0aGlzLmNudDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZmVhdHVyZXMgPSB0aGlzLmZlYXR1cmVzO1xuICAgICAgICBmZWF0dXJlcy5zb3J0KF9mZWF0dXJlT3JkZXIpO1xuXG4gICAgICAgIHZhciBtYXhTZWVuID0gLTEwMDAwMDAwMDAwO1xuICAgICAgICB2YXIgY292PTAsIGxhcD0wO1xuXG4gICAgICAgIGZvciAodmFyIGZpID0gMTsgZmkgPCBmZWF0dXJlcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xuICAgICAgICAgICAgdmFyIGxNaW4gPSBNYXRoLm1heChmLm1pbiwgdGhpcy5taW4pO1xuICAgICAgICAgICAgdmFyIGxNYXggPSBNYXRoLm1pbihmLm1heCwgdGhpcy5tYXgpO1xuICAgICAgICAgICAgbGFwICs9IChsTWF4IC0gbE1pbiArIDEpO1xuXG4gICAgICAgICAgICBpZiAobE1pbiA+IG1heFNlZW4pIHtcbiAgICAgICAgICAgICAgICBjb3YgKz0gbE1heCAtIGxNaW4gKyAxO1xuICAgICAgICAgICAgICAgIG1heFNlZW4gPSBsTWF4O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobE1heCA+IG1heFNlZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY292ICs9IChsTWF4IC0gbWF4U2Vlbik7XG4gICAgICAgICAgICAgICAgICAgIG1heFNlZW4gPSBsTWF4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb3YgPiAwKVxuICAgICAgICAgICAgcmV0dXJuICgxLjAgKiBsYXApIC8gY292O1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59XG5cbkRTQmluLnByb3RvdHlwZS5mZWF0dXJlID0gZnVuY3Rpb24oZikge1xuICAgIGlmIChmLnNjb3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy50b3QgKz0gZi5zY29yZTtcbiAgICAgICAgdGhpcy5oYXNTY29yZSA9IHRydWVcbiAgICB9XG5cbiAgICArK3RoaXMuY250O1xuICAgIHRoaXMuZmVhdHVyZXMucHVzaChmKTtcbn1cblxuZnVuY3Rpb24gZG93bnNhbXBsZShmZWF0dXJlcywgdGFyZ2V0UmV6KSB7XG4gICAgdmFyIHNuID0gMDtcbiAgICB3aGlsZSAoZHNfc2NhbGUoc24gKyAxKSA8IHRhcmdldFJleikge1xuICAgICAgICArK3NuO1xuICAgIH1cbiAgICB2YXIgc2NhbGUgPSBkc19zY2FsZShzbik7XG5cbiAgICB2YXIgYmluVG90cyA9IFtdO1xuICAgIHZhciBtYXhCaW4gPSAtMTAwMDAwMDAwMDA7XG4gICAgdmFyIG1pbkJpbiA9IDEwMDAwMDAwMDAwO1xuICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmZWF0dXJlcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgdmFyIGYgPSBmZWF0dXJlc1tmaV07XG4gICAgICAgIGlmIChmLmdyb3VwcyAmJiBmLmdyb3Vwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBEb24ndCBkb3duc2FtcGxlIGNvbXBsZXggZmVhdHVyZXMgKD8pXG4gICAgICAgICAgICByZXR1cm4gZmVhdHVyZXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWluTGFwID0gKGYubWluIC8gc2NhbGUpfDA7XG4gICAgICAgIHZhciBtYXhMYXAgPSAoZi5tYXggLyBzY2FsZSl8MDtcbiAgICAgICAgbWF4QmluID0gTWF0aC5tYXgobWF4QmluLCBtYXhMYXApO1xuICAgICAgICBtaW5CaW4gPSBNYXRoLm1pbihtaW5CaW4sIG1pbkxhcCk7XG4gICAgICAgIGZvciAodmFyIGIgPSBtaW5MYXA7IGIgPD0gbWF4TGFwOyArK2IpIHtcbiAgICAgICAgICAgIHZhciBibSA9IGJpblRvdHNbYl07XG4gICAgICAgICAgICBpZiAoIWJtKSB7XG4gICAgICAgICAgICAgICAgYm0gPSBuZXcgRFNCaW4oc2NhbGUsIGIgKiBzY2FsZSwgKGIgKyAxKSAqIHNjYWxlIC0gMSk7XG4gICAgICAgICAgICAgICAgYmluVG90c1tiXSA9IGJtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm0uZmVhdHVyZShmKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzYW1wbGVkRmVhdHVyZXMgPSBbXTtcbiAgICBmb3IgKHZhciBiID0gbWluQmluOyBiIDw9IG1heEJpbjsgKytiKSB7XG4gICAgICAgIHZhciBibSA9IGJpblRvdHNbYl07XG4gICAgICAgIGlmIChibSkge1xuICAgICAgICAgICAgdmFyIGYgPSBuZXcgREFTRmVhdHVyZSgpO1xuICAgICAgICAgICAgZi5zZWdtZW50ID0gZmVhdHVyZXNbMF0uc2VnbWVudDtcbiAgICAgICAgICAgIGYubWluID0gKGIgKiBzY2FsZSkgKyAxO1xuICAgICAgICAgICAgZi5tYXggPSAoYiArIDEpICogc2NhbGU7XG4gICAgICAgICAgICBmLnNjb3JlID0gYm0uc2NvcmUoKTtcbiAgICAgICAgICAgIGYudHlwZSA9ICdkZW5zaXR5JztcbiAgICAgICAgICAgIHNhbXBsZWRGZWF0dXJlcy5wdXNoKGYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGFmdGVyRFMgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiBzYW1wbGVkRmVhdHVyZXM7XG59XG5cbi8qKiBEYXRhIHN0cnVjdHVyZSB0byBzdG9yZSBpbmZvcm1hdGlvbiBmb3JcbmEgYmFzZSBwb3NpdGlvbjpcblxucG9zOiBwb3NpdGlvbiBvZiB0aGUgYmFzZS5cbiovXG5mdW5jdGlvbiBCYXNlQmluKHBvcykge1xuXG4gICAgdGhpcy5fcG9zID0gcG9zO1xuICAgIHRoaXMuX2Jhc2VzID0ge307XG4gICAgdGhpcy5fdG90YWxDb3VudCA9IDA7XG59XG5cbi8qKiBLZWVwIHJlY29yZCBmb3IgaW5jaWRlbmNlIG9mIGEgYmFzZSxcbndpdGggcmVsYXRlZCBxdWFsIHNjb3JlIGFuZCBzdHJhbmQgZm9yIGEgcG9zaXRpb24uXG5cblBhcmFtc1xuICAgIGJhc2U6IGJhc2UgKGUuZyBBLCBULCBHLCBDLCBOKSBvYnNlcnZlZCBhdCBwb3NpdGlvbi5cbiAgICBxdWFsOiBudW1lcmljIHF1YWxpdHkgc2NvcmUuXG4gICAgc3RyYW5kOiAnKycgb3IgJy0nLlxuKi9cbkJhc2VCaW4ucHJvdG90eXBlLnJlY29yZEJhc2UgPSBmdW5jdGlvbihiYXNlLCBxdWFsLCBzdHJhbmQpIHtcbiAgICBpZiAoIXRoaXMuX2Jhc2VzW2Jhc2VdKSB7XG4gICAgICAgIHZhciBzdHJhbmRDb21wb3NpdGlvbiA9IHsnKyc6IDAsICctJzogMH07XG4gICAgICAgIHN0cmFuZENvbXBvc2l0aW9uW3N0cmFuZF0rKztcbiAgICAgICAgdGhpcy5fYmFzZXNbYmFzZV0gPSB7XG4gICAgICAgICAgICBjbnQ6IDEsXG4gICAgICAgICAgICB0b3RhbFF1YWw6IHF1YWwsXG4gICAgICAgICAgICBzdHJhbmRDbnQ6IHN0cmFuZENvbXBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJhc2VDb21wb3NpdGlvbiA9IHRoaXMuX2Jhc2VzW2Jhc2VdO1xuICAgICAgICBiYXNlQ29tcG9zaXRpb24uY250Kys7XG4gICAgICAgIGJhc2VDb21wb3NpdGlvbi50b3RhbFF1YWwgKz0gcXVhbDtcbiAgICAgICAgYmFzZUNvbXBvc2l0aW9uLnN0cmFuZENudFtzdHJhbmRdKys7XG4gICAgfVxuICAgIHRoaXMuX3RvdGFsQ291bnQrKztcbn07XG5cbi8qKiBSZXR1cm5zIGNvdW50IG9mIHRvdGFsIG51bWJlciBvZiBiYXNlcyBvYnNlcnZlZCBhdCBwb3NpdGlvbiAqL1xuQmFzZUJpbi5wcm90b3R5cGUudG90YWxDb3VudCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl90b3RhbENvdW50O307XG5cbi8qKiBSZXR1cm5zIHRoZSBiYXNlIHBvc2l0aW9uICovXG5CYXNlQmluLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fcG9zO307XG5cbi8qKiBDcmVhdGVzIGEgbGlzdCBvZiB0YWcsIGluZm8gcGFpcnMgaW4gdGhlIGZvcm1cblt0YWddPVtpbmZvXSBmb3IgZWFjaCBiYXNlLCBmb3IgdXNlIGluIGZlYXR1cmUtcG9wdXAgKi9cbkJhc2VCaW4ucHJvdG90eXBlLmluZm9MaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGluZm8gPSBbXTtcbiAgICB2YXIgdG90YWxDb3VudCA9IHRoaXMuX3RvdGFsQ291bnQ7XG4gICAgdmFyIHRvdGFsQ291bnRTdHIgPSBcIkRlcHRoPVwiICsgdG90YWxDb3VudC50b1N0cmluZygpO1xuICAgIGluZm8ucHVzaCh0b3RhbENvdW50U3RyKTtcbiAgICBmb3IgKHZhciBiYXNlIGluIHRoaXMuX2Jhc2VzKSB7XG4gICAgICAgIHZhciBiYXNlQ29tcG9zaXRpb24gPSB0aGlzLl9iYXNlc1tiYXNlXTtcbiAgICAgICAgdmFyIGJhc2VDbnQgPSBiYXNlQ29tcG9zaXRpb24uY250O1xuICAgICAgICB2YXIgYmFzZVBlcmNlbnRhZ2UgPSAoYmFzZUNudCAqIDEwMCAvIHRvdGFsQ291bnQpOyBcbiAgICAgICAgdmFyIHBsdXNTdHJhbmRDbnQgPSBiYXNlQ29tcG9zaXRpb24uc3RyYW5kQ250WycrJ107XG4gICAgICAgIHZhciBtaW51c1N0cmFuZENudCA9IGJhc2VDb21wb3NpdGlvbi5zdHJhbmRDbnRbJy0nXTtcbiAgICAgICAgdmFyIG1lYW5RdWFsID0gYmFzZUNvbXBvc2l0aW9uLnRvdGFsUXVhbC9iYXNlQ250O1xuXG4gICAgICAgIHZhciBiYXNlSW5mb1N0cmluZyA9IFtiYXNlLCAnPScsIGJhc2VDbnQsICcgKCcsIGJhc2VQZXJjZW50YWdlLnRvRml4ZWQoMCksICclLCAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1c1N0cmFuZENudCwgJyArLCAnLCBtaW51c1N0cmFuZENudCwgJyAtLCBRdWFsOiAnLCBtZWFuUXVhbC50b0ZpeGVkKDApLCAnKSddO1xuICAgICAgICBpbmZvLnB1c2goYmFzZUluZm9TdHJpbmcuam9pbignJykpO1xuICAgIH1cbiAgICByZXR1cm4gaW5mbztcbn07XG5cbi8qKiBSZXR1cm4gYSBsaXN0IG9mIG9iamVjdHMgZm9yIGNyZWF0aW5nIGFcbmhpc3RvZ3JhbSBzaG93aW5nIGNvbXBvc2l0aW9uIG9mIGRpZmZlcmVudCBiYXNlcyBhdCBhXG5naXZlbiBsb2NhdGlvbi5cblxuQ3VycmVudCBpbXBsZW1lbnRhdGlvbiBpcyBoYWNreTogdGhlIGxvZ2ljIGludm9sdmVzXG5vdmVybGF5aW5nIEJveEdseXBocyBvbiB0b3Agb2YgZWFjaCBvdGhlciwgdGh1cyB0aGUgc2NvcmVcbmlzIG5vdCBtZWFuaW5nZnVsLCBidXQgb25seSB1c2VkIHRvIG1hbmlwdWxhdGUgaGVpZ2h0LlxuXG5QYXJhbXM6XG4gIHJlZjogcmVmZXJlbmNlIGJhc2UgYXQgcG9zaXRpb25cbiAgdGhyZXNob2xkOiB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIG1pbiBhbGxlbGUgZnJlcXVlbmN5XG4gICAgICAgICAgICAgIGJlbG93IHdoaWNoIHRoZSBhbGxlbGUgd2lsbCBiZSBpZ25vcmVkIGluIGhpc3RvZ3JhbS5cbiAgICAgICAgICAgICAgKGludGVycHJldGVkIGFzIG5vaXNlKVxuICAgICAgICAgICAgICBTaW1pbGFyIHRvICdhbGxlbGUgdGhyZXNob2xkJyBwYXJhbWV0ZXIgaW4gSUdWXG5cblJldHVybnMgYSBsaXN0IG9mIG9iamVjdHMgY29udGFpbmluZyAyIHByb3BlcnRpZXNcbiAgICBiYXNlOiBzdWNoIGFzIEEsIFQsIEcsIEMsIE4sIC0gKGRlbClcbiAgICBzY29yZTogYSBudW1lcmljIHNjb3JlIGZvciBkZXRlcm1pbmluZyBoZWlnaHQgb2YgaGlzdG9ncmFtXG5UaGUgbGlzdCBpcyBvcmRlcmVkIHN1Y2ggdGhhdCBhIHByZWNlZWRpbmcgb2JqZWN0IGFsd2F5cyBoYXZlIGFcbnNjb3JlID49IHRoZSBjdXJyZW50IG9iamVjdCwgYW5kIHRoZSByZWYgYmFzZSB3aWxsIGJlIHRoZSBsYXN0IGl0ZW0uXG5cbkV4YW1wbGU6IFRoZXJlIGFyZSA1MCBUJ3MgYW5kIDQwIEEncyAodG90YWwgZGVwdGggPSA5MClcbmF0IGEgYmFzZSB3aGVyZSByZWY9QS4gVGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuXG5bVDogOTAsIEE6IDQwXS4gV2hlbiBjcmVhdGluZyBhIGhpc3RvZ3JhbSB3aXRoIG92ZXJsYXAsXG50aGlzIHdpbGwgZ2l2ZSBhbiBhcHBlYXJhbmNlIG9mIDQwIEEncyAoYm90dG9tKSBhbmQgNTAgVCdzICh0b3ApOlxuIyMjIyMjI1xuIyAgVCAgI1xuIyAgVCAgI1xuIyAgVCAgI1xuIyAgVCAgI1xuIyAgVCAgI1xuIyMjIyMjI1xuIyAgQSAgI1xuIyAgQSAgI1xuIyAgQSAgI1xuIyAgQSAgI1xuIyMjIyMjI1xuKi9cbkJhc2VCaW4ucHJvdG90eXBlLmJhc2VTY29yZUxpc3QgPSBmdW5jdGlvbihyZWYsIHRocmVzaG9sZCkge1xuICAgIHZhciBiYXNlU2NvcmVMaXN0ID0gW107XG4gICAgdmFyIHRvdGFsQ291bnQgPSB0aGlzLl90b3RhbENvdW50O1xuICAgIHZhciBtaW5Db3VudCA9IHRocmVzaG9sZCAqIHRvdGFsQ291bnQ7XG4gICAgZm9yICh2YXIgYmFzZSBpbiB0aGlzLl9iYXNlcykge1xuICAgICAgICB2YXIgYmFzZUNvdW50ID0gdGhpcy5fYmFzZXNbYmFzZV0uY250O1xuICAgICAgICBpZiAoYmFzZUNvdW50IDwgbWluQ291bnQgfHwgYmFzZSA9PSByZWYpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgdmFyIGJhc2VTY29yZVBhaXIgPSB7YmFzZTogYmFzZSwgc2NvcmU6IHRvdGFsQ291bnR9O1xuICAgICAgICBiYXNlU2NvcmVMaXN0LnB1c2goYmFzZVNjb3JlUGFpcik7XG4gICAgICAgIHRvdGFsQ291bnQgLT0gYmFzZUNvdW50O1xuICAgIH1cbiAgICBiYXNlU2NvcmVMaXN0LnB1c2goe2Jhc2U6IHJlZiwgc2NvcmU6IHRvdGFsQ291bnR9KTtcbiAgICByZXR1cm4gYmFzZVNjb3JlTGlzdDtcbn07XG5cbi8qKiBHZW5lcmF0ZXMgYW4gYWxpZ25lZCByZWFkIGZyb20gdGhlIHJhdyBzZXF1ZW5jZSBvZiBhIEJBTSByZWNvcmRcbnVzaW5nIGdpdmVuIGNpZ2FyIHN0cmluZy5cblxuUGFyYW1zOlxuICByYXdzZXE6IHVuYWxpZ25lZCByZWFkIHNlcXVlbmNlIGZyb20gQmFtIHJlY29yZFxuICByYXdxdWFsczogdW5hbGlnbmVkIHJlYWQgcXVhbHMgZnJvbSBCYW0gcmVjb3JkXG4gIGNpZ2FyOiBCYW0gY2lnYXIgc3RyaW5nIGZyb20gQmFtIHJlY29yZFxuXG5SZXR1cm5zIGFuIG9iamVjdCB3aXRoIDIgcHJvcGVydGllczpcbiAgc2VxOiBzdHJpbmcgY29udGFpbmluZyBhbGlnbmVkIHJlYWRcbiAgcXVhbHM6IHN0cmluZyBjb250YWluaW5nIHByaW50YWJsZS1jaGFyYWN0ZXIgcmVwcmVzZW50YXRpb25cbiAgICAgICAgIG9mIHNlcXVlbmNpbmcgcXVhbGl0eSBzY29yZVxuKi9cbmZ1bmN0aW9uIGFsaWduU2VxVXNpbmdDaWdhcihyYXdzZXEsIHJhd3F1YWxzLCBjaWdhcikge1xuICAgIHZhciBvcHMgPSBwYXJzZUNpZ2FyKGNpZ2FyKTtcbiAgICB2YXIgc2VxID0gW107XG4gICAgdmFyIHF1YWxzID0gW107XG4gICAgdmFyIGN1cnNvciA9IDA7XG4gICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IG9wcy5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgdmFyIGNvID0gb3BzW2NpXTtcbiAgICAgICAgaWYgKGNvLm9wID09ICdNJykge1xuICAgICAgICAgICAgc2VxLnB1c2gocmF3c2VxLnN1YnN0cihjdXJzb3IsIGNvLmNudCkpO1xuICAgICAgICAgICAgcXVhbHMucHVzaChyYXdxdWFscy5zdWJzdHIoY3Vyc29yLCBjby5jbnQpKTtcbiAgICAgICAgICAgIGN1cnNvciArPSBjby5jbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoY28ub3AgPT0gJ0QnKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBvaSA9IDA7IG9pIDwgY28uY250OyArK29pKSB7XG4gICAgICAgICAgICAgICAgc2VxLnB1c2goJy0nKTtcbiAgICAgICAgICAgICAgICBxdWFscy5wdXNoKCdaJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoY28ub3AgPT0gJ0knKSB7XG4gICAgICAgICAgICBjdXJzb3IgKz0gY28uY250O1xuICAgICAgICB9IGVsc2UgaWYgKGNvLm9wID09ICdTJykge1xuICAgICAgICAgICAgY3Vyc29yICs9IGNvLmNudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1bmtub3duIGNpZ29wJyArIGNvLm9wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgcHJvY2Vzc2VkU2VxID0ge3NlcTogc2VxLmpvaW4oJycpLCBxdWFsczogcXVhbHMuam9pbignJyl9O1xuICAgIHJldHVybiBwcm9jZXNzZWRTZXE7XG59XG5cbi8qKiBDb25zdHJ1Y3RzIHRoZSByZWZlcmVuY2Ugc2VxdWVuY2UgZm9yIGEgZ2l2ZW4gd2luZG93LlxuXG5QYXJhbXNcbiAgICBjdXJyZW50U2VxdWVuY2U6IERhc1NlcXVlbmNlIG9iamVjdCBjb250YWluaW5nIHJlZiBzZXF1ZW5jZVxuICAgICAgICAgICAgICAgICAgICAgaW4gY3VycmVudCBicm93c2VyIHZpZXcuXG4gICAgbWluLCBtYXg6IG1pbiBhbmQgbWF4IHBvc2l0aW9uIGZvciB3aW5kb3cuXG5cblJldHVybnMgYSBzdHJpbmcgY29udGFpbmluZyB0aGUgcmVmc2VxLCBwYWRkZWQgd2l0aCAnTicgd2hlcmUgc2VxdWVuY2UgaXMgbm90XG4gICAgYXZhaWxhYmxlLlxuKi9cbmZ1bmN0aW9uIGdldFJlZlNlcShjdXJyZW50U2VxdWVuY2UsIG1pbiwgbWF4KSB7XG4gICAgdmFyIHJlZlNlcSA9IFtdO1xuICAgIGlmIChjdXJyZW50U2VxdWVuY2UpIHtcbiAgICAgICAgdmFyIGNzU3RhcnQgPSBjdXJyZW50U2VxdWVuY2Uuc3RhcnR8MDtcbiAgICAgICAgdmFyIGNzRW5kID0gY3VycmVudFNlcXVlbmNlLmVuZHwwO1xuICAgICAgICBpZiAoY3NTdGFydCA8PSBtYXggJiYgY3NFbmQgPj0gbWluKSB7XG4gICAgICAgICAgICB2YXIgc2ZNaW4gPSBNYXRoLm1heChtaW4sIGNzU3RhcnQpO1xuICAgICAgICAgICAgdmFyIHNmTWF4ID0gTWF0aC5taW4obWF4LCBjc0VuZCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2ZNaW4gLSBtaW47IGkrKylcbiAgICAgICAgICAgICAgICByZWZTZXEucHVzaCgnTicpO1xuICAgICAgICAgICAgcmVmU2VxLnB1c2goY3VycmVudFNlcXVlbmNlLnNlcS5zdWJzdHIoc2ZNaW4gLSBjc1N0YXJ0LCBzZk1heCAtIHNmTWluICsgMSkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXggLSBzZk1heDsgaSsrKVxuICAgICAgICAgICAgICAgIHJlZlNlcS5wdXNoKCdOJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlZlNlcS5qb2luKCcnKTtcbn1cblxuLyoqIENvbnN0cnVjdHMgZmVhdHVyZXMgbmVjZXNzYXJ5IGZvciBhIGNvdmVyYWdlIHRyYWNrIHNob3dpbmdcbmJhc2UgY29tcG9zaXRpb24gZm9yIEJBTSByZWFkc1xuXG5QYXJhbXNcbiAgICBmZWF0dXJlczogYSBsaXN0IG9mIGZlYXR1cmVzIGZyb20gQkFNIHJlY29yZHMuXG4gICAgY3VycmVudFJlZlNlcTogYSBEQVNTZXF1ZW5jZSBvYmplY3QgY29udGFpbmluZyByZWZlcmVuY2Ugc2VxdWVuY2UuXG4gICAgYmFzZUNvbG9yczogYW4gb2JqZWN0IG1hcHBpbmcgYmFzZSB0byBkZXNpcmVkIGNvbG9ycy5cblxuUmV0dXJucyBhIGxpc3Qgb2YgZmVhdHVyZXMgb2YgdHlwZSBiYXNlLWNvdmVyYWdlLlxuKi9cbmZ1bmN0aW9uIGdldEJhc2VDb3ZlcmFnZShmZWF0dXJlcywgY3VycmVudFJlZlNlcSwgYmFzZUNvbG9ycykge1xuICAgIHZhciBtaW5CaW4gPSBudWxsO1xuICAgIHZhciBtYXhCaW4gPSBudWxsO1xuXG4gICAgdmFyIGFsbEJpbnMgPSBbXTtcblxuICAgIC8vIFBvcHVsYXRlIEJhc2VCaW5zXG4gICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICB2YXIgZiA9IGZlYXR1cmVzW2ZpXTtcbiAgICAgICAgaWYgKGYuZ3JvdXBzICYmIGYuZ3JvdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIERvbid0IGRvd25zYW1wbGUgY29tcGxleCBmZWF0dXJlc1xuICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcm9jZXNzZWRTZXEgPSBhbGlnblNlcVVzaW5nQ2lnYXIoZi5zZXEsIGYucXVhbHMsIGYuY2lnYXIpO1xuICAgICAgICB2YXIgc2VxID0gcHJvY2Vzc2VkU2VxLnNlcTtcbiAgICAgICAgdmFyIHF1YWxzID0gcHJvY2Vzc2VkU2VxLnF1YWxzO1xuICAgICAgICB2YXIgc3RyYW5kID0gZi5vcmllbnRhdGlvbjtcbiAgICAgICAgdmFyIG1pbkZvckZlYXR1cmUgPSBmLm1pbiB8fCAwO1xuICAgICAgICB2YXIgbWF4Rm9yRmVhdHVyZSA9IGYubWF4IHx8IDA7XG4gICAgICAgIHZhciBpbmQgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIGIgPSBtaW5Gb3JGZWF0dXJlOyBiIDw9IG1heEZvckZlYXR1cmU7ICsrYikge1xuICAgICAgICAgICAgdmFyIGJtID0gYWxsQmluc1tiXTtcbiAgICAgICAgICAgIGlmICghYm0pIHtcbiAgICAgICAgICAgICAgICBibSA9IG5ldyBCYXNlQmluKGIpO1xuICAgICAgICAgICAgICAgIGFsbEJpbnNbYl0gPSBibTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiYXNlID0gc2VxLmNoYXJBdChpbmQpO1xuICAgICAgICAgICAgdmFyIHF1YWwgPSBxdWFscy5jaGFyQ29kZUF0KGluZCkgLSAzMzsgLy8gR2VuZXJhdGUgbnVtZXJpYyBxdWFsIHNjb3JlXG4gICAgICAgICAgICBibS5yZWNvcmRCYXNlKGJhc2UsIHF1YWwsIHN0cmFuZCk7XG4gICAgICAgICAgICBpbmQrKztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbWluQmluKVxuICAgICAgICAgICAgbWluQmluID0gbWluRm9yRmVhdHVyZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbWluQmluID0gTWF0aC5taW4obWluQmluLCBtaW5Gb3JGZWF0dXJlKTtcbiAgICAgICAgaWYgKCFtYXhCaW4pXG4gICAgICAgICAgICBtYXhCaW4gPSBtYXhGb3JGZWF0dXJlO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBtYXhCaW4gPSBNYXRoLm1heChtYXhCaW4sIG1heEZvckZlYXR1cmUpO1xuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIGNvdmVyYWdlIGZlYXR1cmVzXG4gICAgdmFyIHJlZlNlcSA9IGdldFJlZlNlcShjdXJyZW50UmVmU2VxLCBtaW5CaW4sIG1heEJpbik7XG4gICAgdmFyIGJhc2VGZWF0dXJlcyA9IFtdO1xuICAgIHZhciBpbmQgPSAwO1xuICAgIGZvciAodmFyIGIgPSBtaW5CaW47IGIgPD0gbWF4QmluOyArK2IpIHtcbiAgICAgICAgdmFyIGJtID0gYWxsQmluc1tiXTtcbiAgICAgICAgaWYgKGJtKSB7XG4gICAgICAgICAgICB2YXIgZiA9IG5ldyBEQVNGZWF0dXJlKCk7XG4gICAgICAgICAgICBmLnNlZ21lbnQgPSBmZWF0dXJlc1swXS5zZWdtZW50O1xuICAgICAgICAgICAgZi5taW4gPSBibS5wb3MoKTtcbiAgICAgICAgICAgIGYubWF4ID0gZi5taW47XG4gICAgICAgICAgICBmLm5vdGVzID0gW107XG4gICAgICAgICAgICBmLm5vdGVzID0gZi5ub3Rlcy5jb25jYXQoYm0uaW5mb0xpc3QoKSk7XG4gICAgICAgICAgICBmLnR5cGUgPSAnYmFzZS1jb3ZlcmFnZSc7XG4gICAgICAgICAgICBmLnN1cHByZXNzU2NvcmUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHJlZlNlcSkge1xuICAgICAgICAgICAgICAgIHZhciByZWZCYXNlID0gcmVmU2VxLmNoYXJBdChpbmQpO1xuICAgICAgICAgICAgICAgIHZhciByZWZTdHJpbmcgPSAnUmVmPScgKyByZWZCYXNlO1xuICAgICAgICAgICAgICAgIGYubm90ZXMudW5zaGlmdChyZWZTdHJpbmcpO1xuICAgICAgICAgICAgICAgIHZhciBiYXNlU2NvcmVMaXN0ID0gYm0uYmFzZVNjb3JlTGlzdChyZWZCYXNlLCAwLjIpO1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IHNoaWZ0IDAuMiB0aHJlc2hvbGQgdG8gYSBjb25maWcgcGFyYW1ldGVyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiYXNlU2NvcmVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYXNlID0gYmFzZVNjb3JlTGlzdFtpXS5iYXNlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2NvcmUgPSBiYXNlU2NvcmVMaXN0W2ldLnNjb3JlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZkJhc2UgPSBzaGFsbG93Q29weShmKTtcbiAgICAgICAgICAgICAgICAgICAgZkJhc2Uuc2NvcmUgPSBzY29yZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29sb3IgYnkgYmFzZUNvbG9yIHdoZW4gbWlzbWF0Y2ggb2NjdXJzXG4gICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSwgQm94R2x5cGggdG8gQ09MT1IxIGluIHN0eWxlXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNlU2NvcmVMaXN0Lmxlbmd0aCA+IDEgfHwgYmFzZSAhPSByZWZCYXNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZkJhc2UuaXRlbVJnYiA9IGJhc2VDb2xvcnNbYmFzZV07XG5cbiAgICAgICAgICAgICAgICAgICAgYmFzZUZlYXR1cmVzLnB1c2goZkJhc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gcmVmU2VxLCBvbmx5IHNob3cgY292ZXJhZ2UgaGVpZ2h0LlxuICAgICAgICAgICAgICAgIGJhc2VGZWF0dXJlcy5wdXNoKGYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGluZCArKztcbiAgICB9XG4gICAgcmV0dXJuIGJhc2VGZWF0dXJlcztcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBkb3duc2FtcGxlOiBkb3duc2FtcGxlLFxuICAgICAgICBnZXRCYXNlQ292ZXJhZ2U6IGdldEJhc2VDb3ZlcmFnZVxuICAgIH07XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXG4vL1xuLy8gYmluLmpzIGdlbmVyYWwgYmluYXJ5IGRhdGEgc3VwcG9ydFxuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgYmluID0gcmVxdWlyZSgnLi9iaW4nKTtcbiAgICB2YXIgVVJMRmV0Y2hhYmxlID0gYmluLlVSTEZldGNoYWJsZTtcblxuICAgIHZhciBjb25uZWN0VHJpeCA9IHJlcXVpcmUoJy4vdHJpeCcpLmNvbm5lY3RUcml4O1xufVxuXG52YXIgUkVHSU9OX1BBVFRFUk4gPSAvXihbXFxkKyxcXHcsXFwuLFxcXyxcXC1dKylbXFxzOl0rKFswLTksXFwuXSs/KShbS2tNbUdnXSk/KCgtfFxcLlxcLnxcXHMpKyhbMC05LFxcLl0rKShbS2tNbUdnXSk/KT8kLztcblxuZnVuY3Rpb24gcGFyc2VMb2NDYXJkaW5hbChuLCBtKSB7XG4gICAgdmFyIGkgPSBwYXJzZUZsb2F0KG4ucmVwbGFjZSgvLC9nLCAnJykpO1xuICAgIGlmIChtID09PSAnaycgfHwgbSA9PT0gJ0snKSB7XG4gICAgICAgIHJldHVybiAoaSAqIDEwMDApfDA7XG4gICAgfSBlbHNlIGlmIChtID09ICdtJyB8fCBtID09PSAnTScpIHtcbiAgICAgICAgcmV0dXJuIChpICogMTAwMDAwMCl8MDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaXwwO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24oZywgc3RhdHVzQ2FsbGJhY2ssIG9wdHMpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHZhciBzclBhZGRpbmcgPSBvcHRzLnBhZGRpbmcgfHwgdGhpcy5kZWZhdWx0U2VhcmNoUmVnaW9uUGFkZGluZztcbiAgICBcbiAgICB2YXIgbSA9IFJFR0lPTl9QQVRURVJOLmV4ZWMoZyk7XG5cbiAgICBpZiAobSkge1xuICAgICAgICB2YXIgY2hyID0gbVsxXSwgc3RhcnQsIGVuZDtcbiAgICAgICAgaWYgKG1bNl0pIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gcGFyc2VMb2NDYXJkaW5hbChtWzJdLCAgbVszXSk7XG4gICAgICAgICAgICBlbmQgPSBwYXJzZUxvY0NhcmRpbmFsKG1bNl0sIG1bN10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQgKyAxO1xuICAgICAgICAgICAgc3RhcnQgPSAocGFyc2VMb2NDYXJkaW5hbChtWzJdLCBtWzNdKSAtICh3aWR0aC8yKSl8MDtcbiAgICAgICAgICAgIGVuZCA9IHN0YXJ0ICsgd2lkdGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0TG9jYXRpb24oY2hyLCBzdGFydCwgZW5kLCBzdGF0dXNDYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFnIHx8IGcubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWFyY2hDb3VudCA9IDA7XG4gICAgICAgIHZhciBmb3VuZExhdGNoID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIHNlYXJjaENhbGxiYWNrID0gZnVuY3Rpb24oZm91bmQsIGVycikge1xuICAgICAgICAgICAgLS1zZWFyY2hDb3VudDtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdHVzQ2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFmb3VuZCkgZm91bmQgPSBbXTtcbiAgICAgICAgICAgIHZhciBtaW4gPSA1MDAwMDAwMDAsIG1heCA9IC0xMDAwMDAwMDA7XG4gICAgICAgICAgICB2YXIgbmNociA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZm91bmQubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBmb3VuZFtmaV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobmNociA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5jaHIgPSBmLnNlZ21lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgZi5taW4pO1xuICAgICAgICAgICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgZi5tYXgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIW5jaHIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VhcmNoQ291bnQgPT0gMCAmJiAhZm91bmRMYXRjaClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1c0NhbGxiYWNrKFwibm8gbWF0Y2ggZm9yICdcIiArIGcgKyBcIidcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvdW5kTGF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXNCLmhpZ2hsaWdodFJlZ2lvbihuY2hyLCBtaW4sIG1heCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWlkID0gKChtYXgrbWluKS8yKXwwXG4gICAgICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSBNYXRoLm1heChzclBhZGRpbmcsICgwLjMgKiAobWF4IC0gbWluICsgMSkpfDApO1xuICAgICAgICAgICAgICAgIHRoaXNCLnNldExvY2F0aW9uKG5jaHIsIG1pbiAtIHBhZGRpbmcsIG1heCArIHBhZGRpbmcsIHN0YXR1c0NhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkb1RyaXhTZWFyY2ggPSBmdW5jdGlvbih0aWVyLCB0cml4KSB7XG4gICAgICAgICAgICB0cml4Lmxvb2t1cChnLCBmdW5jdGlvbihyZXN1bHQsIHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCB8fCByZXN1bHQubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGllci5mZWF0dXJlU291cmNlLnNlYXJjaChnLCBzZWFyY2hDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhpdCA9IHJlc3VsdFsxXS5zcGxpdCgnLCcpWzBdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGllci5mZWF0dXJlU291cmNlLnNlYXJjaChoaXQsIHNlYXJjaENhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaEVuZHBvaW50KSB7XG4gICAgICAgICAgICBzZWFyY2hDb3VudCA9IDE7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb0Rhc1NlYXJjaCh0aGlzQi5zZWFyY2hFbmRwb2ludCwgZywgc2VhcmNoQ2FsbGJhY2spO1xuICAgICAgICB9XG5cblxuICAgICAgICBjb25zdCBzZWFyY2hTb3VyY2VzID0gW1xuICAgICAgICAgICAgLi4uKHRoaXMuc2VhcmNoT25seVNvdXJjZUhvbGRlcnMgfHwgW10pLFxuICAgICAgICAgICAgLi4udGhpcy50aWVyc1xuICAgICAgICBdO1xuXG4gICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCBzZWFyY2hTb3VyY2VzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgKGZ1bmN0aW9uKHRpZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpc0Iuc291cmNlQWRhcHRlcklzQ2FwYWJsZSh0aWVyLmZlYXR1cmVTb3VyY2UsICdzZWFyY2gnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGllci5kYXNTb3VyY2UudHJpeFVSSSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgKytzZWFyY2hDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aWVyLnRyaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb1RyaXhTZWFyY2godGllciwgdGllci50cml4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl4ID0gbmV3IFVSTEZldGNoYWJsZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGllci5kYXNTb3VyY2UudHJpeFVSSSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NyZWRlbnRpYWxzOiB0aWVyLmRhc1NvdXJjZS5jcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVyOiB0aWVyLmRhc1NvdXJjZS5yZXNvbHZlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl4eCA9IG5ldyBVUkxGZXRjaGFibGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpZXIuZGFzU291cmNlLnRyaXh4VVJJIHx8ICh0aWVyLmRhc1NvdXJjZS50cml4VVJJICsgJ3gnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NyZWRlbnRpYWxzOiB0aWVyLmRhc1NvdXJjZS5jcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVyOiB0aWVyLmRhc1NvdXJjZS5yZXNvbHZlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdFRyaXgoaXgsIGl4eCwgZnVuY3Rpb24odHJpeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWVyLnRyaXggPSB0cml4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb1RyaXhTZWFyY2godGllciwgdHJpeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICArK3NlYXJjaENvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGllci5mZWF0dXJlU291cmNlLnNlYXJjaChnLCBzZWFyY2hDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRpZXIuZGFzU291cmNlLnByb3ZpZGVzX3NlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICArK3NlYXJjaENvdW50O1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5kb0Rhc1NlYXJjaCh0aWVyLmRhc1NvdXJjZSwgZywgc2VhcmNoQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKHNlYXJjaFNvdXJjZXNbdGldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuZG9EYXNTZWFyY2ggPSBmdW5jdGlvbihzb3VyY2UsIGcsIHNlYXJjaENhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICBzb3VyY2UuZmVhdHVyZXMobnVsbCwge2dyb3VwOiBnLCB0eXBlOiAndHJhbnNjcmlwdCd9LCBmdW5jdGlvbihmb3VuZCkge1xuICAgICAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IFtdO1xuICAgICAgICB2YXIgbWluID0gNTAwMDAwMDAwLCBtYXggPSAtMTAwMDAwMDAwO1xuICAgICAgICB2YXIgbmNociA9IG51bGw7XG5cbiAgICAgICAgdmFyIGZvdW5kMiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZm91bmQubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICB2YXIgZiA9IGZvdW5kW2ZpXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGYubGFiZWwudG9Mb3dlckNhc2UoKSAhPSBnLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAvLyAuLi5iZWNhdXNlIERhenpsZSBjYW4gcmV0dXJuIHNwdXJpb3VzIG92ZXJsYXBwaW5nIGZlYXR1cmVzLlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm91bmQyLnB1c2goZik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VhcmNoQ2FsbGJhY2soZm91bmQyKTtcbiAgICB9LCBmYWxzZSk7XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEyXG4vL1xuLy8gc2VxdWVuY2UtZHJhdy5qczogcmVuZGVyZXJzIGZvciBzZXF1ZW5jZS1yZWxhdGVkIGRhdGFcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgZm9ybWF0TG9uZ0ludCA9IHV0aWxzLmZvcm1hdExvbmdJbnQ7XG4gICAgdmFyIG1ha2VFbGVtZW50TlMgPSB1dGlscy5tYWtlRWxlbWVudE5TO1xuXG4gICAgdmFyIHN2Z3UgPSByZXF1aXJlKCcuL3N2Zy11dGlscycpO1xuICAgIHZhciBOU19TVkcgPSBzdmd1Lk5TX1NWRztcbiAgICB2YXIgTlNfWExJTksgPSBzdmd1Lk5TX1hMSU5LO1xuICAgIHZhciBTVkdQYXRoID0gc3ZndS5TVkdQYXRoO1xuXG4gICAgdmFyIG5mID0gcmVxdWlyZSgnLi9udW1mb3JtYXRzJyk7XG4gICAgdmFyIGZvcm1hdExvbmdJbnQgPSBuZi5mb3JtYXRMb25nSW50O1xufVxuXG52YXIgTUlOX1RJTEUgPSAxMDA7XG52YXIgcnVsZXJUaWxlQ29sb3JzID0gWydibGFjaycsICd3aGl0ZSddO1xuXG52YXIgc3RlcHMgPSBbMSwyLDVdO1xuXG5cbnZhciBOU19TVkcgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuXG5cbmZ1bmN0aW9uIHRpbGVTaXplRm9yU2NhbGUoc2NhbGUsIG1pbilcbntcbiAgICBpZiAoIW1pbikge1xuICAgICAgICBtaW4gPSBNSU5fVElMRTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0cyhwKSB7XG4gICAgICAgIHJldHVybiBzdGVwc1twICUgc3RlcHMubGVuZ3RoXSAqIE1hdGgucG93KDEwLCAocCAvIHN0ZXBzLmxlbmd0aCl8MCk7XG4gICAgfVxuICAgIHZhciBwb3cgPSBzdGVwcy5sZW5ndGg7XG4gICAgd2hpbGUgKHNjYWxlICogdHMocG93KSA8IG1pbikge1xuICAgICAgICArK3BvdztcbiAgICB9XG4gICAgcmV0dXJuIHRzKHBvdyk7XG59XG5cbmZ1bmN0aW9uIGRyYXdTZXFUaWVyKHRpZXIsIHNlcSkge1xuICAgIHZhciBnYyA9IHRpZXIudmlld3BvcnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB2YXIgcmV0aW5hID0gdGllci5icm93c2VyLnJldGluYSAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDE7XG4gICAgdmFyIGRlc2lyZWRXaWR0aCA9IHRpZXIuYnJvd3Nlci5mZWF0dXJlUGFuZWxXaWR0aCArIDIwMDA7XG4gICAgaWYgKHJldGluYSkge1xuICAgICAgICBkZXNpcmVkV2lkdGggKj0gMjtcbiAgICB9XG4gICAgdmFyIGZwdyA9IHRpZXIudmlld3BvcnQud2lkdGh8MDsgLy8gdGhpcy5icm93c2VyLmZlYXR1cmVQYW5lbFdpZHRoO1xuICAgIGlmIChmcHcgPCBkZXNpcmVkV2lkdGggLSA1MCkge1xuICAgICAgICB0aWVyLnZpZXdwb3J0LndpZHRoID0gZnB3ID0gZGVzaXJlZFdpZHRoO1xuICAgIH1cblxuICAgIHZhciBoZWlnaHQgPSA1MDtcbiAgICBpZiAoc2VxICYmIHNlcS5zZXEpIHtcbiAgICAgICAgaGVpZ2h0ICs9IDI1O1xuICAgIH1cblxuICAgIHZhciBjYW52YXNIZWlnaHQgPSBoZWlnaHQ7XG4gICAgaWYgKHJldGluYSkgXG4gICAgICAgIGNhbnZhc0hlaWdodCAqPSAyO1xuXG4gICAgdGllci52aWV3cG9ydC5oZWlnaHQgPSBjYW52YXNIZWlnaHQ7XG4gICAgdGllci52aWV3cG9ydC5zdHlsZS5oZWlnaHQgPSAnJyArIGhlaWdodCArICdweCc7XG4gICAgdGllci52aWV3cG9ydC5zdHlsZS53aWR0aCA9IHJldGluYSA/ICgnJyArIChmcHcvMikgKyAncHgnKSA6ICgnJyArIGZwdyArICdweCcpO1xuICAgIHRpZXIubGF5b3V0SGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRpZXIudXBkYXRlSGVpZ2h0KCk7XG5cbiAgICBcbiAgICBpZiAodGllci5iYWNrZ3JvdW5kKSB7XG4gICAgICAgIGdjLmZpbGxTdHlsZSA9IHRpZXIuYmFja2dyb3VuZDtcbiAgICAgICAgZ2MuZmlsbFJlY3QoMCwgMCwgZnB3LCB0aWVyLnZpZXdwb3J0LmhlaWdodCk7XG4gICAgfVxuICAgIGlmIChyZXRpbmEpIHtcbiAgICAgICAgZ2Muc2NhbGUoMiwgMik7XG4gICAgfVxuXG4gICAgZ2MudHJhbnNsYXRlKDEwMDAsMCk7XG4gICAgZHJhd1NlcVRpZXJHQyh0aWVyLCBzZXEsIGdjKTtcbiAgICB0aWVyLm5vcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xuICAgIHRpZXIudmlld3BvcnRIb2xkZXIuc3R5bGUubGVmdCA9ICctMTAwMHB4Jztcbn1cblxuZnVuY3Rpb24gZHJhd1NlcVRpZXJHQyh0aWVyLCBzZXEsIGdjKVxue1xuICAgIHZhciBzY2FsZSA9IHRpZXIuYnJvd3Nlci5zY2FsZSwga25vd25TdGFydCA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQgLSAoMTAwMC9zY2FsZSl8MCwga25vd25FbmQgPSB0aWVyLmJyb3dzZXIudmlld0VuZCArICgyMDAwL3NjYWxlKSwgY3VycmVudFNlcU1heCA9IHRpZXIuYnJvd3Nlci5jdXJyZW50U2VxTWF4O1xuXG4gICAgdmFyIHNlcVRpZXJNYXggPSBrbm93bkVuZDtcbiAgICBpZiAoY3VycmVudFNlcU1heCA+IDAgJiYgY3VycmVudFNlcU1heCA8IGtub3duRW5kKSB7XG4gICAgICAgIHNlcVRpZXJNYXggPSBjdXJyZW50U2VxTWF4O1xuICAgIH1cbiAgICB2YXIgdGlsZSA9IHRpbGVTaXplRm9yU2NhbGUoc2NhbGUpO1xuICAgIHZhciBwb3MgPSBNYXRoLm1heCgwLCAoKGtub3duU3RhcnQgLyB0aWxlKXwwKSAqIHRpbGUpO1xuICAgIFxuICAgIHZhciBvcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xuXG4gICAgd2hpbGUgKHBvcyA8PSBzZXFUaWVyTWF4KSB7XG5cdFx0Z2MuZmlsbFN0eWxlID0gKChwb3MgLyB0aWxlKSAlIDIgPT0gMCkgPyAnd2hpdGUnIDogJ2JsYWNrJztcblx0XHRnYy5zdHJva2VTdHlsZSA9ICdibGFjayc7XG5cdFx0Z2MuZmlsbFJlY3QoKHBvcyAtIG9yaWdpbikgKiBzY2FsZSxcblx0XHRcdCAgICA4LFxuXHRcdFx0ICAgIHRpbGUqc2NhbGUsXG5cdFx0XHQgICAgMyk7XG5cdFx0Z2Muc3Ryb2tlUmVjdCgocG9zIC0gb3JpZ2luKSAqIHNjYWxlLFxuXHRcdFx0ICAgICAgOCxcblx0XHRcdCAgICAgIHRpbGUqc2NhbGUsXG5cdFx0XHQgICAgICAzKTtcblxuXHRcdGdjLmZpbGxTdHlsZSA9ICdibGFjayc7XG5cdFx0Z2MuZmlsbFRleHQoZm9ybWF0TG9uZ0ludChwb3MpLCAoKHBvcyAtIG9yaWdpbikgKiBzY2FsZSksIDIyKTtcblx0XHRcblxuXHRcdHBvcyArPSB0aWxlO1xuICAgIH1cblxuICAgIGlmIChzZXEgJiYgc2VxLnNlcSkge1xuXHRcdGZvciAodmFyIHAgPSBrbm93blN0YXJ0OyBwIDw9IGtub3duRW5kOyArK3ApIHtcblx0XHQgICAgaWYgKHAgPj0gc2VxLnN0YXJ0ICYmIHAgPD0gc2VxLmVuZCkge1xuXHRcdFx0XHR2YXIgYmFzZSA9IHNlcS5zZXEuc3Vic3RyKHAgLSBzZXEuc3RhcnQsIDEpLnRvVXBwZXJDYXNlKCk7XG5cdFx0XHRcdHZhciBjb2xvciA9IHRpZXIuYnJvd3Nlci5iYXNlQ29sb3JzW2Jhc2VdO1xuXHRcdFx0XHRpZiAoIWNvbG9yKSB7XG5cdFx0ICAgICAgICAgICAgY29sb3IgPSAnZ3JheSc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRnYy5maWxsU3R5bGUgPSBjb2xvcjtcblxuXHRcdFx0XHRpZiAoc2NhbGUgPj0gOCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IGdjLm1lYXN1cmVUZXh0KGJhc2UpLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzY2FsZS13KTtcblx0XHRcdFx0ICAgIGdjLmZpbGxUZXh0KGJhc2UsIChwIC0gb3JpZ2luKSAqIHNjYWxlICsgKChzY2FsZS13KSowLjUpICwgNTIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQgICAgZ2MuZmlsbFJlY3QoKHAgLSBvcmlnaW4pICogc2NhbGUsIDQyLCBzY2FsZSwgMTIpOyBcblx0XHRcdFx0fVxuXHRcdCAgICB9XG5cdFx0fVxuICAgIH1cbn1cblxuZnVuY3Rpb24gc3ZnU2VxVGllcih0aWVyLCBzZXEpIHtcbiAgICB2YXIgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGUsIGtub3duU3RhcnQgPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0IC0gKDEwMDAvc2NhbGUpfDAsIGtub3duRW5kID0gdGllci5icm93c2VyLnZpZXdFbmQgKyAoMjAwMC9zY2FsZSksIGN1cnJlbnRTZXFNYXggPSB0aWVyLmJyb3dzZXIuY3VycmVudFNlcU1heDtcblxuICAgIHZhciBmcHcgPSB0aWVyLnZpZXdwb3J0LndpZHRofDA7IFxuXG4gICAgdmFyIHNlcVRpZXJNYXggPSBrbm93bkVuZDtcbiAgICBpZiAoY3VycmVudFNlcU1heCA+IDAgJiYgY3VycmVudFNlcU1heCA8IGtub3duRW5kKSB7XG4gICAgICAgIHNlcVRpZXJNYXggPSBjdXJyZW50U2VxTWF4O1xuICAgIH1cbiAgICB2YXIgdGlsZSA9IHRpbGVTaXplRm9yU2NhbGUoc2NhbGUpO1xuICAgIHZhciBwb3MgPSBNYXRoLm1heCgwLCAoKGtub3duU3RhcnQgLyB0aWxlKXwwKSAqIHRpbGUpO1xuICAgIFxuICAgIHZhciBvcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xuXG4gICAgdmFyICBnID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgW10sIHtmb250U2l6ZTogJzhwdCd9KTsgXG4gICAgd2hpbGUgKHBvcyA8PSBzZXFUaWVyTWF4KSB7XG4gICAgXHRnLmFwcGVuZENoaWxkKFxuICAgIFx0ICAgIG1ha2VFbGVtZW50TlMoXG4gICAgXHRcdE5TX1NWRywgJ3JlY3QnLFxuICAgIFx0XHRudWxsLFxuICAgIFx0XHR7eDogKHBvcy1vcmlnaW4pKnNjYWxlLFxuICAgIFx0XHQgeTogOCxcbiAgICBcdFx0IHdpZHRoOiB0aWxlKnNjYWxlLFxuICAgIFx0XHQgaGVpZ2h0OiAzLFxuICAgIFx0XHQgZmlsbDogKChwb3MgLyB0aWxlKSAlIDIgPT0gMCkgPyAnd2hpdGUnIDogJ2JsYWNrJyxcbiAgICBcdFx0IHN0cm9rZTogJ2JsYWNrJ30pKTtcblxuICAgIFx0Zy5hcHBlbmRDaGlsZChcbiAgICBcdCAgICBtYWtlRWxlbWVudE5TKFxuICAgIFx0XHROU19TVkcsICd0ZXh0JyxcbiAgICBcdFx0Zm9ybWF0TG9uZ0ludChwb3MpLFxuICAgIFx0XHR7eDogKHBvcy1vcmlnaW4pKnNjYWxlLFxuICAgIFx0XHQgeTogMjgsXG4gICAgXHRcdCBmaWxsOiAnYmxhY2snLCBzdHJva2U6ICdub25lJ30pKTtcbiAgICBcdFxuICAgIFx0cG9zICs9IHRpbGU7XG4gICAgfVxuXG4gICAgaWYgKHNlcSAmJiBzZXEuc2VxKSB7XG4gICAgXHRmb3IgKHZhciBwID0ga25vd25TdGFydDsgcCA8PSBrbm93bkVuZDsgKytwKSB7XG4gICAgXHQgICAgaWYgKHAgPj0gc2VxLnN0YXJ0ICYmIHAgPD0gc2VxLmVuZCkge1xuICAgICAgICBcdFx0dmFyIGJhc2UgPSBzZXEuc2VxLnN1YnN0cihwIC0gc2VxLnN0YXJ0LCAxKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBcdFx0dmFyIGNvbG9yID0gdGllci5icm93c2VyLmJhc2VDb2xvcnNbYmFzZV07XG4gICAgICAgIFx0XHRpZiAoIWNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gJ2dyYXknO1xuICAgICAgICBcdFx0fVxuXG4gICAgICAgIFx0XHRpZiAoc2NhbGUgPj0gOCkge1xuICAgICAgICBcdFx0ICAgIGcuYXBwZW5kQ2hpbGQoXG4gICAgICAgIFx0XHRcdG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAndGV4dCcsIGJhc2UsIHtcbiAgICAgICAgXHRcdFx0ICAgIHg6ICgwLjUrcC1vcmlnaW4pKnNjYWxlLFxuICAgICAgICBcdFx0XHQgICAgeTogNTIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QW5jaG9yOiAnbWlkZGxlJyxcbiAgICAgICAgXHRcdFx0ICAgIGZpbGw6IGNvbG9yfSkpO1xuICAgICAgICBcdFx0fSBlbHNlIHtcbiAgICAgICAgXHRcdCAgICBnLmFwcGVuZENoaWxkKFxuICAgICAgICBcdFx0XHRtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLCB7XG4gICAgICAgIFx0XHRcdCAgICB4OiAocCAtIG9yaWdpbikqc2NhbGUsXG4gICAgICAgIFx0XHRcdCAgICB5OiA0MixcbiAgICAgICAgXHRcdFx0ICAgIHdpZHRoOiBzY2FsZSxcbiAgICAgICAgXHRcdFx0ICAgIGhlaWdodDogMTIsXG4gICAgICAgIFx0ICAgICAgICAgICAgZmlsbDogY29sb3J9KSk7XG5cbiAgICAgICAgXHRcdH1cbiAgICBcdCAgICB9XG4gICAgXHR9XG4gICAgfSBcblxuICAgIHJldHVybiBnO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGRyYXdTZXFUaWVyOiBkcmF3U2VxVGllcixcbiAgICAgICAgZHJhd1NlcVRpZXJHQzogZHJhd1NlcVRpZXJHQyxcbiAgICAgICAgc3ZnU2VxVGllcjogc3ZnU2VxVGllclxuICAgIH07XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXG4vL1xuLy8gc2Vzc2lvbi5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcblxuICAgIHZhciBzYyA9IHJlcXVpcmUoJy4vc291cmNlY29tcGFyZScpO1xuICAgIHZhciBzb3VyY2VEYXRhVVJJID0gc2Muc291cmNlRGF0YVVSSTtcbiAgICB2YXIgc291cmNlc0FyZUVxdWFsID0gc2Muc291cmNlc0FyZUVxdWFsO1xuXG4gICAgdmFyIFZFUlNJT04gPSByZXF1aXJlKCcuL3ZlcnNpb24nKTtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgbWluaUpTT05pZnkgPSB1dGlscy5taW5pSlNPTmlmeTtcblxuICAgIHZhciBzaGExID0gcmVxdWlyZSgnLi9zaGExJyk7XG4gICAgdmFyIGhleF9zaGExID0gc2hhMS5oZXhfc2hhMTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubnVrZVN0YXR1cyA9IGZ1bmN0aW9uKCkge1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZpZXctY2hyJ107XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmlldy1zdGFydCddO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZpZXctZW5kJ107XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuY3VycmVudC1zZXEtbGVuZ3RoJ107XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuc2hvd2luZy1hbHQtem9vbSddO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNhdmVkLXpvb20nXTtcblxuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNvdXJjZXMnXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5odWJzJ107XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmVyc2lvbiddO1xuXG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcucmV2ZXJzZS1zY3JvbGxpbmcnXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLWtleS1zY3JvbGxpbmcnXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5ydWxlci1sb2NhdGlvbiddO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5zdG9yZVN0YXR1cyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3RvcmVWaWV3U3RhdHVzKCk7XG4gICAgdGhpcy5zdG9yZVRpZXJTdGF0dXMoKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuc3RvcmVWaWV3U3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmNvb2tpZUtleSB8fCB0aGlzLm5vUGVyc2lzdCB8fCB0aGlzLm5vUGVyc2lzdFZpZXcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmlldy1jaHInXSA9IHRoaXMuY2hyO1xuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmlldy1zdGFydCddID0gdGhpcy52aWV3U3RhcnR8MDtcbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZpZXctZW5kJ10gPSB0aGlzLnZpZXdFbmR8MFxuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuc2hvd2luZy1hbHQtem9vbSddID0gJycgKyB0aGlzLmlzU25hcFpvb21pbmc7XG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zYXZlZC16b29tJ10gPSB0aGlzLnNhdmVkWm9vbTtcbiAgICBpZiAodGhpcy5jdXJyZW50U2VxTWF4KSB7XG5cdCAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuY3VycmVudC1zZXEtbGVuZ3RoJ10gPSB0aGlzLmN1cnJlbnRTZXFNYXg7XG4gICAgfVxufVxuXG5cbkJyb3dzZXIucHJvdG90eXBlLnN0b3JlVGllclN0YXR1cyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5jb29raWVLZXkgfHwgdGhpcy5ub1BlcnNpc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjdXJyZW50U291cmNlTGlzdCA9IFtdO1xuICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdCkge1xuICAgICAgICB2YXIgdHQgPSB0aGlzLnRpZXJzW3RdO1xuICAgICAgICB2YXIgdHMgPSB0dC5kYXNTb3VyY2U7XG4gICAgICAgIGlmICghdHMubm9QZXJzaXN0KSB7XG4gICAgICAgICAgICBjdXJyZW50U291cmNlTGlzdC5wdXNoKHtzb3VyY2U6IHR0LmRhc1NvdXJjZSwgY29uZmlnOiB0dC5jb25maWcgfHwge319KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNvdXJjZXMnXSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRTb3VyY2VMaXN0KTtcblxuXG4gICAgdmFyIGNvdmVyZWRIdWJVUkxzID0ge307XG4gICAgdmFyIGN1cnJlbnRIdWJMaXN0ID0gW107XG4gICAgZm9yICh2YXIgaGkgPSAwOyBoaSA8IHRoaXMuaHViT2JqZWN0cy5sZW5ndGg7ICsraGkpIHtcbiAgICAgICAgdmFyIHRkYiA9IHRoaXMuaHViT2JqZWN0c1toaV07XG4gICAgICAgIHZhciBoYyA9IHt1cmw6IHRkYi5odWIudXJsLCBnZW5vbWU6IHRkYi5nZW5vbWV9O1xuICAgICAgICBpZiAodGRiLmNyZWRlbnRpYWxzKVxuICAgICAgICAgICAgaGMuY3JlZGVudGlhbHMgPSB0ZGIuY3JlZGVudGlhbHM7XG4gICAgICAgIGlmICh0ZGIubWFwcGluZylcbiAgICAgICAgICAgIGhjLm1hcHBpbmcgPSB0ZGIubWFwcGluZztcbiAgICAgICAgY292ZXJlZEh1YlVSTHNbaGMudXJsXSA9IHRydWU7XG4gICAgICAgIGN1cnJlbnRIdWJMaXN0LnB1c2goaGMpO1xuICAgIH1cblxuICAgIC8vIE5lZWRlZCB0byBoYW5kbGUgaHVicyB0aGF0IGZhaWxlZCB0byBjb25uZWN0LCBvciBodWJzIHRoYXQgaGF2ZW4ndFxuICAgIC8vIGNvbm5lY3RlZCB5ZXQgd2hlbiB3ZSdyZSBjYWxsZWQgc29vbiBhZnRlciBzdGFydHVwLlxuICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCB0aGlzLmh1YnMubGVuZ3RoOyArK2hpKSB7XG4gICAgICAgIHZhciBoYyA9IHRoaXMuaHVic1toaV07XG4gICAgICAgIGlmICh0eXBlb2YgaGMgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgaGMgPSB7dXJsOiBoY307XG4gICAgICAgIGlmICghY292ZXJlZEh1YlVSTHNbaGMudXJsXSlcbiAgICAgICAgICAgIGN1cnJlbnRIdWJMaXN0LnB1c2goaGMpO1xuICAgIH1cblxuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuaHVicyddID0gSlNPTi5zdHJpbmdpZnkoY3VycmVudEh1Ykxpc3QpO1xuXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLXNjcm9sbGluZyddID0gdGhpcy5yZXZlcnNlU2Nyb2xsaW5nO1xuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcucmV2ZXJzZS1rZXktc2Nyb2xsaW5nJ10gPSB0aGlzLnJldmVyc2VLZXlTY3JvbGxpbmc7XG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zaW5nbGUtYmFzZS1oaWdobGlnaHQnXSA9IHRoaXMuc2luZ2xlQmFzZUhpZ2hsaWdodDtcbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnJ1bGVyLWxvY2F0aW9uJ10gPSB0aGlzLnJ1bGVyTG9jYXRpb247XG5cbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLmV4cG9ydC1ydWxlciddID0gdGhpcy5leHBvcnRSdWxlcjtcbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLmV4cG9ydC1oaWdobGlnaHRzJ10gPSB0aGlzLmV4cG9ydEhpZ2hsaWdodHM7XG4gICAgXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52ZXJzaW9uJ10gPSBWRVJTSU9OLkNPTkZJRztcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVzdG9yZVN0YXR1cyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLm5vUGVyc2lzdClcbiAgICAgICAgcmV0dXJuO1xuICAgIFxuICAgIHZhciBzdG9yZWRDb25maWdWZXJzaW9uID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52ZXJzaW9uJ107XG4gICAgaWYgKHN0b3JlZENvbmZpZ1ZlcnNpb24pIHtcbiAgICAgICAgc3RvcmVkQ29uZmlnVmVyc2lvbiA9IHN0b3JlZENvbmZpZ1ZlcnNpb258MDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdG9yZWRDb25maWdWZXJzaW9uID0gLTEwMDtcbiAgICB9XG4gICAgaWYgKFZFUlNJT04uQ09ORklHICE9IHN0b3JlZENvbmZpZ1ZlcnNpb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzdG9yZWRDb25maWdIYXNoID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5jb25maWdIYXNoJ10gfHwgJyc7XG4gICAgdmFyIHBhZ2VDb25maWdIYXNoID0gaGV4X3NoYTEobWluaUpTT05pZnkoe1xuICAgICAgICBzb3VyY2VzOiB0aGlzLnNvdXJjZXMsXG4gICAgICAgIGh1YnM6IHRoaXMuaHVicyxcbiAgICAgICAgcnVsZXJMb2NhdGlvbjogdGhpcy5ydWxlckxvY2F0aW9uXG4gICAgfSkpO1xuICAgIGlmIChwYWdlQ29uZmlnSGFzaCAhPSBzdG9yZWRDb25maWdIYXNoKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuY29uZmlnSGFzaCddID0gcGFnZUNvbmZpZ0hhc2g7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdFNvdXJjZXNCeVVSSSA9IHt9O1xuICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCB0aGlzLnNvdXJjZXMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZXNbc2ldO1xuICAgICAgICBpZiAoIXNvdXJjZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgIHZhciB1cmkgPSBzb3VyY2VEYXRhVVJJKHNvdXJjZSk7XG4gICAgICAgIHZhciB1bCA9IGRlZmF1bHRTb3VyY2VzQnlVUklbdXJpXTtcbiAgICAgICAgaWYgKCF1bClcbiAgICAgICAgICAgIGRlZmF1bHRTb3VyY2VzQnlVUklbdXJpXSA9IHVsID0gW107XG4gICAgICAgIHVsLnB1c2goc291cmNlKTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm5vUGVyc2lzdFZpZXcpIHtcbiAgICAgICAgdmFyIHFDaHIgPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZpZXctY2hyJ107XG4gICAgICAgIHZhciBxTWluID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52aWV3LXN0YXJ0J118MDtcbiAgICAgICAgdmFyIHFNYXggPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZpZXctZW5kJ118MDtcbiAgICAgICAgaWYgKHFDaHIgJiYgcU1pbiAmJiBxTWF4KSB7XG4gICAgICAgIFx0dGhpcy5jaHIgPSBxQ2hyO1xuICAgICAgICBcdHRoaXMudmlld1N0YXJ0ID0gcU1pbjtcbiAgICAgICAgXHR0aGlzLnZpZXdFbmQgPSBxTWF4O1xuICAgICAgICBcdFxuICAgICAgICBcdHZhciBjc20gPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLmN1cnJlbnQtc2VxLWxlbmd0aCddO1xuICAgICAgICBcdGlmIChjc20pIHtcbiAgICAgICAgXHQgICAgdGhpcy5jdXJyZW50U2VxTWF4ID0gY3NtfDA7XG4gICAgICAgIFx0fVxuXG4gICAgICAgICAgICB0aGlzLmlzU25hcFpvb21pbmcgPSAobG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zaG93aW5nLWFsdC16b29tJ10pID09ICd0cnVlJztcblxuICAgICAgICAgICAgdmFyIHN6ID0gcGFyc2VGbG9hdChsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNhdmVkLXpvb20nXSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHN6ID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oc3opKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlZFpvb20gPSBzejtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBycyA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcucmV2ZXJzZS1zY3JvbGxpbmcnXTtcbiAgICB0aGlzLnJldmVyc2VTY3JvbGxpbmcgPSAocnMgJiYgcnMgPT0gJ3RydWUnKTtcbiAgICB2YXIgcmtzID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLWtleS1zY3JvbGxpbmcnXTtcbiAgICB0aGlzLnJldmVyc2VLZXlTY3JvbGxpbmcgPSAocmtzICYmIHJrcyA9PSAndHJ1ZScpO1xuICAgIHZhciBzYmggPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNpbmdsZS1iYXNlLWhpZ2hsaWdodCddO1xuICAgIHRoaXMuc2luZ2xlQmFzZUhpZ2hsaWdodCA9IChzYmggJiYgc2JoID09ICd0cnVlJyk7XG4gXG4gICAgdmFyIHJsID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5ydWxlci1sb2NhdGlvbiddO1xuICAgIGlmIChybClcbiAgICAgICAgdGhpcy5ydWxlckxvY2F0aW9uID0gcmw7XG5cbiAgICB2YXIgeCA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuZXhwb3J0LXJ1bGVyJ107XG4gICAgaWYgKHgpXG4gICAgICAgIHRoaXMuZXhwb3J0UnVsZXIgPSAoeCA9PT0gJ3RydWUnKTtcbiAgICB2YXIgeCA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuZXhwb3J0LWhpZ2hsaWdodHMnXTtcbiAgICBpZiAoeClcbiAgICAgICAgdGhpcy5leHBvcnRIaWdobGlnaHRzID0gKHggPT09ICd0cnVlJyk7XG5cbiAgICB2YXIgc291cmNlU3RyID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zb3VyY2VzJ107XG4gICAgaWYgKHNvdXJjZVN0cikge1xuXHQgICAgdmFyIHN0b3JlZFNvdXJjZXMgPSBKU09OLnBhcnNlKHNvdXJjZVN0cik7XG4gICAgICAgIHRoaXMuc291cmNlcyA9IFtdO1xuICAgICAgICB0aGlzLnJlc3RvcmVkQ29uZmlncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3RvcmVkU291cmNlcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZXNbc2ldID0gc3RvcmVkU291cmNlc1tzaV0uc291cmNlO1xuICAgICAgICAgICAgdGhpcy5yZXN0b3JlZENvbmZpZ3Nbc2ldID0gc3RvcmVkU291cmNlc1tzaV0uY29uZmlnO1xuICAgICAgICAgICAgdmFyIHVyaSA9IHNvdXJjZURhdGFVUkkoc291cmNlKTtcbiAgICAgICAgICAgIHZhciB1bCA9IGRlZmF1bHRTb3VyY2VzQnlVUklbdXJpXSB8fCBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIG9zaSA9IDA7IG9zaSA8IHVsLmxlbmd0aDsgKytvc2kpIHsgICAgXG4gICAgICAgICAgICAgICAgdmFyIG9sZFNvdXJjZSA9IHVsW29zaV07XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZXNBcmVFcXVhbChzb3VyY2UsIG9sZFNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBvbGRTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRTb3VyY2UuaGFzT3duUHJvcGVydHkoaykgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZihvbGRTb3VyY2Vba10pID09PSAnZnVuY3Rpb24nIHx8IG9sZFNvdXJjZVtrXSBpbnN0YW5jZW9mIEJsb2IpKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVtrXSA9IG9sZFNvdXJjZVtrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob2xkU291cmNlLnJlbmRlcmVyKSA9PT0gJ29iamVjdCcgJiYgb2xkU291cmNlLnJlbmRlcmVyLnJlbmRlclRpZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5yZW5kZXJlciA9IG9sZFNvdXJjZS5yZW5kZXJlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBodWJTdHIgPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLmh1YnMnXTtcbiAgICBpZiAoaHViU3RyKSB7XG4gICAgICAgIHRoaXMuaHVicyA9IEpTT04ucGFyc2UoaHViU3RyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBpID0gdGhpcy50aWVycy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgIHRoaXMucmVtb3ZlVGllcih7aW5kZXg6IGl9LCB0cnVlKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRlZmF1bHRTb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzID0gdGhpcy5kZWZhdWx0U291cmNlc1tpXTtcbiAgICAgICAgaWYgKCFzLmRpc2FibGVkKSBcbiAgICAgICAgICAgIHRoaXMuYWRkVGllcih0aGlzLmRlZmF1bHRTb3VyY2VzW2ldKTtcbiAgICB9XG5cbiAgICB0aGlzLmhpZ2hsaWdodHMuc3BsaWNlKDAsIHRoaXMuaGlnaGxpZ2h0cy5sZW5ndGgpO1xuXG4gICAgdGhpcy5zZXRMb2NhdGlvbih0aGlzLmRlZmF1bHRDaHIsIHRoaXMuZGVmYXVsdFN0YXJ0LCB0aGlzLmRlZmF1bHRFbmQpO1xufVxuIiwiLypcclxuICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBTZWN1cmUgSGFzaCBBbGdvcml0aG0sIFNIQS0xLCBhcyBkZWZpbmVkXHJcbiAqIGluIEZJUFMgMTgwLTFcclxuICogVmVyc2lvbiAyLjIgQ29weXJpZ2h0IFBhdWwgSm9obnN0b24gMjAwMCAtIDIwMDkuXHJcbiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXRcclxuICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlXHJcbiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBkZXRhaWxzLlxyXG4gKi9cclxuXHJcbiBcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qXHJcbiAqIENvbmZpZ3VyYWJsZSB2YXJpYWJsZXMuIFlvdSBtYXkgbmVlZCB0byB0d2VhayB0aGVzZSB0byBiZSBjb21wYXRpYmxlIHdpdGhcclxuICogdGhlIHNlcnZlci1zaWRlLCBidXQgdGhlIGRlZmF1bHRzIHdvcmsgaW4gbW9zdCBjYXNlcy5cclxuICovXHJcbnZhciBoZXhjYXNlID0gMDsgIC8qIGhleCBvdXRwdXQgZm9ybWF0LiAwIC0gbG93ZXJjYXNlOyAxIC0gdXBwZXJjYXNlICAgICAgICAqL1xyXG52YXIgYjY0cGFkICA9IFwiXCI7IC8qIGJhc2UtNjQgcGFkIGNoYXJhY3Rlci4gXCI9XCIgZm9yIHN0cmljdCBSRkMgY29tcGxpYW5jZSAgICovXHJcblxyXG4vKlxyXG4gKiBUaGVzZSBhcmUgdGhlIGZ1bmN0aW9ucyB5b3UnbGwgdXN1YWxseSB3YW50IHRvIGNhbGxcclxuICogVGhleSB0YWtlIHN0cmluZyBhcmd1bWVudHMgYW5kIHJldHVybiBlaXRoZXIgaGV4IG9yIGJhc2UtNjQgZW5jb2RlZCBzdHJpbmdzXHJcbiAqL1xyXG5mdW5jdGlvbiBoZXhfc2hhMShzKSAgICB7IHJldHVybiByc3RyMmhleChyc3RyX3NoYTEoc3RyMnJzdHJfdXRmOChzKSkpOyB9XHJcbmZ1bmN0aW9uIGI2NF9zaGExKHMpICAgIHsgcmV0dXJuIHJzdHIyYjY0KHJzdHJfc2hhMShzdHIycnN0cl91dGY4KHMpKSk7IH1cclxuZnVuY3Rpb24gYW55X3NoYTEocywgZSkgeyByZXR1cm4gcnN0cjJhbnkocnN0cl9zaGExKHN0cjJyc3RyX3V0ZjgocykpLCBlKTsgfVxyXG5mdW5jdGlvbiBoZXhfaG1hY19zaGExKGssIGQpXHJcbiAgeyByZXR1cm4gcnN0cjJoZXgocnN0cl9obWFjX3NoYTEoc3RyMnJzdHJfdXRmOChrKSwgc3RyMnJzdHJfdXRmOChkKSkpOyB9XHJcbmZ1bmN0aW9uIGI2NF9obWFjX3NoYTEoaywgZClcclxuICB7IHJldHVybiByc3RyMmI2NChyc3RyX2htYWNfc2hhMShzdHIycnN0cl91dGY4KGspLCBzdHIycnN0cl91dGY4KGQpKSk7IH1cclxuZnVuY3Rpb24gYW55X2htYWNfc2hhMShrLCBkLCBlKVxyXG4gIHsgcmV0dXJuIHJzdHIyYW55KHJzdHJfaG1hY19zaGExKHN0cjJyc3RyX3V0ZjgoayksIHN0cjJyc3RyX3V0ZjgoZCkpLCBlKTsgfVxyXG5cclxuLypcclxuICogUGVyZm9ybSBhIHNpbXBsZSBzZWxmLXRlc3QgdG8gc2VlIGlmIHRoZSBWTSBpcyB3b3JraW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBzaGExX3ZtX3Rlc3QoKVxyXG57XHJcbiAgcmV0dXJuIGhleF9zaGExKFwiYWJjXCIpLnRvTG93ZXJDYXNlKCkgPT0gXCJhOTk5M2UzNjQ3MDY4MTZhYmEzZTI1NzE3ODUwYzI2YzljZDBkODlkXCI7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENhbGN1bGF0ZSB0aGUgU0hBMSBvZiBhIHJhdyBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIHJzdHJfc2hhMShzKVxyXG57XHJcbiAgcmV0dXJuIGJpbmIycnN0cihiaW5iX3NoYTEocnN0cjJiaW5iKHMpLCBzLmxlbmd0aCAqIDgpKTtcclxufVxyXG5cclxuLypcclxuICogQ2FsY3VsYXRlIHRoZSBITUFDLVNIQTEgb2YgYSBrZXkgYW5kIHNvbWUgZGF0YSAocmF3IHN0cmluZ3MpXHJcbiAqL1xyXG5mdW5jdGlvbiByc3RyX2htYWNfc2hhMShrZXksIGRhdGEpXHJcbntcclxuICB2YXIgYmtleSA9IHJzdHIyYmluYihrZXkpO1xyXG4gIGlmKGJrZXkubGVuZ3RoID4gMTYpIGJrZXkgPSBiaW5iX3NoYTEoYmtleSwga2V5Lmxlbmd0aCAqIDgpO1xyXG5cclxuICB2YXIgaXBhZCA9IEFycmF5KDE2KSwgb3BhZCA9IEFycmF5KDE2KTtcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgMTY7IGkrKylcclxuICB7XHJcbiAgICBpcGFkW2ldID0gYmtleVtpXSBeIDB4MzYzNjM2MzY7XHJcbiAgICBvcGFkW2ldID0gYmtleVtpXSBeIDB4NUM1QzVDNUM7XHJcbiAgfVxyXG5cclxuICB2YXIgaGFzaCA9IGJpbmJfc2hhMShpcGFkLmNvbmNhdChyc3RyMmJpbmIoZGF0YSkpLCA1MTIgKyBkYXRhLmxlbmd0aCAqIDgpO1xyXG4gIHJldHVybiBiaW5iMnJzdHIoYmluYl9zaGExKG9wYWQuY29uY2F0KGhhc2gpLCA1MTIgKyAxNjApKTtcclxufVxyXG5cclxuLypcclxuICogQ29udmVydCBhIHJhdyBzdHJpbmcgdG8gYSBoZXggc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiByc3RyMmhleChpbnB1dClcclxue1xyXG4gIC8vIHRyeSB7IGhleGNhc2UgfSBjYXRjaChlKSB7IGhleGNhc2U9MDsgfVxyXG4gIHZhciBoZXhfdGFiID0gaGV4Y2FzZSA/IFwiMDEyMzQ1Njc4OUFCQ0RFRlwiIDogXCIwMTIzNDU2Nzg5YWJjZGVmXCI7XHJcbiAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgdmFyIHg7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIHggPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xyXG4gICAgb3V0cHV0ICs9IGhleF90YWIuY2hhckF0KCh4ID4+PiA0KSAmIDB4MEYpXHJcbiAgICAgICAgICAgKyAgaGV4X3RhYi5jaGFyQXQoIHggICAgICAgICYgMHgwRik7XHJcbiAgfVxyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENvbnZlcnQgYSByYXcgc3RyaW5nIHRvIGEgYmFzZS02NCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIHJzdHIyYjY0KGlucHV0KVxyXG57XHJcbiAgLy8gdHJ5IHsgYjY0cGFkIH0gY2F0Y2goZSkgeyBiNjRwYWQ9Jyc7IH1cclxuICB2YXIgdGFiID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7XHJcbiAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgdmFyIGxlbiA9IGlucHV0Lmxlbmd0aDtcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDMpXHJcbiAge1xyXG4gICAgdmFyIHRyaXBsZXQgPSAoaW5wdXQuY2hhckNvZGVBdChpKSA8PCAxNilcclxuICAgICAgICAgICAgICAgIHwgKGkgKyAxIDwgbGVuID8gaW5wdXQuY2hhckNvZGVBdChpKzEpIDw8IDggOiAwKVxyXG4gICAgICAgICAgICAgICAgfCAoaSArIDIgPCBsZW4gPyBpbnB1dC5jaGFyQ29kZUF0KGkrMikgICAgICA6IDApO1xyXG4gICAgZm9yKHZhciBqID0gMDsgaiA8IDQ7IGorKylcclxuICAgIHtcclxuICAgICAgaWYoaSAqIDggKyBqICogNiA+IGlucHV0Lmxlbmd0aCAqIDgpIG91dHB1dCArPSBiNjRwYWQ7XHJcbiAgICAgIGVsc2Ugb3V0cHV0ICs9IHRhYi5jaGFyQXQoKHRyaXBsZXQgPj4+IDYqKDMtaikpICYgMHgzRik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENvbnZlcnQgYSByYXcgc3RyaW5nIHRvIGFuIGFyYml0cmFyeSBzdHJpbmcgZW5jb2RpbmdcclxuICovXHJcbmZ1bmN0aW9uIHJzdHIyYW55KGlucHV0LCBlbmNvZGluZylcclxue1xyXG4gIHZhciBkaXZpc29yID0gZW5jb2RpbmcubGVuZ3RoO1xyXG4gIHZhciByZW1haW5kZXJzID0gQXJyYXkoKTtcclxuICB2YXIgaSwgcSwgeCwgcXVvdGllbnQ7XHJcblxyXG4gIC8qIENvbnZlcnQgdG8gYW4gYXJyYXkgb2YgMTYtYml0IGJpZy1lbmRpYW4gdmFsdWVzLCBmb3JtaW5nIHRoZSBkaXZpZGVuZCAqL1xyXG4gIHZhciBkaXZpZGVuZCA9IEFycmF5KE1hdGguY2VpbChpbnB1dC5sZW5ndGggLyAyKSk7XHJcbiAgZm9yKGkgPSAwOyBpIDwgZGl2aWRlbmQubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgZGl2aWRlbmRbaV0gPSAoaW5wdXQuY2hhckNvZGVBdChpICogMikgPDwgOCkgfCBpbnB1dC5jaGFyQ29kZUF0KGkgKiAyICsgMSk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFJlcGVhdGVkbHkgcGVyZm9ybSBhIGxvbmcgZGl2aXNpb24uIFRoZSBiaW5hcnkgYXJyYXkgZm9ybXMgdGhlIGRpdmlkZW5kLFxyXG4gICAqIHRoZSBsZW5ndGggb2YgdGhlIGVuY29kaW5nIGlzIHRoZSBkaXZpc29yLiBPbmNlIGNvbXB1dGVkLCB0aGUgcXVvdGllbnRcclxuICAgKiBmb3JtcyB0aGUgZGl2aWRlbmQgZm9yIHRoZSBuZXh0IHN0ZXAuIFdlIHN0b3Agd2hlbiB0aGUgZGl2aWRlbmQgaXMgemVyby5cclxuICAgKiBBbGwgcmVtYWluZGVycyBhcmUgc3RvcmVkIGZvciBsYXRlciB1c2UuXHJcbiAgICovXHJcbiAgd2hpbGUoZGl2aWRlbmQubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBxdW90aWVudCA9IEFycmF5KCk7XHJcbiAgICB4ID0gMDtcclxuICAgIGZvcihpID0gMDsgaSA8IGRpdmlkZW5kLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICB4ID0gKHggPDwgMTYpICsgZGl2aWRlbmRbaV07XHJcbiAgICAgIHEgPSBNYXRoLmZsb29yKHggLyBkaXZpc29yKTtcclxuICAgICAgeCAtPSBxICogZGl2aXNvcjtcclxuICAgICAgaWYocXVvdGllbnQubGVuZ3RoID4gMCB8fCBxID4gMClcclxuICAgICAgICBxdW90aWVudFtxdW90aWVudC5sZW5ndGhdID0gcTtcclxuICAgIH1cclxuICAgIHJlbWFpbmRlcnNbcmVtYWluZGVycy5sZW5ndGhdID0geDtcclxuICAgIGRpdmlkZW5kID0gcXVvdGllbnQ7XHJcbiAgfVxyXG5cclxuICAvKiBDb252ZXJ0IHRoZSByZW1haW5kZXJzIHRvIHRoZSBvdXRwdXQgc3RyaW5nICovXHJcbiAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgZm9yKGkgPSByZW1haW5kZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgb3V0cHV0ICs9IGVuY29kaW5nLmNoYXJBdChyZW1haW5kZXJzW2ldKTtcclxuXHJcbiAgLyogQXBwZW5kIGxlYWRpbmcgemVybyBlcXVpdmFsZW50cyAqL1xyXG4gIHZhciBmdWxsX2xlbmd0aCA9IE1hdGguY2VpbChpbnB1dC5sZW5ndGggKiA4IC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKE1hdGgubG9nKGVuY29kaW5nLmxlbmd0aCkgLyBNYXRoLmxvZygyKSkpXHJcbiAgZm9yKGkgPSBvdXRwdXQubGVuZ3RoOyBpIDwgZnVsbF9sZW5ndGg7IGkrKylcclxuICAgIG91dHB1dCA9IGVuY29kaW5nWzBdICsgb3V0cHV0O1xyXG5cclxuICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxyXG4vKlxyXG4gKiBFbmNvZGUgYSBzdHJpbmcgYXMgdXRmLTguXHJcbiAqIEZvciBlZmZpY2llbmN5LCB0aGlzIGFzc3VtZXMgdGhlIGlucHV0IGlzIHZhbGlkIHV0Zi0xNi5cclxuICovXHJcbmZ1bmN0aW9uIHN0cjJyc3RyX3V0ZjgoaW5wdXQpXHJcbntcclxuICB2YXIgb3V0cHV0ID0gXCJcIjtcclxuICB2YXIgaSA9IC0xO1xyXG4gIHZhciB4LCB5O1xyXG5cclxuICB3aGlsZSgrK2kgPCBpbnB1dC5sZW5ndGgpXHJcbiAge1xyXG4gICAgLyogRGVjb2RlIHV0Zi0xNiBzdXJyb2dhdGUgcGFpcnMgKi9cclxuICAgIHggPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xyXG4gICAgeSA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoID8gaW5wdXQuY2hhckNvZGVBdChpICsgMSkgOiAwO1xyXG4gICAgaWYoMHhEODAwIDw9IHggJiYgeCA8PSAweERCRkYgJiYgMHhEQzAwIDw9IHkgJiYgeSA8PSAweERGRkYpXHJcbiAgICB7XHJcbiAgICAgIHggPSAweDEwMDAwICsgKCh4ICYgMHgwM0ZGKSA8PCAxMCkgKyAoeSAmIDB4MDNGRik7XHJcbiAgICAgIGkrKztcclxuICAgIH1cclxuXHJcbiAgICAvKiBFbmNvZGUgb3V0cHV0IGFzIHV0Zi04ICovXHJcbiAgICBpZih4IDw9IDB4N0YpXHJcbiAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHgpO1xyXG4gICAgZWxzZSBpZih4IDw9IDB4N0ZGKVxyXG4gICAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEMwIHwgKCh4ID4+PiA2ICkgJiAweDFGKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4MCB8ICggeCAgICAgICAgICYgMHgzRikpO1xyXG4gICAgZWxzZSBpZih4IDw9IDB4RkZGRilcclxuICAgICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhFMCB8ICgoeCA+Pj4gMTIpICYgMHgwRiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4ODAgfCAoKHggPj4+IDYgKSAmIDB4M0YpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDgwIHwgKCB4ICAgICAgICAgJiAweDNGKSk7XHJcbiAgICBlbHNlIGlmKHggPD0gMHgxRkZGRkYpXHJcbiAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RjAgfCAoKHggPj4+IDE4KSAmIDB4MDcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDgwIHwgKCh4ID4+PiAxMikgJiAweDNGKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4MCB8ICgoeCA+Pj4gNiApICYgMHgzRiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4ODAgfCAoIHggICAgICAgICAmIDB4M0YpKTtcclxuICB9XHJcbiAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLypcclxuICogRW5jb2RlIGEgc3RyaW5nIGFzIHV0Zi0xNlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyMnJzdHJfdXRmMTZsZShpbnB1dClcclxue1xyXG4gIHZhciBvdXRwdXQgPSBcIlwiO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKylcclxuICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCBpbnB1dC5jaGFyQ29kZUF0KGkpICAgICAgICAmIDB4RkYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5wdXQuY2hhckNvZGVBdChpKSA+Pj4gOCkgJiAweEZGKTtcclxuICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdHIycnN0cl91dGYxNmJlKGlucHV0KVxyXG57XHJcbiAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKVxyXG4gICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGlucHV0LmNoYXJDb2RlQXQoaSkgPj4+IDgpICYgMHhGRixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5jaGFyQ29kZUF0KGkpICAgICAgICAmIDB4RkYpO1xyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENvbnZlcnQgYSByYXcgc3RyaW5nIHRvIGFuIGFycmF5IG9mIGJpZy1lbmRpYW4gd29yZHNcclxuICogQ2hhcmFjdGVycyA+MjU1IGhhdmUgdGhlaXIgaGlnaC1ieXRlIHNpbGVudGx5IGlnbm9yZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiByc3RyMmJpbmIoaW5wdXQpXHJcbntcclxuICB2YXIgb3V0cHV0ID0gQXJyYXkoaW5wdXQubGVuZ3RoID4+IDIpO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBvdXRwdXQubGVuZ3RoOyBpKyspXHJcbiAgICBvdXRwdXRbaV0gPSAwO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGggKiA4OyBpICs9IDgpXHJcbiAgICBvdXRwdXRbaT4+NV0gfD0gKGlucHV0LmNoYXJDb2RlQXQoaSAvIDgpICYgMHhGRikgPDwgKDI0IC0gaSAlIDMyKTtcclxuICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxyXG4vKlxyXG4gKiBDb252ZXJ0IGFuIGFycmF5IG9mIGJpZy1lbmRpYW4gd29yZHMgdG8gYSBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGJpbmIycnN0cihpbnB1dClcclxue1xyXG4gIHZhciBvdXRwdXQgPSBcIlwiO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGggKiAzMjsgaSArPSA4KVxyXG4gICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGlucHV0W2k+PjVdID4+PiAoMjQgLSBpICUgMzIpKSAmIDB4RkYpO1xyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENhbGN1bGF0ZSB0aGUgU0hBLTEgb2YgYW4gYXJyYXkgb2YgYmlnLWVuZGlhbiB3b3JkcywgYW5kIGEgYml0IGxlbmd0aFxyXG4gKi9cclxuZnVuY3Rpb24gYmluYl9zaGExKHgsIGxlbilcclxue1xyXG4gIC8qIGFwcGVuZCBwYWRkaW5nICovXHJcbiAgeFtsZW4gPj4gNV0gfD0gMHg4MCA8PCAoMjQgLSBsZW4gJSAzMik7XHJcbiAgeFsoKGxlbiArIDY0ID4+IDkpIDw8IDQpICsgMTVdID0gbGVuO1xyXG5cclxuICB2YXIgdyA9IEFycmF5KDgwKTtcclxuICB2YXIgYSA9ICAxNzMyNTg0MTkzO1xyXG4gIHZhciBiID0gLTI3MTczMzg3OTtcclxuICB2YXIgYyA9IC0xNzMyNTg0MTk0O1xyXG4gIHZhciBkID0gIDI3MTczMzg3ODtcclxuICB2YXIgZSA9IC0xMDA5NTg5Nzc2O1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMTYpXHJcbiAge1xyXG4gICAgdmFyIG9sZGEgPSBhO1xyXG4gICAgdmFyIG9sZGIgPSBiO1xyXG4gICAgdmFyIG9sZGMgPSBjO1xyXG4gICAgdmFyIG9sZGQgPSBkO1xyXG4gICAgdmFyIG9sZGUgPSBlO1xyXG5cclxuICAgIGZvcih2YXIgaiA9IDA7IGogPCA4MDsgaisrKVxyXG4gICAge1xyXG4gICAgICBpZihqIDwgMTYpIHdbal0gPSB4W2kgKyBqXTtcclxuICAgICAgZWxzZSB3W2pdID0gYml0X3JvbCh3W2otM10gXiB3W2otOF0gXiB3W2otMTRdIF4gd1tqLTE2XSwgMSk7XHJcbiAgICAgIHZhciB0ID0gc2FmZV9hZGQoc2FmZV9hZGQoYml0X3JvbChhLCA1KSwgc2hhMV9mdChqLCBiLCBjLCBkKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9hZGQoc2FmZV9hZGQoZSwgd1tqXSksIHNoYTFfa3QoaikpKTtcclxuICAgICAgZSA9IGQ7XHJcbiAgICAgIGQgPSBjO1xyXG4gICAgICBjID0gYml0X3JvbChiLCAzMCk7XHJcbiAgICAgIGIgPSBhO1xyXG4gICAgICBhID0gdDtcclxuICAgIH1cclxuXHJcbiAgICBhID0gc2FmZV9hZGQoYSwgb2xkYSk7XHJcbiAgICBiID0gc2FmZV9hZGQoYiwgb2xkYik7XHJcbiAgICBjID0gc2FmZV9hZGQoYywgb2xkYyk7XHJcbiAgICBkID0gc2FmZV9hZGQoZCwgb2xkZCk7XHJcbiAgICBlID0gc2FmZV9hZGQoZSwgb2xkZSk7XHJcbiAgfVxyXG4gIHJldHVybiBBcnJheShhLCBiLCBjLCBkLCBlKTtcclxuXHJcbn1cclxuXHJcbi8qXHJcbiAqIFBlcmZvcm0gdGhlIGFwcHJvcHJpYXRlIHRyaXBsZXQgY29tYmluYXRpb24gZnVuY3Rpb24gZm9yIHRoZSBjdXJyZW50XHJcbiAqIGl0ZXJhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gc2hhMV9mdCh0LCBiLCBjLCBkKVxyXG57XHJcbiAgaWYodCA8IDIwKSByZXR1cm4gKGIgJiBjKSB8ICgofmIpICYgZCk7XHJcbiAgaWYodCA8IDQwKSByZXR1cm4gYiBeIGMgXiBkO1xyXG4gIGlmKHQgPCA2MCkgcmV0dXJuIChiICYgYykgfCAoYiAmIGQpIHwgKGMgJiBkKTtcclxuICByZXR1cm4gYiBeIGMgXiBkO1xyXG59XHJcblxyXG4vKlxyXG4gKiBEZXRlcm1pbmUgdGhlIGFwcHJvcHJpYXRlIGFkZGl0aXZlIGNvbnN0YW50IGZvciB0aGUgY3VycmVudCBpdGVyYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIHNoYTFfa3QodClcclxue1xyXG4gIHJldHVybiAodCA8IDIwKSA/ICAxNTE4NTAwMjQ5IDogKHQgPCA0MCkgPyAgMTg1OTc3NTM5MyA6XHJcbiAgICAgICAgICh0IDwgNjApID8gLTE4OTQwMDc1ODggOiAtODk5NDk3NTE0O1xyXG59XHJcblxyXG4vKlxyXG4gKiBBZGQgaW50ZWdlcnMsIHdyYXBwaW5nIGF0IDJeMzIuIFRoaXMgdXNlcyAxNi1iaXQgb3BlcmF0aW9ucyBpbnRlcm5hbGx5XHJcbiAqIHRvIHdvcmsgYXJvdW5kIGJ1Z3MgaW4gc29tZSBKUyBpbnRlcnByZXRlcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzYWZlX2FkZCh4LCB5KVxyXG57XHJcbiAgdmFyIGxzdyA9ICh4ICYgMHhGRkZGKSArICh5ICYgMHhGRkZGKTtcclxuICB2YXIgbXN3ID0gKHggPj4gMTYpICsgKHkgPj4gMTYpICsgKGxzdyA+PiAxNik7XHJcbiAgcmV0dXJuIChtc3cgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7XHJcbn1cclxuXHJcbi8qXHJcbiAqIEJpdHdpc2Ugcm90YXRlIGEgMzItYml0IG51bWJlciB0byB0aGUgbGVmdC5cclxuICovXHJcbmZ1bmN0aW9uIGJpdF9yb2wobnVtLCBjbnQpXHJcbntcclxuICByZXR1cm4gKG51bSA8PCBjbnQpIHwgKG51bSA+Pj4gKDMyIC0gY250KSk7XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICBtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGI2NF9zaGExOiBiNjRfc2hhMSxcclxuICAgIGhleF9zaGExOiBoZXhfc2hhMVxyXG4gIH1cclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXG4vL1xuLy8gc291cmNlYWRhcHRlcnMuanNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBicm93c2VyID0gcmVxdWlyZSgnLi9jYnJvd3NlcicpO1xuICAgIHZhciBCcm93c2VyID0gYnJvd3Nlci5Ccm93c2VyO1xuXG4gICAgdmFyIHRpZXIgPSByZXF1aXJlKCcuL3RpZXInKTtcbiAgICB2YXIgRGFzVGllciA9IHRpZXIuRGFzVGllcjtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgQXdhaXRlZCA9IHV0aWxzLkF3YWl0ZWQ7XG4gICAgdmFyIGFycmF5SW5kZXhPZiA9IHV0aWxzLmFycmF5SW5kZXhPZjtcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcbiAgICB2YXIgcmVzb2x2ZVVybFRvUGFnZSA9IHV0aWxzLnJlc29sdmVVcmxUb1BhZ2U7XG5cbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgREFTU3R5bGVzaGVldCA9IGRhcy5EQVNTdHlsZXNoZWV0O1xuICAgIHZhciBEQVNTdHlsZSA9IGRhcy5EQVNTdHlsZTtcbiAgICB2YXIgREFTU291cmNlID0gZGFzLkRBU1NvdXJjZTtcbiAgICB2YXIgREFTU2VnbWVudCA9IGRhcy5EQVNTZWdtZW50O1xuICAgIHZhciBEQVNGZWF0dXJlID0gZGFzLkRBU0ZlYXR1cmU7XG4gICAgdmFyIERBU1NlcXVlbmNlID0gZGFzLkRBU1NlcXVlbmNlO1xuICAgIHZhciBEQVNMaW5rID0gZGFzLkRBU0xpbms7XG5cbiAgICB2YXIgYmluID0gcmVxdWlyZSgnLi9iaW4nKTtcbiAgICB2YXIgVVJMRmV0Y2hhYmxlID0gYmluLlVSTEZldGNoYWJsZTtcbiAgICB2YXIgQmxvYkZldGNoYWJsZSA9IGJpbi5CbG9iRmV0Y2hhYmxlO1xuXG4gICAgdmFyIHR3b0JpdCA9IHJlcXVpcmUoJy4vdHdvQml0Jyk7XG4gICAgdmFyIG1ha2VUd29CaXQgPSB0d29CaXQubWFrZVR3b0JpdDtcblxuICAgIHZhciBiYmkgPSByZXF1aXJlKCcuL2JpZ3dpZycpO1xuICAgIHZhciBtYWtlQndnID0gYmJpLm1ha2VCd2c7XG5cbiAgICB2YXIgYmFtID0gcmVxdWlyZSgnLi9iYW0nKTtcbiAgICB2YXIgbWFrZUJhbSA9IGJhbS5tYWtlQmFtO1xuICAgIHZhciBCYW1GbGFncyA9IGJhbS5CYW1GbGFncztcblxuICAgIHZhciBzcGFucyA9IHJlcXVpcmUoJy4vc3BhbnMnKTtcbiAgICB2YXIgUmFuZ2UgPSBzcGFucy5SYW5nZTtcbiAgICB2YXIgdW5pb24gPSBzcGFucy51bmlvbjtcblxuICAgIHZhciBwYXJzZUNpZ2FyID0gcmVxdWlyZSgnLi9jaWdhcicpLnBhcnNlQ2lnYXI7XG5cbiAgICB2YXIgT3ZlcmxheUZlYXR1cmVTb3VyY2UgPSByZXF1aXJlKCcuL292ZXJsYXknKS5PdmVybGF5RmVhdHVyZVNvdXJjZTtcblxuICAgIHZhciBKQnJvd3NlU3RvcmUgPSByZXF1aXJlKCcuL2pianNvbicpLkpCcm93c2VTdG9yZTtcblxuICAgIHZhciBDaGFpbnNldCA9IHJlcXVpcmUoJy4vY2hhaW5zZXQnKS5DaGFpbnNldDtcblxuICAgIHZhciBzdHlsZSA9IHJlcXVpcmUoJy4vc3R5bGUnKTtcbiAgICB2YXIgU3R5bGVGaWx0ZXJTZXQgPSBzdHlsZS5TdHlsZUZpbHRlclNldDtcblxuICAgIHZhciBFbmNvZGVGZXRjaGFibGUgPSByZXF1aXJlKCcuL2VuY29kZScpLkVuY29kZUZldGNoYWJsZTtcbn1cblxudmFyIF9fZGFsbGlhbmNlX3NvdXJjZUFkYXB0ZXJGYWN0b3JpZXMgPSB7fTtcblxuZnVuY3Rpb24gZGFsbGlhbmNlX3JlZ2lzdGVyU291cmNlQWRhcHRlckZhY3RvcnkodHlwZSwgZmFjdG9yeSkge1xuICAgIF9fZGFsbGlhbmNlX3NvdXJjZUFkYXB0ZXJGYWN0b3JpZXNbdHlwZV0gPSBmYWN0b3J5O1xufVxuXG5cbnZhciBfX2RhbGxpYW5jZV9wYXJzZXJGYWN0b3JpZXMgPSB7fTtcblxuZnVuY3Rpb24gZGFsbGlhbmNlX3JlZ2lzdGVyUGFyc2VyRmFjdG9yeSh0eXBlLCBmYWN0b3J5KSB7XG4gICAgX19kYWxsaWFuY2VfcGFyc2VyRmFjdG9yaWVzW3R5cGVdID0gZmFjdG9yeTtcbn1cblxuZnVuY3Rpb24gZGFsbGlhbmNlX21ha2VQYXJzZXIodHlwZSkge1xuICAgIGlmIChfX2RhbGxpYW5jZV9wYXJzZXJGYWN0b3JpZXNbdHlwZV0pIHtcbiAgICAgICAgcmV0dXJuIF9fZGFsbGlhbmNlX3BhcnNlckZhY3Rvcmllc1t0eXBlXSh0eXBlKTtcbiAgICB9XG59XG5cblxuRGFzVGllci5wcm90b3R5cGUuaW5pdFNvdXJjZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhpc1RpZXIgPSB0aGlzO1xuXG4gICAgdmFyIHNvdXJjZXMgPSB0aGlzLmJyb3dzZXIuY3JlYXRlU291cmNlcyh0aGlzLmRhc1NvdXJjZSk7XG4gICAgdGhpcy5mZWF0dXJlU291cmNlID0gc291cmNlcy5mZWF0dXJlcyB8fCBuZXcgRHVtbXlGZWF0dXJlU291cmNlKCk7XG4gICAgdGhpcy5zZXF1ZW5jZVNvdXJjZSA9IHNvdXJjZXMuc2VxdWVuY2U7XG5cbiAgICBpZiAodGhpcy5mZWF0dXJlU291cmNlICYmIHRoaXMuZmVhdHVyZVNvdXJjZS5hZGRDaGFuZ2VMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmZlYXR1cmVTb3VyY2UuYWRkQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzVGllci5icm93c2VyLnJlZnJlc2hUaWVyKHRoaXNUaWVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuQnJvd3Nlci5wcm90b3R5cGUuY3JlYXRlU291cmNlcyA9IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgIHZhciBzb3VyY2VzID0gdGhpcy5zb3VyY2VDYWNoZS5nZXQoY29uZmlnKTtcbiAgICBpZiAoc291cmNlcylcbiAgICAgICAgcmV0dXJuIHNvdXJjZXM7XG5cbiAgICB2YXIgZnMsIHNzO1xuXG4gICAgaWYgKGNvbmZpZy50aWVyX3R5cGUgPT0gJ3NlcXVlbmNlJyB8fCBjb25maWcudHdvQml0VVJJIHx8IGNvbmZpZy50d29CaXRCbG9iKSB7XG4gICAgICAgIGlmIChjb25maWcudHdvQml0VVJJIHx8IGNvbmZpZy50d29CaXRCbG9iKSB7XG4gICAgICAgICAgICBzcyA9IG5ldyBUd29CaXRTZXF1ZW5jZVNvdXJjZShjb25maWcpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5lbnNlbWJsVVJJKSB7XG4gICAgICAgICAgICBzcyA9IG5ldyBFbnNlbWJsU2VxdWVuY2VTb3VyY2UoY29uZmlnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNzID0gbmV3IERBU1NlcXVlbmNlU291cmNlKGNvbmZpZyk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbmZpZy50aWVyX3R5cGUgJiYgX19kYWxsaWFuY2Vfc291cmNlQWRhcHRlckZhY3Rvcmllc1tjb25maWcudGllcl90eXBlXSkge1xuICAgICAgICB2YXIgc2FmID0gX19kYWxsaWFuY2Vfc291cmNlQWRhcHRlckZhY3Rvcmllc1tjb25maWcudGllcl90eXBlXTtcbiAgICAgICAgdmFyIG5zID0gc2FmKGNvbmZpZyk7XG4gICAgICAgIGZzID0gbnMuZmVhdHVyZXM7XG4gICAgICAgIHNzID0gbnMuc2VxdWVuY2U7XG4gICAgfSBlbHNlIGlmIChjb25maWcuYndnVVJJIHx8IGNvbmZpZy5id2dCbG9iKSB7XG4gICAgICAgIHZhciB3b3JrZXIgPSB0aGlzLmdldFdvcmtlcigpO1xuICAgICAgICBpZiAod29ya2VyKVxuICAgICAgICAgICAgZnMgPSBuZXcgUmVtb3RlQldHRmVhdHVyZVNvdXJjZShjb25maWcsIHdvcmtlciwgdGhpcyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGZzID0gbmV3IEJXR0ZlYXR1cmVTb3VyY2UoY29uZmlnKTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5iYW1VUkkgfHwgY29uZmlnLmJhbUJsb2IpIHtcbiAgICAgICAgdmFyIHdvcmtlciA9IHRoaXMuZ2V0V29ya2VyKCk7XG4gICAgICAgIGlmICh3b3JrZXIpXG4gICAgICAgICAgICBmcyA9IG5ldyBSZW1vdGVCQU1GZWF0dXJlU291cmNlKGNvbmZpZywgd29ya2VyLCB0aGlzKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZnMgPSBuZXcgQkFNRmVhdHVyZVNvdXJjZShjb25maWcpO1xuICAgIH0gZWxzZSBpZiAoY29uZmlnLmpiVVJJKSB7XG4gICAgICAgIGZzID0gbmV3IEpCcm93c2VGZWF0dXJlU291cmNlKGNvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChjb25maWcudXJpIHx8IGNvbmZpZy5mZWF0dXJlc191cmkpIHtcbiAgICAgICAgZnMgPSBuZXcgREFTRmVhdHVyZVNvdXJjZShjb25maWcpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcub3ZlcmxheSkge1xuICAgICAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgICAgICBpZiAoZnMpXG4gICAgICAgICAgICBzb3VyY2VzLnB1c2gobmV3IENhY2hpbmdGZWF0dXJlU291cmNlKGZzKSk7XG5cbiAgICAgICAgZm9yICh2YXIgb2kgPSAwOyBvaSA8IGNvbmZpZy5vdmVybGF5Lmxlbmd0aDsgKytvaSkge1xuICAgICAgICAgICAgdmFyIGNzID0gdGhpcy5jcmVhdGVTb3VyY2VzKGNvbmZpZy5vdmVybGF5W29pXSk7XG4gICAgICAgICAgICBpZiAoY3MgJiYgY3MuZmVhdHVyZXMpXG4gICAgICAgICAgICAgICAgc291cmNlcy5wdXNoKGNzLmZlYXR1cmVzKTtcbiAgICAgICAgfVxuICAgICAgICBmcyA9IG5ldyBPdmVybGF5RmVhdHVyZVNvdXJjZShzb3VyY2VzLCBjb25maWcpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuc2VxdWVuY2VBbGlhc2VzKSB7XG4gICAgICAgIGZzID0gbmV3IE1hcHBlZEZlYXR1cmVTb3VyY2UoZnMsIG5ldyBDaGFpbnNldCh7dHlwZTogJ2FsaWFzJywgc2VxdWVuY2VBbGlhc2VzOiBjb25maWcuc2VxdWVuY2VBbGlhc2VzfSkpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcubWFwcGluZykge1xuICAgICAgICBmcyA9IG5ldyBNYXBwZWRGZWF0dXJlU291cmNlKGZzLCB0aGlzLmNoYWluc1tjb25maWcubWFwcGluZ10pO1xuICAgIH1cblxuICAgIGlmIChjb25maWcubmFtZSAmJiBmcyAmJiAhZnMubmFtZSkge1xuICAgICAgICBmcy5uYW1lID0gY29uZmlnLm5hbWU7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBmcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZnMgIT09IG51bGwpIHtcbiAgICAgICAgZnMgPSBuZXcgQ2FjaGluZ0ZlYXR1cmVTb3VyY2UoZnMpO1xuICAgIH1cblxuICAgIGlmICggKHR5cGVvZiBmcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZnMgIT09ICBudWxsKSB8fCAodHlwZW9mIHNzICE9PSAndW5kZWZpbmVkJyAmJiBzcyAhPSBudWxsKSApIHtcbiAgICAgICAgc291cmNlcyA9IHtcbiAgICAgICAgICAgIGZlYXR1cmVzOiBmcyxcbiAgICAgICAgICAgIHNlcXVlbmNlOiBzc1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNvdXJjZUNhY2hlLnB1dChjb25maWcsIHNvdXJjZXMpO1xuICAgIH1cblxuICAgIHJldHVybiBzb3VyY2VzO1xufTtcblxuRGFzVGllci5wcm90b3R5cGUuZmV0Y2hTdHlsZXNoZWV0ID0gZnVuY3Rpb24oY2IpIHtcbiAgICB2YXIgc3NTb3VyY2U7XG4gICAgLy8gU29tZXdoYXQgdWdseSB3b3JrYXJvdW5kIGZvciB0aGUgc3BlY2lhbCBjYXNlIG9mIERBUyBzb3VyY2VzLi4uXG4gICAgaWYgKHRoaXMuZGFzU291cmNlLnN0eWxlc2hlZXRfdXJpIHx8IChcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLnRpZXJfdHlwZSAmJlxuICAgICAgICAhdGhpcy5kYXNTb3VyY2UuYndnVVJJICYmXG4gICAgICAgICF0aGlzLmRhc1NvdXJjZS5id2dCbG9iICYmXG4gICAgICAgICF0aGlzLmRhc1NvdXJjZS5iYW1VUkkgJiZcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLmJhbUJsb2IgJiZcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLnR3b0JpdFVSSSAmJlxuICAgICAgICAhdGhpcy5kYXNTb3VyY2UudHdvQml0QmxvYiAmJlxuICAgICAgICAhdGhpcy5kYXNTb3VyY2UuamJVUkkgJiZcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLm92ZXJsYXkpKVxuICAgIHtcbiAgICAgICAgc3NTb3VyY2UgPSBuZXcgREFTRmVhdHVyZVNvdXJjZSh0aGlzLmRhc1NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3NTb3VyY2UgPSB0aGlzLmdldFNvdXJjZSgpO1xuICAgIH1cbiAgICBzc1NvdXJjZS5nZXRTdHlsZVNoZWV0KGNiKTtcbn07XG5cbnZhciBfX2Nmc19pZF9zZWVkID0gMDtcblxuZnVuY3Rpb24gQ2FjaGluZ0ZlYXR1cmVTb3VyY2Uoc291cmNlKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuY2ZzaWQgPSAnY2ZzJyArICgrK19fY2ZzX2lkX3NlZWQpO1xuICAgIGlmIChzb3VyY2UubmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBzb3VyY2UubmFtZTtcbiAgICB9XG4gICAgaWYgKHNvdXJjZS5hZGRDaGFuZ2VMaXN0ZW5lcikge1xuICAgICAgICBzb3VyY2UuYWRkQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzQi5jZnNpZCA9ICdjZnMnICsgKCsrX19jZnNfaWRfc2VlZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmFkZFJlYWRpbmVzc0xpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICBpZiAodGhpcy5zb3VyY2UuYWRkUmVhZGluZXNzTGlzdGVuZXIpXG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5hZGRSZWFkaW5lc3NMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgZWxzZVxuICAgICAgICBsaXN0ZW5lcihudWxsKTtcbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5yZW1vdmVSZWFkaW5lc3NMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgaWYgKHRoaXMuc291cmNlLnJlbW92ZVJlYWRpbmVzc0xpc3RlbmVyKVxuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2UucmVtb3ZlUmVhZGluZXNzTGlzdGVuZXIobGlzdGVuZXIpO1xufTtcblxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uKHF1ZXJ5LCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnNvdXJjZS5zZWFyY2gpXG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zZWFyY2gocXVlcnksIGNhbGxiYWNrKTtcbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXREZWZhdWx0RklQcyA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aWVyKSB7XG4gICAgaWYgKHRoaXMuc291cmNlLmdldERlZmF1bHRGSVBzKVxuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2UuZ2V0RGVmYXVsdEZJUHMoY2FsbGJhY2ssIHRpZXIpOyBcbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB0aGlzLnNvdXJjZS5nZXRTdHlsZVNoZWV0KGNhbGxiYWNrKTtcbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2UuZ2V0U2NhbGVzKCk7XG59O1xuXG5DYWNoaW5nRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuYWRkQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGwpIHtcbiAgICBpZiAodGhpcy5zb3VyY2UuYWRkQWN0aXZpdHlMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnNvdXJjZS5hZGRBY3Rpdml0eUxpc3RlbmVyKGwpO1xuICAgIH1cbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5yZW1vdmVBY3Rpdml0eUxpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIGlmICh0aGlzLnNvdXJjZS5yZW1vdmVBY3Rpdml0eUxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuc291cmNlLnJlbW92ZUFjdGl2aXR5TGlzdGVuZXIobCk7XG4gICAgfVxufTtcblxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmFkZENoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIGlmICh0aGlzLnNvdXJjZS5hZGRDaGFuZ2VMaXN0ZW5lcilcbiAgICAgICAgdGhpcy5zb3VyY2UuYWRkQ2hhbmdlTGlzdGVuZXIobCk7XG59O1xuXG5DYWNoaW5nRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XG4gICAgaWYgKHRoaXMuc291cmNlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKVxuICAgICAgICB0aGlzLnNvdXJjZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcihsKTtcbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5maW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCBjYWxsYmFjaykge1xuICAgIHRoaXMuc291cmNlLmZpbmROZXh0RmVhdHVyZShjaHIsIHBvcywgZGlyLCBjYWxsYmFjayk7XG59O1xuXG5DYWNoaW5nRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucXVhbnRGaW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCB0aHJlc2hvbGQsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zb3VyY2UucXVhbnRGaW5kTmV4dEZlYXR1cmUoY2hyLCBwb3MsIGRpciwgdGhyZXNob2xkLCBjYWxsYmFjayk7XG59O1xuXG5DYWNoaW5nRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuY2FwYWJpbGl0aWVzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuc291cmNlLmNhcGFiaWxpdGllcykge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2UuY2FwYWJpbGl0aWVzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2ssIHN0eWxlRmlsdGVycykge1xuICAgIGlmICghcG9vbCkge1xuICAgICAgICB0aHJvdyBFcnJvcignRmV0Y2ggcG9vbCBpcyBudWxsJyk7XG4gICAgfVxuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBjYWNoZUtleSA9IHRoaXMuY2ZzaWQ7XG5cbiAgICB2YXIgYXdhaXRlZEZlYXR1cmVzID0gcG9vbC5hd2FpdGVkRmVhdHVyZXNbY2FjaGVLZXldO1xuICAgIGlmIChhd2FpdGVkRmVhdHVyZXMgJiYgYXdhaXRlZEZlYXR1cmVzLnN0YXJ0ZWQpIHtcbiAgICAgICAgaWYgKGF3YWl0ZWRGZWF0dXJlcy5zdHlsZUZpbHRlcnMuZG9lc05vdENvbnRhaW4oc3R5bGVGaWx0ZXJzKSkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0ZldGNoIGFscmVhZHkgc3RhcnRlZCB3aXRoIHdyb25nIHBhcmFtZXRlcnMsIHNraXBwaW5nIGNhY2hlLicpO1xuICAgICAgICAgICAgc2VsZi5zb3VyY2UuZmV0Y2goY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaywgc3R5bGVGaWx0ZXJzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXdhaXRlZEZlYXR1cmVzKSB7XG4gICAgICAgIGF3YWl0ZWRGZWF0dXJlcy5zdHlsZUZpbHRlcnMuYWRkQWxsKHN0eWxlRmlsdGVycyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXRlZEZlYXR1cmVzID0gbmV3IEF3YWl0ZWQoKTtcbiAgICAgICAgYXdhaXRlZEZlYXR1cmVzLnN0eWxlRmlsdGVycyA9IHN0eWxlRmlsdGVycztcbiAgICAgICAgcG9vbC5hd2FpdGVkRmVhdHVyZXNbY2FjaGVLZXldID0gYXdhaXRlZEZlYXR1cmVzO1xuXG4gICAgICAgIHBvb2wucmVxdWVzdHNJc3N1ZWQudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGF3YWl0ZWRGZWF0dXJlcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHNlbGYuc291cmNlLmZldGNoKFxuICAgICAgICAgICAgICAgIGNociwgXG4gICAgICAgICAgICAgICAgbWluLCBcbiAgICAgICAgICAgICAgICBtYXgsIFxuICAgICAgICAgICAgICAgIHNjYWxlLCBcbiAgICAgICAgICAgICAgICBhd2FpdGVkRmVhdHVyZXMuc3R5bGVGaWx0ZXJzLnR5cGVMaXN0KCksIFxuICAgICAgICAgICAgICAgIHBvb2wsIFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHN0YXR1cywgZmVhdHVyZXMsIHNjYWxlLCBjb3ZlcmFnZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWF3YWl0ZWRGZWF0dXJlcy5yZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdGVkRmVhdHVyZXMucHJvdmlkZSh7c3RhdHVzOiBzdGF0dXMsIGZlYXR1cmVzOiBmZWF0dXJlcywgc2NhbGU6IHNjYWxlLCBjb3ZlcmFnZTogY292ZXJhZ2V9KTtcbiAgICAgICAgICAgICAgICB9LCBcbiAgICAgICAgICAgICAgICBhd2FpdGVkRmVhdHVyZXMuc3R5bGVGaWx0ZXJzKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcbiAgICB9IFxuXG4gICAgYXdhaXRlZEZlYXR1cmVzLmF3YWl0KGZ1bmN0aW9uKGFmKSB7XG4gICAgICAgIGNhbGxiYWNrKGFmLnN0YXR1cywgYWYuZmVhdHVyZXMsIGFmLnNjYWxlLCBhZi5jb3ZlcmFnZSk7XG4gICAgfSk7XG59O1xuICAgIFxuZnVuY3Rpb24gRmVhdHVyZVNvdXJjZUJhc2UoKSB7XG4gICAgdGhpcy5idXN5ID0gMDtcbiAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5yZWFkaW5lc3NMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLnJlYWRpbmVzcyA9IG51bGw7XG59XG5cbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5hZGRSZWFkaW5lc3NMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgdGhpcy5yZWFkaW5lc3NMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgbGlzdGVuZXIodGhpcy5yZWFkaW5lc3MpO1xufTtcblxuRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlLnJlbW92ZVJlYWRpbmVzc0xpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMucmVhZGluZXNzTGlzdGVuZXJzLCBsaXN0ZW5lcik7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMucmVhZGluZXNzTGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xuICAgIH1cbn07XG5cbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5ub3RpZnlSZWFkaW5lc3MgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5yZWFkaW5lc3NMaXN0ZW5lcnMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVyc1tsaV0odGhpcy5yZWFkaW5lc3MpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5hZGRBY3Rpdml0eUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xufTtcblxuRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlLnJlbW92ZUFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5hY3Rpdml0eUxpc3RlbmVycywgbGlzdGVuZXIpO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xuICAgIH1cbn07XG5cbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5ub3RpZnlBY3Rpdml0eSA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLmxlbmd0aDsgKytsaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVyc1tsaV0odGhpcy5idXN5KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5GZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUuZ2V0U2NhbGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG51bGw7XG59O1xuXG5GZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNudCkge1xuICAgIHJldHVybiBjbnQobnVsbCwgW10sIDEwMDAwMDAwMDApO1xufTtcblxuRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcbiAgICB2YXIgZGVmU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICBkZWZTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgIGRlZlN0eWxlLkJHQ09MT1IgPSAnYmx1ZSc7XG4gICAgZGVmU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIGRlZlN0eWxlKTtcbiAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XG59O1xuXG5cblxuZnVuY3Rpb24gREFTRmVhdHVyZVNvdXJjZShkYXNTb3VyY2UpIHtcbiAgICB0aGlzLmRhc1NvdXJjZSA9IG5ldyBEQVNTb3VyY2UoZGFzU291cmNlKTtcbiAgICB0aGlzLmJ1c3kgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMgPSBbXTtcbn1cblxuREFTRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuYWRkQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbn07XG5cbkRBU0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnJlbW92ZUFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5hY3Rpdml0eUxpc3RlbmVycywgbGlzdGVuZXIpO1xuICAgIGlmIChpZHggPj0gMClcbiAgICAgICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbn07XG5cblxuREFTRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUubm90aWZ5QWN0aXZpdHkgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5sZW5ndGg7ICsrbGkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnNbbGldKHRoaXMuYnVzeSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuREFTRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5kYXNTb3VyY2Uuc3R5bGVzaGVldChmdW5jdGlvbihzdHlsZXNoZWV0KSB7XG4gICAgICAgIGNhbGxiYWNrKHN0eWxlc2hlZXQpO1xuICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICBjYWxsYmFjayhudWxsLCBcIkNvdWxkbid0IGZldGNoIERBUyBzdHlsZXNoZWV0XCIpO1xuICAgIH0pO1xufTtcblxuREFTRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVzICYmIHR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjYWxsYmFjayhudWxsLCBbXSwgc2NhbGUpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmRhc1NvdXJjZS51cmkgJiYgIXRoaXMuZGFzU291cmNlLmZlYXR1cmVzX3VyaSkge1xuICAgICAgICAvLyBGSVhNRSBzaG91bGQgdGhpcyBiZSBtYWtpbmcgYW4gZXJyb3IgY2FsbGJhY2s/Pz9cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRhc1NvdXJjZS5kYXNTdGF0aWNGZWF0dXJlcyAmJiB0aGlzLmNhY2hlZFN0YXRpY0ZlYXR1cmVzKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCB0aGlzLmNhY2hlZFN0YXRpY0ZlYXR1cmVzLCB0aGlzLmNhY2hlZFN0YXRpY1NjYWxlKTtcbiAgICB9XG5cbiAgICB2YXIgdHJ5TWF4QmlucyA9ICh0aGlzLmRhc1NvdXJjZS5tYXhiaW5zICE9PSBmYWxzZSk7XG4gICAgdmFyIGZvcHMgPSB7XG4gICAgICAgIHR5cGU6IHR5cGVzXG4gICAgfTtcbiAgICBpZiAodHJ5TWF4Qmlucykge1xuICAgICAgICBmb3BzLm1heGJpbnMgPSAxICsgKCgobWF4IC0gbWluKSAvIHNjYWxlKSB8IDApO1xuICAgIH1cbiAgICBcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXNCLmJ1c3krKztcbiAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuXG4gICAgdGhpcy5kYXNTb3VyY2UuZmVhdHVyZXMoXG4gICAgICAgIG5ldyBEQVNTZWdtZW50KGNociwgbWluLCBtYXgpLFxuICAgICAgICBmb3BzLFxuICAgICAgICBmdW5jdGlvbihmZWF0dXJlcywgc3RhdHVzKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICAgICAgICAgIHZhciByZXRTY2FsZSA9IHNjYWxlO1xuICAgICAgICAgICAgaWYgKCF0cnlNYXhCaW5zKSB7XG4gICAgICAgICAgICAgICAgcmV0U2NhbGUgPSAwLjE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXN0YXR1cyAmJiB0aGlzQi5kYXNTb3VyY2UuZGFzU3RhdGljRmVhdHVyZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzQi5jYWNoZWRTdGF0aWNGZWF0dXJlcyA9IGZlYXR1cmVzO1xuICAgICAgICAgICAgICAgIHRoaXNCLmNhY2hlZFN0YXRpY1NjYWxlID0gcmV0U2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayhzdGF0dXMsIGZlYXR1cmVzLCByZXRTY2FsZSk7XG4gICAgICAgIH1cbiAgICApO1xufTtcblxuREFTRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmluZE5leHRGZWF0dXJlID0gZnVuY3Rpb24oY2hyLCBwb3MsIGRpciwgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5kYXNTb3VyY2UuY2FwYWJpbGl0aWVzICYmIGFycmF5SW5kZXhPZih0aGlzLmRhc1NvdXJjZS5jYXBhYmlsaXRpZXMsICdkYXMxOmFkamFjZW50LWZlYXR1cmUnKSA+PSAwKSB7XG4gICAgICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLmRhc0FkakxvY2spIHtcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZygnQWxyZWFkeSBsb29raW5nIGZvciBhIG5leHQgZmVhdHVyZSwgYmUgcGF0aWVudCEnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRhc0FkakxvY2sgPSB0cnVlO1xuICAgICAgICB2YXIgZm9wcyA9IHtcbiAgICAgICAgICAgIGFkamFjZW50OiBjaHIgKyAnOicgKyAocG9zfDApICsgJzonICsgKGRpciA+IDAgPyAnRicgOiAnQicpXG4gICAgICAgIH07XG4gICAgICAgIHZhciB0eXBlcyA9IHRoaXNUaWVyLmdldERlc2lyZWRUeXBlcyh0aGlzVGllci5icm93c2VyLnNjYWxlKTtcbiAgICAgICAgaWYgKHR5cGVzKSB7XG4gICAgICAgICAgICBmb3BzLnR5cGVzID0gdHlwZXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1RpZXIuZGFzU291cmNlLmZlYXR1cmVzKG51bGwsIGZvcHMsIGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgdGhpc0IuZGFzQWRqTG9jayA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHJlcy5sZW5ndGggPiAwICYmIHJlc1swXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIERBU1NlcXVlbmNlU291cmNlKGRhc1NvdXJjZSkge1xuICAgIHRoaXMuZGFzU291cmNlID0gbmV3IERBU1NvdXJjZShkYXNTb3VyY2UpO1xuICAgIHRoaXMuYXdhaXRlZEVudHJ5UG9pbnRzID0gbmV3IEF3YWl0ZWQoKTtcblxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpcy5kYXNTb3VyY2UuZW50cnlQb2ludHMoXG4gICAgICAgIGZ1bmN0aW9uKGVwKSB7XG4gICAgICAgICAgICB0aGlzQi5hd2FpdGVkRW50cnlQb2ludHMucHJvdmlkZShlcCk7XG4gICAgICAgIH0pO1xufVxuXG5cbkRBU1NlcXVlbmNlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHBvb2wsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5kYXNTb3VyY2Uuc2VxdWVuY2UoXG4gICAgICAgIG5ldyBEQVNTZWdtZW50KGNociwgbWluLCBtYXgpLFxuICAgICAgICBmdW5jdGlvbihzZXFzKSB7XG4gICAgICAgICAgICBpZiAoc2Vxcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBzZXFzWzBdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFwiRGlkbid0IGdldCBzZXF1ZW5jZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICk7XG59O1xuXG5EQVNTZXF1ZW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2VxSW5mbyA9IGZ1bmN0aW9uKGNociwgY250KSB7XG4gICAgdGhpcy5hd2FpdGVkRW50cnlQb2ludHMuYXdhaXQoZnVuY3Rpb24oZXApIHtcbiAgICAgICAgZm9yICh2YXIgZXBpID0gMDsgZXBpIDwgZXAubGVuZ3RoOyArK2VwaSkge1xuICAgICAgICAgICAgaWYgKGVwW2VwaV0ubmFtZSA9PSBjaHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY250KHtsZW5ndGg6IGVwW2VwaV0uZW5kfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNudCgpO1xuICAgIH0pO1xufTtcbiAgICBcblxuZnVuY3Rpb24gVHdvQml0U2VxdWVuY2VTb3VyY2Uoc291cmNlKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLnR3b0JpdCA9IG5ldyBBd2FpdGVkKCk7XG4gICAgdmFyIGRhdGE7XG4gICAgaWYgKHNvdXJjZS50d29CaXRVUkkpIHtcbiAgICAgICAgZGF0YSA9IG5ldyBVUkxGZXRjaGFibGUoc291cmNlLnR3b0JpdFVSSSwge2NyZWRlbnRpYWxzOiBzb3VyY2UuY3JlZGVudGlhbHMsIHJlc29sdmVyOiBzb3VyY2UucmVzb2x2ZXJ9KTtcbiAgICB9IGVsc2UgaWYgKHNvdXJjZS50d29CaXRCbG9iKSB7XG4gICAgICAgIGRhdGEgPSBuZXcgQmxvYkZldGNoYWJsZShzb3VyY2UudHdvQml0QmxvYik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJObyB0d29CaXRVUkkgb3IgdHdvQml0QmxvYiBwYXJhbWV0ZXJcIik7XG4gICAgfVxuXG4gICAgbWFrZVR3b0JpdChkYXRhLCBmdW5jdGlvbih0YiwgZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzQi50d29CaXQucHJvdmlkZSh0Yik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuVHdvQml0U2VxdWVuY2VTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgcG9vbCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy50d29CaXQuYXdhaXQoZnVuY3Rpb24odGIpIHtcbiAgICAgICAgICAgIHRiLmZldGNoKGNociwgbWluLCBtYXgsXG4gICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihzZXEsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcXVlbmNlID0gbmV3IERBU1NlcXVlbmNlKGNociwgbWluLCBtYXgsICdETkEnLCBzZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgc2VxdWVuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbn07XG5cblR3b0JpdFNlcXVlbmNlU291cmNlLnByb3RvdHlwZS5nZXRTZXFJbmZvID0gZnVuY3Rpb24oY2hyLCBjbnQpIHtcbiAgICB0aGlzLnR3b0JpdC5hd2FpdChmdW5jdGlvbih0Yikge1xuICAgICAgICB2YXIgc2VxID0gdGIuZ2V0U2VxKGNocik7XG4gICAgICAgIGlmIChzZXEpIHtcbiAgICAgICAgICAgIHRiLmdldFNlcShjaHIpLmxlbmd0aChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICAgICAgY250KHtsZW5ndGg6IGx9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY250KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmZ1bmN0aW9uIEVuc2VtYmxTZXF1ZW5jZVNvdXJjZShzb3VyY2UpIHtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAvLyBodHRwOi8vZGF0YS5ncmFtZW5lLm9yZy9lbnNlbWJsL2luZm8vYXNzZW1ibHkvdHJpdGljdW1fYWVzdGl2dW0vMkI/Y29udGVudC10eXBlPWFwcGxpY2F0aW9uL2pzb25cbiAgICAvLyBodHRwOi8vZGF0YS5ncmFtZW5lLm9yZy9lbnNlbWJsL3NlcXVlbmNlL3JlZ2lvbi90cml0aWN1bV9hZXN0aXZ1bS8yQjo4MDAxLi4xODAwMDoxP2NvbnRlbnQtdHlwZT1hcHBsaWNhdGlvbi9qc29uXG59XG5cbkVuc2VtYmxTZXF1ZW5jZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBwb29sLCBjYWxsYmFjaykge1xuICAgIHZhciB1cmwgPSB0aGlzLnNvdXJjZS5lbnNlbWJsVVJJICsgJy9zZXF1ZW5jZS9yZWdpb24vJyArIHRoaXMuc291cmNlLnNwZWNpZXMgKyAnLycgK1xuICAgICAgICAgICAgICBjaHIgKyAnOicgKyBtaW4gKyAnLi4nICsgbWF4ICsgJzoxP2NvbnRlbnQtdHlwZT1hcHBsaWNhdGlvbi9qc29uJztcbiAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgdmFyIGpyO1xuICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPj0gMzAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVyciA9ICdFcnJvciBjb2RlICcgKyByZXEuc3RhdHVzO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGpyID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoanIuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IGpyLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGpyID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHZhciBzZXF1ZW5jZSA9IG5ldyBEQVNTZXF1ZW5jZShjaHIsIG1pbiwgbWF4LCAnRE5BJywganIuc2VxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgc2VxdWVuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICByZXEucmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgIHJlcS5zZW5kKCk7XG59O1xuXG5FbnNlbWJsU2VxdWVuY2VTb3VyY2UucHJvdG90eXBlLmdldFNlcUluZm8gPSBmdW5jdGlvbihjaHIsIGNudCkge1xuICB2YXIgdXJsID0gdGhpcy5zb3VyY2UuZW5zZW1ibFVSSSArICcvaW5mby9hc3NlbWJseS8nICsgdGhpcy5zb3VyY2Uuc3BlY2llcyArICcvJyArIGNociArICc/Y29udGVudC10eXBlPWFwcGxpY2F0aW9uL2pzb24nO1xuICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgaWYgKHJlcS5zdGF0dXMgPj0gMzAwKSB7XG4gICAgICAgICAgICBjbnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBqciA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlKTtcbiAgICAgICAgICAgIGNudChqcik7XG4gICAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICByZXEucmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICByZXEuc2VuZCgpO1xufTtcblxuREFTRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2NhbGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFtdO1xufTtcblxudmFyIGJ3Z19wcmVmbGlnaHRzID0ge307XG5cbmZ1bmN0aW9uIEJXR0ZlYXR1cmVTb3VyY2UoYndnU291cmNlKSB7XG4gICAgRmVhdHVyZVNvdXJjZUJhc2UuY2FsbCh0aGlzKTtcblxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpcy5yZWFkaW5lc3MgPSAnQ29ubmVjdGluZyc7XG4gICAgdGhpcy5id2dTb3VyY2UgPSB0aGlzLm9wdHMgPSBid2dTb3VyY2U7ICAgIFxuICAgIHRoaXNCLmJ3Z0hvbGRlciA9IG5ldyBBd2FpdGVkKCk7XG5cbiAgICBpZiAodGhpcy5vcHRzLnByZWZsaWdodCkge1xuICAgICAgICB2YXIgcGZzID0gYndnX3ByZWZsaWdodHNbdGhpcy5vcHRzLnByZWZsaWdodF07XG4gICAgICAgIGlmICghcGZzKSB7XG4gICAgICAgICAgICBwZnMgPSBuZXcgQXdhaXRlZCgpO1xuICAgICAgICAgICAgYndnX3ByZWZsaWdodHNbdGhpcy5vcHRzLnByZWZsaWdodF0gPSBwZnM7XG5cbiAgICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBmcy5wcm92aWRlKCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZnMucHJvdmlkZSgnZmFpbHVyZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcS5vcGVuKCdnZXQnLCB0aGlzLm9wdHMucHJlZmxpZ2h0ICsgJz8nICsgaGV4X3NoYTEoJ3NhbHQnICsgRGF0ZS5ub3coKSksIHRydWUpOyAgICAvLyBJbnN0ZWFkLCBlbnN1cmUgd2UgYWx3YXlzIHByZWZsaWdodCBhIHVuaXF1ZSBVUkkuXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXEuc2VuZCgpO1xuICAgICAgICB9XG4gICAgICAgIHBmcy5hd2FpdChmdW5jdGlvbihzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09ICdzdWNjZXNzJykge1xuICAgICAgICAgICAgICAgIHRoaXNCLmluaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpc0IuaW5pdCgpO1xuICAgIH1cbn1cblxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZSk7XG5cbkJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHZhciBhcmc7XG5cbiAgICB2YXIgdXJpID0gdGhpcy5id2dTb3VyY2UudXJpIHx8IHRoaXMuYndnU291cmNlLmJ3Z1VSSTtcbiAgICBpZiAodXJpKSB7XG4gICAgICAgIGlmICh0aGlzLmJ3Z1NvdXJjZS50cmFuc3BvcnQgPT09ICdlbmNvZGUnKSB7XG4gICAgICAgICAgICBhcmcgPSBuZXcgRW5jb2RlRmV0Y2hhYmxlKHVyaSwge2NyZWRlbnRpYWxzOiB0aGlzLm9wdHMuY3JlZGVudGlhbHN9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFyZyA9IG5ldyBVUkxGZXRjaGFibGUodXJpLCB7Y3JlZGVudGlhbHM6IHRoaXMub3B0cy5jcmVkZW50aWFscywgcmVzb2x2ZXI6IHRoaXMub3B0cy5yZXNvbHZlcn0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYXJnID0gbmV3IEJsb2JGZXRjaGFibGUodGhpcy5id2dTb3VyY2UuYndnQmxvYik7XG4gICAgfVxuXG4gICAgbWFrZUJ3ZyhhcmcsIGZ1bmN0aW9uKGJ3ZywgZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXNCLmVycm9yID0gZXJyO1xuICAgICAgICAgICAgdGhpc0IucmVhZGluZXNzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeVJlYWRpbmVzcygpO1xuICAgICAgICAgICAgdGhpc0IuYndnSG9sZGVyLnByb3ZpZGUobnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzQi5id2dIb2xkZXIucHJvdmlkZShid2cpO1xuICAgICAgICAgICAgdGhpc0IucmVhZGluZXNzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeVJlYWRpbmVzcygpO1xuICAgICAgICAgICAgaWYgKGJ3Zy50eXBlID09ICdiaWdiZWQnKSB7XG4gICAgICAgICAgICAgICAgYndnLmdldEV4dHJhSW5kaWNlcyhmdW5jdGlvbihlaSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5leHRyYUluZGljZXMgPSBlaTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuY2FwYWJpbGl0aWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNhcHMgPSB7bGVhcDogdHJ1ZX07XG4gICAgaWYgKHRoaXMuYndnSG9sZGVyLnJlcyAmJiB0aGlzLmJ3Z0hvbGRlci5yZXMudHlwZSA9PSAnYmlnd2lnJylcbiAgICAgICAgY2Fwcy5xdWFudExlYXAgPSB0cnVlO1xuICAgIGlmICh0aGlzLmV4dHJhSW5kaWNlcyAmJiB0aGlzLmV4dHJhSW5kaWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNhcHMuc2VhcmNoID0gW107XG4gICAgICAgIGZvciAodmFyIGVpaSA9IDA7IGVpaSA8IHRoaXMuZXh0cmFJbmRpY2VzLmxlbmd0aDsgKytlaWkpIHtcbiAgICAgICAgICAgIGNhcHMuc2VhcmNoLnB1c2godGhpcy5leHRyYUluZGljZXNbZWlpXS5maWVsZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhcHM7XG59O1xuXG5CV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuYndnSG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGJ3Zykge1xuICAgICAgICBpZiAodHlwZW9mIGJ3ZyA9PT0gJ3VuZGVmaW5lZCcgfHwgYndnID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodGhpc0IuZXJyb3IgfHwgXCJDYW4ndCBhY2Nlc3MgYmluYXJ5IGZpbGVcIiwgbnVsbCwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0YTtcbiAgICAgICAgdmFyIHdhbnREZW5zaXR5ID0gIXR5cGVzIHx8IHR5cGVzLmxlbmd0aCA9PT0gMCB8fCBhcnJheUluZGV4T2YodHlwZXMsICdkZW5zaXR5JykgPj0gMDtcbiAgICAgICAgaWYgKHRoaXNCLm9wdHMuY2xpZW50QmluKSB7XG4gICAgICAgICAgICB3YW50RGVuc2l0eSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzY2FsZUZhY3RvciA9IHRoaXNCLm9wdHMuc2NhbGVGYWN0b3IgfHwgMS4wO1xuICAgICAgICBpZiAoYndnLnR5cGUgPT0gJ2JpZ3dpZycgfHwgd2FudERlbnNpdHkgfHwgKHR5cGVvZiB0aGlzQi5vcHRzLmZvcmNlUmVkdWN0aW9uICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgICAgIHZhciB6b29tID0gLTE7XG4gICAgICAgICAgICBmb3IgKHZhciB6ID0gMDsgeiA8IGJ3Zy56b29tTGV2ZWxzLmxlbmd0aDsgKyt6KSB7XG4gICAgICAgICAgICAgICAgaWYgKGJ3Zy56b29tTGV2ZWxzW3pdLnJlZHVjdGlvbiA8PSAoc2NhbGUgKiBzY2FsZUZhY3RvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgem9vbSA9IHo7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzQi5vcHRzLmZvcmNlUmVkdWN0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHpvb20gPSB0aGlzQi5vcHRzLmZvcmNlUmVkdWN0aW9uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoem9vbSA8IDApIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gYndnLmdldFVuem9vbWVkVmlldygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gYndnLmdldFpvb21lZFZpZXcoem9vbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhID0gYndnLmdldFVuem9vbWVkVmlldygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzQi5idXN5Kys7XG4gICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgICAgIGRhdGEucmVhZFdpZ0RhdGEoY2hyLCBtaW4sIG1heCwgZnVuY3Rpb24oZmVhdHVyZXMpIHtcbiAgICAgICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICAgICAgICAgIHZhciBmcyA9IDEwMDAwMDAwMDA7XG4gICAgICAgICAgICBpZiAoYndnLnR5cGUgPT09ICdiaWd3aWcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzID0gKG1heCAtIG1pbikgLyBmZWF0dXJlcy5sZW5ndGggLyAyO1xuICAgICAgICAgICAgICAgIGlmIChpcyA8IGZzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZzID0gaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXNCLm9wdHMubGluaykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmZWF0dXJlcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBmZWF0dXJlc1tmaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChmLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmLmxpbmtzID0gW25ldyBEQVNMaW5rKCdMaW5rJywgdGhpc0Iub3B0cy5saW5rLnJlcGxhY2UoL1xcJFxcJC8sIGYubGFiZWwpKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBmZWF0dXJlcywgZnMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnF1YW50RmluZE5leHRGZWF0dXJlID0gZnVuY3Rpb24oY2hyLCBwb3MsIGRpciwgdGhyZXNob2xkLCBjYWxsYmFjaykge1xuICAgIC8vIHZhciBiZWZvcmVRRk5GID0gRGF0ZS5ub3coKXwwO1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpc0IuYnVzeSsrO1xuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgdGhpcy5id2dIb2xkZXIucmVzLnRocmVzaG9sZFNlYXJjaChjaHIsIHBvcywgZGlyLCB0aHJlc2hvbGQsIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgICAgICAvLyB2YXIgYWZ0ZXJRRk5GID0gRGF0ZS5ub3coKXwwO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnUUZORiB0b29rICcgKyAoYWZ0ZXJRRk5GIC0gYmVmb3JlUUZORikgKyAnbXMnKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGEsIGIpO1xuICAgIH0pO1xufTtcblxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmluZE5leHRGZWF0dXJlID0gZnVuY3Rpb24oY2hyLCBwb3MsIGRpciwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXNCLmJ1c3krKztcbiAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgIHRoaXMuYndnSG9sZGVyLnJlcy5nZXRVbnpvb21lZFZpZXcoKS5nZXRGaXJzdEFkamFjZW50KGNociwgcG9zLCBkaXIsIGZ1bmN0aW9uKHJlcykge1xuICAgICAgICB0aGlzQi5idXN5LS07XG4gICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgICAgIGlmIChyZXMubGVuZ3RoID4gMCAmJiByZXNbMF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHJlc1swXSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbkJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBid2cgPSB0aGlzLmJ3Z0hvbGRlci5yZXM7XG4gICAgaWYgKGJ3ZyAvKiAmJiBid2cudHlwZSA9PSAnYmlnd2lnJyAqLykge1xuICAgICAgICB2YXIgc2NhbGVzID0gWzFdOyAgLy8gQ2FuIHdlIGJlIHNtYXJ0ZXIgYWJvdXQgaW5mZXJyaW5nIGJhc2VsaW5lIHNjYWxlP1xuICAgICAgICBmb3IgKHZhciB6ID0gMDsgeiA8IGJ3Zy56b29tTGV2ZWxzLmxlbmd0aDsgKyt6KSB7XG4gICAgICAgICAgICBzY2FsZXMucHVzaChid2cuem9vbUxldmVsc1t6XS5yZWR1Y3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY2FsZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufTtcblxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0aGlzLmV4dHJhSW5kaWNlcyB8fCB0aGlzLmV4dHJhSW5kaWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdObyBpbmRpY2VzIGF2YWlsYWJsZScpO1xuICAgIH1cblxuICAgIHZhciBpbmRleCA9IHRoaXMuZXh0cmFJbmRpY2VzWzBdO1xuICAgIHJldHVybiBpbmRleC5sb29rdXAocXVlcnksIGNhbGxiYWNrKTtcbn07XG5cbkJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldERlZmF1bHRGSVBzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5vcHRzLm5vRXh0cmFGZWF0dXJlSW5mbylcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICB0aGlzLmJ3Z0hvbGRlci5hd2FpdChmdW5jdGlvbihid2cpIHtcbiAgICAgICAgaWYgKCFid2cpIHJldHVybjtcblxuICAgICAgICBpZiAoYndnLnNjaGVtYSAmJiBid2cuZGVmaW5lZEZpZWxkQ291bnQgPCBid2cuc2NoZW1hLmZpZWxkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBmaXAgPSBmdW5jdGlvbihmZWF0dXJlLCBmZWF0dXJlSW5mbykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCBmZWF0dXJlSW5mby5oaXQubGVuZ3RoOyArK2hpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlSW5mby5oaXRbaGldLmlzU3VwZXJHcm91cClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZmkgPSBid2cuZGVmaW5lZEZpZWxkQ291bnQ7IGZpIDwgYndnLnNjaGVtYS5maWVsZHMubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gYndnLnNjaGVtYS5maWVsZHNbZmldO1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlSW5mby5hZGQoZi5jb21tZW50LCBmZWF0dXJlW2YubmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKGZpcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBObyBuZWVkIHRvIGRvIGFueXRoaW5nLlxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5CV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdGhpcy5id2dIb2xkZXIuYXdhaXQoZnVuY3Rpb24oYndnKSB7XG4gICAgICAgIGlmICghYndnKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ2JiaSBlcnJvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xuICAgICAgICBpZiAoYndnLnR5cGUgPT0gJ2JpZ2JlZCcpIHtcbiAgICAgICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDg7XG4gICAgICAgICAgICB3aWdTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICAgICAgICAgIHdpZ1N0eWxlLkxBQkVMID0gdHJ1ZTtcbiAgICAgICAgICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdiaWdiZWQnfSwgbnVsbCwgd2lnU3R5bGUpO1xuICAgICAgICBcbiAgICAgICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAncmVkJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDEwO1xuICAgICAgICAgICAgd2lnU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgICAgICAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNsYXRpb24nfSwgbnVsbCwgd2lnU3R5bGUpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB0c1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgICAgICB0c1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgICAgICAgICB0c1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICAgICAgdHNTdHlsZS5CR0NPTE9SID0gJ3doaXRlJztcbiAgICAgICAgICAgIHRzU3R5bGUuSEVJR0hUID0gMTA7XG4gICAgICAgICAgICB0c1N0eWxlLlpJTkRFWCA9IDEwO1xuICAgICAgICAgICAgdHNTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICAgICAgICAgIHRzU3R5bGUuTEFCRUwgPSB0cnVlO1xuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd0cmFuc2NyaXB0J30sIG51bGwsIHRzU3R5bGUpO1xuXG4gICAgICAgICAgICB2YXIgZGVuc1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgICAgICBkZW5zU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcbiAgICAgICAgICAgIGRlbnNTdHlsZS5DT0xPUjEgPSAnd2hpdGUnO1xuICAgICAgICAgICAgZGVuc1N0eWxlLkNPTE9SMiA9ICdibGFjayc7XG4gICAgICAgICAgICBkZW5zU3R5bGUuSEVJR0hUPTMwO1xuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZW5zaXR5J30sIG51bGwsIGRlbnNTdHlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XG4gICAgICAgICAgICB3aWdTdHlsZS5DT0xPUjEgPSAnd2hpdGUnO1xuICAgICAgICAgICAgd2lnU3R5bGUuQ09MT1IyID0gJ2JsYWNrJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkhFSUdIVD0zMDtcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVmYXVsdCd9LCBudWxsLCB3aWdTdHlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYndnLmRlZmluZWRGaWVsZENvdW50ID09IDEyICYmIGJ3Zy5maWVsZENvdW50ID49IDE0KSB7XG4gICAgICAgICAgICBzdHlsZXNoZWV0LmdlbmVIaW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhzdHlsZXNoZWV0KTtcbiAgICB9KTtcbn07XG5cbmZ1bmN0aW9uIFJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UoYndnU291cmNlLCB3b3JrZXIsIGJyb3dzZXIpIHtcbiAgICBGZWF0dXJlU291cmNlQmFzZS5jYWxsKHRoaXMpO1xuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLndvcmtlciA9IHdvcmtlcjtcbiAgICB0aGlzLnJlYWRpbmVzcyA9ICdDb25uZWN0aW5nJztcbiAgICB0aGlzLmJ3Z1NvdXJjZSA9IHRoaXMub3B0cyA9IGJ3Z1NvdXJjZTtcbiAgICB0aGlzLmtleUhvbGRlciA9IG5ldyBBd2FpdGVkKCk7XG5cbiAgICBpZiAoYndnU291cmNlLnJlc29sdmVyKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZXJLZXkgPSBicm93c2VyLnJlZ2lzdGVyUmVzb2x2ZXIoYndnU291cmNlLnJlc29sdmVyKTtcbiAgICB9XG5cbiAgICB0aGlzLmluaXQoKTtcbn1cblxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZSk7XG5cblJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHZhciB1cmkgPSB0aGlzLnVyaSB8fCB0aGlzLmJ3Z1NvdXJjZS51cmkgfHwgdGhpcy5id2dTb3VyY2UuYndnVVJJO1xuICAgIHZhciBibG9iID0gdGhpcy5id2dTb3VyY2UuYmxvYiB8fCB0aGlzLmJ3Z1NvdXJjZS5id2dCbG9iO1xuXG4gICAgdmFyIGNudCA9IGZ1bmN0aW9uKGtleSwgZXJyKSB7XG4gICAgICAgIHRoaXNCLnJlYWRpbmVzcyA9IG51bGw7XG4gICAgICAgIHRoaXNCLm5vdGlmeVJlYWRpbmVzcygpO1xuXG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIHRoaXNCLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ21ldGEnLCBjb25uZWN0aW9uOiBrZXl9LCBmdW5jdGlvbihtZXRhLCBlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmVycm9yID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5rZXlIb2xkZXIucHJvdmlkZShudWxsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5tZXRhID0gbWV0YTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iua2V5SG9sZGVyLnByb3ZpZGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXNCLmVycm9yID0gZXJyO1xuICAgICAgICAgICAgdGhpc0Iua2V5SG9sZGVyLnByb3ZpZGUobnVsbCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGJsb2IpIHtcbiAgICAgICAgdGhpcy53b3JrZXIucG9zdENvbW1hbmQoe2NvbW1hbmQ6ICdjb25uZWN0QkJJJywgYmxvYjogYmxvYn0sIGNudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53b3JrZXIucG9zdENvbW1hbmQoe1xuICAgICAgICAgICAgY29tbWFuZDogJ2Nvbm5lY3RCQkknLCBcbiAgICAgICAgICAgIHVyaTogcmVzb2x2ZVVybFRvUGFnZSh1cmkpLCBcbiAgICAgICAgICAgIHJlc29sdmVyOiB0aGlzLnJlc29sdmVyS2V5LFxuICAgICAgICAgICAgdHJhbnNwb3J0OiB0aGlzLmJ3Z1NvdXJjZS50cmFuc3BvcnQsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogdGhpcy5id2dTb3VyY2UuY3JlZGVudGlhbHN9LCBcbiAgICAgICAgICBjbnQpOyBcbiAgICB9XG59O1xuXG5SZW1vdGVCV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5jYXBhYmlsaXRpZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2FwcyA9IHtsZWFwOiB0cnVlfTtcblxuICAgIGlmICh0aGlzLm1ldGEgJiYgdGhpcy5tZXRhLnR5cGUgPT0gJ2JpZ3dpZycpXG4gICAgICAgIGNhcHMucXVhbnRMZWFwID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5tZXRhICYmIHRoaXMubWV0YS5leHRyYUluZGljZXMgJiYgdGhpcy5tZXRhLmV4dHJhSW5kaWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNhcHMuc2VhcmNoID0gW107XG4gICAgICAgIGZvciAodmFyIGVpaSA9IDA7IGVpaSA8IHRoaXMubWV0YS5leHRyYUluZGljZXMubGVuZ3RoOyArK2VpaSkge1xuICAgICAgICAgICAgY2Fwcy5zZWFyY2gucHVzaCh0aGlzLm1ldGEuZXh0cmFJbmRpY2VzW2VpaV0uZmllbGQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYXBzO1xufTtcblxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIHRoaXNCLmJ1c3krKztcbiAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuXG4gICAgdGhpcy5rZXlIb2xkZXIuYXdhaXQoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIGlmICgha2V5KSB7XG4gICAgICAgICAgICB0aGlzQi5idXN5LS07XG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXNCLmVycm9yIHx8IFwiQ2FuJ3QgYWNjZXNzIGJpbmFyeSBmaWxlXCIsIG51bGwsIG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHpvb20gPSAtMTtcbiAgICAgICAgdmFyIHdhbnREZW5zaXR5ID0gIXR5cGVzIHx8IHR5cGVzLmxlbmd0aCA9PT0gMCB8fCBhcnJheUluZGV4T2YodHlwZXMsICdkZW5zaXR5JykgPj0gMDtcbiAgICAgICAgaWYgKHRoaXNCLm9wdHMuY2xpZW50QmluKSB7XG4gICAgICAgICAgICB3YW50RGVuc2l0eSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzQi5tZXRhLnR5cGUgPT0gJ2JpZ3dpZycgfHwgd2FudERlbnNpdHkgfHwgKHR5cGVvZiB0aGlzQi5vcHRzLmZvcmNlUmVkdWN0aW9uICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHogPSAxOyB6IDwgdGhpc0IubWV0YS56b29tTGV2ZWxzLmxlbmd0aDsgKyt6KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNCLm1ldGEuem9vbUxldmVsc1t6XSA8PSBzY2FsZSkge1xuICAgICAgICAgICAgICAgICAgICB6b29tID0geiAtIDE7IC8vIFNjYWxlcyByZXR1cm5lZCBpbiBtZXRhZGF0YSBzdGFydCBhdCAxLCB1bmxpa2UgXCJyZWFsXCIgem9vbSBsZXZlbHMuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzQi5vcHRzLmZvcmNlUmVkdWN0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHpvb20gPSB0aGlzQi5vcHRzLmZvcmNlUmVkdWN0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzQi53b3JrZXIucG9zdENvbW1hbmQoe2NvbW1hbmQ6ICdmZXRjaCcsIGNvbm5lY3Rpb246IGtleSwgY2hyOiBjaHIsIG1pbjogbWluLCBtYXg6IG1heCwgem9vbTogem9vbX0sIGZ1bmN0aW9uKGZlYXR1cmVzLCBlcnJvcikge1xuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcblxuICAgICAgICAgICAgdmFyIGZzID0gMTAwMDAwMDAwMDtcbiAgICAgICAgICAgIGlmICh0aGlzQi5tZXRhLnR5cGUgPT09ICdiaWd3aWcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzID0gKG1heCAtIG1pbikgLyBmZWF0dXJlcy5sZW5ndGggLyAyO1xuICAgICAgICAgICAgICAgIGlmIChpcyA8IGZzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZzID0gaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGlmICh0aGlzQi5vcHRzLmxpbmspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZi5saW5rcyA9IFtuZXcgREFTTGluaygnTGluaycsIHRoaXNCLm9wdHMubGluay5yZXBsYWNlKC9cXCRcXCQvLCBmLmxhYmVsKSldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCBmZWF0dXJlcywgZnMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucXVhbnRGaW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCB0aHJlc2hvbGQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLmJ1c3krKztcbiAgICB0aGlzLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgdGhpcy53b3JrZXIucG9zdENvbW1hbmQoe2NvbW1hbmQ6ICdxdWFudExlYXAnLCBjb25uZWN0aW9uOiB0aGlzLmtleUhvbGRlci5yZXMsIGNocjogY2hyLCBwb3M6IHBvcywgZGlyOiBkaXIsIHRocmVzaG9sZDogdGhyZXNob2xkLCB1bmRlcjogZmFsc2V9LCBmdW5jdGlvbihyZXN1bHQsIGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQsIGVycik7XG4gICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlc3VsdCwgZXJyKTtcbiAgICB9KTtcbn07XG5cblJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLmJ1c3krKztcbiAgICB0aGlzLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgdGhpcy53b3JrZXIucG9zdENvbW1hbmQoe2NvbW1hbmQ6ICdsZWFwJywgY29ubmVjdGlvbjogdGhpcy5rZXlIb2xkZXIucmVzLCBjaHI6IGNociwgcG9zOiBwb3MsIGRpcjogZGlyfSwgZnVuY3Rpb24ocmVzdWx0LCBlcnIpIHtcbiAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDAgJiYgcmVzdWx0WzBdICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhyZXN1bHRbMF0pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5SZW1vdGVCV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbWV0YSA9IHRoaXMubWV0YTtcbiAgICBpZiAobWV0YSkge1xuICAgICAgICByZXR1cm4gbWV0YS56b29tTGV2ZWxzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn07XG5cblJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uKHF1ZXJ5LCBjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5tZXRhLmV4dHJhSW5kaWNlcyB8fCB0aGlzLm1ldGEuZXh0cmFJbmRpY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ05vIGluZGljZXMgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLmJ1c3krKztcbiAgICB0aGlzLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5tZXRhLmV4dHJhSW5kaWNlc1swXTtcbiAgICB0aGlzLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ3NlYXJjaCcsIGNvbm5lY3Rpb246IHRoaXMua2V5SG9sZGVyLnJlcywgcXVlcnk6IHF1ZXJ5LCBpbmRleDogaW5kZXh9LCBmdW5jdGlvbihyZXN1bHQsIGVycikge1xuICAgICAgICB0aGlzQi5idXN5LS07XG4gICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICAgICAgY2FsbGJhY2socmVzdWx0LCBlcnIpO1xuICAgIH0pO1xufTtcblxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0RGVmYXVsdEZJUHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLm9wdHMubm9FeHRyYUZlYXR1cmVJbmZvKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpcy5rZXlIb2xkZXIuYXdhaXQoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIHZhciBid2cgPSB0aGlzQi5tZXRhO1xuICAgICAgICBpZiAoIWJ3ZykgcmV0dXJuO1xuXG4gICAgICAgIGlmIChid2cuc2NoZW1hICYmIGJ3Zy5kZWZpbmVkRmllbGRDb3VudCA8IGJ3Zy5zY2hlbWEuZmllbGRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGZpcCA9IGZ1bmN0aW9uKGZlYXR1cmUsIGZlYXR1cmVJbmZvKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaGkgPSAwOyBoaSA8IGZlYXR1cmVJbmZvLmhpdC5sZW5ndGg7ICsraGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVJbmZvLmhpdFtoaV0uaXNTdXBlckdyb3VwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaSA9IGJ3Zy5kZWZpbmVkRmllbGRDb3VudDsgZmkgPCBid2cuc2NoZW1hLmZpZWxkcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBid2cuc2NoZW1hLmZpZWxkc1tmaV07XG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVJbmZvLmFkZChmLmNvbW1lbnQsIGZlYXR1cmVbZi5uYW1lXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2FsbGJhY2soZmlwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gZG8gYW55dGhpbmcuXG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cblJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG5cbiAgICB0aGlzLmtleUhvbGRlci5hd2FpdChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgdmFyIGJ3ZyA9IHRoaXNCLm1ldGE7XG4gICAgICAgIGlmICghYndnKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ2JiaSBlcnJvcicpO1xuICAgICAgICB9IFxuXG4gICAgICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcbiAgICAgICAgaWYgKGJ3Zy50eXBlID09ICdiaWdiZWQnKSB7XG4gICAgICAgICAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAnYmx1ZSc7XG4gICAgICAgICAgICB3aWdTdHlsZS5IRUlHSFQgPSA4O1xuICAgICAgICAgICAgd2lnU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgICAgICAgICB3aWdTdHlsZS5MQUJFTCA9IHRydWU7XG4gICAgICAgICAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnYmlnYmVkJ30sIG51bGwsIHdpZ1N0eWxlKTtcbiAgICAgICAgXG4gICAgICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgICAgICAgICAgd2lnU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgICAgICAgICB3aWdTdHlsZS5CR0NPTE9SID0gJ3JlZCc7XG4gICAgICAgICAgICB3aWdTdHlsZS5IRUlHSFQgPSAxMDtcbiAgICAgICAgICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xuICAgICAgICAgICAgd2lnU3R5bGUuWklOREVYID0gMjA7XG4gICAgICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zbGF0aW9uJ30sIG51bGwsIHdpZ1N0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgdHNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICAgICAgdHNTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgICAgICAgICAgdHNTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgICAgIHRzU3R5bGUuQkdDT0xPUiA9ICd3aGl0ZSc7XG4gICAgICAgICAgICB0c1N0eWxlLkhFSUdIVCA9IDEwO1xuICAgICAgICAgICAgdHNTdHlsZS5aSU5ERVggPSAxMDtcbiAgICAgICAgICAgIHRzU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgICAgICAgICB0c1N0eWxlLkxBQkVMID0gdHJ1ZTtcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNjcmlwdCd9LCBudWxsLCB0c1N0eWxlKTtcblxuICAgICAgICAgICAgdmFyIGRlbnNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICAgICAgZGVuc1N0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XG4gICAgICAgICAgICBkZW5zU3R5bGUuQ09MT1IxID0gJ3doaXRlJztcbiAgICAgICAgICAgIGRlbnNTdHlsZS5DT0xPUjIgPSAnYmxhY2snO1xuICAgICAgICAgICAgZGVuc1N0eWxlLkhFSUdIVD0zMDtcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVuc2l0eSd9LCBudWxsLCBkZW5zU3R5bGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdISVNUT0dSQU0nO1xuICAgICAgICAgICAgd2lnU3R5bGUuQ09MT1IxID0gJ3doaXRlJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkNPTE9SMiA9ICdibGFjayc7XG4gICAgICAgICAgICB3aWdTdHlsZS5IRUlHSFQ9MzA7XG4gICAgICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgd2lnU3R5bGUpO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoYndnLmRlZmluZWRGaWVsZENvdW50ID09IDEyICYmIGJ3Zy5maWVsZENvdW50ID49IDE0KSB7XG4gICAgICAgICAgICBzdHlsZXNoZWV0LmdlbmVIaW50ID0gdHJ1ZTtcbiAgICAgICAgfSBcblxuICAgICAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XG4gICAgfSk7XG59O1xuXG5mdW5jdGlvbiBiYW1SZWNvcmRUb0ZlYXR1cmUociwgZ3JvdXApIHtcbiAgICBpZiAoci5mbGFnICYgQmFtRmxhZ3MuU0VHTUVOVF9VTk1BUFBFRClcbiAgICAgICAgcmV0dXJuOyBcbiAgICBcbiAgICB2YXIgbGVuO1xuICAgIGlmIChyLnNlcSlcbiAgICAgICAgbGVuID0gci5zZXEubGVuZ3RoO1xuICAgIGVsc2UgXG4gICAgICAgIGxlbiA9IHIuc2VxTGVuZ3RoO1xuICAgIFxuICAgIGlmIChyLmNpZ2FyKSB7XG4gICAgICAgIGxlbiA9IDA7XG4gICAgICAgIHZhciBvcHMgPSBwYXJzZUNpZ2FyKHIuY2lnYXIpO1xuICAgICAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgb3BzLmxlbmd0aDsgKytjaSkge1xuICAgICAgICAgICAgdmFyIGNvID0gb3BzW2NpXTtcbiAgICAgICAgICAgIGlmIChjby5vcCA9PSAnTScgfHwgY28ub3AgPT0gJ0QnKVxuICAgICAgICAgICAgICAgIGxlbiArPSBjby5jbnQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZiA9IG5ldyBEQVNGZWF0dXJlKCk7XG4gICAgZi5taW4gPSByLnBvcyArIDE7XG4gICAgZi5tYXggPSByLnBvcyArIGxlbjtcbiAgICBmLnNlZ21lbnQgPSByLnNlZ21lbnQ7XG4gICAgZi50eXBlID0gJ2JhbSc7XG4gICAgZi5pZCA9IHIucmVhZE5hbWU7XG4gICAgZi5ub3RlcyA9IFsvKiAnU2VxdWVuY2U9JyArIHIuc2VxLCAnQ0lHQVI9JyArIHIuY2lnYXIsICovICdNUT0nICsgci5tcV07XG4gICAgZi5jaWdhciA9IHIuY2lnYXI7XG4gICAgZi5zZXEgPSByLnNlcTtcbiAgICBmLnF1YWxzID0gci5xdWFscztcbiAgICBmLm9yaWVudGF0aW9uID0gKHIuZmxhZyAmIEJhbUZsYWdzLlJFVkVSU0VfQ09NUExFTUVOVCkgPyAnLScgOiAnKyc7XG4gICAgZi5iYW1SZWNvcmQgPSByO1xuXG4gICAgaWYgKGdyb3VwICYmIChyLmZsYWcgJiBCYW1GbGFncy5NVUxUSVBMRV9TRUdNRU5UUykpIHtcbiAgICAgICAgZi5ncm91cHMgPSBbe2lkOiByLnJlYWROYW1lLCBcbiAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFkcGFpcid9XTtcbiAgICB9XG5cbiAgICByZXR1cm4gZjtcbn1cblxuZnVuY3Rpb24gQkFNRmVhdHVyZVNvdXJjZShiYW1Tb3VyY2UpIHtcbiAgICBGZWF0dXJlU291cmNlQmFzZS5jYWxsKHRoaXMpO1xuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLmJhbVNvdXJjZSA9IGJhbVNvdXJjZTtcbiAgICB0aGlzLm9wdHMgPSB7Y3JlZGVudGlhbHM6IGJhbVNvdXJjZS5jcmVkZW50aWFscywgcHJlZmxpZ2h0OiBiYW1Tb3VyY2UucHJlZmxpZ2h0LCBiYW1Hcm91cDogYmFtU291cmNlLmJhbUdyb3VwfTtcbiAgICB0aGlzLmJhbUhvbGRlciA9IG5ldyBBd2FpdGVkKCk7XG4gICAgXG4gICAgaWYgKHRoaXMub3B0cy5wcmVmbGlnaHQpIHtcbiAgICAgICAgdmFyIHBmcyA9IGJ3Z19wcmVmbGlnaHRzW3RoaXMub3B0cy5wcmVmbGlnaHRdO1xuICAgICAgICBpZiAoIXBmcykge1xuICAgICAgICAgICAgcGZzID0gbmV3IEF3YWl0ZWQoKTtcbiAgICAgICAgICAgIGJ3Z19wcmVmbGlnaHRzW3RoaXMub3B0cy5wcmVmbGlnaHRdID0gcGZzO1xuXG4gICAgICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZnMucHJvdmlkZSgnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGZzLnByb3ZpZGUoJ2ZhaWx1cmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyByZXEuc2V0UmVxdWVzdEhlYWRlcignY2FjaGUtY29udHJvbCcsICduby1jYWNoZScpOyAgICAvKiBEb2Vzbid0IHdvcmssIG5vdCBhbiBhbGxvd2VkIHJlcXVlc3QgaGVhZGVyIGluIENPUlMgKi9cbiAgICAgICAgICAgIHJlcS5vcGVuKCdnZXQnLCB0aGlzLm9wdHMucHJlZmxpZ2h0ICsgJz8nICsgaGV4X3NoYTEoJ3NhbHQnICsgRGF0ZS5ub3coKSksIHRydWUpOyAgICAvLyBJbnN0ZWFkLCBlbnN1cmUgd2UgYWx3YXlzIHByZWZsaWdodCBhIHVuaXF1ZSBVUkkuXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9ICd0cnVlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcS5zZW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgcGZzLmF3YWl0KGZ1bmN0aW9uKHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgdGhpc0IuaW5pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzQi5pbml0KCk7XG4gICAgfVxufVxuXG5CQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlKTtcblxuQkFNRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdmFyIGJhbUYsIGJhaUY7XG4gICAgaWYgKHRoaXMuYmFtU291cmNlLmJhbUJsb2IpIHtcbiAgICAgICAgYmFtRiA9IG5ldyBCbG9iRmV0Y2hhYmxlKHRoaXMuYmFtU291cmNlLmJhbUJsb2IpO1xuICAgICAgICBiYWlGID0gbmV3IEJsb2JGZXRjaGFibGUodGhpcy5iYW1Tb3VyY2UuYmFpQmxvYik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYmFtRiA9IG5ldyBVUkxGZXRjaGFibGUodGhpcy5iYW1Tb3VyY2UuYmFtVVJJLCB7Y3JlZGVudGlhbHM6IHRoaXMub3B0cy5jcmVkZW50aWFscywgcmVzb2x2ZXI6IHRoaXMub3B0cy5yZXNvbHZlcn0pO1xuICAgICAgICBiYWlGID0gbmV3IFVSTEZldGNoYWJsZSh0aGlzLmJhbVNvdXJjZS5iYWlVUkkgfHwgKHRoaXMuYmFtU291cmNlLmJhbVVSSSArICcuYmFpJyksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3JlZGVudGlhbHM6IHRoaXMub3B0cy5jcmVkZW50aWFscywgcmVzb2x2ZXI6IHRoaXMub3B0cy5yZXNvbHZlcn0pO1xuICAgIH1cbiAgICBtYWtlQmFtKGJhbUYsIGJhaUYsIG51bGwsIGZ1bmN0aW9uKGJhbSwgZXJyKSB7XG4gICAgICAgIHRoaXNCLnJlYWRpbmVzcyA9IG51bGw7XG4gICAgICAgIHRoaXNCLm5vdGlmeVJlYWRpbmVzcygpO1xuXG4gICAgICAgIGlmIChiYW0pIHtcbiAgICAgICAgICAgIHRoaXNCLmJhbUhvbGRlci5wcm92aWRlKGJhbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzQi5lcnJvciA9IGVycjtcbiAgICAgICAgICAgIHRoaXNCLmJhbUhvbGRlci5wcm92aWRlKG51bGwpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5CQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcbiAgICB2YXIgbGlnaHQgPSB0eXBlcyAmJiAodHlwZXMubGVuZ3RoID09IDEpICYmICh0eXBlc1swXSA9PSAnZGVuc2l0eScpO1xuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICBcbiAgICB0aGlzQi5idXN5Kys7XG4gICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcbiAgICBcbiAgICB0aGlzLmJhbUhvbGRlci5hd2FpdChmdW5jdGlvbihiYW0pIHtcbiAgICAgICAgaWYgKCFiYW0pIHtcbiAgICAgICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodGhpc0IuZXJyb3IgfHwgXCJDb3VsZG4ndCBmZXRjaCBCQU1cIik7XG4gICAgICAgIH1cblxuICAgICAgICBiYW0uZmV0Y2goY2hyLCBtaW4sIG1heCwgZnVuY3Rpb24oYmFtUmVjb3JkcywgZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsLCBudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGZlYXR1cmVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcmkgPSAwOyByaSA8IGJhbVJlY29yZHMubGVuZ3RoOyArK3JpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gYmFtUmVjb3Jkc1tyaV07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBiYW1SZWNvcmRUb0ZlYXR1cmUociwgdGhpc0Iub3B0cy5iYW1Hcm91cCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmKVxuICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZmVhdHVyZXMsIDEwMDAwMDAwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7bGlnaHQ6IGxpZ2h0fSk7XG4gICAgfSk7XG59O1xuXG5CQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gMTAwMDAwMDAwMDtcbn07XG5cbkJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHRoaXMuYmFtSG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGJhbSkge1xuICAgICAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIHZhciBkZW5zU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgZGVuc1N0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XG4gICAgICAgIGRlbnNTdHlsZS5DT0xPUjEgPSAnYmxhY2snO1xuICAgICAgICBkZW5zU3R5bGUuQ09MT1IyID0gJ3JlZCc7XG4gICAgICAgIGRlbnNTdHlsZS5IRUlHSFQ9MzA7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVuc2l0eSd9LCAnbG93JywgZGVuc1N0eWxlKTtcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZW5zaXR5J30sICdtZWRpdW0nLCBkZW5zU3R5bGUpO1xuXG4gICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdfX1NFUVVFTkNFJztcbiAgICAgICAgd2lnU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAnYmx1ZSc7XG4gICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDg7XG4gICAgICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xuICAgICAgICB3aWdTdHlsZS5MQUJFTCA9IGZhbHNlO1xuICAgICAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdiYW0nfSwgJ2hpZ2gnLCB3aWdTdHlsZSk7XG5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHN0eWxlc2hlZXQpO1xuICAgIH0pO1xufTtcblxuXG5mdW5jdGlvbiBSZW1vdGVCQU1GZWF0dXJlU291cmNlKGJhbVNvdXJjZSwgd29ya2VyKSB7XG4gICAgRmVhdHVyZVNvdXJjZUJhc2UuY2FsbCh0aGlzKTtcblxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpcy5iYW1Tb3VyY2UgPSBiYW1Tb3VyY2U7XG4gICAgdGhpcy53b3JrZXIgPSB3b3JrZXI7XG4gICAgdGhpcy5vcHRzID0ge2NyZWRlbnRpYWxzOiBiYW1Tb3VyY2UuY3JlZGVudGlhbHMsIHByZWZsaWdodDogYmFtU291cmNlLnByZWZsaWdodCwgYmFtR3JvdXA6IGJhbVNvdXJjZS5iYW1Hcm91cH07XG4gICAgdGhpcy5rZXlIb2xkZXIgPSBuZXcgQXdhaXRlZCgpO1xuICAgIFxuICAgIGlmIChiYW1Tb3VyY2UucmVzb2x2ZXIpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlcktleSA9IGJyb3dzZXIucmVnaXN0ZXJSZXNvbHZlcihiYW1Tb3VyY2UucmVzb2x2ZXIpO1xuICAgIH1cblxuICAgIHRoaXMuaW5pdCgpO1xufVxuXG5SZW1vdGVCQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlKTtcblxuUmVtb3RlQkFNRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkgeyAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHZhciB1cmkgPSB0aGlzLmJhbVNvdXJjZS51cmkgfHwgdGhpcy5iYW1Tb3VyY2UuYmFtVVJJO1xuICAgIHZhciBpbmRleFVyaSA9IHRoaXMuYmFtU291cmNlLmluZGV4VXJpIHx8IHRoaXMuYmFtU291cmNlLmJhaVVSSSB8fCB1cmkgKyAnLmJhaSc7XG5cbiAgICB2YXIgYmxvYiA9IHRoaXMuYmFtU291cmNlLmJhbUJsb2IgfHwgdGhpcy5iYW1Tb3VyY2UuYmxvYjtcbiAgICB2YXIgaW5kZXhCbG9iID0gdGhpcy5iYW1Tb3VyY2UuYmFpQmxvYiB8fCB0aGlzLmJhbVNvdXJjZS5pbmRleEJsb2I7XG5cbiAgICB2YXIgY250ID0gZnVuY3Rpb24ocmVzdWx0LCBlcnIpIHtcbiAgICAgICAgdGhpc0IucmVhZGluZXNzID0gbnVsbDtcbiAgICAgICAgdGhpc0Iubm90aWZ5UmVhZGluZXNzKCk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpc0Iua2V5SG9sZGVyLnByb3ZpZGUocmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXNCLmVycm9yID0gZXJyO1xuICAgICAgICAgICAgdGhpc0Iua2V5SG9sZGVyLnByb3ZpZGUobnVsbCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGJsb2IpIHtcbiAgICAgICAgdGhpcy53b3JrZXIucG9zdENvbW1hbmQoe2NvbW1hbmQ6ICdjb25uZWN0QkFNJywgYmxvYjogYmxvYiwgaW5kZXhCbG9iOiBpbmRleEJsb2J9LCBjbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMud29ya2VyLnBvc3RDb21tYW5kKHtcbiAgICAgICAgICAgIGNvbW1hbmQ6ICdjb25uZWN0QkFNJywgXG4gICAgICAgICAgICB1cmk6IHJlc29sdmVVcmxUb1BhZ2UodXJpKSwgXG4gICAgICAgICAgICByZXNvbHZlcjogdGhpcy5yZXNvbHZlcktleSxcbiAgICAgICAgICAgIGluZGV4VXJpOiByZXNvbHZlVXJsVG9QYWdlKGluZGV4VXJpKSxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiB0aGlzLmJhbVNvdXJjZS5jcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluZGV4Q2h1bmtzOiB0aGlzLmJhbVNvdXJjZS5pbmRleENodW5rc30sXG4gICAgICAgICAgY250KTsgXG4gICAgfVxufTtcblxuUmVtb3RlQkFNRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGxpZ2h0ID0gdHlwZXMgJiYgKHR5cGVzLmxlbmd0aCA9PSAxKSAmJiAodHlwZXNbMF0gPT0gJ2RlbnNpdHknKTtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIFxuICAgIHRoaXNCLmJ1c3krKztcbiAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgIFxuICAgIHRoaXMua2V5SG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGtleSkge1xuICAgICAgICBpZiAoIWtleSkge1xuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzQi5lcnJvciB8fCBcIkNvdWxkbid0IGZldGNoIEJBTVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXNCLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ2ZldGNoJywgY29ubmVjdGlvbjoga2V5LCBjaHI6IGNociwgbWluOiBtaW4sIG1heDogbWF4LCBvcHRzOiB7bGlnaHQ6IGxpZ2h0fX0sIGZ1bmN0aW9uKGJhbVJlY29yZHMsIGVycm9yKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmV0cmlldmVkICcgKyBiYW1SZWNvcmRzLmxlbmd0aCArICcgdmlhIHdvcmtlci4nKTtcblxuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcblxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciByaSA9IDA7IHJpIDwgYmFtUmVjb3Jkcy5sZW5ndGg7ICsrcmkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBiYW1SZWNvcmRzW3JpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBiYW1SZWNvcmRUb0ZlYXR1cmUociwgdGhpc0Iub3B0cy5iYW1Hcm91cCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmKVxuICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZmVhdHVyZXMsIDEwMDAwMDAwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblJlbW90ZUJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAxMDAwMDAwMDAwO1xufTtcblxuUmVtb3RlQkFNRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5rZXlIb2xkZXIuYXdhaXQoZnVuY3Rpb24oYmFtKSB7XG4gICAgICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgdmFyIGRlbnNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICBkZW5zU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcbiAgICAgICAgZGVuc1N0eWxlLkNPTE9SMSA9ICdibGFjayc7XG4gICAgICAgIGRlbnNTdHlsZS5DT0xPUjIgPSAncmVkJztcbiAgICAgICAgZGVuc1N0eWxlLkhFSUdIVD0zMDtcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZW5zaXR5J30sICdsb3cnLCBkZW5zU3R5bGUpO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlbnNpdHknfSwgJ21lZGl1bScsIGRlbnNTdHlsZSk7XG5cbiAgICAgICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ19fU0VRVUVOQ0UnO1xuICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcbiAgICAgICAgd2lnU3R5bGUuSEVJR0hUID0gODtcbiAgICAgICAgd2lnU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgICAgIHdpZ1N0eWxlLkxBQkVMID0gZmFsc2U7XG4gICAgICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2JhbSd9LCAnaGlnaCcsIHdpZ1N0eWxlKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHN0eWxlc2hlZXQpO1xuICAgIH0pO1xufTtcblxuXG5mdW5jdGlvbiBNYXBwZWRGZWF0dXJlU291cmNlKHNvdXJjZSwgbWFwcGluZykge1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMubWFwcGluZyA9IG1hcHBpbmc7XG4gICAgXG4gICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuYnVzeSA9IDA7XG59XG5cbk1hcHBlZEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmFkZEFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG59O1xuXG5NYXBwZWRGZWF0dXJlU291cmNlLnByb3RvdHlwZS5yZW1vdmVBY3Rpdml0eUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMsIGxpc3RlbmVyKTtcbiAgICBpZiAoaWR4ID49IDApXG4gICAgICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMCk7XG59O1xuXG5NYXBwZWRGZWF0dXJlU291cmNlLnByb3RvdHlwZS5ub3RpZnlBY3Rpdml0eSA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLmxlbmd0aDsgKytsaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVyc1tsaV0odGhpcy5idXN5KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5NYXBwZWRGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2UuZ2V0U3R5bGVTaGVldChjYWxsYmFjayk7XG59O1xuXG5NYXBwZWRGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2UuZ2V0U2NhbGVzKCk7XG59O1xuXG5NYXBwZWRGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXREZWZhdWx0RklQcyA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aWVyKSB7XG4gICAgaWYgKHRoaXMuc291cmNlLmdldERlZmF1bHRGSVBzKVxuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2UuZ2V0RGVmYXVsdEZJUHMoY2FsbGJhY2ssIHRpZXIpO1xufTtcblxuTWFwcGVkRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuc2ltcGxpZnlTZWdtZW50cyA9IGZ1bmN0aW9uKHNlZ3MsIG1pbkdhcCkge1xuICAgIGlmIChzZWdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHNlZ3M7XG5cbiAgICBzZWdzLnNvcnQoZnVuY3Rpb24oczEsIHMyKSB7XG4gICAgICAgIHZhciBkID0gczEubmFtZSAtIHMyLm5hbWU7XG4gICAgICAgIGlmIChkKVxuICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgIGQgPSBzMS5zdGFydCAtIHMyLnN0YXJ0O1xuICAgICAgICBpZiAoZClcbiAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICByZXR1cm4gczEuZW5kIC0gczIuZW5kOyAgIC8vIFNob3VsZCBuZXZlciBjb21lIHRvIHRoaXMuLi4/XG4gICAgfSk7XG5cbiAgICB2YXIgc3NlZ3MgPSBbXTtcbiAgICB2YXIgY3VycmVudFNlZyA9IHNlZ3NbMF07XG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNlZ3MubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgIHZhciBucyA9IHNlZ3Nbc2ldO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKG5zLm5hbWUgKyAnICcgKyBucy5zdGFydCArICcgJyArIG5zLmVuZCk7XG4gICAgICAgIGlmIChucy5uYW1lICE9IGN1cnJlbnRTZWcubmFtZSB8fCBucy5zdGFydCA+IChjdXJyZW50U2VnLmVuZCArIG1pbkdhcCkpIHtcbiAgICAgICAgICAgIHNzZWdzLnB1c2goY3VycmVudFNlZyk7XG4gICAgICAgICAgICBjdXJyZW50U2VnID0gbnM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50U2VnID0gbmV3IERBU1NlZ21lbnQoY3VycmVudFNlZy5uYW1lLCBNYXRoLm1pbihjdXJyZW50U2VnLnN0YXJ0LCBucy5zdGFydCksIE1hdGgubWF4KGN1cnJlbnRTZWcuZW5kLCBucy5lbmQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzc2Vncy5wdXNoKGN1cnJlbnRTZWcpO1xuICAgIHJldHVybiBzc2Vncztcbn07XG5cbk1hcHBlZEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaywgc3R5bGVGaWx0ZXJzKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB2YXIgZmV0Y2hMZW5ndGggPSBtYXggLSBtaW4gKyAxO1xuXG4gICAgdGhpc0IuYnVzeSsrO1xuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICB0aGlzLm1hcHBpbmcuc291cmNlQmxvY2tzRm9yUmFuZ2UoY2hyLCBtaW4sIG1heCwgZnVuY3Rpb24obXNlZykge1xuICAgICAgICBpZiAobXNlZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKFwiTm8gbWFwcGluZyBhdmFpbGFibGUgZm9yIHRoaXMgcmVnaW9uc1wiLCBbXSwgc2NhbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbXNlZyA9IHRoaXNCLnNpbXBsaWZ5U2VnbWVudHMobXNlZywgTWF0aC5tYXgoMTAwLCAwLjA1ICogZmV0Y2hMZW5ndGgpKTtcblxuICAgICAgICAgICAgdmFyIG1hcHBlZEZlYXR1cmVzID0gW107XG4gICAgICAgICAgICB2YXIgbWFwcGVkTG9jID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IG1zZWcubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGZpbmFsU3RhdHVzO1xuXG4gICAgICAgICAgICBtc2VnLm1hcChmdW5jdGlvbihzZWcpIHtcbiAgICAgICAgICAgICAgICB0aGlzQi5zb3VyY2UuZmV0Y2goc2VnLm5hbWUsIHNlZy5zdGFydCwgc2VnLmVuZCwgc2NhbGUsIHR5cGVzLCBwb29sLCBmdW5jdGlvbihzdGF0dXMsIGZlYXR1cmVzLCBmc2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyAmJiAhZmluYWxTdGF0dXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbFN0YXR1cyA9IHN0YXR1cztcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmZWF0dXJlcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGZlYXR1cmVzW2ZpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc24gPSBmLnNlZ21lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNuLmluZGV4T2YoJ2NocicpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNuID0gc24uc3Vic3RyKDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXBwaW5ncyA9IHRoaXNCLm1hcHBpbmcubWFwU2VnbWVudChzbiwgZi5taW4sIGYubWF4KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXBwaW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYucGFydHMgJiYgZi5wYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkRmVhdHVyZXMucHVzaChmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG1pID0gMDsgbWkgPCBtYXBwaW5ncy5sZW5ndGg7ICsrbWkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gbWFwcGluZ3NbbWldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1mID0gc2hhbGxvd0NvcHkoZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZi5zZWdtZW50ID0gbS5zZWdtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWYubWluID0gbS5taW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZi5tYXggPSBtLm1heDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLnBhcnRpYWxNaW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWYucGFydGlhbE1pbiA9IG0ucGFydGlhbE1pbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLnBhcnRpYWxNYXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWYucGFydGlhbE1heCA9IG0ucGFydGlhbE1heDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0uZmxpcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmLm9yaWVudGF0aW9uID09ICctJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZi5vcmllbnRhdGlvbiA9ICcrJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGYub3JpZW50YXRpb24gPT0gJysnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mLm9yaWVudGF0aW9uID0gJy0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZEZlYXR1cmVzLnB1c2gobWYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG0xID0gdGhpc0IubWFwcGluZy5tYXBQb2ludChzZWcubmFtZSwgc2VnLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG0yID0gdGhpc0IubWFwcGluZy5tYXBQb2ludChzZWcubmFtZSwgc2VnLmVuZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG0xICYmIG0yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VnRGVzdENvdmVyYWdlID0gbmV3IFJhbmdlKG0xLnBvcywgbTIucG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXBwZWRMb2MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkTG9jID0gdW5pb24obWFwcGVkTG9jLCBzZWdEZXN0Q292ZXJhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZExvYyA9IHNlZ0Rlc3RDb3ZlcmFnZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC0tY291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZpbmFsU3RhdHVzLCBtYXBwZWRGZWF0dXJlcywgZnNjYWxlLCBtYXBwZWRMb2MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgc3R5bGVGaWx0ZXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5mdW5jdGlvbiBEdW1teUZlYXR1cmVTb3VyY2UoKSB7XG59XG5cbkR1bW15RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2NhbGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG51bGw7XG59O1xuXG5EdW1teUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjbnQpIHtcbiAgICByZXR1cm4gY250KG51bGwsIFtdLCAxMDAwMDAwMDAwKTtcbn07XG5cbkR1bW15RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xuICAgIHZhciBkZWZTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgIGRlZlN0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgZGVmU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcbiAgICBkZWZTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgZGVmU3R5bGUpO1xuICAgIHJldHVybiBjYWxsYmFjayhzdHlsZXNoZWV0KTtcbn07XG5cbmZ1bmN0aW9uIER1bW15U2VxdWVuY2VTb3VyY2UoKSB7XG59XG5cbkR1bW15U2VxdWVuY2VTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgcG9vbCwgY250KSB7XG4gICAgcmV0dXJuIGNudChudWxsLCBudWxsKTtcbn07XG5cbmZ1bmN0aW9uIEpCcm93c2VGZWF0dXJlU291cmNlKHNvdXJjZSkge1xuICAgIHRoaXMuc3RvcmUgPSBuZXcgSkJyb3dzZVN0b3JlKHNvdXJjZS5qYlVSSSwgc291cmNlLmpiUXVlcnkpO1xufVxuXG5KQnJvd3NlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2NhbGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG51bGw7XG59O1xuXG5KQnJvd3NlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xuICAgIFxuICAgIHZhciBjZHNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgIGNkc1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgY2RzU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgY2RzU3R5bGUuQkdDT0xPUiA9ICdyZWQnO1xuICAgIGNkc1N0eWxlLkhFSUdIVCA9IDEwO1xuICAgIGNkc1N0eWxlLkJVTVAgPSB0cnVlO1xuICAgIGNkc1N0eWxlLlpJTkRFWCA9IDIwO1xuICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNsYXRpb24nfSwgbnVsbCwgY2RzU3R5bGUpO1xuICAgIFxuICAgIHZhciB0c1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgdHNTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgIHRzU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgdHNTdHlsZS5CR0NPTE9SID0gJ3doaXRlJztcbiAgICB0c1N0eWxlLkhFSUdIVCA9IDEwO1xuICAgIHRzU3R5bGUuWklOREVYID0gMTA7XG4gICAgdHNTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICB0c1N0eWxlLkxBQkVMID0gdHJ1ZTtcbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zY3JpcHQnfSwgbnVsbCwgdHNTdHlsZSk7XG5cbiAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICB3aWdTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgIHdpZ1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAnZ3JlZW4nO1xuICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDg7XG4gICAgd2lnU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgd2lnU3R5bGUuTEFCRUwgPSB0cnVlO1xuICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xuICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVmYXVsdCd9LCBudWxsLCB3aWdTdHlsZSk7XG5cbiAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XG59O1xuXG5KQnJvd3NlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVzICYmIHR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjYWxsYmFjayhudWxsLCBbXSwgc2NhbGUpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHZhciBmb3BzID0ge307XG5cbiAgICB0aGlzLnN0b3JlLmZlYXR1cmVzKFxuICAgICAgICBuZXcgREFTU2VnbWVudChjaHIsIG1pbiwgbWF4KSxcbiAgICAgICAgZm9wcyxcbiAgICAgICAgZnVuY3Rpb24oZmVhdHVyZXMsIHN0YXR1cykge1xuICAgICAgICAgICAgY2FsbGJhY2soc3RhdHVzLCBmZWF0dXJlcywgMTAwMDAwKTtcbiAgICAgICAgfVxuICAgICk7XG59O1xuXG5Ccm93c2VyLnByb3RvdHlwZS5zb3VyY2VBZGFwdGVySXNDYXBhYmxlID0gZnVuY3Rpb24ocywgY2FwKSB7XG4gICAgaWYgKCFzLmNhcGFiaWxpdGllcylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGVsc2UgcmV0dXJuIHMuY2FwYWJpbGl0aWVzKClbY2FwXTtcbn07XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgRmVhdHVyZVNvdXJjZUJhc2U6IEZlYXR1cmVTb3VyY2VCYXNlLFxuXG4gICAgICAgIFR3b0JpdFNlcXVlbmNlU291cmNlOiBUd29CaXRTZXF1ZW5jZVNvdXJjZSxcbiAgICAgICAgRW5zZW1ibFNlcXVlbmNlU291cmNlOiBFbnNlbWJsU2VxdWVuY2VTb3VyY2UsXG4gICAgICAgIERBU1NlcXVlbmNlU291cmNlOiBEQVNTZXF1ZW5jZVNvdXJjZSxcbiAgICAgICAgTWFwcGVkRmVhdHVyZVNvdXJjZTogTWFwcGVkRmVhdHVyZVNvdXJjZSxcbiAgICAgICAgQ2FjaGluZ0ZlYXR1cmVTb3VyY2U6IENhY2hpbmdGZWF0dXJlU291cmNlLFxuICAgICAgICBCV0dGZWF0dXJlU291cmNlOiBCV0dGZWF0dXJlU291cmNlLFxuICAgICAgICBSZW1vdGVCV0dGZWF0dXJlU291cmNlOiBSZW1vdGVCV0dGZWF0dXJlU291cmNlLFxuICAgICAgICBCQU1GZWF0dXJlU291cmNlOiBCQU1GZWF0dXJlU291cmNlLFxuICAgICAgICBSZW1vdGVCQU1GZWF0dXJlU291cmNlOiBSZW1vdGVCQU1GZWF0dXJlU291cmNlLFxuICAgICAgICBEdW1teUZlYXR1cmVTb3VyY2U6IER1bW15RmVhdHVyZVNvdXJjZSxcbiAgICAgICAgRHVtbXlTZXF1ZW5jZVNvdXJjZTogRHVtbXlTZXF1ZW5jZVNvdXJjZSxcblxuICAgICAgICByZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5OiBkYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSxcbiAgICAgICAgcmVnaXN0ZXJQYXJzZXJGYWN0b3J5OiBkYWxsaWFuY2VfcmVnaXN0ZXJQYXJzZXJGYWN0b3J5LFxuICAgICAgICBtYWtlUGFyc2VyOiBkYWxsaWFuY2VfbWFrZVBhcnNlclxuICAgIH07XG5cbiAgICAvLyBTdGFuZGFyZCBzZXQgb2YgcGx1Z2lucy5cbiAgICByZXF1aXJlKCcuL2Vuc2VtYmxqc29uJyk7XG4gICAgcmVxdWlyZSgnLi90YWJpeC1zb3VyY2UnKTtcbiAgICByZXF1aXJlKCcuL21lbXN0b3JlJyk7XG4gICAgcmVxdWlyZSgnLi9iZWR3aWcnKTtcbiAgICByZXF1aXJlKCcuL3ZjZicpO1xuICAgIHJlcXVpcmUoJy4vdGVzdC1zb3VyY2UnKTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTVcbi8vXG4vLyBzb3VyY2Vjb21wYXJlLmpzXG4vL1xuXG5cbmZ1bmN0aW9uIHNvdXJjZURhdGFVUkkoY29uZikge1xuICAgIGlmIChjb25mLnVyaSkge1xuICAgICAgICByZXR1cm4gY29uZi51cmk7XG4gICAgfSBlbHNlIGlmIChjb25mLmJsb2IpIHtcbiAgICAgICAgcmV0dXJuICdmaWxlOicgKyBjb25mLmJsb2IubmFtZTtcbiAgICB9IGVsc2UgaWYgKGNvbmYuYndnQmxvYikge1xuICAgICAgICByZXR1cm4gJ2ZpbGU6JyArIGNvbmYuYndnQmxvYi5uYW1lO1xuICAgIH0gZWxzZSBpZiAoY29uZi5iYW1CbG9iKSB7XG4gICAgICAgIHJldHVybiAnZmlsZTonICsgY29uZi5iYW1CbG9iLm5hbWU7XG4gICAgfSBlbHNlIGlmIChjb25mLnR3b0JpdEJsb2IpIHtcbiAgICAgICAgcmV0dXJuICdmaWxlOicgKyBjb25mLnR3b0JpdEJsb2IubmFtZTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29uZi5id2dVUkkgfHwgY29uZi5iYW1VUkkgfHwgY29uZi5qYlVSSSB8fCBjb25mLnR3b0JpdFVSSSB8fCAnaHR0cHM6Ly93d3cuYmlvZGFsbGlhbmNlLm9yZy9tYWdpYy9ub191cmknO1xufVxuXG5mdW5jdGlvbiBzb3VyY2VTdHlsZVVSSShjb25mKSB7XG4gICAgaWYgKGNvbmYuc3R5bGVzaGVldF91cmkpXG4gICAgICAgIHJldHVybiBjb25mLnN0eWxlc2hlZXRfdXJpO1xuICAgIGVsc2UgaWYgKGNvbmYudGllcl90eXBlID09ICdzZXF1ZW5jZScgfHwgY29uZi50d29CaXRVUkkgfHwgY29uZi50d29CaXRCbG9iKVxuICAgICAgICByZXR1cm4gJ2h0dHBzOi8vd3d3LmJpb2RhbGxpYW5jZS5vcmcvbWFnaWMvc2VxdWVuY2UnXG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gc291cmNlRGF0YVVSSShjb25mKTtcbn1cblxuZnVuY3Rpb24gc291cmNlc0FyZUVxdWFsTW9kdWxvU3R5bGUoYSwgYikge1xuICAgIGlmIChzb3VyY2VEYXRhVVJJKGEpICE9IHNvdXJjZURhdGFVUkkoYikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChhLm1hcHBpbmcgIT0gYi5tYXBwaW5nKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAoYS50aWVyX3R5cGUgIT0gYi50aWVyX3R5cGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChhLm92ZXJsYXkpIHtcbiAgICAgICAgaWYgKCFiLm92ZXJsYXkgfHwgYi5vdmVybGF5Lmxlbmd0aCAhPSBhLm92ZXJsYXkubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBvaSA9IDA7IG9pIDwgYS5vdmVybGF5Lmxlbmd0aDsgKytvaSkge1xuICAgICAgICAgICAgaWYgKCFzb3VyY2VzQXJlRXF1YWxNb2R1bG9TdHlsZShhLm92ZXJsYXlbb2ldLCBiLm92ZXJsYXlbb2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoYi5vdmVybGF5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBzb3VyY2VzQXJlRXF1YWwoYSwgYikge1xuICAgIGlmIChzb3VyY2VEYXRhVVJJKGEpICE9IHNvdXJjZURhdGFVUkkoYikgfHxcbiAgICAgICAgc291cmNlU3R5bGVVUkkoYSkgIT0gc291cmNlU3R5bGVVUkkoYikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChhLm1hcHBpbmcgIT0gYi5tYXBwaW5nKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAoYS50aWVyX3R5cGUgIT0gYi50aWVyX3R5cGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChhLm92ZXJsYXkpIHtcbiAgICAgICAgaWYgKCFiLm92ZXJsYXkgfHwgYi5vdmVybGF5Lmxlbmd0aCAhPSBhLm92ZXJsYXkubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBvaSA9IDA7IG9pIDwgYS5vdmVybGF5Lmxlbmd0aDsgKytvaSkge1xuICAgICAgICAgICAgaWYgKCFzb3VyY2VzQXJlRXF1YWwoYS5vdmVybGF5W29pXSwgYi5vdmVybGF5W29pXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGIub3ZlcmxheSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBzb3VyY2VzQXJlRXF1YWw6IHNvdXJjZXNBcmVFcXVhbCxcbiAgICAgICAgc291cmNlc0FyZUVxdWFsTW9kdWxvU3R5bGU6IHNvdXJjZXNBcmVFcXVhbE1vZHVsb1N0eWxlLFxuICAgICAgICBzb3VyY2VEYXRhVVJJOiBzb3VyY2VEYXRhVVJJLFxuICAgICAgICBzb3VyY2VTdHlsZVVSSTogc291cmNlU3R5bGVVUklcbiAgICB9O1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIHNwYW5zLmpzOiBKYXZhU2NyaXB0IEludHNldC9Mb2NhdGlvbiBwb3J0LlxuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZnVuY3Rpb24gUmFuZ2UobWluLCBtYXgpXG57XG4gICAgaWYgKHR5cGVvZihtaW4pICE9ICdudW1iZXInIHx8IHR5cGVvZihtYXgpICE9ICdudW1iZXInKVxuICAgICAgICB0aHJvdyAnQmFkIHJhbmdlICcgKyBtaW4gKyAnLCcgKyBtYXg7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbn1cblxuUmFuZ2UucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9taW47XG59XG5cblJhbmdlLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbWF4O1xufVxuXG5SYW5nZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbihwb3MpIHtcbiAgICByZXR1cm4gcG9zID49IHRoaXMuX21pbiAmJiBwb3MgPD0gdGhpcy5fbWF4O1xufVxuXG5SYW5nZS5wcm90b3R5cGUuaXNDb250aWd1b3VzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG5cblJhbmdlLnByb3RvdHlwZS5yYW5nZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gW3RoaXNdO1xufVxuXG5SYW5nZS5wcm90b3R5cGUuX3B1c2hSYW5nZXMgPSBmdW5jdGlvbihyYW5nZXMpIHtcbiAgICByYW5nZXMucHVzaCh0aGlzKTtcbn1cblxuUmFuZ2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICdbJyArIHRoaXMuX21pbiArICctJyArIHRoaXMuX21heCArICddJztcbn1cblxuZnVuY3Rpb24gX0NvbXBvdW5kKHJhbmdlcykge1xuICAgIC8vIGdpdmVuOiBhIHNldCBvZiB1bnNvcnRlZCBwb3NzaWJseSBvdmVybGFwcGluZyByYW5nZXNcbiAgICAvLyBzb3J0IHRoZSBpbnB1dCByYW5nZXNcbiAgICB2YXIgc29ydGVkID0gcmFuZ2VzLnNvcnQoX3JhbmdlT3JkZXIpO1xuICAgIC8vIG1lcmdlIG92ZXJsYXBzIGJldHdlZW4gYWRqYWNlbnQgcmFuZ2VzXG4gICAgdmFyIG1lcmdlZCA9IFtdO1xuICAgIHZhciBjdXJyZW50ID0gc29ydGVkLnNoaWZ0KCk7XG4gICAgc29ydGVkLmZvckVhY2goZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgaWYgKHJhbmdlLl9taW4gPD0gY3VycmVudC5fbWF4KSB7XG4gICAgICAgICAgICBpZiAocmFuZ2UuX21heCA+IGN1cnJlbnQuX21heCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQuX21heCA9IHJhbmdlLl9tYXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtZXJnZWQucHVzaChjdXJyZW50KTtcbiAgICAgICAgICAgIGN1cnJlbnQgPSByYW5nZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIG1lcmdlZC5wdXNoKGN1cnJlbnQpO1xuICAgIHRoaXMuX3JhbmdlcyA9IG1lcmdlZDtcbn1cblxuX0NvbXBvdW5kLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmFuZ2VzWzBdLm1pbigpO1xufVxuXG5fQ29tcG91bmQucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9yYW5nZXNbdGhpcy5fcmFuZ2VzLmxlbmd0aCAtIDFdLm1heCgpO1xufVxuXG4vLyByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgcmFuZ2UgdGhhdCBpcyBub3QgbGVzcyB0aGFuIHBvc1xuX0NvbXBvdW5kLnByb3RvdHlwZS5sb3dlcl9ib3VuZCA9IGZ1bmN0aW9uKHBvcykge1xuICAgIC8vIGZpcnN0IGNoZWNrIGlmIHBvcyBpcyBvdXQgb2YgcmFuZ2VcbiAgICB2YXIgciA9IHRoaXMucmFuZ2VzKCk7XG4gICAgaWYgKHBvcyA+IHRoaXMubWF4KCkpIHJldHVybiByLmxlbmd0aDtcbiAgICBpZiAocG9zIDwgdGhpcy5taW4oKSkgcmV0dXJuIDA7XG4gICAgLy8gZG8gYSBiaW5hcnkgc2VhcmNoXG4gICAgdmFyIGE9MCwgYj1yLmxlbmd0aCAtIDE7XG4gICAgd2hpbGUgKGEgPD0gYikge1xuICAgICAgICB2YXIgbSA9IE1hdGguZmxvb3IoKGErYikvMik7XG4gICAgICAgIGlmIChwb3MgPiByW21dLl9tYXgpIHtcbiAgICAgICAgICAgIGEgPSBtKzE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocG9zIDwgclttXS5fbWluKSB7XG4gICAgICAgICAgICBiID0gbS0xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGE7XG59XG5cbl9Db21wb3VuZC5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbihwb3MpIHtcbiAgICB2YXIgbGIgPSB0aGlzLmxvd2VyX2JvdW5kKHBvcyk7XG4gICAgaWYgKGxiIDwgdGhpcy5fcmFuZ2VzLmxlbmd0aCAmJiB0aGlzLl9yYW5nZXNbbGJdLmNvbnRhaW5zKHBvcykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuX0NvbXBvdW5kLnByb3RvdHlwZS5pbnNlcnRSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgdmFyIGxiID0gdGhpcy5sb3dlcl9ib3VuZChyYW5nZS5fbWluKTtcbiAgICBpZiAobGIgPT09IHRoaXMuX3Jhbmdlcy5sZW5ndGgpIHsgLy8gcmFuZ2UgZm9sbG93cyB0aGlzXG4gICAgICAgIHRoaXMuX3Jhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB2YXIgciA9IHRoaXMucmFuZ2VzKCk7XG4gICAgaWYgKHJhbmdlLl9tYXggPCByW2xiXS5fbWluKSB7IC8vIHJhbmdlIHByZWNlZWRzIGxiXG4gICAgICAgIHRoaXMuX3Jhbmdlcy5zcGxpY2UobGIsMCxyYW5nZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyByYW5nZSBvdmVybGFwcyBsYiAoYXQgbGVhc3QpXG4gICAgaWYgKHJbbGJdLl9taW4gPCByYW5nZS5fbWluKSByYW5nZS5fbWluID0gcltsYl0uX21pbjtcbiAgICB2YXIgdWIgPSBsYisxO1xuICAgIHdoaWxlICh1YiA8IHIubGVuZ3RoICYmIHJbdWJdLl9taW4gPD0gcmFuZ2UuX21heCkge1xuICAgICAgICB1YisrO1xuICAgIH1cbiAgICB1Yi0tO1xuICAgIC8vIHViIGlzIHRoZSB1cHBlciBib3VuZCBvZiB0aGUgbmV3IHJhbmdlXG4gICAgaWYgKHJbdWJdLl9tYXggPiByYW5nZS5fbWF4KSByYW5nZS5fbWF4ID0gclt1Yl0uX21heDtcbiAgICBcbiAgICAvLyBzcGxpY2UgcmFuZ2UgaW50byB0aGlzLl9yYW5nZXNcbiAgICB0aGlzLl9yYW5nZXMuc3BsaWNlKGxiLHViLWxiKzEscmFuZ2UpO1xuICAgIHJldHVybjtcbn1cblxuX0NvbXBvdW5kLnByb3RvdHlwZS5pc0NvbnRpZ3VvdXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmFuZ2VzLmxlbmd0aCA+IDE7XG59XG5cbl9Db21wb3VuZC5wcm90b3R5cGUucmFuZ2VzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Jhbmdlcztcbn1cblxuX0NvbXBvdW5kLnByb3RvdHlwZS5fcHVzaFJhbmdlcyA9IGZ1bmN0aW9uKHJhbmdlcykge1xuICAgIGZvciAodmFyIHJpID0gMDsgcmkgPCB0aGlzLl9yYW5nZXMubGVuZ3RoOyArK3JpKVxuICAgICAgICByYW5nZXMucHVzaCh0aGlzLl9yYW5nZXNbcmldKTtcbn1cblxuX0NvbXBvdW5kLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzID0gJyc7XG4gICAgZm9yICh2YXIgciA9IDA7IHIgPCB0aGlzLl9yYW5nZXMubGVuZ3RoOyArK3IpIHtcbiAgICAgICAgaWYgKHI+MCkge1xuICAgICAgICAgICAgcyA9IHMgKyAnLCc7XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHMgKyB0aGlzLl9yYW5nZXNbcl0udG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbmZ1bmN0aW9uIHVuaW9uKHMwLCBzMSkge1xuICAgIGlmICghIChzMCBpbnN0YW5jZW9mIF9Db21wb3VuZCkpIHtcbiAgICAgICAgaWYgKCEgKHMwIGluc3RhbmNlb2YgQXJyYXkpKVxuICAgICAgICAgICAgczAgPSBbczBdO1xuICAgICAgICBzMCA9IG5ldyBfQ29tcG91bmQoczApO1xuICAgIH1cbiAgICBcbiAgICBpZiAoczEpXG4gICAgICAgIHMwLmluc2VydFJhbmdlKHMxKTtcblxuICAgIHJldHVybiBzMDtcbn1cblxuZnVuY3Rpb24gaW50ZXJzZWN0aW9uKHMwLCBzMSkge1xuICAgIHZhciByMCA9IHMwLnJhbmdlcygpO1xuICAgIHZhciByMSA9IHMxLnJhbmdlcygpO1xuICAgIHZhciBsMCA9IHIwLmxlbmd0aCwgbDEgPSByMS5sZW5ndGg7XG4gICAgdmFyIGkwID0gMCwgaTEgPSAwO1xuICAgIHZhciBvciA9IFtdO1xuXG4gICAgd2hpbGUgKGkwIDwgbDAgJiYgaTEgPCBsMSkge1xuICAgICAgICB2YXIgczAgPSByMFtpMF0sIHMxID0gcjFbaTFdO1xuICAgICAgICB2YXIgbGFwTWluID0gTWF0aC5tYXgoczAubWluKCksIHMxLm1pbigpKTtcbiAgICAgICAgdmFyIGxhcE1heCA9IE1hdGgubWluKHMwLm1heCgpLCBzMS5tYXgoKSk7XG4gICAgICAgIGlmIChsYXBNYXggPj0gbGFwTWluKSB7XG4gICAgICAgICAgICBvci5wdXNoKG5ldyBSYW5nZShsYXBNaW4sIGxhcE1heCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzMC5tYXgoKSA+IHMxLm1heCgpKSB7XG4gICAgICAgICAgICArK2kxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgKytpMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAob3IubGVuZ3RoID09IDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIEZJWE1FXG4gICAgfSBlbHNlIGlmIChvci5sZW5ndGggPT0gMSkge1xuICAgICAgICByZXR1cm4gb3JbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfQ29tcG91bmQob3IpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY292ZXJhZ2Uocykge1xuICAgIHZhciB0b3QgPSAwO1xuICAgIHZhciBybCA9IHMucmFuZ2VzKCk7XG4gICAgZm9yICh2YXIgcmkgPSAwOyByaSA8IHJsLmxlbmd0aDsgKytyaSkge1xuICAgICAgICB2YXIgciA9IHJsW3JpXTtcbiAgICAgICAgdG90ICs9IChyLm1heCgpIC0gci5taW4oKSArIDEpO1xuICAgIH1cbiAgICByZXR1cm4gdG90O1xufVxuXG5cblxuZnVuY3Rpb24gcmFuZ2VPcmRlcihhLCBiKVxue1xuICAgIGlmIChhLm1pbigpIDwgYi5taW4oKSkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIGlmIChhLm1pbigpID4gYi5taW4oKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGEubWF4KCkgPCBiLm1heCgpKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2UgaWYgKGIubWF4KCkgPiBhLm1heCgpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX3JhbmdlT3JkZXIoYSwgYilcbntcbiAgICBpZiAoYS5fbWluIDwgYi5fbWluKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2UgaWYgKGEuX21pbiA+IGIuX21pbikge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGEuX21heCA8IGIuX21heCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIGlmIChiLl9tYXggPiBhLl9tYXgpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIFJhbmdlOiBSYW5nZSxcbiAgICAgICAgdW5pb246IHVuaW9uLFxuICAgICAgICBpbnRlcnNlY3Rpb246IGludGVyc2VjdGlvbixcbiAgICAgICAgY292ZXJhZ2U6IGNvdmVyYWdlLFxuICAgICAgICByYW5nZU92ZXI6IHJhbmdlT3JkZXIsXG4gICAgICAgIF9yYW5nZU9yZGVyOiBfcmFuZ2VPcmRlclxuICAgIH1cbn0iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAxNFxuLy9cbi8vIHN0eWxlLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gU3R5bGVGaWx0ZXIodHlwZSwgbWV0aG9kLCBsYWJlbCkge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XG4gICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xufVxuXG5TdHlsZUZpbHRlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24obykge1xuICAgIHJldHVybiB0aGlzLnR5cGUgPT0gby50eXBlICYmIHRoaXMubWV0aG9kID09IG8ubWV0aG9kICYmIHRoaXMubGFiZWwgPT0gby5sYWJlbDtcbn1cblxuU3R5bGVGaWx0ZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZzID0gW107XG4gICAgaWYgKHRoaXMudHlwZSkgXG4gICAgICAgIGZzLnB1c2goJ3R5cGU9JyArIHRoaXMudHlwZSk7XG4gICAgaWYgKHRoaXMubWV0aG9kKVxuICAgICAgICBmcy5wdXNoKCdtZXRob2Q9JyArIHRoaXMubWV0aG9kKTtcbiAgICBpZiAodGhpcy5sYWJlbClcbiAgICAgICAgZnMucHVzaCgnbGFiZWw9JyArIHRoaXMubGFiZWwpO1xuICAgIHJldHVybiAnU3R5bGVGaWx0ZXI8JyArIGZzLmpvaW4oJzsnKSArICc+Jztcbn1cblxuZnVuY3Rpb24gU3R5bGVGaWx0ZXJTZXQoZmlsdGVycykge1xuICAgIHRoaXMuX2ZpbHRlcnMgPSB7fTtcbiAgICBpZiAoZmlsdGVycykge1xuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmlsdGVycy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkKGZpbHRlcnNbZmldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuU3R5bGVGaWx0ZXJTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGZpbHRlcikge1xuICAgIHZhciBmcyA9IGZpbHRlci50b1N0cmluZygpO1xuICAgIGlmICghdGhpcy5fZmlsdGVyc1tmc10pIHtcbiAgICAgICAgdGhpcy5fZmlsdGVyc1tmc10gPSBmaWx0ZXI7XG4gICAgICAgIHRoaXMuX2xpc3QgPSBudWxsO1xuICAgIH1cbn1cblxuU3R5bGVGaWx0ZXJTZXQucHJvdG90eXBlLmFkZEFsbCA9IGZ1bmN0aW9uKGZpbHRlclNldCkge1xuICAgIHZhciBsID0gZmlsdGVyU2V0Lmxpc3QoKTtcbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgbC5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgdGhpcy5hZGQobFtmaV0pO1xuICAgIH1cbn1cblxuU3R5bGVGaWx0ZXJTZXQucHJvdG90eXBlLmRvZXNOb3RDb250YWluID0gZnVuY3Rpb24oZmlsdGVyU2V0KSB7XG4gICAgdmFyIGwgPSBmaWx0ZXJTZXQubGlzdCgpO1xuICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBsLmxlbmd0aDsgKytmaSkge1xuICAgICAgICBpZiAoIXRoaXMuX2ZpbHRlcnNbZmkudG9TdHJpbmcoKV0pXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG59XG5cblN0eWxlRmlsdGVyU2V0LnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9saXN0KSB7XG4gICAgICAgIHRoaXMuX2xpc3QgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLl9maWx0ZXJzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZmlsdGVycy5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3QucHVzaCh0aGlzLl9maWx0ZXJzW2tdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbGlzdDtcbn1cblxuU3R5bGVGaWx0ZXJTZXQucHJvdG90eXBlLnR5cGVMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHR5cGVzID0gW107XG4gICAgdmFyIGxpc3QgPSB0aGlzLmxpc3QoKTtcbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgbGlzdC5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgdmFyIGZpbHRlciA9IGxpc3RbZmldO1xuICAgICAgICB2YXIgdHlwZSA9IGZpbHRlci50eXBlO1xuICAgICAgICBpZiAoIXR5cGUgfHwgdHlwZSA9PSAnZGVmYXVsdCcpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVzLmluZGV4T2YodHlwZSkgPCAwKVxuICAgICAgICAgICAgdHlwZXMucHVzaCh0eXBlKTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVzO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIFN0eWxlRmlsdGVyOiBTdHlsZUZpbHRlcixcbiAgICAgICAgU3R5bGVGaWx0ZXJTZXQ6IFN0eWxlRmlsdGVyU2V0XG4gICAgfTtcbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblwidXNlIHN0cmljdFwiO1xuXG5leHBvcnQgeyByZW5kZXJUaWVyLCBkcmF3VGllciB9O1xuXG4vKiBUbyBiZSB1c2VkIGJ5IHRpZXJzIHdoaWNoIGFyZSB0byBiZSBkcmF3biBpbiBhIG11bHRpdGllclxuICAgdXNpbmcgdGhlIG11bHRpLXJlbmRlcmVyLlxuXG4gICBTdWJ0aWVycyBhcmUgY29uZmlndXJlZCBieSBhZGRpbmcgdGhlIGZvbGxvd2luZyB0byBhIHRpZXIncyBzb3VyY2UgY29uZmlndXJhdGlvbjpcbiAgICAgICByZW5kZXJlcjogJ3N1YicsXG4gICAgICAgc3ViOiB7XG4gICAgICAgICAgIG11bHRpX2lkOiBcIm11bHRpXzFcIixcbiAgICAgICAgICAgb2Zmc2V0OiAxMzAsXG4gICAgICAgICAgIHo6IDIsXG4gICAgICAgfVxuICAgVGhpcyB3b3VsZCBkZWZpbmUgYSBzdWJ0aWVyIHRoYXQncyB0byBiZSByZW5kZXJlZCBpbiB0aGUgbXVsdGktdGllciB3aXRoXG4gICBpZCBcIm11bHRpXzFcIiwgd2l0aCB0aGUgdG9wIG9mIHRoZSBzdWJ0aWVyIGF0IDEzMCBwaXhlbHMgYW5kIGF0IHotaW5kZXggMi5cbiAqL1xuXG5mdW5jdGlvbiByZW5kZXJUaWVyKHN0YXR1cywgdGllcikge1xuICAgIGRyYXdUaWVyKHRpZXIpO1xuICAgIHRpZXIudXBkYXRlU3RhdHVzKHN0YXR1cyk7XG59XG5cbi8vIGRyYXdUaWVyIGlzIGNhbGxlZCB3aGVuIHRoaXMgdGllcidzIGRhdGEgaGFzIGJlZW4gZmV0Y2hlZCxcbi8vIHNvIGJ5IHJlZnJlc2hpbmcgdGhlIG11bHRpVGllciBmcm9tIGhlcmUsIHdlIGNhbiBiZSBzdXJlIHRoYXRcbi8vIHRoZXJlJ3Mgc29tZXRoaW5nIG5ldyB3b3J0aCBkcmF3aW5nIGluIGl0XG5mdW5jdGlvbiBkcmF3VGllcih0aWVyKSB7XG4gICAgbGV0IGJyb3dzZXIgPSB0aWVyLmJyb3dzZXI7XG5cbiAgICBsZXQgbXVsdGlUaWVyID0gYnJvd3Nlci50aWVycy5cbiAgICAgICAgICAgIGZpbHRlcih0ID0+IHQuZGFzU291cmNlLnJlbmRlcmVyID09PSAnbXVsdGknICYmXG4gICAgICAgICAgICAgICAgICAgdC5kYXNTb3VyY2UubXVsdGkubXVsdGlfaWQgPT09IHRpZXIuZGFzU291cmNlLnN1Yi5tdWx0aV9pZCk7XG5cbiAgICBtdWx0aVRpZXIuZm9yRWFjaCh0ID0+IGJyb3dzZXIucmVmcmVzaFRpZXIodCkpO1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xuLy9cbi8vIHN2Zy1leHBvcnQuanNcbi8vXG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG4gICAgdmFyIG1ha2VFbGVtZW50TlMgPSB1dGlscy5tYWtlRWxlbWVudE5TO1xuXG4gICAgdmFyIFZFUlNJT04gPSByZXF1aXJlKCcuL3ZlcnNpb24nKTtcblxuICAgIHZhciBzdmdTZXFUaWVyID0gcmVxdWlyZSgnLi9zZXF1ZW5jZS1kcmF3Jykuc3ZnU2VxVGllcjtcblxuICAgIHZhciBzdmd1ID0gcmVxdWlyZSgnLi9zdmctdXRpbHMnKTtcbiAgICB2YXIgTlNfU1ZHID0gc3ZndS5OU19TVkc7XG4gICAgdmFyIE5TX1hMSU5LID0gc3ZndS5OU19YTElOSztcbiAgICB2YXIgU1ZHUGF0aCA9IHN2Z3UuU1ZHUGF0aDtcblxuICAgIHZhciBuZiA9IHJlcXVpcmUoJy4vbnVtZm9ybWF0cycpO1xuICAgIHZhciBmb3JtYXRRdWFudExhYmVsID0gbmYuZm9ybWF0UXVhbnRMYWJlbDtcbiAgICB2YXIgZm9ybWF0TG9uZ0ludCA9IG5mLmZvcm1hdExvbmdJbnQ7XG59XG5cblxuQnJvd3Nlci5wcm90b3R5cGUubWFrZVNWRyA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICB2YXIgbWluVGllckhlaWdodCA9IG9wdHMubWluVGllckhlaWdodCB8fCAyMDtcbiAgICB2YXIgcGFkZGluZyA9IDM7XG4gICAgdmFyIGZwdyA9IG9wdHMud2lkdGggfHwgdGhpcy5mZWF0dXJlUGFuZWxXaWR0aDtcblxuICAgIHZhciBiYWNrdXBGUFcgPSB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoO1xuICAgIHZhciBiYWNrdXBTY2FsZSA9IHRoaXMuc2NhbGU7XG4gICAgdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCA9IGZwdztcbiAgICB0aGlzLnNjYWxlID0gdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCAvICh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCk7XG5cbiAgICB2YXIgYiA9IHRoaXM7XG4gICAgdmFyIHNhdmVEb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudChOU19TVkcsICdzdmcnLCBudWxsKTtcblxuICAgIHZhciBzYXZlUm9vdCA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycsIG51bGwsIHtcbiAgICAgICAgZm9udEZhbWlseTogJ2hlbHZldGljYScsXG4gICAgICAgIGZvbnRTaXplOiAnOHB0J1xuICAgIH0pO1xuICAgIHNhdmVEb2MuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHNhdmVSb290KTtcblxuICAgIHZhciBtYXJnaW4gPSAyMDA7XG5cbiAgICBpZiAob3B0cy5iYW5uZXIpIHtcbiAgICAgIHZhciBkYWxsaWFuY2VBbmNob3IgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2EnLFxuICAgICAgICAgbWFrZUVsZW1lbnROUyhOU19TVkcsICd0ZXh0JywgJ0dyYXBoaWNzIGZyb20gQmlvZGFsbGlhbmNlICcgKyBWRVJTSU9OLCB7XG4gICAgICAgICAgICAgeDogKGIuZmVhdHVyZVBhbmVsV2lkdGggKyBtYXJnaW4pIC0gMTAwLFxuICAgICAgICAgICAgIHk6IDM1LFxuICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAwLFxuICAgICAgICAgICAgIGZvbnRTaXplOiAnMTJwdCcsXG5cdCAgICAgdGV4dEFuY2hvcjogJ2VuZCcsXG5cdCAgICAgZmlsbDogJ2JsdWUnXG4gICAgICAgICB9KSk7XG4gICAgICBkYWxsaWFuY2VBbmNob3Iuc2V0QXR0cmlidXRlKCd4bWxuczp4bGluaycsIE5TX1hMSU5LKTtcbiAgICAgIGRhbGxpYW5jZUFuY2hvci5zZXRBdHRyaWJ1dGUoJ3hsaW5rOmhyZWYnLCAnaHR0cDovL3d3dy5iaW9kYWxsaWFuY2Uub3JnLycpO1xuXG4gICAgICBzYXZlUm9vdC5hcHBlbmRDaGlsZChkYWxsaWFuY2VBbmNob3IpO1xuICAgIH1cbiAgXG4gICAgaWYgKG9wdHMucmVnaW9uKSB7XG4gICAgICAgIHNhdmVSb290LmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgbWFrZUVsZW1lbnROUyhOU19TVkcsICd0ZXh0JywgdGhpcy5jaHIgKyAnOicgKyBmb3JtYXRMb25nSW50KHRoaXMudmlld1N0YXJ0KSArICcuLicgKyBmb3JtYXRMb25nSW50KHRoaXMudmlld0VuZCksIHtcbiAgICAgICAgICAgICAgICB4OiBtYXJnaW4gKyAxMDAsXG4gICAgICAgICAgICAgICAgeTogMzUsXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDAsXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICcxMnB0JyxcbiAgICAgICAgICAgICAgICB0ZXh0QW5jaG9yOiAnc3RhcnQnXG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cbiAgICBcbiAgICB2YXIgY2xpcFJlY3QgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLCB7XG4gICAgXHR4OiBtYXJnaW4sXG4gICAgXHR5OiA1MCxcbiAgICBcdHdpZHRoOiBiLmZlYXR1cmVQYW5lbFdpZHRoLFxuICAgIFx0aGVpZ2h0OiAxMDAwMDBcbiAgICB9KTtcbiAgICB2YXIgY2xpcCA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnY2xpcFBhdGgnLCBjbGlwUmVjdCwge2lkOiAnZmVhdHVyZUNsaXAnfSk7XG4gICAgc2F2ZVJvb3QuYXBwZW5kQ2hpbGQoY2xpcCk7XG5cbiAgICB2YXIgcG9zID0gNzA7XG4gICAgdmFyIHRpZXJIb2xkZXIgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2cnLCBudWxsLCB7fSk7XG5cbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgYi50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIHRpZXIgPSBiLnRpZXJzW3RpXTtcbiAgICAgICAgdGllci5iYWNrdXBTdWJ0aWVycyA9IHRpZXIuc3VidGllcnM7XG4gICAgICAgIHRpZXIuYmFja3VwT3JpZ2luSGF4eCA9IHRpZXIub3JpZ2luSGF4eDtcbiAgICAgICAgdGllci5iYWNrdXBMYXlvdXRIZWlnaHQgPSB0aWVyLmxheW91dEhlaWdodDtcblxuICAgICAgICBjb25zdCByZW5kZXJlciA9IGIuZ2V0VGllclJlbmRlcmVyKHRpZXIpO1xuICAgICAgICBpZiAocmVuZGVyZXIgJiYgcmVuZGVyZXIucHJlcGFyZVN1YnRpZXJzKSB7XG4gICAgICAgICAgICByZW5kZXJlci5wcmVwYXJlU3VidGllcnModGllciwgdGllci52aWV3cG9ydC5nZXRDb250ZXh0KCcyZCcpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0aWVyU1ZHID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgbnVsbCwge2NsaXBQYXRoOiAndXJsKCNmZWF0dXJlQ2xpcCknLCBjbGlwUnVsZTogJ25vbnplcm8nfSk7XG4gICAgXHR2YXIgdGllckxhYmVscyA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycpO1xuICAgIFx0dmFyIHRpZXJUb3BQb3MgPSBwb3M7XG5cbiAgICBcdHZhciB0aWVyQmFja2dyb3VuZCA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAncmVjdCcsIG51bGwsIHt4OiAwLCB5OiB0aWVyVG9wUG9zLCB3aWR0aDogJzEwMDAwJywgaGVpZ2h0OiA1MCwgZmlsbDogdGllci5iYWNrZ3JvdW5kfSk7XG4gICAgXHR0aWVyU1ZHLmFwcGVuZENoaWxkKHRpZXJCYWNrZ3JvdW5kKTtcblxuICAgIFx0aWYgKHRpZXIuc2VxdWVuY2VTb3VyY2UpIHtcbiAgICBcdCAgICB2YXIgc2VxVHJhY2sgPSBzdmdTZXFUaWVyKHRpZXIsIHRpZXIuY3VycmVudFNlcXVlbmNlKTtcbiAgICBcdCAgICBcbiAgICBcdCAgICB0aWVyU1ZHLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycsIHNlcVRyYWNrLCB7dHJhbnNmb3JtOiAndHJhbnNsYXRlKCcgKyAobWFyZ2luKSArICcsICcgKyBwb3MgKyAnKSd9KSk7XG4gICAgXHQgICAgcG9zICs9IDgwO1xuICAgIFx0fSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdGllci5zdWJ0aWVycykge1xuICAgIFx0XHQgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICBcdFxuICAgIFx0ICAgIHZhciBvZmZzZXQgPSAoKHRpZXIuZ2x5cGhDYWNoZU9yaWdpbiAtIGIudmlld1N0YXJ0KSAqIGIuc2NhbGUpO1xuICAgICAgICAgICAgdmFyIGhhc1F1YW50ID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBzdGkgPSAwOyBzdGkgPCB0aWVyLnN1YnRpZXJzLmxlbmd0aDsgKytzdGkpIHtcbiAgICAgICAgICAgICAgICBwb3MgKz0gcGFkZGluZztcbiAgICAgICAgXHRcdHZhciBzdWJ0aWVyID0gdGllci5zdWJ0aWVyc1tzdGldO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgXHRcdHZhciBnbHlwaEVsZW1lbnRzID0gW107XG4gICAgICAgIFx0XHRmb3IgKHZhciBnaSA9IDA7IGdpIDwgc3VidGllci5nbHlwaHMubGVuZ3RoOyArK2dpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBnbHlwaCA9IHN1YnRpZXIuZ2x5cGhzW2dpXTtcbiAgICAgICAgICAgICAgICAgICAgZ2x5cGhFbGVtZW50cy5wdXNoKGdseXBoLnRvU1ZHKCkpO1xuICAgICAgICBcdFx0fVxuXG4gICAgXHRcdCAgICB0aWVyU1ZHLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycsIGdseXBoRWxlbWVudHMsIHt0cmFuc2Zvcm06ICd0cmFuc2xhdGUoJyArIChtYXJnaW4rb2Zmc2V0KSArICcsICcgKyBwb3MgKyAnKSd9KSk7XG5cbiAgICAgICAgXHRcdGlmIChzdWJ0aWVyLnF1YW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc1F1YW50ID0gdHJ1ZTtcbiAgICAgICAgXHRcdCAgICB2YXIgcSA9IHN1YnRpZXIucXVhbnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoID0gc3VidGllci5oZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bVRpY3MgPSAyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaCA+IDQwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBudW1UaWNzID0gMSArICgoaC8yMCkgfCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgdGljU3BhY2luZyA9IGggLyAobnVtVGljcyAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGljSW50ZXJ2YWwgPSAocS5tYXggLSBxLm1pbikgLyAobnVtVGljcyAtIDEpO1xuXG4gICAgICAgIFx0XHQgICAgdmFyIHBhdGggPSBuZXcgU1ZHUGF0aCgpO1xuICAgICAgICBcdFx0ICAgIHBhdGgubW92ZVRvKG1hcmdpbiArIDUsIHBvcyk7XG4gICAgICAgIFx0XHQgICAgcGF0aC5saW5lVG8obWFyZ2luLCBwb3MpO1xuICAgICAgICBcdFx0ICAgIHBhdGgubGluZVRvKG1hcmdpbiwgcG9zICsgc3VidGllci5oZWlnaHQpO1xuICAgICAgICBcdFx0ICAgIHBhdGgubGluZVRvKG1hcmdpbiArIDUsIHBvcyArIHN1YnRpZXIuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5ID0gdCp0aWNTcGFjaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5tb3ZlVG8obWFyZ2luLCBwb3MgKyB0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLmxpbmVUbyhtYXJnaW4rMywgcG9zICsgdHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgXHRcdCAgICB0aWVyTGFiZWxzLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAncGF0aCcsIG51bGwsIHtkOiBwYXRoLnRvUGF0aERhdGEoKSwgZmlsbDogJ25vbmUnLCBzdHJva2U6ICdibGFjaycsIHN0cm9rZVdpZHRoOiAnMnB4J30pKTtcbiAgICAgICAgXHRcdCAgICB0aWVyTGFiZWxzLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAndGV4dCcsIGZvcm1hdFF1YW50TGFiZWwocS5tYXgpLCB7eDogbWFyZ2luIC0gMywgeTogcG9zICsgNywgdGV4dEFuY2hvcjogJ2VuZCd9KSk7XG4gICAgICAgIFx0XHQgICAgdGllckxhYmVscy5hcHBlbmRDaGlsZChtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCBmb3JtYXRRdWFudExhYmVsKHEubWluKSwge3g6IG1hcmdpbiAtIDMsIHk6IHBvcyArICBzdWJ0aWVyLmhlaWdodCwgdGV4dEFuY2hvcjogJ2VuZCd9KSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgbnVtVGljcy0xOyArK3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpZXJMYWJlbHMuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICd0ZXh0JywgZm9ybWF0UXVhbnRMYWJlbCgoMS4wKnEubWF4KSAtICh0KnRpY0ludGVydmFsKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt4OiBtYXJnaW4gLSAzLCB5OiBwb3MgKyAgdHkgKyAzLCB0ZXh0QW5jaG9yOiAnZW5kJ30pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICBcdFx0fVxuXG4gICAgXHRcdCAgICBwb3MgKz0gc3VidGllci5oZWlnaHQgKyBwYWRkaW5nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocG9zIC0gdGllclRvcFBvcyA8IG1pblRpZXJIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBwb3MgPSB0aWVyVG9wUG9zICsgbWluVGllckhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICBcdH1cblxuICAgICAgICB2YXIgbGFiZWxOYW1lO1xuICAgICAgICBpZiAodHlwZW9mIHRpZXIuY29uZmlnLm5hbWUgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgbGFiZWxOYW1lID0gdGllci5jb25maWcubmFtZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbGFiZWxOYW1lID0gdGllci5kYXNTb3VyY2UubmFtZTtcbiAgICBcdHRpZXJMYWJlbHMuYXBwZW5kQ2hpbGQoXG4gICAgXHQgICAgbWFrZUVsZW1lbnROUyhcbiAgICBcdFx0TlNfU1ZHLCAndGV4dCcsXG4gICAgXHRcdGxhYmVsTmFtZSxcbiAgICBcdFx0e3g6IG1hcmdpbiAtIChoYXNRdWFudCA/IDIwIDogMTIpLCB5OiAocG9zK3RpZXJUb3BQb3MrOCkvMiwgZm9udFNpemU6ICcxMHB0JywgdGV4dEFuY2hvcjogJ2VuZCd9KSk7XG5cbiAgICBcdFxuICAgIFx0dGllckJhY2tncm91bmQuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBwb3MgLSB0aWVyVG9wUG9zKTtcbiAgICBcdHRpZXJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgW3RpZXJTVkcsIHRpZXJMYWJlbHNdKSk7XG5cbiAgICAgICAgdGllci5zdWJ0aWVycyA9IHRpZXIuYmFja3VwU3VidGllcnM7XG4gICAgICAgIHRpZXIub3JpZ2luSGF4eCA9IHRpZXIuYmFja3VwT3JpZ2luSGF4eDtcbiAgICAgICAgdGllci5sYXlvdXRIZWlnaHQgPSB0aWVyLmJhY2t1cExheW91dEhlaWdodDtcbiAgICB9XG5cbiAgICBpZiAob3B0cy5oaWdobGlnaHRzKSB7XG4gICAgICAgIHZhciBoaWdobGlnaHRzID0gdGhpcy5oaWdobGlnaHRzIHx8IFtdO1xuICAgICAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgaGlnaGxpZ2h0cy5sZW5ndGg7ICsraGkpIHtcbiAgICAgICAgICAgIHZhciBoID0gaGlnaGxpZ2h0c1toaV07XG4gICAgICAgICAgICBpZiAoKGguY2hyID09IHRoaXMuY2hyIHx8IGguY2hyID09ICgnY2hyJyArIHRoaXMuY2hyKSkgJiYgaC5taW4gPCB0aGlzLnZpZXdFbmQgJiYgaC5tYXggPiB0aGlzLnZpZXdTdGFydCkge1xuICAgICAgICAgICAgICAgIHZhciB0bWluID0gKE1hdGgubWF4KGgubWluLCB0aGlzLnZpZXdTdGFydCkgLSB0aGlzLnZpZXdTdGFydCkgKiB0aGlzLnNjYWxlO1xuICAgICAgICAgICAgICAgIHZhciB0bWF4ID0gKE1hdGgubWluKGgubWF4LCB0aGlzLnZpZXdFbmQpIC0gdGhpcy52aWV3U3RhcnQpICogdGhpcy5zY2FsZTtcblxuICAgICAgICAgICAgICAgIHRpZXJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICdyZWN0JywgbnVsbCwge3g6IG1hcmdpbiArIHRtaW4sIHk6IDcwLCB3aWR0aDogKHRtYXgtdG1pbiksIGhlaWdodDogcG9zLTcwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogJ25vbmUnLCBmaWxsOiB0aGlzLmRlZmF1bHRIaWdobGlnaHRGaWxsLCBmaWxsT3BhY2l0eTogdGhpcy5kZWZhdWx0SGlnaGxpZ2h0QWxwaGF9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcnVsZXJQb3MgPSAtMTsgXG4gICAgaWYgKG9wdHMucnVsZXIgPT0gJ2NlbnRlcicpIHtcbiAgICAgICAgcnVsZXJQb3MgPSBtYXJnaW4gKyAoKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KSp0aGlzLnNjYWxlKSAvIDI7XG4gICAgfSBlbHNlIGlmIChvcHRzLnJ1bGVyID09ICdsZWZ0Jykge1xuICAgICAgICBydWxlclBvcyA9IG1hcmdpbjtcbiAgICB9IGVsc2UgaWYgKG9wdHMucnVsZXIgPT0gJ3JpZ2h0Jykge1xuICAgICAgICBydWxlclBvcyA9IG1hcmdpbiArICgodGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQpKnRoaXMuc2NhbGUpO1xuICAgIH1cbiAgICBpZiAocnVsZXJQb3MgPj0gMCkge1xuICAgICAgICB0aWVySG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnbGluZScsIG51bGwsIHt4MTogcnVsZXJQb3MsIHkxOiA3MCwgeDI6IHJ1bGVyUG9zLCB5MjogcG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6ICdibHVlJ30pKTtcbiAgICB9XG5cbiAgICBzYXZlUm9vdC5hcHBlbmRDaGlsZCh0aWVySG9sZGVyKTtcbiAgICBzYXZlRG9jLmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgYi5mZWF0dXJlUGFuZWxXaWR0aCArIDIwICsgbWFyZ2luKTtcbiAgICBzYXZlRG9jLmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHBvcyArIDUwKTtcblxuICAgIFxuICAgIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggPSBiYWNrdXBGUFc7XG4gICAgdGhpcy5zY2FsZSA9IGJhY2t1cFNjYWxlO1xuXG4gICAgbGV0IHN2ZztcbiAgICBpZiAodHlwZW9mKFhNTFNlcmlhbGl6ZXIpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzdmcgPSBuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKHNhdmVEb2MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSBzYXZlRG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcm9vdC5zZXRBdHRyaWJ1dGUoJ3htbG5zJywgJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyk7XG4gICAgICAgIHN2ZyA9IHJvb3Qub3V0ZXJIVE1MO1xuICAgIH1cblxuICAgIGlmIChvcHRzLm91dHB1dCAmJiBvcHRzLm91dHB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHN2ZztcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW3N2Z10sIHt0eXBlOiAnaW1hZ2Uvc3ZnK3htbCd9KTtcbiAgICB9XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDE0XG4vL1xuLy8gc3ZnLXV0aWxzLmpzXG4vL1xuXG52YXIgTlNfU1ZHID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcbnZhciBOU19YTElOSyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcblxuZnVuY3Rpb24gU1ZHUGF0aCgpIHtcbiAgICB0aGlzLm9wcyA9IFtdO1xufVxuXG5TVkdQYXRoLnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgdGhpcy5vcHMucHVzaCgnTSAnICsgeCArICcgJyArIHkpO1xufVxuXG5TVkdQYXRoLnByb3RvdHlwZS5saW5lVG8gPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgdGhpcy5vcHMucHVzaCgnTCAnICsgeCArICcgJyArIHkpO1xufVxuXG5TVkdQYXRoLnByb3RvdHlwZS5jbG9zZVBhdGggPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm9wcy5wdXNoKCdaJyk7XG59XG5cblNWR1BhdGgucHJvdG90eXBlLnRvUGF0aERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHMuam9pbignICcpO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIE5TX1NWRzogTlNfU1ZHLFxuICAgICAgICBOU19YTElOSzogTlNfWExJTkssXG4gICAgICAgIFNWR1BhdGg6IFNWR1BhdGhcbiAgICB9XG59IiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xuLy9cbi8vIHRhYml4LXNvdXJjZS5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHNhID0gcmVxdWlyZSgnLi9zb3VyY2VhZGFwdGVycycpO1xuICAgIHZhciBkYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSA9IHNhLnJlZ2lzdGVyU291cmNlQWRhcHRlckZhY3Rvcnk7XG4gICAgdmFyIGRhbGxpYW5jZV9tYWtlUGFyc2VyID0gc2EubWFrZVBhcnNlcjtcbiAgICB2YXIgRmVhdHVyZVNvdXJjZUJhc2UgPSBzYS5GZWF0dXJlU291cmNlQmFzZTtcblxuICAgIHZhciBiaW4gPSByZXF1aXJlKCcuL2JpbicpO1xuICAgIHZhciBVUkxGZXRjaGFibGUgPSBiaW4uVVJMRmV0Y2hhYmxlO1xuICAgIHZhciBCbG9iRmV0Y2hhYmxlID0gYmluLkJsb2JGZXRjaGFibGU7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIEF3YWl0ZWQgPSB1dGlscy5Bd2FpdGVkO1xuXG4gICAgdmFyIGNvbm5lY3RUYWJpeCA9IHJlcXVpcmUoJy4vdGFiaXgnKS5jb25uZWN0VGFiaXg7XG59XG5cbmZ1bmN0aW9uIFRhYml4RmVhdHVyZVNvdXJjZShzb3VyY2UpIHtcbiAgICBGZWF0dXJlU291cmNlQmFzZS5jYWxsKHRoaXMpO1xuICAgIHRoaXMucmVhZGluZXNzID0gJ0Nvbm5lY3RpbmcnO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXG4gICAgdGhpcy50YWJpeEhvbGRlciA9IG5ldyBBd2FpdGVkKCk7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuXG4gICAgdmFyIHBhcnNlciA9IGRhbGxpYW5jZV9tYWtlUGFyc2VyKHNvdXJjZS5wYXlsb2FkKTtcbiAgICBpZiAoIXBhcnNlcikge1xuICAgICAgICB0aHJvdyAnVW5zdXBvcnRlZCB0YWJpeCBwYXlsb2FkICcgKyBzb3VyY2UucGF5bG9hZDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICB9XG5cbiAgICB2YXIgZGF0YSwgaW5kZXg7XG4gICAgaWYgKHRoaXMuc291cmNlLmJsb2IpIHtcbiAgICAgICAgZGF0YSA9IG5ldyBCbG9iRmV0Y2hhYmxlKHRoaXMuc291cmNlLmJsb2IpO1xuICAgICAgICBpbmRleCA9IG5ldyBCbG9iRmV0Y2hhYmxlKHRoaXMuc291cmNlLmluZGV4QmxvYik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IG5ldyBVUkxGZXRjaGFibGUodGhpcy5zb3VyY2UudXJpLCB7Y3JlZGVudGlhbHM6IHRoaXMuc291cmNlLmNyZWRlbnRpYWxzLCByZXNvbHZlcjogdGhpcy5zb3VyY2UucmVzb2x2ZXJ9KTtcbiAgICAgICAgaW5kZXggPSBuZXcgVVJMRmV0Y2hhYmxlKHRoaXMuc291cmNlLmluZGV4VVJJIHx8ICh0aGlzLnNvdXJjZS51cmkgKyAnLnRiaScpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjcmVkZW50aWFsczogdGhpcy5zb3VyY2UuY3JlZGVudGlhbHMsIHJlc29sdmVyOiB0aGlzLnNvdXJjZS5yZXNvbHZlcn0pO1xuICAgIH1cbiAgICBjb25uZWN0VGFiaXgoZGF0YSwgaW5kZXgsIGZ1bmN0aW9uKHRhYml4LCBlcnIpIHtcbiAgICAgICAgdGhpc0IudGFiaXhIb2xkZXIucHJvdmlkZSh0YWJpeCk7XG4gICAgICAgIHRhYml4LmZldGNoSGVhZGVyKGZ1bmN0aW9uKGxpbmVzLCBlcnIpIHtcbiAgICAgICAgICAgIGlmIChsaW5lcykge1xuICAgICAgICAgICAgICAgIHZhciBzZXNzaW9uID0gcGFyc2VyLmNyZWF0ZVNlc3Npb24oZnVuY3Rpb24oKSB7IC8qIE51bGwgc2luayBiZWNhdXNlIHdlIHNob3VsZG4ndCBnZXQgcmVjb3JkcyAqLyB9KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgbGluZXMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24ucGFyc2UobGluZXNbbGldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5mbHVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpc0IucmVhZGluZXNzID0gbnVsbFxuICAgICAgICB0aGlzQi5ub3RpZnlSZWFkaW5lc3MoKTtcbiAgICB9KTtcbn1cblxuVGFiaXhGZWF0dXJlU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlKTtcblxuVGFiaXhGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIFxuICAgIHRoaXNCLmJ1c3krKztcbiAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgIFxuICAgIHRoaXMudGFiaXhIb2xkZXIuYXdhaXQoZnVuY3Rpb24odGFiaXgpIHtcbiAgICAgICAgdGFiaXguZmV0Y2goY2hyLCBtaW4sIG1heCwgZnVuY3Rpb24ocmVjb3JkcywgZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzQi5wYXJzZXIuY3JlYXRlU2Vzc2lvbihmdW5jdGlvbihmKSB7ZmVhdHVyZXMucHVzaChmKX0pO1xuICAgICAgICAgICAgZm9yICh2YXIgcmkgPSAwOyByaSA8IHJlY29yZHMubGVuZ3RoOyArK3JpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBzZXNzaW9uLnBhcnNlKHJlY29yZHNbcmldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlc3Npb24uZmx1c2goKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGZlYXR1cmVzLCAxMDAwMDAwMDAwKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cblxuVGFiaXhGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5wYXJzZXIgJiYgdGhpcy5wYXJzZXIuZ2V0U3R5bGVTaGVldClcbiAgICAgICAgdGhpcy5wYXJzZXIuZ2V0U3R5bGVTaGVldChjYWxsYmFjaylcbn1cblxuVGFiaXhGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXREZWZhdWx0RklQcyA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aWVyKSB7XG4gICAgaWYgKHRoaXMucGFyc2VyICYmIHRoaXMucGFyc2VyLmdldERlZmF1bHRGSVBzKVxuICAgICAgICB0aGlzLnBhcnNlci5nZXREZWZhdWx0RklQcyhjYWxsYmFjaywgdGllcik7XG59XG5cblxuZGFsbGlhbmNlX3JlZ2lzdGVyU291cmNlQWRhcHRlckZhY3RvcnkoJ3RhYml4JywgZnVuY3Rpb24oc291cmNlKSB7XG4gICAgcmV0dXJuIHtmZWF0dXJlczogbmV3IFRhYml4RmVhdHVyZVNvdXJjZShzb3VyY2UpfTtcbn0pO1xuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMVxuLy9cbi8vIHRhYml4LmpzOiBiYXNpYyBzdXBwb3J0IGZvciB0YWJpeC1pbmRleGVkIGZsYXRmaWxlc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBUQUJJWF9NQUdJQyA9IDB4MDE0OTQyNTQ7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHNwYW5zID0gcmVxdWlyZSgnLi9zcGFucycpO1xuICAgIHZhciBSYW5nZSA9IHNwYW5zLlJhbmdlO1xuICAgIHZhciB1bmlvbiA9IHNwYW5zLnVuaW9uO1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBzcGFucy5pbnRlcnNlY3Rpb247XG5cbiAgICB2YXIgYmluID0gcmVxdWlyZSgnLi9iaW4nKTtcbiAgICB2YXIgcmVhZEludCA9IGJpbi5yZWFkSW50O1xuICAgIHZhciByZWFkU2hvcnQgPSBiaW4ucmVhZFNob3J0O1xuICAgIHZhciByZWFkQnl0ZSA9IGJpbi5yZWFkQnl0ZTtcbiAgICB2YXIgcmVhZEludDY0ID0gYmluLnJlYWRJbnQ2NDtcbiAgICB2YXIgcmVhZEZsb2F0ID0gYmluLnJlYWRGbG9hdDtcblxuICAgIHZhciBsaDN1dGlscyA9IHJlcXVpcmUoJy4vbGgzdXRpbHMnKTtcbiAgICB2YXIgcmVhZFZvYiA9IGxoM3V0aWxzLnJlYWRWb2I7XG4gICAgdmFyIHVuYmd6ZiA9IGxoM3V0aWxzLnVuYmd6ZjtcbiAgICB2YXIgcmVnMmJpbnMgPSBsaDN1dGlscy5yZWcyYmlucztcbiAgICB2YXIgQ2h1bmsgPSBsaDN1dGlscy5DaHVuaztcbn1cblxuZnVuY3Rpb24gVGFiaXhGaWxlKCkge1xufVxuXG5mdW5jdGlvbiBjb25uZWN0VGFiaXgoZGF0YSwgdGJpLCBjYWxsYmFjaykge1xuICAgIHZhciB0YWJpeCA9IG5ldyBUYWJpeEZpbGUoKTtcbiAgICB0YWJpeC5kYXRhID0gZGF0YTtcbiAgICB0YWJpeC50YmkgPSB0Ymk7XG5cbiAgICB0YWJpeC50YmkuZmV0Y2goZnVuY3Rpb24oaGVhZGVyKSB7ICAgLy8gRG8gd2UgcmVhbGx5IG5lZWQgdG8gZmV0Y2ggdGhlIHdob2xlIHRoaW5nPyA6LShcbiAgICAgICAgaWYgKCFoZWFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBcIkNvdWxkbid0IGFjY2VzcyBUYWJpeFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB1bmNoZWFkID0gdW5iZ3pmKGhlYWRlciwgaGVhZGVyLmJ5dGVMZW5ndGgpO1xuICAgICAgICB2YXIgdW5jYmEgPSBuZXcgVWludDhBcnJheSh1bmNoZWFkKTtcbiAgICAgICAgdmFyIG1hZ2ljID0gcmVhZEludCh1bmNiYSwgMCk7XG4gICAgICAgIGlmIChtYWdpYyAhPSBUQUJJWF9NQUdJQykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdOb3QgYSB0YWJpeCBpbmRleCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5yZWYgPSByZWFkSW50KHVuY2JhLCA0KTtcbiAgICAgICAgdGFiaXguZm9ybWF0ID0gcmVhZEludCh1bmNiYSwgOCk7XG4gICAgICAgIHRhYml4LmNvbFNlcSA9IHJlYWRJbnQodW5jYmEsIDEyKTtcbiAgICAgICAgdGFiaXguY29sU3RhcnQgPSByZWFkSW50KHVuY2JhLCAxNik7XG4gICAgICAgIHRhYml4LmNvbEVuZCA9IHJlYWRJbnQodW5jYmEsIDIwKTtcbiAgICAgICAgdGFiaXgubWV0YSA9IHJlYWRJbnQodW5jYmEsIDI0KTtcbiAgICAgICAgdGFiaXguc2tpcCA9IHJlYWRJbnQodW5jYmEsIDI4KTtcbiAgICAgICAgdmFyIG5hbWVMZW5ndGggPSByZWFkSW50KHVuY2JhLCAzMik7XG5cbiAgICAgICAgdGFiaXguaW5kaWNlcyA9IFtdO1xuXG4gICAgICAgIHZhciBwID0gMzY7XG4gICAgICAgIHRhYml4LmNoclRvSW5kZXggPSB7fTtcbiAgICAgICAgdGFiaXguaW5kZXhUb0NociA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5yZWY7ICsraSkge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSAnJ1xuXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIHZhciBjaCA9IHVuY2JhW3ArK107XG4gICAgICAgICAgICAgICAgaWYgKGNoID09IDApXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgbmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGFiaXguY2hyVG9JbmRleFtuYW1lXSA9IGk7XG4gICAgICAgICAgICBpZiAobmFtZS5pbmRleE9mKCdjaHInKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGFiaXguY2hyVG9JbmRleFtuYW1lLnN1YnN0cmluZygzKV0gPSBpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YWJpeC5jaHJUb0luZGV4WydjaHInICsgbmFtZV0gPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFiaXguaW5kZXhUb0Noci5wdXNoKG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1pbkJsb2NrSW5kZXggPSAxMDAwMDAwMDAwO1xuICAgICAgICBmb3IgKHZhciByZWYgPSAwOyByZWYgPCBucmVmOyArK3JlZikge1xuICAgICAgICAgICAgdmFyIGJsb2NrU3RhcnQgPSBwO1xuICAgICAgICAgICAgdmFyIG5iaW4gPSByZWFkSW50KHVuY2JhLCBwKTsgcCArPSA0O1xuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBuYmluOyArK2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgYmluID0gcmVhZEludCh1bmNiYSwgcCk7XG4gICAgICAgICAgICAgICAgdmFyIG5jaG5rID0gcmVhZEludCh1bmNiYSwgcCs0KTtcbiAgICAgICAgICAgICAgICBwICs9IDggKyAobmNobmsgKiAxNik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbmludHYgPSByZWFkSW50KHVuY2JhLCBwKTsgcCArPSA0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcSA9IHA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5pbnR2OyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgdiA9IHJlYWRWb2IodW5jYmEsIHEpOyBxICs9IDg7XG4gICAgICAgICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpID0gdi5ibG9jaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYub2Zmc2V0ID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpICs9IDY1NTM2O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChiaSA8IG1pbkJsb2NrSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5CbG9ja0luZGV4ID0gYmk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAgKz0gKG5pbnR2ICogOCk7XG5cblxuICAgICAgICAgICAgdmFyIHViID0gdW5jYmE7XG4gICAgICAgICAgICBpZiAobmJpbiA+IDApIHtcbiAgICAgICAgICAgICAgICB0YWJpeC5pbmRpY2VzW3JlZl0gPSBuZXcgVWludDhBcnJheSh1bmNoZWFkLCBibG9ja1N0YXJ0LCBwIC0gYmxvY2tTdGFydCk7XG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICB0YWJpeC5oZWFkZXJNYXggPSBtaW5CbG9ja0luZGV4O1xuXG4gICAgICAgIGNhbGxiYWNrKHRhYml4KTtcbiAgICB9LCB7dGltZW91dDogNTAwMDB9KTtcbn1cblxuLy8gQ29weS1wYXN0ZSBmcm9tIEJhbUZpbGVcblxuVGFiaXhGaWxlLnByb3RvdHlwZS5ibG9ja3NGb3JSYW5nZSA9IGZ1bmN0aW9uKHJlZklkLCBtaW4sIG1heCkge1xuICAgIHZhciBpbmRleCA9IHRoaXMuaW5kaWNlc1tyZWZJZF07XG4gICAgaWYgKCFpbmRleCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgdmFyIGludEJpbnNMID0gcmVnMmJpbnMobWluLCBtYXgpO1xuICAgIHZhciBpbnRCaW5zID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRCaW5zTC5sZW5ndGg7ICsraSkge1xuICAgICAgICBpbnRCaW5zW2ludEJpbnNMW2ldXSA9IHRydWU7XG4gICAgfVxuICAgIHZhciBsZWFmQ2h1bmtzID0gW10sIG90aGVyQ2h1bmtzID0gW107XG5cbiAgICB2YXIgbmJpbiA9IHJlYWRJbnQoaW5kZXgsIDApO1xuICAgIHZhciBwID0gNDtcbiAgICBmb3IgKHZhciBiID0gMDsgYiA8IG5iaW47ICsrYikge1xuICAgICAgICB2YXIgYmluID0gcmVhZEludChpbmRleCwgcCk7XG4gICAgICAgIHZhciBuY2huayA9IHJlYWRJbnQoaW5kZXgsIHArNCk7XG4gICAgICAgIHAgKz0gODtcbiAgICAgICAgaWYgKGludEJpbnNbYmluXSkge1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBuY2huazsgKytjKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNzID0gcmVhZFZvYihpbmRleCwgcCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdmFyIGNlID0gcmVhZFZvYihpbmRleCwgcCArIDgsIHRydWUpO1xuICAgICAgICAgICAgICAgIChiaW4gPCA0NjgxID8gb3RoZXJDaHVua3MgOiBsZWFmQ2h1bmtzKS5wdXNoKG5ldyBDaHVuayhjcywgY2UpKTtcbiAgICAgICAgICAgICAgICBwICs9IDE2O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcCArPSAgKG5jaG5rICogMTYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIG5pbnR2ID0gcmVhZEludChpbmRleCwgcCk7XG4gICAgdmFyIGxvd2VzdCA9IG51bGw7XG4gICAgdmFyIG1pbkxpbiA9IE1hdGgubWluKG1pbj4+MTQsIG5pbnR2IC0gMSksIG1heExpbiA9IE1hdGgubWluKG1heD4+MTQsIG5pbnR2IC0gMSk7XG4gICAgZm9yICh2YXIgaSA9IG1pbkxpbjsgaSA8PSBtYXhMaW47ICsraSkge1xuICAgICAgICB2YXIgbGIgPSAgcmVhZFZvYihpbmRleCwgcCArIDQgKyAoaSAqIDgpKTtcbiAgICAgICAgaWYgKCFsYikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsb3dlc3QgfHwgbGIuYmxvY2sgPCBsb3dlc3QuYmxvY2sgfHwgbGIub2Zmc2V0IDwgbG93ZXN0Lm9mZnNldCkge1xuICAgICAgICAgICAgbG93ZXN0ID0gbGI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdmFyIHBydW5lZE90aGVyQ2h1bmtzID0gW107XG4gICAgaWYgKGxvd2VzdCAhPSBudWxsKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJDaHVua3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBjaG5rID0gb3RoZXJDaHVua3NbaV07XG4gICAgICAgICAgICBpZiAoY2huay5tYXh2LmJsb2NrID49IGxvd2VzdC5ibG9jayAmJiBjaG5rLm1heHYub2Zmc2V0ID49IGxvd2VzdC5vZmZzZXQpIHtcbiAgICAgICAgICAgICAgICBwcnVuZWRPdGhlckNodW5rcy5wdXNoKGNobmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBcbiAgICBvdGhlckNodW5rcyA9IHBydW5lZE90aGVyQ2h1bmtzO1xuXG4gICAgdmFyIGludENodW5rcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJDaHVua3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaW50Q2h1bmtzLnB1c2gob3RoZXJDaHVua3NbaV0pO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlYWZDaHVua3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaW50Q2h1bmtzLnB1c2gobGVhZkNodW5rc1tpXSk7XG4gICAgfVxuXG4gICAgaW50Q2h1bmtzLnNvcnQoZnVuY3Rpb24oYzAsIGMxKSB7XG4gICAgICAgIHZhciBkaWYgPSBjMC5taW52LmJsb2NrIC0gYzEubWludi5ibG9jaztcbiAgICAgICAgaWYgKGRpZiAhPSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZGlmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGMwLm1pbnYub2Zmc2V0IC0gYzEubWludi5vZmZzZXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgbWVyZ2VkQ2h1bmtzID0gW107XG4gICAgaWYgKGludENodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBjdXIgPSBpbnRDaHVua3NbMF07XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgaW50Q2h1bmtzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbmMgPSBpbnRDaHVua3NbaV07XG4gICAgICAgICAgICBpZiAobmMubWludi5ibG9jayA9PSBjdXIubWF4di5ibG9jayAvKiAmJiBuYy5taW52Lm9mZnNldCA9PSBjdXIubWF4di5vZmZzZXQgKi8pIHsgLy8gbm8gcG9pbnQgc3BsaXR0aW5nIG1pZC1ibG9ja1xuICAgICAgICAgICAgICAgIGN1ciA9IG5ldyBDaHVuayhjdXIubWludiwgbmMubWF4dik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lcmdlZENodW5rcy5wdXNoKGN1cik7XG4gICAgICAgICAgICAgICAgY3VyID0gbmM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWVyZ2VkQ2h1bmtzLnB1c2goY3VyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVyZ2VkQ2h1bmtzO1xufVxuXG5UYWJpeEZpbGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdmFyIGNocklkID0gdGhpcy5jaHJUb0luZGV4W2Nocl07XG4gICAgaWYgKGNocklkID09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFtdKTtcblxuICAgIHZhciBjYW5vbmljYWxDaHIgPSB0aGlzLmluZGV4VG9DaHJbY2hySWRdO1xuXG4gICAgdmFyIGNodW5rcztcbiAgICBpZiAoY2hySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjaHVua3MgPSBbXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjaHVua3MgPSB0aGlzLmJsb2Nrc0ZvclJhbmdlKGNocklkLCBtaW4sIG1heCk7XG4gICAgICAgIGlmICghY2h1bmtzKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCAnRXJyb3IgaW4gaW5kZXggZmV0Y2gnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciByZWNvcmRzID0gW107XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgZGF0YTtcblxuICAgIGZ1bmN0aW9uIHRyYW1wKCkge1xuICAgICAgICBpZiAoaW5kZXggPj0gY2h1bmtzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlY29yZHMpO1xuICAgICAgICB9IGVsc2UgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGNodW5rc1tpbmRleF07XG4gICAgICAgICAgICB2YXIgZmV0Y2hNaW4gPSBjLm1pbnYuYmxvY2s7XG4gICAgICAgICAgICB2YXIgZmV0Y2hNYXggPSBjLm1heHYuYmxvY2sgKyAoMTw8MTYpOyAvLyAqc2lnaCpcbiAgICAgICAgICAgIHRoaXNCLmRhdGEuc2xpY2UoZmV0Y2hNaW4sIGZldGNoTWF4IC0gZmV0Y2hNaW4pLmZldGNoKGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gdW5iZ3pmKHIsIGMubWF4di5ibG9jayAtIGMubWludi5ibG9jayArIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFtcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgICAgICAgICAgIHRoaXNCLnJlYWRSZWNvcmRzKGJhLCBjaHVua3NbaW5kZXhdLm1pbnYub2Zmc2V0LCByZWNvcmRzLCBtaW4sIG1heCwgY2Fub25pY2FsQ2hyKTtcbiAgICAgICAgICAgIGRhdGEgPSBudWxsO1xuICAgICAgICAgICAgKytpbmRleDtcbiAgICAgICAgICAgIHJldHVybiB0cmFtcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyYW1wKCk7XG59XG5cblRhYml4RmlsZS5wcm90b3R5cGUucmVhZFJlY29yZHMgPSBmdW5jdGlvbihiYSwgb2Zmc2V0LCBzaW5rLCBtaW4sIG1heCwgY2hyKSB7XG4gICBMSU5FX0xPT1A6XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGxpbmUgPSAnJztcbiAgICAgICAgd2hpbGUgKG9mZnNldCA8IGJhLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGNoID0gYmFbb2Zmc2V0KytdO1xuICAgICAgICAgICAgaWYgKGNoID09IDEwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRva3MgPSBsaW5lLnNwbGl0KCdcXHQnKTtcblxuICAgICAgICAgICAgICAgIGlmICh0b2tzW3RoaXMuY29sU2VxIC0gMV0gPT0gY2hyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbWluID0gcGFyc2VJbnQodG9rc1t0aGlzLmNvbFN0YXJ0IC0gMV0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm1heCA9IGZtaW47XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbEVuZCA+IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBmbWF4ID0gcGFyc2VJbnQodG9rc1t0aGlzLmNvbEVuZCAtIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybWF0ICYgMHgxMDAwMCkgKytmbWluO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmbWluIDw9IG1heCAmJiBmbWF4ID49IG1pbilcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmsucHVzaChsaW5lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGludWUgTElORV9MT09QO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaW5lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG5cblRhYml4RmlsZS5wcm90b3R5cGUuZmV0Y2hIZWFkZXIgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZmV0Y2hQdHIgPSAwLCBwdHIgPSAwLCBsaW5lPScnO1xuICAgIHZhciBsaW5lcyA9IFtdO1xuXG4gICAgc2VsZi5kYXRhLnNsaWNlKDAsIHNlbGYuaGVhZGVyTWF4KS5mZXRjaChmdW5jdGlvbihjaG5rKSB7XG4gICAgICAgIGlmICghY2huaykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiRmV0Y2ggZmFpbGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHVuYmd6ZihjaG5rLCBjaG5rLmJ5dGVMZW5ndGgpKTtcbiAgICAgICAgdmFyIHB0ciA9IDAsIGxpbmUgPSAnJywgbGluZXMgPSBbXTtcbiAgICAgICAgd2hpbGUgKHB0ciA8IGJhLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGNoID0gYmFbcHRyKytdXG4gICAgICAgICAgICBpZiAoY2ggPT0gMTApIHtcbiAgICAgICAgICAgICAgICBpZiAobGluZS5jaGFyQ29kZUF0KDApID09IHNlbGYubWV0YSkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgICAgICAgICBsaW5lID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGxpbmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpbmUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2sobGluZXMpO1xuICAgIH0pO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGNvbm5lY3RUYWJpeDogY29ubmVjdFRhYml4LFxuICAgICAgICBUQUJJWF9NQUdJQzogVEFCSVhfTUFHSUNcbiAgICB9O1xufVxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG4vKlxuIFNvdXJjZSB0aGF0IGNhbiBiZSBjb25maWd1cmVkIHRvIHByb2R1Y2UgYW55IHR5cGUgb2YgZmVhdHVyZSxcbiB1c2VmdWwgZm9yIHRlc3RpbmcgcmVuZGVyZXJzLlxuICovXG5cbmltcG9ydCB7IHJlZ2lzdGVyU291cmNlQWRhcHRlckZhY3RvcnksXG4gICAgICAgICBGZWF0dXJlU291cmNlQmFzZVxuICAgICAgIH0gZnJvbSBcIi4vc291cmNlYWRhcHRlcnMuanNcIjtcblxuaW1wb3J0IHsgREFTRmVhdHVyZVxuICAgICAgIH0gZnJvbSBcIi4vZGFzLmpzXCI7XG5cbmltcG9ydCAqIGFzIFIgZnJvbSBcInJhbWRhXCI7XG5cblxuY2xhc3MgVGVzdFNvdXJjZSBleHRlbmRzIEZlYXR1cmVTb3VyY2VCYXNlIHtcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmZlYXR1cmVzID0gUi5kZWZhdWx0VG8oW10sIHNvdXJjZS5mZWF0dXJlcyk7XG4gICAgfVxuXG4gICAgZ2VuRmVhdHVyZShjb25mKSB7XG4gICAgICAgIGxldCBmZWF0dXJlID0gbmV3IERBU0ZlYXR1cmUoKTtcblxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gY29uZikge1xuICAgICAgICAgICAgZmVhdHVyZVtrZXldID0gY29uZltrZXldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmV0Y2goY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgZmVhdHVyZXMgPSBSLmZvckVhY2godGhpcy5nZW5GZWF0dXJlLCB0aGlzLmZlYXR1cmVzKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGZlYXR1cmVzLCAxKTtcbiAgICB9XG59XG5cblxucmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSgndGVzdC1zb3VyY2UnLCBzb3VyY2UgPT4ge1xuICAgIHJldHVybiB7IGZlYXR1cmVzOiBuZXcgVGVzdFNvdXJjZShzb3VyY2UpIH07XG59KTtcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTNcbi8vXG4vLyB0aHViLmpzOiBzdXBwb3J0IGZvciB0cmFjay1odWIgc3R5bGUgcmVnaXN0cmllc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciB0ZXh0WEhSID0gdXRpbHMudGV4dFhIUjtcbiAgICB2YXIgcmVsYXRpdmVVUkwgPSB1dGlscy5yZWxhdGl2ZVVSTDtcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcblxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBEQVNTdHlsZXNoZWV0ID0gZGFzLkRBU1N0eWxlc2hlZXQ7XG4gICAgdmFyIERBU1N0eWxlID0gZGFzLkRBU1N0eWxlO1xufVxuXG52YXIgVEhVQl9TVEFOWkFfUkVHRVhQID0gL1xcblxccypcXG4vO1xudmFyIFRIVUJfUEFSU0VfUkVHRVhQICA9IC8oXFx3KykgKyguKylcXG4/LztcbnZhciBUSFVCX1NVQkdST1VQX1JFR0VYUCA9IC9zdWJHcm91cFsxLTldLztcblxudmFyIFRIVUJfUEVOTkFOVF9QUkVGSVggPSAnaHR0cDovL2dlbm9tZS51Y3NjLmVkdS9pbWFnZXMvJztcblxuZnVuY3Rpb24gVHJhY2tIdWIodXJsKSB7XG4gICAgdGhpcy5nZW5vbWVzID0ge307XG4gICAgdGhpcy51cmwgPSB1cmw7XG59XG5cbmZ1bmN0aW9uIFRyYWNrSHViVHJhY2soKSB7XG59XG5cblRyYWNrSHViVHJhY2sucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGspIHtcbiAgICBpZiAodGhpc1trXSlcbiAgICAgICAgcmV0dXJuIHRoaXNba107XG4gICAgZWxzZSBpZiAodGhpcy5fcGFyZW50KSBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudC5nZXQoayk7XG59XG5cbmZ1bmN0aW9uIFRyYWNrSHViREIoaHViKSB7XG4gICAgdGhpcy5odWIgPSBodWI7XG59XG5cblRyYWNrSHViREIucHJvdG90eXBlLmdldFRyYWNrcyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICBpZiAodGhpcy5fdHJhY2tzKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzLl90cmFja3MpO1xuICAgIH0gXG4gICAgXG4gICAgdGV4dFhIUih0aGlzLmFic1VSTCwgZnVuY3Rpb24odHJhY2tGaWxlLCBlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIHRyYWNrRmlsZSA9IHRyYWNrRmlsZS5yZXBsYWNlKC9cXCMuKi9nLCAnJyk7XG4gICAgICAgIHRyYWNrRmlsZSA9IHRyYWNrRmlsZS5yZXBsYWNlKCdcXFxcXFxuJywgJyAnKTtcblxuICAgICAgICB2YXIgdHJhY2tzID0gW107XG4gICAgICAgIHZhciB0cmFja3NCeUlkID0ge307XG4gICAgICAgIHZhciBzdGFuemFzID0gdHJhY2tGaWxlLnNwbGl0KFRIVUJfU1RBTlpBX1JFR0VYUCk7XG4gICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgc3Rhbnphcy5sZW5ndGg7ICsrcykge1xuICAgICAgICAgICAgdmFyIHRva3MgPSBzdGFuemFzW3NdLnJlcGxhY2UoL1xcIy4qL2csICcnKS5zcGxpdChUSFVCX1BBUlNFX1JFR0VYUCk7XG4gICAgICAgICAgICB2YXIgdHJhY2sgPSBuZXcgVHJhY2tIdWJUcmFjaygpO1xuICAgICAgICAgICAgdHJhY2suX2RiID0gdGhpc0I7XG4gICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IHRva3MubGVuZ3RoIC0gMjsgbCArPSAzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGsgPSB0b2tzW2wrMV0sIHYgPSB0b2tzW2wrMl07XG4gICAgICAgICAgICAgICAgaWYgKGsubWF0Y2goVEhVQl9TVUJHUk9VUF9SRUdFWFApKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdHJhY2suc3ViZ3JvdXBzKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2suc3ViZ3JvdXBzID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZ3Rva3MgPSB2LnNwbGl0KC9cXHMvKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNndGFnID0gc2d0b2tzWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2dyZWNvcmQgPSB7bmFtZTogc2d0b2tzWzFdLCB0YWdzOiBbXSwgdGl0bGVzOiBbXX07XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHNndGkgPSAyOyBzZ3RpIDwgc2d0b2tzLmxlbmd0aDsgKytzZ3RpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JwID0gc2d0b2tzW3NndGldLnNwbGl0KC89Lyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZ3JlY29yZC50YWdzLnB1c2goZ3JwWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNncmVjb3JkLnRpdGxlcy5wdXNoKGdycFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJhY2suc3ViZ3JvdXBzW3NndGFnXSA9IHNncmVjb3JkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoayA9PT0gJ3N1Ykdyb3VwcycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNndG9rcyA9IHYuc3BsaXQoLyhcXHcrKT0oXFx3KykvKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2suc2dtID0ge307XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHNndGkgPSAwOyBzZ3RpIDwgc2d0b2tzLmxlbmd0aCAtIDI7IHNndGkgKz0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2suc2dtW3NndG9rc1tzZ3RpKzFdXSA9IHNndG9rc1tzZ3RpICsgMl07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cmFja1t0b2tzW2wrMV1dID0gdG9rc1tsKzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRyYWNrLnRyYWNrICYmICh0cmFjay50eXBlIHx8IHRyYWNrLmNvbnRhaW5lciB8fCB0cmFjay52aWV3IHx8IHRyYWNrLmJpZ0RhdGFVcmwpKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tzLnB1c2godHJhY2spO1xuICAgICAgICAgICAgICAgIHRyYWNrc0J5SWRbdHJhY2sudHJhY2tdID0gdHJhY2s7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdza2lwcGluZyAnLCB0cmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciB0b3BsZXZlbHMgPSBbXTtcbiAgICAgICAgdmFyIGNvbXBvc2l0ZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRyYWNrcy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgIHZhciB0cmFjayA9IHRyYWNrc1t0aV07XG4gICAgICAgICAgICB2YXIgdG9wID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0cmFjay5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHRva3MgPSB0cmFjay5wYXJlbnQuc3BsaXQoL1xccysvKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdHJhY2tzQnlJZFtwdG9rc1swXV07XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICB0cmFjay5fcGFyZW50ID0gcGFyZW50O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyZW50LmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuID0gW107XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKHRyYWNrKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb3VsZG4ndCBmaW5kIHBhcmVudCBcIiArIHB0b2tzWzBdICsgJygnICsgdHJhY2sucGFyZW50ICsgJyknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFjay5jb21wb3NpdGVUcmFjaykge1xuICAgICAgICAgICAgICAgIGNvbXBvc2l0ZXMucHVzaCh0cmFjayk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRvcCkge1xuICAgICAgICAgICAgICAgIHRvcGxldmVscy5wdXNoKHRyYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjb21wb3NpdGVzLmxlbmd0aDsgKytjaSkge1xuICAgICAgICAgICAgdmFyIGNvbXAgPSBjb21wb3NpdGVzW2NpXTtcbiAgICAgICAgICAgIGlmICghY29tcC5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgdmFyIHBhcmVudE9mVmlld3MgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIGtpID0gMDsga2kgPCBjb21wLmNoaWxkcmVuLmxlbmd0aDsgKytraSkge1xuICAgICAgICAgICAgICAgIHZhciBrID0gY29tcC5jaGlsZHJlbltraV07XG4gICAgICAgICAgICAgICAgaWYgKGsudmlldykge1xuICAgICAgICAgICAgICAgICAgICBrLnNob3J0TGFiZWwgPSBjb21wLnNob3J0TGFiZWwgKyBcIjogXCIgKyBrLnNob3J0TGFiZWw7XG4gICAgICAgICAgICAgICAgICAgIHRvcGxldmVscy5wdXNoKGspO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRPZlZpZXdzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXBhcmVudE9mVmlld3MpXG4gICAgICAgICAgICAgICAgdG9wbGV2ZWxzLnB1c2goY29tcCk7XG4gICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB0aGlzQi5fdHJhY2tzID0gdG9wbGV2ZWxzO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sodGhpc0IuX3RyYWNrcywgbnVsbCk7XG4gICAgfSwge2NyZWRlbnRpYWxzOiB0aGlzLmNyZWRlbnRpYWxzLCBzYWx0OiB0cnVlfSk7XG59XG5cbmZ1bmN0aW9uIGNvbm5lY3RUcmFja0h1YihodWJVUkwsIGNhbGxiYWNrLCBvcHRzKSB7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgb3B0cy5zYWx0ID0gdHJ1ZTtcblxuICAgIHRleHRYSFIoaHViVVJMLCBmdW5jdGlvbihodWJGaWxlLCBlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGVycik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG9rcyA9IGh1YkZpbGUuc3BsaXQoVEhVQl9QQVJTRV9SRUdFWFApO1xuICAgICAgICB2YXIgaHViID0gbmV3IFRyYWNrSHViKGh1YlVSTCk7XG4gICAgICAgIGlmIChvcHRzLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICBodWIuY3JlZGVudGlhbHMgPSBvcHRzLmNyZWRlbnRpYWxzO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgdG9rcy5sZW5ndGggLSAyOyBsICs9IDMpIHtcbiAgICAgICAgICAgIGh1Ylt0b2tzW2wrMV1dID0gdG9rc1tsKzJdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKGh1Yi5nZW5vbWVzRmlsZSkge1xuICAgICAgICAgICAgdmFyIGdlblVSTCA9IHJlbGF0aXZlVVJMKGh1YlVSTCwgaHViLmdlbm9tZXNGaWxlKTtcbiAgICAgICAgICAgIHRleHRYSFIoZ2VuVVJMLCBmdW5jdGlvbihnZW5GaWxlLCBlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBlcnIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBzdGFuemFzID0gZ2VuRmlsZS5zcGxpdChUSFVCX1NUQU5aQV9SRUdFWFApO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgc3Rhbnphcy5sZW5ndGg7ICsrcykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rcyA9IHN0YW56YXNbc10uc3BsaXQoVEhVQl9QQVJTRV9SRUdFWFApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3Byb3BzID0gbmV3IFRyYWNrSHViREIoaHViKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdwcm9wcy5jcmVkZW50aWFscyA9IG9wdHMuY3JlZGVudGlhbHM7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IHRva3MubGVuZ3RoIC0gMjsgbCArPSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncHJvcHNbdG9rc1tsKzFdXSA9IHRva3NbbCsyXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChncHJvcHMudHdvQml0UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3Byb3BzLnR3b0JpdFBhdGggPSByZWxhdGl2ZVVSTChnZW5VUkwsIGdwcm9wcy50d29CaXRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChncHJvcHMuZ2Vub21lICYmIGdwcm9wcy50cmFja0RiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncHJvcHMuYWJzVVJMID0gcmVsYXRpdmVVUkwoZ2VuVVJMLCBncHJvcHMudHJhY2tEYik7XG4gICAgICAgICAgICAgICAgICAgICAgICBodWIuZ2Vub21lc1tncHJvcHMuZ2Vub21lXSA9IGdwcm9wcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGh1Yik7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0sIG9wdHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ05vIGdlbm9tZXNGaWxlJyk7XG4gICAgICAgIH1cbiAgICB9LCBvcHRzKTtcbn1cblxuXG5UcmFja0h1YlRyYWNrLnByb3RvdHlwZS50b0RhbGxpYW5jZVNvdXJjZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzb3VyY2UgPSB7XG4gICAgICAgIG5hbWU6IHRoaXMuc2hvcnRMYWJlbCxcbiAgICAgICAgZGVzYzogdGhpcy5sb25nTGFiZWxcbiAgICB9O1xuICAgIGlmICh0aGlzLl9kYi5tYXBwaW5nKSB7XG4gICAgICAgIHNvdXJjZS5tYXBwaW5nID0gdGhpcy5fZGIubWFwcGluZztcbiAgICB9XG5cbiAgICB2YXIgcGVubmFudEljb24gPSB0aGlzLmdldCgncGVubmFudEljb24nKTtcbiAgICBpZiAocGVubmFudEljb24pIHtcbiAgICAgICAgdmFyIHB0b2tzID0gcGVubmFudEljb24uc3BsaXQoL1xccysvKTtcbiAgICAgICAgc291cmNlLnBlbm5hbnQgPSBUSFVCX1BFTk5BTlRfUFJFRklYICsgcHRva3NbMF07XG4gICAgfVxuXG4gICAgdmFyIHNlYXJjaFRyaXggPSB0aGlzLmdldCgnc2VhcmNoVHJpeCcpO1xuICAgIGlmIChzZWFyY2hUcml4KSB7XG4gICAgICAgIHNvdXJjZS50cml4VVJJID0gcmVsYXRpdmVVUkwodGhpcy5fZGIuYWJzVVJMLCBzZWFyY2hUcml4KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb250YWluZXIgPT0gJ211bHRpV2lnJykge1xuICAgICAgICBzb3VyY2UubWVyZ2UgPSAnY29uY2F0JztcbiAgICAgICAgc291cmNlLm92ZXJsYXkgPSBbXTtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbiB8fCBbXTtcbiAgICAgICAgc291cmNlLnN0eWxlID0gW107XG4gICAgICAgIHNvdXJjZS5ub0Rvd25zYW1wbGUgPSB0cnVlO1xuXG4gICAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGlsZHJlbi5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgICAgIHZhciBjaCA9IGNoaWxkcmVuW2NpXTtcbiAgICAgICAgICAgIHZhciBjcyA9IGNoLnRvRGFsbGlhbmNlU291cmNlKClcbiAgICAgICAgICAgIHNvdXJjZS5vdmVybGF5LnB1c2goY3MpO1xuXG4gICAgICAgICAgICBpZiAoY3Muc3R5bGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgY3Muc3R5bGUubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IGNzLnN0eWxlW3NpXTtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUubWV0aG9kID0gY2guc2hvcnRMYWJlbDsgIC8vIEZJWE1FXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFnZ3JlZ2F0ZSA9PSAndHJhbnNwYXJlbnRPdmVybGF5JylcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLnN0eWxlLkFMUEhBID0gMC41O1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2Uuc3R5bGUucHVzaChzdHlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb3VyY2U7ICAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0eXBlID0gdGhpcy50eXBlO1xuICAgICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgICAgIHZhciBwID0gdGhpcztcbiAgICAgICAgICAgIHdoaWxlIChwLl9wYXJlbnQgJiYgIXAudHlwZSkge1xuICAgICAgICAgICAgICAgIHAgPSBwLl9wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0eXBlID0gcC50eXBlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdHlwZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHR5cGVUb2tzID0gdHlwZS5zcGxpdCgvXFxzKy8pO1xuICAgICAgICBpZiAodHlwZVRva3NbMF0gPT0gJ2JpZ0JlZCcgJiYgdGhpcy5iaWdEYXRhVXJsKSB7XG4gICAgICAgICAgICB2YXIgYmVkVG9rZW5zID0gdHlwZVRva3NbMV18MFxuICAgICAgICAgICAgdmFyIGJlZFBsdXMgPSB0eXBlVG9rc1syXSA9PSAnKyc7XG5cbiAgICAgICAgICAgIHNvdXJjZS5id2dVUkkgPSByZWxhdGl2ZVVSTCh0aGlzLl9kYi5hYnNVUkwsIHRoaXMuYmlnRGF0YVVybCk7XG4gICAgICAgICAgICBzb3VyY2Uuc3R5bGUgPSB0aGlzLmJpZ2JlZFN0eWxlcygpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2RiLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLmNyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiZWRUb2tlbnMgPj0gMTIgJiYgYmVkUGx1cylcbiAgICAgICAgICAgICAgICBzb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVUb2tzWzBdID09ICdiaWdXaWcnICYmIHRoaXMuYmlnRGF0YVVybCkge1xuICAgICAgICAgICAgc291cmNlLmJ3Z1VSSSA9IHJlbGF0aXZlVVJMKHRoaXMuX2RiLmFic1VSTCwgdGhpcy5iaWdEYXRhVXJsKTtcbiAgICAgICAgICAgIHNvdXJjZS5zdHlsZSA9IHRoaXMuYmlnd2lnU3R5bGVzKCk7XG4gICAgICAgICAgICBzb3VyY2Uubm9Eb3duc2FtcGxlID0gdHJ1ZTsgICAgIC8vIEZJWE1FIHNlZW1zIGxpa2UgYSBibHVudCBpbnN0cnVtZW50Li4uXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLnlMaW5lT25PZmYgJiYgdGhpcy55TGluZU9uT2ZmID09ICdvbicpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UucXVhbnRMZWFwVGhyZXNob2xkID0gdGhpcy55TGluZU1hcmsgIT09IHVuZGVmaW5lZCA/ICgxLjAgKiB0aGlzLnlMaW5lTWFyaykgOiAwLjA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9kYi5jcmVkZW50aWFscykge1xuICAgICAgICAgICAgICAgIHNvdXJjZS5jcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZVRva3NbMF0gPT0gJ2JhbScgICYmIHRoaXMuYmlnRGF0YVVybCkge1xuICAgICAgICAgICAgc291cmNlLmJhbVVSSSA9IHJlbGF0aXZlVVJMKHRoaXMuX2RiLmFic1VSTCwgdGhpcy5iaWdEYXRhVXJsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9kYi5jcmVkZW50aWFscykge1xuICAgICAgICAgICAgICAgIHNvdXJjZS5jcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVUb2tzWzBdID09ICd2Y2ZUYWJpeCcgJiYgdGhpcy5iaWdEYXRhVXJsKSB7XG4gICAgICAgICAgICBzb3VyY2UudXJpID0gcmVsYXRpdmVVUkwodGhpcy5fZGIuYWJzVVJMLCB0aGlzLmJpZ0RhdGFVcmwpO1xuICAgICAgICAgICAgc291cmNlLnRpZXJfdHlwZSA9ICd0YWJpeCc7XG4gICAgICAgICAgICBzb3VyY2UucGF5bG9hZCA9ICd2Y2YnO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2RiLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLmNyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVW5zdXBwb3J0ZWQgJyArIHRoaXMudHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblRyYWNrSHViVHJhY2sucHJvdG90eXBlLmJpZ3dpZ1N0eWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0eXBlID0gdGhpcy50eXBlO1xuICAgIGlmICghdHlwZSkge1xuICAgICAgICB2YXIgcCA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChwLl9wYXJlbnQgJiYgIXAudHlwZSkge1xuICAgICAgICAgICAgcCA9IHAuX3BhcmVudDtcbiAgICAgICAgfVxuICAgICAgICB0eXBlID0gcC50eXBlO1xuICAgIH1cbiAgICBpZiAoIXR5cGUpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgdHlwZVRva3MgPSB0eXBlLnNwbGl0KC9cXHMrLyk7XG5cbiAgICB2YXIgbWluLCBtYXg7XG4gICAgaWYgKHR5cGVUb2tzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgIG1pbiA9IDEuMCAqIHR5cGVUb2tzWzFdO1xuICAgICAgICBtYXggPSAxLjAgKiB0eXBlVG9rc1syXTtcbiAgICB9XG5cbiAgICB2YXIgaGVpZ2h0O1xuICAgIGlmICh0aGlzLm1heEhlaWdodFBpeGVscykge1xuICAgICAgICB2YXIgbWhwVG9rcyA9IHRoaXMubWF4SGVpZ2h0UGl4ZWxzLnNwbGl0KC86Lyk7XG4gICAgICAgIGlmIChtaHBUb2tzLmxlbmd0aCA9PSAzKSB7XG4gICAgICAgICAgICBoZWlnaHQgPSBtaHBUb2tzWzFdIHwgMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtYXhIZWlnaHRQaXhlbHMgc2hvdWxkIGJlIG9mIHRoZSBmb3JtIG1heDpkZWZhdWx0Om1pbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHZhciBndHlwZSA9ICdiYXJzJztcbiAgICBpZiAodGhpcy5ncmFwaFR5cGVEZWZhdWx0KSB7XG4gICAgICAgIGd0eXBlID0gdGhpcy5ncmFwaFR5cGVEZWZhdWx0O1xuICAgIH1cbiAgICBcbiAgICB2YXIgY29sb3IgPSAnYmxhY2snO1xuICAgIHZhciBhbHRDb2xvciA9IG51bGw7XG4gICAgaWYgKHRoaXMuY29sb3IpIHtcbiAgICAgICAgY29sb3IgPSAncmdiKCcgKyB0aGlzLmNvbG9yICsgJyknO1xuICAgIH1cbiAgICBpZiAodGhpcy5hbHRDb2xvcikge1xuICAgICAgICBhbHRDb2xvciA9ICdyZ2IoJyArIHRoaXMuYWx0Q29sb3IgKyAnKSc7XG4gICAgfVxuICAgIFxuICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcbiAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICBpZiAoZ3R5cGUgPT0gJ3BvaW50cycpIHtcbiAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnUE9JTlQnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XG4gICAgfVxuXG4gICAgaWYgKGFsdENvbG9yKSB7XG4gICAgICAgIHdpZ1N0eWxlLkNPTE9SMSA9IGNvbG9yO1xuICAgICAgICB3aWdTdHlsZS5DT0xPUjIgPSBhbHRDb2xvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB3aWdTdHlsZS5CR0NPTE9SID0gY29sb3I7XG4gICAgfVxuICAgIHdpZ1N0eWxlLkhFSUdIVCA9IGhlaWdodCB8fCAzMDtcbiAgICBpZiAobWluIHx8IG1heCkge1xuICAgICAgICB3aWdTdHlsZS5NSU4gPSBtaW47XG4gICAgICAgIHdpZ1N0eWxlLk1BWCA9IG1heDtcbiAgICB9XG4gICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHdpZ1N0eWxlKTtcbiAgICByZXR1cm4gc3R5bGVzaGVldC5zdHlsZXM7XG59XG5cblRyYWNrSHViVHJhY2sucHJvdG90eXBlLmJpZ2JlZFN0eWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtUmdiID0gKCcnK3RoaXMuZ2V0KCdpdGVtUmdiJykpLnRvTG93ZXJDYXNlKCkgPT0gJ29uJztcbiAgICB2YXIgdmlzaWJpbGl0eSA9IHRoaXMuZ2V0KCd2aXNpYmlsaXR5JykgfHwgJ2Z1bGwnO1xuICAgIHZhciBjb2xvciA9IHRoaXMuZ2V0KCdjb2xvcicpO1xuICAgIGlmIChjb2xvcilcbiAgICAgICAgY29sb3IgPSAncmdiKCcgKyBjb2xvciArICcpJztcbiAgICBlbHNlIFxuICAgICAgICBjb2xvciA9ICdibHVlJztcbiAgICBcbiAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XG4gICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICB3aWdTdHlsZS5CR0NPTE9SID0gY29sb3I7XG4gICAgd2lnU3R5bGUuSEVJR0hUID0gKHZpc2liaWxpdHkgPT0gJ2Z1bGwnIHx8IHZpc2liaWxpdHkgPT0gJ3BhY2snKSA/IDEyIDogODtcbiAgICB3aWdTdHlsZS5CVU1QID0gKHZpc2liaWxpdHkgPT0gJ2Z1bGwnIHx8IHZpc2liaWxpdHkgPT0gJ3BhY2snKTtcbiAgICB3aWdTdHlsZS5MQUJFTCA9ICh2aXNpYmlsaXR5ID09ICdmdWxsJyB8fCB2aXNpYmlsaXR5ID09ICdwYWNrJyk7XG4gICAgd2lnU3R5bGUuWklOREVYID0gMjA7XG4gICAgaWYgKGl0ZW1SZ2IpXG4gICAgICAgIHdpZ1N0eWxlLkJHSVRFTSA9IHRydWU7XG5cbiAgICB2YXIgY2JzID0gdGhpcy5nZXQoJ2NvbG9yQnlTdHJhbmQnKTtcbiAgICBpZiAoY2JzKSB7XG4gICAgICAgIHZhciBjYnNUb2tzID0gY2JzLnNwbGl0KC9cXHMrLyk7XG4gICAgICAgIFxuICAgICAgICB2YXIgcGx1cyA9IHNoYWxsb3dDb3B5KHdpZ1N0eWxlKTtcbiAgICAgICAgcGx1cy5CR0NPTE9SID0gJ3JnYignICsgY2JzVG9rc1swXSArICcpJztcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdiaWdiZWQnLCBvcmllbnRhdGlvbjogJysnfSwgbnVsbCwgcGx1cyk7XG5cbiAgICAgICAgdmFyIG1pbnVzID0gc2hhbGxvd0NvcHkod2lnU3R5bGUpO1xuICAgICAgICBtaW51cy5CR0NPTE9SID0gJ3JnYignICsgY2JzVG9rc1sxXSArICcpJztcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdiaWdiZWQnLCBvcmllbnRhdGlvbjogJy0nfSwgbnVsbCwgbWludXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnYmlnYmVkJ30sIG51bGwsIHdpZ1N0eWxlKTtcbiAgICB9ICAgXG4gICAgXG4gICAgdmFyIHRsU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICB0bFN0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgdGxTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICBpZiAoaXRlbVJnYilcbiAgICAgICAgdGxTdHlsZS5CR0lURU0gPSB0cnVlO1xuICAgIHRsU3R5bGUuQkdDT0xPUiA9ICdyZWQnXG4gICAgdGxTdHlsZS5IRUlHSFQgPSAxMDtcbiAgICB0bFN0eWxlLkJVTVAgPSB0cnVlO1xuICAgIHRsU3R5bGUuWklOREVYID0gMjA7XG4gICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd0cmFuc2xhdGlvbid9LCBudWxsLCB0bFN0eWxlKTtcbiAgICBcbiAgICB2YXIgdHNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgIHRzU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICB0c1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgIHRzU3R5bGUuQkdDT0xPUiA9ICd3aGl0ZSc7XG4gICAgdHNTdHlsZS5IRUlHSFQgPSAxMDtcbiAgICB0c1N0eWxlLlpJTkRFWCA9IDEwO1xuICAgIHRzU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgdHNTdHlsZS5MQUJFTCA9IHRydWU7XG4gICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd0cmFuc2NyaXB0J30sIG51bGwsIHRzU3R5bGUpO1xuXG4gICAgcmV0dXJuIHN0eWxlc2hlZXQuc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBUSFVCX0NPTVBBUkUoZywgaCkge1xuICAgIGlmIChnLnByaW9yaXR5ICYmIGgucHJpb3JpdHkpIHtcbiAgICAgICAgcmV0dXJuICgxLjAgKiBnLnByaW9yaXR5KSAtICgxLjAgKiBoLnByaW9yaXR5KVxuICAgIH0gZWxzZSBpZiAoZy5wcmlvcml0eSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGgucHJpb3JpdHkpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBnLnNob3J0TGFiZWwubG9jYWxlQ29tcGFyZShoLnNob3J0TGFiZWwpO1xuICAgIH1cbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBjb25uZWN0VHJhY2tIdWI6IGNvbm5lY3RUcmFja0h1YixcbiAgICAgICAgVEhVQl9DT01QQVJFOiBUSFVCX0NPTVBBUkVcbiAgICB9O1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xuLy9cbi8vIHRpZXItYWN0aW9ucy5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm1lcmdlU2VsZWN0ZWRUaWVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgdmFyIHN0eWxlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgc3RpID0gMDsgc3RpIDwgdGhpcy5zZWxlY3RlZFRpZXJzLmxlbmd0aDsgKytzdGkpIHtcbiAgICAgICAgdmFyIHRpZXIgPSB0aGlzLnRpZXJzW3RoaXMuc2VsZWN0ZWRUaWVyc1tzdGldXTtcblx0ICAgIHNvdXJjZXMucHVzaChzaGFsbG93Q29weSh0aWVyLmRhc1NvdXJjZSkpO1xuICAgICAgICB2YXIgc3MgPSB0aWVyLnN0eWxlc2hlZXQuc3R5bGVzO1xuICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3MubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICB2YXIgc2ggPSBzc1tzaV07XG4gICAgICAgICAgICB2YXIgbnNoID0gc2hhbGxvd0NvcHkoc2gpO1xuICAgICAgICAgICAgbnNoLm1ldGhvZCA9IHRpZXIuZGFzU291cmNlLm5hbWUucmVwbGFjZSgvWygpKyo/XS9nLCAnXFxcXCQmJyk7XG4gICAgICAgICAgICBuc2guX21ldGhvZFJFID0gbnVsbDtcbiAgICAgICAgICAgIG5zaC5zdHlsZSA9IHNoYWxsb3dDb3B5KHNoLnN0eWxlKTtcbiAgICAgICAgICAgIGlmIChuc2guc3R5bGUuWklOREVYID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgbnNoLnN0eWxlLlpJTkRFWCA9IHN0aTtcblxuICAgICAgICAgICAgaWYgKHRpZXIuZm9yY2VNaW4pIHtcbiAgICAgICAgICAgICAgICBuc2guc3R5bGUuTUlOID0gdGllci5mb3JjZU1pbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aWVyLmZvcmNlTWF4KSB7XG4gICAgICAgICAgICAgICAgbnNoLnN0eWxlLk1BWCA9IHRpZXIuZm9yY2VNYXg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0eWxlcy5wdXNoKG5zaCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5hZGRUaWVyKFxuXHR7bmFtZTogJ01lcmdlZCcsXG5cdCBtZXJnZTogJ2NvbmNhdCcsXG5cdCBvdmVybGF5OiBzb3VyY2VzLFxuXHQgbm9Eb3duc2FtcGxlOiB0cnVlLFxuICAgICBzdHlsZTogc3R5bGVzfSk7XG5cbiAgICB0aGlzLnNldFNlbGVjdGVkVGllcih0aGlzLnRpZXJzLmxlbmd0aCAtIDEpO1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xuLy9cbi8vIHRpZXItZWRpdC5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG5cbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgaXNEYXNCb29sZWFuVHJ1ZSA9IGRhcy5pc0Rhc0Jvb2xlYW5UcnVlO1xuICAgIHZhciBpc0Rhc0Jvb2xlYW5Ob3RGYWxzZSA9IGRhcy5pc0Rhc0Jvb2xlYW5Ob3RGYWxzZTtcbiAgICB2YXIgY29weVN0eWxlc2hlZXQgPSBkYXMuY29weVN0eWxlc2hlZXQ7XG5cbiAgICB2YXIgY29sb3IgPSByZXF1aXJlKCcuL2NvbG9yJyk7XG4gICAgdmFyIGRhc0NvbG91ckZvck5hbWUgPSBjb2xvci5kYXNDb2xvdXJGb3JOYW1lO1xuXG4gICAgdmFyIHNvdXJjZURhdGFVUkkgPSByZXF1aXJlKCcuL3NvdXJjZWNvbXBhcmUnKS5zb3VyY2VEYXRhVVJJO1xufVxuXG52YXIgX19kYWxsaWFuY2Vfc21hbGxHbHlwaHMgPSB7XG4gICAgRE9UOiB0cnVlLCBcbiAgICBFWDogdHJ1ZSwgXG4gICAgU1RBUjogdHJ1ZSwgXG4gICAgU1FVQVJFOiB0cnVlLCBcbiAgICBDUk9TUzogdHJ1ZSwgXG4gICAgVFJJQU5HTEU6IHRydWUsIFxuICAgIFBMSU1TT0xMOiB0cnVlXG59O1xuXG5Ccm93c2VyLnByb3RvdHlwZS5vcGVuVGllclBhbmVsID0gZnVuY3Rpb24odGllcikge1xuICAgIHZhciBiID0gdGhpcztcblxuICAgIGlmICh0aGlzLnVpTW9kZSA9PT0gJ3RpZXInICYmIHRoaXMubWFuaXB1bGF0aW5nVGllciA9PT0gdGllcikge1xuICAgICAgICB0aGlzLmhpZGVUb29sUGFuZWwoKTtcbiAgICAgICAgdGhpcy5zZXRVaU1vZGUoJ25vbmUnKTtcbiAgICB9IGVsc2UgaWYgKCF0aWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgc2V0U3R5bGVDb2xvcnMgPSBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICAgICAgaWYgKHN0eWxlLkJHR1JBRClcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIGlmIChudW1Db2xvcnMgPT0gMSkge1xuICAgICAgICAgICAgICAgIGlmIChzdHlsZS5nbHlwaCA9PSAnTElORVBMT1QnIHx8IF9fZGFsbGlhbmNlX3NtYWxsR2x5cGhzW3N0eWxlLmdseXBoXSkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5GR0NPTE9SID0gdGllckNvbG9yRmllbGQudmFsdWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuQkdDT0xPUiA9IHRpZXJDb2xvckZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdHlsZS5DT0xPUjEgPSBzdHlsZS5DT0xPUjIgPSBzdHlsZS5DT0xPUjMgPSBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5DT0xPUjEgPSB0aWVyQ29sb3JGaWVsZC52YWx1ZTtcbiAgICAgICAgICAgICAgICBzdHlsZS5DT0xPUjIgPSB0aWVyQ29sb3JGaWVsZDIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKG51bUNvbG9ycyA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuQ09MT1IzID0gdGllckNvbG9yRmllbGQzLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLkNPTE9SMyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3R5bGUuX2dyYWRpZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHN0eWxlLl9wbHVzQ29sb3IgPSB0aWVyUGx1c0NvbG9yRmllbGQudmFsdWU7XG4gICAgICAgICAgICBzdHlsZS5fbWludXNDb2xvciA9IHRpZXJNaW51c0NvbG9yRmllbGQudmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbXV0YXRlU3R5bGVzaGVldCA9IGZ1bmN0aW9uKHZpc2l0b3IpIHtcbiAgICAgICAgICAgIHZhciBuc3MgPSBjb3B5U3R5bGVzaGVldCh0aWVyLnN0eWxlc2hlZXQpO1xuICAgICAgICAgICAgdmFyIHNzU2NhbGUgPSB0aWVyLmJyb3dzZXIuem9vbUZvckN1cnJlbnRTY2FsZSgpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5zcy5zdHlsZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2ggPSBuc3Muc3R5bGVzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChzaC56b29tICYmIHNoLnpvb20gIT0gc3NTY2FsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2aXNpdG9yKHNoLnN0eWxlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5zcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjaGFuZ2VDb2xvciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB0aWVyLm1lcmdlU3R5bGVzaGVldChtdXRhdGVTdHlsZXNoZWV0KHNldFN0eWxlQ29sb3JzKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubWFuaXB1bGF0aW5nVGllciA9IHRpZXI7XG5cbiAgICAgICAgdmFyIHRpZXJGb3JtID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICd0aWVyLWVkaXQnfSk7XG5cbiAgICAgICAgdmFyIGFib3V0QmFubmVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIFwiQWJvdXQgJ1wiICsgKHRpZXIuY29uZmlnLk5hbWUgfHwgdGllci5kYXNTb3VyY2UubmFtZSkgKyBcIidcIiwgbnVsbCxcbiAgICAgICAgICAgICAgICB7YmFja2dyb3VuZDogJ2dyYXknLCBwYWRkaW5nQm90dG9tOiAnNXB4JywgbWFyZ2luQm90dG9tOiAnNXB4JywgdGV4dEFsaWduOiAnY2VudGVyJ30pO1xuICAgICAgICB0aWVyRm9ybS5hcHBlbmRDaGlsZChhYm91dEJhbm5lcik7XG5cbiAgICAgICAgdmFyIGFib3V0ID0gbWFrZUVsZW1lbnQoJ2RpdicsIFxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCdwJywgdGllci5kYXNTb3VyY2UuZGVzYyldXG4gICAgICAgICk7XG4gICAgICAgIHZhciBhYm91dE5vdGVzID0gW107XG4gICAgICAgIHZhciBzZHVyaSA9IHNvdXJjZURhdGFVUkkodGllci5kYXNTb3VyY2UpO1xuICAgICAgICBpZiAoc2R1cmkgJiZcbiAgICAgICAgICAgIChzZHVyaS5pbmRleE9mKCdodHRwOi8vJykgPT0gMCB8fFxuICAgICAgICAgICAgIHNkdXJpLmluZGV4T2YoJ2h0dHBzOi8vJykgPT0gMCB8fFxuICAgICAgICAgICAgIHNkdXJpLmluZGV4T2YoJy8vJykgPT0gMCkgJiZcbiAgICAgICAgICAgIHNkdXJpICE9PSAnaHR0cHM6Ly93d3cuYmlvZGFsbGlhbmNlLm9yZy9tYWdpYy9ub191cmknKVxuICAgICAgICB7XG4gICAgICAgICAgICBhYm91dE5vdGVzLnB1c2gobWFrZUVsZW1lbnQoJ2xpJywgbWFrZUVsZW1lbnQoJ2EnLCAnKERvd25sb2FkIGRhdGEpJywge2hyZWY6IHNkdXJpfSkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aWVyLmRhc1NvdXJjZS5tYXBwaW5nKSB7XG4gICAgICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5jaGFpbnNbdGllci5kYXNTb3VyY2UubWFwcGluZ10uY29vcmRzO1xuICAgICAgICAgICAgYWJvdXROb3Rlcy5wdXNoKG1ha2VFbGVtZW50KCdsaScsICAnTWFwcGVkIGZyb20gJyArIGNvb3Jkcy5hdXRoICsgY29vcmRzLnZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhYm91dE5vdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGFib3V0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd1bCcsIGFib3V0Tm90ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGllckZvcm0uYXBwZW5kQ2hpbGQoYWJvdXQpO1xuXG4gICAgICAgIHZhciBzZW1hbnRpY0Jhbm5lciA9IG1ha2VFbGVtZW50KCdzcGFuJywgJyAoc3R5bGVzIGZvciBjdXJyZW50IHpvb20gbGV2ZWwpJywgbnVsbCwge2Rpc3BsYXk6ICdub25lJ30pO1xuICAgICAgICB2YXIgZWRpdEJhbm5lciA9IG1ha2VFbGVtZW50KCdkaXYnLCBbJ0VkaXQnLCBzZW1hbnRpY0Jhbm5lcl0sIG51bGwsXG4gICAgICAgICAgICAgIHtiYWNrZ3JvdW5kOiAnZ3JheScsIHBhZGRpbmdCb3R0b206ICc1cHgnLCBtYXJnaW5Cb3R0b206ICc1cHgnLCB0ZXh0QWxpZ246ICdjZW50ZXInfSk7XG4gICAgICAgIHRpZXJGb3JtLmFwcGVuZENoaWxkKGVkaXRCYW5uZXIpO1xuXG4gICAgICAgIHZhciB0aWVyTmFtZUZpZWxkID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0J30pO1xuICAgICAgICB2YXIgdGllclBpbm5lZFRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnLCBkaXNhYmxlZDogdGhpcy5kaXNhYmxlUGlubmluZ30pO1xuXG4gICAgICAgIHZhciBnbHlwaEZpZWxkID0gbWFrZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgICAgICBnbHlwaEZpZWxkLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnSGlzdG9ncmFtJywge3ZhbHVlOiAnSElTVE9HUkFNJ30pKTtcbiAgICAgICAgZ2x5cGhGaWVsZC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgJ0xpbmUgUGxvdCcsIHt2YWx1ZTogJ0xJTkVQTE9UJ30pKTtcbiAgICAgICAgZ2x5cGhGaWVsZC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgJ1JpYmJvbicsIHt2YWx1ZTogJ0dSQURJRU5UJ30pKTtcbiAgICAgICAgZ2x5cGhGaWVsZC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgJ1NjYXR0ZXInLCB7dmFsdWU6ICdTQ0FUVEVSJ30pKTtcblxuICAgICAgICB2YXIgdGllckNvbG9yRmllbGQgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnLCB2YWx1ZTogJyNkZDAwZGQnfSk7XG4gICAgICAgIHZhciB0aWVyQ29sb3JGaWVsZDIgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnLCB2YWx1ZTogJyNkZDAwZGQnfSk7XG4gICAgICAgIHZhciB0aWVyQ29sb3JGaWVsZDMgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnLCB2YWx1ZTogJyNkZDAwZGQnfSk7XG5cbiAgICAgICAgdmFyIHRpZXJQbHVzQ29sb3JGaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnI2ZmYTA3YSd9KTtcbiAgICAgICAgdmFyIHRpZXJNaW51c0NvbG9yRmllbGQgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnLCB2YWx1ZTogJyM4N2NlZmEnfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRpZXJDb2xvckZpZWxkLnR5cGUgPSB0aWVyQ29sb3JGaWVsZDIudHlwZSA9IHRpZXJDb2xvckZpZWxkMy50eXBlID0gJ2NvbG9yJztcbiAgICAgICAgICAgIHRpZXJQbHVzQ29sb3JGaWVsZC50eXBlID0gdGllck1pbnVzQ29sb3JGaWVsZC50eXBlID0gJ2NvbG9yJztcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gSUUgdGhyb3dzIGlmIGF0dGVtcHQgdG8gc2V0IHR5cGUgdG8gJ2NvbG9yJy5cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0aWVyQ29sb3JGaWVsZHMgPSBbdGllckNvbG9yRmllbGQsIHRpZXJDb2xvckZpZWxkMiwgdGllckNvbG9yRmllbGQzXTtcbiAgICAgICAgdmFyIGNvbG9yTGlzdFBsdXMgPSBtYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1wbHVzLWNpcmNsZSd9KTtcbiAgICAgICAgdmFyIGNvbG9yTGlzdE1pbnVzID0gbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtbWludXMtY2lyY2xlJ30pO1xuICAgICAgICB2YXIgbnVtQ29sb3JzID0gMTtcbiAgICAgICAgdmFyIGNvbG9yTGlzdEVsZW1lbnQgPSBtYWtlRWxlbWVudCgndGQnLCB0aWVyQ29sb3JGaWVsZHMpO1xuICAgICAgICB2YXIgc2V0TnVtQ29sb3JzID0gZnVuY3Rpb24obikge1xuICAgICAgICAgICAgbnVtQ29sb3JzID0gbjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSBcbiAgICAgICAgICAgICAgICB0aWVyQ29sb3JGaWVsZHNbaV0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gbjsgaSA8IHRpZXJDb2xvckZpZWxkcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICB0aWVyQ29sb3JGaWVsZHNbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgICBjb2xvckxpc3RQbHVzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGlmIChudW1Db2xvcnMgPCAzKSB7XG4gICAgICAgICAgICAgICAgc2V0TnVtQ29sb3JzKG51bUNvbG9ycyArIDEpO1xuICAgICAgICAgICAgICAgIGNoYW5nZUNvbG9yKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIGNvbG9yTGlzdE1pbnVzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGlmIChudW1Db2xvcnMgPiAxKSB7XG4gICAgICAgICAgICAgICAgc2V0TnVtQ29sb3JzKG51bUNvbG9ycyAtIDEpO1xuICAgICAgICAgICAgICAgIGNoYW5nZUNvbG9yKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgdmFyIHRpZXJNaW5GaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnMC4wJ30pO1xuICAgICAgICB2YXIgdGllck1heEZpZWxkID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0JywgdmFsdWU6ICcxMC4wJ30pO1xuICAgICAgICB2YXIgdGllck1pblRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnfSk7XG4gICAgICAgIHZhciB0aWVyTWF4VG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCd9KTtcblxuICAgICAgICB2YXIgcXVhbnRMZWFwVG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IHRpZXIucXVhbnRMZWFwVGhyZXNob2xkICE9PSB1bmRlZmluZWR9KTtcbiAgICAgICAgdmFyIHF1YW50TGVhcFRocmVzaEZpZWxkID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0JywgdmFsdWU6IHRpZXIucXVhbnRMZWFwVGhyZXNob2xkLCBkaXNhYmxlZDogIXF1YW50TGVhcFRvZ2dsZS5jaGVja2VkfSk7XG5cbiAgICAgICAgdmFyIHRpZXJIZWlnaHRGaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnNTAnfSk7XG5cbiAgICAgICAgdmFyIGJ1bXBUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94J30pO1xuICAgICAgICB2YXIgYnVtcExpbWl0ID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0J30pO1xuICAgICAgICB2YXIgbGFiZWxUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94J30pO1xuXG4gICAgICAgIHZhciBtYWluU3R5bGUgPSBudWxsO1xuICAgICAgICBpZiAodGllci5zdHlsZXNoZWV0LnN0eWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgcyA9IG1haW5TdHlsZSA9IHRpZXIuc3R5bGVzaGVldC5zdHlsZXNbMF0uc3R5bGU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aWVyLmNvbmZpZy5uYW1lID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICB0aWVyTmFtZUZpZWxkLnZhbHVlID0gdGllci5jb25maWcubmFtZTtcbiAgICAgICAgICAgIGVsc2UgXG4gICAgICAgICAgICAgICAgdGllck5hbWVGaWVsZC52YWx1ZSA9IHRpZXIuZGFzU291cmNlLm5hbWU7XG5cbiAgICAgICAgICAgIHRpZXJQaW5uZWRUb2dnbGUuY2hlY2tlZCA9IHRpZXIucGlubmVkO1xuXG4gICAgICAgICAgICBpZiAodGllci5mb3JjZUhlaWdodCkge1xuICAgICAgICAgICAgICAgIHRpZXJIZWlnaHRGaWVsZC52YWx1ZSA9ICcnICsgdGllci5mb3JjZUhlaWdodDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWFpblN0eWxlICYmIG1haW5TdHlsZS5IRUlHSFQpIHtcbiAgICAgICAgICAgICAgICB0aWVySGVpZ2h0RmllbGQudmFsdWUgPSAnJyArIG1haW5TdHlsZS5IRUlHSFQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGllci5xdWFudExlYXBUaHJlc2hvbGQgPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBxdWFudExlYXBUb2dnbGUuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcXVhbnRMZWFwVGhyZXNoRmllbGQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdChxdWFudExlYXBUaHJlc2hGaWVsZC52YWx1ZSkgIT0gdGllci5xdWFudExlYXBUaHJlc2hvbGQpXG4gICAgICAgICAgICAgICAgICAgIHF1YW50TGVhcFRocmVzaEZpZWxkLnZhbHVlID0gdGllci5xdWFudExlYXBUaHJlc2hvbGQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHF1YW50TGVhcFRvZ2dsZS5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcXVhbnRMZWFwVGhyZXNoRmllbGQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRpZXIuc3VidGllck1heCA9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIGJ1bXBMaW1pdC52YWx1ZSA9ICcnICsgdGllci5zdWJ0aWVyTWF4O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidW1wTGltaXQudmFsdWUgPSAnJyArICh0aWVyLmRhc1NvdXJjZS5zdWJ0aWVyTWF4IHx8IHRpZXIuYnJvd3Nlci5kZWZhdWx0U3VidGllck1heCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aWVyLnN0eWxlc2hlZXQuc3R5bGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGlzUXVhbnRpdGF0aXZlPWZhbHNlLCBpc1NpbXBsZVF1YW50aXRhdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBzc1NjYWxlID0gdGllci5icm93c2VyLnpvb21Gb3JDdXJyZW50U2NhbGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgYWN0aXZlU3R5bGVDb3VudCA9IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgdGllci5zdHlsZXNoZWV0LnN0eWxlcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNoID0gdGllci5zdHlsZXNoZWV0LnN0eWxlc1tzaV07ICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoLnpvb20gJiYgc2guem9vbSAhPSBzc1NjYWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICArK2FjdGl2ZVN0eWxlQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcyA9IHRpZXIuc3R5bGVzaGVldC5zdHlsZXNbc2ldLnN0eWxlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG1haW5TdHlsZSA9IHNzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoc3MuZ2x5cGggPT0gJ0xJTkVQTE9UJyB8fCBzcy5nbHlwaCA9PSAnSElTVE9HUkFNJyB8fCBzcy5nbHlwaCA9PSAnR1JBRElFTlQnIHx8IGlzRGFzQm9vbGVhblRydWUoc3MuU0NBVFRFUikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNRdWFudGl0YXRpdmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG1haW5TdHlsZSA9IHNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNRdWFudGl0YXRpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2VtYW50aWNCYW5uZXIuc3R5bGUuZGlzcGxheSA9IChhY3RpdmVTdHlsZUNvdW50ID09IHRpZXIuc3R5bGVzaGVldC5zdHlsZXMubGVuZ3RoKSA/ICdub25lJyA6ICdpbmxpbmUnO1xuXG4gICAgICAgICAgICAgICAgaXNTaW1wbGVRdWFudGl0YXRpdmUgPSBpc1F1YW50aXRhdGl2ZSAmJiBhY3RpdmVTdHlsZUNvdW50ID09IDE7XG4gICAgICAgICAgICAgICAgdmFyIGlzR3JhZGllbnQgPSBzLkNPTE9SMiB8fCBzLkJHR1JBRDtcblxuICAgICAgICAgICAgICAgIGlmIChpc1F1YW50aXRhdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBtaW5Sb3cuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xuICAgICAgICAgICAgICAgICAgICBtYXhSb3cuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xuICAgICAgICAgICAgICAgICAgICBidW1wUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWluUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIG1heFJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBidW1wUm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcbiAgICAgICAgICAgICAgICAgICAgYnVtcFRvZ2dsZS5jaGVja2VkID0gaXNEYXNCb29sZWFuVHJ1ZShtYWluU3R5bGUuQlVNUCk7XG4gICAgICAgICAgICAgICAgICAgIGJ1bXBMaW1pdC5kaXNhYmxlZCA9ICFpc0Rhc0Jvb2xlYW5UcnVlKG1haW5TdHlsZS5CVU1QKTtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxSb3cuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xuICAgICAgICAgICAgICAgICAgICBsYWJlbFRvZ2dsZS5jaGVja2VkID0gaXNEYXNCb29sZWFuVHJ1ZShtYWluU3R5bGUuTEFCRUwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpc1NpbXBsZVF1YW50aXRhdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZVJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZVJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBjb2xvclJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG51bUNvbG9ycyA9IDE7XG4gICAgICAgICAgICAgICAgaWYgKHMuQ09MT1IxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpZXJDb2xvckZpZWxkLnZhbHVlID0gZGFzQ29sb3VyRm9yTmFtZShzLkNPTE9SMSkudG9IZXhTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuQ09MT1IyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWVyQ29sb3JGaWVsZDIudmFsdWUgPSBkYXNDb2xvdXJGb3JOYW1lKHMuQ09MT1IyKS50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMuQ09MT1IzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGllckNvbG9yRmllbGQzLnZhbHVlID0gZGFzQ29sb3VyRm9yTmFtZShzLkNPTE9SMykudG9IZXhTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1Db2xvcnMgPSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1Db2xvcnMgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuZ2x5cGggPT0gJ0xJTkVQTE9UJyB8fCBzLmdseXBoID09ICdET1QnICYmIHMuRkdDT0xPUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGllckNvbG9yRmllbGQudmFsdWUgPSBkYXNDb2xvdXJGb3JOYW1lKHMuRkdDT0xPUikudG9IZXhTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzLkJHQ09MT1IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpZXJDb2xvckZpZWxkLnZhbHVlID0gZGFzQ29sb3VyRm9yTmFtZShzLkJHQ09MT1IpLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIHNldE51bUNvbG9ycyhudW1Db2xvcnMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHMuX3BsdXNDb2xvcilcbiAgICAgICAgICAgICAgICAgICAgdGllclBsdXNDb2xvckZpZWxkLnZhbHVlID0gZGFzQ29sb3VyRm9yTmFtZShzLl9wbHVzQ29sb3IpLnRvSGV4U3RyaW5nKCkgfHwgcy5fcGx1c0NvbG9yO1xuICAgICAgICAgICAgICAgIGlmIChzLl9taW51c0NvbG9yKVxuICAgICAgICAgICAgICAgICAgICB0aWVyTWludXNDb2xvckZpZWxkLnZhbHVlID0gZGFzQ29sb3VyRm9yTmFtZShzLl9taW51c0NvbG9yKS50b0hleFN0cmluZygpIHx8IHMuX21pbnVzQ29sb3I7XG4gICAgICAgICAgICAgICAgaWYgKGlzRGFzQm9vbGVhblRydWUocy5TQ0FUVEVSKSkge1xuICAgICAgICAgICAgICAgICAgICBnbHlwaEZpZWxkLnZhbHVlID0gJ1NDQVRURVInO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGdseXBoRmllbGQudmFsdWUgPSBzLmdseXBoO1xuICAgICAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgICAgICB2YXIgc2V0TWluVmFsdWUsIHNldE1heFZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChzLk1JTiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdChzLk1JTik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4oeCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRNaW5WYWx1ZSA9IHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGllci5mb3JjZU1pbkR5bmFtaWMgJiYgKHMuTUlOICE9PSB1bmRlZmluZWQgfHwgdGllci5mb3JjZU1pbiAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aWVyTWluVG9nZ2xlLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aWVyTWluRmllbGQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aWVyTWluVG9nZ2xlLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGllck1pbkZpZWxkLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocy5NQVggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQocy5NQVgpXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4oeCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRNYXhWYWx1ZSA9IHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGllci5mb3JjZU1heER5bmFtaWMgJiYgKHMuTUFYICE9PSB1bmRlZmluZWQgfHwgdGllci5mb3JjZU1heCAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aWVyTWF4VG9nZ2xlLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aWVyTWF4RmllbGQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aWVyTWF4VG9nZ2xlLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGllck1heEZpZWxkLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGllci5mb3JjZU1pbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWluVmFsdWUgPSB0aWVyLmZvcmNlTWluO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGllci5mb3JjZU1heCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWF4VmFsdWUgPSB0aWVyLmZvcmNlTWF4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHNldE1pblZhbHVlKSA9PSAnbnVtYmVyJyAmJiBzZXRNaW5WYWx1ZSAhPSBwYXJzZUZsb2F0KHRpZXJNaW5GaWVsZC52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGllck1pbkZpZWxkLnZhbHVlID0gc2V0TWluVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yoc2V0TWF4VmFsdWUpID09ICdudW1iZXInICYmIHNldE1heFZhbHVlICE9IHBhcnNlRmxvYXQodGllck1heEZpZWxkLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aWVyTWF4RmllbGQudmFsdWUgPSBzZXRNYXhWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VxU3R5bGUgPSBnZXRTZXFTdHlsZSh0aWVyLnN0eWxlc2hlZXQpO1xuICAgICAgICAgICAgICAgIGlmIChzZXFTdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXFNaXNtYXRjaFJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XG4gICAgICAgICAgICAgICAgICAgIHNlcU1pc21hdGNoVG9nZ2xlLmNoZWNrZWQgPSAoc2VxU3R5bGUuX19TRVFDT0xPUiA9PT0gJ21pc21hdGNoJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlcUluc2VydFJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XG4gICAgICAgICAgICAgICAgICAgIHNlcUluc2VydFRvZ2dsZS5jaGVja2VkID0gIGlzRGFzQm9vbGVhblRydWUoc2VxU3R5bGUuX19JTlNFUlRJT05TKTtcbiAgICAgICAgICAgICAgICAgICAgc2VxSWdub3JlUXVhbHNSb3cuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xuICAgICAgICAgICAgICAgICAgICBzZXFJZ25vcmVRdWFsc1RvZ2dsZS5jaGVja2VkID0gKHNlcVN0eWxlLl9fZGlzYWJsZVF1YWxzID09PSB1bmRlZmluZWQgfHwgc2VxU3R5bGUuX19kaXNhYmxlUXVhbHMgPT09IGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VxU3R5bGUuX19kaXNhYmxlUXVhbHMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcU1pc21hdGNoUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIHNlcUluc2VydFJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBzZXFJZ25vcmVRdWFsc1Jvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzZXFTdHlsZSAmJiBzZXFNaXNtYXRjaFRvZ2dsZS5jaGVja2VkICYmICFpc1NpbXBsZVF1YW50aXRhdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBwbHVzU3RyYW5kQ29sb3JSb3cuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xuICAgICAgICAgICAgICAgICAgICBtaW51c1N0cmFuZENvbG9yUm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwbHVzU3RyYW5kQ29sb3JSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgbWludXNTdHJhbmRDb2xvclJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzUXVhbnRpdGF0aXZlICYmIHRpZXIuYnJvd3Nlci5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ3F1YW50TGVhcCcpKVxuICAgICAgICAgICAgICAgIHF1YW50TGVhcFJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XG4gICAgICAgICAgICBlbHNlIFxuICAgICAgICAgICAgICAgIHF1YW50TGVhcFJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNlcU1pc21hdGNoVG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCd9KTtcbiAgICAgICAgdmFyIHNlcU1pc21hdGNoUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnSGlnaGxpZ2h0IG1pc21hdGNoZXMgJiBzdHJhbmRzJyksXG4gICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgc2VxTWlzbWF0Y2hUb2dnbGUpXSk7XG4gICAgICAgIHNlcU1pc21hdGNoVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB2YXIgbnNzID0gY29weVN0eWxlc2hlZXQodGllci5zdHlsZXNoZWV0KTtcbiAgICAgICAgICAgIHZhciBzZXFTdHlsZSA9IGdldFNlcVN0eWxlKG5zcyk7XG4gICAgICAgICAgICBzZXFTdHlsZS5fX1NFUUNPTE9SID0gc2VxTWlzbWF0Y2hUb2dnbGUuY2hlY2tlZCA/ICdtaXNtYXRjaCcgOiAnYmFzZSc7XG4gICAgICAgICAgICB0aWVyLm1lcmdlU3R5bGVzaGVldChuc3MpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgc2VxSW5zZXJ0VG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCd9KTtcbiAgICAgICAgdmFyIHNlcUluc2VydFJvdyA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ1Nob3cgaW5zZXJ0aW9ucycpLFxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIHNlcUluc2VydFRvZ2dsZSldKTtcbiAgICAgICAgc2VxSW5zZXJ0VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB2YXIgbnNzID0gY29weVN0eWxlc2hlZXQodGllci5zdHlsZXNoZWV0KTtcbiAgICAgICAgICAgIHZhciBzZXFTdHlsZSA9IGdldFNlcVN0eWxlKG5zcyk7XG4gICAgICAgICAgICBzZXFTdHlsZS5fX0lOU0VSVElPTlMgPSBzZXFJbnNlcnRUb2dnbGUuY2hlY2tlZCA/ICd5ZXMnIDogJ25vJztcbiAgICAgICAgICAgIHRpZXIubWVyZ2VTdHlsZXNoZWV0KG5zcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBzZXFJZ25vcmVRdWFsc1RvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnfSk7XG4gICAgICAgIHZhciBzZXFJZ25vcmVRdWFsc1JvdyA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ1JlZmxlY3QgYmFzZSBxdWFsaXR5IGFzIGJhc2UgY29sb3IgdHJhbnNwYXJlbmN5JyksXG4gICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgc2VxSWdub3JlUXVhbHNUb2dnbGUpXSk7XG4gICAgICAgIHNlcUlnbm9yZVF1YWxzVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB2YXIgbnNzID0gY29weVN0eWxlc2hlZXQodGllci5zdHlsZXNoZWV0KTtcbiAgICAgICAgICAgIHZhciBzZXFTdHlsZSA9IGdldFNlcVN0eWxlKG5zcyk7XG4gICAgICAgICAgICBzZXFTdHlsZS5fX2Rpc2FibGVRdWFscyA9ICFzZXFJZ25vcmVRdWFsc1RvZ2dsZS5jaGVja2VkO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2VxU3R5bGUuX19kaXNhYmxlUXVhbHMpO1xuICAgICAgICAgICAgdGllci5tZXJnZVN0eWxlc2hlZXQobnNzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHN0eWxlUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ1N0eWxlJyksXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGdseXBoRmllbGQpXSk7XG4gICAgICAgIHZhciBjb2xvclJvdyA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsIFsnQ29sb3VyKHMpJywgY29sb3JMaXN0UGx1cywgY29sb3JMaXN0TWludXNdKSxcbiAgICAgICAgICAgICAgICAgY29sb3JMaXN0RWxlbWVudF0pO1xuICAgICAgICB2YXIgcGx1c1N0cmFuZENvbG9yUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ1BsdXMgU3RyYW5kIENvbG9yJyksXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIHRpZXJQbHVzQ29sb3JGaWVsZCldKTtcbiAgICAgICAgdmFyIG1pbnVzU3RyYW5kQ29sb3JSb3cgPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnTWludXMgU3RyYW5kIENvbG9yJyksXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIHRpZXJNaW51c0NvbG9yRmllbGQpXSk7XG4gICAgICAgIHZhciBtaW5Sb3cgPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnTWluIHZhbHVlJyksXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIFt0aWVyTWluVG9nZ2xlLCAnICcsIHRpZXJNaW5GaWVsZF0pXSk7XG4gICAgICAgIHZhciBtYXhSb3cgPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnTWF4IHZhbHVlJyksXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIFt0aWVyTWF4VG9nZ2xlLCAnICcsIHRpZXJNYXhGaWVsZF0pXSk7XG4gICAgICAgIHZhciBxdWFudExlYXBSb3cgPSBcbiAgICAgICAgICAgICBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnVGhyZXNob2xkIGxlYXA6JyksXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIFtxdWFudExlYXBUb2dnbGUsICcgJywgcXVhbnRMZWFwVGhyZXNoRmllbGRdKV0pO1xuICAgICAgICB2YXIgYnVtcFJvdyA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdCdW1wIG92ZXJsYXBzJyksXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIFtidW1wVG9nZ2xlLCAnIGxpbWl0OiAnLCBidW1wTGltaXRdKV0pO1xuICAgICAgICB2YXIgbGFiZWxSb3cgPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnTGFiZWwgZmVhdHVyZXMnKSxcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgbGFiZWxUb2dnbGUpXSk7XG5cblxuICAgICAgICB2YXIgdGllclRhYmxlID0gbWFrZUVsZW1lbnQoJ3RhYmxlJyxcbiAgICAgICAgICAgIFttYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnTmFtZScsIHt9LCB7d2lkdGg6ICcxNTBweCcsIHRleHRBbGlnbjogJ3JpZ2h0J30pLFxuICAgICAgICAgICAgICAgICB0aWVyTmFtZUZpZWxkXSksXG5cbiAgICAgICAgICAgICBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnUGluIHRvIHRvcCcpLFxuICAgICAgICAgICAgICAgICB0aWVyUGlubmVkVG9nZ2xlXSksXG5cbiAgICAgICAgICAgICBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnSGVpZ2h0JyksXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIHRpZXJIZWlnaHRGaWVsZCldKSxcblxuICAgICAgICAgICAgc3R5bGVSb3csXG4gICAgICAgICAgICBjb2xvclJvdyxcbiAgICAgICAgICAgIHBsdXNTdHJhbmRDb2xvclJvdyxcbiAgICAgICAgICAgIG1pbnVzU3RyYW5kQ29sb3JSb3csXG4gICAgICAgICAgICBtaW5Sb3csXG4gICAgICAgICAgICBtYXhSb3csXG4gICAgICAgICAgICBxdWFudExlYXBSb3csXG4gICAgICAgICAgICBidW1wUm93LFxuICAgICAgICAgICAgbGFiZWxSb3csXG4gICAgICAgICAgICBzZXFNaXNtYXRjaFJvdyxcbiAgICAgICAgICAgIHNlcUluc2VydFJvdyxcbiAgICAgICAgICAgIHNlcUlnbm9yZVF1YWxzUm93XG4gICAgICAgICAgICAgXSk7XG5cblxuICAgICAgICByZWZyZXNoKCk7XG5cbiAgICAgICAgdGllckZvcm0uYXBwZW5kQ2hpbGQodGllclRhYmxlKTtcblxuICAgICAgICB2YXIgcmVzZXRCdXR0b24gPSBtYWtlRWxlbWVudCgnYnV0dG9uJywgJ1Jlc2V0IHRyYWNrJywge2NsYXNzTmFtZTogJ2J0bid9LCB7bWFyZ2luTGVmdDogJ2F1dG8nLCBtYXJnaW5SaWdodDogJ2F1dG8nLCBkaXNwbGF5OiAnYmxvY2snfSk7XG4gICAgICAgIHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHRpZXIuc2V0Q29uZmlnKHt9KTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB0aWVyRm9ybS5hcHBlbmRDaGlsZChyZXNldEJ1dHRvbik7XG5cbiAgICAgICAgdGllck5hbWVGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB0aWVyLm1lcmdlQ29uZmlnKHtuYW1lOiB0aWVyTmFtZUZpZWxkLnZhbHVlfSk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICB0aWVyUGlubmVkVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB0aWVyLm1lcmdlQ29uZmlnKHtwaW5uZWQ6IHRpZXJQaW5uZWRUb2dnbGUuY2hlY2tlZH0pO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IHRpZXJDb2xvckZpZWxkcy5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgICAgIHRpZXJDb2xvckZpZWxkc1tjaV0uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2hhbmdlQ29sb3IsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRpZXJQbHVzQ29sb3JGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjaGFuZ2VDb2xvciwgZmFsc2UpO1xuICAgICAgICB0aWVyTWludXNDb2xvckZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUNvbG9yLCBmYWxzZSk7XG5cbiAgICAgICAgZ2x5cGhGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdmFyIG5zcyA9IG11dGF0ZVN0eWxlc2hlZXQoZnVuY3Rpb24odHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2x5cGhGaWVsZC52YWx1ZSA9PT0gJ1NDQVRURVInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRzLlNDQVRURVIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0cy5nbHlwaCA9ICdET1QnO1xuICAgICAgICAgICAgICAgICAgICB0cy5TSVpFID0gJzMnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRzLmdseXBoID0gZ2x5cGhGaWVsZC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdHMuU0NBVFRFUiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0U3R5bGVDb2xvcnModHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aWVyLm1lcmdlU3R5bGVzaGVldChuc3MpO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgdGllck1pblRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdmFyIGNvbmYgPSB7Zm9yY2VNaW5EeW5hbWljOiAhdGllck1pblRvZ2dsZS5jaGVja2VkfTtcbiAgICAgICAgICAgIHRpZXJNaW5GaWVsZC5kaXNhYmxlZCA9ICF0aWVyTWluVG9nZ2xlLmNoZWNrZWQ7XG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodGllck1pbkZpZWxkLnZhbHVlKTtcbiAgICAgICAgICAgIGlmICh0aWVyTWluVG9nZ2xlLmNoZWNrZWQgJiYgdHlwZW9mKHgpID09ICdudW1iZXInICYmICFpc05hTih4KSlcbiAgICAgICAgICAgICAgICBjb25mLmZvcmNlTWluID0gcGFyc2VGbG9hdCh4KTtcbiAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoY29uZik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aWVyTWluRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KHRpZXJNaW5GaWVsZC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mKHgpID09ICdudW1iZXInICYmICFpc05hTih4KSlcbiAgICAgICAgICAgICAgICB0aWVyLm1lcmdlQ29uZmlnKHtmb3JjZU1pbjogeH0pO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgdGllck1heFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdmFyIGNvbmYgPSB7Zm9yY2VNYXhEeW5hbWljOiAhdGllck1heFRvZ2dsZS5jaGVja2VkfTtcbiAgICAgICAgICAgIHRpZXJNYXhGaWVsZC5kaXNhYmxlZCA9ICF0aWVyTWF4VG9nZ2xlLmNoZWNrZWQ7XG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodGllck1heEZpZWxkLnZhbHVlKTtcbiAgICAgICAgICAgIGlmICh0aWVyTWF4VG9nZ2xlLmNoZWNrZWQgJiYgdHlwZW9mKHgpID09ICdudW1iZXInICYmICFpc05hTih4KSlcbiAgICAgICAgICAgICAgICBjb25mLmZvcmNlTWF4ID0gcGFyc2VGbG9hdCh4KTtcbiAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoY29uZik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aWVyTWF4RmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KHRpZXJNYXhGaWVsZC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mKHgpID09ICdudW1iZXInICYmICFpc05hTih4KSlcbiAgICAgICAgICAgICAgICB0aWVyLm1lcmdlQ29uZmlnKHtmb3JjZU1heDogeH0pO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgdGllckhlaWdodEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdCh0aWVySGVpZ2h0RmllbGQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZih4KSA9PSAnbnVtYmVyJyAmJiAhaXNOYU4oeCkpXG4gICAgICAgICAgICAgICAgdGllci5tZXJnZUNvbmZpZyh7aGVpZ2h0OiBNYXRoLm1pbig1MDAsIHh8MCl9KTtcbiAgICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAgIHZhciB1cGRhdGVRdWFudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcXVhbnRMZWFwVGhyZXNoRmllbGQuZGlzYWJsZWQgPSAhcXVhbnRMZWFwVG9nZ2xlLmNoZWNrZWQ7XG4gICAgICAgICAgICBpZiAocXVhbnRMZWFwVG9nZ2xlLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQocXVhbnRMZWFwVGhyZXNoRmllbGQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoeCkgPT0gJ251bWJlcicgJiYgIWlzTmFOKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoe3F1YW50TGVhcFRocmVzaG9sZDogcGFyc2VGbG9hdChxdWFudExlYXBUaHJlc2hGaWVsZC52YWx1ZSl9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoe3F1YW50TGVhcFRocmVzaG9sZDogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1YW50TGVhcFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdXBkYXRlUXVhbnQoKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICBxdWFudExlYXBUaHJlc2hGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB1cGRhdGVRdWFudCgpO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgbGFiZWxUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHZhciBuc3MgPSBtdXRhdGVTdHlsZXNoZWV0KGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuTEFCRUwgPSBsYWJlbFRvZ2dsZS5jaGVja2VkID8gJ3llcycgOiAnbm8nO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aWVyLm1lcmdlU3R5bGVzaGVldChuc3MpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIGJ1bXBUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHZhciBuc3MgPSBtdXRhdGVTdHlsZXNoZWV0KGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuQlVNUCA9IGJ1bXBUb2dnbGUuY2hlY2tlZCA/ICd5ZXMnIDogJ25vJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGllci5tZXJnZVN0eWxlc2hlZXQobnNzKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICBidW1wTGltaXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdmFyIHggPSBwYXJzZUludChidW1wTGltaXQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZih4KSA9PSAnbnVtYmVyJyAmJiB4ID4gMCkge1xuICAgICAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoe3N1YnRpZXJNYXg6IHh9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZmFsc2UpO1xuXG5cbiAgICAgICAgdGhpcy5zaG93VG9vbFBhbmVsKHRpZXJGb3JtKTtcbiAgICAgICAgdGhpcy5zZXRVaU1vZGUoJ3RpZXInKTtcblxuICAgICAgICB0aWVyLmFkZFRpZXJMaXN0ZW5lcihyZWZyZXNoKTtcblxuICAgICAgICB2YXIgY3VycmVudFNjYWxlID0gdGllci5icm93c2VyLnNjYWxlO1xuICAgICAgICB0aWVyLmJyb3dzZXIuYWRkVmlld0xpc3RlbmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRpZXIuYnJvd3Nlci5zY2FsZSAhPSBjdXJyZW50U2NhbGUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50U2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XG4gICAgICAgICAgICAgICAgcmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFNlcVN0eWxlKHN0eWxlc2hlZXQpIHtcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3R5bGVzaGVldC5zdHlsZXMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgIHZhciBzcyA9IHN0eWxlc2hlZXQuc3R5bGVzW3NpXS5zdHlsZTtcbiAgICAgICAgaWYgKHNzLmdseXBoID09PSAnX19TRVFVRU5DRScpIHtcbiAgICAgICAgICAgIHJldHVybiBzcztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIHRpZXIuanM6ICh0cnkpIHRvIGVuY2Fwc3VsYXRlIHRoZSBmdW5jdGlvbmFsaXR5IG9mIGEgYnJvd3NlciB0aWVyLlxuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBtYWtlRWxlbWVudCA9IHV0aWxzLm1ha2VFbGVtZW50O1xuICAgIHZhciByZW1vdmVDaGlsZHJlbiA9IHV0aWxzLnJlbW92ZUNoaWxkcmVuO1xuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xuICAgIHZhciBwdXNobmV3ID0gdXRpbHMucHVzaG5ldztcbiAgICB2YXIgbWluaUpTT05pZnkgPSB1dGlscy5taW5pSlNPTmlmeTtcbiAgICB2YXIgYXJyYXlJbmRleE9mID0gdXRpbHMuYXJyYXlJbmRleE9mO1xuXG4gICAgdmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XG4gICAgdmFyIERBU1N0eWxlc2hlZXQgPSBkYXMuREFTU3R5bGVzaGVldDtcbiAgICB2YXIgREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XG5cbiAgICB2YXIgc2hhMSA9IHJlcXVpcmUoJy4vc2hhMScpO1xuICAgIHZhciBiNjRfc2hhMSA9IHNoYTEuYjY0X3NoYTE7XG5cbiAgICB2YXIgc3R5bGUgPSByZXF1aXJlKCcuL3N0eWxlJyk7XG4gICAgdmFyIFN0eWxlRmlsdGVyID0gc3R5bGUuU3R5bGVGaWx0ZXI7XG4gICAgdmFyIFN0eWxlRmlsdGVyU2V0ID0gc3R5bGUuU3R5bGVGaWx0ZXJTZXQ7XG5cbiAgICB2YXIgc2MgPSByZXF1aXJlKCcuL3NvdXJjZWNvbXBhcmUnKTtcbiAgICB2YXIgc291cmNlRGF0YVVSSSA9IHNjLnNvdXJjZURhdGFVUkk7XG5cbiAgICB2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcblxuICAgIHZhciBzb3J0RmVhdHVyZXMgPSByZXF1aXJlKCcuL2ZlYXR1cmVzJykuc29ydEZlYXR1cmVzO1xufVxuXG52YXIgX190aWVyX2lkU2VlZCA9IDA7XG5cbmZ1bmN0aW9uIERhc1RpZXIoYnJvd3Nlciwgc291cmNlLCBjb25maWcsIGJhY2tncm91bmQpXG57XG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgfHwge307XG4gICAgdGhpcy5pZCA9ICd0aWVyJyArICgrK19fdGllcl9pZFNlZWQpO1xuICAgIHRoaXMuYnJvd3NlciA9IGJyb3dzZXI7XG4gICAgdGhpcy5kYXNTb3VyY2UgPSBzaGFsbG93Q29weShzb3VyY2UpO1xuICAgIHRoaXMuYmFja2dyb3VuZCA9IGJhY2tncm91bmQ7XG5cbiAgICB0aGlzLnZpZXdwb3J0ID0gbWFrZUVsZW1lbnQoJ2NhbnZhcycsIG51bGwsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7d2lkdGg6ICcnICsgKCh0aGlzLmJyb3dzZXIuZmVhdHVyZVBhbmVsV2lkdGh8MCkgKyAyMDAwKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiMzBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3ZpZXdwb3J0XzEyXzUnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Bvc2l0aW9uOiAnaW5saW5lLWJsb2NrJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogJzBweCcsIGJvcmRlcjogJzBweCd9KTtcbiAgICB0aGlzLnZpZXdwb3J0SG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIHRoaXMudmlld3BvcnQsIHtjbGFzc05hbWU6ICd2aWV3cG9ydC1ob2xkZXJfMTJfNSd9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2JhY2tncm91bmQ6IGJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICcwcHgnLCBtYXJnaW46ICcwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAnMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICctMTAwMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogJzIwMHB4J30pO1xuICAgIHRoaXMub3ZlcmxheSA9IG1ha2VFbGVtZW50KCdjYW52YXMnLCBudWxsLFxuICAgICAgICAge3dpZHRoOiArICgodGhpcy5icm93c2VyLmZlYXR1cmVQYW5lbFdpZHRofDApKSwgXG4gICAgICAgICAgaGVpZ2h0OiBcIjMwXCIsXG4gICAgICAgICAgY2xhc3NOYW1lOiAndmlld3BvcnQtb3ZlcmxheSd9KTtcblxuICAgIHRoaXMubm90aWZpZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgJycsIHtjbGFzc05hbWU6ICdub3RpZmllcid9KTtcbiAgICB0aGlzLm5vdGlmaWVySG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIHRoaXMubm90aWZpZXIsIHtjbGFzc05hbWU6ICdub3RpZmllci1ob2xkZXInfSk7XG4gICAgdGhpcy5xdWFudE92ZXJsYXkgPSBtYWtlRWxlbWVudChcbiAgICAgICAgJ2NhbnZhcycsIG51bGwsIFxuICAgICAgICB7d2lkdGg6ICc1MCcsIGhlaWdodDogXCI1NlwiLFxuICAgICAgICAgY2xhc3NOYW1lOiAncXVhbnQtb3ZlcmxheSd9KTtcblxuICAgIHRoaXMucmVtb3ZlQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtdGltZXMnfSk7XG4gICAgdGhpcy5idW1wQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtcGx1cy1jaXJjbGUnfSk7XG4gICAgdGhpcy5sb2FkZXJCdXR0b24gPSBicm93c2VyLm1ha2VMb2FkZXIoMTYpO1xuICAgIHRoaXMubG9hZGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5pbmZvRWxlbWVudCA9IG1ha2VFbGVtZW50KCdkaXYnLCB0aGlzLmRhc1NvdXJjZS5kZXNjLCB7Y2xhc3NOYW1lOiAndHJhY2stbGFiZWwtaW5mbyd9KTtcbiAgICB0aGlzLm5hbWVCdXR0b24gPSBtYWtlRWxlbWVudCgnZGl2JywgW10sIHtjbGFzc05hbWU6ICd0aWVyLXRhYid9KTtcbiAgICB0aGlzLm5hbWVCdXR0b24uYXBwZW5kQ2hpbGQodGhpcy5yZW1vdmVCdXR0b24pO1xuICAgIGlmIChzb3VyY2UucGVubmFudCkge1xuICAgICAgICB0aGlzLm5hbWVCdXR0b24uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2ltZycsIG51bGwsIHtzcmM6IHNvdXJjZS5wZW5uYW50LCB3aWR0aDogJzE2JywgaGVpZ2h0OiAnMTYnfSkpXG4gICAgfSBlbHNlIGlmIChzb3VyY2UubWFwcGluZykge1xuICAgICAgICB2YXIgdmVyc2lvbiA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmJyb3dzZXIuY2hhaW5zW3NvdXJjZS5tYXBwaW5nXSlcbiAgICAgICAgICAgIHZlcnNpb24gPSB0aGlzLmJyb3dzZXIuY2hhaW5zW3NvdXJjZS5tYXBwaW5nXS5jb29yZHMudmVyc2lvbjtcbiAgICAgICAgaWYgKHZlcnNpb24pXG4gICAgICAgICAgICB0aGlzLm5hbWVCdXR0b24uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3NwYW4nLCAnJyArIHZlcnNpb24sIG51bGwsIHtmb250U2l6ZTogJzhwdCcsIGJhY2tncm91bmQ6ICdibGFjaycsIGNvbG9yOiAnd2hpdGUnLCBwYWRkaW5nTGVmdDogJzNweCcsIHBhZGRpbmdSaWdodDogJzNweCcsIHBhZGRpbmdUb3A6ICcxcHgnLCBwYWRkaW5nQm90dG9tOiAnMXB4JywgbWFyZ2luTGVmdDogJzJweCcsIGJvcmRlclJhZGl1czogJzEwcHgnfSkpO1xuICAgIH1cbiAgICB0aGlzLm5hbWVFbGVtZW50ID0gbWFrZUVsZW1lbnQoJ3NwYW4nLCBzb3VyY2UubmFtZSk7XG4gICAgdGhpcy5uYW1lQnV0dG9uLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdzcGFuJywgW3RoaXMubmFtZUVsZW1lbnQsIHRoaXMuaW5mb0VsZW1lbnRdLCB7Y2xhc3NOYW1lOiAndHJhY2stbmFtZS1ob2xkZXInfSkpO1xuICAgIHRoaXMubmFtZUJ1dHRvbi5hcHBlbmRDaGlsZCh0aGlzLmJ1bXBCdXR0b24pO1xuICAgIHRoaXMubmFtZUJ1dHRvbi5hcHBlbmRDaGlsZCh0aGlzLmxvYWRlckJ1dHRvbik7XG5cbiAgICB0aGlzLmxhYmVsID0gbWFrZUVsZW1lbnQoJ3NwYW4nLFxuICAgICAgIFt0aGlzLm5hbWVCdXR0b25dLFxuICAgICAgIHtjbGFzc05hbWU6ICdidG4tZ3JvdXAgdHJhY2stbGFiZWwnfSk7XG5cbiAgICB2YXIgY2xhc3NlcyA9ICd0aWVyJyArIChzb3VyY2UuY2xhc3NOYW1lID8gJyAnICsgc291cmNlLmNsYXNzTmFtZSA6ICcnKTtcbiAgICB0aGlzLnJvdyA9IG1ha2VFbGVtZW50KCdkaXYnLCBbdGhpcy52aWV3cG9ydEhvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vdmVybGF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1YW50T3ZlcmxheV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NsYXNzTmFtZTogY2xhc3Nlc30pO1xuXG4gICAgaWYgKCFiYWNrZ3JvdW5kKSB7XG4gICAgICAgIHRoaXMucm93LnN0eWxlLmJhY2tncm91bmQgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgaWYgKCFicm93c2VyLm5vRGVmYXVsdExhYmVscylcbiAgICAgICAgdGhpcy5yb3cuYXBwZW5kQ2hpbGQodGhpcy5sYWJlbCk7XG4gICAgdGhpcy5yb3cuYXBwZW5kQ2hpbGQodGhpcy5ub3RpZmllckhvbGRlcik7XG4gICAgXG4gICAgdGhpcy5sYXlvdXRIZWlnaHQgPSAyNTtcbiAgICB0aGlzLmJ1bXBlZCA9IHRydWU7XG4gICAgdGhpcy5zdHlsZUlkU2VlZCA9IDA7XG4gICAgaWYgKHNvdXJjZS5xdWFudExlYXBUaHJlc2hvbGQpIHtcbiAgICAgICAgdGhpcy5xdWFudExlYXBUaHJlc2hvbGQgPSBzb3VyY2UucXVhbnRMZWFwVGhyZXNob2xkO1xuICAgIH1cbiAgICBpZiAodGhpcy5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3Vwcykge1xuICAgICAgICB0aGlzLmJ1bXBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmxheW91dFdhc0RvbmUgPSBmYWxzZTtcblxuICAgIGlmIChzb3VyY2UuZmVhdHVyZUluZm9QbHVnaW4pIHtcbiAgICAgICAgdGhpcy5hZGRGZWF0dXJlSW5mb1BsdWdpbihzb3VyY2UuZmVhdHVyZUluZm9QbHVnaW4pO1xuICAgIH1cblxuICAgIHRoaXMuaW5pdFNvdXJjZXMoKTtcblxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgXG5cbiAgICBpZiAodGhpcy5mZWF0dXJlU291cmNlICYmIHRoaXMuZmVhdHVyZVNvdXJjZS5hZGRSZWFkaW5lc3NMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVyID0gZnVuY3Rpb24ocmVhZHkpIHtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeShyZWFkeSwgLTEpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZlYXR1cmVTb3VyY2UuYWRkUmVhZGluZXNzTGlzdGVuZXIodGhpcy5yZWFkaW5lc3NMaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZmVhdHVyZVNvdXJjZSAmJiB0aGlzLmZlYXR1cmVTb3VyY2UuYWRkQWN0aXZpdHlMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihidXN5KSB7XG4gICAgICAgICAgICBpZiAoYnVzeSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzQi5sb2FkZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzQi5sb2FkZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNCLmJyb3dzZXIucGluZ0FjdGl2aXR5KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmVhdHVyZVNvdXJjZS5hZGRBY3Rpdml0eUxpc3RlbmVyKHRoaXMuYWN0aXZpdHlMaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLmZlYXR1cmVzTG9hZGVkTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5kZXN0cm95TGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5maXJzdFJlbmRlclByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB0aGlzLl9yZXNvbHZlRmlyc3RSZW5kZXJQcm9taXNlID0gcmVzb2x2ZSk7XG5cbiAgICBpZiAodGhpcy5mZWF0dXJlU291cmNlICYmIHRoaXMuZmVhdHVyZVNvdXJjZS5nZXREZWZhdWx0RklQcyAmJiAhc291cmNlLm5vU291cmNlRmVhdHVyZUluZm8pIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlU291cmNlLmdldERlZmF1bHRGSVBzKGZ1bmN0aW9uKGZpcCkge1xuICAgICAgICAgICAgaWYgKGZpcClcbiAgICAgICAgICAgICAgICB0aGlzQi5hZGRGZWF0dXJlSW5mb1BsdWdpbihmaXApO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgdGhpcy5kZXN0cm95TGlzdGVuZXJzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBoYW5kbGVyKHRoaXMpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZmVhdHVyZVNvdXJjZS5yZW1vdmVSZWFkaW5lc3NMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmZlYXR1cmVTb3VyY2UucmVtb3ZlUmVhZGluZXNzTGlzdGVuZXIodGhpcy5yZWFkaW5lc3NMaXN0ZW5lcik7XG4gICAgfVxuICAgIGlmICh0aGlzLmZlYXR1cmVTb3VyY2UucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmZlYXR1cmVTb3VyY2UucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lcih0aGlzLmFjdGl2aXR5TGlzdGVuZXIpO1xuICAgIH1cbn1cblxuRGFzVGllci5wcm90b3R5cGUuc2V0QmFja2dyb3VuZCA9IGZ1bmN0aW9uKGIpIHtcbiAgICB0aGlzLmJhY2tncm91bmQgPSBiO1xuICAgIHRoaXMudmlld3BvcnRIb2xkZXIuc3R5bGUuYmFja2dyb3VuZCA9IGI7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaWQ7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLmFkZEZlYXR1cmVJbmZvUGx1Z2luID0gZnVuY3Rpb24ocCkge1xuICAgIGlmICghdGhpcy5mZWF0dXJlSW5mb1BsdWdpbnMpIFxuICAgICAgICB0aGlzLmZlYXR1cmVJbmZvUGx1Z2lucyA9IFtdO1xuICAgIHRoaXMuZmVhdHVyZUluZm9QbHVnaW5zLnB1c2gocCk7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLmFkZERlc2NyaXB0aW9uQ29udGVudCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICBpZiAodHlwZW9mKGNvbnRlbnQpID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb250ZW50ID0gbWFrZUVsZW1lbnQoJ2RpdicsIGNvbnRlbnQpO1xuICAgIH1cblxuICAgIHRoaXMuaW5mb0VsZW1lbnQuYXBwZW5kQ2hpbGQoY29udGVudCk7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGllciA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aWVyLmRhc1NvdXJjZS5zdHlsZSkge1xuICAgICAgICAgICAgdGllci5zZXRTdHlsZXNoZWV0KHtzdHlsZXM6IHRpZXIuZGFzU291cmNlLnN0eWxlfSk7XG4gICAgICAgICAgICByZXNvbHZlKHRpZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGllci5zdGF0dXMgPSAnRmV0Y2hpbmcgc3R5bGVzaGVldCc7XG4gICAgICAgICAgICB0aWVyLmZldGNoU3R5bGVzaGVldChmdW5jdGlvbihzcywgZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVyciB8fCAhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGllci5lcnJvciA9ICdObyBzdHlsZXNoZWV0JztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNzID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZlN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZlN0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgICAgICAgICAgICAgICAgIGRlZlN0eWxlLkJHQ09MT1IgPSAnYmx1ZSc7XG4gICAgICAgICAgICAgICAgICAgIGRlZlN0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICAgICAgICAgICAgICBzcy5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIGRlZlN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGllci5zZXRTdHlsZXNoZWV0KHNzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aWVyLnNldFN0eWxlc2hlZXQoc3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3MuZ2VuZUhpbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGllci5idW1wZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpZXIudXBkYXRlTGFiZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aWVyLl91cGRhdGVGcm9tQ29uZmlnKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc29sdmUodGllcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5zZXRTdHlsZXNoZWV0ID0gZnVuY3Rpb24oc3MpIHtcbiAgICB0aGlzLmJhc2VTdHlsZXNoZWV0ID0gc2hhbGxvd0NvcHkoc3MpO1xuICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCB0aGlzLmJhc2VTdHlsZXNoZWV0LnN0eWxlcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgdmFyIHNoID0gdGhpcy5iYXNlU3R5bGVzaGVldC5zdHlsZXNbc2ldID0gc2hhbGxvd0NvcHkodGhpcy5iYXNlU3R5bGVzaGVldC5zdHlsZXNbc2ldKTtcbiAgICAgICAgc2guX21ldGhvZFJFID0gc2guX2xhYmVsUkUgPSBzaC5fdHlwZVJFID0gbnVsbDtcbiAgICAgICAgc2guc3R5bGUgPSBzaGFsbG93Q29weShzaC5zdHlsZSk7XG4gICAgICAgIHNoLnN0eWxlLmlkID0gJ3N0eWxlJyArICgrK3RoaXMuc3R5bGVJZFNlZWQpO1xuICAgIH1cbiAgICB0aGlzLmJhc2VTdHlsZXNoZWV0VmFsaWRpdHkgPSBiNjRfc2hhMShtaW5pSlNPTmlmeSh0aGlzLmJhc2VTdHlsZXNoZWV0KSk7XG4gICAgdGhpcy5fdXBkYXRlRnJvbUNvbmZpZygpO1xufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5nZXRTb3VyY2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5mZWF0dXJlU291cmNlO1xufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5nZXREZXNpcmVkVHlwZXMgPSBmdW5jdGlvbihzY2FsZSkge1xuICAgIHZhciBzZnMgPSB0aGlzLmdldEFjdGl2ZVN0eWxlRmlsdGVycyhzY2FsZSk7XG4gICAgaWYgKHNmcylcbiAgICAgICAgcmV0dXJuIHNmcy50eXBlTGlzdCgpO1xufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5nZXRBY3RpdmVTdHlsZUZpbHRlcnMgPSBmdW5jdGlvbihzY2FsZSkge1xuICAgIHZhciBzc1NjYWxlID0gdGhpcy5icm93c2VyLnpvb21Gb3JDdXJyZW50U2NhbGUoKTtcblxuICAgIGlmICh0aGlzLnN0eWxlc2hlZXQpIHtcbiAgICAgICAgdmFyIHN0eWxlcyA9IG5ldyBTdHlsZUZpbHRlclNldCgpO1xuICAgICAgICB2YXIgc3MgPSB0aGlzLnN0eWxlc2hlZXQuc3R5bGVzO1xuICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3MubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICB2YXIgc2ggPSBzc1tzaV07XG4gICAgICAgICAgICBpZiAoIXNoLnpvb20gfHwgc2guem9vbSA9PSBzc1NjYWxlKSB7XG4gICAgICAgICAgICAgICAgc3R5bGVzLmFkZChuZXcgU3R5bGVGaWx0ZXIoc2gudHlwZSwgc2gubWV0aG9kLCBzaC5sYWJlbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHlsZXM7XG4gICAgfVxufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5uZWVkc1NlcXVlbmNlID0gZnVuY3Rpb24oc2NhbGUpIHtcbiAgICB2YXIgc291cmNlQ29uZmlnTmVlZHNTZXEgPSBmdW5jdGlvbihzKSB7XG4gICAgICAgIGlmIChzLmJhbVVSSSB8fCBzLmJhbUJsb2IgfHwgcy5id2dVUkkgfHwgcy5id2dCbG9iKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChzLm92ZXJsYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBzLm92ZXJsYXkuc29tZShzb3VyY2VDb25maWdOZWVkc1NlcSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXF1ZW5jZVNvdXJjZSAmJiBzY2FsZSA8IDUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChzb3VyY2VDb25maWdOZWVkc1NlcSh0aGlzLmRhc1NvdXJjZSkgJiYgc2NhbGUgPCAyMCkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnNldEZlYXR1cmVzID0gZnVuY3Rpb24oY2hyLCBjb3ZlcmFnZSwgc2NhbGUsIGZlYXR1cmVzLCBzZXF1ZW5jZSkge1xuICAgIHRoaXMuY3VycmVudEZlYXR1cmVzID0gZmVhdHVyZXM7XG4gICAgdGhpcy5jdXJyZW50U2VxdWVuY2UgPSBzZXF1ZW5jZTsgICAgXG4gICAgdGhpcy5rbm93bkNociA9IGNocjtcbiAgICB0aGlzLmtub3duQ292ZXJhZ2UgPSBjb3ZlcmFnZTtcbiAgICBcblxuICAgIC8vIG9ubHkgbm90aWZ5IGZlYXR1cmVzIGxvYWRlZCwgaWYgdGhleSBhcmUgdmFsaWRcbiAgICBpZiAoZmVhdHVyZXMpIHtcbiAgICAgICAgc29ydEZlYXR1cmVzKHRoaXMpO1xuICAgICAgICB0aGlzLm5vdGlmeUZlYXR1cmVzTG9hZGVkKCk7XG4gICAgfVxufVxuXG5cbkRhc1RpZXIucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZyhcIlVzZSBicm93c2VyLmdldFRpZXJSZW5kZXJlcih0aWVyKS5kcmF3VGllcih0aWVyKVwiKTtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuZmluZE5leHRGZWF0dXJlID0gZnVuY3Rpb24oY2hyLCBwb3MsIGRpciwgZmVkZ2UsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMucXVhbnRMZWFwVGhyZXNob2xkKSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHRoaXMuYnJvd3Nlci52aWV3RW5kIC0gdGhpcy5icm93c2VyLnZpZXdTdGFydCArIDE7XG4gICAgICAgIHBvcyA9IChwb3MgKyAgKCh3aWR0aCAqIGRpcikgLyAyKSl8MFxuICAgICAgICB0aGlzLmZlYXR1cmVTb3VyY2UucXVhbnRGaW5kTmV4dEZlYXR1cmUoY2hyLCBwb3MsIGRpciwgdGhpcy5xdWFudExlYXBUaHJlc2hvbGQsIGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5rbm93bkNvdmVyYWdlICYmIHBvcyA+PSB0aGlzLmtub3duQ292ZXJhZ2UubWluKCkgJiYgcG9zIDw9IHRoaXMua25vd25Db3ZlcmFnZS5tYXgoKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEZlYXR1cmVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJlc3RGZWF0dXJlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgdGhpcy5jdXJyZW50RmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gdGhpcy5jdXJyZW50RmVhdHVyZXNbZmldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWYubWluIHx8ICFmLm1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGYucGFyZW50cyAmJiBmLnBhcmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpciA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWRnZSA9PSAxICYmIGYubWF4ID49IHBvcyAmJiBmLm1pbiA8IHBvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmVzdEZlYXR1cmUgfHwgZi5taW4gPiBiZXN0RmVhdHVyZS5taW4gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYubWluID09IGJlc3RGZWF0dXJlLm1pbiAmJiBmLm1heCA8IGJlc3RGZWF0dXJlLm1heCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEZlYXR1cmUgPSBmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZi5tYXggPCBwb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJlc3RGZWF0dXJlIHx8IGYubWF4ID4gYmVzdEZlYXR1cmUubWF4IHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZi5tYXggPT0gYmVzdEZlYXR1cmUubWF4ICYmIGYubWluIDwgYmVzdEZlYXR1cmUubWluKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZi5taW4gPT0gYmVzdEZlYXR1cmUubW1pbiAmJiBiZXN0RmVhdHVyZS5tYXggPj0gcG9zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RmVhdHVyZSA9IGY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWRnZSA9PSAxICYmIGYubWluIDw9IHBvcyAmJiBmLm1heCA+IHBvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmVzdEZlYXR1cmUgfHwgZi5tYXggPCBiZXN0RmVhdHVyZS5tYXggfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYubWF4ID09IGJlc3RGZWF0dXJlLm1heCAmJiBmLm1pbiA+IGJlc3RGZWF0dXJlLm1pbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEZlYXR1cmUgPSBmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZi5taW4gPiBwb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJlc3RGZWF0dXJlIHx8IGYubWluIDwgYmVzdEZlYXR1cmUubWluIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmLm1pbiA9PSBiZXN0RmVhdHVyZS5taW4gJiYgZi5tYXggPiBiZXN0RmVhdHVyZS5tYXgpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmLm1heCA9PSBiZXN0RmVhdHVyZS5tYXggJiYgYmVzdEZlYXR1cmUubWluIDw9IHBvcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEZlYXR1cmUgPSBmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYmVzdEZlYXR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGJlc3RGZWF0dXJlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpciA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gdGhpcy5icm93c2VyLmtub3duU3BhY2UubWluO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IHRoaXMuYnJvd3Nlci5rbm93blNwYWNlLm1heDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRyeVNvdXJjZUZORihjaHIsIHBvcywgZGlyLCBjYWxsYmFjayk7XG4gICAgfVxufVxuXG5EYXNUaWVyLnByb3RvdHlwZS50cnlTb3VyY2VGTkYgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmZlYXR1cmVTb3VyY2UuZmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIsIGZ1bmN0aW9uKGZlYXR1cmUpIHtcbiAgICAgICAgaWYgKCFmZWF0dXJlKVxuICAgICAgICAgICAgY2FsbGJhY2soZmVhdHVyZSk7XG5cbiAgICAgICAgdmFyIHNzID0gc2VsZi5icm93c2VyLmdldFNlcXVlbmNlU291cmNlKCk7XG4gICAgICAgIGlmICghc3MpIC8vIFdlJ3JlIHByb2JhYmx5IGluIHRyb3VibGUsIGJ1dCByZXR1cm4gYW55d2F5LlxuICAgICAgICAgICAgY2FsbGJhY2soZmVhdHVyZSlcblxuICAgICAgICBzcy5nZXRTZXFJbmZvKGZlYXR1cmUuc2VnbWVudCwgZnVuY3Rpb24oc2kpIHtcbiAgICAgICAgICAgIGlmIChzaSlcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhmZWF0dXJlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBzZWxmLnRyeVNvdXJjZUZORihmZWF0dXJlLnNlZ21lbnQsIGRpciA+IDAgPyAxMDAwMDAwMDAwMCA6IDAsIGRpciwgY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuXG5EYXNUaWVyLnByb3RvdHlwZS51cGRhdGVMYWJlbCA9IGZ1bmN0aW9uKCkge1xuICAgdGhpcy5idW1wQnV0dG9uLmNsYXNzTmFtZSA9IHRoaXMuYnVtcGVkID8gJ2ZhIGZhLW1pbnVzLWNpcmNsZScgOiAnZmEgZmEtcGx1cy1jaXJjbGUnO1xuICAgaWYgKHRoaXMuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMpIHtcbiAgICAgICAgdGhpcy5idW1wQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJ1bXBCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnVwZGF0ZUhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY3VycmVudEhlaWdodCA9IE1hdGgubWF4KE1hdGgubWF4KHRoaXMubGF5b3V0SGVpZ2h0LCB0aGlzLmxhYmVsLmNsaWVudEhlaWdodCArIDIpLCB0aGlzLmJyb3dzZXIubWluVGllckhlaWdodCk7XG4gICAgdGhpcy5yb3cuc3R5bGUuaGVpZ2h0ID0gJycgKyB0aGlzLmN1cnJlbnRIZWlnaHQgKyAncHgnO1xuICAgIHRoaXMuYnJvd3Nlci51cGRhdGVIZWlnaHQoKTtcbiB9XG5cblxuRGFzVGllci5wcm90b3R5cGUuZHJhd092ZXJsYXkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCA9IHRoaXM7XG4gICAgdmFyIGIgPSB0aGlzLmJyb3dzZXI7XG4gICAgdmFyIHJldGluYSA9IGIucmV0aW5hICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMTtcbiAgICB2YXIgaGVpZ2h0ID0gdC52aWV3cG9ydC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgXG4gICAgdC5vdmVybGF5LmhlaWdodCA9IHJldGluYSA/IGhlaWdodCAqIDIgOiBoZWlnaHQ7XG4gICAgdC5vdmVybGF5LndpZHRoID0gcmV0aW5hID8gYi5mZWF0dXJlUGFuZWxXaWR0aCAqIDIgOiBiLmZlYXR1cmVQYW5lbFdpZHRoO1xuXG4gICAgdmFyIGcgPSB0Lm92ZXJsYXkuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBpZiAocmV0aW5hKSB7XG4gICAgICAgIGcuc2NhbGUoMiwgMik7XG4gICAgfVxuICAgIFxuICAgIHZhciBvcmlnaW4gPSBiLnZpZXdTdGFydDtcbiAgICB2YXIgdmlzU3RhcnQgPSBiLnZpZXdTdGFydDtcbiAgICB2YXIgdmlzRW5kID0gYi52aWV3RW5kO1xuXG4gICAgaWYgKHRoaXMub3ZlcmxheUxhYmVsQ2FudmFzKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSAoKHRoaXMuZ2x5cGhDYWNoZU9yaWdpbiAtIHRoaXMuYnJvd3Nlci52aWV3U3RhcnQpKnRoaXMuYnJvd3Nlci5zY2FsZSk7XG4gICAgICAgIGcuc2F2ZSgpO1xuICAgICAgICBnLnRyYW5zbGF0ZShvZmZzZXQsIDApO1xuICAgICAgICB2YXIgZHJhd1N0YXJ0ID0gLW9mZnNldCArIDI7XG4gICAgICAgIGlmICh0aGlzLmRhc1NvdXJjZS50aWVyR3JvdXApXG4gICAgICAgICAgICBkcmF3U3RhcnQgKz0gMTU7XG4gICAgICAgIHRoaXMub3ZlcmxheUxhYmVsQ2FudmFzLmRyYXcoZywgZHJhd1N0YXJ0LCBiLmZlYXR1cmVQYW5lbFdpZHRoLW9mZnNldCk7XG4gICAgICAgIGcucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCBiLmhpZ2hsaWdodHMubGVuZ3RoOyArK2hpKSB7XG4gICAgICAgIHZhciBoID0gYi5oaWdobGlnaHRzW2hpXTtcbiAgICAgICAgaWYgKCgoaC5jaHIgPT09IGIuY2hyKSB8fCAoaC5jaHIgPT09ICgnY2hyJyArIGIuY2hyKSkpICYmIGgubWluIDwgdmlzRW5kICYmIGgubWF4ID4gdmlzU3RhcnQpIHtcbiAgICAgICAgICAgIGcuZ2xvYmFsQWxwaGEgPSBiLmRlZmF1bHRIaWdobGlnaHRBbHBoYTtcbiAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gYi5kZWZhdWx0SGlnaGxpZ2h0RmlsbDtcbiAgICAgICAgICAgIGcuZmlsbFJlY3QoKGgubWluIC0gb3JpZ2luKSAqIGIuc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgICAgIChoLm1heCAtIGgubWluKSAqIGIuc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICAgIHQub3ZlcmxheS5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgfSBcblxuICAgIC8vIHQub29yaWdpbiA9IGIudmlld1N0YXJ0O1xuICAgIHQub3ZlcmxheS5zdHlsZS53aWR0aCA9IGIuZmVhdHVyZVBhbmVsV2lkdGg7XG4gICAgdC5vdmVybGF5LnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XG4gICAgdC5vdmVybGF5LnN0eWxlLmxlZnQgPSAnMHB4Jztcbn1cblxuXG5EYXNUaWVyLnByb3RvdHlwZS51cGRhdGVTdGF0dXMgPSBmdW5jdGlvbihzdGF0dXMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5fbm90aWZpZXJUb1N0YXR1cygpO1xuICAgICAgICB2YXIgc2QgPSBzb3VyY2VEYXRhVVJJKHRoaXMuZGFzU291cmNlKTtcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgJiYgc291cmNlRGF0YVVSSSh0aGlzLmRhc1NvdXJjZSkuaW5kZXhPZignaHR0cDonKSA9PSAwICYmICF0aGlzLmNoZWNrZWRIVFRQKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrZWRIVFRQID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYnJvd3Nlci5jYW5GZXRjaFBsYWluSFRUUCgpLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oY2FuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLndhcm5IVFRQID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX25vdGlmaWVyVG9TdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5fbm90aWZpZXJUb1N0YXR1cygpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbihtZXNzYWdlLCB0aW1lb3V0KSB7XG4gICAgaWYgKHR5cGVvZih0aW1lb3V0KSAhPT0gJ251bWJlcicpXG4gICAgICAgIHRpbWVvdXQgPSAyMDAwO1xuXG4gICAgaWYgKHRoaXMubm90aWZpZXJGYWRlVGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ub3RpZmllckZhZGVUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5ub3RpZmllckZhZGVUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICB0aGlzLl9ub3RpZmllck9uKG1lc3NhZ2UpO1xuICAgICAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgICAgICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLm5vdGlmaWVyRmFkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXNCLl9ub3RpZmllclRvU3RhdHVzKCk7XG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX25vdGlmaWVyVG9TdGF0dXMoKTtcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLl9ub3RpZmllck9uID0gZnVuY3Rpb24obWVzc2FnZSwgd2FybkhUVFApIHtcbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLm5vdGlmaWVyKTtcbiAgICBpZiAod2FybkhUVFApIHtcbiAgICAgICAgdGhpcy5ub3RpZmllci5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgIG1ha2VFbGVtZW50KFxuICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ2EnLCAnW0hUVFAgV2FybmluZ10gJywge2hyZWY6IHRoaXMuYnJvd3Nlci5odHRwV2FybmluZ1VSTCwgdGFyZ2V0OiBcIl9ibGFua1wifSksXG4gICAgICAgICAgICAgICAgIG1lc3NhZ2VdXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ub3RpZmllci50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIHRoaXMubm90aWZpZXIuc3R5bGUub3BhY2l0eSA9IDAuODtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuX25vdGlmaWVyT2ZmID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5ub3RpZmllci5zdHlsZS5vcGFjaXR5ID0gMDtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuX25vdGlmaWVyVG9TdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5zdGF0dXMpIHtcbiAgICAgICAgdGhpcy5fbm90aWZpZXJPbih0aGlzLnN0YXR1cywgdGhpcy53YXJuSFRUUClcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9ub3RpZmllck9mZigpO1xuICAgIH1cbn1cblxuRGFzVGllci5wcm90b3R5cGUuc2V0Q29uZmlnID0gZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgfHwge307XG4gICAgdGhpcy5fdXBkYXRlRnJvbUNvbmZpZygpO1xuICAgIHRoaXMubm90aWZ5VGllckxpc3RlbmVycygpO1xufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5tZXJnZVN0eWxlc2hlZXQgPSBmdW5jdGlvbihuZXdTdHlsZSkge1xuICAgIHRoaXMubWVyZ2VDb25maWcoe1xuICAgICAgICBzdHlsZXNoZWV0OiBuZXdTdHlsZSwgXG4gICAgICAgIHN0eWxlc2hlZXRWYWxpZGl0eTogdGhpcy5iYXNlU3R5bGVzaGVldFZhbGlkaXR5XG4gICAgfSk7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLm1lcmdlQ29uZmlnID0gZnVuY3Rpb24obmV3Q29uZmlnKSB7XG4gICAgZm9yICh2YXIgayBpbiBuZXdDb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWdba10gPSBuZXdDb25maWdba107XG4gICAgfVxuICAgIHRoaXMuX3VwZGF0ZUZyb21Db25maWcoKTtcbiAgICB0aGlzLm5vdGlmeVRpZXJMaXN0ZW5lcnMoKTtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuX3VwZGF0ZUZyb21Db25maWcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmVlZHNSZWZyZXNoID0gZmFsc2U7XG4gICAgdmFyIG5lZWRzUmVvcmRlciA9IGZhbHNlO1xuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZy5uYW1lID09PSAnc3RyaW5nJylcbiAgICAgICAgdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuY29uZmlnLm5hbWU7XG4gICAgZWxzZVxuICAgICAgICB0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5kYXNTb3VyY2UubmFtZTtcblxuICAgIHZhciB3YW50ZWRIZWlnaHQgPSB0aGlzLmNvbmZpZy5oZWlnaHQgfHwgdGhpcy5kYXNTb3VyY2UuZm9yY2VIZWlnaHQ7XG4gICAgaWYgKHdhbnRlZEhlaWdodCAhPSB0aGlzLmZvcmNlSGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuZm9yY2VIZWlnaHQgPSB3YW50ZWRIZWlnaHQ7XG4gICAgICAgIG5lZWRzUmVmcmVzaCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZm9yY2VNaW5EeW5hbWljICE9IHRoaXMuY29uZmlnLmZvcmNlTWluRHluYW1pYykge1xuICAgICAgICB0aGlzLmZvcmNlTWluRHluYW1pYyA9IHRoaXMuY29uZmlnLmZvcmNlTWluRHluYW1pYztcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgZm9yY2VNaW4gPSB0aGlzLmNvbmZpZy5mb3JjZU1pbiAhPSB1bmRlZmluZWQgPyB0aGlzLmNvbmZpZy5mb3JjZU1pbiA6IHRoaXMuZGFzU291cmNlLmZvcmNlTWluO1xuICAgIGlmICh0aGlzLmZvcmNlTWluICE9IGZvcmNlTWluKSB7XG4gICAgICAgIHRoaXMuZm9yY2VNaW4gPSBmb3JjZU1pbjtcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5mb3JjZU1heER5bmFtaWMgIT0gdGhpcy5jb25maWcuZm9yY2VNYXhEeW5hbWljKSB7XG4gICAgICAgIHRoaXMuZm9yY2VNYXhEeW5hbWljID0gdGhpcy5jb25maWcuZm9yY2VNYXhEeW5hbWljO1xuICAgICAgICBuZWVkc1JlZnJlc2ggPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICB2YXIgZm9yY2VNYXggPSB0aGlzLmNvbmZpZy5mb3JjZU1heCAhPSB1bmRlZmluZWQgPyB0aGlzLmNvbmZpZy5mb3JjZU1heCA6IHRoaXMuZGFzU291cmNlLmZvcmNlTWF4O1xuICAgIGlmICh0aGlzLmZvcmNlTWF4ICE9IGZvcmNlTWF4KSB7XG4gICAgICAgIHRoaXMuZm9yY2VNYXggPSBmb3JjZU1heDtcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgcXVhbnRMZWFwVGhyZXNob2xkID0gbnVsbDtcbiAgICBpZiAodGhpcy5jb25maWcucXVhbnRMZWFwVGhyZXNob2xkICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHF1YW50TGVhcFRocmVzaG9sZCA9IHRoaXMuY29uZmlnLnF1YW50TGVhcFRocmVzaG9sZDtcbiAgICBlbHNlIGlmICh0aGlzLmRhc1NvdXJjZS5xdWFudExlYXBUaHJlc2hvbGQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgcXVhbnRMZWFwVGhyZXNob2xkID0gdGhpcy5kYXNTb3VyY2UucXVhbnRMZWFwVGhyZXNob2xkO1xuICAgIGlmIChxdWFudExlYXBUaHJlc2hvbGQgIT0gdGhpcy5xdWFudExlYXBUaHJlc2hvbGQpIHtcbiAgICAgICAgdGhpcy5xdWFudExlYXBUaHJlc2hvbGQgPSBxdWFudExlYXBUaHJlc2hvbGQ7XG4gICAgICAgIG5lZWRzUmVmcmVzaCA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIFBvc3NpYmxlIEZJWE1FIC0tIGFyZSB0aGVyZSBjYXNlcyB3aGVyZSBzdHlsZSBJRHMgbmVlZCB0byBiZSByZWFzc2lnbmVkP1xuICAgIHZhciBzdHlsZXNoZWV0ID0gbnVsbDtcbiAgICBpZiAodGhpcy5jb25maWcuc3R5bGVzaGVldFZhbGlkaXR5ID09IHRoaXMuYmFzZVN0eWxlc2hlZXRWYWxpZGl0eSlcbiAgICAgICAgc3R5bGVzaGVldCA9IHRoaXMuY29uZmlnLnN0eWxlc2hlZXQ7XG4gICAgc3R5bGVzaGVldCA9IHN0eWxlc2hlZXQgfHwgdGhpcy5iYXNlU3R5bGVzaGVldDtcbiAgICBpZiAodGhpcy5zdHlsZXNoZWV0ICE9PSBzdHlsZXNoZWV0KSB7XG4gICAgICAgIHRoaXMuc3R5bGVzaGVldCA9IHN0eWxlc2hlZXQ7XG4gICAgICAgIG5lZWRzUmVmcmVzaCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIHdhbnRlZFBpbm5lZCA9IHRoaXMuY29uZmlnLnBpbm5lZCAhPT0gdW5kZWZpbmVkID8gdGhpcy5jb25maWcucGlubmVkIDogdGhpcy5kYXNTb3VyY2UucGlubmVkO1xuICAgIGlmICh3YW50ZWRQaW5uZWQgIT09IHRoaXMucGlubmVkKSB7XG4gICAgICAgIHRoaXMucGlubmVkID0gd2FudGVkUGlubmVkO1xuICAgICAgICBuZWVkc1Jlb3JkZXIgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciB3YW50ZWRTdWJ0aWVyTWF4ID0gKHR5cGVvZih0aGlzLmNvbmZpZy5zdWJ0aWVyTWF4ID09PSAnbnVtYmVyJykgPyBcbiAgICAgICAgdGhpcy5jb25maWcuc3VidGllck1heCA6IHRoaXMuZGFzU291cmNlLnN1YnRpZXJNYXggfHwgdGhpcy5icm93c2VyLmRlZmF1bHRTdWJ0aWVyTWF4KTtcbiAgICBpZiAod2FudGVkU3VidGllck1heCAhPSB0aGlzLnN1YnRpZXJNYXgpIHtcbiAgICAgICAgdGhpcy5zdWJ0aWVyTWF4ID0gd2FudGVkU3VidGllck1heDtcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgd2FudGVkQnVtcGVkO1xuICAgIGlmICh0aGlzLmNvbmZpZy5idW1wZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3YW50ZWRCdW1wZWQgPSB0aGlzLmNvbmZpZy5idW1wZWQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLmRhc1NvdXJjZS5idW1wZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3YW50ZWRCdW1wZWQgPSB0aGlzLmRhc1NvdXJjZS5idW1wZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd2FudGVkQnVtcGVkID0gdGhpcy5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyA/IGZhbHNlIDogdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHdhbnRlZEJ1bXBlZCAhPT0gdGhpcy5idW1wZWQpIHtcbiAgICAgICAgdGhpcy5idW1wZWQgPSB3YW50ZWRCdW1wZWQ7XG4gICAgICAgIG5lZWRzUmVmcmVzaCA9IHRydWU7XG4gICAgICAgIHRoaXMudXBkYXRlTGFiZWwoKTtcbiAgICB9XG5cbiAgICBpZiAobmVlZHNSZWZyZXNoKVxuICAgICAgICB0aGlzLnNjaGVkdWxlUmVkcmF3KCk7XG5cbiAgICBpZiAobmVlZHNSZW9yZGVyKVxuICAgICAgICB0aGlzLmJyb3dzZXIucmVvcmRlclRpZXJzKCk7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnNjaGVkdWxlUmVkcmF3ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRGZWF0dXJlcylcbiAgICAgICAgcmV0dXJuO1xuICAgIFxuICAgIHZhciB0aWVyID0gdGhpcztcblxuICAgIGlmICghdGhpcy5yZWRyYXdUaW1lb3V0KSB7XG4gICAgICAgIHRoaXMucmVkcmF3VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzb3J0RmVhdHVyZXModGllcik7ICAgLy8gU29tZSByZW5kZXIgYWN0aW9ucyBtdXRhdGUgdGhlIHJlc3VsdHMgb2YgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA9PiBuZWVkIHRvIHJlLXJ1biBiZWZvcmUgcmVmcmVzaGluZy5cbiAgICAgICAgICAgIHZhciByZW5kZXJlciA9IHRpZXIuYnJvd3Nlci5nZXRUaWVyUmVuZGVyZXIodGllcik7XG4gICAgICAgICAgICByZW5kZXJlci5kcmF3VGllcih0aWVyKTtcbiAgICAgICAgICAgIHRpZXIucmVkcmF3VGltZW91dCA9IG51bGw7XG4gICAgICAgIH0sIDEwKTtcbiAgICB9XG59XG5EYXNUaWVyLnByb3RvdHlwZS5jbGVhclRpZXJMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcblx0dGhpcy5saXN0ZW5lcnMgPSBbXTtcbn1cblxuXG5EYXNUaWVyLnByb3RvdHlwZS5hZGRUaWVyTGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChsKTtcbn1cblxuRGFzVGllci5wcm90b3R5cGUucmVtb3ZlVGllckxpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5saXN0ZW5lcnMsIGwpO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLm5vdGlmeVRpZXJMaXN0ZW5lcnMgPSBmdW5jdGlvbihjaGFuZ2UpIHtcbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5saXN0ZW5lcnMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1tsaV0oY2hhbmdlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5icm93c2VyLm5vdGlmeVRpZXIoKTtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuY2xlYXJGZWF0dXJlc0xvYWRlZExpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmZlYXR1cmVzTG9hZGVkTGlzdGVuZXJzID0gW107XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLmFkZEZlYXR1cmVzTG9hZGVkTGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgdGhpcy5mZWF0dXJlc0xvYWRlZExpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5yZW1vdmVGZWF0dXJlc0xvYWRlZExpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5mZWF0dXJlc0xvYWRlZExpc3RlbmVycywgaGFuZGxlcik7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZXNMb2FkZWRMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5hZGREZXN0cm95TGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgdGhpcy5kZXN0cm95TGlzdGVuZXJzLnB1c2goaGFuZGxlcik7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnJlbW92ZURlc3Ryb3lMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMuZGVzdHJveUxpc3RlbmVycywgaGFuZGxlcik7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveUxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLm5vdGlmeUZlYXR1cmVzTG9hZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgbGkgPSAwOyBsaSA8IHRoaXMuZmVhdHVyZXNMb2FkZWRMaXN0ZW5lcnMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVzTG9hZGVkTGlzdGVuZXJzW2xpXS5jYWxsKHRoaXMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuRGFzVGllci5wcm90b3R5cGUud2FzUmVuZGVyZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9yZXNvbHZlRmlyc3RSZW5kZXJQcm9taXNlKCk7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgRGFzVGllcjogRGFzVGllclxuICAgIH07XG5cbiAgICAvLyBJbXBvcnRlZCBmb3Igc2lkZSBlZmZlY3RzXG4gICAgdmFyIGZkID0gcmVxdWlyZSgnLi9mZWF0dXJlLWRyYXcnKTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vL1xuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIHRyYWNrLWFkZGVyLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcblxuICAgIHZhciBzYyA9IHJlcXVpcmUoJy4vc291cmNlY29tcGFyZScpO1xuICAgIHZhciBzb3VyY2VzQXJlRXF1YWwgPSBzYy5zb3VyY2VzQXJlRXF1YWw7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XG4gICAgdmFyIE9ic2VydmVkID0gdXRpbHMuT2JzZXJ2ZWQ7XG5cbiAgICB2YXIgdGh1YiA9IHJlcXVpcmUoJy4vdGh1YicpO1xuICAgIHZhciBUSFVCX0NPTVBBUkUgPSB0aHViLlRIVUJfQ09NUEFSRTtcbiAgICB2YXIgY29ubmVjdFRyYWNrSHViID0gdGh1Yi5jb25uZWN0VHJhY2tIdWI7XG5cbiAgICB2YXIgZG9tdWkgPSByZXF1aXJlKCcuL2RvbXVpJyk7XG4gICAgdmFyIG1ha2VUcmVlVGFibGVTZWN0aW9uID0gZG9tdWkubWFrZVRyZWVUYWJsZVNlY3Rpb247XG5cbiAgICB2YXIgcHJvYmVSZXNvdXJjZSA9IHJlcXVpcmUoJy4vcHJvYmUnKS5wcm9iZVJlc291cmNlO1xuXG5cbiAgICAvLyBNb3N0IG9mIHRoaXMgY291bGQgZGlzYXBwZWFyIGlmIHdlIGxlYXZlIGFsbCBwcm9iaW5nIHRvIHRoZSBwcm9iZSBtb2R1bGUuLi5cbiAgICB2YXIgYmluID0gcmVxdWlyZSgnLi9iaW4nKTtcbiAgICB2YXIgVVJMRmV0Y2hhYmxlID0gYmluLlVSTEZldGNoYWJsZTtcbiAgICB2YXIgQmxvYkZldGNoYWJsZSA9IGJpbi5CbG9iRmV0Y2hhYmxlO1xuICAgIHZhciByZWFkSW50ID0gYmluLnJlYWRJbnQ7XG5cbiAgICB2YXIgbGgzdXRpbHMgPSByZXF1aXJlKCcuL2xoM3V0aWxzJyk7XG4gICAgdmFyIHVuYmd6ZiA9IGxoM3V0aWxzLnVuYmd6ZjtcblxuICAgIHZhciBiYW0gPSByZXF1aXJlKCcuL2JhbScpO1xuICAgIHZhciBCQU1fTUFHSUMgPSBiYW0uQkFNX01BR0lDO1xuICAgIHZhciBCQUlfTUFHSUMgPSBiYW0uQkFJX01BR0lDO1xuXG4gICAgdmFyIHRiaSA9IHJlcXVpcmUoJy4vdGFiaXgnKTtcbiAgICB2YXIgVEFCSVhfTUFHSUMgPSB0YmkuVEFCSVhfTUFHSUM7XG5cbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgREFTU291cmNlID0gZGFzLkRBU1NvdXJjZTtcbiAgICB2YXIgREFTU2VnbWVudCA9IGRhcy5EQVNTZWdtZW50O1xuICAgIHZhciBEQVNSZWdpc3RyeSA9IGRhcy5EQVNSZWdpc3RyeTtcbiAgICB2YXIgY29vcmRzTWF0Y2ggPSBkYXMuY29vcmRzTWF0Y2g7XG5cbiAgICB2YXIgRW5jb2RlRmV0Y2hhYmxlID0gcmVxdWlyZSgnLi9lbmNvZGUnKS5FbmNvZGVGZXRjaGFibGU7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmN1cnJlbnRseUFjdGl2ZSA9IGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICBpZiAoc291cmNlc0FyZUVxdWFsKHRoaXMudGllcnNbdGldLmRhc1NvdXJjZSwgc291cmNlKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpZXJzW3RpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5tYWtlQnV0dG9uID0gZnVuY3Rpb24obmFtZSwgdG9vbHRpcCkge1xuICAgIHZhciByZWdCdXR0b24gPSBtYWtlRWxlbWVudCgnYScsIG5hbWUsIHtocmVmOiAnIyd9KTtcbiAgICBpZiAodG9vbHRpcCkge1xuICAgICAgICB0aGlzLm1ha2VUb29sdGlwKHJlZ0J1dHRvbiwgdG9vbHRpcCk7XG4gICAgfVxuICAgIHJldHVybiBtYWtlRWxlbWVudCgnbGknLCByZWdCdXR0b24pO1xufVxuXG5mdW5jdGlvbiBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgd2hpY2gpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFkZE1vZGVCdXR0b25zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBiID0gYWRkTW9kZUJ1dHRvbnNbaV07XG4gICAgICAgIGlmIChiID09PSB3aGljaCkge1xuICAgICAgICAgICAgYi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnNob3dUcmFja0FkZGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICBpZiAodGhpcy51aU1vZGUgPT09ICdhZGQnKSB7XG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xuICAgICAgICB0aGlzLnNldFVpTW9kZSgnbm9uZScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIHZhciBwb3B1cCA9IG1ha2VFbGVtZW50KCdkaXYnLCBudWxsLCB7Y2xhc3NOYW1lOiAnZGFsbGlhbmNlJ30gLCB7d2lkdGg6ICcxMDAlJywgZGlzcGxheTogJ2lubGluZS1ibG9jaycsIGJveFNpemluZzogJ2JvcmRlci1ib3gnLCBNb3pCb3hTaXppbmc6ICdib3JkZXItYm94JywgdmVydGljYWxBbGlnbjogJ3RvcCcsIHBhZGRpbmdSaWdodDogJzE1cHgnfSk7XG5cbiAgICB2YXIgYWRkTW9kZUJ1dHRvbnMgPSBbXTtcbiAgICB2YXIgbWFrZVN0YWIsIG1ha2VTdGFiT2JzZXJ2ZXI7XG5cblxuICAgIGlmICghdGhpcy5ub1JlZ2lzdHJ5VGFicykge1xuICAgICAgICB2YXIgcmVnQnV0dG9uID0gdGhpcy5tYWtlQnV0dG9uKCdSZWdpc3RyeScsICdCcm93c2UgY29tcGF0aWJsZSBkYXRhc291cmNlcyBmcm9tIHRoZSBEQVMgcmVnaXN0cnknKTtcbiAgICAgICAgYWRkTW9kZUJ1dHRvbnMucHVzaChyZWdCdXR0b24pO1xuXG4gICAgICAgIGZvciAodmFyIG0gaW4gdGhpcy5tYXBwYWJsZVNvdXJjZXMpIHtcbiAgICAgICAgICAgIHZhciBtZiAgPSBmdW5jdGlvbihtbSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXBCdXR0b24gPSB0aGlzQi5tYWtlQnV0dG9uKHRoaXNCLmNoYWluc1ttbV0uc3JjVGFnLCAnQnJvd3NlIGRhdGFzb3VyY2VzIG1hcHBlZCBmcm9tICcgKyB0aGlzQi5jaGFpbnNbbW1dLnNyY1RhZyk7XG4gICAgICAgICAgICAgICAgYWRkTW9kZUJ1dHRvbnMucHVzaChtYXBCdXR0b24pO1xuICAgICAgICAgICAgICAgIG1hcEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgbWFwQnV0dG9uKTtcbiAgICAgICAgICAgICAgICAgICAgbWFrZVN0YWIodGhpc0IubWFwcGFibGVTb3VyY2VzW21tXSwgbW0pO1xuICAgICAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIH07IG1mKG0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGdyb3VwZWREZWZhdWx0cyA9IHt9O1xuICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCB0aGlzLmRlZmF1bHRTb3VyY2VzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICB2YXIgcyA9IHRoaXMuZGVmYXVsdFNvdXJjZXNbc2ldO1xuICAgICAgICB2YXIgZyA9IHMuZ3JvdXAgfHwgJ0RlZmF1bHRzJztcbiAgICAgICAgaWYgKGdyb3VwZWREZWZhdWx0c1tnXSkge1xuICAgICAgICAgICAgZ3JvdXBlZERlZmF1bHRzW2ddLnB1c2gocyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBncm91cGVkRGVmYXVsdHNbZ10gPSBbc107XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHZhciBtYWtlSHViQnV0dG9uID0gZnVuY3Rpb24odGRiKSB7XG4gICAgICAgIHZhciBodWIgPSB0ZGIuaHViO1xuICAgICAgICB2YXIgaHViTWVudUJ1dHRvbiA9IG1ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLWxpc3QtYWx0J30sIHtjdXJzb3I6ICdjb250ZXh0LW1lbnUnfSk7XG4gICAgICAgIHZhciBsYWJlbCA9IGh1Yi5hbHRMYWJlbCB8fCBodWIuc2hvcnRMYWJlbCB8fCAnVW5rbm93bic7XG4gICAgICAgIGlmICh0ZGIubWFwcGluZylcbiAgICAgICAgICAgIGxhYmVsID0gbGFiZWwgKyAnICgnICsgdGRiLmdlbm9tZSArICcpJztcbiAgICAgICAgdmFyIGhiQ29udGVudCA9IG1ha2VFbGVtZW50KCdzcGFuJywgW2xhYmVsLCAnICcsIGh1Yk1lbnVCdXR0b25dKTtcbiAgICAgICAgdmFyIGh1YkJ1dHRvbiA9IHRoaXNCLm1ha2VCdXR0b24oaGJDb250ZW50LCBodWIubG9uZ0xhYmVsKTtcbiAgICAgICAgaHViQnV0dG9uLmh1YiA9IHRkYjtcbiAgICAgICAgYWRkTW9kZUJ1dHRvbnMucHVzaChodWJCdXR0b24pO1xuXG4gICAgICAgIGh1YkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGFjdGl2YXRlQnV0dG9uKGFkZE1vZGVCdXR0b25zLCBodWJCdXR0b24pO1xuICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgICAgICB2YXIgbG9hZGVyID0gdGhpc0IubWFrZUxvYWRlcigyNCk7XG4gICAgICAgICAgICBsb2FkZXIuc3R5bGUubWFyZ2luTGVmdCA9ICdhdXRvJztcbiAgICAgICAgICAgIGxvYWRlci5zdHlsZS5tYXJnaW5SaWdodCA9ICdhdXRvJztcbiAgICAgICAgICAgIGxvYWRlci5zdHlsZS5tYXJnaW5Ub3AgPSAnMTAwcHgnO1xuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnZGl2JywgbG9hZGVyLCBudWxsLCB7dGV4dEFsaWduOiAnY2VudGVyJ30pKTtcblxuICAgICAgICAgICAgcmVmcmVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBjYW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgdGRiLmdldFRyYWNrcyhmdW5jdGlvbih0cmFja3MsIGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYWtlSHViU3RhYih0cmFja3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICBodWJNZW51QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICB2YXIgcmVtb3ZlSHViSXRlbSA9IG1ha2VFbGVtZW50KCdsaScsIG1ha2VFbGVtZW50KCdhJywgJ1JlbW92ZSBodWInKSk7XG4gICAgICAgICAgICB2YXIgYWxsT25JdGVtID0gbWFrZUVsZW1lbnQoJ2xpJywgIG1ha2VFbGVtZW50KCdhJywgJ0VuYWJsZSBhbGwnKSk7XG4gICAgICAgICAgICB2YXIgYWxsT2ZmSXRlbSA9IG1ha2VFbGVtZW50KCdsaScsICBtYWtlRWxlbWVudCgnYScsICdEaXNhYmxlIGFsbCcpKTtcbiAgICAgICAgICAgIHZhciBodWJNZW51ID0gbWFrZUVsZW1lbnQoJ3VsJywgW3JlbW92ZUh1Ykl0ZW0sIGFsbE9uSXRlbSwgYWxsT2ZmSXRlbV0sIHtjbGFzc05hbWU6ICdkcm9wZG93bi1tZW51J30sIHtkaXNwbGF5OiAnYmxvY2snfSk7XG5cbiAgICAgICAgICAgIHZhciBteCA9ICBldi5jbGllbnRYLCBteSA9IGV2LmNsaWVudFk7XG4gICAgICAgICAgICBteCArPSAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgbXkgKz0gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG5cbiAgICAgICAgICAgIGh1Yk1lbnUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgaHViTWVudS5zdHlsZS50b3AgPSAnJyArIChteSsxMCkgKyAncHgnO1xuICAgICAgICAgICAgaHViTWVudS5zdHlsZS5sZWZ0ID0gJycgKyAobXgtMzApICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXNCLmhQb3B1cEhvbGRlci5hcHBlbmRDaGlsZChodWJNZW51KTtcblxuICAgICAgICAgICAgdmFyIGNsaWNrQ2F0Y2hlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NjJyk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrQ2F0Y2hlciwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpc0IuaFBvcHVwSG9sZGVyLnJlbW92ZUNoaWxkKGh1Yk1lbnUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0NhdGNoZXIsIHRydWUpO1xuXG4gICAgICAgICAgICByZW1vdmVIdWJJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpc0IuaHViT2JqZWN0cy5sZW5ndGg7ICsraGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNCLmh1Yk9iamVjdHNbaGldLmFic1VSTCA9PSB0ZGIuYWJzVVJMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5odWJPYmplY3RzLnNwbGljZShoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpc0IuaHVicy5sZW5ndGg7ICsraGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhjID0gdGhpc0IuaHVic1toaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaGMgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgaGMgPSB7dXJsOiBoY307XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYy51cmwgPT0gdGRiLmh1Yi51cmwgJiYgIWhjLmdlbm9tZSB8fCBoYy5nZW5vbWUgPT0gdGRiLmdlbm9tZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuaHVicy5zcGxpY2UoaGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeVRpZXIoKTtcblxuICAgICAgICAgICAgICAgIG1vZGVCdXR0b25Ib2xkZXIucmVtb3ZlQ2hpbGQoaHViQnV0dG9uKTtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgYWRkSHViQnV0dG9uKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2hUb0h1YkNvbm5lY3RNb2RlKCk7XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG5cblxuICAgICAgICAgICAgYWxsT25JdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICB0ZGIuZ2V0VHJhY2tzKGZ1bmN0aW9uKHRyYWNrcywgZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdHJhY2tzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRzID0gdHJhY2tzW3RpXS50b0RhbGxpYW5jZVNvdXJjZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzQi5jdXJyZW50bHlBY3RpdmUoZHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuYWRkVGllcihkcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICAgICAgYWxsT2ZmSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgdGRiLmdldFRyYWNrcyhmdW5jdGlvbih0cmFja3MsIGVycikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRyYWNrcy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcyA9IHRyYWNrc1t0aV0udG9EYWxsaWFuY2VTb3VyY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzQi5jdXJyZW50bHlBY3RpdmUoZHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IucmVtb3ZlVGllcihkcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAgIHJldHVybiBodWJCdXR0b247XG4gICAgfVxuXG4gICAgdmFyIGZpcnN0RGVmQnV0dG9uID0gbnVsbDtcbiAgICB2YXIgZmlyc3REZWZTb3VyY2VzID0gbnVsbDtcbiAgICBmb3IgKHZhciBnIGluIGdyb3VwZWREZWZhdWx0cykge1xuICAgICAgICAoZnVuY3Rpb24oZywgZHMpIHtcbiAgICAgICAgICAgIHZhciBkZWZCdXR0b24gPSB0aGlzQi5tYWtlQnV0dG9uKGcsICdCcm93c2UgdGhlIGRlZmF1bHQgc2V0IG9mIGRhdGEgZm9yIHRoaXMgYnJvd3NlcicpO1xuICAgICAgICAgICAgZGVmQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgZGVmQnV0dG9uKTtcbiAgICAgICAgICAgICAgICBtYWtlU3RhYihuZXcgT2JzZXJ2ZWQoZHMpKTtcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIGFkZE1vZGVCdXR0b25zLnB1c2goZGVmQnV0dG9uKTtcblxuICAgICAgICAgICAgaWYgKCFmaXJzdERlZkJ1dHRvbiB8fCB0aGlzQi5kZWZhdWx0VHJhY2tBZGRlclRhYiAmJiB0aGlzQi5kZWZhdWx0VHJhY2tBZGRlclRhYiA9PSBnKSB7XG4gICAgICAgICAgICAgICAgZmlyc3REZWZCdXR0b24gPSBkZWZCdXR0b247XG4gICAgICAgICAgICAgICAgZmlyc3REZWZTb3VyY2VzID0gZHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKGcsIGdyb3VwZWREZWZhdWx0c1tnXSk7XG4gICAgfVxuICAgIHZhciBjdXN0QnV0dG9uID0gdGhpcy5tYWtlQnV0dG9uKCdEQVMnLCAnQWRkIGRhdGEgdXNpbmcgdGhlIERBUyBwcm90b2NvbCcpO1xuICAgIGFkZE1vZGVCdXR0b25zLnB1c2goY3VzdEJ1dHRvbik7XG4gICAgdmFyIGJpbkJ1dHRvbiA9IHRoaXMubWFrZUJ1dHRvbignRmlsZXMnLCAnQWRkIGRhdGEgZnJvbSBmaWxlcyBvbiBkaXNrIG9yIHRoZSB3ZWInKTtcbiAgICBhZGRNb2RlQnV0dG9ucy5wdXNoKGJpbkJ1dHRvbik7XG5cblxuICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCB0aGlzLmh1Yk9iamVjdHMubGVuZ3RoOyArK2hpKSB7XG4gICAgICAgIHZhciBodWIgPSB0aGlzLmh1Yk9iamVjdHNbaGldO1xuICAgICAgICBtYWtlSHViQnV0dG9uKGh1Yik7XG4gICAgfVxuXG4gICAgdmFyIGFkZEh1YkJ1dHRvbiA9IHRoaXMubWFrZUJ1dHRvbignKycsICdDb25uZWN0IHRvIGEgbmV3IHRyYWNrLWh1YicpO1xuICAgIGFkZE1vZGVCdXR0b25zLnB1c2goYWRkSHViQnV0dG9uKTtcblxuXG4gICAgdmFyIG1vZGVCdXR0b25Ib2xkZXIgPSBtYWtlRWxlbWVudCgndWwnLCBhZGRNb2RlQnV0dG9ucywge2NsYXNzTmFtZTogJ25hdiBuYXYtdGFicyd9LCB7bWFyZ2luQm90dG9tOiAnMHB4J30pO1xuICAgIHBvcHVwLmFwcGVuZENoaWxkKG1vZGVCdXR0b25Ib2xkZXIpO1xuXG4gICAgdmFyIGN1c3RVUkwsIGN1c3ROYW1lLCBjdXN0Q1MsIGN1c3RRdWFudCwgY3VzdEZpbGUsIGN1c3RVc2VyLCBjdXN0UGFzcztcbiAgICB2YXIgY3VzdG9tTW9kZSA9IGZhbHNlO1xuICAgIHZhciBkYXRhVG9GaW5hbGl6ZSA9IG51bGw7XG5cbiAgICB2YXIgYXNmb3JtID0gbWFrZUVsZW1lbnQoJ2Zvcm0nLCBudWxsLCB7fSwge2Rpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCB3aWR0aDogJzEwMCUnfSk7XG4gICAgYXNmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGRvQWRkKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSwgdHJ1ZSk7XG4gICAgdmFyIHN0YWJIb2xkZXIgPSBtYWtlRWxlbWVudCgnZGl2Jyk7XG4gICAgc3RhYkhvbGRlci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgc3RhYkhvbGRlci5zdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xuICAgIC8vIHN0YWJIb2xkZXIuc3R5bGUuaGVpZ2h0ID0gJzUwMHB4JztcbiAgICBhc2Zvcm0uYXBwZW5kQ2hpbGQoc3RhYkhvbGRlcik7XG5cbiAgICB2YXIgX19tYXBwaW5nO1xuICAgIHZhciBfX3NvdXJjZUhvbGRlcjtcblxuXG4gICAgbWFrZVN0YWIgPSBmdW5jdGlvbihtc291cmNlcywgbWFwcGluZykge1xuICAgICAgICByZWZyZXNoQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBjYW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgaWYgKF9fc291cmNlSG9sZGVyKSB7XG4gICAgICAgICAgICBfX3NvdXJjZUhvbGRlci5yZW1vdmVMaXN0ZW5lcihtYWtlU3RhYk9ic2VydmVyKTtcbiAgICAgICAgfVxuICAgICAgICBfX21hcHBpbmcgPSBtYXBwaW5nO1xuICAgICAgICBfX3NvdXJjZUhvbGRlciA9IG1zb3VyY2VzO1xuICAgICAgICBfX3NvdXJjZUhvbGRlci5hZGRMaXN0ZW5lckFuZEZpcmUobWFrZVN0YWJPYnNlcnZlcik7XG4gICAgfVxuXG4gICAgbWFrZVN0YWJPYnNlcnZlciA9IGZ1bmN0aW9uKG1zb3VyY2VzKSB7XG4gICAgICAgIGN1c3RvbU1vZGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIGJ1dHRvbnMgPSBbXTtcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgIGlmICghbXNvdXJjZXMpIHtcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnRGFsbGlhbmNlIHdhcyB1bmFibGUgdG8gcmV0cmlldmUgZGF0YSBzb3VyY2UgaW5mb3JtYXRpb24gZnJvbSB0aGUgREFTIHJlZ2lzdHJ5LCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyJykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0YWJCb2R5ID0gbWFrZUVsZW1lbnQoJ3Rib2R5JywgbnVsbCwge2NsYXNzTmFtZTogJ3RhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtY29uZGVuc2VkJ30sIHt3aWR0aDogJzEwMCUnfSk7XG4gICAgICAgIHZhciBzdGFiID0gbWFrZUVsZW1lbnQoJ3RhYmxlJywgc3RhYkJvZHksIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9LCB7d2lkdGg6ICcxMDAlJywgdGFibGVMYXlvdXQ6ICdmaXhlZCd9KTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG5cbiAgICAgICAgdmFyIHNvdXJjZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc291cmNlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgc291cmNlcy5wdXNoKG1zb3VyY2VzW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNvdXJjZXMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYS5uYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpLmxvY2FsZUNvbXBhcmUoYi5uYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gc291cmNlc1tpXTtcbiAgICAgICAgICAgIHZhciByID0gbWFrZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgICAgICAgIHZhciBiZCA9IG1ha2VFbGVtZW50KCd0ZCcsIG51bGwsIHt9LCB7d2lkdGg6ICczMHB4J30pO1xuICAgICAgICAgICAgYmQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZS5wcm9wcyB8fCBzb3VyY2UucHJvcHMuY29ycykge1xuICAgICAgICAgICAgICAgIHZhciBiID0gbWFrZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgYi50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgICAgICAgICBiLmRhbGxpYW5jZV9zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgICAgICAgICAgYi5pZCA9ICdzb3VyY2VjYicgKyBpO1xuICAgICAgICAgICAgICAgIGlmIChfX21hcHBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgYi5kYWxsaWFuY2VfbWFwcGluZyA9IF9fbWFwcGluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYi5jaGVja2VkID0gdGhpc0IuY3VycmVudGx5QWN0aXZlKHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgYmQuYXBwZW5kQ2hpbGQoYik7XG4gICAgICAgICAgICAgICAgYnV0dG9ucy5wdXNoKGIpO1xuICAgICAgICAgICAgICAgIGIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2LnRhcmdldC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5hZGRUaWVyKGV2LnRhcmdldC5kYWxsaWFuY2Vfc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLnJlbW92ZVRpZXIoZXYudGFyZ2V0LmRhbGxpYW5jZV9zb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCchJykpO1xuICAgICAgICAgICAgICAgIHRoaXNCLm1ha2VUb29sdGlwKGJkLCBcIlRoaXMgZGF0YSBzb3VyY2UgaXNuJ3QgYWNjZXNzaWJsZSBiZWNhdXNlIGl0IGRvZXNuJ3Qgc3VwcG9ydCBDT1JTXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgci5hcHBlbmRDaGlsZChiZCk7XG4gICAgICAgICAgICB2YXIgbGQgPSBtYWtlRWxlbWVudCgnbGFiZWwnLCBudWxsLCB7aHRtbEZvcjogJ3NvdXJjZWNiJyArIGl9KTtcbiAgICAgICAgICAgIGxkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHNvdXJjZS5uYW1lKSk7XG4gICAgICAgICAgICBpZiAoc291cmNlLmRlc2MgJiYgc291cmNlLmRlc2MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXNCLm1ha2VUb29sdGlwKGxkLCBzb3VyY2UuZGVzYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0ZCcsIGxkKSk7XG4gICAgICAgICAgICBzdGFiQm9keS5hcHBlbmRDaGlsZChyKTtcbiAgICAgICAgICAgICsraWR4O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNldENoZWNrcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGJ1dHRvbnMubGVuZ3RoOyArK2JpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGIgPSBidXR0b25zW2JpXTtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXNCLmN1cnJlbnRseUFjdGl2ZShiLmRhbGxpYW5jZV9zb3VyY2UpO1xuICAgICAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGIuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYi5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldENoZWNrcygpO1xuICAgICAgICB0aGlzQi5hZGRUaWVyTGlzdGVuZXIoZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgc2V0Q2hlY2tzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoc3RhYik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1ha2VIdWJTdGFiKHRyYWNrcykge1xuICAgICAgICByZWZyZXNoQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBjYW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICBjdXN0b21Nb2RlID0gZmFsc2U7XG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuXG4gICAgICAgIGxldCBidXR0b25JZFNlZWQgPSAwO1xuXG4gICAgICAgIHZhciB0dGFiID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHt9LCB7d2lkdGg6ICcxMDAlJ30pO1xuICAgICAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgc291cmNlcy5wdXNoKHRyYWNrc1tpXSk7XG4gICAgICAgIH1cblxuICAgICAgICBzb3VyY2VzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuc2hvcnRMYWJlbC50b0xvd2VyQ2FzZSgpLnRyaW0oKS5sb2NhbGVDb21wYXJlKGIuc2hvcnRMYWJlbC50b0xvd2VyQ2FzZSgpLnRyaW0oKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBncm91cHMgPSBbXTtcbiAgICAgICAgdmFyIHRvcHMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgc291cmNlcy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgIHZhciB0cmFjayA9IHNvdXJjZXNbdGldO1xuICAgICAgICAgICAgaWYgKHRyYWNrLmNoaWxkcmVuICYmIHRyYWNrLmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgdHJhY2suY29udGFpbmVyICE9ICdtdWx0aVdpZycpIHtcbiAgICAgICAgICAgICAgICBncm91cHMucHVzaCh0cmFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvcHMucHVzaCh0cmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZ3JvdXBzLnB1c2goe1xuICAgICAgICAgICAgICAgIHNob3J0TGFiZWw6ICdPdGhlcnMnLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAtMTAwMDAwMDAwLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiB0b3BzfSk7XG4gICAgICAgIH1cblxuICAgICAgICBncm91cHMuc29ydChUSFVCX0NPTVBBUkUpO1xuXG4gICAgICAgIHZhciBidXR0b25zID0gW107XG4gICAgICAgIGZvciAodmFyIGdpID0gMDsgZ2kgPCBncm91cHMubGVuZ3RoOyArK2dpKSB7XG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBncm91cHNbZ2ldO1xuICAgICAgICAgICAgdmFyIGRnID0gZ3JvdXA7XG4gICAgICAgICAgICBpZiAoIWRnLmRpbWVuc2lvbnMgJiYgZGcuX3BhcmVudCAmJiBkZy5fcGFyZW50LmRpbWVuc2lvbnMpXG4gICAgICAgICAgICAgICAgZGcgPSBkZy5fcGFyZW50O1xuXG4gICAgICAgICAgICB2YXIgZHByb3BzID0ge31cbiAgICAgICAgICAgIGlmIChkZy5kaW1lbnNpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGR0b2tzID0gZGcuZGltZW5zaW9ucy5zcGxpdCgvKFxcdyspPShcXHcrKS8pO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGR0aSA9IDA7IGR0aSA8IGR0b2tzLmxlbmd0aCAtIDI7IGR0aSArPSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGRwcm9wc1tkdG9rc1tkdGkgKyAxXV0gPSBkdG9rc1tkdGkgKyAyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkcHJvcHMuZGltWCAmJiBkcHJvcHMuZGltWSkge1xuICAgICAgICAgICAgICAgIHZhciBkaW1YID0gZHByb3BzLmRpbVgsIGRpbVkgPSBkcHJvcHMuZGltWTtcbiAgICAgICAgICAgICAgICB2YXIgc2dYID0gZGcuc3ViZ3JvdXBzW2RpbVhdO1xuICAgICAgICAgICAgICAgIHZhciBzZ1kgPSBkZy5zdWJncm91cHNbZGltWV07XG5cbiAgICAgICAgICAgICAgICB2YXIgdHJrcyA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBncm91cC5jaGlsZHJlbi5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gZ3JvdXAuY2hpbGRyZW5bY2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdlggPSBjaGlsZC5zZ21bZGltWF0sIHZZID0gY2hpbGQuc2dtW2RpbVldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRya3NbdlhdKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJrc1t2WF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdHJrc1t2WF1bdlldID0gY2hpbGQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG1hdHJpeCA9IG1ha2VFbGVtZW50KCd0YWJsZScsIG51bGwsIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9LCB7dGFibGVMYXlvdXQ6ICdmaXhlZCd9KTtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXIgPSBtYWtlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0aCcsIG51bGwsIHt9LCB7d2lkdGg6ICcxNTBweCcsIGhlaWdodDogJzEwMHB4J30pKTsgICAvLyBibGFuayBjb3JuZXIgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc2dYLnRpdGxlcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gbWFrZUVsZW1lbnQoJ3RoJywgbWFrZUVsZW1lbnQoJ2RpdicsIHNnWC50aXRsZXNbc2ldLCB7fSwge3RyYW5zZm9ybTogJ3JvdGF0ZSgtNjBkZWcpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnMCUgMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlYmtpdFRyYW5zZm9ybTogJ3JvdGF0ZSgtNjBkZWcpIHRyYW5zbGF0ZSgyMHB4LDEwcHgpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2Via2l0VHJhbnNmb3JtT3JpZ2luOiAnMCUgMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2xlZnQnfSksIHt9LCB7d2lkdGg6ICczNXB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ2JvdHRvbSd9KVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5hcHBlbmRDaGlsZChoZWFkZXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBtYm9keSA9IG1ha2VFbGVtZW50KCd0Ym9keScsIG51bGwsIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9KVxuICAgICAgICAgICAgICAgIGZvciAodmFyIHlpID0gMDsgeWkgPCBzZ1kudGl0bGVzLmxlbmd0aDsgKyt5aSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdlkgPSBzZ1kudGFnc1t5aV07XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0aCcsIHNnWS50aXRsZXNbeWldKSwge30pO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHhpID0gMDsgeGkgPCBzZ1gudGl0bGVzLmxlbmd0aDsgKyt4aSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZYID0gc2dYLnRhZ3NbeGldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBtYWtlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmtzW3ZYXSAmJiB0cmtzW3ZYXVt2WV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2sgPSB0cmtzW3ZYXVt2WV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRzID0gdHJhY2sudG9EYWxsaWFuY2VTb3VyY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbWFrZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJkID0gbWFrZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IG1ha2VFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5kYWxsaWFuY2Vfc291cmNlID0gZHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fbWFwcGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLmRhbGxpYW5jZV9tYXBwaW5nID0gX19tYXBwaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zLnB1c2goYik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5hcHBlbmRDaGlsZChiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldi50YXJnZXQuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuYWRkVGllcihldi50YXJnZXQuZGFsbGlhbmNlX3NvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5yZW1vdmVUaWVyKGV2LnRhcmdldC5kYWxsaWFuY2Vfc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWJvZHkuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWF0cml4LmFwcGVuZENoaWxkKG1ib2R5KTtcbiAgICAgICAgICAgICAgICB0dGFiLmFwcGVuZENoaWxkKG1ha2VUcmVlVGFibGVTZWN0aW9uKGdyb3VwLnNob3J0TGFiZWwsIG1hdHJpeCwgdGhpc0Iubm9EZWZhdWx0SHViR3JvdXBTaG93ID8gZmFsc2UgOiBnaT09MCApKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YWJCb2R5ID0gbWFrZUVsZW1lbnQoJ3Rib2R5JywgbnVsbCwge2NsYXNzTmFtZTogJ3RhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtY29uZGVuc2VkJ30pO1xuICAgICAgICAgICAgICAgIHZhciBzdGFiID0gbWFrZUVsZW1lbnQoJ3RhYmxlJywgc3RhYkJvZHksIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9LCB7d2lkdGg6ICcxMDAlJywgdGFibGVMYXlvdXQ6ICdmaXhlZCd9KTtcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gMDtcblxuICAgICAgICAgICAgICAgIGdyb3VwLmNoaWxkcmVuLnNvcnQoVEhVQl9DT01QQVJFKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbklkID0gJ2hiJyArICgrK2J1dHRvbklkU2VlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYWNrID0gZ3JvdXAuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBkcyA9IHRyYWNrLnRvRGFsbGlhbmNlU291cmNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG1ha2VFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmQgPSBtYWtlRWxlbWVudCgndGQnLCBudWxsLCB7fSwge3dpZHRoOiAnMzBweCd9KTtcbiAgICAgICAgICAgICAgICAgICAgYmQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBtYWtlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgYi50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgICAgICAgICAgICAgYi5kYWxsaWFuY2Vfc291cmNlID0gZHM7XG4gICAgICAgICAgICAgICAgICAgIGIuaWQgPSBidXR0b25JZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9fbWFwcGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYi5kYWxsaWFuY2VfbWFwcGluZyA9IF9fbWFwcGluZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBidXR0b25zLnB1c2goYik7XG4gICAgICAgICAgICAgICAgICAgIGJkLmFwcGVuZENoaWxkKGIpO1xuICAgICAgICAgICAgICAgICAgICBiLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXYudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5hZGRUaWVyKGV2LnRhcmdldC5kYWxsaWFuY2Vfc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IucmVtb3ZlVGllcihldi50YXJnZXQuZGFsbGlhbmNlX3NvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHIuYXBwZW5kQ2hpbGQoYmQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGQgPSBtYWtlRWxlbWVudCgnbGFiZWwnLCBudWxsLCB7aHRtbEZvcjogYnV0dG9uSWR9KTtcbiAgICAgICAgICAgICAgICAgICAgbGQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodHJhY2suc2hvcnRMYWJlbCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2subG9uZ0xhYmVsICYmIHRyYWNrLmxvbmdMYWJlbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5tYWtlVG9vbHRpcChsZCwgdHJhY2subG9uZ0xhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0ZCcsIGxkKSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWJCb2R5LmFwcGVuZENoaWxkKHIpO1xuICAgICAgICAgICAgICAgICAgICArK2lkeDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBzLmxlbmd0aCA+IDEgfHwgZ3JvdXAuc2hvcnRMYWJlbCAhPT0gJ090aGVycycpIHtcbiAgICAgICAgICAgICAgICAgICAgdHRhYi5hcHBlbmRDaGlsZChtYWtlVHJlZVRhYmxlU2VjdGlvbihncm91cC5zaG9ydExhYmVsLCBzdGFiLCB0aGlzQi5ub0RlZmF1bHRIdWJHcm91cFNob3cgPyBmYWxzZSA6IGdpPT0wKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHRhYi5hcHBlbmRDaGlsZChzdGFiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZXRDaGVja3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGJpID0gMDsgYmkgPCBidXR0b25zLmxlbmd0aDsgKytiaSkge1xuICAgICAgICAgICAgICAgIHZhciBiID0gYnV0dG9uc1tiaV07XG4gICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzQi5jdXJyZW50bHlBY3RpdmUoYi5kYWxsaWFuY2Vfc291cmNlKTtcbiAgICAgICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgICAgICBiLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBiLmRpc2FibGVkID0gdC5zZXF1ZW5jZVNvdXJjZSAhPSBudWxsO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGIuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRDaGVja3MoKTtcbiAgICAgICAgdGhpc0IuYWRkVGllckxpc3RlbmVyKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIHNldENoZWNrcygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKHR0YWIpO1xuICAgIH1cblxuICAgIGlmIChyZWdCdXR0b24pIHtcbiAgICAgICAgcmVnQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIHJlZ0J1dHRvbik7XG4gICAgICAgICAgICBtYWtlU3RhYih0aGlzQi5hdmFpbGFibGVTb3VyY2VzKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgIH1cblxuICAgIGJpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBzd2l0Y2hUb0Jpbk1vZGUoKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgYWRkSHViQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHN3aXRjaFRvSHViQ29ubmVjdE1vZGUoKTtcbiAgICB9LCBmYWxzZSk7XG5cblxuICAgIGZ1bmN0aW9uIHN3aXRjaFRvQmluTW9kZSgpIHtcbiAgICAgICAgYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIGJpbkJ1dHRvbik7XG4gICAgICAgIGN1c3RvbU1vZGUgPSAnYmluJztcblxuICAgICAgICByZWZyZXNoQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG4gICAgICAgIGNhbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuICAgICAgICB2YXIgcGFnZUhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBudWxsLCB7fSwge3BhZGRpbmdMZWZ0OiAnMTBweCcsIHBhZGRpbmdSaWdodDogJzEwcHgnfSk7XG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gzJywgJ0FkZCBjdXN0b20gVVJMLWJhc2VkIGRhdGEnKSk7XG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCBbJ1lvdSBjYW4gYWRkIGluZGV4ZWQgYmluYXJ5IGRhdGEgaG9zdGVkIG9uIGFuIHdlYiBzZXJ2ZXIgdGhhdCBzdXBwb3J0cyBDT1JTICgnLCBtYWtlRWxlbWVudCgnYScsICdmdWxsIGRldGFpbHMnLCB7aHJlZjogJ2h0dHA6Ly93d3cuYmlvZGFsbGlhbmNlLm9yZy9iaW4uaHRtbCd9KSwgJykuICBDdXJyZW50bHkgc3VwcG9ydGVkIGZvcm1hdHMgYXJlIGJpZ3dpZywgYmlnYmVkLCBhbmQgaW5kZXhlZCBCQU0uJ10pKTtcblxuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdicicpKTtcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnVVJMOiAnKSk7XG4gICAgICAgIGN1c3RVUkwgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3NpemU6IDgwLCB2YWx1ZTogJ2h0dHA6Ly93d3cuYmlvZGFsbGlhbmNlLm9yZy9kYXRhc2V0cy9lbnNHZW5lLmJiJ30sIHt3aWR0aDogJzEwMCUnfSk7XG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdFVSTCk7XG5cbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnYnInKSk7XG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2InLCAnLSBvciAtJykpO1xuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdicicpKTtcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnRmlsZTogJykpO1xuICAgICAgICBjdXN0RmlsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnZmlsZScsIG11bHRpcGxlOiAnbXVsdGlwbGUnfSk7XG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdEZpbGUpO1xuXG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnQ2xpY2tpbmcgdGhlIFwiQWRkXCIgYnV0dG9uIGJlbG93IHdpbGwgaW5pdGlhdGUgYSBzZXJpZXMgb2YgdGVzdCBxdWVyaWVzLicpKTtcblxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKHBhZ2VIb2xkZXIpO1xuICAgICAgICBjdXN0VVJMLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3dpdGNoVG9IdWJDb25uZWN0TW9kZSgpIHtcbiAgICAgICAgYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIGFkZEh1YkJ1dHRvbik7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgY3VzdG9tTW9kZSA9ICdodWItY29ubmVjdCc7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuXG4gICAgICAgIHZhciBwYWdlSG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHt9LCB7cGFkZGluZ0xlZnQ6ICcxMHB4JywgcGFkZGluZ1JpZ2h0OiAnMTBweCd9KTtcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDMnLCAnQ29ubmVjdCB0byBhIHRyYWNrIGh1Yi4nKSk7XG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCBbJ0VudGVyIHRoZSB0b3AtbGV2ZWwgVVJMICh1c3VhbGx5IHBvaW50cyB0byBhIGZpbGUgY2FsbGVkIFwiaHViLnR4dFwiKSBvZiBhIFVDU0Mtc3R5bGUgdHJhY2sgaHViJ10pKTtcblxuICAgICAgICBjdXN0VVJMID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgJycsIHtzaXplOiAxMjAsIHZhbHVlOiAnaHR0cDovL3d3dy5iaW9kYWxsaWFuY2Uub3JnL2RhdGFzZXRzL3Rlc3RodWIvaHViLnR4dCd9LCB7d2lkdGg6ICcxMDAlJ30pO1xuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RVUkwpO1xuXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQocGFnZUhvbGRlcik7XG5cbiAgICAgICAgY3VzdFVSTC5mb2N1cygpO1xuICAgIH1cblxuICAgIGN1c3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgc3dpdGNoVG9DdXN0b21Nb2RlKCk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgZnVuY3Rpb24gc3dpdGNoVG9DdXN0b21Nb2RlKCkge1xuICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgY3VzdEJ1dHRvbik7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgY3VzdG9tTW9kZSA9ICdkYXMnO1xuXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuXG4gICAgICAgIHZhciBjdXN0b21Gb3JtID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHt9LCAge3BhZGRpbmdMZWZ0OiAnMTBweCcsIHBhZGRpbmdSaWdodDogJzEwcHgnfSk7XG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gzJywgJ0FkZCBjdXN0b20gREFTIGRhdGEnKSk7XG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnVGhpcyBpbnRlcmZhY2UgaXMgaW50ZW5kZWQgZm9yIGFkZGluZyBjdXN0b20gb3IgbGFiLXNwZWNpZmljIGRhdGEuICBQdWJsaWMgZGF0YSBjYW4gYmUgYWRkZWQgbW9yZSBlYXNpbHkgdmlhIHRoZSByZWdpc3RyeSBpbnRlcmZhY2UuJykpO1xuXG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1VSTDogJykpO1xuICAgICAgICBjdXN0b21Gb3JtLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdicicpKTtcbiAgICAgICAgY3VzdFVSTCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsICcnLCB7c2l6ZTogODAsIHZhbHVlOiAnaHR0cDovL3d3dy5kZXJraG9sbS5uZXQ6ODA4MC9kYXMvbWVkaXBzZXFfcmVhZHMvJ30sIHt3aWR0aDogJzEwMCUnfSk7XG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQoY3VzdFVSTCk7XG5cbiAgICAgICAgY3VzdG9tRm9ybS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICdDbGlja2luZyB0aGUgXCJBZGRcIiBidXR0b24gYmVsb3cgd2lsbCBpbml0aWF0ZSBhIHNlcmllcyBvZiB0ZXN0IHF1ZXJpZXMuICBJZiB0aGUgc291cmNlIGlzIHBhc3N3b3JkLXByb3RlY3RlZCwgeW91IG1heSBiZSBwcm9tcHRlZCB0byBlbnRlciBjcmVkZW50aWFscy4nKSk7XG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdG9tRm9ybSk7XG5cbiAgICAgICAgY3VzdFVSTC5mb2N1cygpO1xuICAgIH1cblxuXG5cbiAgICB2YXIgYWRkQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2J1dHRvbicsICdBZGQnLCB7Y2xhc3NOYW1lOiAnYnRuIGJ0bi1wcmltYXJ5J30pO1xuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkb0FkZCgpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIGZ1bmN0aW9uIGRvQWRkKCkge1xuICAgICAgICBpZiAoY3VzdG9tTW9kZSkge1xuICAgICAgICAgICAgaWYgKGN1c3RvbU1vZGUgPT09ICdkYXMnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cmkgPSBjdXN0VVJMLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAoIS9eLis6XFwvXFwvLy5leGVjKGN1cmkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cmkgPSAnaHR0cDovLycgKyBjdXJpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbmRzID0gbmV3IERBU1NvdXJjZSh7bmFtZTogJ3RlbXBvcmFyeScsIHVyaTogY3VyaX0pO1xuICAgICAgICAgICAgICAgIHRyeUFkZERBUyhuZHMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXN0b21Nb2RlID09PSAnYmluJykge1xuICAgICAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IGN1c3RGaWxlLmZpbGVzO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVMaXN0ICYmIGZpbGVMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5QWRkTXVsdGlwbGUoZmlsZUxpc3QpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJpID0gY3VzdFVSTC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghL14uKzpcXC9cXC8vLmV4ZWMoY3VyaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cmkgPSAnaHR0cDovLycgKyBjdXJpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSB7dXJpOiBjdXJpfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxjdXJpID0gY3VyaS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGN1cmkuaW5kZXhPZihcImh0dHBzOi8vd3d3LmVuY29kZXByb2plY3Qub3JnL1wiKSA9PSAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBsY3VyaS5pbmRleE9mKFwiQEBkb3dubG9hZFwiKSA+PSAwKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UudHJhbnNwb3J0ID0gJ2VuY29kZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5QWRkQmluKHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXN0b21Nb2RlID09PSAncmVzZXQnKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoVG9DdXN0b21Nb2RlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdyZXNldC1iaW4nKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoVG9CaW5Nb2RlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdyZXNldC1odWInKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoVG9IdWJDb25uZWN0TW9kZSgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXN0b21Nb2RlID09PSAncHJvbXB0LWJhaScpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZUxpc3QgPSBjdXN0RmlsZS5maWxlcztcbiAgICAgICAgICAgICAgICBpZiAoZmlsZUxpc3QgJiYgZmlsZUxpc3QubGVuZ3RoID4gMCAmJiBmaWxlTGlzdFswXSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhVG9GaW5hbGl6ZS5iYWlCbG9iID0gZmlsZUxpc3RbMF07XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlQkFNKGRhdGFUb0ZpbmFsaXplKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9tcHRGb3JCQUkoZGF0YVRvRmluYWxpemUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tTW9kZSA9PT0gJ3Byb21wdC10YmknKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gY3VzdEZpbGUuZmlsZXM7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVMaXN0ICYmIGZpbGVMaXN0Lmxlbmd0aCA+IDAgJiYgZmlsZUxpc3RbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVRvRmluYWxpemUuaW5kZXhCbG9iID0gZmlsZUxpc3RbMF07XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlVGFiaXhWQ0YoZGF0YVRvRmluYWxpemUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21wdEZvclRhYml4KGRhdGFUb0ZpbmFsaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdmaW5hbGl6ZScgfHwgY3VzdG9tTW9kZSA9PT0gJ2ZpbmFsaXplLWJpbicpIHtcbiAgICAgICAgICAgICAgICBkYXRhVG9GaW5hbGl6ZS5uYW1lID0gY3VzdE5hbWUudmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIG0gPSBjdXN0Q1MudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKG0gIT0gJ19fZGVmYXVsdF9fJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhVG9GaW5hbGl6ZS5tYXBwaW5nID0gbTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkYXRhVG9GaW5hbGl6ZS5tYXBwaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3VzdFF1YW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFUb0ZpbmFsaXplLm1heGJpbnMgPSBjdXN0UXVhbnQuY2hlY2tlZDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VzdFVzZXIudmFsdWUubGVuZ3RoID4gMSAmJiBjdXN0UGFzcy52YWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFUb0ZpbmFsaXplLnhVc2VyID0gY3VzdFVzZXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFUb0ZpbmFsaXplLnhQYXNzID0gY3VzdFBhc3MudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpc0IuYWRkVGllcihkYXRhVG9GaW5hbGl6ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tTW9kZSA9PSAnZmluYWxpemUtYmluJylcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoVG9CaW5Nb2RlKCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hUb0N1c3RvbU1vZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tTW9kZSA9PT0gJ2h1Yi1jb25uZWN0Jykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJpID0gY3VzdFVSTC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKCEvXi4rOlxcL1xcLy8uZXhlYyhjdXJpKSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJpID0gJ2h0dHA6Ly8nICsgY3VyaTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0cnlBZGRIdWIoY3VyaSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdtdWx0aXBsZScpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBtaSA9IDA7IG1pIDwgbXVsdGlwbGVTZXQubGVuZ3RoOyArK21pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gbXVsdGlwbGVTZXRbbWldO1xuICAgICAgICAgICAgICAgICAgICBpZiAocy5oaWRkZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocy50aWVyX3R5cGUgPT0gJ2JhbScgJiYgIXMuaW5kZXhCbG9iICYmICFzLmluZGV4VXJpKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzLnRpZXJfdHlwZSA9PSAndGFiaXgnICYmICFzLmluZGV4QmxvYiAmJiAhcy5pbmRleFVyaSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZHMgPSBtYWtlU291cmNlQ29uZmlnKHMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZHMubm9QZXJzaXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmFkZFRpZXIobmRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN3aXRjaFRvQmluTW9kZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpc0IucmVtb3ZlQWxsUG9wdXBzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdHJ5QWRkSHViKGN1cmksIG9wdHMsIHJldHJ5KSB7XG4gICAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgICAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpc0IuaHViT2JqZWN0cy5sZW5ndGg7ICsraGkpIHtcbiAgICAgICAgICAgIHZhciBoID0gdGhpc0IuaHViT2JqZWN0c1toaV07XG4gICAgICAgICAgICBpZiAoaC5odWIudXJsID09IGN1cmkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBiaSA9IDA7IGJpIDwgYWRkTW9kZUJ1dHRvbnMubGVuZ3RoOyArK2JpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRNb2RlQnV0dG9uc1tiaV0uaHViID09IGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlQnV0dG9uKGFkZE1vZGVCdXR0b25zLCBhZGRNb2RlQnV0dG9uc1tiaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGguZ2V0VHJhY2tzKGZ1bmN0aW9uKHRyYWNrcywgZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWFrZUh1YlN0YWIodHJhY2tzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbm5lY3RUcmFja0h1YihjdXJpLCBmdW5jdGlvbihodWIsIGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGlmICghcmV0cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyeUFkZEh1YihjdXJpLCB7Y3JlZGVudGlhbHM6IHRydWV9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDInLCAnRXJyb3IgY29ubmVjdGluZyB0byB0cmFjayBodWInKSlcbiAgICAgICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgZXJyKSk7XG4gICAgICAgICAgICAgICAgY3VzdG9tTW9kZSA9ICdyZXNldC1odWInO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGJlc3RIdWIgPSBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBiZXN0SHViQnV0dG9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBnZW5vbWUgaW4gaHViLmdlbm9tZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHBpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2theSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnZW5vbWUgPT0gdGhpc0IuY29vcmRTeXN0ZW0udWNzY05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9rYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG1pZCBpbiB0aGlzQi5jaGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IHRoaXNCLmNoYWluc1ttaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW5vbWUgPT0gbS5jb29yZHMudWNzY05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGluZyA9IG1pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2theSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChva2F5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGMgPSB7dXJsOiBjdXJpLCBnZW5vbWU6IGdlbm9tZX07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5jcmVkZW50aWFscylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYy5jcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwcGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhjLm1hcHBpbmcgPSBtYXBwaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh1Yi5nZW5vbWVzW2dlbm9tZV0ubWFwcGluZyA9IG1hcHBpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5odWJzLnB1c2goaGMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuaHViT2JqZWN0cy5wdXNoKGh1Yi5nZW5vbWVzW2dlbm9tZV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHViQnV0dG9uID0gbWFrZUh1YkJ1dHRvbihodWIuZ2Vub21lc1tnZW5vbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVCdXR0b25Ib2xkZXIuYXBwZW5kQ2hpbGQoaHViQnV0dG9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXBwaW5nIHx8ICFiZXN0SHViKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEh1YiA9IGh1Yi5nZW5vbWVzW2dlbm9tZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEh1YkJ1dHRvbiA9IGh1YkJ1dHRvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChiZXN0SHViKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeVRpZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIGJlc3RIdWJCdXR0b24pO1xuICAgICAgICAgICAgICAgICAgICBiZXN0SHViLmdldFRyYWNrcyhmdW5jdGlvbih0cmFja3MsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZUh1YlN0YWIodHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gyJywgJ05vIGRhdGEgZm9yIHRoaXMgZ2Vub21lJykpXG4gICAgICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnVGhpcyBVUkwgYXBwZWFycyB0byBiZSBhIHZhbGlkIHRyYWNrLWh1YiwgYnV0IGl0IGRvZXNuXFwndCBjb250YWluIGFueSBkYXRhIGZvciB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gb2YgdGhpcyBicm93c2VyJykpO1xuICAgICAgICAgICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgJ2Nvb3JkU3lzdGVtLnVjc2NOYW1lID0gJyArIHRoaXNCLmNvb3JkU3lzdGVtLnVjc2NOYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbU1vZGUgPSAncmVzZXQtaHViJztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgb3B0cyk7XG4gICAgfVxuXG4gICAgdmFyIHRyeUFkZERBUyA9IGZ1bmN0aW9uKG5kcywgcmV0cnkpIHtcbiAgICAgICAgdmFyIGtub3duU3BhY2UgPSB0aGlzQi5rbm93blNwYWNlO1xuICAgICAgICBpZiAoIWtub3duU3BhY2UpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiQ2FuJ3QgY29uZmlybSB0cmFjay1hZGRpdGlvbiB0byBhbiB1bmluaXQgYnJvd3Nlci5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRzbSA9IE1hdGgubWF4KGtub3duU3BhY2UubWluLCAoa25vd25TcGFjZS5taW4gKyBrbm93blNwYWNlLm1heCAtIDEwMCkgLyAyKXwwO1xuICAgICAgICB2YXIgdGVzdFNlZ21lbnQgPSBuZXcgREFTU2VnbWVudChrbm93blNwYWNlLmNociwgdHNtLCBNYXRoLm1pbih0c20gKyA5OSwga25vd25TcGFjZS5tYXgpKTtcbiAgICAgICAgbmRzLmZlYXR1cmVzKHRlc3RTZWdtZW50LCB7fSwgZnVuY3Rpb24oZmVhdHVyZXMsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGlmICghcmV0cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmRzLmNyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5QWRkREFTKG5kcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gyJywgJ0N1c3RvbSBkYXRhIG5vdCBmb3VuZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICdEQVMgdXJpOiAnICsgbmRzLnVyaSArICcgaXMgbm90IGFuc3dlcmluZyBmZWF0dXJlcyByZXF1ZXN0cycpKTtcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tTW9kZSA9ICdyZXNldCc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBuYW1lRXh0cmFjdFBhdHRlcm4gPSBuZXcgUmVnRXhwKCcvKFteL10rKS8/JCcpO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG5hbWVFeHRyYWN0UGF0dGVybi5leGVjKG5kcy51cmkpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBuZHMubmFtZSA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeUFkZERBU3hTb3VyY2VzKG5kcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0cnlBZGREQVN4U291cmNlcyhuZHMsIHJldHJ5KSB7XG4gICAgICAgIHZhciB1cmkgPSBuZHMudXJpO1xuICAgICAgICBpZiAocmV0cnkpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IC8oLispXFwvW15cXC9dK1xcLz8vLmV4ZWModXJpKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIHVyaSA9IG1hdGNoWzFdICsgJy9zb3VyY2VzJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzcWZhaWwoKSB7XG4gICAgICAgICAgICBpZiAoIXJldHJ5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyeUFkZERBU3hTb3VyY2VzKG5kcywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhZGREYXNDb21wbGV0aW9uUGFnZShuZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG5ldyBEQVNSZWdpc3RyeSh1cmksIHtjcmVkZW50aWFsczogbmRzLmNyZWRlbnRpYWxzfSkuc291cmNlcyhcbiAgICAgICAgICAgIGZ1bmN0aW9uKHNvdXJjZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZXMgfHwgc291cmNlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3FmYWlsKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGZzID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBmcyA9IHNvdXJjZXNbMF07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlc1tpXS51cmkgPT09IG5kcy51cmkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcyA9IHNvdXJjZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY29vcmRzRGV0ZXJtaW5lZCA9IGZhbHNlLCBxdWFudERldGVybWluZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoZnMpIHtcbiAgICAgICAgICAgICAgICAgICAgbmRzLm5hbWUgPSBmcy5uYW1lO1xuICAgICAgICAgICAgICAgICAgICBuZHMuZGVzYyA9IGZzLmRlc2M7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcy5tYXhiaW5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZHMubWF4YmlucyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZHMubWF4YmlucyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcy5jYXBhYmlsaXRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5kcy5jYXBhYmlsaXRpZXMgPSBmcy5jYXBhYmlsaXRpZXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcXVhbnREZXRlcm1pbmVkID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcy5jb29yZHMgJiYgZnMuY29vcmRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRzID0gZnMuY29vcmRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvb3Jkc01hdGNoKGNvb3JkcywgdGhpc0IuY29vcmRTeXN0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRzRGV0ZXJtaW5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXNCLmNoYWlucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdGhpc0IuY2hhaW5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb29yZHNNYXRjaChjb29yZHMsIHRoaXNCLmNoYWluc1trXS5jb29yZHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZHMubWFwcGluZyA9IGs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZHNEZXRlcm1pbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhZGREYXNDb21wbGV0aW9uUGFnZShuZHMsIGNvb3Jkc0RldGVybWluZWQsIHF1YW50RGV0ZXJtaW5lZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNxZmFpbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHZhciBtYWtlU291cmNlQ29uZmlnID0gZnVuY3Rpb24ocykge1xuICAgICAgICB2YXIgbmRzID0ge25hbWU6IHMubmFtZX07XG4gICAgICAgIGlmIChzLmNyZWRlbnRpYWxzKVxuICAgICAgICAgICAgbmRzLmNyZWRlbnRpYWxzID0gcy5jcmVkZW50aWFscztcblxuICAgICAgICBpZiAocy5tYXBwaW5nICYmIHMubWFwcGluZyAhPSAnX19kZWZhdWx0X18nKVxuICAgICAgICAgICAgbmRzLm1hcHBpbmcgPSBzLm1hcHBpbmc7XG5cbiAgICAgICAgaWYgKHMudHJhbnNwb3J0KVxuICAgICAgICAgICAgbmRzLnRyYW5zcG9ydCA9IHMudHJhbnNwb3J0O1xuXG4gICAgICAgIGlmIChzLnRpZXJfdHlwZSA9PSAnYndnJykge1xuICAgICAgICAgICAgaWYgKHMuYmxvYilcbiAgICAgICAgICAgICAgICBuZHMuYndnQmxvYiA9IHMuYmxvYjtcbiAgICAgICAgICAgIGVsc2UgaWYgKHMudXJpKVxuICAgICAgICAgICAgICAgIG5kcy5id2dVUkkgPSBzLnVyaTtcbiAgICAgICAgICAgIHJldHVybiBuZHM7XG4gICAgICAgIH0gZWxzZSBpZiAocy50aWVyX3R5cGUgPT0gJ2JhbScpIHtcbiAgICAgICAgICAgIGlmIChzLmJsb2IpIHtcbiAgICAgICAgICAgICAgICBuZHMuYmFtQmxvYiA9IHMuYmxvYjtcbiAgICAgICAgICAgICAgICBuZHMuYmFpQmxvYiA9IHMuaW5kZXhCbG9iO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZHMuYmFtVVJJID0gcy51cmk7XG4gICAgICAgICAgICAgICAgbmRzLmJhaVVSSSA9IHMuaW5kZXhVcmk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmRzO1xuICAgICAgICB9IGVsc2UgaWYgKHMudGllcl90eXBlID09ICd0YWJpeCcpIHtcbiAgICAgICAgICAgIG5kcy50aWVyX3R5cGUgPSAndGFiaXgnO1xuICAgICAgICAgICAgbmRzLnBheWxvYWQgPSBzLnBheWxvYWQ7XG4gICAgICAgICAgICBpZiAocy5ibG9iKSB7XG4gICAgICAgICAgICAgICAgbmRzLmJsb2IgPSBzLmJsb2I7XG4gICAgICAgICAgICAgICAgbmRzLmluZGV4QmxvYiA9IHMuaW5kZXhCbG9iO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZHMudXJpID0gcy51cmk7XG4gICAgICAgICAgICAgICAgbmRzLmluZGV4VXJpID0gcy5pbmRleFVyaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZHM7XG4gICAgICAgIH0gZWxzZSBpZiAocy50aWVyX3R5cGUgPT0gJ21lbXN0b3JlJykge1xuICAgICAgICAgICAgbmRzLnRpZXJfdHlwZSA9ICdtZW1zdG9yZSc7XG4gICAgICAgICAgICBuZHMucGF5bG9hZCA9IHMucGF5bG9hZDtcbiAgICAgICAgICAgIGlmIChzLmJsb2IpXG4gICAgICAgICAgICAgICAgbmRzLmJsb2IgPSBzLmJsb2I7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbmRzLnVyaSA9IHMudXJpO1xuICAgICAgICAgICAgcmV0dXJuIG5kcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0cnlBZGRCaW4gPSBmdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgICAgcHJvYmVSZXNvdXJjZShzb3VyY2UsIGZ1bmN0aW9uKHNvdXJjZSwgZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgICAgICAgICAgdmFyIHRhYkVycm9yID0gbWFrZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhYkVycm9yLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdoMicsIFwiQ291bGRuJ3QgYWNjZXNzIGN1c3RvbSBkYXRhXCIpKTtcbiAgICAgICAgICAgICAgICB0YWJFcnJvci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICcnICsgZXJyKSk7XG4gICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZCh0YWJFcnJvcik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc291cmNlKTtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyAmJiBzb3VyY2UudXJpLmluZGV4T2YoJ2h0dHA6JykgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5jYW5GZXRjaFBsYWluSFRUUCgpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihjYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJFcnJvci5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCdwJywgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCdzdHJvbmcnLCAnSFRUUCB3YXJuaW5nOiAnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneW91IG1heSBub3QgYmUgYWJsZSB0byBhY2Nlc3MgSFRUUCByZXNvdXJjZXMgZnJvbSBhbiBpbnN0YW5jZSBvZiBCaW9kYWxsaWFuY2Ugd2hpY2ggeW91IGFyZSBhY2Nlc3NpbmcgdmlhIEhUVFBTLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ2EnLCAnW01vcmUgaW5mb10nLCB7aHJlZjogdGhpc0IuaHR0cFdhcm5pbmdVUkwsIHRhcmdldDogXCJfYmxhbmtcIn0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VzdG9tTW9kZSA9ICdyZXNldC1iaW4nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbmRzID0gbWFrZVNvdXJjZUNvbmZpZyhzb3VyY2UpO1xuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UudGllcl90eXBlID09ICdiYW0nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZUJBTShuZHMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc291cmNlLnRpZXJfdHlwZSA9PSAndGFiaXgnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZVRhYml4VkNGKG5kcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFkZERhc0NvbXBsZXRpb25QYWdlKG5kcywgZmFsc2UsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByb21wdEZvckJBSShuZHMpIHtcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBhZGRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xuICAgICAgICBjYW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xuXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuICAgICAgICBjdXN0b21Nb2RlID0gJ3Byb21wdC1iYWknXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gyJywgJ1NlbGVjdCBhbiBpbmRleCBmaWxlJykpO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgJ0RhbGxpYW5jZSByZXF1aXJlcyBhIEJBTSBpbmRleCAoLmJhaSkgZmlsZSB3aGVuIGRpc3BsYXlpbmcgQkFNIGRhdGEuICBUaGVzZSBub3JtYWxseSBhY2NvbXBhbnkgQkFNIGZpbGVzLiAgRm9yIHNlY3VyaXR5IHJlYXNvbnMsIHdlYiBhcHBsaWNhdGlvbnMgbGlrZSBEYWxsaWFuY2UgY2FuIG9ubHkgYWNjZXNzIGxvY2FsIGZpbGVzIHdoaWNoIHlvdSBoYXZlIGV4cGxpY2l0eSBzZWxlY3RlZC4gIFBsZWFzZSB1c2UgdGhlIGZpbGUgY2hvb3NlciBiZWxvdyB0byBzZWxlY3QgdGhlIGFwcHJvcHJpYXRlIEJBSSBmaWxlJykpO1xuXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0luZGV4IGZpbGU6ICcpKTtcbiAgICAgICAgY3VzdEZpbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2ZpbGUnfSk7XG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdEZpbGUpO1xuICAgICAgICBkYXRhVG9GaW5hbGl6ZSA9IG5kcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9tcHRGb3JUYWJpeChuZHMpIHtcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBhZGRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xuICAgICAgICBjYW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xuXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuICAgICAgICBjdXN0b21Nb2RlID0gJ3Byb21wdC10YmknXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gyJywgJ1NlbGVjdCBhbiBpbmRleCBmaWxlJykpO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgJ0RhbGxpYW5jZSByZXF1aXJlcyBhIFRhYml4IGluZGV4ICgudGJpKSBmaWxlIHdoZW4gZGlzcGxheWluZyBWQ0YgZGF0YS4gIEZvciBzZWN1cml0eSByZWFzb25zLCB3ZWIgYXBwbGljYXRpb25zIGxpa2UgRGFsbGlhbmNlIGNhbiBvbmx5IGFjY2VzcyBsb2NhbCBmaWxlcyB3aGljaCB5b3UgaGF2ZSBleHBsaWNpdHkgc2VsZWN0ZWQuICBQbGVhc2UgdXNlIHRoZSBmaWxlIGNob29zZXIgYmVsb3cgdG8gc2VsZWN0IHRoZSBhcHByb3ByaWF0ZSBCQUkgZmlsZScpKTtcblxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdJbmRleCBmaWxlOiAnKSk7XG4gICAgICAgIGN1c3RGaWxlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdmaWxlJ30pO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RGaWxlKTtcbiAgICAgICAgZGF0YVRvRmluYWxpemUgPSBuZHM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGxldGVCQU0obmRzKSB7XG4gICAgICAgIHZhciBpbmRleEY7XG4gICAgICAgIGlmIChuZHMuYmFpQmxvYilcbiAgICAgICAgICAgIGluZGV4RiA9IG5ldyBCbG9iRmV0Y2hhYmxlKG5kcy5iYWlCbG9iKTtcbiAgICAgICAgZWxzZSBpZiAobmRzLnRyYW5zcG9ydCA9PSAnZW5jb2RlJylcbiAgICAgICAgICAgIGluZGV4RiA9IG5ldyBFbmNvZGVGZXRjaGFibGUobmRzLmJhbVVSSSArICcuYmFpJyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGluZGV4RiA9IG5ldyBVUkxGZXRjaGFibGUobmRzLmJhbVVSSSArICcuYmFpJywge2NyZWRlbnRpYWxzOiBuZHMuY3JlZGVudGlhbHN9KTtcblxuICAgICAgICBpbmRleEYuc2xpY2UoMCwgMjU2KS5mZXRjaChmdW5jdGlvbihyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhc0JBSSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFnaWMyID0gcmVhZEludChiYSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGhhc0JBSSA9IChtYWdpYzIgPT0gQkFJX01BR0lDKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGhhc0JBSSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkRGFzQ29tcGxldGlvblBhZ2UobmRzLCBmYWxzZSwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiaW5Gb3JtYXRFcnJvclBhZ2UoJ1lvdSBoYXZlIHNlbGVjdGVkIGEgdmFsaWQgQkFNIGZpbGUsIGJ1dCBhIGNvcnJlc3BvbmRpbmcgaW5kZXggKC5iYWkpIGZpbGUgd2FzIG5vdCBmb3VuZC4gIFBsZWFzZSBpbmRleCB5b3VyIEJBTSAoc2FtdG9vbHMgaW5kZXgpIGFuZCBwbGFjZSB0aGUgQkFJIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wbGV0ZVRhYml4VkNGKG5kcykge1xuICAgICAgICB2YXIgaW5kZXhGO1xuICAgICAgICBpZiAobmRzLmluZGV4QmxvYikge1xuICAgICAgICAgICAgaW5kZXhGID0gbmV3IEJsb2JGZXRjaGFibGUobmRzLmluZGV4QmxvYik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbmRleEYgPSBuZXcgVVJMRmV0Y2hhYmxlKG5kcy51cmkgKyAnLnRiaScpO1xuICAgICAgICB9XG4gICAgICAgIGluZGV4Ri5zbGljZSgwLCAxPDwxNikuZmV0Y2goZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgdmFyIGhhc1RhYml4ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHIpO1xuICAgICAgICAgICAgICAgIGlmIChiYVswXSA9PSAzMSB8fCBiYVsxXSA9PSAxMzkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVuYyA9IHVuYmd6ZihyKTtcbiAgICAgICAgICAgICAgICAgICAgYmEgPSBuZXcgVWludDhBcnJheSh1bmMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbTIgPSByZWFkSW50KGJhLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzVGFiaXggPSAobTIgPT0gVEFCSVhfTUFHSUMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNUYWJpeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhZGREYXNDb21wbGV0aW9uUGFnZShuZHMsIGZhbHNlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBiaW5Gb3JtYXRFcnJvclBhZ2UoJ1lvdSBoYXZlIHNlbGVjdGVkIGEgdmFsaWQgVkNGIGZpbGUsIGJ1dCBhIGNvcnJlc3BvbmRpbmcgaW5kZXggKC50YmkpIGZpbGUgd2FzIG5vdCBmb3VuZC4gIFBsZWFzZSBpbmRleCB5b3VyIFZDRiAoXCJ0YWJpeCAtcCB2Y2YgLWYgbXlmaWxlLnZjZi5nelwiKSBhbmQgcGxhY2UgdGhlIC50YmkgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYmluRm9ybWF0RXJyb3JQYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBhZGRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xuICAgICAgICBjYW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xuXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSB8fCAnQ3VzdG9tIGRhdGEgZm9ybWF0IG5vdCByZWNvZ25pemVkJztcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDInLCAnRXJyb3IgYWRkaW5nIGN1c3RvbSBkYXRhJykpO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgbWVzc2FnZSkpO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgJ0N1cnJlbnRseSBzdXBwb3J0ZWQgZm9ybWF0cyBhcmUgYmlnQmVkLCBiaWdXaWcsIGFuZCBCQU0uJykpO1xuICAgICAgICBjdXN0b21Nb2RlID0gJ3Jlc2V0LWJpbic7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYWRkRGFzQ29tcGxldGlvblBhZ2UgPSBmdW5jdGlvbihuZHMsIGNvb3Jkc0RldGVybWluZWQsIHF1YW50RGV0ZXJtaW5lZCwgcXVhbnRJcnJlbGV2YW50KSB7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcblxuICAgICAgICByZW1vdmVDaGlsZHJlbihzdGFiSG9sZGVyKTtcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDInLCAnQWRkIGN1c3RvbSBkYXRhOiBzdGVwIDInKSk7XG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0xhYmVsOiAnKSk7XG4gICAgICAgIGN1c3ROYW1lID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgJycsIHt2YWx1ZTogbmRzLm5hbWV9KTtcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChjdXN0TmFtZSk7XG5cblxuICAgICAgICAvLyBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdVc2VyOiAnKSk7XG4gICAgICAgIGN1c3RVc2VyID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgJycpO1xuICAgICAgICAvLyBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RVc2VyKTtcbiAgICAgICAgLy9zdGFiSG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdQYXNzOiAnKSk7XG4gICAgICAgIGN1c3RQYXNzID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgJycpO1xuICAgICAgICAvLyBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RQYXNzKTtcblxuXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2JyJykpO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdicicpKTtcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDQnLCAnQ29vcmRpbmF0ZSBzeXN0ZW06ICcpKTtcbiAgICAgICAgY3VzdENTID0gbWFrZUVsZW1lbnQoJ3NlbGVjdCcsIG51bGwpO1xuICAgICAgICBjdXN0Q1MuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsIHRoaXNCLm5hbWVGb3JDb29yZFN5c3RlbSh0aGlzQi5jb29yZFN5c3RlbSksIHt2YWx1ZTogJ19fZGVmYXVsdF9fJ30pKTtcbiAgICAgICAgaWYgKHRoaXNCLmNoYWlucykge1xuICAgICAgICAgICAgZm9yICh2YXIgY3NrIGluIHRoaXNCLmNoYWlucykge1xuICAgICAgICAgICAgICAgIHZhciBjcyA9IHRoaXNCLmNoYWluc1tjc2tdLmNvb3JkcztcbiAgICAgICAgICAgICAgICBjdXN0Q1MuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsIHRoaXNCLm5hbWVGb3JDb29yZFN5c3RlbShjcyksIHt2YWx1ZTogY3NrfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGN1c3RDUy52YWx1ZSA9IG5kcy5tYXBwaW5nIHx8ICdfX2RlZmF1bHRfXyc7XG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdENTKTtcblxuICAgICAgICBpZiAoY29vcmRzRGV0ZXJtaW5lZCkge1xuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFwiKEJhc2VkIG9uIHNlcnZlciByZXNwb25zZSwgcHJvYmFibHkgZG9lc24ndCBuZWVkIGNoYW5naW5nLilcIikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFttYWtlRWxlbWVudCgnYicsICdXYXJuaW5nOiAnKSwgXCJ1bmFibGUgdG8gZGV0ZXJtaW5lIHRoZSBjb3JyZWN0IHZhbHVlIGZyb20gc2VydmVyIHJlc3BvbnNlcy4gIFBsZWFzZSBjaGVjayBjYXJlZnVsbHkuXCJdKSk7XG4gICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgXCJJZiB5b3UgZG9uJ3Qgc2VlIHRoZSBtYXBwaW5nIHlvdSdyZSBsb29raW5nIGZvciwgcGxlYXNlIGNvbnRhY3QgdGhvbWFzQGJpb2RhbGxpYW5jZS5vcmdcIikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFxdWFudElycmVsZXZhbnQpIHtcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1F1YW50aXRhdGl2ZTogJykpO1xuICAgICAgICAgICAgY3VzdFF1YW50ID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IHRydWV9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmRzLm1heGJpbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY3VzdFF1YW50LmNoZWNrZWQgPSBuZHMubWF4YmlucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdFF1YW50KTtcbiAgICAgICAgICAgIGlmIChxdWFudERldGVybWluZWQpIHtcbiAgICAgICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgXCIoQmFzZWQgb24gc2VydmVyIHJlc3BvbnNlLCBwcm9iYWJseSBkb2Vzbid0IG5lZWQgY2hhbmdpbmcuKVwiKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCBbbWFrZUVsZW1lbnQoJ2InLCBcIldhcm5pbmc6IFwiKSwgXCJ1bmFibGUgdG8gZGV0ZXJtaW5lIGNvcnJlY3QgdmFsdWUuICBJZiBpbiBkb3VidCwgbGVhdmUgY2hlY2tlZC5cIl0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZHMuYndnQmxvYikge1xuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFttYWtlRWxlbWVudCgnYicsICdXYXJuaW5nOiAnKSwgJ2RhdGEgYWRkZWQgZnJvbSBsb2NhbCBmaWxlLiAgRHVlIHRvIHRoZSBicm93c2VyIHNlY3VyaXR5IG1vZGVsLCB0aGUgdHJhY2sgd2lsbCBkaXNhcHBlYXIgaWYgeW91IHJlbG9hZCBEYWxsaWFuY2UuJ10pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1c3ROYW1lLmZvY3VzKCk7XG5cbiAgICAgICAgaWYgKGN1c3RvbU1vZGUgPT09ICdiaW4nIHx8IGN1c3RvbU1vZGUgPT09ICdwcm9tcHQtYmFpJyB8fCBjdXN0b21Nb2RlID09PSAncHJvbXB0LXRiaScpXG4gICAgICAgICAgICBjdXN0b21Nb2RlID0gJ2ZpbmFsaXplLWJpbic7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGN1c3RvbU1vZGUgPSAnZmluYWxpemUnO1xuICAgICAgICBkYXRhVG9GaW5hbGl6ZSA9IG5kcztcbiAgICB9XG5cbiAgICB2YXIgbXVsdGlwbGVTZXQgPSBudWxsO1xuICAgIHZhciB0cnlBZGRNdWx0aXBsZSA9IGZ1bmN0aW9uKGZpbGVMaXN0KSB7XG4gICAgICAgIHZhciBuZXdTb3VyY2VzID0gbXVsdGlwbGVTZXQgPSBbXTtcbiAgICAgICAgY3VzdG9tTW9kZSA9ICdtdWx0aXBsZSc7XG4gICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmaWxlTGlzdC5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgIHZhciBmID0gZmlsZUxpc3RbZmldO1xuICAgICAgICAgICAgaWYgKGYpIHtcbiAgICAgICAgICAgICAgICBuZXdTb3VyY2VzLnB1c2goe2Jsb2I6IGZ9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBuZXdTb3VyY2VzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgcHJvYmVNdWx0aXBsZShuZXdTb3VyY2VzW2ZpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlTXVsdGlwbGVTdGF0dXMoKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvYmVNdWx0aXBsZSA9IGZ1bmN0aW9uKG5zKSB7XG4gICAgICAgIHByb2JlUmVzb3VyY2UobnMsIGZ1bmN0aW9uKHNvdXJjZSwgZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLmVycm9yID0gZXJyO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB1c2VkSW5kaWNlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGJhbXMgPSB7fSwgdGFiaXhlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IG11bHRpcGxlU2V0Lmxlbmd0aDsgKytzaSkge1xuICAgICAgICAgICAgICAgIHZhciBzID0gbXVsdGlwbGVTZXRbc2ldO1xuICAgICAgICAgICAgICAgIGlmIChzLnRpZXJfdHlwZSA9PSAnYmFtJyAmJiAhcy5pbmRleEJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFtc1tzLmJsb2IubmFtZV0gPSBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocy50aWVyX3R5cGUgPT0gJ3RhYml4JyAmJiAhcy5pbmRleEJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFiaXhlc1tzLmJsb2IubmFtZV0gPSBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IG11bHRpcGxlU2V0Lmxlbmd0aDsgKytzaSkge1xuICAgICAgICAgICAgICAgIHZhciBzID0gbXVsdGlwbGVTZXRbc2ldO1xuICAgICAgICAgICAgICAgIGlmIChzLnRpZXJfdHlwZSA9PT0gJ2JhaScpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhaVBhdHRlcm4gPSBuZXcgUmVnRXhwKCcoLispXFxcXC5iYWkkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IGJhaVBhdHRlcm4uZXhlYyhzLmJsb2IubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBiYW1zW21hdGNoWzFdXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFtc1ttYXRjaFsxXV0uaW5kZXhCbG9iID0gcy5ibG9iO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlZEluZGljZXMucHVzaChzaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMudGllcl90eXBlID09PSAndGFiaXgtaW5kZXgnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YmlQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnKC4rKVxcXFwudGJpJCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSB0YmlQYXR0ZXJuLmV4ZWMocy5ibG9iLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgdGFiaXhlc1ttYXRjaFsxXV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYml4ZXNbbWF0Y2hbMV1dLmluZGV4QmxvYiA9IHMuYmxvYjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRJbmRpY2VzLnB1c2goc2kpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBiaSA9IHVzZWRJbmRpY2VzLmxlbmd0aCAtIDE7IGJpID49IDA7IC0tYmkpIHtcbiAgICAgICAgICAgICAgICBtdWx0aXBsZVNldC5zcGxpY2UodXNlZEluZGljZXNbYmldLCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXBkYXRlTXVsdGlwbGVTdGF0dXMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHVwZGF0ZU11bHRpcGxlU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuICAgICAgICB2YXIgbmVlZHNJbmRleCA9IGZhbHNlO1xuICAgICAgICB2YXIgbXVsdFRhYmxlID0gbWFrZUVsZW1lbnQoJ3RhYmxlJywgbXVsdGlwbGVTZXRcbiAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKHMpIHtyZXR1cm4gIXMuaGlkZGVufSlcbiAgICAgICAgICAubWFwKGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndGQnLCBzLm5hbWUgfHwgcy5ibG9iLm5hbWUpKTtcbiAgICAgICAgICAgIHZhciB0eXBlQ29udGVudDtcbiAgICAgICAgICAgIGlmIChzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgdHlwZUNvbnRlbnQgPSBtYWtlRWxlbWVudCgnc3BhbicsICdFcnJvcicsIG51bGwsIHtjb2xvcjogJ3JlZCd9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocy50aWVyX3R5cGUpIHtcbiAgICAgICAgICAgICAgICB0eXBlQ29udGVudCA9IHMucGF5bG9hZCB8fCBzLnRpZXJfdHlwZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHlwZUNvbnRlbnQgPSB0aGlzQi5tYWtlTG9hZGVyKDE2KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGNjcztcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9ICd1bmtub3duJztcbiAgICAgICAgICAgIGlmIChzLnRpZXJfdHlwZSA9PSAnYndnJyB8fCBzLnRpZXJfdHlwZSA9PSAnbWVtc3RvcmUnKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSAnb2theSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHMudGllcl90eXBlID09ICdiYW0nKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBzLmluZGV4QmxvYiA/ICdva2F5JyA6ICduZWVkcy1pbmRleCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHMudGllcl90eXBlID09ICd0YWJpeCcpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IHMuaW5kZXhCbG9iID8gJ29rYXknIDogJ25lZWRzLWluZGV4JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YXRlID09ICdva2F5Jykge1xuICAgICAgICAgICAgICAgIGNjcyA9IG1ha2VFbGVtZW50KCdzZWxlY3QnLCBudWxsLCBudWxsLCB7d2lkdGg6ICcxNTBweCd9KTtcbiAgICAgICAgICAgICAgICBjY3MuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsIHRoaXNCLm5hbWVGb3JDb29yZFN5c3RlbSh0aGlzQi5jb29yZFN5c3RlbSksIHt2YWx1ZTogJ19fZGVmYXVsdF9fJ30pKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpc0IuY2hhaW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNzayBpbiB0aGlzQi5jaGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcyA9IHRoaXNCLmNoYWluc1tjc2tdLmNvb3JkcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjcy5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgdGhpc0IubmFtZUZvckNvb3JkU3lzdGVtKGNzKSwge3ZhbHVlOiBjc2t9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2NzLnZhbHVlID0gcy5tYXBwaW5nIHx8ICdfX2RlZmF1bHRfXyc7XG5cbiAgICAgICAgICAgICAgICBjY3MuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgcy5tYXBwaW5nID0gY2NzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzKTtcbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09ICduZWVkcy1pbmRleCcpIHtcbiAgICAgICAgICAgICAgICBjY3MgPSBtYWtlRWxlbWVudCgnc3BhbicsICdOZWVkcyBpbmRleCcsIHt9LCB7Y29sb3I6ICdyZWQnfSk7XG4gICAgICAgICAgICAgICAgbmVlZHNJbmRleCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBtYWtlRWxlbWVudCgndHInLCBbbWFrZUVsZW1lbnQoJ3RkJywgcy5uYW1lIHx8IHMuYmxvYi5uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgdHlwZUNvbnRlbnQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBjY3MpXSk7XG5cbiAgICAgICAgfSksIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9KTtcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtdWx0VGFibGUpO1xuXG4gICAgICAgIGlmIChuZWVkc0luZGV4KSB7XG4gICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgJ1NvbWUgb2YgdGhlc2UgZmlsZXMgYXJlIG1pc3NpbmcgcmVxdWlyZWQgaW5kZXggKC5iYWkgb3IgLnRiaSkgZmlsZXMuICBGb3Igc2VjdXJpdHkgcmVhc29ucywgd2ViIGFwcGxpY2F0aW9ucyBsaWtlIERhbGxpYW5jZSBjYW4gb25seSBhY2Nlc3MgbG9jYWwgZmlsZXMgd2hpY2ggeW91IGhhdmUgZXhwbGljaXR5IHNlbGVjdGVkLiAgUGxlYXNlIHVzZSB0aGUgZmlsZSBjaG9vc2VyIGJlbG93IHRvIHNlbGVjdCB0aGUgYXBwcm9wcmlhdGUgaW5kZXggZmlsZScpKTtcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0luZGV4IGZpbGUocyk6ICcpKTtcbiAgICAgICAgICAgIHZhciBpbmRleEZpbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2ZpbGUnLCBtdWx0aXBsZTogJ211bHRpcGxlJ30pO1xuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChpbmRleEZpbGUpO1xuICAgICAgICAgICAgaW5kZXhGaWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZpbGVzZXQgY2hhbmdlZCcpO1xuICAgICAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IGluZGV4RmlsZS5maWxlcyB8fCBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmlsZUxpc3QubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gZmlsZUxpc3RbZmldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5zID0ge2Jsb2I6IGYsIGhpZGRlbjogdHJ1ZX07XG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZVNldC5wdXNoKG5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2JlTXVsdGlwbGUobnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGNhbkJ1dHRvbiA9IG1ha2VFbGVtZW50KCdidXR0b24nLCAnQ2FuY2VsJywge2NsYXNzTmFtZTogJ2J0bid9KTtcbiAgICBjYW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGN1c3RvbU1vZGUgPT09ICdmaW5hbGl6ZS1iaW4nKVxuICAgICAgICAgICAgc3dpdGNoVG9CaW5Nb2RlKCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHN3aXRjaFRvQ3VzdG9tTW9kZSgpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHZhciByZWZyZXNoQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2J1dHRvbicsICdSZWZyZXNoJywge2NsYXNzTmFtZTogJ2J0bid9KTtcbiAgICByZWZyZXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXNCLnF1ZXJ5UmVnaXN0cnkoX19tYXBwaW5nKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgdGhpcy5tYWtlVG9vbHRpcChyZWZyZXNoQnV0dG9uLCAnQ2xpY2sgdG8gcmUtZmV0Y2ggZGF0YSBmcm9tIHRoZSBEQVMgcmVnaXN0cnknKTtcblxuICAgIHZhciBidXR0b25Ib2xkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgW2FkZEJ1dHRvbiwgJyAnLCBjYW5CdXR0b24sICcgJywgcmVmcmVzaEJ1dHRvbl0pO1xuICAgIGJ1dHRvbkhvbGRlci5zdHlsZS5tYXJnaW4gPSAnMTBweCc7XG4gICAgYXNmb3JtLmFwcGVuZENoaWxkKGJ1dHRvbkhvbGRlcik7XG5cbiAgICBwb3B1cC5hcHBlbmRDaGlsZChhc2Zvcm0pO1xuICAgIG1ha2VTdGFiKHRoaXNCLmF2YWlsYWJsZVNvdXJjZXMpO1xuXG4gICAgdGhpcy5zaG93VG9vbFBhbmVsKHBvcHVwKTtcbiAgICB0aGlzLnNldFVpTW9kZSgnYWRkJyk7XG5cbiAgICBpZiAoZmlyc3REZWZCdXR0b24pIHtcbiAgICAgICAgYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIGZpcnN0RGVmQnV0dG9uKTtcbiAgICAgICAgbWFrZVN0YWIobmV3IE9ic2VydmVkKGZpcnN0RGVmU291cmNlcykpO1xuICAgIH1cbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcbi8vXG4vLyB0cml4LmpzOiBVQ1NDLXN0eWxlIGZyZWUgdGV4dCBpbmRpY2VzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gY29ubmVjdFRyaXgoaXgsIGl4eCwgY2FsbGJhY2spIHtcbiAgICBpeHguZmV0Y2hBc1RleHQoZnVuY3Rpb24oaXh4RGF0YSkge1xuICAgICAgICBpZiAoIWl4eERhdGEpIFxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgZmV0Y2ggaW5kZXgtaW5kZXhcIik7XG5cbiAgICAgICAgdmFyIHRva3MgPSBpeHhEYXRhLnNwbGl0KC8oLispKFswLTlBLUZdezEwfSlcXG4vKTtcblxuICAgICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgICB2YXIgb2Zmc2V0cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciB0aSA9IDE7IHRpIDwgdG9rcy5sZW5ndGg7IHRpICs9IDMpIHtcbiAgICAgICAgICAgIGtleXMucHVzaCh0b2tzW3RpXSk7XG4gICAgICAgICAgICBvZmZzZXRzLnB1c2gocGFyc2VJbnQodG9rc1t0aSsxXSwgMTYpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgVHJpeEluZGV4KGtleXMsIG9mZnNldHMsIGl4KSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIFRyaXhJbmRleChrZXlzLCBvZmZzZXRzLCBpeCkge1xuICAgIHRoaXMua2V5cyA9IGtleXM7XG4gICAgdGhpcy5vZmZzZXRzID0gb2Zmc2V0cztcbiAgICB0aGlzLml4ID0gaXg7XG59XG5cblRyaXhJbmRleC5wcm90b3R5cGUubG9va3VwID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XG4gICAgdmFyIGl4c2xpY2U7XG5cbiAgICB2YXIgcXRhZyA9IChxdWVyeSArICcgICAgICcpLnN1YnN0cmluZygwLDUpLnRvTG93ZXJDYXNlKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHF0YWcubG9jYWxlQ29tcGFyZSh0aGlzLmtleXNbaV0pIDwgMCkge1xuICAgICAgICAgICAgaXhzbGljZSA9IHRoaXMuaXguc2xpY2UodGhpcy5vZmZzZXRzW2kgLSAxXSwgdGhpcy5vZmZzZXRzW2ldIC0gdGhpcy5vZmZzZXRzW2kgLSAxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghaXhzbGljZSkge1xuICAgICAgICBpeHNsaWNlID0gdGhpcy5peC5zbGljZSh0aGlzLm9mZnNldHNbdGhpcy5vZmZzZXRzLmxlbmd0aCAtIDFdKTtcbiAgICB9XG5cbiAgICBpeHNsaWNlLmZldGNoQXNUZXh0KGZ1bmN0aW9uKGlzdCkge1xuICAgICAgICB2YXIgbGluZXMgPSBpc3Quc3BsaXQoJ1xcbicpO1xuICAgICAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgbGluZXMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgICAgICBpZiAobGluZXNbbGldLmluZGV4T2YocXVlcnkudG9Mb3dlckNhc2UoKSArICcgJykgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhsaW5lc1tsaV0uc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgIH0pO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGNvbm5lY3RUcml4OiBjb25uZWN0VHJpeFxuICAgIH07XG59IiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIHR3b0JpdC5qczogcGFja2VkLWJpbmFyeSByZWZlcmVuY2Ugc2VxdWVuY2VzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYmluID0gcmVxdWlyZSgnLi9iaW4nKTtcbiAgICB2YXIgcmVhZEludCA9IGJpbi5yZWFkSW50O1xuICAgIHZhciByZWFkSW50QkUgPSBiaW4ucmVhZEludEJFO1xuICAgIHZhciByZWFkSW50NjRCRSA9IGJpbi5yZWFkSW50NjRCRSxcbiAgICAgICAgcmVhZEludDY0TEUgPSBiaW4ucmVhZEludDY0TEU7XG5cbiAgICB2YXIgc3BhbnMgPSByZXF1aXJlKCcuL3NwYW5zJyk7XG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XG4gICAgdmFyIHVuaW9uID0gc3BhbnMudW5pb247XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IHNwYW5zLmludGVyc2VjdGlvbjtcbn1cblxudmFyIFRXT0JJVF9NQUdJQyA9IDB4MWE0MTI3NDM7XG52YXIgVFdPQklUX01BR0lDX0JFID0gMHg0MzI3NDExYTtcbnZhciBIRUFERVJfQkxPQ0tfU0laRSA9IDEyNTAwO1xuXG5mdW5jdGlvbiBUd29CaXRGaWxlKCkge1xufVxuXG5mdW5jdGlvbiBtYWtlVHdvQml0KGZldGNoYWJsZSwgY250KSB7XG4gICAgdmFyIHRiID0gbmV3IFR3b0JpdEZpbGUoKTtcbiAgICB0Yi5kYXRhID0gZmV0Y2hhYmxlO1xuICAgIHZhciBoZWFkZXJCbG9ja1NpemUgPSBIRUFERVJfQkxPQ0tfU0laRTtcbiAgICB2YXIgaGVhZGVyQmxvY2tzRmV0Y2hlZD0wO1xuICAgIFxuICAgIHRiLmRhdGEuc2xpY2UoMCwgaGVhZGVyQmxvY2tTaXplKS5mZXRjaChmdW5jdGlvbihyKSB7XG4gICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgcmV0dXJuIGNudChudWxsLCBcIkNvdWxkbid0IGFjY2VzcyBkYXRhXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHIpO1xuICAgICAgICB2YXIgbWFnaWMgPSByZWFkSW50KGJhLCAwKTtcbiAgICAgICAgaWYgKG1hZ2ljID09IFRXT0JJVF9NQUdJQykge1xuICAgICAgICAgICAgdGIucmVhZEludCA9IHJlYWRJbnQ7XG4gICAgICAgICAgICB0Yi5yZWFkSW50NjQgPSByZWFkSW50NjRMRTtcbiAgICAgICAgfSBlbHNlIGlmIChtYWdpYyA9PSBUV09CSVRfTUFHSUNfQkUpIHtcbiAgICAgICAgICAgIHRiLnJlYWRJbnQgPSByZWFkSW50QkU7XG4gICAgICAgICAgICB0Yi5yZWFkSW50NjQgPSByZWFkSW50NjRCRTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjbnQobnVsbCwgXCJOb3QgYSAuMmJpdCBmaWxlLCBtYWdpYz0weFwiICsgbWFnaWMudG9TdHJpbmcoMTYpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRiLnZlcnNpb24gPSB0Yi5yZWFkSW50KGJhLCA0KTtcbiAgICAgICAgaWYgKHRiLnZlcnNpb24gPCAwIHx8IHRiLnZlcnNpb24gPiAxKSB7XG4gICAgICAgICAgICByZXR1cm4gY250KG51bGwsICdVbnN1cHBvcnRlZCB2ZXJzaW9uICcgKyB0Yi52ZXJzaW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRiLnNlcUNvdW50ID0gdGIucmVhZEludChiYSwgOCk7XG4gICAgICAgIHRiLnNlcURpY3QgPSB7fTtcblxuICAgICAgICB2YXIgcCA9IDE2LCBpPTA7XG4gICAgICAgIHZhciBvID0gMDsgIC8vIE9mZnNldCBvZiB0aGUgY3VycmVudCBibG9jayBpZiB3ZSBuZWVkIHRvIGZldGNoIG11bHRpcGxlIGhlYWRlciBibG9ja3MuXG5cbiAgICAgICAgdmFyIHBhcnNlU2VxSW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2hpbGUgKGkgPCB0Yi5zZXFDb3VudCkge1xuICAgICAgICAgICAgICAgIHZhciBucyA9IGJhW3BdO1xuICAgICAgICAgICAgICAgIGlmIChwICsgbnMgKyAyICsgKHRiLnZlcnNpb24gPT0gMCA/IDQgOiA4KSA+PSBiYS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyQmxvY2tzRmV0Y2hlZCArPSBoZWFkZXJCbG9ja1NpemU7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckJsb2NrU2l6ZSA9IE1hdGgubWF4KEhFQURFUl9CTE9DS19TSVpFLE1hdGguZmxvb3IoaGVhZGVyQmxvY2tzRmV0Y2hlZCp0Yi5zZXFDb3VudC9pKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0Yi5kYXRhLnNsaWNlKG8gKyBwLCBoZWFkZXJCbG9ja1NpemUpLmZldGNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvICs9IHA7XG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhID0gbmV3IFVpbnQ4QXJyYXkocik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZVNlcUluZm8oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgKytwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8PSBuczsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcCsrXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRiLnZlcnNpb24gPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IHRiLnJlYWRJbnQoYmEsIHApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcCArPSA0O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IHRiLnJlYWRJbnQ2NChiYSwgcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwICs9IDg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGIuc2VxRGljdFtuYW1lXSA9IG5ldyBUd29CaXRTZXEodGIsIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY250KHRiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnNlU2VxSW5mbygpO1xuICAgICAgICBcbiAgICB9KTtcbn1cblxuVHdvQml0RmlsZS5wcm90b3R5cGUuZ2V0U2VxID0gZnVuY3Rpb24oY2hyKSB7XG4gICAgdmFyIHNlcSA9IHRoaXMuc2VxRGljdFtjaHJdO1xuICAgIGlmICghc2VxKSB7XG4gICAgICAgIHNlcSA9IHRoaXMuc2VxRGljdFsnY2hyJyArIGNocl07XG4gICAgfVxuICAgIHJldHVybiBzZXE7XG59XG5cblR3b0JpdEZpbGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgY250KSB7XG4gICAgdmFyIHNlcSA9IHRoaXMuZ2V0U2VxKGNocik7XG4gICAgaWYgKCFzZXEpIHtcbiAgICAgICAgcmV0dXJuIGNudChudWxsLCBcIkNvdWxkbid0IGZpbmQgXCIgKyBjaHIpO1xuICAgIH0gZWxzZSBpZiAobWF4IDw9IG1pbikge1xuICAgICAgICByZXR1cm4gY250KCcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzZXEuZmV0Y2gobWluLCBtYXgsIGNudCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBUd29CaXRTZXEodGJmLCBvZmZzZXQpIHtcbiAgICB0aGlzLnRiZiA9IHRiZjtcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbn1cblxuVHdvQml0U2VxLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oY250KSB7XG4gICAgaWYgKHRoaXMuc2VxT2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiBjbnQoKTtcbiAgICB9XG5cbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXNCLnRiZi5kYXRhLnNsaWNlKHRoaXNCLm9mZnNldCwgOCkuZmV0Y2goZnVuY3Rpb24ocjEpIHtcbiAgICAgICAgaWYgKCFyMSkge1xuICAgICAgICAgICAgcmV0dXJuIGNudCgnRmV0Y2ggZmFpbGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkocjEpO1xuICAgICAgICB0aGlzQi5fbGVuZ3RoID0gdGhpc0IudGJmLnJlYWRJbnQoYmEsIDApO1xuICAgICAgICB0aGlzQi5uQmxvY2tDbnQgPSB0aGlzQi50YmYucmVhZEludChiYSwgNCk7XG4gICAgICAgIHRoaXNCLnRiZi5kYXRhLnNsaWNlKHRoaXNCLm9mZnNldCArIDgsIHRoaXNCLm5CbG9ja0NudCo4ICsgNCkuZmV0Y2goZnVuY3Rpb24ocjIpIHtcbiAgICAgICAgICAgIGlmICghcjIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY250KCdGZXRjaCBmYWlsZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHIyKTtcbiAgICAgICAgICAgIHZhciBuYnMgPSBudWxsO1xuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0aGlzQi5uQmxvY2tDbnQ7ICsrYikge1xuICAgICAgICAgICAgICAgIHZhciBuYk1pbiA9IHRoaXNCLnRiZi5yZWFkSW50KGJhLCBiICogNCk7XG4gICAgICAgICAgICAgICAgdmFyIG5iTGVuID0gdGhpc0IudGJmLnJlYWRJbnQoYmEsIChiICsgdGhpc0IubkJsb2NrQ250KSAqIDQpO1xuICAgICAgICAgICAgICAgIHZhciBuYiA9IG5ldyBSYW5nZShuYk1pbiwgbmJNaW4gKyBuYkxlbiAtIDEpO1xuICAgICAgICAgICAgICAgIGlmICghbmJzKSB7XG4gICAgICAgICAgICAgICAgICAgIG5icyA9IG5iO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5icyA9IHVuaW9uKG5icywgbmIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNCLm5CbG9ja3MgPSBuYnM7XG4gICAgICAgICAgICB0aGlzQi5tQmxvY2tDbnQgPSB0aGlzQi50YmYucmVhZEludChiYSwgdGhpc0IubkJsb2NrQ250KjgpO1xuICAgICAgICAgICAgdGhpc0Iuc2VxTGVuZ3RoID0gKCh0aGlzQi5fbGVuZ3RoICsgMykvNCl8MDtcbiAgICAgICAgICAgIHRoaXNCLnNlcU9mZnNldCA9IHRoaXNCLm9mZnNldCArIDE2ICsgKCh0aGlzQi5uQmxvY2tDbnQgKyB0aGlzQi5tQmxvY2tDbnQpICogOCk7XG4gICAgICAgICAgICByZXR1cm4gY250KCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG52YXIgVFdPQklUX1RBQkxFID0gWydUJywgJ0MnLCAnQScsICdHJ107XG5cblR3b0JpdFNlcS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihtaW4sIG1heCwgY250KSB7XG4gICAgLS1taW47IC0tbWF4OyAgICAgICAvLyBTd2l0Y2ggdG8gemVyby1iYXNlZC5cbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuaW5pdChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBjbnQobnVsbCwgZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZldGNoTWluID0gbWluID4+IDI7XG4gICAgICAgIHZhciBmZXRjaE1heCA9IG1heCArIDMgPj4gMjtcbiAgICAgICAgaWYgKGZldGNoTWluIDwgMCB8fCBmZXRjaE1heCA+IHRoaXNCLnNlcUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGNudCgnQ29vcmRpbmF0ZXMgb3V0IG9mIGJvdW5kczogJyArIG1pbiArICc6JyArIG1heCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzQi50YmYuZGF0YS5zbGljZSh0aGlzQi5zZXFPZmZzZXQgKyBmZXRjaE1pbiwgZmV0Y2hNYXggLSBmZXRjaE1pbikuc2FsdGVkKCkuZmV0Y2goZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgaWYgKHIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbnQoJ1NlcUZldGNoIGZhaWxlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNlcURhdGEgPSBuZXcgVWludDhBcnJheShyKTtcblxuICAgICAgICAgICAgdmFyIG5TcGFucyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXNCLm5CbG9ja3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW50ciA9IGludGVyc2VjdGlvbihuZXcgUmFuZ2UobWluLCBtYXgpLCB0aGlzQi5uQmxvY2tzKTtcbiAgICAgICAgICAgICAgICBpZiAoaW50cikge1xuICAgICAgICAgICAgICAgICAgICBuU3BhbnMgPSBpbnRyLnJhbmdlcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHNlcXN0ciA9ICcnO1xuICAgICAgICAgICAgdmFyIHB0ciA9IG1pbjtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbGxTZXEoZnNtKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHB0ciA8PSBmc20pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJiID0gKHB0ciA+PiAyKSAtIGZldGNoTWluO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmkgPSBwdHIgJiAweDM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBidiA9IHNlcURhdGFbYmJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5pID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAoYnYgPj4gNikgJiAweDM7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmkgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbiA9IChidiA+PiA0KSAmIDB4MztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuaSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuID0gKGJ2ID4+IDIpICYgMHgzO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbiA9IChidikgJiAweDM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2Vxc3RyICs9IFRXT0JJVF9UQUJMRVtuXTtcbiAgICAgICAgICAgICAgICAgICAgKytwdHI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IG5TcGFucy5sZW5ndGg7ICsrYikge1xuICAgICAgICAgICAgICAgIHZhciBuYiA9IG5TcGFuc1tiXTtcbiAgICAgICAgICAgICAgICBpZiAocHRyID4gbmIubWluKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ04gbWlzbWF0Y2guLi4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHRyIDwgbmIubWluKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbFNlcShuYi5taW4oKSAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3aGlsZSAocHRyIDw9IG5iLm1heCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcXN0ciArPSAnTic7XG4gICAgICAgICAgICAgICAgICAgICsrcHRyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwdHIgPD0gbWF4KSB7XG4gICAgICAgICAgICAgICAgZmlsbFNlcShtYXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNudChzZXFzdHIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuVHdvQml0U2VxLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbihjbnQpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuaW5pdChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBjbnQobnVsbCwgZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNudCh0aGlzQi5fbGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIG1ha2VUd29CaXQ6IG1ha2VUd29CaXRcbiAgICB9O1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIHV0aWxzLmpzOiBvZGRzLCBzb2RzLCBhbmQgZW5kcy5cbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBzaGExID0gcmVxdWlyZSgnLi9zaGExJyk7XG4gICAgdmFyIGI2NF9zaGExID0gc2hhMS5iNjRfc2hhMTtcbn1cblxudmFyIE5VTV9SRUdFWFAgPSBuZXcgUmVnRXhwKCdbMC05XSsnKTtcblxuZnVuY3Rpb24gc3RyaW5nVG9OdW1iZXJzQXJyYXkoc3RyKSB7XG4gICAgdmFyIG51bXMgPSBuZXcgQXJyYXkoKTtcbiAgICB2YXIgbTtcbiAgICB3aGlsZSAobSA9IE5VTV9SRUdFWFAuZXhlYyhzdHIpKSB7XG4gICAgICAgIG51bXMucHVzaChtWzBdKTtcbiAgICAgICAgc3RyPXN0ci5zdWJzdHJpbmcobS5pbmRleCArIChtWzBdLmxlbmd0aCkpO1xuICAgIH1cbiAgICByZXR1cm4gbnVtcztcbn1cblxudmFyIFNUUklDVF9OVU1fUkVHRVhQID0gbmV3IFJlZ0V4cCgnXlswLTldKyQnKTtcblxuZnVuY3Rpb24gc3RyaW5nVG9JbnQoc3RyKSB7XG4gICAgc3RyID0gc3RyLnJlcGxhY2UobmV3IFJlZ0V4cCgnLCcsICdnJyksICcnKTtcbiAgICBpZiAoIVNUUklDVF9OVU1fUkVHRVhQLnRlc3Qoc3RyKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHN0cnwwO1xufVxuXG5mdW5jdGlvbiBwdXNobmV3KGEsIHYpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGFbaV0gPT0gdikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGEucHVzaCh2KTtcbn1cblxuZnVuY3Rpb24gcHVzaG8ob2JqLCBrLCB2KSB7XG4gICAgaWYgKG9ialtrXSkge1xuICAgICAgICBvYmpba10ucHVzaCh2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmpba10gPSBbdl07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwdXNobmV3byhvYmosIGssIHYpIHtcbiAgICB2YXIgYSA9IG9ialtrXTtcbiAgICBpZiAoYSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHsgICAgLy8gaW5kZXhPZiByZXF1aXJlcyBKUzE2IDotKC5cbiAgICAgICAgICAgIGlmIChhW2ldID09IHYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYS5wdXNoKHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9ialtrXSA9IFt2XTtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gcGljayhhLCBiLCBjLCBkKVxue1xuICAgIGlmIChhKSB7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH0gZWxzZSBpZiAoYikge1xuICAgICAgICByZXR1cm4gYjtcbiAgICB9IGVsc2UgaWYgKGMpIHtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfSBlbHNlIGlmIChkKSB7XG4gICAgICAgIHJldHVybiBkO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcHVzaG5ldyhsLCBvKVxue1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbC5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAobFtpXSA9PSBvKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgbC5wdXNoKG8pO1xufVxuXG5mdW5jdGlvbiBhcnJheUVxdWFscyhhLCBiKSB7XG4gICAgaWYgKCFhIHx8ICFiIHx8IGEubGVuZ3RoICE9PSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChhW2ldICE9PSBiW2ldKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBhcnJheUluZGV4T2YoYSwgeCkge1xuICAgIGlmICghYSkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChhW2ldID09PSB4KSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5cbmZ1bmN0aW9uIGFycmF5UmVtb3ZlKGEsIHgpIHtcbiAgICB2YXIgaSA9IGFycmF5SW5kZXhPZihhLCB4KTtcbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgIGEuc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vL1xuLy8gRE9NIHV0aWxpdGllc1xuLy9cblxuXG5mdW5jdGlvbiBtYWtlRWxlbWVudCh0YWcsIGNoaWxkcmVuLCBhdHRyaWJzLCBzdHlsZXMpXG57XG4gICAgdmFyIGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKCEgKGNoaWxkcmVuIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtjaGlsZHJlbl07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGMgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChjKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjID09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyArIGMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQoYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKGF0dHJpYnMpIHtcbiAgICAgICAgZm9yICh2YXIgbCBpbiBhdHRyaWJzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVsZVtsXSA9IGF0dHJpYnNbbF07XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHNldHRpbmcgJyArIGwpO1xuICAgICAgICAgICAgICAgIHRocm93KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzdHlsZXMpIHtcbiAgICAgICAgZm9yICh2YXIgbCBpbiBzdHlsZXMpIHtcbiAgICAgICAgICAgIGVsZS5zdHlsZVtsXSA9IHN0eWxlc1tsXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZWxlO1xufVxuXG5mdW5jdGlvbiBtYWtlRWxlbWVudE5TKG5hbWVzcGFjZSwgdGFnLCBjaGlsZHJlbiwgYXR0cmlicylcbntcbiAgICB2YXIgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgdGFnKTtcbiAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKCEgKGNoaWxkcmVuIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtjaGlsZHJlbl07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGMgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYyA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGMgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBzZXRBdHRycyhlbGUsIGF0dHJpYnMpO1xuICAgIHJldHVybiBlbGU7XG59XG5cbnZhciBhdHRyX25hbWVfY2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gc2V0QXR0cihub2RlLCBrZXksIHZhbHVlKVxue1xuICAgIHZhciBhdHRyID0gYXR0cl9uYW1lX2NhY2hlW2tleV07XG4gICAgaWYgKCFhdHRyKSB7XG4gICAgICAgIHZhciBfYXR0ciA9ICcnO1xuICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGtleS5sZW5ndGg7ICsrYykge1xuICAgICAgICAgICAgdmFyIGNjID0ga2V5LnN1YnN0cmluZyhjLCBjKzEpO1xuICAgICAgICAgICAgdmFyIGxjYyA9IGNjLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAobGNjICE9IGNjKSB7XG4gICAgICAgICAgICAgICAgX2F0dHIgPSBfYXR0ciArICctJyArIGxjYztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX2F0dHIgPSBfYXR0ciArIGNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF0dHJfbmFtZV9jYWNoZVtrZXldID0gX2F0dHI7XG4gICAgICAgIGF0dHIgPSBfYXR0cjtcbiAgICB9XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUpO1xufVxuXG5mdW5jdGlvbiBzZXRBdHRycyhub2RlLCBhdHRyaWJzKVxue1xuICAgIGlmIChhdHRyaWJzKSB7XG4gICAgICAgIGZvciAodmFyIGwgaW4gYXR0cmlicykge1xuICAgICAgICAgICAgc2V0QXR0cihub2RlLCBsLCBhdHRyaWJzW2xdKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbmZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKG5vZGUpXG57XG4gICAgaWYgKCFub2RlIHx8ICFub2RlLmNoaWxkTm9kZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHdoaWxlIChub2RlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUuZmlyc3RDaGlsZCk7XG4gICAgfVxufVxuXG5cblxuLy9cbi8vIFdBUk5JTkc6IG5vdCBmb3IgZ2VuZXJhbCB1c2UhXG4vL1xuXG5mdW5jdGlvbiBtaW5pSlNPTmlmeShvLCBleGMpIHtcbiAgICBpZiAodHlwZW9mIG8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiAndW5kZWZpbmVkJztcbiAgICB9IGVsc2UgaWYgKG8gPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gJ251bGwnO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG8gPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFwiJ1wiICsgbyArIFwiJ1wiO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG8gPT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIFwiXCIgKyBvO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG8gPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHJldHVybiBcIlwiICsgbztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvID09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChvIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciBzID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgby5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHMgPSAocyA9PSBudWxsID8gJycgOiAocyArICcsICcpKSArIG1pbmlKU09OaWZ5KG9baV0sIGV4Yyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJ1snICsgKHM/czonJykgKyAnXSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleGMgPSBleGMgfHwge307XG4gICAgICAgICAgICB2YXIgcyA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIG8pIHtcbiAgICAgICAgICAgICAgICBpZiAoZXhjW2tdKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAoayAhPSB1bmRlZmluZWQgJiYgdHlwZW9mKG9ba10pICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IChzID09IG51bGwgPyAnJyA6IChzICsgJywgJykpICsgayArICc6ICcgKyBtaW5pSlNPTmlmeShvW2tdLCBleGMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAneycgKyAocz9zOicnKSArICd9JztcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAodHlwZW9mIG8pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2hhbGxvd0NvcHkobykge1xuICAgIHZhciBuID0ge307XG4gICAgZm9yICh2YXIgayBpbiBvKSB7XG4gICAgICAgIG5ba10gPSBvW2tdO1xuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gT2JzZXJ2ZWQoeCkge1xuICAgIHRoaXMudmFsdWUgPSB4O1xuICAgIHRoaXMubGlzdGVuZXJzID0gW107XG59XG5cbk9ic2VydmVkLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKGYpIHtcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGYpO1xufVxuXG5PYnNlcnZlZC5wcm90b3R5cGUuYWRkTGlzdGVuZXJBbmRGaXJlID0gZnVuY3Rpb24oZikge1xuICAgIHRoaXMubGlzdGVuZXJzLnB1c2goZik7XG4gICAgZih0aGlzLnZhbHVlKTtcbn1cblxuT2JzZXJ2ZWQucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oZikge1xuICAgIGFycmF5UmVtb3ZlKHRoaXMubGlzdGVuZXJzLCBmKTtcbn1cblxuT2JzZXJ2ZWQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlO1xufVxuXG5PYnNlcnZlZC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oeCkge1xuICAgIHRoaXMudmFsdWUgPSB4O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbaV0oeCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBBd2FpdGVkKCkge1xuICAgIHRoaXMucXVldWUgPSBbXTtcbn1cblxuQXdhaXRlZC5wcm90b3R5cGUucHJvdmlkZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAodGhpcy5yZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBcIlJlc291cmNlIGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWQuXCI7XG4gICAgfVxuXG4gICAgdGhpcy5yZXMgPSB4O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5xdWV1ZS5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLnF1ZXVlW2ldKHgpO1xuICAgIH1cbiAgICB0aGlzLnF1ZXVlID0gbnVsbDsgICAvLyBhdm9pZCBsZWFraW5nIGNsb3N1cmVzLlxufVxuXG5Bd2FpdGVkLnByb3RvdHlwZS5hd2FpdCA9IGZ1bmN0aW9uKGYpIHtcbiAgICBpZiAodGhpcy5yZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmKHRoaXMucmVzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVldWUucHVzaChmKTtcbiAgICB9XG59XG5cbnZhciBfX2RhbGxpYW5jZV9zYWx0U2VlZCA9IDA7XG5cbmZ1bmN0aW9uIHNhbHRVUkwodXJsKSB7XG4gICAgcmV0dXJuIHVybCArICc/c2FsdD0nICsgYjY0X3NoYTEoJycgKyBEYXRlLm5vdygpICsgJywnICsgKCsrX19kYWxsaWFuY2Vfc2FsdFNlZWQpKTtcbn1cblxuZnVuY3Rpb24gdGV4dFhIUih1cmwsIGNhbGxiYWNrLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgJiYgb3B0cy5zYWx0KSBcbiAgICAgICAgdXJsID0gc2FsdFVSTCh1cmwpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIHRpbWVvdXQ7XG4gICAgICAgIGlmIChvcHRzICYmIG9wdHMudGltZW91dCkge1xuICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aW1pbmcgb3V0ICcgKyB1cmwpO1xuICAgICAgICAgICAgICAgICAgICByZXEuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdUaW1lb3V0Jyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRzLnRpbWVvdXRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBcdCAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0KVxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgXHQgICAgICAgIGlmIChyZXEuc3RhdHVzIDwgMjAwIHx8IHJlcS5zdGF0dXMgPj0gMzAwKSB7XG4gICAgXHRcdCAgICBjYWxsYmFjayhudWxsLCAnRXJyb3IgY29kZSAnICsgcmVxLnN0YXR1cyk7XG4gICAgXHQgICAgICAgIH0gZWxzZSB7XG4gICAgXHRcdCAgICBjYWxsYmFjayhyZXEucmVzcG9uc2VUZXh0KTtcbiAgICBcdCAgICAgICAgfVxuICAgIFx0ICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgICAgICByZXEucmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuXG4gICAgICAgIGlmIChvcHRzICYmIG9wdHMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIHJlcS53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlcS5zZW5kKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWxsYmFjayhudWxsLCAnRXhjZXB0aW9uICcgKyBlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbGF0aXZlVVJMKGJhc2UsIHJlbCkge1xuICAgIC8vIEZJWE1FIHF1aXRlIG5haXZlIC0tIGdvb2QgZW5vdWdoIGZvciB0cmFja2h1YnM/XG5cbiAgICBpZiAocmVsLmluZGV4T2YoJ2h0dHA6JykgPT0gMCB8fCByZWwuaW5kZXhPZignaHR0cHM6JykgPT0gMCkge1xuICAgICAgICByZXR1cm4gcmVsO1xuICAgIH1cblxuICAgIHZhciBsaSA9IGJhc2UubGFzdEluZGV4T2YoJy8nKTtcbiAgICBpZiAobGkgPj0gMCkge1xuICAgICAgICByZXR1cm4gYmFzZS5zdWJzdHIoMCwgbGkgKyAxKSArIHJlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVsO1xuICAgIH1cbn1cblxudmFyIEFNSU5PX0FDSURfVFJBTlNMQVRJT04gPSB7XG4gICAgJ1RUVCc6ICdGJyxcbiAgICAnVFRDJzogJ0YnLFxuICAgICdUVEEnOiAnTCcsXG4gICAgJ1RURyc6ICdMJyxcbiAgICAnQ1RUJzogJ0wnLFxuICAgICdDVEMnOiAnTCcsXG4gICAgJ0NUQSc6ICdMJyxcbiAgICAnQ1RHJzogJ0wnLFxuICAgICdBVFQnOiAnSScsXG4gICAgJ0FUQyc6ICdJJyxcbiAgICAnQVRBJzogJ0knLFxuICAgICdBVEcnOiAnTScsXG4gICAgJ0dUVCc6ICdWJyxcbiAgICAnR1RDJzogJ1YnLFxuICAgICdHVEEnOiAnVicsXG4gICAgJ0dURyc6ICdWJyxcbiAgICAnVENUJzogJ1MnLFxuICAgICdUQ0MnOiAnUycsXG4gICAgJ1RDQSc6ICdTJyxcbiAgICAnVENHJzogJ1MnLFxuICAgICdDQ1QnOiAnUCcsXG4gICAgJ0NDQyc6ICdQJyxcbiAgICAnQ0NBJzogJ1AnLFxuICAgICdDQ0cnOiAnUCcsXG4gICAgJ0FDVCc6ICdUJyxcbiAgICAnQUNDJzogJ1QnLFxuICAgICdBQ0EnOiAnVCcsXG4gICAgJ0FDRyc6ICdUJyxcbiAgICAnR0NUJzogJ0EnLFxuICAgICdHQ0MnOiAnQScsXG4gICAgJ0dDQSc6ICdBJyxcbiAgICAnR0NHJzogJ0EnLFxuICAgICdUQVQnOiAnWScsXG4gICAgJ1RBQyc6ICdZJyxcbiAgICAnVEFBJzogJyonLCAgLy8gc3RvcFxuICAgICdUQUcnOiAnKicsICAvLyBzdG9wXG4gICAgJ0NBVCc6ICdIJyxcbiAgICAnQ0FDJzogJ0gnLFxuICAgICdDQUEnOiAnUScsXG4gICAgJ0NBRyc6ICdRJyxcbiAgICAnQUFUJzogJ04nLFxuICAgICdBQUMnOiAnTicsXG4gICAgJ0FBQSc6ICdLJyxcbiAgICAnQUFHJzogJ0snLFxuICAgICdHQVQnOiAnRCcsXG4gICAgJ0dBQyc6ICdEJyxcbiAgICAnR0FBJzogJ0UnLFxuICAgICdHQUcnOiAnRScsXG4gICAgJ1RHVCc6ICdDJyxcbiAgICAnVEdDJzogJ0MnLFxuICAgICdUR0EnOiAnKicsICAvLyBzdG9wXG4gICAgJ1RHRyc6ICdXJyxcbiAgICAnQ0dUJzogJ1InLFxuICAgICdDR0MnOiAnUicsXG4gICAgJ0NHQSc6ICdSJyxcbiAgICAnQ0dHJzogJ1InLFxuICAgICdBR1QnOiAnUycsXG4gICAgJ0FHQyc6ICdTJyxcbiAgICAnQUdBJzogJ1InLFxuICAgICdBR0cnOiAnUicsXG4gICAgJ0dHVCc6ICdHJyxcbiAgICAnR0dDJzogJ0cnLFxuICAgICdHR0EnOiAnRycsXG4gICAgJ0dHRyc6ICdHJ1xufVxuXG5mdW5jdGlvbiByZXNvbHZlVXJsVG9QYWdlKHJlbCkge1xuICAgIHJldHVybiBtYWtlRWxlbWVudCgnYScsIG51bGwsIHtocmVmOiByZWx9KS5ocmVmO1xufVxuXG4vL1xuLy8gTWlzc2luZyBBUElzXG4vLyBcblxuaWYgKCEoJ3RyaW0nIGluIFN0cmluZy5wcm90b3R5cGUpKSB7XG4gICAgU3RyaW5nLnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrLywgJycpLnJlcGxhY2UoL1xccyskLywgJycpO1xuICAgIH07XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgdGV4dFhIUjogdGV4dFhIUixcbiAgICAgICAgcmVsYXRpdmVVUkw6IHJlbGF0aXZlVVJMLFxuICAgICAgICByZXNvbHZlVXJsVG9QYWdlOiByZXNvbHZlVXJsVG9QYWdlLFxuICAgICAgICBzaGFsbG93Q29weTogc2hhbGxvd0NvcHksXG4gICAgICAgIHB1c2hvOiBwdXNobyxcbiAgICAgICAgcHVzaG5ldzogcHVzaG5ldyxcbiAgICAgICAgcHVzaG5ld286IHB1c2huZXdvLFxuICAgICAgICBhcnJheUluZGV4T2Y6IGFycmF5SW5kZXhPZixcbiAgICAgICAgYXJyYXlFcXVhbHM6IGFycmF5RXF1YWxzLFxuICAgICAgICBwaWNrOiBwaWNrLFxuXG4gICAgICAgIG1ha2VFbGVtZW50OiBtYWtlRWxlbWVudCxcbiAgICAgICAgbWFrZUVsZW1lbnROUzogbWFrZUVsZW1lbnROUyxcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW46IHJlbW92ZUNoaWxkcmVuLFxuXG4gICAgICAgIG1pbmlKU09OaWZ5OiBtaW5pSlNPTmlmeSxcblxuICAgICAgICBPYnNlcnZlZDogT2JzZXJ2ZWQsXG4gICAgICAgIEF3YWl0ZWQ6IEF3YWl0ZWQsXG5cbiAgICAgICAgQU1JTk9fQUNJRF9UUkFOU0xBVElPTjogQU1JTk9fQUNJRF9UUkFOU0xBVElPTlxuICAgIH1cbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcbi8vXG4vLyB2Y2YuanNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBzYSA9IHJlcXVpcmUoJy4vc291cmNlYWRhcHRlcnMnKTtcbiAgICB2YXIgZGFsbGlhbmNlX3JlZ2lzdGVyUGFyc2VyRmFjdG9yeSA9IHNhLnJlZ2lzdGVyUGFyc2VyRmFjdG9yeTtcblxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBEQVNTdHlsZXNoZWV0ID0gZGFzLkRBU1N0eWxlc2hlZXQ7XG4gICAgdmFyIERBU1N0eWxlID0gZGFzLkRBU1N0eWxlO1xuICAgIHZhciBEQVNGZWF0dXJlID0gZGFzLkRBU0ZlYXR1cmU7XG4gICAgdmFyIERBU0dyb3VwID0gZGFzLkRBU0dyb3VwO1xufVxuXG5mdW5jdGlvbiBWQ0ZQYXJzZXIoKSB7XG4gICAgdGhpcy5pbmZvID0gW107XG59XG5cbnZhciBWQ0ZfSU5GT19SRSA9IC8oW147PV0rKSg9KFteO10rKSk/Oz8vO1xudmFyIFZDRl9JTkZPX0hFQURFUiA9IC8jI0lORk89PChbXj5dKyk+LztcbnZhciBWQ0ZfSU5GT19IRUFERVJfVE9LID0gLyhbXiw9XSspPShbXixdK3xcIlteXCJdK1wiKSw/L1xuXG5WQ0ZQYXJzZXIucHJvdG90eXBlLmNyZWF0ZVNlc3Npb24gPSBmdW5jdGlvbihzaW5rKSB7XG4gICAgcmV0dXJuIG5ldyBWQ0ZQYXJzZVNlc3Npb24odGhpcywgc2luayk7XG59XG5cbmZ1bmN0aW9uIFZDRlBhcnNlU2Vzc2lvbihwYXJzZXIsIHNpbmspIHtcbiAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICB0aGlzLnNpbmsgID0gc2luaztcbn1cblxuVkNGUGFyc2VTZXNzaW9uLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICBpZiAobGluZS5sZW5ndGggPT0gMClcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChsaW5lWzBdID09ICcjJykge1xuICAgICAgICBpZiAobGluZS5sZW5ndGggPiAxICYmIGxpbmVbMV0gPT0gJyMnKSB7XG4gICAgICAgICAgICB2YXIgbSA9IFZDRl9JTkZPX0hFQURFUi5leGVjKGxpbmUpO1xuICAgICAgICAgICAgaWYgKG0pIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9rcyA9IG1bMV0uc3BsaXQoVkNGX0lORk9fSEVBREVSX1RPSyk7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gbnVsbCwgZGVzYyA9IG51bGw7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRva3MubGVuZ3RoIC0gMTsgdGkgKz0gMykge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gdG9rc1t0aSArIDFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0b2tzW3RpICsgMl0ucmVwbGFjZSgvXCIvZywgJycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09ICdJRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09ICdEZXNjcmlwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaWQgJiYgZGVzYykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlci5pbmZvLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICB7aWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6IGRlc2N9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHRva3MgPSBsaW5lLnNwbGl0KCdcXHQnKTtcbiAgICB2YXIgZiA9IG5ldyBEQVNGZWF0dXJlKCk7XG4gICAgZi5zZWdtZW50ID0gdG9rc1swXTtcbiAgICBmLmlkID0gdG9rc1syXVxuICAgIGYucmVmQWxsZWxlID0gdG9rc1szXTtcbiAgICBmLmFsdEFsbGVsZXMgPSB0b2tzWzRdLnNwbGl0KCcsJyk7XG4gICAgZi5taW4gPSBwYXJzZUludCh0b2tzWzFdKTtcbiAgICBmLm1heCA9IGYubWluICsgZi5yZWZBbGxlbGUubGVuZ3RoIC0gMTtcblxuICAgIHZhciBpbmZvVG9rcyA9IHRva3NbN10uc3BsaXQoVkNGX0lORk9fUkUpO1xuICAgIGYuaW5mbyA9IHt9O1xuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCBpbmZvVG9rcy5sZW5ndGg7IHRpICs9IDQpIHtcbiAgICAgICAgZi5pbmZvW2luZm9Ub2tzW3RpICsgMV1dID0gaW5mb1Rva3NbdGkgKyAzXTtcbiAgICB9XG5cblxuICAgIHZhciBhbHQgPSBmLmFsdEFsbGVsZXNbMF07XG4gICAgdmFyIHJlZiA9IGYucmVmQWxsZWxlO1xuICAgIGlmIChhbHQubGVuZ3RoID4gcmVmLmxlbmd0aCkge1xuICAgICAgICBmLnR5cGUgPSBcImluc2VydGlvblwiO1xuICAgICAgICBpZiAoYWx0LmluZGV4T2YocmVmKSA9PSAwKSB7XG4gICAgICAgICAgICBmLmluc2VydGlvbiA9IGFsdC5zdWJzdHIocmVmLmxlbmd0aCk7XG4gICAgICAgICAgICBmLm1pbiArPSByZWYubGVuZ3RoO1xuICAgICAgICAgICAgZi5tYXggPSBmLm1pbiAtIDE7IC8vIEVmZmVjdGl2ZWx5IFwiYmV0d2VlblwiIGJhc2VzLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZi5pbnNlcnRpb24gPSBhbHQ7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFsdC5sZW5ndGggPCByZWYubGVuZ3RoKSB7XG4gICAgICAgIGYudHlwZSA9IFwiZGVsZXRpb25cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmLnR5cGUgPSAnc3Vic3RpdHV0aW9uJztcbiAgICB9XG5cbiAgICB0aGlzLnNpbmsoZik7XG59XG5cblZDRlBhcnNlU2Vzc2lvbi5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbigpIHt9O1xuXG5WQ0ZQYXJzZXIucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcblxuICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ19fSU5TRVJUSU9OJztcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAncmdiKDUwLDgwLDI1NSknO1xuICAgICAgICB2YXJTdHlsZS5CR0NPTE9SID0gJyM4ODg4ODgnO1xuICAgICAgICB2YXJTdHlsZS5TVFJPS0VDT0xPUiA9ICdibGFjayc7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnaW5zZXJ0aW9uJ30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG4gICAge1xuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnUExJTVNPTEwnO1xuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZ2IoMjU1LCA2MCwgNjApJztcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcbiAgICAgICAgdmFyU3R5bGUuU1RST0tFQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlbGV0aW9uJ30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG4gICAge1xuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnUExJTVNPTEwnO1xuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZ2IoNTAsODAsMjU1KSc7XG4gICAgICAgIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XG4gICAgICAgIHZhclN0eWxlLlNUUk9LRUNPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XG59XG5cblZDRlBhcnNlci5wcm90b3R5cGUuZ2V0RGVmYXVsdEZJUHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZmlwID0gZnVuY3Rpb24oZmVhdHVyZSwgZmVhdHVyZUluZm8pIHtcbiAgICAgICAgZmVhdHVyZUluZm8uYWRkKFwiUmVmLiBhbGxlbGVcIiwgZmVhdHVyZS5yZWZBbGxlbGUpO1xuICAgICAgICBmZWF0dXJlSW5mby5hZGQoXCJBbHQuIGFsbGVsZXNcIiwgZmVhdHVyZS5hbHRBbGxlbGVzLmpvaW4oJywnKSk7XG5cbiAgICAgICAgaWYgKGZlYXR1cmUuaW5mbykge1xuICAgICAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IHNlbGYuaW5mby5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IHNlbGYuaW5mb1tpaV07XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IGZlYXR1cmUuaW5mb1tpbmZvLmlkXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZUluZm8uYWRkKGluZm8uZGVzYywgdmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNhbGxiYWNrKGZpcCk7XG59XG5cbmRhbGxpYW5jZV9yZWdpc3RlclBhcnNlckZhY3RvcnkoJ3ZjZicsIGZ1bmN0aW9uKCkge3JldHVybiBuZXcgVkNGUGFyc2VyKCl9KTtcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcbi8vXG4vLyB2ZXJzaW9uLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIFZFUlNJT04gPSB7XG4gICAgQ09ORklHOiA1LFxuICAgIE1BSk9SOiAgMCxcbiAgICBNSU5PUjogIDEzLFxuICAgIE1JQ1JPOiAgNyxcbiAgICBCUkFOQ0g6ICdkZXYnXG59O1xuXG5WRVJTSU9OLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZzID0gJycgKyB0aGlzLk1BSk9SICsgJy4nICsgdGhpcy5NSU5PUiArICcuJyArIHRoaXMuTUlDUk87XG4gICAgaWYgKHRoaXMuUEFUQ0gpIHtcbiAgICAgICAgdnMgPSB2cyArIHRoaXMuUEFUQ0g7XG4gICAgfVxuICAgIGlmICh0aGlzLkJSQU5DSCAmJiB0aGlzLkJSQU5DSCAhPSAnJykge1xuICAgICAgICB2cyA9IHZzICsgJy0nICsgdGhpcy5CUkFOQ0g7XG4gICAgfVxuICAgIHJldHVybiB2cztcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gVkVSU0lPTjtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcbi8vXG4vLyB6b29tc2xpZGVyLmpzOiBjdXN0b20gc2xpZGVyIGNvbXBvbmVudFxuLy9cblxuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIG1ha2Vab29tU2xpZGVyKG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICBcbiAgICB2YXIgbWluUG9zID0gMCwgbWF4UG9zID0gb3B0cy53aWR0aCB8fCAyMDA7XG4gICAgdmFyIG1pbiA9IDAsIG1heCA9IDIwMDtcbiAgICB2YXIgcG9zID0gNTAsIHBvczIgPSAxMDA7XG4gICAgdmFyIGxhYmVscyA9IFtdO1xuICAgIHZhciB0cmFjayA9IG1ha2VFbGVtZW50KCdocicsIG51bGwsIHtjbGFzc05hbWU6ICdzbGlkZXItdHJhY2snfSwge3dpZHRoOiAnJyArIChtYXhQb3N8MCkgKyAncHgnfSk7XG4gICAgdmFyIHRodW1iID0gbWFrZUVsZW1lbnQoJ2hyJywgbnVsbCwge2NsYXNzTmFtZTogJ3NsaWRlci10aHVtYiBhY3RpdmUnfSk7XG4gICAgdmFyIHRodW1iMiA9IG1ha2VFbGVtZW50KCdocicsIG51bGwsIHtjbGFzc05hbWU6ICdzbGlkZXItdGh1bWInfSk7XG4gICAgdmFyIHNsaWRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBbdHJhY2ssIHRodW1iLCB0aHVtYjJdLCB7Y2xhc3NOYW1lOiAnc2xpZGVyJ30sICB7d2lkdGg6ICcnICsgKChtYXhQb3N8MCkgKyAxMCkgKyAncHgnfSk7XG5cbiAgICBzbGlkZXIucmVtb3ZlTGFiZWxzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCBsYWJlbHMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgICAgICBzbGlkZXIucmVtb3ZlQ2hpbGQobGFiZWxzW2xpXSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFiZWxzID0gW107XG4gICAgfVxuXG4gICAgc2xpZGVyLmFkZExhYmVsID0gZnVuY3Rpb24odmFsLCB0eHQpIHtcbiAgICAgICAgdmFyIHBvcyA9IChtaW5Qb3MgKyAoKHZhbCAtIG1pbikgKiAobWF4UG9zIC0gbWluUG9zKSkvKG1heC1taW4pKXwwO1xuICAgICAgICB2YXIgbGFiZWwgPSBtYWtlRWxlbWVudCgnZGl2JywgdHh0LCB7Y2xhc3NOYW1lOiAnc2xpZGVyLWxhYmVsJ30sIHtcbiAgICAgICAgICAgIGxlZnQ6ICcnICsgKChtaW5Qb3MgKyAoKHZhbCAtIG1pbikgKiAobWF4UG9zIC0gbWluUG9zKSkvKG1heC1taW4pKXwwKSArICdweCdcbiAgICAgICAgfSk7XG4gICAgICAgIHNsaWRlci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgIGxhYmVscy5wdXNoKGxhYmVsKTtcbiAgICB9XG5cbiAgICB2YXIgb25DaGFuZ2UgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuICAgIG9uQ2hhbmdlLmluaXRFdmVudCgnY2hhbmdlJywgdHJ1ZSwgZmFsc2UpO1xuXG4gICAgZnVuY3Rpb24gc2V0UG9zKG5wKSB7XG4gICAgICAgIG5wID0gTWF0aC5taW4obnAsIG1heFBvcyk7XG4gICAgICAgIG5wID0gTWF0aC5tYXgobnAsIG1pblBvcyk7XG4gICAgICAgIHBvcyA9IG5wO1xuICAgICAgICB0aHVtYi5zdHlsZS5sZWZ0ID0gJycgKyBwb3MgKyAncHgnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFBvczIobnApIHtcbiAgICAgICAgbnAgPSBNYXRoLm1pbihucCwgbWF4UG9zKTtcbiAgICAgICAgbnAgPSBNYXRoLm1heChucCwgbWluUG9zKTtcbiAgICAgICAgcG9zMiA9IG5wO1xuICAgICAgICB0aHVtYjIuc3R5bGUubGVmdCA9ICcnICsgcG9zMiArICdweCc7XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNsaWRlciwgJ3ZhbHVlJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgIHtyZXR1cm4gbWluICsgKCgocG9zLW1pblBvcykgKiAobWF4LW1pbikpIC8gKG1heFBvcyAtIG1pblBvcykpO30sXG4gICAgICAgIHNldDogZnVuY3Rpb24odikge1xuICAgICAgICAgIHZhciBucCA9IG1pblBvcyArICgodi1taW4pICogKG1heFBvcy1taW5Qb3MpKS8obWF4LW1pbik7XG4gICAgICAgICAgc2V0UG9zKG5wKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNsaWRlciwgJ3ZhbHVlMicsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpICB7cmV0dXJuIG1pbiArICgoKHBvczItbWluUG9zKSAqIChtYXgtbWluKSkgLyAobWF4UG9zIC0gbWluUG9zKSk7fSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgdmFyIG5wID0gbWluUG9zICsgKCh2LW1pbikgKiAobWF4UG9zLW1pblBvcykpLyhtYXgtbWluKTtcbiAgICAgICAgICBzZXRQb3MyKG5wKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNsaWRlciwgJ2FjdGl2ZScsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtyZXR1cm4gdGh1bWIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA/IDEgOiAyfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICBpZiAoeCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgdGh1bWIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgdGh1bWIyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHVtYjIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgdGh1bWIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzbGlkZXIsICdtaW4nLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge3JldHVybiBtaW59LFxuICAgICAgc2V0OiBmdW5jdGlvbih2KSB7bWluID0gdn1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzbGlkZXIsICdtYXgnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge3JldHVybiBtYXh9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2KSB7bWF4ID0gdn1cbiAgICB9KTtcblxuICAgIHZhciBvZmZzZXQ7XG4gICAgdmFyIHdoaWNoO1xuXG4gICAgdmFyIHRodW1iTW91c2VEb3duID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgd2hpY2ggPSB0aGlzID09IHRodW1iID8gMSA6IDI7XG4gICAgICAgIGlmICh3aGljaCAhPSBzbGlkZXIuYWN0aXZlKSB7XG4gICAgICAgICAgICBzbGlkZXIuYWN0aXZlID0gd2hpY2g7XG4gICAgICAgICAgICBzbGlkZXIuZGlzcGF0Y2hFdmVudChvbkNoYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aHVtYkRyYWdIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGh1bWJEcmFnRW5kSGFuZGxlciwgZmFsc2UpO1xuICAgICAgICBvZmZzZXQgPSBldi5jbGllbnRYIC0gKHdoaWNoID09IDEgPyBwb3MgOiBwb3MyKTtcbiAgICB9O1xuXG4gICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGh1bWJNb3VzZURvd24sIGZhbHNlKTtcbiAgICB0aHVtYjIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGh1bWJNb3VzZURvd24sIGZhbHNlKTtcblxuICAgIHZhciB0aHVtYkRyYWdIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaWYgKHdoaWNoID09IDEpXG4gICAgICAgICAgICBzZXRQb3MoZXYuY2xpZW50WCAtIG9mZnNldCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHNldFBvczIoZXYuY2xpZW50WCAtIG9mZnNldCk7XG4gICAgICAgIHNsaWRlci5kaXNwYXRjaEV2ZW50KG9uQ2hhbmdlKTtcbiAgICB9O1xuXG4gICAgdmFyIHRodW1iRHJhZ0VuZEhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGh1bWJEcmFnSGFuZGxlciwgZmFsc2UpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRodW1iRHJhZ0VuZEhhbmRsZXIsIGZhbHNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2xpZGVyO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBtYWtlWm9vbVNsaWRlcjtcbn1cbiIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qYWtlYXJjaGliYWxkL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIDMuMC4yXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNNYXliZVRoZW5hYmxlKHgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheSA9IGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkdG9TdHJpbmcgPSB7fS50b1N0cmluZztcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dDtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuO1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbl0gPSBjYWxsYmFjaztcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuICsgMV0gPSBhcmc7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuICs9IDI7XG4gICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9PT0gMikge1xuICAgICAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG4gICAgICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbihsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldEFzYXAoYXNhcEZuKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGFzYXBGbjtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJXaW5kb3cgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpID8gd2luZG93IDogdW5kZWZpbmVkO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93IHx8IHt9O1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUgPSB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYge30udG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4gICAgLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG4gICAgLy8gbm9kZVxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpIHtcbiAgICAgIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2sobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gdmVydHhcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dChsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcbiAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgbm9kZS5kYXRhID0gKGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gd2ViIHdvcmtlclxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcbiAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRUaW1lb3V0KGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCwgMSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuOyBpKz0yKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpXTtcbiAgICAgICAgdmFyIGFyZyA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdO1xuXG4gICAgICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaSsxXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9IDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciByID0gcmVxdWlyZTtcbiAgICAgICAgdmFyIHZlcnR4ID0gcigndmVydHgnKTtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG4gICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaDtcbiAgICAvLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpO1xuICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG4gICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCk7XG4gICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3AoKSB7fVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgICA9IHZvaWQgMDtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEID0gMTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQgID0gMjtcblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50KCkge1xuICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpIHtcbiAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbihwcm9taXNlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuKSB7XG4gICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBlcnJvciA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKHNlYWxlZCkgeyByZXR1cm47IH1cbiAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgIGlmIChzZWFsZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblxuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG4gICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9LCBwcm9taXNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICAgICAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpIHtcbiAgICAgIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHRoZW4gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKG1heWJlVGhlbmFibGUpO1xuXG4gICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24odGhlbikpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50KCkpO1xuICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG4gICAgICBpZiAocHJvbWlzZS5fb25lcnJvcikge1xuICAgICAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gICAgICB9XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7IHJldHVybjsgfVxuXG4gICAgICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcbiAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEO1xuXG4gICAgICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHByb21pc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykgeyByZXR1cm47IH1cbiAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQ7XG4gICAgICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICAgICAgdmFyIHN1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgICAgIHZhciBsZW5ndGggPSBzdWJzY3JpYmVycy5sZW5ndGg7XG5cbiAgICAgIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgICAgIHN1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURURdICA9IG9uUmVqZWN0aW9uO1xuXG4gICAgICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCwgcGFyZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpIHtcbiAgICAgIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICAgICAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICAgICAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm47IH1cblxuICAgICAgdmFyIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXG4gICAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKSB7XG4gICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SID0gbmV3IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCk7XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgICAgIHZhciBoYXNDYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbihjYWxsYmFjayksXG4gICAgICAgICAgdmFsdWUsIGVycm9yLCBzdWNjZWVkZWQsIGZhaWxlZDtcblxuICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgICAgIHZhbHVlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cbiAgICAgICAgaWYgKHZhbHVlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG4gICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkY2Fubm90UmV0dXJuT3duKCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICAgIC8vIG5vb3BcbiAgICAgIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChmYWlsZWQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSl7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcbiAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICAgICAgZW51bWVyYXRvci5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuICAgICAgZW51bWVyYXRvci5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXG4gICAgICBpZiAoZW51bWVyYXRvci5fdmFsaWRhdGVJbnB1dChpbnB1dCkpIHtcbiAgICAgICAgZW51bWVyYXRvci5faW5wdXQgICAgID0gaW5wdXQ7XG4gICAgICAgIGVudW1lcmF0b3IubGVuZ3RoICAgICA9IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgZW51bWVyYXRvci5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgICAgIGVudW1lcmF0b3IuX2luaXQoKTtcblxuICAgICAgICBpZiAoZW51bWVyYXRvci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKGVudW1lcmF0b3IucHJvbWlzZSwgZW51bWVyYXRvci5fcmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbnVtZXJhdG9yLmxlbmd0aCA9IGVudW1lcmF0b3IubGVuZ3RoIHx8IDA7XG4gICAgICAgICAgZW51bWVyYXRvci5fZW51bWVyYXRlKCk7XG4gICAgICAgICAgaWYgKGVudW1lcmF0b3IuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChlbnVtZXJhdG9yLnByb21pc2UsIGVudW1lcmF0b3IuX3Jlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QoZW51bWVyYXRvci5wcm9taXNlLCBlbnVtZXJhdG9yLl92YWxpZGF0aW9uRXJyb3IoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl92YWxpZGF0ZUlucHV0ID0gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoaW5wdXQpO1xuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3ZhbGlkYXRpb25FcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG4gICAgfTtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcbiAgICB9O1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3I7XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gICAgICB2YXIgbGVuZ3RoICA9IGVudW1lcmF0b3IubGVuZ3RoO1xuICAgICAgdmFyIHByb21pc2UgPSBlbnVtZXJhdG9yLnByb21pc2U7XG4gICAgICB2YXIgaW5wdXQgICA9IGVudW1lcmF0b3IuX2lucHV0O1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgcHJvbWlzZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgJiYgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVudW1lcmF0b3IuX2VhY2hFbnRyeShpbnB1dFtpXSwgaSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24oZW50cnksIGkpIHtcbiAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcbiAgICAgIHZhciBjID0gZW51bWVyYXRvci5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcblxuICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNNYXliZVRoZW5hYmxlKGVudHJ5KSkge1xuICAgICAgICBpZiAoZW50cnkuY29uc3RydWN0b3IgPT09IGMgJiYgZW50cnkuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICAgICAgZW50cnkuX29uZXJyb3IgPSBudWxsO1xuICAgICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVudW1lcmF0b3IuX3dpbGxTZXR0bGVBdChjLnJlc29sdmUoZW50cnkpLCBpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW51bWVyYXRvci5fcmVtYWluaW5nLS07XG4gICAgICAgIGVudW1lcmF0b3IuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uKHN0YXRlLCBpLCB2YWx1ZSkge1xuICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuICAgICAgdmFyIHByb21pc2UgPSBlbnVtZXJhdG9yLnByb21pc2U7XG5cbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICBlbnVtZXJhdG9yLl9yZW1haW5pbmctLTtcblxuICAgICAgICBpZiAoc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbnVtZXJhdG9yLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZW51bWVyYXRvci5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgZW51bWVyYXRvci5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbihwcm9taXNlLCBpKSB7XG4gICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQsIGksIHJlYXNvbik7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsKGVudHJpZXMpIHtcbiAgICAgIHJldHVybiBuZXcgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQodGhpcywgZW50cmllcykucHJvbWlzZTtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJHJhY2UoZW50cmllcykge1xuICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXG4gICAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShlbnRyaWVzKSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcblxuICAgICAgZnVuY3Rpb24gb25GdWxmaWxsbWVudCh2YWx1ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25SZWplY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMDsgcHJvbWlzZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgJiYgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLCB1bmRlZmluZWQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRyZXNvbHZlKG9iamVjdCkge1xuICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgICAgIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmU7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3QocmVhc29uKSB7XG4gICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkcmVqZWN0O1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRjb3VudGVyID0gMDtcblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2U7XG4gICAgLyoqXG4gICAgICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gICAgICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICAgICAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gICAgICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICAgICAgVGVybWlub2xvZ3lcbiAgICAgIC0tLS0tLS0tLS0tXG5cbiAgICAgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gICAgICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gICAgICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gICAgICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgICAgIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgICAgIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gICAgICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cbiAgICAgIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gICAgICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gICAgICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblxuICAgICAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gICAgICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gICAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgICAgIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgICAgIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgICAgIEJhc2ljIFVzYWdlOlxuICAgICAgLS0tLS0tLS0tLS0tXG5cbiAgICAgIGBgYGpzXG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBvbiBzdWNjZXNzXG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgICAgIC8vIG9uIGZhaWx1cmVcbiAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICB9KTtcblxuICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgLy8gb24gcmVqZWN0aW9uXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBZHZhbmNlZCBVc2FnZTpcbiAgICAgIC0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gICAgICBgWE1MSHR0cFJlcXVlc3Rgcy5cblxuICAgICAgYGBganNcbiAgICAgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAvLyBvbiByZWplY3Rpb25cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cbiAgICAgIGBgYGpzXG4gICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgIGdldEpTT04oJy9wb3N0cycpLFxuICAgICAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICAgICAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgICAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG4gICAgICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQGNsYXNzIFByb21pc2VcbiAgICAgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG4gICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgICBAY29uc3RydWN0b3JcbiAgICAqL1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlKHJlc29sdmVyKSB7XG4gICAgICB0aGlzLl9pZCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRjb3VudGVyKys7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wICE9PSByZXNvbHZlcikge1xuICAgICAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbihyZXNvbHZlcikpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlKSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLmFsbCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yYWNlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZXNvbHZlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZWplY3QgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJGRlZmF1bHQ7XG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldFNjaGVkdWxlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRTY2hlZHVsZXI7XG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldEFzYXAgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fYXNhcCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwO1xuXG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucHJvdG90eXBlID0ge1xuICAgICAgY29uc3RydWN0b3I6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLFxuXG4gICAgLyoqXG4gICAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcbiAgICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gICAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG4gICAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQ2hhaW5pbmdcbiAgICAgIC0tLS0tLS0tXG5cbiAgICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG4gICAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gICAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gdXNlci5uYW1lO1xuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuICAgICAgfSk7XG5cbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cbiAgICAgIH0pO1xuICAgICAgYGBgXG4gICAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBc3NpbWlsYXRpb25cbiAgICAgIC0tLS0tLS0tLS0tLVxuXG4gICAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICAgICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuICAgICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgU2ltcGxlIEV4YW1wbGVcbiAgICAgIC0tLS0tLS0tLS0tLS0tXG5cbiAgICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcblxuICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9XG4gICAgICBgYGBcblxuICAgICAgRXJyYmFjayBFeGFtcGxlXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIC8vIGZhaWx1cmVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBzdWNjZXNzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFByb21pc2UgRXhhbXBsZTtcblxuICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQWR2YW5jZWQgRXhhbXBsZVxuICAgICAgLS0tLS0tLS0tLS0tLS1cblxuICAgICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICB2YXIgYXV0aG9yLCBib29rcztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9XG4gICAgICBgYGBcblxuICAgICAgRXJyYmFjayBFeGFtcGxlXG5cbiAgICAgIGBgYGpzXG5cbiAgICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcblxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuXG4gICAgICB9XG5cbiAgICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgIC8vIGZhaWx1cmVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBzdWNjZXNzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFByb21pc2UgRXhhbXBsZTtcblxuICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgZmluZEF1dGhvcigpLlxuICAgICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cbiAgICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAgICAgLy8gZm91bmQgYm9va3NcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBAbWV0aG9kIHRoZW5cbiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG4gICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAgICovXG4gICAgICB0aGVuOiBmdW5jdGlvbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICAgICAgdmFyIHN0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuICAgICAgICBpZiAoc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCAmJiAhb25GdWxmaWxsbWVudCB8fCBzdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQgJiYgIW9uUmVqZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHBhcmVudC5fcmVzdWx0O1xuXG4gICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1tzdGF0ZSAtIDFdO1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCByZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICB9LFxuXG4gICAgLyoqXG4gICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gICAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuXG4gICAgICBgYGBqc1xuICAgICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgICAgIH1cblxuICAgICAgLy8gc3luY2hyb25vdXNcbiAgICAgIHRyeSB7XG4gICAgICAgIGZpbmRBdXRob3IoKTtcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9XG5cbiAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQG1ldGhvZCBjYXRjaFxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICAgKi9cbiAgICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRwb2x5ZmlsbCgpIHtcbiAgICAgIHZhciBsb2NhbDtcblxuICAgICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbG9jYWwgPSBnbG9iYWw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGxvY2FsID0gc2VsZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICAgICAgaWYgKFAgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKSA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsb2NhbC5Qcm9taXNlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQ7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsO1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2UgPSB7XG4gICAgICAnUHJvbWlzZSc6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0LFxuICAgICAgJ3BvbHlmaWxsJzogbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0XG4gICAgfTtcblxuICAgIC8qIGdsb2JhbCBkZWZpbmU6dHJ1ZSBtb2R1bGU6dHJ1ZSB3aW5kb3c6IHRydWUgKi9cbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmVbJ2FtZCddKSB7XG4gICAgICBkZWZpbmUoZnVuY3Rpb24oKSB7IHJldHVybiBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlOyB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZVsnZXhwb3J0cyddKSB7XG4gICAgICBtb2R1bGVbJ2V4cG9ydHMnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXNbJ0VTNlByb21pc2UnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG4gICAgfVxuXG4gICAgbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0KCk7XG59KS5jYWxsKHRoaXMpO1xuXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBKYXZhc2NyaXB0IFpMaWJcbi8vIEJ5IFRob21hcyBEb3duIDIwMTAtMjAxMVxuLy9cbi8vIEJhc2VkIHZlcnkgaGVhdmlseSBvbiBwb3J0aW9ucyBvZiBqemxpYiAoYnkgeW1ua0BqY3JhZnQuY29tKSwgd2hvIGluXG4vLyB0dXJuIGNyZWRpdHMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlciBmb3IgdGhlIG9yaWdpbmFsIHpsaWIgY29kZS5cbi8vXG4vLyBpbmZsYXRlLmpzOiBaTGliIGluZmxhdGUgY29kZVxuLy9cblxuLy9cbi8vIFNoYXJlZCBjb25zdGFudHNcbi8vXG5cbnZhciBNQVhfV0JJVFM9MTU7IC8vIDMySyBMWjc3IHdpbmRvd1xudmFyIERFRl9XQklUUz1NQVhfV0JJVFM7XG52YXIgTUFYX01FTV9MRVZFTD05O1xudmFyIE1BTlk9MTQ0MDtcbnZhciBCTUFYID0gMTU7XG5cbi8vIHByZXNldCBkaWN0aW9uYXJ5IGZsYWcgaW4gemxpYiBoZWFkZXJcbnZhciBQUkVTRVRfRElDVD0weDIwO1xuXG52YXIgWl9OT19GTFVTSD0wO1xudmFyIFpfUEFSVElBTF9GTFVTSD0xO1xudmFyIFpfU1lOQ19GTFVTSD0yO1xudmFyIFpfRlVMTF9GTFVTSD0zO1xudmFyIFpfRklOSVNIPTQ7XG5cbnZhciBaX0RFRkxBVEVEPTg7XG5cbnZhciBaX09LPTA7XG52YXIgWl9TVFJFQU1fRU5EPTE7XG52YXIgWl9ORUVEX0RJQ1Q9MjtcbnZhciBaX0VSUk5PPS0xO1xudmFyIFpfU1RSRUFNX0VSUk9SPS0yO1xudmFyIFpfREFUQV9FUlJPUj0tMztcbnZhciBaX01FTV9FUlJPUj0tNDtcbnZhciBaX0JVRl9FUlJPUj0tNTtcbnZhciBaX1ZFUlNJT05fRVJST1I9LTY7XG5cbnZhciBNRVRIT0Q9MDsgICAvLyB3YWl0aW5nIGZvciBtZXRob2QgYnl0ZVxudmFyIEZMQUc9MTsgICAgIC8vIHdhaXRpbmcgZm9yIGZsYWcgYnl0ZVxudmFyIERJQ1Q0PTI7ICAgIC8vIGZvdXIgZGljdGlvbmFyeSBjaGVjayBieXRlcyB0byBnb1xudmFyIERJQ1QzPTM7ICAgIC8vIHRocmVlIGRpY3Rpb25hcnkgY2hlY2sgYnl0ZXMgdG8gZ29cbnZhciBESUNUMj00OyAgICAvLyB0d28gZGljdGlvbmFyeSBjaGVjayBieXRlcyB0byBnb1xudmFyIERJQ1QxPTU7ICAgIC8vIG9uZSBkaWN0aW9uYXJ5IGNoZWNrIGJ5dGUgdG8gZ29cbnZhciBESUNUMD02OyAgICAvLyB3YWl0aW5nIGZvciBpbmZsYXRlU2V0RGljdGlvbmFyeVxudmFyIEJMT0NLUz03OyAgIC8vIGRlY29tcHJlc3NpbmcgYmxvY2tzXG52YXIgQ0hFQ0s0PTg7ICAgLy8gZm91ciBjaGVjayBieXRlcyB0byBnb1xudmFyIENIRUNLMz05OyAgIC8vIHRocmVlIGNoZWNrIGJ5dGVzIHRvIGdvXG52YXIgQ0hFQ0syPTEwOyAgLy8gdHdvIGNoZWNrIGJ5dGVzIHRvIGdvXG52YXIgQ0hFQ0sxPTExOyAgLy8gb25lIGNoZWNrIGJ5dGUgdG8gZ29cbnZhciBET05FPTEyOyAgICAvLyBmaW5pc2hlZCBjaGVjaywgZG9uZVxudmFyIEJBRD0xMzsgICAgIC8vIGdvdCBhbiBlcnJvci0tc3RheSBoZXJlXG5cbnZhciBpbmZsYXRlX21hc2sgPSBbMHgwMDAwMDAwMCwgMHgwMDAwMDAwMSwgMHgwMDAwMDAwMywgMHgwMDAwMDAwNywgMHgwMDAwMDAwZiwgMHgwMDAwMDAxZiwgMHgwMDAwMDAzZiwgMHgwMDAwMDA3ZiwgMHgwMDAwMDBmZiwgMHgwMDAwMDFmZiwgMHgwMDAwMDNmZiwgMHgwMDAwMDdmZiwgMHgwMDAwMGZmZiwgMHgwMDAwMWZmZiwgMHgwMDAwM2ZmZiwgMHgwMDAwN2ZmZiwgMHgwMDAwZmZmZl07XG5cbnZhciBJQl9UWVBFPTA7ICAvLyBnZXQgdHlwZSBiaXRzICgzLCBpbmNsdWRpbmcgZW5kIGJpdClcbnZhciBJQl9MRU5TPTE7ICAvLyBnZXQgbGVuZ3RocyBmb3Igc3RvcmVkXG52YXIgSUJfU1RPUkVEPTI7Ly8gcHJvY2Vzc2luZyBzdG9yZWQgYmxvY2tcbnZhciBJQl9UQUJMRT0zOyAvLyBnZXQgdGFibGUgbGVuZ3Roc1xudmFyIElCX0JUUkVFPTQ7IC8vIGdldCBiaXQgbGVuZ3RocyB0cmVlIGZvciBhIGR5bmFtaWMgYmxvY2tcbnZhciBJQl9EVFJFRT01OyAvLyBnZXQgbGVuZ3RoLCBkaXN0YW5jZSB0cmVlcyBmb3IgYSBkeW5hbWljIGJsb2NrXG52YXIgSUJfQ09ERVM9NjsgLy8gcHJvY2Vzc2luZyBmaXhlZCBvciBkeW5hbWljIGJsb2NrXG52YXIgSUJfRFJZPTc7ICAgLy8gb3V0cHV0IHJlbWFpbmluZyB3aW5kb3cgYnl0ZXNcbnZhciBJQl9ET05FPTg7ICAvLyBmaW5pc2hlZCBsYXN0IGJsb2NrLCBkb25lXG52YXIgSUJfQkFEPTk7ICAgLy8gb3QgYSBkYXRhIGVycm9yLS1zdHVjayBoZXJlXG5cbnZhciBmaXhlZF9ibCA9IDk7XG52YXIgZml4ZWRfYmQgPSA1O1xuXG52YXIgZml4ZWRfdGwgPSBbXG4gICAgOTYsNywyNTYsIDAsOCw4MCwgMCw4LDE2LCA4NCw4LDExNSxcbiAgICA4Miw3LDMxLCAwLDgsMTEyLCAwLDgsNDgsIDAsOSwxOTIsXG4gICAgODAsNywxMCwgMCw4LDk2LCAwLDgsMzIsIDAsOSwxNjAsXG4gICAgMCw4LDAsIDAsOCwxMjgsIDAsOCw2NCwgMCw5LDIyNCxcbiAgICA4MCw3LDYsIDAsOCw4OCwgMCw4LDI0LCAwLDksMTQ0LFxuICAgIDgzLDcsNTksIDAsOCwxMjAsIDAsOCw1NiwgMCw5LDIwOCxcbiAgICA4MSw3LDE3LCAwLDgsMTA0LCAwLDgsNDAsIDAsOSwxNzYsXG4gICAgMCw4LDgsIDAsOCwxMzYsIDAsOCw3MiwgMCw5LDI0MCxcbiAgICA4MCw3LDQsIDAsOCw4NCwgMCw4LDIwLCA4NSw4LDIyNyxcbiAgICA4Myw3LDQzLCAwLDgsMTE2LCAwLDgsNTIsIDAsOSwyMDAsXG4gICAgODEsNywxMywgMCw4LDEwMCwgMCw4LDM2LCAwLDksMTY4LFxuICAgIDAsOCw0LCAwLDgsMTMyLCAwLDgsNjgsIDAsOSwyMzIsXG4gICAgODAsNyw4LCAwLDgsOTIsIDAsOCwyOCwgMCw5LDE1MixcbiAgICA4NCw3LDgzLCAwLDgsMTI0LCAwLDgsNjAsIDAsOSwyMTYsXG4gICAgODIsNywyMywgMCw4LDEwOCwgMCw4LDQ0LCAwLDksMTg0LFxuICAgIDAsOCwxMiwgMCw4LDE0MCwgMCw4LDc2LCAwLDksMjQ4LFxuICAgIDgwLDcsMywgMCw4LDgyLCAwLDgsMTgsIDg1LDgsMTYzLFxuICAgIDgzLDcsMzUsIDAsOCwxMTQsIDAsOCw1MCwgMCw5LDE5NixcbiAgICA4MSw3LDExLCAwLDgsOTgsIDAsOCwzNCwgMCw5LDE2NCxcbiAgICAwLDgsMiwgMCw4LDEzMCwgMCw4LDY2LCAwLDksMjI4LFxuICAgIDgwLDcsNywgMCw4LDkwLCAwLDgsMjYsIDAsOSwxNDgsXG4gICAgODQsNyw2NywgMCw4LDEyMiwgMCw4LDU4LCAwLDksMjEyLFxuICAgIDgyLDcsMTksIDAsOCwxMDYsIDAsOCw0MiwgMCw5LDE4MCxcbiAgICAwLDgsMTAsIDAsOCwxMzgsIDAsOCw3NCwgMCw5LDI0NCxcbiAgICA4MCw3LDUsIDAsOCw4NiwgMCw4LDIyLCAxOTIsOCwwLFxuICAgIDgzLDcsNTEsIDAsOCwxMTgsIDAsOCw1NCwgMCw5LDIwNCxcbiAgICA4MSw3LDE1LCAwLDgsMTAyLCAwLDgsMzgsIDAsOSwxNzIsXG4gICAgMCw4LDYsIDAsOCwxMzQsIDAsOCw3MCwgMCw5LDIzNixcbiAgICA4MCw3LDksIDAsOCw5NCwgMCw4LDMwLCAwLDksMTU2LFxuICAgIDg0LDcsOTksIDAsOCwxMjYsIDAsOCw2MiwgMCw5LDIyMCxcbiAgICA4Miw3LDI3LCAwLDgsMTEwLCAwLDgsNDYsIDAsOSwxODgsXG4gICAgMCw4LDE0LCAwLDgsMTQyLCAwLDgsNzgsIDAsOSwyNTIsXG4gICAgOTYsNywyNTYsIDAsOCw4MSwgMCw4LDE3LCA4NSw4LDEzMSxcbiAgICA4Miw3LDMxLCAwLDgsMTEzLCAwLDgsNDksIDAsOSwxOTQsXG4gICAgODAsNywxMCwgMCw4LDk3LCAwLDgsMzMsIDAsOSwxNjIsXG4gICAgMCw4LDEsIDAsOCwxMjksIDAsOCw2NSwgMCw5LDIyNixcbiAgICA4MCw3LDYsIDAsOCw4OSwgMCw4LDI1LCAwLDksMTQ2LFxuICAgIDgzLDcsNTksIDAsOCwxMjEsIDAsOCw1NywgMCw5LDIxMCxcbiAgICA4MSw3LDE3LCAwLDgsMTA1LCAwLDgsNDEsIDAsOSwxNzgsXG4gICAgMCw4LDksIDAsOCwxMzcsIDAsOCw3MywgMCw5LDI0MixcbiAgICA4MCw3LDQsIDAsOCw4NSwgMCw4LDIxLCA4MCw4LDI1OCxcbiAgICA4Myw3LDQzLCAwLDgsMTE3LCAwLDgsNTMsIDAsOSwyMDIsXG4gICAgODEsNywxMywgMCw4LDEwMSwgMCw4LDM3LCAwLDksMTcwLFxuICAgIDAsOCw1LCAwLDgsMTMzLCAwLDgsNjksIDAsOSwyMzQsXG4gICAgODAsNyw4LCAwLDgsOTMsIDAsOCwyOSwgMCw5LDE1NCxcbiAgICA4NCw3LDgzLCAwLDgsMTI1LCAwLDgsNjEsIDAsOSwyMTgsXG4gICAgODIsNywyMywgMCw4LDEwOSwgMCw4LDQ1LCAwLDksMTg2LFxuICAgIDAsOCwxMywgMCw4LDE0MSwgMCw4LDc3LCAwLDksMjUwLFxuICAgIDgwLDcsMywgMCw4LDgzLCAwLDgsMTksIDg1LDgsMTk1LFxuICAgIDgzLDcsMzUsIDAsOCwxMTUsIDAsOCw1MSwgMCw5LDE5OCxcbiAgICA4MSw3LDExLCAwLDgsOTksIDAsOCwzNSwgMCw5LDE2NixcbiAgICAwLDgsMywgMCw4LDEzMSwgMCw4LDY3LCAwLDksMjMwLFxuICAgIDgwLDcsNywgMCw4LDkxLCAwLDgsMjcsIDAsOSwxNTAsXG4gICAgODQsNyw2NywgMCw4LDEyMywgMCw4LDU5LCAwLDksMjE0LFxuICAgIDgyLDcsMTksIDAsOCwxMDcsIDAsOCw0MywgMCw5LDE4MixcbiAgICAwLDgsMTEsIDAsOCwxMzksIDAsOCw3NSwgMCw5LDI0NixcbiAgICA4MCw3LDUsIDAsOCw4NywgMCw4LDIzLCAxOTIsOCwwLFxuICAgIDgzLDcsNTEsIDAsOCwxMTksIDAsOCw1NSwgMCw5LDIwNixcbiAgICA4MSw3LDE1LCAwLDgsMTAzLCAwLDgsMzksIDAsOSwxNzQsXG4gICAgMCw4LDcsIDAsOCwxMzUsIDAsOCw3MSwgMCw5LDIzOCxcbiAgICA4MCw3LDksIDAsOCw5NSwgMCw4LDMxLCAwLDksMTU4LFxuICAgIDg0LDcsOTksIDAsOCwxMjcsIDAsOCw2MywgMCw5LDIyMixcbiAgICA4Miw3LDI3LCAwLDgsMTExLCAwLDgsNDcsIDAsOSwxOTAsXG4gICAgMCw4LDE1LCAwLDgsMTQzLCAwLDgsNzksIDAsOSwyNTQsXG4gICAgOTYsNywyNTYsIDAsOCw4MCwgMCw4LDE2LCA4NCw4LDExNSxcbiAgICA4Miw3LDMxLCAwLDgsMTEyLCAwLDgsNDgsIDAsOSwxOTMsXG5cbiAgICA4MCw3LDEwLCAwLDgsOTYsIDAsOCwzMiwgMCw5LDE2MSxcbiAgICAwLDgsMCwgMCw4LDEyOCwgMCw4LDY0LCAwLDksMjI1LFxuICAgIDgwLDcsNiwgMCw4LDg4LCAwLDgsMjQsIDAsOSwxNDUsXG4gICAgODMsNyw1OSwgMCw4LDEyMCwgMCw4LDU2LCAwLDksMjA5LFxuICAgIDgxLDcsMTcsIDAsOCwxMDQsIDAsOCw0MCwgMCw5LDE3NyxcbiAgICAwLDgsOCwgMCw4LDEzNiwgMCw4LDcyLCAwLDksMjQxLFxuICAgIDgwLDcsNCwgMCw4LDg0LCAwLDgsMjAsIDg1LDgsMjI3LFxuICAgIDgzLDcsNDMsIDAsOCwxMTYsIDAsOCw1MiwgMCw5LDIwMSxcbiAgICA4MSw3LDEzLCAwLDgsMTAwLCAwLDgsMzYsIDAsOSwxNjksXG4gICAgMCw4LDQsIDAsOCwxMzIsIDAsOCw2OCwgMCw5LDIzMyxcbiAgICA4MCw3LDgsIDAsOCw5MiwgMCw4LDI4LCAwLDksMTUzLFxuICAgIDg0LDcsODMsIDAsOCwxMjQsIDAsOCw2MCwgMCw5LDIxNyxcbiAgICA4Miw3LDIzLCAwLDgsMTA4LCAwLDgsNDQsIDAsOSwxODUsXG4gICAgMCw4LDEyLCAwLDgsMTQwLCAwLDgsNzYsIDAsOSwyNDksXG4gICAgODAsNywzLCAwLDgsODIsIDAsOCwxOCwgODUsOCwxNjMsXG4gICAgODMsNywzNSwgMCw4LDExNCwgMCw4LDUwLCAwLDksMTk3LFxuICAgIDgxLDcsMTEsIDAsOCw5OCwgMCw4LDM0LCAwLDksMTY1LFxuICAgIDAsOCwyLCAwLDgsMTMwLCAwLDgsNjYsIDAsOSwyMjksXG4gICAgODAsNyw3LCAwLDgsOTAsIDAsOCwyNiwgMCw5LDE0OSxcbiAgICA4NCw3LDY3LCAwLDgsMTIyLCAwLDgsNTgsIDAsOSwyMTMsXG4gICAgODIsNywxOSwgMCw4LDEwNiwgMCw4LDQyLCAwLDksMTgxLFxuICAgIDAsOCwxMCwgMCw4LDEzOCwgMCw4LDc0LCAwLDksMjQ1LFxuICAgIDgwLDcsNSwgMCw4LDg2LCAwLDgsMjIsIDE5Miw4LDAsXG4gICAgODMsNyw1MSwgMCw4LDExOCwgMCw4LDU0LCAwLDksMjA1LFxuICAgIDgxLDcsMTUsIDAsOCwxMDIsIDAsOCwzOCwgMCw5LDE3MyxcbiAgICAwLDgsNiwgMCw4LDEzNCwgMCw4LDcwLCAwLDksMjM3LFxuICAgIDgwLDcsOSwgMCw4LDk0LCAwLDgsMzAsIDAsOSwxNTcsXG4gICAgODQsNyw5OSwgMCw4LDEyNiwgMCw4LDYyLCAwLDksMjIxLFxuICAgIDgyLDcsMjcsIDAsOCwxMTAsIDAsOCw0NiwgMCw5LDE4OSxcbiAgICAwLDgsMTQsIDAsOCwxNDIsIDAsOCw3OCwgMCw5LDI1MyxcbiAgICA5Niw3LDI1NiwgMCw4LDgxLCAwLDgsMTcsIDg1LDgsMTMxLFxuICAgIDgyLDcsMzEsIDAsOCwxMTMsIDAsOCw0OSwgMCw5LDE5NSxcbiAgICA4MCw3LDEwLCAwLDgsOTcsIDAsOCwzMywgMCw5LDE2MyxcbiAgICAwLDgsMSwgMCw4LDEyOSwgMCw4LDY1LCAwLDksMjI3LFxuICAgIDgwLDcsNiwgMCw4LDg5LCAwLDgsMjUsIDAsOSwxNDcsXG4gICAgODMsNyw1OSwgMCw4LDEyMSwgMCw4LDU3LCAwLDksMjExLFxuICAgIDgxLDcsMTcsIDAsOCwxMDUsIDAsOCw0MSwgMCw5LDE3OSxcbiAgICAwLDgsOSwgMCw4LDEzNywgMCw4LDczLCAwLDksMjQzLFxuICAgIDgwLDcsNCwgMCw4LDg1LCAwLDgsMjEsIDgwLDgsMjU4LFxuICAgIDgzLDcsNDMsIDAsOCwxMTcsIDAsOCw1MywgMCw5LDIwMyxcbiAgICA4MSw3LDEzLCAwLDgsMTAxLCAwLDgsMzcsIDAsOSwxNzEsXG4gICAgMCw4LDUsIDAsOCwxMzMsIDAsOCw2OSwgMCw5LDIzNSxcbiAgICA4MCw3LDgsIDAsOCw5MywgMCw4LDI5LCAwLDksMTU1LFxuICAgIDg0LDcsODMsIDAsOCwxMjUsIDAsOCw2MSwgMCw5LDIxOSxcbiAgICA4Miw3LDIzLCAwLDgsMTA5LCAwLDgsNDUsIDAsOSwxODcsXG4gICAgMCw4LDEzLCAwLDgsMTQxLCAwLDgsNzcsIDAsOSwyNTEsXG4gICAgODAsNywzLCAwLDgsODMsIDAsOCwxOSwgODUsOCwxOTUsXG4gICAgODMsNywzNSwgMCw4LDExNSwgMCw4LDUxLCAwLDksMTk5LFxuICAgIDgxLDcsMTEsIDAsOCw5OSwgMCw4LDM1LCAwLDksMTY3LFxuICAgIDAsOCwzLCAwLDgsMTMxLCAwLDgsNjcsIDAsOSwyMzEsXG4gICAgODAsNyw3LCAwLDgsOTEsIDAsOCwyNywgMCw5LDE1MSxcbiAgICA4NCw3LDY3LCAwLDgsMTIzLCAwLDgsNTksIDAsOSwyMTUsXG4gICAgODIsNywxOSwgMCw4LDEwNywgMCw4LDQzLCAwLDksMTgzLFxuICAgIDAsOCwxMSwgMCw4LDEzOSwgMCw4LDc1LCAwLDksMjQ3LFxuICAgIDgwLDcsNSwgMCw4LDg3LCAwLDgsMjMsIDE5Miw4LDAsXG4gICAgODMsNyw1MSwgMCw4LDExOSwgMCw4LDU1LCAwLDksMjA3LFxuICAgIDgxLDcsMTUsIDAsOCwxMDMsIDAsOCwzOSwgMCw5LDE3NSxcbiAgICAwLDgsNywgMCw4LDEzNSwgMCw4LDcxLCAwLDksMjM5LFxuICAgIDgwLDcsOSwgMCw4LDk1LCAwLDgsMzEsIDAsOSwxNTksXG4gICAgODQsNyw5OSwgMCw4LDEyNywgMCw4LDYzLCAwLDksMjIzLFxuICAgIDgyLDcsMjcsIDAsOCwxMTEsIDAsOCw0NywgMCw5LDE5MSxcbiAgICAwLDgsMTUsIDAsOCwxNDMsIDAsOCw3OSwgMCw5LDI1NVxuXTtcbnZhciBmaXhlZF90ZCA9IFtcbiAgICA4MCw1LDEsIDg3LDUsMjU3LCA4Myw1LDE3LCA5MSw1LDQwOTcsXG4gICAgODEsNSw1LCA4OSw1LDEwMjUsIDg1LDUsNjUsIDkzLDUsMTYzODUsXG4gICAgODAsNSwzLCA4OCw1LDUxMywgODQsNSwzMywgOTIsNSw4MTkzLFxuICAgIDgyLDUsOSwgOTAsNSwyMDQ5LCA4Niw1LDEyOSwgMTkyLDUsMjQ1NzcsXG4gICAgODAsNSwyLCA4Nyw1LDM4NSwgODMsNSwyNSwgOTEsNSw2MTQ1LFxuICAgIDgxLDUsNywgODksNSwxNTM3LCA4NSw1LDk3LCA5Myw1LDI0NTc3LFxuICAgIDgwLDUsNCwgODgsNSw3NjksIDg0LDUsNDksIDkyLDUsMTIyODksXG4gICAgODIsNSwxMywgOTAsNSwzMDczLCA4Niw1LDE5MywgMTkyLDUsMjQ1Nzdcbl07XG5cbiAgLy8gVGFibGVzIGZvciBkZWZsYXRlIGZyb20gUEtaSVAncyBhcHBub3RlLnR4dC5cbiAgdmFyIGNwbGVucyA9IFsgLy8gQ29weSBsZW5ndGhzIGZvciBsaXRlcmFsIGNvZGVzIDI1Ny4uMjg1XG4gICAgICAgIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTMsIDE1LCAxNywgMTksIDIzLCAyNywgMzEsXG4gICAgICAgIDM1LCA0MywgNTEsIDU5LCA2NywgODMsIDk5LCAxMTUsIDEzMSwgMTYzLCAxOTUsIDIyNywgMjU4LCAwLCAwXG4gIF07XG5cbiAgLy8gc2VlIG5vdGUgIzEzIGFib3ZlIGFib3V0IDI1OFxuICB2YXIgY3BsZXh0ID0gWyAvLyBFeHRyYSBiaXRzIGZvciBsaXRlcmFsIGNvZGVzIDI1Ny4uMjg1XG4gICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDIsIDIsIDIsIDIsXG4gICAgICAgIDMsIDMsIDMsIDMsIDQsIDQsIDQsIDQsIDUsIDUsIDUsIDUsIDAsIDExMiwgMTEyICAvLyAxMTI9PWludmFsaWRcbiAgXTtcblxuIHZhciBjcGRpc3QgPSBbIC8vIENvcHkgb2Zmc2V0cyBmb3IgZGlzdGFuY2UgY29kZXMgMC4uMjlcbiAgICAgICAgMSwgMiwgMywgNCwgNSwgNywgOSwgMTMsIDE3LCAyNSwgMzMsIDQ5LCA2NSwgOTcsIDEyOSwgMTkzLFxuICAgICAgICAyNTcsIDM4NSwgNTEzLCA3NjksIDEwMjUsIDE1MzcsIDIwNDksIDMwNzMsIDQwOTcsIDYxNDUsXG4gICAgICAgIDgxOTMsIDEyMjg5LCAxNjM4NSwgMjQ1NzdcbiAgXTtcblxuICB2YXIgY3BkZXh0ID0gWyAvLyBFeHRyYSBiaXRzIGZvciBkaXN0YW5jZSBjb2Rlc1xuICAgICAgICAwLCAwLCAwLCAwLCAxLCAxLCAyLCAyLCAzLCAzLCA0LCA0LCA1LCA1LCA2LCA2LFxuICAgICAgICA3LCA3LCA4LCA4LCA5LCA5LCAxMCwgMTAsIDExLCAxMSxcbiAgICAgICAgMTIsIDEyLCAxMywgMTNdO1xuXG4vL1xuLy8gWlN0cmVhbS5qYXZhXG4vL1xuXG5mdW5jdGlvbiBaU3RyZWFtKCkge1xufVxuXG5cblpTdHJlYW0ucHJvdG90eXBlLmluZmxhdGVJbml0ID0gZnVuY3Rpb24odywgbm93cmFwKSB7XG4gICAgaWYgKCF3KSB7XG5cdHcgPSBERUZfV0JJVFM7XG4gICAgfVxuICAgIGlmIChub3dyYXApIHtcblx0bm93cmFwID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuaXN0YXRlID0gbmV3IEluZmxhdGUoKTtcbiAgICByZXR1cm4gdGhpcy5pc3RhdGUuaW5mbGF0ZUluaXQodGhpcywgbm93cmFwPy13OncpO1xufVxuXG5aU3RyZWFtLnByb3RvdHlwZS5pbmZsYXRlID0gZnVuY3Rpb24oZikge1xuICAgIGlmKHRoaXMuaXN0YXRlPT1udWxsKSByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgcmV0dXJuIHRoaXMuaXN0YXRlLmluZmxhdGUodGhpcywgZik7XG59XG5cblpTdHJlYW0ucHJvdG90eXBlLmluZmxhdGVFbmQgPSBmdW5jdGlvbigpe1xuICAgIGlmKHRoaXMuaXN0YXRlPT1udWxsKSByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgdmFyIHJldD1pc3RhdGUuaW5mbGF0ZUVuZCh0aGlzKTtcbiAgICB0aGlzLmlzdGF0ZSA9IG51bGw7XG4gICAgcmV0dXJuIHJldDtcbn1cblpTdHJlYW0ucHJvdG90eXBlLmluZmxhdGVTeW5jID0gZnVuY3Rpb24oKXtcbiAgICAvLyBpZihpc3RhdGUgPT0gbnVsbCkgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIHJldHVybiBpc3RhdGUuaW5mbGF0ZVN5bmModGhpcyk7XG59XG5aU3RyZWFtLnByb3RvdHlwZS5pbmZsYXRlU2V0RGljdGlvbmFyeSA9IGZ1bmN0aW9uKGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpe1xuICAgIC8vIGlmKGlzdGF0ZSA9PSBudWxsKSByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgcmV0dXJuIGlzdGF0ZS5pbmZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKTtcbn1cblxuLypcblxuICBwdWJsaWMgaW50IGRlZmxhdGVJbml0KGludCBsZXZlbCl7XG4gICAgcmV0dXJuIGRlZmxhdGVJbml0KGxldmVsLCBNQVhfV0JJVFMpO1xuICB9XG4gIHB1YmxpYyBpbnQgZGVmbGF0ZUluaXQoaW50IGxldmVsLCBib29sZWFuIG5vd3JhcCl7XG4gICAgcmV0dXJuIGRlZmxhdGVJbml0KGxldmVsLCBNQVhfV0JJVFMsIG5vd3JhcCk7XG4gIH1cbiAgcHVibGljIGludCBkZWZsYXRlSW5pdChpbnQgbGV2ZWwsIGludCBiaXRzKXtcbiAgICByZXR1cm4gZGVmbGF0ZUluaXQobGV2ZWwsIGJpdHMsIGZhbHNlKTtcbiAgfVxuICBwdWJsaWMgaW50IGRlZmxhdGVJbml0KGludCBsZXZlbCwgaW50IGJpdHMsIGJvb2xlYW4gbm93cmFwKXtcbiAgICBkc3RhdGU9bmV3IERlZmxhdGUoKTtcbiAgICByZXR1cm4gZHN0YXRlLmRlZmxhdGVJbml0KHRoaXMsIGxldmVsLCBub3dyYXA/LWJpdHM6Yml0cyk7XG4gIH1cbiAgcHVibGljIGludCBkZWZsYXRlKGludCBmbHVzaCl7XG4gICAgaWYoZHN0YXRlPT1udWxsKXtcbiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgICB9XG4gICAgcmV0dXJuIGRzdGF0ZS5kZWZsYXRlKHRoaXMsIGZsdXNoKTtcbiAgfVxuICBwdWJsaWMgaW50IGRlZmxhdGVFbmQoKXtcbiAgICBpZihkc3RhdGU9PW51bGwpIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgICBpbnQgcmV0PWRzdGF0ZS5kZWZsYXRlRW5kKCk7XG4gICAgZHN0YXRlPW51bGw7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuICBwdWJsaWMgaW50IGRlZmxhdGVQYXJhbXMoaW50IGxldmVsLCBpbnQgc3RyYXRlZ3kpe1xuICAgIGlmKGRzdGF0ZT09bnVsbCkgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIHJldHVybiBkc3RhdGUuZGVmbGF0ZVBhcmFtcyh0aGlzLCBsZXZlbCwgc3RyYXRlZ3kpO1xuICB9XG4gIHB1YmxpYyBpbnQgZGVmbGF0ZVNldERpY3Rpb25hcnkgKGJ5dGVbXSBkaWN0aW9uYXJ5LCBpbnQgZGljdExlbmd0aCl7XG4gICAgaWYoZHN0YXRlID09IG51bGwpXG4gICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgcmV0dXJuIGRzdGF0ZS5kZWZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKTtcbiAgfVxuXG4qL1xuXG4vKlxuICAvLyBGbHVzaCBhcyBtdWNoIHBlbmRpbmcgb3V0cHV0IGFzIHBvc3NpYmxlLiBBbGwgZGVmbGF0ZSgpIG91dHB1dCBnb2VzXG4gIC8vIHRocm91Z2ggdGhpcyBmdW5jdGlvbiBzbyBzb21lIGFwcGxpY2F0aW9ucyBtYXkgd2lzaCB0byBtb2RpZnkgaXRcbiAgLy8gdG8gYXZvaWQgYWxsb2NhdGluZyBhIGxhcmdlIHN0cm0tPm5leHRfb3V0IGJ1ZmZlciBhbmQgY29weWluZyBpbnRvIGl0LlxuICAvLyAoU2VlIGFsc28gcmVhZF9idWYoKSkuXG4gIHZvaWQgZmx1c2hfcGVuZGluZygpe1xuICAgIGludCBsZW49ZHN0YXRlLnBlbmRpbmc7XG5cbiAgICBpZihsZW4+YXZhaWxfb3V0KSBsZW49YXZhaWxfb3V0O1xuICAgIGlmKGxlbj09MCkgcmV0dXJuO1xuXG4gICAgaWYoZHN0YXRlLnBlbmRpbmdfYnVmLmxlbmd0aDw9ZHN0YXRlLnBlbmRpbmdfb3V0IHx8XG4gICAgICAgbmV4dF9vdXQubGVuZ3RoPD1uZXh0X291dF9pbmRleCB8fFxuICAgICAgIGRzdGF0ZS5wZW5kaW5nX2J1Zi5sZW5ndGg8KGRzdGF0ZS5wZW5kaW5nX291dCtsZW4pIHx8XG4gICAgICAgbmV4dF9vdXQubGVuZ3RoPChuZXh0X291dF9pbmRleCtsZW4pKXtcbiAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihkc3RhdGUucGVuZGluZ19idWYubGVuZ3RoK1wiLCBcIitkc3RhdGUucGVuZGluZ19vdXQrXG5cdFx0XHQgXCIsIFwiK25leHRfb3V0Lmxlbmd0aCtcIiwgXCIrbmV4dF9vdXRfaW5kZXgrXCIsIFwiK2xlbik7XG4gICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJhdmFpbF9vdXQ9XCIrYXZhaWxfb3V0KTtcbiAgICB9XG5cbiAgICBTeXN0ZW0uYXJyYXljb3B5KGRzdGF0ZS5wZW5kaW5nX2J1ZiwgZHN0YXRlLnBlbmRpbmdfb3V0LFxuXHRcdCAgICAgbmV4dF9vdXQsIG5leHRfb3V0X2luZGV4LCBsZW4pO1xuXG4gICAgbmV4dF9vdXRfaW5kZXgrPWxlbjtcbiAgICBkc3RhdGUucGVuZGluZ19vdXQrPWxlbjtcbiAgICB0b3RhbF9vdXQrPWxlbjtcbiAgICBhdmFpbF9vdXQtPWxlbjtcbiAgICBkc3RhdGUucGVuZGluZy09bGVuO1xuICAgIGlmKGRzdGF0ZS5wZW5kaW5nPT0wKXtcbiAgICAgIGRzdGF0ZS5wZW5kaW5nX291dD0wO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlYWQgYSBuZXcgYnVmZmVyIGZyb20gdGhlIGN1cnJlbnQgaW5wdXQgc3RyZWFtLCB1cGRhdGUgdGhlIGFkbGVyMzJcbiAgLy8gYW5kIHRvdGFsIG51bWJlciBvZiBieXRlcyByZWFkLiAgQWxsIGRlZmxhdGUoKSBpbnB1dCBnb2VzIHRocm91Z2hcbiAgLy8gdGhpcyBmdW5jdGlvbiBzbyBzb21lIGFwcGxpY2F0aW9ucyBtYXkgd2lzaCB0byBtb2RpZnkgaXQgdG8gYXZvaWRcbiAgLy8gYWxsb2NhdGluZyBhIGxhcmdlIHN0cm0tPm5leHRfaW4gYnVmZmVyIGFuZCBjb3B5aW5nIGZyb20gaXQuXG4gIC8vIChTZWUgYWxzbyBmbHVzaF9wZW5kaW5nKCkpLlxuICBpbnQgcmVhZF9idWYoYnl0ZVtdIGJ1ZiwgaW50IHN0YXJ0LCBpbnQgc2l6ZSkge1xuICAgIGludCBsZW49YXZhaWxfaW47XG5cbiAgICBpZihsZW4+c2l6ZSkgbGVuPXNpemU7XG4gICAgaWYobGVuPT0wKSByZXR1cm4gMDtcblxuICAgIGF2YWlsX2luLT1sZW47XG5cbiAgICBpZihkc3RhdGUubm9oZWFkZXI9PTApIHtcbiAgICAgIGFkbGVyPV9hZGxlci5hZGxlcjMyKGFkbGVyLCBuZXh0X2luLCBuZXh0X2luX2luZGV4LCBsZW4pO1xuICAgIH1cbiAgICBTeXN0ZW0uYXJyYXljb3B5KG5leHRfaW4sIG5leHRfaW5faW5kZXgsIGJ1Ziwgc3RhcnQsIGxlbik7XG4gICAgbmV4dF9pbl9pbmRleCAgKz0gbGVuO1xuICAgIHRvdGFsX2luICs9IGxlbjtcbiAgICByZXR1cm4gbGVuO1xuICB9XG5cbiAgcHVibGljIHZvaWQgZnJlZSgpe1xuICAgIG5leHRfaW49bnVsbDtcbiAgICBuZXh0X291dD1udWxsO1xuICAgIG1zZz1udWxsO1xuICAgIF9hZGxlcj1udWxsO1xuICB9XG59XG4qL1xuXG5cbi8vXG4vLyBJbmZsYXRlLmphdmFcbi8vXG5cbmZ1bmN0aW9uIEluZmxhdGUoKSB7XG4gICAgdGhpcy53YXMgPSBbMF07XG59XG5cbkluZmxhdGUucHJvdG90eXBlLmluZmxhdGVSZXNldCA9IGZ1bmN0aW9uKHopIHtcbiAgICBpZih6ID09IG51bGwgfHwgei5pc3RhdGUgPT0gbnVsbCkgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIFxuICAgIHoudG90YWxfaW4gPSB6LnRvdGFsX291dCA9IDA7XG4gICAgei5tc2cgPSBudWxsO1xuICAgIHouaXN0YXRlLm1vZGUgPSB6LmlzdGF0ZS5ub3dyYXAhPTAgPyBCTE9DS1MgOiBNRVRIT0Q7XG4gICAgei5pc3RhdGUuYmxvY2tzLnJlc2V0KHosIG51bGwpO1xuICAgIHJldHVybiBaX09LO1xufVxuXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlRW5kID0gZnVuY3Rpb24oeil7XG4gICAgaWYodGhpcy5ibG9ja3MgIT0gbnVsbClcbiAgICAgIHRoaXMuYmxvY2tzLmZyZWUoeik7XG4gICAgdGhpcy5ibG9ja3M9bnVsbDtcbiAgICByZXR1cm4gWl9PSztcbn1cblxuSW5mbGF0ZS5wcm90b3R5cGUuaW5mbGF0ZUluaXQgPSBmdW5jdGlvbih6LCB3KXtcbiAgICB6Lm1zZyA9IG51bGw7XG4gICAgdGhpcy5ibG9ja3MgPSBudWxsO1xuXG4gICAgLy8gaGFuZGxlIHVuZG9jdW1lbnRlZCBub3dyYXAgb3B0aW9uIChubyB6bGliIGhlYWRlciBvciBjaGVjaylcbiAgICBub3dyYXAgPSAwO1xuICAgIGlmKHcgPCAwKXtcbiAgICAgIHcgPSAtIHc7XG4gICAgICBub3dyYXAgPSAxO1xuICAgIH1cblxuICAgIC8vIHNldCB3aW5kb3cgc2l6ZVxuICAgIGlmKHc8OCB8fHc+MTUpe1xuICAgICAgdGhpcy5pbmZsYXRlRW5kKHopO1xuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIH1cbiAgICB0aGlzLndiaXRzPXc7XG5cbiAgICB6LmlzdGF0ZS5ibG9ja3M9bmV3IEluZkJsb2Nrcyh6LCBcblx0XHRcdFx0ICB6LmlzdGF0ZS5ub3dyYXAhPTAgPyBudWxsIDogdGhpcyxcblx0XHRcdFx0ICAxPDx3KTtcblxuICAgIC8vIHJlc2V0IHN0YXRlXG4gICAgdGhpcy5pbmZsYXRlUmVzZXQoeik7XG4gICAgcmV0dXJuIFpfT0s7XG4gIH1cblxuSW5mbGF0ZS5wcm90b3R5cGUuaW5mbGF0ZSA9IGZ1bmN0aW9uKHosIGYpe1xuICAgIHZhciByLCBiO1xuXG4gICAgaWYoeiA9PSBudWxsIHx8IHouaXN0YXRlID09IG51bGwgfHwgei5uZXh0X2luID09IG51bGwpXG4gICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgZiA9IGYgPT0gWl9GSU5JU0ggPyBaX0JVRl9FUlJPUiA6IFpfT0s7XG4gICAgciA9IFpfQlVGX0VSUk9SO1xuICAgIHdoaWxlICh0cnVlKXtcbiAgICAgIHN3aXRjaCAoei5pc3RhdGUubW9kZSl7XG4gICAgICBjYXNlIE1FVEhPRDpcblxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcblxuICAgICAgICB6LmF2YWlsX2luLS07IHoudG90YWxfaW4rKztcbiAgICAgICAgaWYoKCh6LmlzdGF0ZS5tZXRob2QgPSB6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdKSYweGYpIT1aX0RFRkxBVEVEKXtcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIHoubXNnPVwidW5rbm93biBjb21wcmVzc2lvbiBtZXRob2RcIjtcbiAgICAgICAgICB6LmlzdGF0ZS5tYXJrZXIgPSA1OyAgICAgICAvLyBjYW4ndCB0cnkgaW5mbGF0ZVN5bmNcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZigoei5pc3RhdGUubWV0aG9kPj40KSs4PnouaXN0YXRlLndiaXRzKXtcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIHoubXNnPVwiaW52YWxpZCB3aW5kb3cgc2l6ZVwiO1xuICAgICAgICAgIHouaXN0YXRlLm1hcmtlciA9IDU7ICAgICAgIC8vIGNhbid0IHRyeSBpbmZsYXRlU3luY1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHouaXN0YXRlLm1vZGU9RkxBRztcbiAgICAgIGNhc2UgRkxBRzpcblxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcblxuICAgICAgICB6LmF2YWlsX2luLS07IHoudG90YWxfaW4rKztcbiAgICAgICAgYiA9ICh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdKSYweGZmO1xuXG4gICAgICAgIGlmKCgoKHouaXN0YXRlLm1ldGhvZCA8PCA4KStiKSAlIDMxKSE9MCl7XG4gICAgICAgICAgei5pc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICB6Lm1zZyA9IFwiaW5jb3JyZWN0IGhlYWRlciBjaGVja1wiO1xuICAgICAgICAgIHouaXN0YXRlLm1hcmtlciA9IDU7ICAgICAgIC8vIGNhbid0IHRyeSBpbmZsYXRlU3luY1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoKGImUFJFU0VUX0RJQ1QpPT0wKXtcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkxPQ0tTO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHouaXN0YXRlLm1vZGUgPSBESUNUNDtcbiAgICAgIGNhc2UgRElDVDQ6XG5cbiAgICAgICAgaWYoei5hdmFpbF9pbj09MClyZXR1cm4gcjtyPWY7XG5cbiAgICAgICAgei5hdmFpbF9pbi0tOyB6LnRvdGFsX2luKys7XG4gICAgICAgIHouaXN0YXRlLm5lZWQ9KCh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdJjB4ZmYpPDwyNCkmMHhmZjAwMDAwMDtcbiAgICAgICAgei5pc3RhdGUubW9kZT1ESUNUMztcbiAgICAgIGNhc2UgRElDVDM6XG5cbiAgICAgICAgaWYoei5hdmFpbF9pbj09MClyZXR1cm4gcjtyPWY7XG5cbiAgICAgICAgei5hdmFpbF9pbi0tOyB6LnRvdGFsX2luKys7XG4gICAgICAgIHouaXN0YXRlLm5lZWQrPSgoei5uZXh0X2luW3oubmV4dF9pbl9pbmRleCsrXSYweGZmKTw8MTYpJjB4ZmYwMDAwO1xuICAgICAgICB6LmlzdGF0ZS5tb2RlPURJQ1QyO1xuICAgICAgY2FzZSBESUNUMjpcblxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcblxuICAgICAgICB6LmF2YWlsX2luLS07IHoudG90YWxfaW4rKztcbiAgICAgICAgei5pc3RhdGUubmVlZCs9KCh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdJjB4ZmYpPDw4KSYweGZmMDA7XG4gICAgICAgIHouaXN0YXRlLm1vZGU9RElDVDE7XG4gICAgICBjYXNlIERJQ1QxOlxuXG4gICAgICAgIGlmKHouYXZhaWxfaW49PTApcmV0dXJuIHI7cj1mO1xuXG4gICAgICAgIHouYXZhaWxfaW4tLTsgei50b3RhbF9pbisrO1xuICAgICAgICB6LmlzdGF0ZS5uZWVkICs9ICh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdJjB4ZmYpO1xuICAgICAgICB6LmFkbGVyID0gei5pc3RhdGUubmVlZDtcbiAgICAgICAgei5pc3RhdGUubW9kZSA9IERJQ1QwO1xuICAgICAgICByZXR1cm4gWl9ORUVEX0RJQ1Q7XG4gICAgICBjYXNlIERJQ1QwOlxuICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICB6Lm1zZyA9IFwibmVlZCBkaWN0aW9uYXJ5XCI7XG4gICAgICAgIHouaXN0YXRlLm1hcmtlciA9IDA7ICAgICAgIC8vIGNhbiB0cnkgaW5mbGF0ZVN5bmNcbiAgICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgICAgY2FzZSBCTE9DS1M6XG5cbiAgICAgICAgciA9IHouaXN0YXRlLmJsb2Nrcy5wcm9jKHosIHIpO1xuICAgICAgICBpZihyID09IFpfREFUQV9FUlJPUil7XG4gICAgICAgICAgei5pc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICB6LmlzdGF0ZS5tYXJrZXIgPSAwOyAgICAgLy8gY2FuIHRyeSBpbmZsYXRlU3luY1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmKHIgPT0gWl9PSyl7XG4gICAgICAgICAgciA9IGY7XG4gICAgICAgIH1cbiAgICAgICAgaWYociAhPSBaX1NUUkVBTV9FTkQpe1xuICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBmO1xuICAgICAgICB6LmlzdGF0ZS5ibG9ja3MucmVzZXQoeiwgei5pc3RhdGUud2FzKTtcbiAgICAgICAgaWYoei5pc3RhdGUubm93cmFwIT0wKXtcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlPURPTkU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgei5pc3RhdGUubW9kZT1DSEVDSzQ7XG4gICAgICBjYXNlIENIRUNLNDpcblxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcblxuICAgICAgICB6LmF2YWlsX2luLS07IHoudG90YWxfaW4rKztcbiAgICAgICAgei5pc3RhdGUubmVlZD0oKHoubmV4dF9pblt6Lm5leHRfaW5faW5kZXgrK10mMHhmZik8PDI0KSYweGZmMDAwMDAwO1xuICAgICAgICB6LmlzdGF0ZS5tb2RlPUNIRUNLMztcbiAgICAgIGNhc2UgQ0hFQ0szOlxuXG4gICAgICAgIGlmKHouYXZhaWxfaW49PTApcmV0dXJuIHI7cj1mO1xuXG4gICAgICAgIHouYXZhaWxfaW4tLTsgei50b3RhbF9pbisrO1xuICAgICAgICB6LmlzdGF0ZS5uZWVkKz0oKHoubmV4dF9pblt6Lm5leHRfaW5faW5kZXgrK10mMHhmZik8PDE2KSYweGZmMDAwMDtcbiAgICAgICAgei5pc3RhdGUubW9kZSA9IENIRUNLMjtcbiAgICAgIGNhc2UgQ0hFQ0syOlxuXG4gICAgICAgIGlmKHouYXZhaWxfaW49PTApcmV0dXJuIHI7cj1mO1xuXG4gICAgICAgIHouYXZhaWxfaW4tLTsgei50b3RhbF9pbisrO1xuICAgICAgICB6LmlzdGF0ZS5uZWVkKz0oKHoubmV4dF9pblt6Lm5leHRfaW5faW5kZXgrK10mMHhmZik8PDgpJjB4ZmYwMDtcbiAgICAgICAgei5pc3RhdGUubW9kZSA9IENIRUNLMTtcbiAgICAgIGNhc2UgQ0hFQ0sxOlxuXG4gICAgICAgIGlmKHouYXZhaWxfaW49PTApcmV0dXJuIHI7cj1mO1xuXG4gICAgICAgIHouYXZhaWxfaW4tLTsgei50b3RhbF9pbisrO1xuICAgICAgICB6LmlzdGF0ZS5uZWVkKz0oei5uZXh0X2luW3oubmV4dF9pbl9pbmRleCsrXSYweGZmKTtcblxuICAgICAgICBpZigoKHouaXN0YXRlLndhc1swXSkpICE9ICgoei5pc3RhdGUubmVlZCkpKXtcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIHoubXNnID0gXCJpbmNvcnJlY3QgZGF0YSBjaGVja1wiO1xuICAgICAgICAgIHouaXN0YXRlLm1hcmtlciA9IDU7ICAgICAgIC8vIGNhbid0IHRyeSBpbmZsYXRlU3luY1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgei5pc3RhdGUubW9kZSA9IERPTkU7XG4gICAgICBjYXNlIERPTkU6XG4gICAgICAgIHJldHVybiBaX1NUUkVBTV9FTkQ7XG4gICAgICBjYXNlIEJBRDpcbiAgICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlU2V0RGljdGlvbmFyeSA9IGZ1bmN0aW9uKHosICBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKSB7XG4gICAgdmFyIGluZGV4PTA7XG4gICAgdmFyIGxlbmd0aCA9IGRpY3RMZW5ndGg7XG4gICAgaWYoej09bnVsbCB8fCB6LmlzdGF0ZSA9PSBudWxsfHwgei5pc3RhdGUubW9kZSAhPSBESUNUMClcbiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcblxuICAgIGlmKHouX2FkbGVyLmFkbGVyMzIoMSwgZGljdGlvbmFyeSwgMCwgZGljdExlbmd0aCkhPXouYWRsZXIpe1xuICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcbiAgICB9XG5cbiAgICB6LmFkbGVyID0gei5fYWRsZXIuYWRsZXIzMigwLCBudWxsLCAwLCAwKTtcblxuICAgIGlmKGxlbmd0aCA+PSAoMTw8ei5pc3RhdGUud2JpdHMpKXtcbiAgICAgIGxlbmd0aCA9ICgxPDx6LmlzdGF0ZS53Yml0cyktMTtcbiAgICAgIGluZGV4PWRpY3RMZW5ndGggLSBsZW5ndGg7XG4gICAgfVxuICAgIHouaXN0YXRlLmJsb2Nrcy5zZXRfZGljdGlvbmFyeShkaWN0aW9uYXJ5LCBpbmRleCwgbGVuZ3RoKTtcbiAgICB6LmlzdGF0ZS5tb2RlID0gQkxPQ0tTO1xuICAgIHJldHVybiBaX09LO1xuICB9XG5cbi8vICBzdGF0aWMgcHJpdmF0ZSBieXRlW10gbWFyayA9IHsoYnl0ZSkwLCAoYnl0ZSkwLCAoYnl0ZSkweGZmLCAoYnl0ZSkweGZmfTtcbnZhciBtYXJrID0gWzAsIDAsIDI1NSwgMjU1XVxuXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlU3luYyA9IGZ1bmN0aW9uKHope1xuICAgIHZhciBuOyAgICAgICAvLyBudW1iZXIgb2YgYnl0ZXMgdG8gbG9vayBhdFxuICAgIHZhciBwOyAgICAgICAvLyBwb2ludGVyIHRvIGJ5dGVzXG4gICAgdmFyIG07ICAgICAgIC8vIG51bWJlciBvZiBtYXJrZXIgYnl0ZXMgZm91bmQgaW4gYSByb3dcbiAgICB2YXIgciwgdzsgICAvLyB0ZW1wb3JhcmllcyB0byBzYXZlIHRvdGFsX2luIGFuZCB0b3RhbF9vdXRcblxuICAgIC8vIHNldCB1cFxuICAgIGlmKHogPT0gbnVsbCB8fCB6LmlzdGF0ZSA9PSBudWxsKVxuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIGlmKHouaXN0YXRlLm1vZGUgIT0gQkFEKXtcbiAgICAgIHouaXN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICB6LmlzdGF0ZS5tYXJrZXIgPSAwO1xuICAgIH1cbiAgICBpZigobj16LmF2YWlsX2luKT09MClcbiAgICAgIHJldHVybiBaX0JVRl9FUlJPUjtcbiAgICBwPXoubmV4dF9pbl9pbmRleDtcbiAgICBtPXouaXN0YXRlLm1hcmtlcjtcblxuICAgIC8vIHNlYXJjaFxuICAgIHdoaWxlIChuIT0wICYmIG0gPCA0KXtcbiAgICAgIGlmKHoubmV4dF9pbltwXSA9PSBtYXJrW21dKXtcbiAgICAgICAgbSsrO1xuICAgICAgfVxuICAgICAgZWxzZSBpZih6Lm5leHRfaW5bcF0hPTApe1xuICAgICAgICBtID0gMDtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIG0gPSA0IC0gbTtcbiAgICAgIH1cbiAgICAgIHArKzsgbi0tO1xuICAgIH1cblxuICAgIC8vIHJlc3RvcmVcbiAgICB6LnRvdGFsX2luICs9IHAtei5uZXh0X2luX2luZGV4O1xuICAgIHoubmV4dF9pbl9pbmRleCA9IHA7XG4gICAgei5hdmFpbF9pbiA9IG47XG4gICAgei5pc3RhdGUubWFya2VyID0gbTtcblxuICAgIC8vIHJldHVybiBubyBqb3kgb3Igc2V0IHVwIHRvIHJlc3RhcnQgb24gYSBuZXcgYmxvY2tcbiAgICBpZihtICE9IDQpe1xuICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcbiAgICB9XG4gICAgcj16LnRvdGFsX2luOyAgdz16LnRvdGFsX291dDtcbiAgICB0aGlzLmluZmxhdGVSZXNldCh6KTtcbiAgICB6LnRvdGFsX2luPXI7ICB6LnRvdGFsX291dCA9IHc7XG4gICAgei5pc3RhdGUubW9kZSA9IEJMT0NLUztcbiAgICByZXR1cm4gWl9PSztcbn1cblxuICAvLyBSZXR1cm5zIHRydWUgaWYgaW5mbGF0ZSBpcyBjdXJyZW50bHkgYXQgdGhlIGVuZCBvZiBhIGJsb2NrIGdlbmVyYXRlZFxuICAvLyBieSBaX1NZTkNfRkxVU0ggb3IgWl9GVUxMX0ZMVVNILiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYnkgb25lIFBQUFxuICAvLyBpbXBsZW1lbnRhdGlvbiB0byBwcm92aWRlIGFuIGFkZGl0aW9uYWwgc2FmZXR5IGNoZWNrLiBQUFAgdXNlcyBaX1NZTkNfRkxVU0hcbiAgLy8gYnV0IHJlbW92ZXMgdGhlIGxlbmd0aCBieXRlcyBvZiB0aGUgcmVzdWx0aW5nIGVtcHR5IHN0b3JlZCBibG9jay4gV2hlblxuICAvLyBkZWNvbXByZXNzaW5nLCBQUFAgY2hlY2tzIHRoYXQgYXQgdGhlIGVuZCBvZiBpbnB1dCBwYWNrZXQsIGluZmxhdGUgaXNcbiAgLy8gd2FpdGluZyBmb3IgdGhlc2UgbGVuZ3RoIGJ5dGVzLlxuSW5mbGF0ZS5wcm90b3R5cGUuaW5mbGF0ZVN5bmNQb2ludCA9IGZ1bmN0aW9uKHope1xuICAgIGlmKHogPT0gbnVsbCB8fCB6LmlzdGF0ZSA9PSBudWxsIHx8IHouaXN0YXRlLmJsb2NrcyA9PSBudWxsKVxuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIHJldHVybiB6LmlzdGF0ZS5ibG9ja3Muc3luY19wb2ludCgpO1xufVxuXG5cbi8vXG4vLyBJbmZCbG9ja3MuamF2YVxuLy9cblxudmFyIElORkJMT0NLU19CT1JERVIgPSBbMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNV07XG5cbmZ1bmN0aW9uIEluZkJsb2Nrcyh6LCBjaGVja2ZuLCB3KSB7XG4gICAgdGhpcy5odWZ0cz1uZXcgSW50MzJBcnJheShNQU5ZKjMpO1xuICAgIHRoaXMud2luZG93PW5ldyBVaW50OEFycmF5KHcpO1xuICAgIHRoaXMuZW5kPXc7XG4gICAgdGhpcy5jaGVja2ZuID0gY2hlY2tmbjtcbiAgICB0aGlzLm1vZGUgPSBJQl9UWVBFO1xuICAgIHRoaXMucmVzZXQoeiwgbnVsbCk7XG5cbiAgICB0aGlzLmxlZnQgPSAwOyAgICAgICAgICAgIC8vIGlmIFNUT1JFRCwgYnl0ZXMgbGVmdCB0byBjb3B5IFxuXG4gICAgdGhpcy50YWJsZSA9IDA7ICAgICAgICAgICAvLyB0YWJsZSBsZW5ndGhzICgxNCBiaXRzKSBcbiAgICB0aGlzLmluZGV4ID0gMDsgICAgICAgICAgIC8vIGluZGV4IGludG8gYmxlbnMgKG9yIGJvcmRlcikgXG4gICAgdGhpcy5ibGVucyA9IG51bGw7ICAgICAgICAgLy8gYml0IGxlbmd0aHMgb2YgY29kZXMgXG4gICAgdGhpcy5iYj1uZXcgSW50MzJBcnJheSgxKTsgLy8gYml0IGxlbmd0aCB0cmVlIGRlcHRoIFxuICAgIHRoaXMudGI9bmV3IEludDMyQXJyYXkoMSk7IC8vIGJpdCBsZW5ndGggZGVjb2RpbmcgdHJlZSBcblxuICAgIHRoaXMuY29kZXMgPSBuZXcgSW5mQ29kZXMoKTtcblxuICAgIHRoaXMubGFzdCA9IDA7ICAgICAgICAgICAgLy8gdHJ1ZSBpZiB0aGlzIGJsb2NrIGlzIHRoZSBsYXN0IGJsb2NrIFxuXG4gIC8vIG1vZGUgaW5kZXBlbmRlbnQgaW5mb3JtYXRpb24gXG4gICAgdGhpcy5iaXRrID0gMDsgICAgICAgICAgICAvLyBiaXRzIGluIGJpdCBidWZmZXIgXG4gICAgdGhpcy5iaXRiID0gMDsgICAgICAgICAgICAvLyBiaXQgYnVmZmVyIFxuICAgIHRoaXMucmVhZCA9IDA7ICAgICAgICAgICAgLy8gd2luZG93IHJlYWQgcG9pbnRlciBcbiAgICB0aGlzLndyaXRlID0gMDsgICAgICAgICAgIC8vIHdpbmRvdyB3cml0ZSBwb2ludGVyIFxuICAgIHRoaXMuY2hlY2sgPSAwOyAgICAgICAgICAvLyBjaGVjayBvbiBvdXRwdXQgXG5cbiAgICB0aGlzLmluZnRyZWU9bmV3IEluZlRyZWUoKTtcbn1cblxuXG5cblxuSW5mQmxvY2tzLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKHosIGMpe1xuICAgIGlmKGMpIGNbMF09dGhpcy5jaGVjaztcbiAgICBpZih0aGlzLm1vZGU9PUlCX0NPREVTKXtcbiAgICAgIHRoaXMuY29kZXMuZnJlZSh6KTtcbiAgICB9XG4gICAgdGhpcy5tb2RlPUlCX1RZUEU7XG4gICAgdGhpcy5iaXRrPTA7XG4gICAgdGhpcy5iaXRiPTA7XG4gICAgdGhpcy5yZWFkPXRoaXMud3JpdGU9MDtcblxuICAgIGlmKHRoaXMuY2hlY2tmbilcbiAgICAgIHouYWRsZXI9dGhpcy5jaGVjaz16Ll9hZGxlci5hZGxlcjMyKDAsIG51bGwsIDAsIDApO1xuICB9XG5cbiBJbmZCbG9ja3MucHJvdG90eXBlLnByb2MgPSBmdW5jdGlvbih6LCByKXtcbiAgICB2YXIgdDsgICAgICAgICAgICAgIC8vIHRlbXBvcmFyeSBzdG9yYWdlXG4gICAgdmFyIGI7ICAgICAgICAgICAgICAvLyBiaXQgYnVmZmVyXG4gICAgdmFyIGs7ICAgICAgICAgICAgICAvLyBiaXRzIGluIGJpdCBidWZmZXJcbiAgICB2YXIgcDsgICAgICAgICAgICAgIC8vIGlucHV0IGRhdGEgcG9pbnRlclxuICAgIHZhciBuOyAgICAgICAgICAgICAgLy8gYnl0ZXMgYXZhaWxhYmxlIHRoZXJlXG4gICAgdmFyIHE7ICAgICAgICAgICAgICAvLyBvdXRwdXQgd2luZG93IHdyaXRlIHBvaW50ZXJcbiAgICB2YXIgbTsgICAgICAgICAgICAgIC8vIGJ5dGVzIHRvIGVuZCBvZiB3aW5kb3cgb3IgcmVhZCBwb2ludGVyXG5cbiAgICAvLyBjb3B5IGlucHV0L291dHB1dCBpbmZvcm1hdGlvbiB0byBsb2NhbHMgKFVQREFURSBtYWNybyByZXN0b3JlcylcbiAgICB7cD16Lm5leHRfaW5faW5kZXg7bj16LmF2YWlsX2luO2I9dGhpcy5iaXRiO2s9dGhpcy5iaXRrO31cbiAgICB7cT10aGlzLndyaXRlO209KHE8dGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO31cblxuICAgIC8vIHByb2Nlc3MgaW5wdXQgYmFzZWQgb24gY3VycmVudCBzdGF0ZVxuICAgIHdoaWxlKHRydWUpe1xuICAgICAgc3dpdGNoICh0aGlzLm1vZGUpe1xuICAgICAgY2FzZSBJQl9UWVBFOlxuXG5cdHdoaWxlKGs8KDMpKXtcblx0ICBpZihuIT0wKXtcblx0ICAgIHI9Wl9PSztcblx0ICB9XG5cdCAgZWxzZXtcblx0ICAgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgICB6LmF2YWlsX2luPW47XG5cdCAgICB6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgIHRoaXMud3JpdGU9cTtcblx0ICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICB9O1xuXHQgIG4tLTtcblx0ICBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XG5cdCAgays9ODtcblx0fVxuXHR0ID0gKGIgJiA3KTtcblx0dGhpcy5sYXN0ID0gdCAmIDE7XG5cblx0c3dpdGNoICh0ID4+PiAxKXtcbiAgICAgICAgY2FzZSAwOiAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdG9yZWQgXG4gICAgICAgICAge2I+Pj49KDMpO2stPSgzKTt9XG4gICAgICAgICAgdCA9IGsgJiA3OyAgICAgICAgICAgICAgICAgICAgLy8gZ28gdG8gYnl0ZSBib3VuZGFyeVxuXG4gICAgICAgICAge2I+Pj49KHQpO2stPSh0KTt9XG4gICAgICAgICAgdGhpcy5tb2RlID0gSUJfTEVOUzsgICAgICAgICAgICAgICAgICAvLyBnZXQgbGVuZ3RoIG9mIHN0b3JlZCBibG9ja1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpeGVkXG4gICAgICAgICAge1xuICAgICAgICAgICAgICB2YXIgYmw9bmV3IEludDMyQXJyYXkoMSk7XG5cdCAgICAgIHZhciBiZD1uZXcgSW50MzJBcnJheSgxKTtcbiAgICAgICAgICAgICAgdmFyIHRsPVtdO1xuXHQgICAgICB2YXIgdGQ9W107XG5cblx0ICAgICAgaW5mbGF0ZV90cmVlc19maXhlZChibCwgYmQsIHRsLCB0ZCwgeik7XG4gICAgICAgICAgICAgIHRoaXMuY29kZXMuaW5pdChibFswXSwgYmRbMF0sIHRsWzBdLCAwLCB0ZFswXSwgMCwgeik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAge2I+Pj49KDMpO2stPSgzKTt9XG5cbiAgICAgICAgICB0aGlzLm1vZGUgPSBJQl9DT0RFUztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOiAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkeW5hbWljXG5cbiAgICAgICAgICB7Yj4+Pj0oMyk7ay09KDMpO31cblxuICAgICAgICAgIHRoaXMubW9kZSA9IElCX1RBQkxFO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlsbGVnYWxcblxuICAgICAgICAgIHtiPj4+PSgzKTtrLT0oMyk7fVxuICAgICAgICAgIHRoaXMubW9kZSA9IEJBRDtcbiAgICAgICAgICB6Lm1zZyA9IFwiaW52YWxpZCBibG9jayB0eXBlXCI7XG4gICAgICAgICAgciA9IFpfREFUQV9FUlJPUjtcblxuXHQgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgIHRoaXMud3JpdGU9cTtcblx0ICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdH1cblx0YnJlYWs7XG4gICAgICBjYXNlIElCX0xFTlM6XG5cdHdoaWxlKGs8KDMyKSl7XG5cdCAgaWYobiE9MCl7XG5cdCAgICByPVpfT0s7XG5cdCAgfVxuXHQgIGVsc2V7XG5cdCAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgICAgei5hdmFpbF9pbj1uO1xuXHQgICAgei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICB0aGlzLndyaXRlPXE7XG5cdCAgICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgfTtcblx0ICBuLS07XG5cdCAgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xuXHQgIGsrPTg7XG5cdH1cblxuXHRpZiAoKCgofmIpID4+PiAxNikgJiAweGZmZmYpICE9IChiICYgMHhmZmZmKSl7XG5cdCAgdGhpcy5tb2RlID0gQkFEO1xuXHQgIHoubXNnID0gXCJpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzXCI7XG5cdCAgciA9IFpfREFUQV9FUlJPUjtcblxuXHQgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgIHRoaXMud3JpdGU9cTtcblx0ICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdH1cblx0dGhpcy5sZWZ0ID0gKGIgJiAweGZmZmYpO1xuXHRiID0gayA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAvLyBkdW1wIGJpdHNcblx0dGhpcy5tb2RlID0gdGhpcy5sZWZ0IT0wID8gSUJfU1RPUkVEIDogKHRoaXMubGFzdCE9MCA/IElCX0RSWSA6IElCX1RZUEUpO1xuXHRicmVhaztcbiAgICAgIGNhc2UgSUJfU1RPUkVEOlxuXHRpZiAobiA9PSAwKXtcblx0ICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICB3cml0ZT1xO1xuXHQgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcblx0fVxuXG5cdGlmKG09PTApe1xuXHQgIGlmKHE9PWVuZCYmcmVhZCE9MCl7XG5cdCAgICBxPTA7IG09KHE8dGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO1xuXHQgIH1cblx0ICBpZihtPT0wKXtcblx0ICAgIHRoaXMud3JpdGU9cTsgXG5cdCAgICByPXRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHQgICAgcT10aGlzLndyaXRlOyBtID0gKHEgPCB0aGlzLnJlYWQgPyB0aGlzLnJlYWQtcS0xIDogdGhpcy5lbmQtcSk7XG5cdCAgICBpZihxPT10aGlzLmVuZCAmJiB0aGlzLnJlYWQgIT0gMCl7XG5cdCAgICAgIHE9MDsgbSA9IChxIDwgdGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO1xuXHQgICAgfVxuXHQgICAgaWYobT09MCl7XG5cdCAgICAgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgICAgdGhpcy53cml0ZT1xO1xuXHQgICAgICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdHI9Wl9PSztcblxuXHR0ID0gdGhpcy5sZWZ0O1xuXHRpZih0Pm4pIHQgPSBuO1xuXHRpZih0Pm0pIHQgPSBtO1xuXHRhcnJheUNvcHkoei5uZXh0X2luLCBwLCB0aGlzLndpbmRvdywgcSwgdCk7XG5cdHAgKz0gdDsgIG4gLT0gdDtcblx0cSArPSB0OyAgbSAtPSB0O1xuXHRpZiAoKHRoaXMubGVmdCAtPSB0KSAhPSAwKVxuXHQgIGJyZWFrO1xuXHR0aGlzLm1vZGUgPSAodGhpcy5sYXN0ICE9IDAgPyBJQl9EUlkgOiBJQl9UWVBFKTtcblx0YnJlYWs7XG4gICAgICBjYXNlIElCX1RBQkxFOlxuXG5cdHdoaWxlKGs8KDE0KSl7XG5cdCAgaWYobiE9MCl7XG5cdCAgICByPVpfT0s7XG5cdCAgfVxuXHQgIGVsc2V7XG5cdCAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgICAgei5hdmFpbF9pbj1uO1xuXHQgICAgei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICB0aGlzLndyaXRlPXE7XG5cdCAgICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgfTtcblx0ICBuLS07XG5cdCAgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xuXHQgIGsrPTg7XG5cdH1cblxuXHR0aGlzLnRhYmxlID0gdCA9IChiICYgMHgzZmZmKTtcblx0aWYgKCh0ICYgMHgxZikgPiAyOSB8fCAoKHQgPj4gNSkgJiAweDFmKSA+IDI5KVxuXHQgIHtcblx0ICAgIHRoaXMubW9kZSA9IElCX0JBRDtcblx0ICAgIHoubXNnID0gXCJ0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9sc1wiO1xuXHQgICAgciA9IFpfREFUQV9FUlJPUjtcblxuXHQgICAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcblx0ICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgIHRoaXMud3JpdGU9cTtcblx0ICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICB9XG5cdHQgPSAyNTggKyAodCAmIDB4MWYpICsgKCh0ID4+IDUpICYgMHgxZik7XG5cdGlmKHRoaXMuYmxlbnM9PW51bGwgfHwgdGhpcy5ibGVucy5sZW5ndGg8dCl7XG5cdCAgICB0aGlzLmJsZW5zPW5ldyBJbnQzMkFycmF5KHQpO1xuXHR9XG5cdGVsc2V7XG5cdCAgZm9yKHZhciBpPTA7IGk8dDsgaSsrKXtcbiAgICAgICAgICAgICAgdGhpcy5ibGVuc1tpXT0wO1xuICAgICAgICAgIH1cblx0fVxuXG5cdHtiPj4+PSgxNCk7ay09KDE0KTt9XG5cblx0dGhpcy5pbmRleCA9IDA7XG5cdG1vZGUgPSBJQl9CVFJFRTtcbiAgICAgIGNhc2UgSUJfQlRSRUU6XG5cdHdoaWxlICh0aGlzLmluZGV4IDwgNCArICh0aGlzLnRhYmxlID4+PiAxMCkpe1xuXHQgIHdoaWxlKGs8KDMpKXtcblx0ICAgIGlmKG4hPTApe1xuXHQgICAgICByPVpfT0s7XG5cdCAgICB9XG5cdCAgICBlbHNle1xuXHQgICAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgICAgICB6LmF2YWlsX2luPW47XG5cdCAgICAgIHoudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgICAgICB0aGlzLndyaXRlPXE7XG5cdCAgICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICAgIH07XG5cdCAgICBuLS07XG5cdCAgICBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XG5cdCAgICBrKz04O1xuXHQgIH1cblxuXHQgIHRoaXMuYmxlbnNbSU5GQkxPQ0tTX0JPUkRFUlt0aGlzLmluZGV4KytdXSA9IGImNztcblxuXHQgIHtiPj4+PSgzKTtrLT0oMyk7fVxuXHR9XG5cblx0d2hpbGUodGhpcy5pbmRleCA8IDE5KXtcblx0ICB0aGlzLmJsZW5zW0lORkJMT0NLU19CT1JERVJbdGhpcy5pbmRleCsrXV0gPSAwO1xuXHR9XG5cblx0dGhpcy5iYlswXSA9IDc7XG5cdHQgPSB0aGlzLmluZnRyZWUuaW5mbGF0ZV90cmVlc19iaXRzKHRoaXMuYmxlbnMsIHRoaXMuYmIsIHRoaXMudGIsIHRoaXMuaHVmdHMsIHopO1xuXHRpZiAodCAhPSBaX09LKXtcblx0ICByID0gdDtcblx0ICBpZiAociA9PSBaX0RBVEFfRVJST1Ipe1xuXHQgICAgdGhpcy5ibGVucz1udWxsO1xuXHQgICAgdGhpcy5tb2RlID0gSUJfQkFEO1xuXHQgIH1cblxuXHQgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgIHdyaXRlPXE7XG5cdCAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHR9XG5cblx0dGhpcy5pbmRleCA9IDA7XG5cdHRoaXMubW9kZSA9IElCX0RUUkVFO1xuICAgICAgY2FzZSBJQl9EVFJFRTpcblx0d2hpbGUgKHRydWUpe1xuXHQgIHQgPSB0aGlzLnRhYmxlO1xuXHQgIGlmKCEodGhpcy5pbmRleCA8IDI1OCArICh0ICYgMHgxZikgKyAoKHQgPj4gNSkgJiAweDFmKSkpe1xuXHQgICAgYnJlYWs7XG5cdCAgfVxuXG5cdCAgdmFyIGg7IC8vaW50W11cblx0ICB2YXIgaSwgaiwgYztcblxuXHQgIHQgPSB0aGlzLmJiWzBdO1xuXG5cdCAgd2hpbGUoazwodCkpe1xuXHQgICAgaWYobiE9MCl7XG5cdCAgICAgIHI9Wl9PSztcblx0ICAgIH1cblx0ICAgIGVsc2V7XG5cdCAgICAgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgICAgIHouYXZhaWxfaW49bjtcblx0ICAgICAgei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICAgIHRoaXMud3JpdGU9cTtcblx0ICAgICAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHQgICAgfTtcblx0ICAgIG4tLTtcblx0ICAgIGJ8PSh6Lm5leHRfaW5bcCsrXSYweGZmKTw8aztcblx0ICAgIGsrPTg7XG5cdCAgfVxuXG4vL1x0ICBpZiAodGhpcy50YlswXT09LTEpe1xuLy8gICAgICAgICAgICBkbG9nKFwibnVsbC4uLlwiKTtcbi8vXHQgIH1cblxuXHQgIHQ9dGhpcy5odWZ0c1sodGhpcy50YlswXSsoYiAmIGluZmxhdGVfbWFza1t0XSkpKjMrMV07XG5cdCAgYz10aGlzLmh1ZnRzWyh0aGlzLnRiWzBdKyhiICYgaW5mbGF0ZV9tYXNrW3RdKSkqMysyXTtcblxuXHQgIGlmIChjIDwgMTYpe1xuXHQgICAgYj4+Pj0odCk7ay09KHQpO1xuXHQgICAgdGhpcy5ibGVuc1t0aGlzLmluZGV4KytdID0gYztcblx0ICB9XG5cdCAgZWxzZSB7IC8vIGMgPT0gMTYuLjE4XG5cdCAgICBpID0gYyA9PSAxOCA/IDcgOiBjIC0gMTQ7XG5cdCAgICBqID0gYyA9PSAxOCA/IDExIDogMztcblxuXHQgICAgd2hpbGUoazwodCtpKSl7XG5cdCAgICAgIGlmKG4hPTApe1xuXHRcdHI9Wl9PSztcblx0ICAgICAgfVxuXHQgICAgICBlbHNle1xuXHRcdHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdFx0ei5hdmFpbF9pbj1uO1xuXHRcdHoudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHRcdHRoaXMud3JpdGU9cTtcblx0XHRyZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgICAgIH07XG5cdCAgICAgIG4tLTtcblx0ICAgICAgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xuXHQgICAgICBrKz04O1xuXHQgICAgfVxuXG5cdCAgICBiPj4+PSh0KTtrLT0odCk7XG5cblx0ICAgIGogKz0gKGIgJiBpbmZsYXRlX21hc2tbaV0pO1xuXG5cdCAgICBiPj4+PShpKTtrLT0oaSk7XG5cblx0ICAgIGkgPSB0aGlzLmluZGV4O1xuXHQgICAgdCA9IHRoaXMudGFibGU7XG5cdCAgICBpZiAoaSArIGogPiAyNTggKyAodCAmIDB4MWYpICsgKCh0ID4+IDUpICYgMHgxZikgfHxcblx0XHQoYyA9PSAxNiAmJiBpIDwgMSkpe1xuXHQgICAgICB0aGlzLmJsZW5zPW51bGw7XG5cdCAgICAgIHRoaXMubW9kZSA9IElCX0JBRDtcblx0ICAgICAgei5tc2cgPSBcImludmFsaWQgYml0IGxlbmd0aCByZXBlYXRcIjtcblx0ICAgICAgciA9IFpfREFUQV9FUlJPUjtcblxuXHQgICAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgICAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICAgIHRoaXMud3JpdGU9cTtcblx0ICAgICAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHQgICAgfVxuXG5cdCAgICBjID0gYyA9PSAxNiA/IHRoaXMuYmxlbnNbaS0xXSA6IDA7XG5cdCAgICBkb3tcblx0ICAgICAgdGhpcy5ibGVuc1tpKytdID0gYztcblx0ICAgIH1cblx0ICAgIHdoaWxlICgtLWohPTApO1xuXHQgICAgdGhpcy5pbmRleCA9IGk7XG5cdCAgfVxuXHR9XG5cblx0dGhpcy50YlswXT0tMTtcblx0e1xuXHQgICAgdmFyIGJsPW5ldyBJbnQzMkFycmF5KDEpO1xuXHQgICAgdmFyIGJkPW5ldyBJbnQzMkFycmF5KDEpO1xuXHQgICAgdmFyIHRsPW5ldyBJbnQzMkFycmF5KDEpO1xuXHQgICAgdmFyIHRkPW5ldyBJbnQzMkFycmF5KDEpO1xuXHQgICAgYmxbMF0gPSA5OyAgICAgICAgIC8vIG11c3QgYmUgPD0gOSBmb3IgbG9va2FoZWFkIGFzc3VtcHRpb25zXG5cdCAgICBiZFswXSA9IDY7ICAgICAgICAgLy8gbXVzdCBiZSA8PSA5IGZvciBsb29rYWhlYWQgYXNzdW1wdGlvbnNcblxuXHQgICAgdCA9IHRoaXMudGFibGU7XG5cdCAgICB0ID0gdGhpcy5pbmZ0cmVlLmluZmxhdGVfdHJlZXNfZHluYW1pYygyNTcgKyAodCAmIDB4MWYpLCBcblx0XHRcdFx0XHQgICAgICAxICsgKCh0ID4+IDUpICYgMHgxZiksXG5cdFx0XHRcdFx0ICAgICAgdGhpcy5ibGVucywgYmwsIGJkLCB0bCwgdGQsIHRoaXMuaHVmdHMsIHopO1xuXG5cdCAgICBpZiAodCAhPSBaX09LKXtcblx0ICAgICAgICBpZiAodCA9PSBaX0RBVEFfRVJST1Ipe1xuXHQgICAgICAgICAgICB0aGlzLmJsZW5zPW51bGw7XG5cdCAgICAgICAgICAgIHRoaXMubW9kZSA9IEJBRDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgciA9IHQ7XG5cblx0ICAgICAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgICAgICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgICAgICB0aGlzLndyaXRlPXE7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5jb2Rlcy5pbml0KGJsWzBdLCBiZFswXSwgdGhpcy5odWZ0cywgdGxbMF0sIHRoaXMuaHVmdHMsIHRkWzBdLCB6KTtcblx0fVxuXHR0aGlzLm1vZGUgPSBJQl9DT0RFUztcbiAgICAgIGNhc2UgSUJfQ09ERVM6XG5cdHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9aztcblx0ei5hdmFpbF9pbj1uOyB6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0dGhpcy53cml0ZT1xO1xuXG5cdGlmICgociA9IHRoaXMuY29kZXMucHJvYyh0aGlzLCB6LCByKSkgIT0gWl9TVFJFQU1fRU5EKXtcblx0ICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHosIHIpO1xuXHR9XG5cdHIgPSBaX09LO1xuXHR0aGlzLmNvZGVzLmZyZWUoeik7XG5cblx0cD16Lm5leHRfaW5faW5kZXg7IG49ei5hdmFpbF9pbjtiPXRoaXMuYml0YjtrPXRoaXMuYml0aztcblx0cT10aGlzLndyaXRlO20gPSAocSA8IHRoaXMucmVhZCA/IHRoaXMucmVhZC1xLTEgOiB0aGlzLmVuZC1xKTtcblxuXHRpZiAodGhpcy5sYXN0PT0wKXtcblx0ICB0aGlzLm1vZGUgPSBJQl9UWVBFO1xuXHQgIGJyZWFrO1xuXHR9XG5cdHRoaXMubW9kZSA9IElCX0RSWTtcbiAgICAgIGNhc2UgSUJfRFJZOlxuXHR0aGlzLndyaXRlPXE7IFxuXHRyID0gdGhpcy5pbmZsYXRlX2ZsdXNoKHosIHIpOyBcblx0cT10aGlzLndyaXRlOyBtID0gKHEgPCB0aGlzLnJlYWQgPyB0aGlzLnJlYWQtcS0xIDogdGhpcy5lbmQtcSk7XG5cdGlmICh0aGlzLnJlYWQgIT0gdGhpcy53cml0ZSl7XG5cdCAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcblx0ICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgdGhpcy53cml0ZT1xO1xuXHQgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeiwgcik7XG5cdH1cblx0bW9kZSA9IERPTkU7XG4gICAgICBjYXNlIElCX0RPTkU6XG5cdHIgPSBaX1NUUkVBTV9FTkQ7XG5cblx0dGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcblx0ei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHR0aGlzLndyaXRlPXE7XG5cdHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeiwgcik7XG4gICAgICBjYXNlIElCX0JBRDpcblx0ciA9IFpfREFUQV9FUlJPUjtcblxuXHR0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHR6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdHRoaXMud3JpdGU9cTtcblx0cmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LCByKTtcblxuICAgICAgZGVmYXVsdDpcblx0ciA9IFpfU1RSRUFNX0VSUk9SO1xuXG5cdHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0dGhpcy53cml0ZT1xO1xuXHRyZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHosIHIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG5JbmZCbG9ja3MucHJvdG90eXBlLmZyZWUgPSBmdW5jdGlvbih6KXtcbiAgICB0aGlzLnJlc2V0KHosIG51bGwpO1xuICAgIHRoaXMud2luZG93PW51bGw7XG4gICAgdGhpcy5odWZ0cz1udWxsO1xufVxuXG5JbmZCbG9ja3MucHJvdG90eXBlLnNldF9kaWN0aW9uYXJ5ID0gZnVuY3Rpb24oZCwgc3RhcnQsIG4pe1xuICAgIGFycmF5Q29weShkLCBzdGFydCwgd2luZG93LCAwLCBuKTtcbiAgICB0aGlzLnJlYWQgPSB0aGlzLndyaXRlID0gbjtcbn1cblxuICAvLyBSZXR1cm5zIHRydWUgaWYgaW5mbGF0ZSBpcyBjdXJyZW50bHkgYXQgdGhlIGVuZCBvZiBhIGJsb2NrIGdlbmVyYXRlZFxuICAvLyBieSBaX1NZTkNfRkxVU0ggb3IgWl9GVUxMX0ZMVVNILiBcbkluZkJsb2Nrcy5wcm90b3R5cGUuc3luY19wb2ludCA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHRoaXMubW9kZSA9PSBJQl9MRU5TO1xufVxuXG4gIC8vIGNvcHkgYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIHRoZSBzbGlkaW5nIHdpbmRvdyB0byB0aGUgb3V0cHV0IGFyZWFcbkluZkJsb2Nrcy5wcm90b3R5cGUuaW5mbGF0ZV9mbHVzaCA9IGZ1bmN0aW9uKHosIHIpe1xuICAgIHZhciBuO1xuICAgIHZhciBwO1xuICAgIHZhciBxO1xuXG4gICAgLy8gbG9jYWwgY29waWVzIG9mIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gcG9pbnRlcnNcbiAgICBwID0gei5uZXh0X291dF9pbmRleDtcbiAgICBxID0gdGhpcy5yZWFkO1xuXG4gICAgLy8gY29tcHV0ZSBudW1iZXIgb2YgYnl0ZXMgdG8gY29weSBhcyBmYXIgYXMgZW5kIG9mIHdpbmRvd1xuICAgIG4gPSAoKHEgPD0gdGhpcy53cml0ZSA/IHRoaXMud3JpdGUgOiB0aGlzLmVuZCkgLSBxKTtcbiAgICBpZiAobiA+IHouYXZhaWxfb3V0KSBuID0gei5hdmFpbF9vdXQ7XG4gICAgaWYgKG4hPTAgJiYgciA9PSBaX0JVRl9FUlJPUikgciA9IFpfT0s7XG5cbiAgICAvLyB1cGRhdGUgY291bnRlcnNcbiAgICB6LmF2YWlsX291dCAtPSBuO1xuICAgIHoudG90YWxfb3V0ICs9IG47XG5cbiAgICAvLyB1cGRhdGUgY2hlY2sgaW5mb3JtYXRpb25cbiAgICBpZih0aGlzLmNoZWNrZm4gIT0gbnVsbClcbiAgICAgIHouYWRsZXI9dGhpcy5jaGVjaz16Ll9hZGxlci5hZGxlcjMyKHRoaXMuY2hlY2ssIHRoaXMud2luZG93LCBxLCBuKTtcblxuICAgIC8vIGNvcHkgYXMgZmFyIGFzIGVuZCBvZiB3aW5kb3dcbiAgICBhcnJheUNvcHkodGhpcy53aW5kb3csIHEsIHoubmV4dF9vdXQsIHAsIG4pO1xuICAgIHAgKz0gbjtcbiAgICBxICs9IG47XG5cbiAgICAvLyBzZWUgaWYgbW9yZSB0byBjb3B5IGF0IGJlZ2lubmluZyBvZiB3aW5kb3dcbiAgICBpZiAocSA9PSB0aGlzLmVuZCl7XG4gICAgICAvLyB3cmFwIHBvaW50ZXJzXG4gICAgICBxID0gMDtcbiAgICAgIGlmICh0aGlzLndyaXRlID09IHRoaXMuZW5kKVxuICAgICAgICB0aGlzLndyaXRlID0gMDtcblxuICAgICAgLy8gY29tcHV0ZSBieXRlcyB0byBjb3B5XG4gICAgICBuID0gdGhpcy53cml0ZSAtIHE7XG4gICAgICBpZiAobiA+IHouYXZhaWxfb3V0KSBuID0gei5hdmFpbF9vdXQ7XG4gICAgICBpZiAobiE9MCAmJiByID09IFpfQlVGX0VSUk9SKSByID0gWl9PSztcblxuICAgICAgLy8gdXBkYXRlIGNvdW50ZXJzXG4gICAgICB6LmF2YWlsX291dCAtPSBuO1xuICAgICAgei50b3RhbF9vdXQgKz0gbjtcblxuICAgICAgLy8gdXBkYXRlIGNoZWNrIGluZm9ybWF0aW9uXG4gICAgICBpZih0aGlzLmNoZWNrZm4gIT0gbnVsbClcblx0ei5hZGxlcj10aGlzLmNoZWNrPXouX2FkbGVyLmFkbGVyMzIodGhpcy5jaGVjaywgdGhpcy53aW5kb3csIHEsIG4pO1xuXG4gICAgICAvLyBjb3B5XG4gICAgICBhcnJheUNvcHkodGhpcy53aW5kb3csIHEsIHoubmV4dF9vdXQsIHAsIG4pO1xuICAgICAgcCArPSBuO1xuICAgICAgcSArPSBuO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSBwb2ludGVyc1xuICAgIHoubmV4dF9vdXRfaW5kZXggPSBwO1xuICAgIHRoaXMucmVhZCA9IHE7XG5cbiAgICAvLyBkb25lXG4gICAgcmV0dXJuIHI7XG4gIH1cblxuLy9cbi8vIEluZkNvZGVzLmphdmFcbi8vXG5cbnZhciBJQ19TVEFSVD0wOyAgLy8geDogc2V0IHVwIGZvciBMRU5cbnZhciBJQ19MRU49MTsgICAgLy8gaTogZ2V0IGxlbmd0aC9saXRlcmFsL2VvYiBuZXh0XG52YXIgSUNfTEVORVhUPTI7IC8vIGk6IGdldHRpbmcgbGVuZ3RoIGV4dHJhIChoYXZlIGJhc2UpXG52YXIgSUNfRElTVD0zOyAgIC8vIGk6IGdldCBkaXN0YW5jZSBuZXh0XG52YXIgSUNfRElTVEVYVD00Oy8vIGk6IGdldHRpbmcgZGlzdGFuY2UgZXh0cmFcbnZhciBJQ19DT1BZPTU7ICAgLy8gbzogY29weWluZyBieXRlcyBpbiB3aW5kb3csIHdhaXRpbmcgZm9yIHNwYWNlXG52YXIgSUNfTElUPTY7ICAgIC8vIG86IGdvdCBsaXRlcmFsLCB3YWl0aW5nIGZvciBvdXRwdXQgc3BhY2VcbnZhciBJQ19XQVNIPTc7ICAgLy8gbzogZ290IGVvYiwgcG9zc2libHkgc3RpbGwgb3V0cHV0IHdhaXRpbmdcbnZhciBJQ19FTkQ9ODsgICAgLy8geDogZ290IGVvYiBhbmQgYWxsIGRhdGEgZmx1c2hlZFxudmFyIElDX0JBRENPREU9OTsvLyB4OiBnb3QgZXJyb3JcblxuZnVuY3Rpb24gSW5mQ29kZXMoKSB7XG59XG5cbkluZkNvZGVzLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oYmwsIGJkLCB0bCwgdGxfaW5kZXgsIHRkLCB0ZF9pbmRleCwgeikge1xuICAgIHRoaXMubW9kZT1JQ19TVEFSVDtcbiAgICB0aGlzLmxiaXRzPWJsO1xuICAgIHRoaXMuZGJpdHM9YmQ7XG4gICAgdGhpcy5sdHJlZT10bDtcbiAgICB0aGlzLmx0cmVlX2luZGV4PXRsX2luZGV4O1xuICAgIHRoaXMuZHRyZWUgPSB0ZDtcbiAgICB0aGlzLmR0cmVlX2luZGV4PXRkX2luZGV4O1xuICAgIHRoaXMudHJlZT1udWxsO1xufVxuXG5JbmZDb2Rlcy5wcm90b3R5cGUucHJvYyA9IGZ1bmN0aW9uKHMsIHosIHIpeyBcbiAgICB2YXIgajsgICAgICAgICAgICAgIC8vIHRlbXBvcmFyeSBzdG9yYWdlXG4gICAgdmFyIHQ7ICAgICAgICAgICAgICAvLyB0ZW1wb3JhcnkgcG9pbnRlciAoaW50W10pXG4gICAgdmFyIHRpbmRleDsgICAgICAgICAvLyB0ZW1wb3JhcnkgcG9pbnRlclxuICAgIHZhciBlOyAgICAgICAgICAgICAgLy8gZXh0cmEgYml0cyBvciBvcGVyYXRpb25cbiAgICB2YXIgYj0wOyAgICAgICAgICAgIC8vIGJpdCBidWZmZXJcbiAgICB2YXIgaz0wOyAgICAgICAgICAgIC8vIGJpdHMgaW4gYml0IGJ1ZmZlclxuICAgIHZhciBwPTA7ICAgICAgICAgICAgLy8gaW5wdXQgZGF0YSBwb2ludGVyXG4gICAgdmFyIG47ICAgICAgICAgICAgICAvLyBieXRlcyBhdmFpbGFibGUgdGhlcmVcbiAgICB2YXIgcTsgICAgICAgICAgICAgIC8vIG91dHB1dCB3aW5kb3cgd3JpdGUgcG9pbnRlclxuICAgIHZhciBtOyAgICAgICAgICAgICAgLy8gYnl0ZXMgdG8gZW5kIG9mIHdpbmRvdyBvciByZWFkIHBvaW50ZXJcbiAgICB2YXIgZjsgICAgICAgICAgICAgIC8vIHBvaW50ZXIgdG8gY29weSBzdHJpbmdzIGZyb21cblxuICAgIC8vIGNvcHkgaW5wdXQvb3V0cHV0IGluZm9ybWF0aW9uIHRvIGxvY2FscyAoVVBEQVRFIG1hY3JvIHJlc3RvcmVzKVxuICAgIHA9ei5uZXh0X2luX2luZGV4O249ei5hdmFpbF9pbjtiPXMuYml0YjtrPXMuYml0aztcbiAgICBxPXMud3JpdGU7bT1xPHMucmVhZD9zLnJlYWQtcS0xOnMuZW5kLXE7XG5cbiAgICAvLyBwcm9jZXNzIGlucHV0IGFuZCBvdXRwdXQgYmFzZWQgb24gY3VycmVudCBzdGF0ZVxuICAgIHdoaWxlICh0cnVlKXtcbiAgICAgIHN3aXRjaCAodGhpcy5tb2RlKXtcblx0Ly8gd2FpdGluZyBmb3IgXCJpOlwiPWlucHV0LCBcIm86XCI9b3V0cHV0LCBcIng6XCI9bm90aGluZ1xuICAgICAgY2FzZSBJQ19TVEFSVDogICAgICAgICAvLyB4OiBzZXQgdXAgZm9yIExFTlxuXHRpZiAobSA+PSAyNTggJiYgbiA+PSAxMCl7XG5cblx0ICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgcy53cml0ZT1xO1xuXHQgIHIgPSB0aGlzLmluZmxhdGVfZmFzdCh0aGlzLmxiaXRzLCB0aGlzLmRiaXRzLCBcblx0XHRcdCAgIHRoaXMubHRyZWUsIHRoaXMubHRyZWVfaW5kZXgsIFxuXHRcdFx0ICAgdGhpcy5kdHJlZSwgdGhpcy5kdHJlZV9pbmRleCxcblx0XHRcdCAgIHMsIHopO1xuXG5cdCAgcD16Lm5leHRfaW5faW5kZXg7bj16LmF2YWlsX2luO2I9cy5iaXRiO2s9cy5iaXRrO1xuXHQgIHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcblxuXHQgIGlmIChyICE9IFpfT0spe1xuXHQgICAgdGhpcy5tb2RlID0gciA9PSBaX1NUUkVBTV9FTkQgPyBJQ19XQVNIIDogSUNfQkFEQ09ERTtcblx0ICAgIGJyZWFrO1xuXHQgIH1cblx0fVxuXHR0aGlzLm5lZWQgPSB0aGlzLmxiaXRzO1xuXHR0aGlzLnRyZWUgPSB0aGlzLmx0cmVlO1xuXHR0aGlzLnRyZWVfaW5kZXg9dGhpcy5sdHJlZV9pbmRleDtcblxuXHR0aGlzLm1vZGUgPSBJQ19MRU47XG4gICAgICBjYXNlIElDX0xFTjogICAgICAgICAgIC8vIGk6IGdldCBsZW5ndGgvbGl0ZXJhbC9lb2IgbmV4dFxuXHRqID0gdGhpcy5uZWVkO1xuXG5cdHdoaWxlKGs8KGopKXtcblx0ICBpZihuIT0wKXI9Wl9PSztcblx0ICBlbHNle1xuXG5cdCAgICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgIHMud3JpdGU9cTtcblx0ICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICB9XG5cdCAgbi0tO1xuXHQgIGJ8PSh6Lm5leHRfaW5bcCsrXSYweGZmKTw8aztcblx0ICBrKz04O1xuXHR9XG5cblx0dGluZGV4PSh0aGlzLnRyZWVfaW5kZXgrKGImaW5mbGF0ZV9tYXNrW2pdKSkqMztcblxuXHRiPj4+PSh0aGlzLnRyZWVbdGluZGV4KzFdKTtcblx0ay09KHRoaXMudHJlZVt0aW5kZXgrMV0pO1xuXG5cdGU9dGhpcy50cmVlW3RpbmRleF07XG5cblx0aWYoZSA9PSAwKXsgICAgICAgICAgICAgICAvLyBsaXRlcmFsXG5cdCAgdGhpcy5saXQgPSB0aGlzLnRyZWVbdGluZGV4KzJdO1xuXHQgIHRoaXMubW9kZSA9IElDX0xJVDtcblx0ICBicmVhaztcblx0fVxuXHRpZigoZSAmIDE2KSE9MCApeyAgICAgICAgICAvLyBsZW5ndGhcblx0ICB0aGlzLmdldCA9IGUgJiAxNTtcblx0ICB0aGlzLmxlbiA9IHRoaXMudHJlZVt0aW5kZXgrMl07XG5cdCAgdGhpcy5tb2RlID0gSUNfTEVORVhUO1xuXHQgIGJyZWFrO1xuXHR9XG5cdGlmICgoZSAmIDY0KSA9PSAwKXsgICAgICAgIC8vIG5leHQgdGFibGVcblx0ICB0aGlzLm5lZWQgPSBlO1xuXHQgIHRoaXMudHJlZV9pbmRleCA9IHRpbmRleC8zICsgdGhpcy50cmVlW3RpbmRleCsyXTtcblx0ICBicmVhaztcblx0fVxuXHRpZiAoKGUgJiAzMikhPTApeyAgICAgICAgICAgICAgIC8vIGVuZCBvZiBibG9ja1xuXHQgIHRoaXMubW9kZSA9IElDX1dBU0g7XG5cdCAgYnJlYWs7XG5cdH1cblx0dGhpcy5tb2RlID0gSUNfQkFEQ09ERTsgICAgICAgIC8vIGludmFsaWQgY29kZVxuXHR6Lm1zZyA9IFwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlXCI7XG5cdHIgPSBaX0RBVEFfRVJST1I7XG5cblx0cy5iaXRiPWI7cy5iaXRrPWs7XG5cdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0cy53cml0ZT1xO1xuXHRyZXR1cm4gcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cbiAgICAgIGNhc2UgSUNfTEVORVhUOiAgICAgICAgLy8gaTogZ2V0dGluZyBsZW5ndGggZXh0cmEgKGhhdmUgYmFzZSlcblx0aiA9IHRoaXMuZ2V0O1xuXG5cdHdoaWxlKGs8KGopKXtcblx0ICBpZihuIT0wKXI9Wl9PSztcblx0ICBlbHNle1xuXG5cdCAgICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgIHMud3JpdGU9cTtcblx0ICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICB9XG5cdCAgbi0tOyBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XG5cdCAgays9ODtcblx0fVxuXG5cdHRoaXMubGVuICs9IChiICYgaW5mbGF0ZV9tYXNrW2pdKTtcblxuXHRiPj49ajtcblx0ay09ajtcblxuXHR0aGlzLm5lZWQgPSB0aGlzLmRiaXRzO1xuXHR0aGlzLnRyZWUgPSB0aGlzLmR0cmVlO1xuXHR0aGlzLnRyZWVfaW5kZXggPSB0aGlzLmR0cmVlX2luZGV4O1xuXHR0aGlzLm1vZGUgPSBJQ19ESVNUO1xuICAgICAgY2FzZSBJQ19ESVNUOiAgICAgICAgICAvLyBpOiBnZXQgZGlzdGFuY2UgbmV4dFxuXHRqID0gdGhpcy5uZWVkO1xuXG5cdHdoaWxlKGs8KGopKXtcblx0ICBpZihuIT0wKXI9Wl9PSztcblx0ICBlbHNle1xuXG5cdCAgICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgIHMud3JpdGU9cTtcblx0ICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICB9XG5cdCAgbi0tOyBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XG5cdCAgays9ODtcblx0fVxuXG5cdHRpbmRleD0odGhpcy50cmVlX2luZGV4KyhiICYgaW5mbGF0ZV9tYXNrW2pdKSkqMztcblxuXHRiPj49dGhpcy50cmVlW3RpbmRleCsxXTtcblx0ay09dGhpcy50cmVlW3RpbmRleCsxXTtcblxuXHRlID0gKHRoaXMudHJlZVt0aW5kZXhdKTtcblx0aWYoKGUgJiAxNikhPTApeyAgICAgICAgICAgICAgIC8vIGRpc3RhbmNlXG5cdCAgdGhpcy5nZXQgPSBlICYgMTU7XG5cdCAgdGhpcy5kaXN0ID0gdGhpcy50cmVlW3RpbmRleCsyXTtcblx0ICB0aGlzLm1vZGUgPSBJQ19ESVNURVhUO1xuXHQgIGJyZWFrO1xuXHR9XG5cdGlmICgoZSAmIDY0KSA9PSAwKXsgICAgICAgIC8vIG5leHQgdGFibGVcblx0ICB0aGlzLm5lZWQgPSBlO1xuXHQgIHRoaXMudHJlZV9pbmRleCA9IHRpbmRleC8zICsgdGhpcy50cmVlW3RpbmRleCsyXTtcblx0ICBicmVhaztcblx0fVxuXHR0aGlzLm1vZGUgPSBJQ19CQURDT0RFOyAgICAgICAgLy8gaW52YWxpZCBjb2RlXG5cdHoubXNnID0gXCJpbnZhbGlkIGRpc3RhbmNlIGNvZGVcIjtcblx0ciA9IFpfREFUQV9FUlJPUjtcblxuXHRzLmJpdGI9YjtzLmJpdGs9aztcblx0ei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHRzLndyaXRlPXE7XG5cdHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblxuICAgICAgY2FzZSBJQ19ESVNURVhUOiAgICAgICAvLyBpOiBnZXR0aW5nIGRpc3RhbmNlIGV4dHJhXG5cdGogPSB0aGlzLmdldDtcblxuXHR3aGlsZShrPChqKSl7XG5cdCAgaWYobiE9MClyPVpfT0s7XG5cdCAgZWxzZXtcblxuXHQgICAgcy5iaXRiPWI7cy5iaXRrPWs7XG5cdCAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICBzLndyaXRlPXE7XG5cdCAgICByZXR1cm4gcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgfVxuXHQgIG4tLTsgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xuXHQgIGsrPTg7XG5cdH1cblxuXHR0aGlzLmRpc3QgKz0gKGIgJiBpbmZsYXRlX21hc2tbal0pO1xuXG5cdGI+Pj1qO1xuXHRrLT1qO1xuXG5cdHRoaXMubW9kZSA9IElDX0NPUFk7XG4gICAgICBjYXNlIElDX0NPUFk6ICAgICAgICAgIC8vIG86IGNvcHlpbmcgYnl0ZXMgaW4gd2luZG93LCB3YWl0aW5nIGZvciBzcGFjZVxuICAgICAgICBmID0gcSAtIHRoaXMuZGlzdDtcbiAgICAgICAgd2hpbGUoZiA8IDApeyAgICAgLy8gbW9kdWxvIHdpbmRvdyBzaXplLVwid2hpbGVcIiBpbnN0ZWFkXG4gICAgICAgICAgZiArPSBzLmVuZDsgICAgIC8vIG9mIFwiaWZcIiBoYW5kbGVzIGludmFsaWQgZGlzdGFuY2VzXG5cdH1cblx0d2hpbGUgKHRoaXMubGVuIT0wKXtcblxuXHQgIGlmKG09PTApe1xuXHQgICAgaWYocT09cy5lbmQmJnMucmVhZCE9MCl7cT0wO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO31cblx0ICAgIGlmKG09PTApe1xuXHQgICAgICBzLndyaXRlPXE7IHI9cy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgICAgIHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcblxuXHQgICAgICBpZihxPT1zLmVuZCYmcy5yZWFkIT0wKXtxPTA7bT1xPHMucmVhZD9zLnJlYWQtcS0xOnMuZW5kLXE7fVxuXG5cdCAgICAgIGlmKG09PTApe1xuXHRcdHMuYml0Yj1iO3MuYml0az1rO1xuXHRcdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0XHRzLndyaXRlPXE7XG5cdFx0cmV0dXJuIHMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHQgICAgICB9ICBcblx0ICAgIH1cblx0ICB9XG5cblx0ICBzLndpbmRvd1txKytdPXMud2luZG93W2YrK107IG0tLTtcblxuXHQgIGlmIChmID09IHMuZW5kKVxuICAgICAgICAgICAgZiA9IDA7XG5cdCAgdGhpcy5sZW4tLTtcblx0fVxuXHR0aGlzLm1vZGUgPSBJQ19TVEFSVDtcblx0YnJlYWs7XG4gICAgICBjYXNlIElDX0xJVDogICAgICAgICAgIC8vIG86IGdvdCBsaXRlcmFsLCB3YWl0aW5nIGZvciBvdXRwdXQgc3BhY2Vcblx0aWYobT09MCl7XG5cdCAgaWYocT09cy5lbmQmJnMucmVhZCE9MCl7cT0wO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO31cblx0ICBpZihtPT0wKXtcblx0ICAgIHMud3JpdGU9cTsgcj1zLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICAgIHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcblxuXHQgICAgaWYocT09cy5lbmQmJnMucmVhZCE9MCl7cT0wO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO31cblx0ICAgIGlmKG09PTApe1xuXHQgICAgICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICAgICAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgICAgICBzLndyaXRlPXE7XG5cdCAgICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0cj1aX09LO1xuXG5cdHMud2luZG93W3ErK109dGhpcy5saXQ7IG0tLTtcblxuXHR0aGlzLm1vZGUgPSBJQ19TVEFSVDtcblx0YnJlYWs7XG4gICAgICBjYXNlIElDX1dBU0g6ICAgICAgICAgICAvLyBvOiBnb3QgZW9iLCBwb3NzaWJseSBtb3JlIG91dHB1dFxuXHRpZiAoayA+IDcpeyAgICAgICAgLy8gcmV0dXJuIHVudXNlZCBieXRlLCBpZiBhbnlcblx0ICBrIC09IDg7XG5cdCAgbisrO1xuXHQgIHAtLTsgICAgICAgICAgICAgLy8gY2FuIGFsd2F5cyByZXR1cm4gb25lXG5cdH1cblxuXHRzLndyaXRlPXE7IHI9cy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcblxuXHRpZiAocy5yZWFkICE9IHMud3JpdGUpe1xuXHQgIHMuYml0Yj1iO3MuYml0az1rO1xuXHQgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICBzLndyaXRlPXE7XG5cdCAgcmV0dXJuIHMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHR9XG5cdHRoaXMubW9kZSA9IElDX0VORDtcbiAgICAgIGNhc2UgSUNfRU5EOlxuXHRyID0gWl9TVFJFQU1fRU5EO1xuXHRzLmJpdGI9YjtzLmJpdGs9aztcblx0ei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHRzLndyaXRlPXE7XG5cdHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblxuICAgICAgY2FzZSBJQ19CQURDT0RFOiAgICAgICAvLyB4OiBnb3QgZXJyb3JcblxuXHRyID0gWl9EQVRBX0VSUk9SO1xuXG5cdHMuYml0Yj1iO3MuYml0az1rO1xuXHR6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdHMud3JpdGU9cTtcblx0cmV0dXJuIHMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXG4gICAgICBkZWZhdWx0OlxuXHRyID0gWl9TVFJFQU1fRVJST1I7XG5cblx0cy5iaXRiPWI7cy5iaXRrPWs7XG5cdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0cy53cml0ZT1xO1xuXHRyZXR1cm4gcy5pbmZsYXRlX2ZsdXNoKHoscik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbkluZkNvZGVzLnByb3RvdHlwZS5mcmVlID0gZnVuY3Rpb24oeil7XG4gICAgLy8gIFpGUkVFKHosIGMpO1xufVxuXG4gIC8vIENhbGxlZCB3aXRoIG51bWJlciBvZiBieXRlcyBsZWZ0IHRvIHdyaXRlIGluIHdpbmRvdyBhdCBsZWFzdCAyNThcbiAgLy8gKHRoZSBtYXhpbXVtIHN0cmluZyBsZW5ndGgpIGFuZCBudW1iZXIgb2YgaW5wdXQgYnl0ZXMgYXZhaWxhYmxlXG4gIC8vIGF0IGxlYXN0IHRlbi4gIFRoZSB0ZW4gYnl0ZXMgYXJlIHNpeCBieXRlcyBmb3IgdGhlIGxvbmdlc3QgbGVuZ3RoL1xuICAvLyBkaXN0YW5jZSBwYWlyIHBsdXMgZm91ciBieXRlcyBmb3Igb3ZlcmxvYWRpbmcgdGhlIGJpdCBidWZmZXIuXG5cbkluZkNvZGVzLnByb3RvdHlwZS5pbmZsYXRlX2Zhc3QgPSBmdW5jdGlvbihibCwgYmQsIHRsLCB0bF9pbmRleCwgdGQsIHRkX2luZGV4LCBzLCB6KSB7XG4gICAgdmFyIHQ7ICAgICAgICAgICAgICAgIC8vIHRlbXBvcmFyeSBwb2ludGVyXG4gICAgdmFyICAgdHA7ICAgICAgICAgICAgIC8vIHRlbXBvcmFyeSBwb2ludGVyIChpbnRbXSlcbiAgICB2YXIgdHBfaW5kZXg7ICAgICAgICAgLy8gdGVtcG9yYXJ5IHBvaW50ZXJcbiAgICB2YXIgZTsgICAgICAgICAgICAgICAgLy8gZXh0cmEgYml0cyBvciBvcGVyYXRpb25cbiAgICB2YXIgYjsgICAgICAgICAgICAgICAgLy8gYml0IGJ1ZmZlclxuICAgIHZhciBrOyAgICAgICAgICAgICAgICAvLyBiaXRzIGluIGJpdCBidWZmZXJcbiAgICB2YXIgcDsgICAgICAgICAgICAgICAgLy8gaW5wdXQgZGF0YSBwb2ludGVyXG4gICAgdmFyIG47ICAgICAgICAgICAgICAgIC8vIGJ5dGVzIGF2YWlsYWJsZSB0aGVyZVxuICAgIHZhciBxOyAgICAgICAgICAgICAgICAvLyBvdXRwdXQgd2luZG93IHdyaXRlIHBvaW50ZXJcbiAgICB2YXIgbTsgICAgICAgICAgICAgICAgLy8gYnl0ZXMgdG8gZW5kIG9mIHdpbmRvdyBvciByZWFkIHBvaW50ZXJcbiAgICB2YXIgbWw7ICAgICAgICAgICAgICAgLy8gbWFzayBmb3IgbGl0ZXJhbC9sZW5ndGggdHJlZVxuICAgIHZhciBtZDsgICAgICAgICAgICAgICAvLyBtYXNrIGZvciBkaXN0YW5jZSB0cmVlXG4gICAgdmFyIGM7ICAgICAgICAgICAgICAgIC8vIGJ5dGVzIHRvIGNvcHlcbiAgICB2YXIgZDsgICAgICAgICAgICAgICAgLy8gZGlzdGFuY2UgYmFjayB0byBjb3B5IGZyb21cbiAgICB2YXIgcjsgICAgICAgICAgICAgICAgLy8gY29weSBzb3VyY2UgcG9pbnRlclxuXG4gICAgdmFyIHRwX2luZGV4X3RfMzsgICAgIC8vICh0cF9pbmRleCt0KSozXG5cbiAgICAvLyBsb2FkIGlucHV0LCBvdXRwdXQsIGJpdCB2YWx1ZXNcbiAgICBwPXoubmV4dF9pbl9pbmRleDtuPXouYXZhaWxfaW47Yj1zLmJpdGI7az1zLmJpdGs7XG4gICAgcT1zLndyaXRlO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBtYXNrc1xuICAgIG1sID0gaW5mbGF0ZV9tYXNrW2JsXTtcbiAgICBtZCA9IGluZmxhdGVfbWFza1tiZF07XG5cbiAgICAvLyBkbyB1bnRpbCBub3QgZW5vdWdoIGlucHV0IG9yIG91dHB1dCBzcGFjZSBmb3IgZmFzdCBsb29wXG4gICAgZG8geyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNzdW1lIGNhbGxlZCB3aXRoIG0gPj0gMjU4ICYmIG4gPj0gMTBcbiAgICAgIC8vIGdldCBsaXRlcmFsL2xlbmd0aCBjb2RlXG4gICAgICB3aGlsZShrPCgyMCkpeyAgICAgICAgICAgICAgLy8gbWF4IGJpdHMgZm9yIGxpdGVyYWwvbGVuZ3RoIGNvZGVcblx0bi0tO1xuXHRifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7ays9ODtcbiAgICAgIH1cblxuICAgICAgdD0gYiZtbDtcbiAgICAgIHRwPXRsOyBcbiAgICAgIHRwX2luZGV4PXRsX2luZGV4O1xuICAgICAgdHBfaW5kZXhfdF8zPSh0cF9pbmRleCt0KSozO1xuICAgICAgaWYgKChlID0gdHBbdHBfaW5kZXhfdF8zXSkgPT0gMCl7XG5cdGI+Pj0odHBbdHBfaW5kZXhfdF8zKzFdKTsgay09KHRwW3RwX2luZGV4X3RfMysxXSk7XG5cblx0cy53aW5kb3dbcSsrXSA9IHRwW3RwX2luZGV4X3RfMysyXTtcblx0bS0tO1xuXHRjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGRvIHtcblxuXHRiPj49KHRwW3RwX2luZGV4X3RfMysxXSk7IGstPSh0cFt0cF9pbmRleF90XzMrMV0pO1xuXG5cdGlmKChlJjE2KSE9MCl7XG5cdCAgZSAmPSAxNTtcblx0ICBjID0gdHBbdHBfaW5kZXhfdF8zKzJdICsgKGIgJiBpbmZsYXRlX21hc2tbZV0pO1xuXG5cdCAgYj4+PWU7IGstPWU7XG5cblx0ICAvLyBkZWNvZGUgZGlzdGFuY2UgYmFzZSBvZiBibG9jayB0byBjb3B5XG5cdCAgd2hpbGUoazwoMTUpKXsgICAgICAgICAgIC8vIG1heCBiaXRzIGZvciBkaXN0YW5jZSBjb2RlXG5cdCAgICBuLS07XG5cdCAgICBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7ays9ODtcblx0ICB9XG5cblx0ICB0PSBiJm1kO1xuXHQgIHRwPXRkO1xuXHQgIHRwX2luZGV4PXRkX2luZGV4O1xuICAgICAgICAgIHRwX2luZGV4X3RfMz0odHBfaW5kZXgrdCkqMztcblx0ICBlID0gdHBbdHBfaW5kZXhfdF8zXTtcblxuXHQgIGRvIHtcblxuXHQgICAgYj4+PSh0cFt0cF9pbmRleF90XzMrMV0pOyBrLT0odHBbdHBfaW5kZXhfdF8zKzFdKTtcblxuXHQgICAgaWYoKGUmMTYpIT0wKXtcblx0ICAgICAgLy8gZ2V0IGV4dHJhIGJpdHMgdG8gYWRkIHRvIGRpc3RhbmNlIGJhc2Vcblx0ICAgICAgZSAmPSAxNTtcblx0ICAgICAgd2hpbGUoazwoZSkpeyAgICAgICAgIC8vIGdldCBleHRyYSBiaXRzICh1cCB0byAxMylcblx0XHRuLS07XG5cdFx0Ynw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO2srPTg7XG5cdCAgICAgIH1cblxuXHQgICAgICBkID0gdHBbdHBfaW5kZXhfdF8zKzJdICsgKGImaW5mbGF0ZV9tYXNrW2VdKTtcblxuXHQgICAgICBiPj49KGUpOyBrLT0oZSk7XG5cblx0ICAgICAgLy8gZG8gdGhlIGNvcHlcblx0ICAgICAgbSAtPSBjO1xuXHQgICAgICBpZiAocSA+PSBkKXsgICAgICAgICAgICAgICAgLy8gb2Zmc2V0IGJlZm9yZSBkZXN0XG5cdFx0Ly8gIGp1c3QgY29weVxuXHRcdHI9cS1kO1xuXHRcdGlmKHEtcj4wICYmIDI+KHEtcikpeyAgICAgICAgICAgXG5cdFx0ICBzLndpbmRvd1txKytdPXMud2luZG93W3IrK107IC8vIG1pbmltdW0gY291bnQgaXMgdGhyZWUsXG5cdFx0ICBzLndpbmRvd1txKytdPXMud2luZG93W3IrK107IC8vIHNvIHVucm9sbCBsb29wIGEgbGl0dGxlXG5cdFx0ICBjLT0yO1xuXHRcdH1cblx0XHRlbHNle1xuXHRcdCAgcy53aW5kb3dbcSsrXT1zLndpbmRvd1tyKytdOyAvLyBtaW5pbXVtIGNvdW50IGlzIHRocmVlLFxuXHRcdCAgcy53aW5kb3dbcSsrXT1zLndpbmRvd1tyKytdOyAvLyBzbyB1bnJvbGwgbG9vcCBhIGxpdHRsZVxuXHRcdCAgYy09Mjtcblx0XHR9XG5cdCAgICAgIH1cblx0ICAgICAgZWxzZXsgICAgICAgICAgICAgICAgICAvLyBlbHNlIG9mZnNldCBhZnRlciBkZXN0aW5hdGlvblxuICAgICAgICAgICAgICAgIHI9cS1kO1xuICAgICAgICAgICAgICAgIGRve1xuICAgICAgICAgICAgICAgICAgcis9cy5lbmQ7ICAgICAgICAgIC8vIGZvcmNlIHBvaW50ZXIgaW4gd2luZG93XG4gICAgICAgICAgICAgICAgfXdoaWxlKHI8MCk7ICAgICAgICAgLy8gY292ZXJzIGludmFsaWQgZGlzdGFuY2VzXG5cdFx0ZT1zLmVuZC1yO1xuXHRcdGlmKGM+ZSl7ICAgICAgICAgICAgIC8vIGlmIHNvdXJjZSBjcm9zc2VzLFxuXHRcdCAgYy09ZTsgICAgICAgICAgICAgIC8vIHdyYXBwZWQgY29weVxuXHRcdCAgaWYocS1yPjAgJiYgZT4ocS1yKSl7ICAgICAgICAgICBcblx0XHQgICAgZG97cy53aW5kb3dbcSsrXSA9IHMud2luZG93W3IrK107fVxuXHRcdCAgICB3aGlsZSgtLWUhPTApO1xuXHRcdCAgfVxuXHRcdCAgZWxzZXtcblx0XHQgICAgYXJyYXlDb3B5KHMud2luZG93LCByLCBzLndpbmRvdywgcSwgZSk7XG5cdFx0ICAgIHErPWU7IHIrPWU7IGU9MDtcblx0XHQgIH1cblx0XHQgIHIgPSAwOyAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcmVzdCBmcm9tIHN0YXJ0IG9mIHdpbmRvd1xuXHRcdH1cblxuXHQgICAgICB9XG5cblx0ICAgICAgLy8gY29weSBhbGwgb3Igd2hhdCdzIGxlZnRcbiAgICAgICAgICAgICAgZG97cy53aW5kb3dbcSsrXSA9IHMud2luZG93W3IrK107fVxuXHRcdHdoaWxlKC0tYyE9MCk7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZigoZSY2NCk9PTApe1xuXHQgICAgICB0Kz10cFt0cF9pbmRleF90XzMrMl07XG5cdCAgICAgIHQrPShiJmluZmxhdGVfbWFza1tlXSk7XG5cdCAgICAgIHRwX2luZGV4X3RfMz0odHBfaW5kZXgrdCkqMztcblx0ICAgICAgZT10cFt0cF9pbmRleF90XzNdO1xuXHQgICAgfVxuXHQgICAgZWxzZXtcblx0ICAgICAgei5tc2cgPSBcImludmFsaWQgZGlzdGFuY2UgY29kZVwiO1xuXG5cdCAgICAgIGM9ei5hdmFpbF9pbi1uO2M9KGs+PjMpPGM/az4+MzpjO24rPWM7cC09YztrLT1jPDwzO1xuXG5cdCAgICAgIHMuYml0Yj1iO3MuYml0az1rO1xuXHQgICAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICAgIHMud3JpdGU9cTtcblxuXHQgICAgICByZXR1cm4gWl9EQVRBX0VSUk9SO1xuXHQgICAgfVxuXHQgIH1cblx0ICB3aGlsZSh0cnVlKTtcblx0ICBicmVhaztcblx0fVxuXG5cdGlmKChlJjY0KT09MCl7XG5cdCAgdCs9dHBbdHBfaW5kZXhfdF8zKzJdO1xuXHQgIHQrPShiJmluZmxhdGVfbWFza1tlXSk7XG5cdCAgdHBfaW5kZXhfdF8zPSh0cF9pbmRleCt0KSozO1xuXHQgIGlmKChlPXRwW3RwX2luZGV4X3RfM10pPT0wKXtcblxuXHQgICAgYj4+PSh0cFt0cF9pbmRleF90XzMrMV0pOyBrLT0odHBbdHBfaW5kZXhfdF8zKzFdKTtcblxuXHQgICAgcy53aW5kb3dbcSsrXT10cFt0cF9pbmRleF90XzMrMl07XG5cdCAgICBtLS07XG5cdCAgICBicmVhaztcblx0ICB9XG5cdH1cblx0ZWxzZSBpZigoZSYzMikhPTApe1xuXG5cdCAgYz16LmF2YWlsX2luLW47Yz0oaz4+Myk8Yz9rPj4zOmM7bis9YztwLT1jO2stPWM8PDM7XG4gXG5cdCAgcy5iaXRiPWI7cy5iaXRrPWs7XG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgIHMud3JpdGU9cTtcblxuXHQgIHJldHVybiBaX1NUUkVBTV9FTkQ7XG5cdH1cblx0ZWxzZXtcblx0ICB6Lm1zZz1cImludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZVwiO1xuXG5cdCAgYz16LmF2YWlsX2luLW47Yz0oaz4+Myk8Yz9rPj4zOmM7bis9YztwLT1jO2stPWM8PDM7XG5cblx0ICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgcy53cml0ZT1xO1xuXG5cdCAgcmV0dXJuIFpfREFUQV9FUlJPUjtcblx0fVxuICAgICAgfSBcbiAgICAgIHdoaWxlKHRydWUpO1xuICAgIH0gXG4gICAgd2hpbGUobT49MjU4ICYmIG4+PSAxMCk7XG5cbiAgICAvLyBub3QgZW5vdWdoIGlucHV0IG9yIG91dHB1dC0tcmVzdG9yZSBwb2ludGVycyBhbmQgcmV0dXJuXG4gICAgYz16LmF2YWlsX2luLW47Yz0oaz4+Myk8Yz9rPj4zOmM7bis9YztwLT1jO2stPWM8PDM7XG5cbiAgICBzLmJpdGI9YjtzLmJpdGs9aztcbiAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG4gICAgcy53cml0ZT1xO1xuXG4gICAgcmV0dXJuIFpfT0s7XG59XG5cbi8vXG4vLyBJbmZUcmVlLmphdmFcbi8vXG5cbmZ1bmN0aW9uIEluZlRyZWUoKSB7XG59XG5cbkluZlRyZWUucHJvdG90eXBlLmh1ZnRfYnVpbGQgPSBmdW5jdGlvbihiLCBiaW5kZXgsIG4sIHMsIGQsIGUsIHQsIG0sIGhwLCBobiwgdikge1xuXG4gICAgLy8gR2l2ZW4gYSBsaXN0IG9mIGNvZGUgbGVuZ3RocyBhbmQgYSBtYXhpbXVtIHRhYmxlIHNpemUsIG1ha2UgYSBzZXQgb2ZcbiAgICAvLyB0YWJsZXMgdG8gZGVjb2RlIHRoYXQgc2V0IG9mIGNvZGVzLiAgUmV0dXJuIFpfT0sgb24gc3VjY2VzcywgWl9CVUZfRVJST1JcbiAgICAvLyBpZiB0aGUgZ2l2ZW4gY29kZSBzZXQgaXMgaW5jb21wbGV0ZSAodGhlIHRhYmxlcyBhcmUgc3RpbGwgYnVpbHQgaW4gdGhpc1xuICAgIC8vIGNhc2UpLCBaX0RBVEFfRVJST1IgaWYgdGhlIGlucHV0IGlzIGludmFsaWQgKGFuIG92ZXItc3Vic2NyaWJlZCBzZXQgb2ZcbiAgICAvLyBsZW5ndGhzKSwgb3IgWl9NRU1fRVJST1IgaWYgbm90IGVub3VnaCBtZW1vcnkuXG5cbiAgICB2YXIgYTsgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvdW50ZXIgZm9yIGNvZGVzIG9mIGxlbmd0aCBrXG4gICAgdmFyIGY7ICAgICAgICAgICAgICAgICAgICAgICAvLyBpIHJlcGVhdHMgaW4gdGFibGUgZXZlcnkgZiBlbnRyaWVzXG4gICAgdmFyIGc7ICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXhpbXVtIGNvZGUgbGVuZ3RoXG4gICAgdmFyIGg7ICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWJsZSBsZXZlbFxuICAgIHZhciBpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gY291bnRlciwgY3VycmVudCBjb2RlXG4gICAgdmFyIGo7ICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3VudGVyXG4gICAgdmFyIGs7ICAgICAgICAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgYml0cyBpbiBjdXJyZW50IGNvZGVcbiAgICB2YXIgbDsgICAgICAgICAgICAgICAgICAgICAgIC8vIGJpdHMgcGVyIHRhYmxlIChyZXR1cm5lZCBpbiBtKVxuICAgIHZhciBtYXNrOyAgICAgICAgICAgICAgICAgICAgLy8gKDEgPDwgdykgLSAxLCB0byBhdm9pZCBjYyAtTyBidWcgb24gSFBcbiAgICB2YXIgcDsgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvaW50ZXIgaW50byBjW10sIGJbXSwgb3IgdltdXG4gICAgdmFyIHE7ICAgICAgICAgICAgICAgICAgICAgICAvLyBwb2ludHMgdG8gY3VycmVudCB0YWJsZVxuICAgIHZhciB3OyAgICAgICAgICAgICAgICAgICAgICAgLy8gYml0cyBiZWZvcmUgdGhpcyB0YWJsZSA9PSAobCAqIGgpXG4gICAgdmFyIHhwOyAgICAgICAgICAgICAgICAgICAgICAvLyBwb2ludGVyIGludG8geFxuICAgIHZhciB5OyAgICAgICAgICAgICAgICAgICAgICAgLy8gbnVtYmVyIG9mIGR1bW15IGNvZGVzIGFkZGVkXG4gICAgdmFyIHo7ICAgICAgICAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgZW50cmllcyBpbiBjdXJyZW50IHRhYmxlXG5cbiAgICAvLyBHZW5lcmF0ZSBjb3VudHMgZm9yIGVhY2ggYml0IGxlbmd0aFxuXG4gICAgcCA9IDA7IGkgPSBuO1xuICAgIGRvIHtcbiAgICAgIHRoaXMuY1tiW2JpbmRleCtwXV0rKzsgcCsrOyBpLS07ICAgLy8gYXNzdW1lIGFsbCBlbnRyaWVzIDw9IEJNQVhcbiAgICB9d2hpbGUoaSE9MCk7XG5cbiAgICBpZih0aGlzLmNbMF0gPT0gbil7ICAgICAgICAgICAgICAgIC8vIG51bGwgaW5wdXQtLWFsbCB6ZXJvIGxlbmd0aCBjb2Rlc1xuICAgICAgdFswXSA9IC0xO1xuICAgICAgbVswXSA9IDA7XG4gICAgICByZXR1cm4gWl9PSztcbiAgICB9XG5cbiAgICAvLyBGaW5kIG1pbmltdW0gYW5kIG1heGltdW0gbGVuZ3RoLCBib3VuZCAqbSBieSB0aG9zZVxuICAgIGwgPSBtWzBdO1xuICAgIGZvciAoaiA9IDE7IGogPD0gQk1BWDsgaisrKVxuICAgICAgaWYodGhpcy5jW2pdIT0wKSBicmVhaztcbiAgICBrID0gajsgICAgICAgICAgICAgICAgICAgICAgICAvLyBtaW5pbXVtIGNvZGUgbGVuZ3RoXG4gICAgaWYobCA8IGope1xuICAgICAgbCA9IGo7XG4gICAgfVxuICAgIGZvciAoaSA9IEJNQVg7IGkhPTA7IGktLSl7XG4gICAgICBpZih0aGlzLmNbaV0hPTApIGJyZWFrO1xuICAgIH1cbiAgICBnID0gaTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXhpbXVtIGNvZGUgbGVuZ3RoXG4gICAgaWYobCA+IGkpe1xuICAgICAgbCA9IGk7XG4gICAgfVxuICAgIG1bMF0gPSBsO1xuXG4gICAgLy8gQWRqdXN0IGxhc3QgbGVuZ3RoIGNvdW50IHRvIGZpbGwgb3V0IGNvZGVzLCBpZiBuZWVkZWRcbiAgICBmb3IgKHkgPSAxIDw8IGo7IGogPCBpOyBqKyssIHkgPDw9IDEpe1xuICAgICAgaWYgKCh5IC09IHRoaXMuY1tqXSkgPCAwKXtcbiAgICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCh5IC09IHRoaXMuY1tpXSkgPCAwKXtcbiAgICAgIHJldHVybiBaX0RBVEFfRVJST1I7XG4gICAgfVxuICAgIHRoaXMuY1tpXSArPSB5O1xuXG4gICAgLy8gR2VuZXJhdGUgc3RhcnRpbmcgb2Zmc2V0cyBpbnRvIHRoZSB2YWx1ZSB0YWJsZSBmb3IgZWFjaCBsZW5ndGhcbiAgICB0aGlzLnhbMV0gPSBqID0gMDtcbiAgICBwID0gMTsgIHhwID0gMjtcbiAgICB3aGlsZSAoLS1pIT0wKSB7ICAgICAgICAgICAgICAgICAvLyBub3RlIHRoYXQgaSA9PSBnIGZyb20gYWJvdmVcbiAgICAgIHRoaXMueFt4cF0gPSAoaiArPSB0aGlzLmNbcF0pO1xuICAgICAgeHArKztcbiAgICAgIHArKztcbiAgICB9XG5cbiAgICAvLyBNYWtlIGEgdGFibGUgb2YgdmFsdWVzIGluIG9yZGVyIG9mIGJpdCBsZW5ndGhzXG4gICAgaSA9IDA7IHAgPSAwO1xuICAgIGRvIHtcbiAgICAgIGlmICgoaiA9IGJbYmluZGV4K3BdKSAhPSAwKXtcbiAgICAgICAgdGhpcy52W3RoaXMueFtqXSsrXSA9IGk7XG4gICAgICB9XG4gICAgICBwKys7XG4gICAgfVxuICAgIHdoaWxlICgrK2kgPCBuKTtcbiAgICBuID0gdGhpcy54W2ddOyAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBuIHRvIGxlbmd0aCBvZiB2XG5cbiAgICAvLyBHZW5lcmF0ZSB0aGUgSHVmZm1hbiBjb2RlcyBhbmQgZm9yIGVhY2gsIG1ha2UgdGhlIHRhYmxlIGVudHJpZXNcbiAgICB0aGlzLnhbMF0gPSBpID0gMDsgICAgICAgICAgICAgICAgIC8vIGZpcnN0IEh1ZmZtYW4gY29kZSBpcyB6ZXJvXG4gICAgcCA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3JhYiB2YWx1ZXMgaW4gYml0IG9yZGVyXG4gICAgaCA9IC0xOyAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gdGFibGVzIHlldC0tbGV2ZWwgLTFcbiAgICB3ID0gLWw7ICAgICAgICAgICAgICAgICAgICAgICAvLyBiaXRzIGRlY29kZWQgPT0gKGwgKiBoKVxuICAgIHRoaXMudVswXSA9IDA7ICAgICAgICAgICAgICAgICAgICAgLy8ganVzdCB0byBrZWVwIGNvbXBpbGVycyBoYXBweVxuICAgIHEgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpdHRvXG4gICAgeiA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGl0dG9cblxuICAgIC8vIGdvIHRocm91Z2ggdGhlIGJpdCBsZW5ndGhzIChrIGFscmVhZHkgaXMgYml0cyBpbiBzaG9ydGVzdCBjb2RlKVxuICAgIGZvciAoOyBrIDw9IGc7IGsrKyl7XG4gICAgICBhID0gdGhpcy5jW2tdO1xuICAgICAgd2hpbGUgKGEtLSE9MCl7XG5cdC8vIGhlcmUgaSBpcyB0aGUgSHVmZm1hbiBjb2RlIG9mIGxlbmd0aCBrIGJpdHMgZm9yIHZhbHVlICpwXG5cdC8vIG1ha2UgdGFibGVzIHVwIHRvIHJlcXVpcmVkIGxldmVsXG4gICAgICAgIHdoaWxlIChrID4gdyArIGwpe1xuICAgICAgICAgIGgrKztcbiAgICAgICAgICB3ICs9IGw7ICAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyB0YWJsZSBhbHdheXMgbCBiaXRzXG5cdCAgLy8gY29tcHV0ZSBtaW5pbXVtIHNpemUgdGFibGUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGwgYml0c1xuICAgICAgICAgIHogPSBnIC0gdztcbiAgICAgICAgICB6ID0gKHogPiBsKSA/IGwgOiB6OyAgICAgICAgLy8gdGFibGUgc2l6ZSB1cHBlciBsaW1pdFxuICAgICAgICAgIGlmKChmPTE8PChqPWstdykpPmErMSl7ICAgICAvLyB0cnkgYSBrLXcgYml0IHRhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvbyBmZXcgY29kZXMgZm9yIGstdyBiaXQgdGFibGVcbiAgICAgICAgICAgIGYgLT0gYSArIDE7ICAgICAgICAgICAgICAgLy8gZGVkdWN0IGNvZGVzIGZyb20gcGF0dGVybnMgbGVmdFxuICAgICAgICAgICAgeHAgPSBrO1xuICAgICAgICAgICAgaWYoaiA8IHope1xuICAgICAgICAgICAgICB3aGlsZSAoKytqIDwgeil7ICAgICAgICAvLyB0cnkgc21hbGxlciB0YWJsZXMgdXAgdG8geiBiaXRzXG4gICAgICAgICAgICAgICAgaWYoKGYgPDw9IDEpIDw9IHRoaXMuY1srK3hwXSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgLy8gZW5vdWdoIGNvZGVzIHRvIHVzZSB1cCBqIGJpdHNcbiAgICAgICAgICAgICAgICBmIC09IHRoaXMuY1t4cF07ICAgICAgICAgICAvLyBlbHNlIGRlZHVjdCBjb2RlcyBmcm9tIHBhdHRlcm5zXG4gICAgICAgICAgICAgIH1cblx0ICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgeiA9IDEgPDwgajsgICAgICAgICAgICAgICAgIC8vIHRhYmxlIGVudHJpZXMgZm9yIGotYml0IHRhYmxlXG5cblx0ICAvLyBhbGxvY2F0ZSBuZXcgdGFibGVcbiAgICAgICAgICBpZiAodGhpcy5oblswXSArIHogPiBNQU5ZKXsgICAgICAgLy8gKG5vdGU6IGRvZXNuJ3QgbWF0dGVyIGZvciBmaXhlZClcbiAgICAgICAgICAgIHJldHVybiBaX0RBVEFfRVJST1I7ICAgICAgIC8vIG92ZXJmbG93IG9mIE1BTllcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy51W2hdID0gcSA9IC8qaHArKi8gdGhpcy5oblswXTsgICAvLyBERUJVR1xuICAgICAgICAgIHRoaXMuaG5bMF0gKz0gejtcbiBcblx0ICAvLyBjb25uZWN0IHRvIGxhc3QgdGFibGUsIGlmIHRoZXJlIGlzIG9uZVxuXHQgIGlmKGghPTApe1xuICAgICAgICAgICAgdGhpcy54W2hdPWk7ICAgICAgICAgICAvLyBzYXZlIHBhdHRlcm4gZm9yIGJhY2tpbmcgdXBcbiAgICAgICAgICAgIHRoaXMuclswXT1qOyAgICAgLy8gYml0cyBpbiB0aGlzIHRhYmxlXG4gICAgICAgICAgICB0aGlzLnJbMV09bDsgICAgIC8vIGJpdHMgdG8gZHVtcCBiZWZvcmUgdGhpcyB0YWJsZVxuICAgICAgICAgICAgaj1pPj4+KHcgLSBsKTtcbiAgICAgICAgICAgIHRoaXMuclsyXSA9IChxIC0gdGhpcy51W2gtMV0gLSBqKTsgICAgICAgICAgICAgICAvLyBvZmZzZXQgdG8gdGhpcyB0YWJsZVxuICAgICAgICAgICAgYXJyYXlDb3B5KHRoaXMuciwgMCwgaHAsICh0aGlzLnVbaC0xXStqKSozLCAzKTsgLy8gY29ubmVjdCB0byBsYXN0IHRhYmxlXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICB0WzBdID0gcTsgICAgICAgICAgICAgICAvLyBmaXJzdCB0YWJsZSBpcyByZXR1cm5lZCByZXN1bHRcblx0ICB9XG4gICAgICAgIH1cblxuXHQvLyBzZXQgdXAgdGFibGUgZW50cnkgaW4gclxuICAgICAgICB0aGlzLnJbMV0gPSAoayAtIHcpO1xuICAgICAgICBpZiAocCA+PSBuKXtcbiAgICAgICAgICB0aGlzLnJbMF0gPSAxMjggKyA2NDsgICAgICAvLyBvdXQgb2YgdmFsdWVzLS1pbnZhbGlkIGNvZGVcblx0fVxuICAgICAgICBlbHNlIGlmICh2W3BdIDwgcyl7XG4gICAgICAgICAgdGhpcy5yWzBdID0gKHRoaXMudltwXSA8IDI1NiA/IDAgOiAzMiArIDY0KTsgIC8vIDI1NiBpcyBlbmQtb2YtYmxvY2tcbiAgICAgICAgICB0aGlzLnJbMl0gPSB0aGlzLnZbcCsrXTsgICAgICAgICAgLy8gc2ltcGxlIGNvZGUgaXMganVzdCB0aGUgdmFsdWVcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgIHRoaXMuclswXT0oZVt0aGlzLnZbcF0tc10rMTYrNjQpOyAvLyBub24tc2ltcGxlLS1sb29rIHVwIGluIGxpc3RzXG4gICAgICAgICAgdGhpcy5yWzJdPWRbdGhpcy52W3ArK10gLSBzXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZpbGwgY29kZS1saWtlIGVudHJpZXMgd2l0aCByXG4gICAgICAgIGY9MTw8KGstdyk7XG4gICAgICAgIGZvciAoaj1pPj4+dztqPHo7ais9Zil7XG4gICAgICAgICAgYXJyYXlDb3B5KHRoaXMuciwgMCwgaHAsIChxK2opKjMsIDMpO1xuXHR9XG5cblx0Ly8gYmFja3dhcmRzIGluY3JlbWVudCB0aGUgay1iaXQgY29kZSBpXG4gICAgICAgIGZvciAoaiA9IDEgPDwgKGsgLSAxKTsgKGkgJiBqKSE9MDsgaiA+Pj49IDEpe1xuICAgICAgICAgIGkgXj0gajtcblx0fVxuICAgICAgICBpIF49IGo7XG5cblx0Ly8gYmFja3VwIG92ZXIgZmluaXNoZWQgdGFibGVzXG4gICAgICAgIG1hc2sgPSAoMSA8PCB3KSAtIDE7ICAgICAgLy8gbmVlZGVkIG9uIEhQLCBjYyAtTyBidWdcbiAgICAgICAgd2hpbGUgKChpICYgbWFzaykgIT0gdGhpcy54W2hdKXtcbiAgICAgICAgICBoLS07ICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBuZWVkIHRvIHVwZGF0ZSBxXG4gICAgICAgICAgdyAtPSBsO1xuICAgICAgICAgIG1hc2sgPSAoMSA8PCB3KSAtIDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmV0dXJuIFpfQlVGX0VSUk9SIGlmIHdlIHdlcmUgZ2l2ZW4gYW4gaW5jb21wbGV0ZSB0YWJsZVxuICAgIHJldHVybiB5ICE9IDAgJiYgZyAhPSAxID8gWl9CVUZfRVJST1IgOiBaX09LO1xufVxuXG5JbmZUcmVlLnByb3RvdHlwZS5pbmZsYXRlX3RyZWVzX2JpdHMgPSBmdW5jdGlvbihjLCBiYiwgdGIsIGhwLCB6KSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICB0aGlzLmluaXRXb3JrQXJlYSgxOSk7XG4gICAgdGhpcy5oblswXT0wO1xuICAgIHJlc3VsdCA9IHRoaXMuaHVmdF9idWlsZChjLCAwLCAxOSwgMTksIG51bGwsIG51bGwsIHRiLCBiYiwgaHAsIHRoaXMuaG4sIHRoaXMudik7XG5cbiAgICBpZihyZXN1bHQgPT0gWl9EQVRBX0VSUk9SKXtcbiAgICAgIHoubXNnID0gXCJvdmVyc3Vic2NyaWJlZCBkeW5hbWljIGJpdCBsZW5ndGhzIHRyZWVcIjtcbiAgICB9XG4gICAgZWxzZSBpZihyZXN1bHQgPT0gWl9CVUZfRVJST1IgfHwgYmJbMF0gPT0gMCl7XG4gICAgICB6Lm1zZyA9IFwiaW5jb21wbGV0ZSBkeW5hbWljIGJpdCBsZW5ndGhzIHRyZWVcIjtcbiAgICAgIHJlc3VsdCA9IFpfREFUQV9FUlJPUjtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuSW5mVHJlZS5wcm90b3R5cGUuaW5mbGF0ZV90cmVlc19keW5hbWljID0gZnVuY3Rpb24obmwsIG5kLCBjLCBibCwgYmQsIHRsLCB0ZCwgaHAsIHopIHtcbiAgICB2YXIgcmVzdWx0O1xuXG4gICAgLy8gYnVpbGQgbGl0ZXJhbC9sZW5ndGggdHJlZVxuICAgIHRoaXMuaW5pdFdvcmtBcmVhKDI4OCk7XG4gICAgdGhpcy5oblswXT0wO1xuICAgIHJlc3VsdCA9IHRoaXMuaHVmdF9idWlsZChjLCAwLCBubCwgMjU3LCBjcGxlbnMsIGNwbGV4dCwgdGwsIGJsLCBocCwgdGhpcy5obiwgdGhpcy52KTtcbiAgICBpZiAocmVzdWx0ICE9IFpfT0sgfHwgYmxbMF0gPT0gMCl7XG4gICAgICBpZihyZXN1bHQgPT0gWl9EQVRBX0VSUk9SKXtcbiAgICAgICAgei5tc2cgPSBcIm92ZXJzdWJzY3JpYmVkIGxpdGVyYWwvbGVuZ3RoIHRyZWVcIjtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBaX01FTV9FUlJPUil7XG4gICAgICAgIHoubXNnID0gXCJpbmNvbXBsZXRlIGxpdGVyYWwvbGVuZ3RoIHRyZWVcIjtcbiAgICAgICAgcmVzdWx0ID0gWl9EQVRBX0VSUk9SO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvLyBidWlsZCBkaXN0YW5jZSB0cmVlXG4gICAgdGhpcy5pbml0V29ya0FyZWEoMjg4KTtcbiAgICByZXN1bHQgPSB0aGlzLmh1ZnRfYnVpbGQoYywgbmwsIG5kLCAwLCBjcGRpc3QsIGNwZGV4dCwgdGQsIGJkLCBocCwgdGhpcy5obiwgdGhpcy52KTtcblxuICAgIGlmIChyZXN1bHQgIT0gWl9PSyB8fCAoYmRbMF0gPT0gMCAmJiBubCA+IDI1Nykpe1xuICAgICAgaWYgKHJlc3VsdCA9PSBaX0RBVEFfRVJST1Ipe1xuICAgICAgICB6Lm1zZyA9IFwib3ZlcnN1YnNjcmliZWQgZGlzdGFuY2UgdHJlZVwiO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAocmVzdWx0ID09IFpfQlVGX0VSUk9SKSB7XG4gICAgICAgIHoubXNnID0gXCJpbmNvbXBsZXRlIGRpc3RhbmNlIHRyZWVcIjtcbiAgICAgICAgcmVzdWx0ID0gWl9EQVRBX0VSUk9SO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IFpfTUVNX0VSUk9SKXtcbiAgICAgICAgei5tc2cgPSBcImVtcHR5IGRpc3RhbmNlIHRyZWUgd2l0aCBsZW5ndGhzXCI7XG4gICAgICAgIHJlc3VsdCA9IFpfREFUQV9FUlJPUjtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIFpfT0s7XG59XG4vKlxuICBzdGF0aWMgaW50IGluZmxhdGVfdHJlZXNfZml4ZWQoaW50W10gYmwsICAvL2xpdGVyYWwgZGVzaXJlZC9hY3R1YWwgYml0IGRlcHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRbXSBiZCwgIC8vZGlzdGFuY2UgZGVzaXJlZC9hY3R1YWwgYml0IGRlcHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRbXVtdIHRsLC8vbGl0ZXJhbC9sZW5ndGggdHJlZSByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludFtdW10gdGQsLy9kaXN0YW5jZSB0cmVlIHJlc3VsdCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFpTdHJlYW0geiAgLy9mb3IgbWVtb3J5IGFsbG9jYXRpb25cblx0XHRcdFx0ICl7XG5cbiovXG5cbmZ1bmN0aW9uIGluZmxhdGVfdHJlZXNfZml4ZWQoYmwsIGJkLCB0bCwgdGQsIHopIHtcbiAgICBibFswXT1maXhlZF9ibDtcbiAgICBiZFswXT1maXhlZF9iZDtcbiAgICB0bFswXT1maXhlZF90bDtcbiAgICB0ZFswXT1maXhlZF90ZDtcbiAgICByZXR1cm4gWl9PSztcbn1cblxuSW5mVHJlZS5wcm90b3R5cGUuaW5pdFdvcmtBcmVhID0gZnVuY3Rpb24odnNpemUpe1xuICAgIGlmKHRoaXMuaG49PW51bGwpe1xuICAgICAgICB0aGlzLmhuPW5ldyBJbnQzMkFycmF5KDEpO1xuICAgICAgICB0aGlzLnY9bmV3IEludDMyQXJyYXkodnNpemUpO1xuICAgICAgICB0aGlzLmM9bmV3IEludDMyQXJyYXkoQk1BWCsxKTtcbiAgICAgICAgdGhpcy5yPW5ldyBJbnQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLnU9bmV3IEludDMyQXJyYXkoQk1BWCk7XG4gICAgICAgIHRoaXMueD1uZXcgSW50MzJBcnJheShCTUFYKzEpO1xuICAgIH1cbiAgICBpZih0aGlzLnYubGVuZ3RoPHZzaXplKXsgXG4gICAgICAgIHRoaXMudj1uZXcgSW50MzJBcnJheSh2c2l6ZSk7IFxuICAgIH1cbiAgICBmb3IodmFyIGk9MDsgaTx2c2l6ZTsgaSsrKXt0aGlzLnZbaV09MDt9XG4gICAgZm9yKHZhciBpPTA7IGk8Qk1BWCsxOyBpKyspe3RoaXMuY1tpXT0wO31cbiAgICBmb3IodmFyIGk9MDsgaTwzOyBpKyspe3RoaXMucltpXT0wO31cbi8vICBmb3IoaW50IGk9MDsgaTxCTUFYOyBpKyspe3VbaV09MDt9XG4gICAgYXJyYXlDb3B5KHRoaXMuYywgMCwgdGhpcy51LCAwLCBCTUFYKTtcbi8vICBmb3IoaW50IGk9MDsgaTxCTUFYKzE7IGkrKyl7eFtpXT0wO31cbiAgICBhcnJheUNvcHkodGhpcy5jLCAwLCB0aGlzLngsIDAsIEJNQVgrMSk7XG59XG5cbnZhciB0ZXN0QXJyYXkgPSBuZXcgVWludDhBcnJheSgxKTtcbnZhciBoYXNTdWJhcnJheSA9ICh0eXBlb2YgdGVzdEFycmF5LnN1YmFycmF5ID09PSAnZnVuY3Rpb24nKTtcbnZhciBoYXNTbGljZSA9IGZhbHNlOyAvKiAodHlwZW9mIHRlc3RBcnJheS5zbGljZSA9PT0gJ2Z1bmN0aW9uJyk7ICovIC8vIENocm9tZSBzbGljZSBwZXJmb3JtYW5jZSBpcyBzbyBkaXJlIHRoYXQgd2UncmUgY3VycmVudGx5IG5vdCB1c2luZyBpdC4uLlxuXG5mdW5jdGlvbiBhcnJheUNvcHkoc3JjLCBzcmNPZmZzZXQsIGRlc3QsIGRlc3RPZmZzZXQsIGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gXG4gICAgaWYgKCFzcmMpIHtcbiAgICAgICAgdGhyb3cgXCJVbmRlZiBzcmNcIjtcbiAgICB9IGVsc2UgaWYgKCFkZXN0KSB7XG4gICAgICAgIHRocm93IFwiVW5kZWYgZGVzdFwiO1xuICAgIH1cblxuICAgIGlmIChzcmNPZmZzZXQgPT0gMCAmJiBjb3VudCA9PSBzcmMubGVuZ3RoKSB7XG4gICAgICAgIGFycmF5Q29weV9mYXN0KHNyYywgZGVzdCwgZGVzdE9mZnNldCk7XG4gICAgfSBlbHNlIGlmIChoYXNTdWJhcnJheSkge1xuICAgICAgICBhcnJheUNvcHlfZmFzdChzcmMuc3ViYXJyYXkoc3JjT2Zmc2V0LCBzcmNPZmZzZXQgKyBjb3VudCksIGRlc3QsIGRlc3RPZmZzZXQpOyBcbiAgICB9IGVsc2UgaWYgKHNyYy5CWVRFU19QRVJfRUxFTUVOVCA9PSAxICYmIGNvdW50ID4gMTAwKSB7XG4gICAgICAgIGFycmF5Q29weV9mYXN0KG5ldyBVaW50OEFycmF5KHNyYy5idWZmZXIsIHNyYy5ieXRlT2Zmc2V0ICsgc3JjT2Zmc2V0LCBjb3VudCksIGRlc3QsIGRlc3RPZmZzZXQpO1xuICAgIH0gZWxzZSB7IFxuICAgICAgICBhcnJheUNvcHlfc2xvdyhzcmMsIHNyY09mZnNldCwgZGVzdCwgZGVzdE9mZnNldCwgY291bnQpO1xuICAgIH1cblxufVxuXG5mdW5jdGlvbiBhcnJheUNvcHlfc2xvdyhzcmMsIHNyY09mZnNldCwgZGVzdCwgZGVzdE9mZnNldCwgY291bnQpIHtcblxuICAgIC8vIGRsb2coJ19zbG93IGNhbGw6IHNyY09mZnNldD0nICsgc3JjT2Zmc2V0ICsgJzsgZGVzdE9mZnNldD0nICsgZGVzdE9mZnNldCArICc7IGNvdW50PScgKyBjb3VudCk7XG5cbiAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgIGRlc3RbZGVzdE9mZnNldCArIGldID0gc3JjW3NyY09mZnNldCArIGldO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYXJyYXlDb3B5X2Zhc3Qoc3JjLCBkZXN0LCBkZXN0T2Zmc2V0KSB7XG4gICAgZGVzdC5zZXQoc3JjLCBkZXN0T2Zmc2V0KTtcbn1cblxuXG4gIC8vIGxhcmdlc3QgcHJpbWUgc21hbGxlciB0aGFuIDY1NTM2XG52YXIgQURMRVJfQkFTRT02NTUyMTsgXG4gIC8vIE5NQVggaXMgdGhlIGxhcmdlc3QgbiBzdWNoIHRoYXQgMjU1bihuKzEpLzIgKyAobisxKShCQVNFLTEpIDw9IDJeMzItMVxudmFyIEFETEVSX05NQVg9NTU1MjtcblxuZnVuY3Rpb24gYWRsZXIzMihhZGxlciwgLyogYnl0ZVtdICovIGJ1ZiwgIGluZGV4LCBsZW4pe1xuICAgIGlmKGJ1ZiA9PSBudWxsKXsgcmV0dXJuIDE7IH1cblxuICAgIHZhciBzMT1hZGxlciYweGZmZmY7XG4gICAgdmFyIHMyPShhZGxlcj4+MTYpJjB4ZmZmZjtcbiAgICB2YXIgaztcblxuICAgIHdoaWxlKGxlbiA+IDApIHtcbiAgICAgIGs9bGVuPEFETEVSX05NQVg/bGVuOkFETEVSX05NQVg7XG4gICAgICBsZW4tPWs7XG4gICAgICB3aGlsZShrPj0xNil7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBrLT0xNjtcbiAgICAgIH1cbiAgICAgIGlmKGshPTApe1xuICAgICAgICBkb3tcbiAgICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSgtLWshPTApO1xuICAgICAgfVxuICAgICAgczElPUFETEVSX0JBU0U7XG4gICAgICBzMiU9QURMRVJfQkFTRTtcbiAgICB9XG4gICAgcmV0dXJuIChzMjw8MTYpfHMxO1xufVxuXG5cblxuZnVuY3Rpb24ganN6bGliX2luZmxhdGVfYnVmZmVyKGJ1ZmZlciwgc3RhcnQsIGxlbmd0aCwgYWZ0ZXJVbmNPZmZzZXQpIHtcbiAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgfSBlbHNlIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgc3RhcnQsIGJ1ZmZlci5ieXRlTGVuZ3RoIC0gc3RhcnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgc3RhcnQsIGxlbmd0aCk7XG4gICAgfVxuXG4gICAgdmFyIHogPSBuZXcgWlN0cmVhbSgpO1xuICAgIHouaW5mbGF0ZUluaXQoREVGX1dCSVRTLCB0cnVlKTtcbiAgICB6Lm5leHRfaW4gPSBidWZmZXI7XG4gICAgei5uZXh0X2luX2luZGV4ID0gMDtcbiAgICB6LmF2YWlsX2luID0gYnVmZmVyLmxlbmd0aDtcblxuICAgIHZhciBvQmxvY2tMaXN0ID0gW107XG4gICAgdmFyIHRvdGFsU2l6ZSA9IDA7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIG9idWYgPSBuZXcgVWludDhBcnJheSgzMjAwMCk7XG4gICAgICAgIHoubmV4dF9vdXQgPSBvYnVmO1xuICAgICAgICB6Lm5leHRfb3V0X2luZGV4ID0gMDtcbiAgICAgICAgei5hdmFpbF9vdXQgPSBvYnVmLmxlbmd0aDtcbiAgICAgICAgdmFyIHN0YXR1cyA9IHouaW5mbGF0ZShaX05PX0ZMVVNIKTtcbiAgICAgICAgaWYgKHN0YXR1cyAhPSBaX09LICYmIHN0YXR1cyAhPSBaX1NUUkVBTV9FTkQgJiYgc3RhdHVzICE9IFpfQlVGX0VSUk9SKSB7XG4gICAgICAgICAgICB0aHJvdyB6Lm1zZztcbiAgICAgICAgfVxuICAgICAgICBpZiAoei5hdmFpbF9vdXQgIT0gMCkge1xuICAgICAgICAgICAgdmFyIG5ld29iID0gbmV3IFVpbnQ4QXJyYXkob2J1Zi5sZW5ndGggLSB6LmF2YWlsX291dCk7XG4gICAgICAgICAgICBhcnJheUNvcHkob2J1ZiwgMCwgbmV3b2IsIDAsIChvYnVmLmxlbmd0aCAtIHouYXZhaWxfb3V0KSk7XG4gICAgICAgICAgICBvYnVmID0gbmV3b2I7XG4gICAgICAgIH1cbiAgICAgICAgb0Jsb2NrTGlzdC5wdXNoKG9idWYpO1xuICAgICAgICB0b3RhbFNpemUgKz0gb2J1Zi5sZW5ndGg7XG4gICAgICAgIGlmIChzdGF0dXMgPT0gWl9TVFJFQU1fRU5EIHx8IHN0YXR1cyA9PSBaX0JVRl9FUlJPUikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYWZ0ZXJVbmNPZmZzZXQpIHtcbiAgICAgICAgYWZ0ZXJVbmNPZmZzZXRbMF0gPSAoc3RhcnQgfHwgMCkgKyB6Lm5leHRfaW5faW5kZXg7XG4gICAgfVxuXG4gICAgaWYgKG9CbG9ja0xpc3QubGVuZ3RoID09IDEpIHtcbiAgICAgICAgcmV0dXJuIG9CbG9ja0xpc3RbMF0uYnVmZmVyO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvdXQgPSBuZXcgVWludDhBcnJheSh0b3RhbFNpemUpO1xuICAgICAgICB2YXIgY3Vyc29yID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvQmxvY2tMaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgYiA9IG9CbG9ja0xpc3RbaV07XG4gICAgICAgICAgICBhcnJheUNvcHkoYiwgMCwgb3V0LCBjdXJzb3IsIGIubGVuZ3RoKTtcbiAgICAgICAgICAgIGN1cnNvciArPSBiLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0LmJ1ZmZlcjtcbiAgICB9XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgaW5mbGF0ZUJ1ZmZlcjoganN6bGliX2luZmxhdGVfYnVmZmVyLFxuICAgIGFycmF5Q29weTogYXJyYXlDb3B5XG4gIH07XG59XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLy8gIFJhbWRhIHYwLjIxLjBcbi8vICBodHRwczovL2dpdGh1Yi5jb20vcmFtZGEvcmFtZGFcbi8vICAoYykgMjAxMy0yMDE2IFNjb3R0IFNhdXlldCwgTWljaGFlbCBIdXJsZXksIGFuZCBEYXZpZCBDaGFtYmVyc1xuLy8gIFJhbWRhIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG47KGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICAgKiBBIHNwZWNpYWwgcGxhY2Vob2xkZXIgdmFsdWUgdXNlZCB0byBzcGVjaWZ5IFwiZ2Fwc1wiIHdpdGhpbiBjdXJyaWVkIGZ1bmN0aW9ucyxcbiAgICAgKiBhbGxvd2luZyBwYXJ0aWFsIGFwcGxpY2F0aW9uIG9mIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMsIHJlZ2FyZGxlc3Mgb2ZcbiAgICAgKiB0aGVpciBwb3NpdGlvbnMuXG4gICAgICpcbiAgICAgKiBJZiBgZ2AgaXMgYSBjdXJyaWVkIHRlcm5hcnkgZnVuY3Rpb24gYW5kIGBfYCBpcyBgUi5fX2AsIHRoZSBmb2xsb3dpbmcgYXJlXG4gICAgICogZXF1aXZhbGVudDpcbiAgICAgKlxuICAgICAqICAgLSBgZygxLCAyLCAzKWBcbiAgICAgKiAgIC0gYGcoXywgMiwgMykoMSlgXG4gICAgICogICAtIGBnKF8sIF8sIDMpKDEpKDIpYFxuICAgICAqICAgLSBgZyhfLCBfLCAzKSgxLCAyKWBcbiAgICAgKiAgIC0gYGcoXywgMiwgXykoMSwgMylgXG4gICAgICogICAtIGBnKF8sIDIpKDEpKDMpYFxuICAgICAqICAgLSBgZyhfLCAyKSgxLCAzKWBcbiAgICAgKiAgIC0gYGcoXywgMikoXywgMykoMSlgXG4gICAgICpcbiAgICAgKiBAY29uc3RhbnRcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC42LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZ3JlZXQgPSBSLnJlcGxhY2UoJ3tuYW1lfScsIFIuX18sICdIZWxsbywge25hbWV9IScpO1xuICAgICAqICAgICAgZ3JlZXQoJ0FsaWNlJyk7IC8vPT4gJ0hlbGxvLCBBbGljZSEnXG4gICAgICovXG4gICAgdmFyIF9fID0geyAnQEBmdW5jdGlvbmFsL3BsYWNlaG9sZGVyJzogdHJ1ZSB9O1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbiAgICB2YXIgX2FyaXR5ID0gZnVuY3Rpb24gX2FyaXR5KG4sIGZuKSB7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4gICAgICAgIHN3aXRjaCAobikge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNiwgYTcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3LCBhOCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3LCBhOCwgYTkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IHRvIF9hcml0eSBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIgbm8gZ3JlYXRlciB0aGFuIHRlbicpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBfYXJyYXlGcm9tSXRlcmF0b3IgPSBmdW5jdGlvbiBfYXJyYXlGcm9tSXRlcmF0b3IoaXRlcikge1xuICAgICAgICB2YXIgbGlzdCA9IFtdO1xuICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgd2hpbGUgKCEobmV4dCA9IGl0ZXIubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICBsaXN0LnB1c2gobmV4dC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfTtcblxuICAgIHZhciBfYXJyYXlPZiA9IGZ1bmN0aW9uIF9hcnJheU9mKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgdmFyIF9jbG9uZVJlZ0V4cCA9IGZ1bmN0aW9uIF9jbG9uZVJlZ0V4cChwYXR0ZXJuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4uc291cmNlLCAocGF0dGVybi5nbG9iYWwgPyAnZycgOiAnJykgKyAocGF0dGVybi5pZ25vcmVDYXNlID8gJ2knIDogJycpICsgKHBhdHRlcm4ubXVsdGlsaW5lID8gJ20nIDogJycpICsgKHBhdHRlcm4uc3RpY2t5ID8gJ3knIDogJycpICsgKHBhdHRlcm4udW5pY29kZSA/ICd1JyA6ICcnKSk7XG4gICAgfTtcblxuICAgIHZhciBfY29tcGxlbWVudCA9IGZ1bmN0aW9uIF9jb21wbGVtZW50KGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQcml2YXRlIGBjb25jYXRgIGZ1bmN0aW9uIHRvIG1lcmdlIHR3byBhcnJheS1saWtlIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8QXJndW1lbnRzfSBbc2V0MT1bXV0gQW4gYXJyYXktbGlrZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtBcnJheXxBcmd1bWVudHN9IFtzZXQyPVtdXSBBbiBhcnJheS1saWtlIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcsIG1lcmdlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBfY29uY2F0KFs0LCA1LCA2XSwgWzEsIDIsIDNdKTsgLy89PiBbNCwgNSwgNiwgMSwgMiwgM11cbiAgICAgKi9cbiAgICB2YXIgX2NvbmNhdCA9IGZ1bmN0aW9uIF9jb25jYXQoc2V0MSwgc2V0Mikge1xuICAgICAgICBzZXQxID0gc2V0MSB8fCBbXTtcbiAgICAgICAgc2V0MiA9IHNldDIgfHwgW107XG4gICAgICAgIHZhciBpZHg7XG4gICAgICAgIHZhciBsZW4xID0gc2V0MS5sZW5ndGg7XG4gICAgICAgIHZhciBsZW4yID0gc2V0Mi5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbjEpIHtcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IHNldDFbaWR4XTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4yKSB7XG4gICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSBzZXQyW2lkeF07XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICB2YXIgX2NvbnRhaW5zV2l0aCA9IGZ1bmN0aW9uIF9jb250YWluc1dpdGgocHJlZCwgeCwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAocHJlZCh4LCBsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHZhciBfZmlsdGVyID0gZnVuY3Rpb24gX2ZpbHRlcihmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChmbihsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gbGlzdFtpZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgdmFyIF9mb3JjZVJlZHVjZWQgPSBmdW5jdGlvbiBfZm9yY2VSZWR1Y2VkKHgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvdmFsdWUnOiB4LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZWR1Y2VkJzogdHJ1ZVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvLyBTdHJpbmcoeCA9PiB4KSBldmFsdWF0ZXMgdG8gXCJ4ID0+IHhcIiwgc28gdGhlIHBhdHRlcm4gbWF5IG5vdCBtYXRjaC5cbiAgICB2YXIgX2Z1bmN0aW9uTmFtZSA9IGZ1bmN0aW9uIF9mdW5jdGlvbk5hbWUoZikge1xuICAgICAgICAvLyBTdHJpbmcoeCA9PiB4KSBldmFsdWF0ZXMgdG8gXCJ4ID0+IHhcIiwgc28gdGhlIHBhdHRlcm4gbWF5IG5vdCBtYXRjaC5cbiAgICAgICAgdmFyIG1hdGNoID0gU3RyaW5nKGYpLm1hdGNoKC9eZnVuY3Rpb24gKFxcdyopLyk7XG4gICAgICAgIHJldHVybiBtYXRjaCA9PSBudWxsID8gJycgOiBtYXRjaFsxXTtcbiAgICB9O1xuXG4gICAgdmFyIF9oYXMgPSBmdW5jdGlvbiBfaGFzKHByb3AsIG9iaikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG4gICAgfTtcblxuICAgIHZhciBfaWRlbnRpdHkgPSBmdW5jdGlvbiBfaWRlbnRpdHkoeCkge1xuICAgICAgICByZXR1cm4geDtcbiAgICB9O1xuXG4gICAgdmFyIF9pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJndW1lbnRzKSA9PT0gJ1tvYmplY3QgQXJndW1lbnRzXScgPyBmdW5jdGlvbiBfaXNBcmd1bWVudHMoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuICAgICAgICB9IDogZnVuY3Rpb24gX2lzQXJndW1lbnRzKHgpIHtcbiAgICAgICAgICAgIHJldHVybiBfaGFzKCdjYWxsZWUnLCB4KTtcbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyB3aGV0aGVyIG9yIG5vdCBhbiBvYmplY3QgaXMgYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsIFRoZSBvYmplY3QgdG8gdGVzdC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgYHZhbGAgaXMgYW4gYXJyYXksIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIF9pc0FycmF5KFtdKTsgLy89PiB0cnVlXG4gICAgICogICAgICBfaXNBcnJheShudWxsKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgX2lzQXJyYXkoe30pOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBfaXNBcnJheSh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbCAhPSBudWxsICYmIHZhbC5sZW5ndGggPj0gMCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICB9O1xuXG4gICAgdmFyIF9pc0Z1bmN0aW9uID0gZnVuY3Rpb24gX2lzTnVtYmVyKHgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIHRoZSBwYXNzZWQgYXJndW1lbnQgaXMgYW4gaW50ZWdlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBuXG4gICAgICogQGNhdGVnb3J5IFR5cGVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIHZhciBfaXNJbnRlZ2VyID0gTnVtYmVyLmlzSW50ZWdlciB8fCBmdW5jdGlvbiBfaXNJbnRlZ2VyKG4pIHtcbiAgICAgICAgcmV0dXJuIG4gPDwgMCA9PT0gbjtcbiAgICB9O1xuXG4gICAgdmFyIF9pc051bWJlciA9IGZ1bmN0aW9uIF9pc051bWJlcih4KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IE51bWJlcl0nO1xuICAgIH07XG5cbiAgICB2YXIgX2lzT2JqZWN0ID0gZnVuY3Rpb24gX2lzT2JqZWN0KHgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gICAgfTtcblxuICAgIHZhciBfaXNQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIF9pc1BsYWNlaG9sZGVyKGEpIHtcbiAgICAgICAgcmV0dXJuIGEgIT0gbnVsbCAmJiB0eXBlb2YgYSA9PT0gJ29iamVjdCcgJiYgYVsnQEBmdW5jdGlvbmFsL3BsYWNlaG9sZGVyJ10gPT09IHRydWU7XG4gICAgfTtcblxuICAgIHZhciBfaXNSZWdFeHAgPSBmdW5jdGlvbiBfaXNSZWdFeHAoeCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBSZWdFeHBdJztcbiAgICB9O1xuXG4gICAgdmFyIF9pc1N0cmluZyA9IGZ1bmN0aW9uIF9pc1N0cmluZyh4KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IFN0cmluZ10nO1xuICAgIH07XG5cbiAgICB2YXIgX2lzVHJhbnNmb3JtZXIgPSBmdW5jdGlvbiBfaXNUcmFuc2Zvcm1lcihvYmopIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmpbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPT09ICdmdW5jdGlvbic7XG4gICAgfTtcblxuICAgIHZhciBfbWFwID0gZnVuY3Rpb24gX21hcChmbiwgZnVuY3Rvcikge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGZ1bmN0b3IubGVuZ3RoO1xuICAgICAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuKTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgcmVzdWx0W2lkeF0gPSBmbihmdW5jdG9yW2lkeF0pO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgLy8gQmFzZWQgb24gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnblxuICAgIHZhciBfb2JqZWN0QXNzaWduID0gZnVuY3Rpb24gX29iamVjdEFzc2lnbih0YXJnZXQpIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICAgIHZhciBpZHggPSAxO1xuICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpZHhdO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9oYXMobmV4dEtleSwgc291cmNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xuXG4gICAgdmFyIF9vZiA9IGZ1bmN0aW9uIF9vZih4KSB7XG4gICAgICAgIHJldHVybiBbeF07XG4gICAgfTtcblxuICAgIHZhciBfcGlwZSA9IGZ1bmN0aW9uIF9waXBlKGYsIGcpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnLmNhbGwodGhpcywgZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIF9waXBlUCA9IGZ1bmN0aW9uIF9waXBlUChmLCBnKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KGN0eCwgYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGcuY2FsbChjdHgsIHgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8vIFxcYiBtYXRjaGVzIHdvcmQgYm91bmRhcnk7IFtcXGJdIG1hdGNoZXMgYmFja3NwYWNlXG4gICAgdmFyIF9xdW90ZSA9IGZ1bmN0aW9uIF9xdW90ZShzKSB7XG4gICAgICAgIHZhciBlc2NhcGVkID0gcy5yZXBsYWNlKC9cXFxcL2csICdcXFxcXFxcXCcpLnJlcGxhY2UoL1tcXGJdL2csICdcXFxcYicpICAgIC8vIFxcYiBtYXRjaGVzIHdvcmQgYm91bmRhcnk7IFtcXGJdIG1hdGNoZXMgYmFja3NwYWNlXG4gICAgLnJlcGxhY2UoL1xcZi9nLCAnXFxcXGYnKS5yZXBsYWNlKC9cXG4vZywgJ1xcXFxuJykucmVwbGFjZSgvXFxyL2csICdcXFxccicpLnJlcGxhY2UoL1xcdC9nLCAnXFxcXHQnKS5yZXBsYWNlKC9cXHYvZywgJ1xcXFx2JykucmVwbGFjZSgvXFwwL2csICdcXFxcMCcpO1xuICAgICAgICByZXR1cm4gJ1wiJyArIGVzY2FwZWQucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpICsgJ1wiJztcbiAgICB9O1xuXG4gICAgdmFyIF9yZWR1Y2VkID0gZnVuY3Rpb24gX3JlZHVjZWQoeCkge1xuICAgICAgICByZXR1cm4geCAmJiB4WydAQHRyYW5zZHVjZXIvcmVkdWNlZCddID8geCA6IHtcbiAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvdmFsdWUnOiB4LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZWR1Y2VkJzogdHJ1ZVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBbiBvcHRpbWl6ZWQsIHByaXZhdGUgYXJyYXkgYHNsaWNlYCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcmd1bWVudHN8QXJyYXl9IGFyZ3MgVGhlIGFycmF5IG9yIGFyZ3VtZW50cyBvYmplY3QgdG8gY29uc2lkZXIuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtmcm9tPTBdIFRoZSBhcnJheSBpbmRleCB0byBzbGljZSBmcm9tLCBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt0bz1hcmdzLmxlbmd0aF0gVGhlIGFycmF5IGluZGV4IHRvIHNsaWNlIHRvLCBleGNsdXNpdmUuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgbmV3LCBzbGljZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgX3NsaWNlKFsxLCAyLCAzLCA0LCA1XSwgMSwgMyk7IC8vPT4gWzIsIDNdXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmaXJzdFRocmVlQXJncyA9IGZ1bmN0aW9uKGEsIGIsIGMsIGQpIHtcbiAgICAgKiAgICAgICAgcmV0dXJuIF9zbGljZShhcmd1bWVudHMsIDAsIDMpO1xuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIGZpcnN0VGhyZWVBcmdzKDEsIDIsIDMsIDQpOyAvLz0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIHZhciBfc2xpY2UgPSBmdW5jdGlvbiBfc2xpY2UoYXJncywgZnJvbSwgdG8pIHtcbiAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBfc2xpY2UoYXJncywgMCwgYXJncy5sZW5ndGgpO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gX3NsaWNlKGFyZ3MsIGZyb20sIGFyZ3MubGVuZ3RoKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHZhciBsaXN0ID0gW107XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBsZW4gPSBNYXRoLm1heCgwLCBNYXRoLm1pbihhcmdzLmxlbmd0aCwgdG8pIC0gZnJvbSk7XG4gICAgICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgbGlzdFtpZHhdID0gYXJnc1tmcm9tICsgaWR4XTtcbiAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBvbHlmaWxsIGZyb20gPGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGUvdG9JU09TdHJpbmc+LlxuICAgICAqL1xuICAgIHZhciBfdG9JU09TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYWQgPSBmdW5jdGlvbiBwYWQobikge1xuICAgICAgICAgICAgcmV0dXJuIChuIDwgMTAgPyAnMCcgOiAnJykgKyBuO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdHlwZW9mIERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nID09PSAnZnVuY3Rpb24nID8gZnVuY3Rpb24gX3RvSVNPU3RyaW5nKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBkLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH0gOiBmdW5jdGlvbiBfdG9JU09TdHJpbmcoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0VVRDRnVsbFllYXIoKSArICctJyArIHBhZChkLmdldFVUQ01vbnRoKCkgKyAxKSArICctJyArIHBhZChkLmdldFVUQ0RhdGUoKSkgKyAnVCcgKyBwYWQoZC5nZXRVVENIb3VycygpKSArICc6JyArIHBhZChkLmdldFVUQ01pbnV0ZXMoKSkgKyAnOicgKyBwYWQoZC5nZXRVVENTZWNvbmRzKCkpICsgJy4nICsgKGQuZ2V0VVRDTWlsbGlzZWNvbmRzKCkgLyAxMDAwKS50b0ZpeGVkKDMpLnNsaWNlKDIsIDUpICsgJ1onO1xuICAgICAgICB9O1xuICAgIH0oKTtcblxuICAgIHZhciBfeGZCYXNlID0ge1xuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL2luaXQnXSgpO1xuICAgICAgICB9LFxuICAgICAgICByZXN1bHQ6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgX3h3cmFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYV3JhcChmbikge1xuICAgICAgICAgICAgdGhpcy5mID0gZm47XG4gICAgICAgIH1cbiAgICAgICAgWFdyYXAucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbml0IG5vdCBpbXBsZW1lbnRlZCBvbiBYV3JhcCcpO1xuICAgICAgICB9O1xuICAgICAgICBYV3JhcC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChhY2MpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH07XG4gICAgICAgIFhXcmFwLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChhY2MsIHgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmYoYWNjLCB4KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF94d3JhcChmbikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYV3JhcChmbik7XG4gICAgICAgIH07XG4gICAgfSgpO1xuXG4gICAgdmFyIF9hcGVydHVyZSA9IGZ1bmN0aW9uIF9hcGVydHVyZShuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGltaXQgPSBsaXN0Lmxlbmd0aCAtIChuIC0gMSk7XG4gICAgICAgIHZhciBhY2MgPSBuZXcgQXJyYXkobGltaXQgPj0gMCA/IGxpbWl0IDogMCk7XG4gICAgICAgIHdoaWxlIChpZHggPCBsaW1pdCkge1xuICAgICAgICAgICAgYWNjW2lkeF0gPSBfc2xpY2UobGlzdCwgaWR4LCBpZHggKyBuKTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfTtcblxuICAgIHZhciBfYXNzaWduID0gdHlwZW9mIE9iamVjdC5hc3NpZ24gPT09ICdmdW5jdGlvbicgPyBPYmplY3QuYXNzaWduIDogX29iamVjdEFzc2lnbjtcblxuICAgIC8qKlxuICAgICAqIFNpbWlsYXIgdG8gaGFzTWV0aG9kLCB0aGlzIGNoZWNrcyB3aGV0aGVyIGEgZnVuY3Rpb24gaGFzIGEgW21ldGhvZG5hbWVdXG4gICAgICogZnVuY3Rpb24uIElmIGl0IGlzbid0IGFuIGFycmF5IGl0IHdpbGwgZXhlY3V0ZSB0aGF0IGZ1bmN0aW9uIG90aGVyd2lzZSBpdFxuICAgICAqIHdpbGwgZGVmYXVsdCB0byB0aGUgcmFtZGEgaW1wbGVtZW50YXRpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIHJhbWRhIGltcGxlbXRhdGlvblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RuYW1lIHByb3BlcnR5IHRvIGNoZWNrIGZvciBhIGN1c3RvbSBpbXBsZW1lbnRhdGlvblxuICAgICAqIEByZXR1cm4ge09iamVjdH0gV2hhdGV2ZXIgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgbWV0aG9kIGlzLlxuICAgICAqL1xuICAgIHZhciBfY2hlY2tGb3JNZXRob2QgPSBmdW5jdGlvbiBfY2hlY2tGb3JNZXRob2QobWV0aG9kbmFtZSwgZm4pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1tsZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHJldHVybiBfaXNBcnJheShvYmopIHx8IHR5cGVvZiBvYmpbbWV0aG9kbmFtZV0gIT09ICdmdW5jdGlvbicgPyBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogb2JqW21ldGhvZG5hbWVdLmFwcGx5KG9iaiwgX3NsaWNlKGFyZ3VtZW50cywgMCwgbGVuZ3RoIC0gMSkpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBPcHRpbWl6ZWQgaW50ZXJuYWwgb25lLWFyaXR5IGN1cnJ5IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHZhciBfY3VycnkxID0gZnVuY3Rpb24gX2N1cnJ5MShmbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZjEoYSkge1xuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwgX2lzUGxhY2Vob2xkZXIoYSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZjE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBPcHRpbWl6ZWQgaW50ZXJuYWwgdHdvLWFyaXR5IGN1cnJ5IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHZhciBfY3VycnkyID0gZnVuY3Rpb24gX2N1cnJ5Mihmbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZjIoYSwgYikge1xuICAgICAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGYyO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBfaXNQbGFjZWhvbGRlcihhKSA/IGYyIDogX2N1cnJ5MShmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKGEsIF9iKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pc1BsYWNlaG9sZGVyKGEpICYmIF9pc1BsYWNlaG9sZGVyKGIpID8gZjIgOiBfaXNQbGFjZWhvbGRlcihhKSA/IF9jdXJyeTEoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihfYSwgYik7XG4gICAgICAgICAgICAgICAgfSkgOiBfaXNQbGFjZWhvbGRlcihiKSA/IF9jdXJyeTEoZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBfYik7XG4gICAgICAgICAgICAgICAgfSkgOiBmbihhLCBiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogT3B0aW1pemVkIGludGVybmFsIHRocmVlLWFyaXR5IGN1cnJ5IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHZhciBfY3VycnkzID0gZnVuY3Rpb24gX2N1cnJ5Myhmbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZjMoYSwgYiwgYykge1xuICAgICAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGYzO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBfaXNQbGFjZWhvbGRlcihhKSA/IGYzIDogX2N1cnJ5MihmdW5jdGlvbiAoX2IsIF9jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBfYiwgX2MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJldHVybiBfaXNQbGFjZWhvbGRlcihhKSAmJiBfaXNQbGFjZWhvbGRlcihiKSA/IGYzIDogX2lzUGxhY2Vob2xkZXIoYSkgPyBfY3VycnkyKGZ1bmN0aW9uIChfYSwgX2MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKF9hLCBiLCBfYyk7XG4gICAgICAgICAgICAgICAgfSkgOiBfaXNQbGFjZWhvbGRlcihiKSA/IF9jdXJyeTIoZnVuY3Rpb24gKF9iLCBfYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oYSwgX2IsIF9jKTtcbiAgICAgICAgICAgICAgICB9KSA6IF9jdXJyeTEoZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBiLCBfYyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBfaXNQbGFjZWhvbGRlcihhKSAmJiBfaXNQbGFjZWhvbGRlcihiKSAmJiBfaXNQbGFjZWhvbGRlcihjKSA/IGYzIDogX2lzUGxhY2Vob2xkZXIoYSkgJiYgX2lzUGxhY2Vob2xkZXIoYikgPyBfY3VycnkyKGZ1bmN0aW9uIChfYSwgX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKF9hLCBfYiwgYyk7XG4gICAgICAgICAgICAgICAgfSkgOiBfaXNQbGFjZWhvbGRlcihhKSAmJiBfaXNQbGFjZWhvbGRlcihjKSA/IF9jdXJyeTIoZnVuY3Rpb24gKF9hLCBfYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oX2EsIGIsIF9jKTtcbiAgICAgICAgICAgICAgICB9KSA6IF9pc1BsYWNlaG9sZGVyKGIpICYmIF9pc1BsYWNlaG9sZGVyKGMpID8gX2N1cnJ5MihmdW5jdGlvbiAoX2IsIF9jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBfYiwgX2MpO1xuICAgICAgICAgICAgICAgIH0pIDogX2lzUGxhY2Vob2xkZXIoYSkgPyBfY3VycnkxKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oX2EsIGIsIGMpO1xuICAgICAgICAgICAgICAgIH0pIDogX2lzUGxhY2Vob2xkZXIoYikgPyBfY3VycnkxKGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oYSwgX2IsIGMpO1xuICAgICAgICAgICAgICAgIH0pIDogX2lzUGxhY2Vob2xkZXIoYykgPyBfY3VycnkxKGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oYSwgYiwgX2MpO1xuICAgICAgICAgICAgICAgIH0pIDogZm4oYSwgYiwgYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGN1cnJ5TiBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aCBUaGUgYXJpdHkgb2YgdGhlIGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gcmVjZWl2ZWQgQW4gYXJyYXkgb2YgYXJndW1lbnRzIHJlY2VpdmVkIHRodXMgZmFyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgdmFyIF9jdXJyeU4gPSBmdW5jdGlvbiBfY3VycnlOKGxlbmd0aCwgcmVjZWl2ZWQsIGZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29tYmluZWQgPSBbXTtcbiAgICAgICAgICAgIHZhciBhcmdzSWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gbGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNvbWJpbmVkSWR4ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChjb21iaW5lZElkeCA8IHJlY2VpdmVkLmxlbmd0aCB8fCBhcmdzSWR4IDwgYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKGNvbWJpbmVkSWR4IDwgcmVjZWl2ZWQubGVuZ3RoICYmICghX2lzUGxhY2Vob2xkZXIocmVjZWl2ZWRbY29tYmluZWRJZHhdKSB8fCBhcmdzSWR4ID49IGFyZ3VtZW50cy5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlY2VpdmVkW2NvbWJpbmVkSWR4XTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhcmd1bWVudHNbYXJnc0lkeF07XG4gICAgICAgICAgICAgICAgICAgIGFyZ3NJZHggKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tYmluZWRbY29tYmluZWRJZHhdID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghX2lzUGxhY2Vob2xkZXIocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0IC09IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbWJpbmVkSWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbGVmdCA8PSAwID8gZm4uYXBwbHkodGhpcywgY29tYmluZWQpIDogX2FyaXR5KGxlZnQsIF9jdXJyeU4obGVuZ3RoLCBjb21iaW5lZCwgZm4pKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgZGlzcGF0Y2hlcyB3aXRoIGRpZmZlcmVudCBzdHJhdGVnaWVzIGJhc2VkIG9uIHRoZVxuICAgICAqIG9iamVjdCBpbiBsaXN0IHBvc2l0aW9uIChsYXN0IGFyZ3VtZW50KS4gSWYgaXQgaXMgYW4gYXJyYXksIGV4ZWN1dGVzIFtmbl0uXG4gICAgICogT3RoZXJ3aXNlLCBpZiBpdCBoYXMgYSBmdW5jdGlvbiB3aXRoIFttZXRob2RuYW1lXSwgaXQgd2lsbCBleGVjdXRlIHRoYXRcbiAgICAgKiBmdW5jdGlvbiAoZnVuY3RvciBjYXNlKS4gT3RoZXJ3aXNlLCBpZiBpdCBpcyBhIHRyYW5zZm9ybWVyLCB1c2VzIHRyYW5zZHVjZXJcbiAgICAgKiBbeGZdIHRvIHJldHVybiBhIG5ldyB0cmFuc2Zvcm1lciAodHJhbnNkdWNlciBjYXNlKS4gT3RoZXJ3aXNlLCBpdCB3aWxsXG4gICAgICogZGVmYXVsdCB0byBleGVjdXRpbmcgW2ZuXS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZG5hbWUgcHJvcGVydHkgdG8gY2hlY2sgZm9yIGEgY3VzdG9tIGltcGxlbWVudGF0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0geGYgdHJhbnNkdWNlciB0byBpbml0aWFsaXplIGlmIG9iamVjdCBpcyB0cmFuc2Zvcm1lclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIGRlZmF1bHQgcmFtZGEgaW1wbGVtZW50YXRpb25cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0aGF0IGRpc3BhdGNoZXMgb24gb2JqZWN0IGluIGxpc3QgcG9zaXRpb25cbiAgICAgKi9cbiAgICB2YXIgX2Rpc3BhdGNoYWJsZSA9IGZ1bmN0aW9uIF9kaXNwYXRjaGFibGUobWV0aG9kbmFtZSwgeGYsIGZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvYmogPSBhcmd1bWVudHNbbGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBpZiAoIV9pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IF9zbGljZShhcmd1bWVudHMsIDAsIGxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW21ldGhvZG5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmpbbWV0aG9kbmFtZV0uYXBwbHkob2JqLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF9pc1RyYW5zZm9ybWVyKG9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZHVjZXIgPSB4Zi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zZHVjZXIob2JqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIF9kcm9wTGFzdFdoaWxlID0gZnVuY3Rpb24gZHJvcExhc3RXaGlsZShwcmVkLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSBsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlIChpZHggPj0gMCAmJiBwcmVkKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCwgMCwgaWR4ICsgMSk7XG4gICAgfTtcblxuICAgIHZhciBfeGFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWEFsbChmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgICAgIHRoaXMuYWxsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBYQWxsLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWEFsbC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWEFsbC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmYoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBfcmVkdWNlZCh0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgZmFsc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94YWxsKGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhBbGwoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hhbnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhBbnkoZiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgICAgIHRoaXMuZiA9IGY7XG4gICAgICAgICAgICB0aGlzLmFueSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFhBbnkucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYQW55LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFueSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFhBbnkucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmYoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbnkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9yZWR1Y2VkKHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB0cnVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGFueShmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYQW55KGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94YXBlcnR1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhBcGVydHVyZShuLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICAgICAgdGhpcy5mdWxsID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmFjYyA9IG5ldyBBcnJheShuKTtcbiAgICAgICAgfVxuICAgICAgICBYQXBlcnR1cmUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYQXBlcnR1cmUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmFjYyA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFhBcGVydHVyZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5zdG9yZShpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mdWxsID8gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRoaXMuZ2V0Q29weSgpKSA6IHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgWEFwZXJ0dXJlLnByb3RvdHlwZS5zdG9yZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5hY2NbdGhpcy5wb3NdID0gaW5wdXQ7XG4gICAgICAgICAgICB0aGlzLnBvcyArPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zID09PSB0aGlzLmFjYy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcyA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5mdWxsID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgWEFwZXJ0dXJlLnByb3RvdHlwZS5nZXRDb3B5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9jb25jYXQoX3NsaWNlKHRoaXMuYWNjLCB0aGlzLnBvcyksIF9zbGljZSh0aGlzLmFjYywgMCwgdGhpcy5wb3MpKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hhcGVydHVyZShuLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYQXBlcnR1cmUobiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hkcm9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYRHJvcChuLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5uID0gbjtcbiAgICAgICAgfVxuICAgICAgICBYRHJvcC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhEcm9wLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gX3hmQmFzZS5yZXN1bHQ7XG4gICAgICAgIFhEcm9wLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5uID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubiAtPSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hkcm9wKG4sIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhEcm9wKG4sIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZHJvcExhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhEcm9wTGFzdChuLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICAgICAgdGhpcy5mdWxsID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmFjYyA9IG5ldyBBcnJheShuKTtcbiAgICAgICAgfVxuICAgICAgICBYRHJvcExhc3QucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYRHJvcExhc3QucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmFjYyA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFhEcm9wTGFzdC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB0aGlzLmFjY1t0aGlzLnBvc10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdG9yZShpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBYRHJvcExhc3QucHJvdG90eXBlLnN0b3JlID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLmFjY1t0aGlzLnBvc10gPSBpbnB1dDtcbiAgICAgICAgICAgIHRoaXMucG9zICs9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3MgPT09IHRoaXMuYWNjLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmZ1bGwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGRyb3BMYXN0KG4sIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhEcm9wTGFzdChuLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGRyb3BSZXBlYXRzV2l0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWERyb3BSZXBlYXRzV2l0aChwcmVkLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5wcmVkID0gcHJlZDtcbiAgICAgICAgICAgIHRoaXMubGFzdFZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5zZWVuRmlyc3RWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFhEcm9wUmVwZWF0c1dpdGgucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9pbml0J10oKTtcbiAgICAgICAgfTtcbiAgICAgICAgWERyb3BSZXBlYXRzV2l0aC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWERyb3BSZXBlYXRzV2l0aC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgdmFyIHNhbWVBc0xhc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWVuRmlyc3RWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VlbkZpcnN0VmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZWQodGhpcy5sYXN0VmFsdWUsIGlucHV0KSkge1xuICAgICAgICAgICAgICAgIHNhbWVBc0xhc3QgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSBpbnB1dDtcbiAgICAgICAgICAgIHJldHVybiBzYW1lQXNMYXN0ID8gcmVzdWx0IDogdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hkcm9wUmVwZWF0c1dpdGgocHJlZCwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWERyb3BSZXBlYXRzV2l0aChwcmVkLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGRyb3BXaGlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWERyb3BXaGlsZShmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgfVxuICAgICAgICBYRHJvcFdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWERyb3BXaGlsZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IF94ZkJhc2UucmVzdWx0O1xuICAgICAgICBYRHJvcFdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGRyb3BXaGlsZShmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRHJvcFdoaWxlKGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZmlsdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYRmlsdGVyKGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICB9XG4gICAgICAgIFhGaWx0ZXIucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYRmlsdGVyLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gX3hmQmFzZS5yZXN1bHQ7XG4gICAgICAgIFhGaWx0ZXIucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmYoaW5wdXQpID8gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KSA6IHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hmaWx0ZXIoZiwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWEZpbHRlcihmLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGZpbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhGaW5kKGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICAgICAgdGhpcy5mb3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFhGaW5kLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWEZpbmQucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZm91bmQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgdm9pZCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWEZpbmQucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmYoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gX3JlZHVjZWQodGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGZpbmQoZiwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWEZpbmQoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hmaW5kSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhGaW5kSW5kZXgoZiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgICAgIHRoaXMuZiA9IGY7XG4gICAgICAgICAgICB0aGlzLmlkeCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5mb3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFhGaW5kSW5kZXgucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYRmluZEluZGV4LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZvdW5kKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWEZpbmRJbmRleC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5pZHggKz0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLmYoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gX3JlZHVjZWQodGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRoaXMuaWR4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGZpbmRJbmRleChmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRmluZEluZGV4KGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZmluZExhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhGaW5kTGFzdChmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgfVxuICAgICAgICBYRmluZExhc3QucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYRmluZExhc3QucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB0aGlzLmxhc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgWEZpbmRMYXN0LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mKGlucHV0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdCA9IGlucHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hmaW5kTGFzdChmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRmluZExhc3QoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hmaW5kTGFzdEluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYRmluZExhc3RJbmRleChmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgICAgIHRoaXMuaWR4ID0gLTE7XG4gICAgICAgICAgICB0aGlzLmxhc3RJZHggPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBYRmluZExhc3RJbmRleC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhGaW5kTGFzdEluZGV4LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSh0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgdGhpcy5sYXN0SWR4KSk7XG4gICAgICAgIH07XG4gICAgICAgIFhGaW5kTGFzdEluZGV4LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLmlkeCArPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMuZihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RJZHggPSB0aGlzLmlkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94ZmluZExhc3RJbmRleChmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRmluZExhc3RJbmRleChmLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeG1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWE1hcChmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgfVxuICAgICAgICBYTWFwLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWE1hcC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IF94ZkJhc2UucmVzdWx0O1xuICAgICAgICBYTWFwLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRoaXMuZihpbnB1dCkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeG1hcChmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYTWFwKGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94dGFrZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWFRha2UobiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgICAgIHRoaXMubiA9IG47XG4gICAgICAgIH1cbiAgICAgICAgWFRha2UucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYVGFrZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IF94ZkJhc2UucmVzdWx0O1xuICAgICAgICBYVGFrZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfcmVkdWNlZChyZXN1bHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm4gLT0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3h0YWtlKG4sIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhUYWtlKG4sIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94dGFrZVdoaWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYVGFrZVdoaWxlKGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICB9XG4gICAgICAgIFhUYWtlV2hpbGUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYVGFrZVdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gX3hmQmFzZS5yZXN1bHQ7XG4gICAgICAgIFhUYWtlV2hpbGUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmYoaW5wdXQpID8gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KSA6IF9yZWR1Y2VkKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94dGFrZVdoaWxlKGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhUYWtlV2hpbGUoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIHR3byB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGJcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICogQHNlZSBSLnN1YnRyYWN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5hZGQoMiwgMyk7ICAgICAgIC8vPT4gIDVcbiAgICAgKiAgICAgIFIuYWRkKDcpKDEwKTsgICAgICAvLz0+IDE3XG4gICAgICovXG4gICAgdmFyIGFkZCA9IF9jdXJyeTIoZnVuY3Rpb24gYWRkKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcihhKSArIE51bWJlcihiKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBmdW5jdGlvbiB0byB0aGUgdmFsdWUgYXQgdGhlIGdpdmVuIGluZGV4IG9mIGFuIGFycmF5LCByZXR1cm5pbmcgYVxuICAgICAqIG5ldyBjb3B5IG9mIHRoZSBhcnJheSB3aXRoIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleCByZXBsYWNlZCB3aXRoIHRoZVxuICAgICAqIHJlc3VsdCBvZiB0aGUgZnVuY3Rpb24gYXBwbGljYXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gYSkgLT4gTnVtYmVyIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gYXBwbHkuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGlkeCBUaGUgaW5kZXguXG4gICAgICogQHBhcmFtIHtBcnJheXxBcmd1bWVudHN9IGxpc3QgQW4gYXJyYXktbGlrZSBvYmplY3Qgd2hvc2UgdmFsdWVcbiAgICAgKiAgICAgICAgYXQgdGhlIHN1cHBsaWVkIGluZGV4IHdpbGwgYmUgcmVwbGFjZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgY29weSBvZiB0aGUgc3VwcGxpZWQgYXJyYXktbGlrZSBvYmplY3Qgd2l0aFxuICAgICAqICAgICAgICAgdGhlIGVsZW1lbnQgYXQgaW5kZXggYGlkeGAgcmVwbGFjZWQgd2l0aCB0aGUgdmFsdWVcbiAgICAgKiAgICAgICAgIHJldHVybmVkIGJ5IGFwcGx5aW5nIGBmbmAgdG8gdGhlIGV4aXN0aW5nIGVsZW1lbnQuXG4gICAgICogQHNlZSBSLnVwZGF0ZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYWRqdXN0KFIuYWRkKDEwKSwgMSwgWzAsIDEsIDJdKTsgICAgIC8vPT4gWzAsIDExLCAyXVxuICAgICAqICAgICAgUi5hZGp1c3QoUi5hZGQoMTApKSgxKShbMCwgMSwgMl0pOyAgICAgLy89PiBbMCwgMTEsIDJdXG4gICAgICovXG4gICAgdmFyIGFkanVzdCA9IF9jdXJyeTMoZnVuY3Rpb24gYWRqdXN0KGZuLCBpZHgsIGxpc3QpIHtcbiAgICAgICAgaWYgKGlkeCA+PSBsaXN0Lmxlbmd0aCB8fCBpZHggPCAtbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFydCA9IGlkeCA8IDAgPyBsaXN0Lmxlbmd0aCA6IDA7XG4gICAgICAgIHZhciBfaWR4ID0gc3RhcnQgKyBpZHg7XG4gICAgICAgIHZhciBfbGlzdCA9IF9jb25jYXQobGlzdCk7XG4gICAgICAgIF9saXN0W19pZHhdID0gZm4obGlzdFtfaWR4XSk7XG4gICAgICAgIHJldHVybiBfbGlzdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGFsbCBlbGVtZW50cyBvZiB0aGUgbGlzdCBtYXRjaCB0aGUgcHJlZGljYXRlLCBgZmFsc2VgIGlmXG4gICAgICogdGhlcmUgYXJlIGFueSB0aGF0IGRvbid0LlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGFsbGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBwcmVkaWNhdGUgaXMgc2F0aXNmaWVkIGJ5IGV2ZXJ5IGVsZW1lbnQsIGBmYWxzZWBcbiAgICAgKiAgICAgICAgIG90aGVyd2lzZS5cbiAgICAgKiBAc2VlIFIuYW55LCBSLm5vbmUsIFIudHJhbnNkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGxlc3NUaGFuMiA9IFIuZmxpcChSLmx0KSgyKTtcbiAgICAgKiAgICAgIHZhciBsZXNzVGhhbjMgPSBSLmZsaXAoUi5sdCkoMyk7XG4gICAgICogICAgICBSLmFsbChsZXNzVGhhbjIpKFsxLCAyXSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuYWxsKGxlc3NUaGFuMykoWzEsIDJdKTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGFsbCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnYWxsJywgX3hhbGwsIGZ1bmN0aW9uIGFsbChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoIWZuKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBhbHdheXMgcmV0dXJucyB0aGUgZ2l2ZW4gdmFsdWUuIE5vdGUgdGhhdCBmb3JcbiAgICAgKiBub24tcHJpbWl0aXZlcyB0aGUgdmFsdWUgcmV0dXJuZWQgaXMgYSByZWZlcmVuY2UgdG8gdGhlIG9yaWdpbmFsIHZhbHVlLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBrbm93biBhcyBgY29uc3RgLCBgY29uc3RhbnRgLCBvciBgS2AgKGZvciBLIGNvbWJpbmF0b3IpIGluXG4gICAgICogb3RoZXIgbGFuZ3VhZ2VzIGFuZCBsaWJyYXJpZXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgYSAtPiAoKiAtPiBhKVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB3cmFwIGluIGEgZnVuY3Rpb25cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBGdW5jdGlvbiA6OiAqIC0+IHZhbC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdCA9IFIuYWx3YXlzKCdUZWUnKTtcbiAgICAgKiAgICAgIHQoKTsgLy89PiAnVGVlJ1xuICAgICAqL1xuICAgIHZhciBhbHdheXMgPSBfY3VycnkxKGZ1bmN0aW9uIGFsd2F5cyh2YWwpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBib3RoIGFyZ3VtZW50cyBhcmUgYHRydWVgOyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyAqIC0+ICogLT4gKlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYSBBIGJvb2xlYW4gdmFsdWVcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGIgQSBib29sZWFuIHZhbHVlXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIGJvdGggYXJndW1lbnRzIGFyZSBgdHJ1ZWAsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gICAgICogQHNlZSBSLmJvdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmFuZCh0cnVlLCB0cnVlKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmFuZCh0cnVlLCBmYWxzZSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuYW5kKGZhbHNlLCB0cnVlKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5hbmQoZmFsc2UsIGZhbHNlKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBhbmQgPSBfY3VycnkyKGZ1bmN0aW9uIGFuZChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhICYmIGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBhdCBsZWFzdCBvbmUgb2YgZWxlbWVudHMgb2YgdGhlIGxpc3QgbWF0Y2ggdGhlIHByZWRpY2F0ZSxcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBhbnlgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgcHJlZGljYXRlIGlzIHNhdGlzZmllZCBieSBhdCBsZWFzdCBvbmUgZWxlbWVudCwgYGZhbHNlYFxuICAgICAqICAgICAgICAgb3RoZXJ3aXNlLlxuICAgICAqIEBzZWUgUi5hbGwsIFIubm9uZSwgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbGVzc1RoYW4wID0gUi5mbGlwKFIubHQpKDApO1xuICAgICAqICAgICAgdmFyIGxlc3NUaGFuMiA9IFIuZmxpcChSLmx0KSgyKTtcbiAgICAgKiAgICAgIFIuYW55KGxlc3NUaGFuMCkoWzEsIDJdKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5hbnkobGVzc1RoYW4yKShbMSwgMl0pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgYW55ID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdhbnknLCBfeGFueSwgZnVuY3Rpb24gYW55KGZuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChmbihsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0LCBjb21wb3NlZCBvZiBuLXR1cGxlcyBvZiBjb25zZWN1dGl2ZSBlbGVtZW50cyBJZiBgbmAgaXNcbiAgICAgKiBncmVhdGVyIHRoYW4gdGhlIGxlbmd0aCBvZiB0aGUgbGlzdCwgYW4gZW1wdHkgbGlzdCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBhcGVydHVyZWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbW2FdXVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuIFRoZSBzaXplIG9mIHRoZSB0dXBsZXMgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBzcGxpdCBpbnRvIGBuYC10dXBsZXNcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIG5ldyBsaXN0LlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmFwZXJ0dXJlKDIsIFsxLCAyLCAzLCA0LCA1XSk7IC8vPT4gW1sxLCAyXSwgWzIsIDNdLCBbMywgNF0sIFs0LCA1XV1cbiAgICAgKiAgICAgIFIuYXBlcnR1cmUoMywgWzEsIDIsIDMsIDQsIDVdKTsgLy89PiBbWzEsIDIsIDNdLCBbMiwgMywgNF0sIFszLCA0LCA1XV1cbiAgICAgKiAgICAgIFIuYXBlcnR1cmUoNywgWzEsIDIsIDMsIDQsIDVdKTsgLy89PiBbXVxuICAgICAqL1xuICAgIHZhciBhcGVydHVyZSA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnYXBlcnR1cmUnLCBfeGFwZXJ0dXJlLCBfYXBlcnR1cmUpKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBjb250ZW50cyBvZiB0aGUgZ2l2ZW4gbGlzdCwgZm9sbG93ZWQgYnlcbiAgICAgKiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGEgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7Kn0gZWwgVGhlIGVsZW1lbnQgdG8gYWRkIHRvIHRoZSBlbmQgb2YgdGhlIG5ldyBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3Qgd2hvc2UgY29udGVudHMgd2lsbCBiZSBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBvdXRwdXRcbiAgICAgKiAgICAgICAgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBjb250ZW50cyBvZiB0aGUgb2xkIGxpc3QgZm9sbG93ZWQgYnkgYGVsYC5cbiAgICAgKiBAc2VlIFIucHJlcGVuZFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYXBwZW5kKCd0ZXN0cycsIFsnd3JpdGUnLCAnbW9yZSddKTsgLy89PiBbJ3dyaXRlJywgJ21vcmUnLCAndGVzdHMnXVxuICAgICAqICAgICAgUi5hcHBlbmQoJ3Rlc3RzJywgW10pOyAvLz0+IFsndGVzdHMnXVxuICAgICAqICAgICAgUi5hcHBlbmQoWyd0ZXN0cyddLCBbJ3dyaXRlJywgJ21vcmUnXSk7IC8vPT4gWyd3cml0ZScsICdtb3JlJywgWyd0ZXN0cyddXVxuICAgICAqL1xuICAgIHZhciBhcHBlbmQgPSBfY3VycnkyKGZ1bmN0aW9uIGFwcGVuZChlbCwgbGlzdCkge1xuICAgICAgICByZXR1cm4gX2NvbmNhdChsaXN0LCBbZWxdKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgZnVuY3Rpb24gYGZuYCB0byB0aGUgYXJndW1lbnQgbGlzdCBgYXJnc2AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICAgICAqIGNyZWF0aW5nIGEgZml4ZWQtYXJpdHkgZnVuY3Rpb24gZnJvbSBhIHZhcmlhZGljIGZ1bmN0aW9uLiBgZm5gIHNob3VsZCBiZSBhXG4gICAgICogYm91bmQgZnVuY3Rpb24gaWYgY29udGV4dCBpcyBzaWduaWZpY2FudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNy4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKi4uLiAtPiBhKSAtPiBbKl0gLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJnc1xuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLmNhbGwsIFIudW5hcHBseVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBudW1zID0gWzEsIDIsIDMsIC05OSwgNDIsIDYsIDddO1xuICAgICAqICAgICAgUi5hcHBseShNYXRoLm1heCwgbnVtcyk7IC8vPT4gNDJcbiAgICAgKi9cbiAgICB2YXIgYXBwbHkgPSBfY3VycnkyKGZ1bmN0aW9uIGFwcGx5KGZuLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgc2hhbGxvdyBjbG9uZSBvZiBhbiBvYmplY3QsIHNldHRpbmcgb3Igb3ZlcnJpZGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogcHJvcGVydHkgd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuIE5vdGUgdGhhdCB0aGlzIGNvcGllcyBhbmQgZmxhdHRlbnMgcHJvdG90eXBlXG4gICAgICogcHJvcGVydGllcyBvbnRvIHRoZSBuZXcgb2JqZWN0IGFzIHdlbGwuIEFsbCBub24tcHJpbWl0aXZlIHByb3BlcnRpZXMgYXJlXG4gICAgICogY29waWVkIGJ5IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgU3RyaW5nIC0+IGEgLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wIHRoZSBwcm9wZXJ0eSBuYW1lIHRvIHNldFxuICAgICAqIEBwYXJhbSB7Kn0gdmFsIHRoZSBuZXcgdmFsdWVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIHRoZSBvYmplY3QgdG8gY2xvbmVcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGEgbmV3IG9iamVjdCBzaW1pbGFyIHRvIHRoZSBvcmlnaW5hbCBleGNlcHQgZm9yIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkuXG4gICAgICogQHNlZSBSLmRpc3NvY1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYXNzb2MoJ2MnLCAzLCB7YTogMSwgYjogMn0pOyAvLz0+IHthOiAxLCBiOiAyLCBjOiAzfVxuICAgICAqL1xuICAgIHZhciBhc3NvYyA9IF9jdXJyeTMoZnVuY3Rpb24gYXNzb2MocHJvcCwgdmFsLCBvYmopIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwIGluIG9iaikge1xuICAgICAgICAgICAgcmVzdWx0W3BdID0gb2JqW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdFtwcm9wXSA9IHZhbDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgc2hhbGxvdyBjbG9uZSBvZiBhbiBvYmplY3QsIHNldHRpbmcgb3Igb3ZlcnJpZGluZyB0aGUgbm9kZXMgcmVxdWlyZWRcbiAgICAgKiB0byBjcmVhdGUgdGhlIGdpdmVuIHBhdGgsIGFuZCBwbGFjaW5nIHRoZSBzcGVjaWZpYyB2YWx1ZSBhdCB0aGUgdGFpbCBlbmQgb2ZcbiAgICAgKiB0aGF0IHBhdGguIE5vdGUgdGhhdCB0aGlzIGNvcGllcyBhbmQgZmxhdHRlbnMgcHJvdG90eXBlIHByb3BlcnRpZXMgb250byB0aGVcbiAgICAgKiBuZXcgb2JqZWN0IGFzIHdlbGwuIEFsbCBub24tcHJpbWl0aXZlIHByb3BlcnRpZXMgYXJlIGNvcGllZCBieSByZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjguMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFtTdHJpbmddIC0+IGEgLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhdGggdGhlIHBhdGggdG8gc2V0XG4gICAgICogQHBhcmFtIHsqfSB2YWwgdGhlIG5ldyB2YWx1ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogdGhlIG9iamVjdCB0byBjbG9uZVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gYSBuZXcgb2JqZWN0IHNpbWlsYXIgdG8gdGhlIG9yaWdpbmFsIGV4Y2VwdCBhbG9uZyB0aGUgc3BlY2lmaWVkIHBhdGguXG4gICAgICogQHNlZSBSLmRpc3NvY1BhdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmFzc29jUGF0aChbJ2EnLCAnYicsICdjJ10sIDQyLCB7YToge2I6IHtjOiAwfX19KTsgLy89PiB7YToge2I6IHtjOiA0Mn19fVxuICAgICAqL1xuICAgIHZhciBhc3NvY1BhdGggPSBfY3VycnkzKGZ1bmN0aW9uIGFzc29jUGF0aChwYXRoLCB2YWwsIG9iaikge1xuICAgICAgICBzd2l0Y2ggKHBhdGgubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBhc3NvYyhwYXRoWzBdLCB2YWwsIG9iaik7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gYXNzb2MocGF0aFswXSwgYXNzb2NQYXRoKF9zbGljZShwYXRoLCAxKSwgdmFsLCBPYmplY3Qob2JqW3BhdGhbMF1dKSksIG9iaik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGlzIGJvdW5kIHRvIGEgY29udGV4dC5cbiAgICAgKiBOb3RlOiBgUi5iaW5kYCBkb2VzIG5vdCBwcm92aWRlIHRoZSBhZGRpdGlvbmFsIGFyZ3VtZW50LWJpbmRpbmcgY2FwYWJpbGl0aWVzIG9mXG4gICAgICogW0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9GdW5jdGlvbi9iaW5kKS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNi4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgKCogLT4gKikgLT4geyp9IC0+ICgqIC0+ICopXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGJpbmQgdG8gY29udGV4dFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzT2JqIFRoZSBjb250ZXh0IHRvIGJpbmQgYGZuYCB0b1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBleGVjdXRlIGluIHRoZSBjb250ZXh0IG9mIGB0aGlzT2JqYC5cbiAgICAgKiBAc2VlIFIucGFydGlhbFxuICAgICAqL1xuICAgIHZhciBiaW5kID0gX2N1cnJ5MihmdW5jdGlvbiBiaW5kKGZuLCB0aGlzT2JqKSB7XG4gICAgICAgIHJldHVybiBfYXJpdHkoZm4ubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpc09iaiwgYXJndW1lbnRzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXN0cmljdHMgYSBudW1iZXIgdG8gYmUgd2l0aGluIGEgcmFuZ2UuXG4gICAgICpcbiAgICAgKiBBbHNvIHdvcmtzIGZvciBvdGhlciBvcmRlcmVkIHR5cGVzIHN1Y2ggYXMgU3RyaW5ncyBhbmQgRGF0ZXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIwLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBhID0+IGEgLT4gYSAtPiBhIC0+IGFcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbWluaW11bSBudW1iZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbWF4aW11bSBudW1iZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgdG8gYmUgY2xhbXBlZFxuICAgICAqIEByZXR1cm4ge051bWJlcn0gUmV0dXJucyB0aGUgY2xhbXBlZCB2YWx1ZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuY2xhbXAoMSwgMTAsIC0xKSAvLyA9PiAxXG4gICAgICogICAgICBSLmNsYW1wKDEsIDEwLCAxMSkgLy8gPT4gMTBcbiAgICAgKiAgICAgIFIuY2xhbXAoMSwgMTAsIDQpICAvLyA9PiA0XG4gICAgICovXG4gICAgdmFyIGNsYW1wID0gX2N1cnJ5MyhmdW5jdGlvbiBjbGFtcChtaW4sIG1heCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG1pbiA+IG1heCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtaW4gbXVzdCBub3QgYmUgZ3JlYXRlciB0aGFuIG1heCBpbiBjbGFtcChtaW4sIG1heCwgdmFsdWUpJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgbWluID8gbWluIDogdmFsdWUgPiBtYXggPyBtYXggOiB2YWx1ZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgY29tcGFyYXRvciBmdW5jdGlvbiBvdXQgb2YgYSBmdW5jdGlvbiB0aGF0IHJlcG9ydHMgd2hldGhlciB0aGUgZmlyc3RcbiAgICAgKiBlbGVtZW50IGlzIGxlc3MgdGhhbiB0aGUgc2Vjb25kLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIChhLCBiIC0+IEJvb2xlYW4pIC0+IChhLCBiIC0+IE51bWJlcilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIEEgcHJlZGljYXRlIGZ1bmN0aW9uIG9mIGFyaXR5IHR3by5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBGdW5jdGlvbiA6OiBhIC0+IGIgLT4gSW50IHRoYXQgcmV0dXJucyBgLTFgIGlmIGEgPCBiLCBgMWAgaWYgYiA8IGEsIG90aGVyd2lzZSBgMGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGNtcCA9IFIuY29tcGFyYXRvcigoYSwgYikgPT4gYS5hZ2UgPCBiLmFnZSk7XG4gICAgICogICAgICB2YXIgcGVvcGxlID0gW1xuICAgICAqICAgICAgICAvLyAuLi5cbiAgICAgKiAgICAgIF07XG4gICAgICogICAgICBSLnNvcnQoY21wLCBwZW9wbGUpO1xuICAgICAqL1xuICAgIHZhciBjb21wYXJhdG9yID0gX2N1cnJ5MShmdW5jdGlvbiBjb21wYXJhdG9yKHByZWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJlZChhLCBiKSA/IC0xIDogcHJlZChiLCBhKSA/IDEgOiAwO1xuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGN1cnJpZWQgZXF1aXZhbGVudCBvZiB0aGUgcHJvdmlkZWQgZnVuY3Rpb24sIHdpdGggdGhlIHNwZWNpZmllZFxuICAgICAqIGFyaXR5LiBUaGUgY3VycmllZCBmdW5jdGlvbiBoYXMgdHdvIHVudXN1YWwgY2FwYWJpbGl0aWVzLiBGaXJzdCwgaXRzXG4gICAgICogYXJndW1lbnRzIG5lZWRuJ3QgYmUgcHJvdmlkZWQgb25lIGF0IGEgdGltZS4gSWYgYGdgIGlzIGBSLmN1cnJ5TigzLCBmKWAsIHRoZVxuICAgICAqIGZvbGxvd2luZyBhcmUgZXF1aXZhbGVudDpcbiAgICAgKlxuICAgICAqICAgLSBgZygxKSgyKSgzKWBcbiAgICAgKiAgIC0gYGcoMSkoMiwgMylgXG4gICAgICogICAtIGBnKDEsIDIpKDMpYFxuICAgICAqICAgLSBgZygxLCAyLCAzKWBcbiAgICAgKlxuICAgICAqIFNlY29uZGx5LCB0aGUgc3BlY2lhbCBwbGFjZWhvbGRlciB2YWx1ZSBgUi5fX2AgbWF5IGJlIHVzZWQgdG8gc3BlY2lmeVxuICAgICAqIFwiZ2Fwc1wiLCBhbGxvd2luZyBwYXJ0aWFsIGFwcGxpY2F0aW9uIG9mIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMsXG4gICAgICogcmVnYXJkbGVzcyBvZiB0aGVpciBwb3NpdGlvbnMuIElmIGBnYCBpcyBhcyBhYm92ZSBhbmQgYF9gIGlzIGBSLl9fYCwgdGhlXG4gICAgICogZm9sbG93aW5nIGFyZSBlcXVpdmFsZW50OlxuICAgICAqXG4gICAgICogICAtIGBnKDEsIDIsIDMpYFxuICAgICAqICAgLSBgZyhfLCAyLCAzKSgxKWBcbiAgICAgKiAgIC0gYGcoXywgXywgMykoMSkoMilgXG4gICAgICogICAtIGBnKF8sIF8sIDMpKDEsIDIpYFxuICAgICAqICAgLSBgZyhfLCAyKSgxKSgzKWBcbiAgICAgKiAgIC0gYGcoXywgMikoMSwgMylgXG4gICAgICogICAtIGBnKF8sIDIpKF8sIDMpKDEpYFxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC41LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIE51bWJlciAtPiAoKiAtPiBhKSAtPiAoKiAtPiBhKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGggVGhlIGFyaXR5IGZvciB0aGUgcmV0dXJuZWQgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGN1cnJ5LlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldywgY3VycmllZCBmdW5jdGlvbi5cbiAgICAgKiBAc2VlIFIuY3VycnlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgc3VtQXJncyA9ICguLi5hcmdzKSA9PiBSLnN1bShhcmdzKTtcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGN1cnJpZWRBZGRGb3VyTnVtYmVycyA9IFIuY3VycnlOKDQsIHN1bUFyZ3MpO1xuICAgICAqICAgICAgdmFyIGYgPSBjdXJyaWVkQWRkRm91ck51bWJlcnMoMSwgMik7XG4gICAgICogICAgICB2YXIgZyA9IGYoMyk7XG4gICAgICogICAgICBnKDQpOyAvLz0+IDEwXG4gICAgICovXG4gICAgdmFyIGN1cnJ5TiA9IF9jdXJyeTIoZnVuY3Rpb24gY3VycnlOKGxlbmd0aCwgZm4pIHtcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIF9jdXJyeTEoZm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfYXJpdHkobGVuZ3RoLCBfY3VycnlOKGxlbmd0aCwgW10sIGZuKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBEZWNyZW1lbnRzIGl0cyBhcmd1bWVudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiBAc2VlIFIuaW5jXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5kZWMoNDIpOyAvLz0+IDQxXG4gICAgICovXG4gICAgdmFyIGRlYyA9IGFkZCgtMSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzZWNvbmQgYXJndW1lbnQgaWYgaXQgaXMgbm90IGBudWxsYCwgYHVuZGVmaW5lZGAgb3IgYE5hTmBcbiAgICAgKiBvdGhlcndpc2UgdGhlIGZpcnN0IGFyZ3VtZW50IGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMC4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyBhIC0+IGIgLT4gYSB8IGJcbiAgICAgKiBAcGFyYW0ge2F9IHZhbCBUaGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge2J9IHZhbCBUaGUgdmFsdWUgdG8gcmV0dXJuIGlmIGl0IGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAqIEByZXR1cm4geyp9IFRoZSB0aGUgc2Vjb25kIHZhbHVlIG9yIHRoZSBkZWZhdWx0IHZhbHVlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGRlZmF1bHRUbzQyID0gUi5kZWZhdWx0VG8oNDIpO1xuICAgICAqXG4gICAgICogICAgICBkZWZhdWx0VG80MihudWxsKTsgIC8vPT4gNDJcbiAgICAgKiAgICAgIGRlZmF1bHRUbzQyKHVuZGVmaW5lZCk7ICAvLz0+IDQyXG4gICAgICogICAgICBkZWZhdWx0VG80MignUmFtZGEnKTsgIC8vPT4gJ1JhbWRhJ1xuICAgICAqICAgICAgZGVmYXVsdFRvNDIocGFyc2VJbnQoJ3N0cmluZycpKTsgLy89PiA0MlxuICAgICAqL1xuICAgIHZhciBkZWZhdWx0VG8gPSBfY3VycnkyKGZ1bmN0aW9uIGRlZmF1bHRUbyhkLCB2KSB7XG4gICAgICAgIHJldHVybiB2ID09IG51bGwgfHwgdiAhPT0gdiA/IGQgOiB2O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIHNldCAoaS5lLiBubyBkdXBsaWNhdGVzKSBvZiBhbGwgZWxlbWVudHMgaW4gdGhlIGZpcnN0IGxpc3Qgbm90XG4gICAgICogY29udGFpbmVkIGluIHRoZSBzZWNvbmQgbGlzdC4gRHVwbGljYXRpb24gaXMgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gdGhlXG4gICAgICogdmFsdWUgcmV0dXJuZWQgYnkgYXBwbHlpbmcgdGhlIHN1cHBsaWVkIHByZWRpY2F0ZSB0byB0d28gbGlzdCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyAoYSAtPiBhIC0+IEJvb2xlYW4pIC0+IFsqXSAtPiBbKl0gLT4gWypdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSB1c2VkIHRvIHRlc3Qgd2hldGhlciB0d28gaXRlbXMgYXJlIGVxdWFsLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBzZWNvbmQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGVsZW1lbnRzIGluIGBsaXN0MWAgdGhhdCBhcmUgbm90IGluIGBsaXN0MmAuXG4gICAgICogQHNlZSBSLmRpZmZlcmVuY2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgY21wID0gKHgsIHkpID0+IHguYSA9PT0geS5hO1xuICAgICAqICAgICAgdmFyIGwxID0gW3thOiAxfSwge2E6IDJ9LCB7YTogM31dO1xuICAgICAqICAgICAgdmFyIGwyID0gW3thOiAzfSwge2E6IDR9XTtcbiAgICAgKiAgICAgIFIuZGlmZmVyZW5jZVdpdGgoY21wLCBsMSwgbDIpOyAvLz0+IFt7YTogMX0sIHthOiAyfV1cbiAgICAgKi9cbiAgICB2YXIgZGlmZmVyZW5jZVdpdGggPSBfY3VycnkzKGZ1bmN0aW9uIGRpZmZlcmVuY2VXaXRoKHByZWQsIGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGZpcnN0TGVuID0gZmlyc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgZmlyc3RMZW4pIHtcbiAgICAgICAgICAgIGlmICghX2NvbnRhaW5zV2l0aChwcmVkLCBmaXJzdFtpZHhdLCBzZWNvbmQpICYmICFfY29udGFpbnNXaXRoKHByZWQsIGZpcnN0W2lkeF0sIG91dCkpIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChmaXJzdFtpZHhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB0aGF0IGRvZXMgbm90IGNvbnRhaW4gYSBgcHJvcGAgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBTdHJpbmcgLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wIHRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBkaXNzb2NpYXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiB0aGUgb2JqZWN0IHRvIGNsb25lXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBhIG5ldyBvYmplY3Qgc2ltaWxhciB0byB0aGUgb3JpZ2luYWwgYnV0IHdpdGhvdXQgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eVxuICAgICAqIEBzZWUgUi5hc3NvY1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZGlzc29jKCdiJywge2E6IDEsIGI6IDIsIGM6IDN9KTsgLy89PiB7YTogMSwgYzogM31cbiAgICAgKi9cbiAgICB2YXIgZGlzc29jID0gX2N1cnJ5MihmdW5jdGlvbiBkaXNzb2MocHJvcCwgb2JqKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChwICE9PSBwcm9wKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W3BdID0gb2JqW3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIHNoYWxsb3cgY2xvbmUgb2YgYW4gb2JqZWN0LCBvbWl0dGluZyB0aGUgcHJvcGVydHkgYXQgdGhlIGdpdmVuIHBhdGguXG4gICAgICogTm90ZSB0aGF0IHRoaXMgY29waWVzIGFuZCBmbGF0dGVucyBwcm90b3R5cGUgcHJvcGVydGllcyBvbnRvIHRoZSBuZXcgb2JqZWN0XG4gICAgICogYXMgd2VsbC4gQWxsIG5vbi1wcmltaXRpdmUgcHJvcGVydGllcyBhcmUgY29waWVkIGJ5IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFtTdHJpbmddIC0+IHtrOiB2fSAtPiB7azogdn1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXRoIHRoZSBwYXRoIHRvIHNldFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogdGhlIG9iamVjdCB0byBjbG9uZVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gYSBuZXcgb2JqZWN0IHdpdGhvdXQgdGhlIHByb3BlcnR5IGF0IHBhdGhcbiAgICAgKiBAc2VlIFIuYXNzb2NQYXRoXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5kaXNzb2NQYXRoKFsnYScsICdiJywgJ2MnXSwge2E6IHtiOiB7YzogNDJ9fX0pOyAvLz0+IHthOiB7Yjoge319fVxuICAgICAqL1xuICAgIHZhciBkaXNzb2NQYXRoID0gX2N1cnJ5MihmdW5jdGlvbiBkaXNzb2NQYXRoKHBhdGgsIG9iaikge1xuICAgICAgICBzd2l0Y2ggKHBhdGgubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBkaXNzb2MocGF0aFswXSwgb2JqKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHZhciBoZWFkID0gcGF0aFswXTtcbiAgICAgICAgICAgIHZhciB0YWlsID0gX3NsaWNlKHBhdGgsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIG9ialtoZWFkXSA9PSBudWxsID8gb2JqIDogYXNzb2MoaGVhZCwgZGlzc29jUGF0aCh0YWlsLCBvYmpbaGVhZF0pLCBvYmopO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBEaXZpZGVzIHR3byBudW1iZXJzLiBFcXVpdmFsZW50IHRvIGBhIC8gYmAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhIFRoZSBmaXJzdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYiBUaGUgc2Vjb25kIHZhbHVlLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIHJlc3VsdCBvZiBgYSAvIGJgLlxuICAgICAqIEBzZWUgUi5tdWx0aXBseVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZGl2aWRlKDcxLCAxMDApOyAvLz0+IDAuNzFcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGhhbGYgPSBSLmRpdmlkZShSLl9fLCAyKTtcbiAgICAgKiAgICAgIGhhbGYoNDIpOyAvLz0+IDIxXG4gICAgICpcbiAgICAgKiAgICAgIHZhciByZWNpcHJvY2FsID0gUi5kaXZpZGUoMSk7XG4gICAgICogICAgICByZWNpcHJvY2FsKDQpOyAgIC8vPT4gMC4yNVxuICAgICAqL1xuICAgIHZhciBkaXZpZGUgPSBfY3VycnkyKGZ1bmN0aW9uIGRpdmlkZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIC8gYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBsYXN0IGBuYCBlbGVtZW50cyBvZiBhIGdpdmVuIGxpc3QsIHBhc3NpbmdcbiAgICAgKiBlYWNoIHZhbHVlIHRvIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgZnVuY3Rpb24sIHNraXBwaW5nIGVsZW1lbnRzIHdoaWxlIHRoZVxuICAgICAqIHByZWRpY2F0ZSBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYC4gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiBpcyBwYXNzZWQgb25lXG4gICAgICogYXJndW1lbnQ6ICoodmFsdWUpKi5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBkcm9wV2hpbGVgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgYXJyYXkuXG4gICAgICogQHNlZSBSLnRha2VXaGlsZSwgUi50cmFuc2R1Y2UsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbHRlVHdvID0geCA9PiB4IDw9IDI7XG4gICAgICpcbiAgICAgKiAgICAgIFIuZHJvcFdoaWxlKGx0ZVR3bywgWzEsIDIsIDMsIDQsIDMsIDIsIDFdKTsgLy89PiBbMywgNCwgMywgMiwgMV1cbiAgICAgKi9cbiAgICB2YXIgZHJvcFdoaWxlID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdkcm9wV2hpbGUnLCBfeGRyb3BXaGlsZSwgZnVuY3Rpb24gZHJvcFdoaWxlKHByZWQsIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbiAmJiBwcmVkKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCwgaWR4KTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBlbXB0eSB2YWx1ZSBvZiBpdHMgYXJndW1lbnQncyB0eXBlLiBSYW1kYSBkZWZpbmVzIHRoZSBlbXB0eVxuICAgICAqIHZhbHVlIG9mIEFycmF5IChgW11gKSwgT2JqZWN0IChge31gKSwgU3RyaW5nIChgJydgKSwgYW5kIEFyZ3VtZW50cy4gT3RoZXJcbiAgICAgKiB0eXBlcyBhcmUgc3VwcG9ydGVkIGlmIHRoZXkgZGVmaW5lIGA8VHlwZT4uZW1wdHlgIGFuZC9vclxuICAgICAqIGA8VHlwZT4ucHJvdG90eXBlLmVtcHR5YC5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBlbXB0eWAgbWV0aG9kIG9mIHRoZSBmaXJzdCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBhIC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZW1wdHkoSnVzdCg0MikpOyAgICAgIC8vPT4gTm90aGluZygpXG4gICAgICogICAgICBSLmVtcHR5KFsxLCAyLCAzXSk7ICAgICAvLz0+IFtdXG4gICAgICogICAgICBSLmVtcHR5KCd1bmljb3JucycpOyAgICAvLz0+ICcnXG4gICAgICogICAgICBSLmVtcHR5KHt4OiAxLCB5OiAyfSk7ICAvLz0+IHt9XG4gICAgICovXG4gICAgLy8gZWxzZVxuICAgIHZhciBlbXB0eSA9IF9jdXJyeTEoZnVuY3Rpb24gZW1wdHkoeCkge1xuICAgICAgICByZXR1cm4geCAhPSBudWxsICYmIHR5cGVvZiB4LmVtcHR5ID09PSAnZnVuY3Rpb24nID8geC5lbXB0eSgpIDogeCAhPSBudWxsICYmIHguY29uc3RydWN0b3IgIT0gbnVsbCAmJiB0eXBlb2YgeC5jb25zdHJ1Y3Rvci5lbXB0eSA9PT0gJ2Z1bmN0aW9uJyA/IHguY29uc3RydWN0b3IuZW1wdHkoKSA6IF9pc0FycmF5KHgpID8gW10gOiBfaXNTdHJpbmcoeCkgPyAnJyA6IF9pc09iamVjdCh4KSA/IHt9IDogX2lzQXJndW1lbnRzKHgpID8gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cztcbiAgICAgICAgfSgpIDogLy8gZWxzZVxuICAgICAgICB2b2lkIDA7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG9iamVjdCBieSByZWN1cnNpdmVseSBldm9sdmluZyBhIHNoYWxsb3cgY29weSBvZiBgb2JqZWN0YCxcbiAgICAgKiBhY2NvcmRpbmcgdG8gdGhlIGB0cmFuc2Zvcm1hdGlvbmAgZnVuY3Rpb25zLiBBbGwgbm9uLXByaW1pdGl2ZSBwcm9wZXJ0aWVzXG4gICAgICogYXJlIGNvcGllZCBieSByZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBBIGB0cmFuc2Zvcm1hdGlvbmAgZnVuY3Rpb24gd2lsbCBub3QgYmUgaW52b2tlZCBpZiBpdHMgY29ycmVzcG9uZGluZyBrZXlcbiAgICAgKiBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZXZvbHZlZCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtrOiAodiAtPiB2KX0gLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0cmFuc2Zvcm1hdGlvbnMgVGhlIG9iamVjdCBzcGVjaWZ5aW5nIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucyB0byBhcHBseVxuICAgICAqICAgICAgICB0byB0aGUgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBiZSB0cmFuc2Zvcm1lZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSB0cmFuc2Zvcm1lZCBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRvbWF0byAgPSB7Zmlyc3ROYW1lOiAnICBUb21hdG8gJywgZGF0YToge2VsYXBzZWQ6IDEwMCwgcmVtYWluaW5nOiAxNDAwfSwgaWQ6MTIzfTtcbiAgICAgKiAgICAgIHZhciB0cmFuc2Zvcm1hdGlvbnMgPSB7XG4gICAgICogICAgICAgIGZpcnN0TmFtZTogUi50cmltLFxuICAgICAqICAgICAgICBsYXN0TmFtZTogUi50cmltLCAvLyBXaWxsIG5vdCBnZXQgaW52b2tlZC5cbiAgICAgKiAgICAgICAgZGF0YToge2VsYXBzZWQ6IFIuYWRkKDEpLCByZW1haW5pbmc6IFIuYWRkKC0xKX1cbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICBSLmV2b2x2ZSh0cmFuc2Zvcm1hdGlvbnMsIHRvbWF0byk7IC8vPT4ge2ZpcnN0TmFtZTogJ1RvbWF0bycsIGRhdGE6IHtlbGFwc2VkOiAxMDEsIHJlbWFpbmluZzogMTM5OX0sIGlkOjEyM31cbiAgICAgKi9cbiAgICB2YXIgZXZvbHZlID0gX2N1cnJ5MihmdW5jdGlvbiBldm9sdmUodHJhbnNmb3JtYXRpb25zLCBvYmplY3QpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgdHJhbnNmb3JtYXRpb24sIGtleSwgdHlwZTtcbiAgICAgICAgZm9yIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1hdGlvbiA9IHRyYW5zZm9ybWF0aW9uc1trZXldO1xuICAgICAgICAgICAgdHlwZSA9IHR5cGVvZiB0cmFuc2Zvcm1hdGlvbjtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdHlwZSA9PT0gJ2Z1bmN0aW9uJyA/IHRyYW5zZm9ybWF0aW9uKG9iamVjdFtrZXldKSA6IHR5cGUgPT09ICdvYmplY3QnID8gZXZvbHZlKHRyYW5zZm9ybWF0aW9uc1trZXldLCBvYmplY3Rba2V5XSkgOiBvYmplY3Rba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgbGlzdCB3aGljaCBtYXRjaGVzIHRoZSBwcmVkaWNhdGUsIG9yXG4gICAgICogYHVuZGVmaW5lZGAgaWYgbm8gZWxlbWVudCBtYXRjaGVzLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGZpbmRgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IGEgfCB1bmRlZmluZWRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBlbGVtZW50IGlzIHRoZVxuICAgICAqICAgICAgICBkZXNpcmVkIG9uZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBlbGVtZW50IGZvdW5kLCBvciBgdW5kZWZpbmVkYC5cbiAgICAgKiBAc2VlIFIudHJhbnNkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHhzID0gW3thOiAxfSwge2E6IDJ9LCB7YTogM31dO1xuICAgICAqICAgICAgUi5maW5kKFIucHJvcEVxKCdhJywgMikpKHhzKTsgLy89PiB7YTogMn1cbiAgICAgKiAgICAgIFIuZmluZChSLnByb3BFcSgnYScsIDQpKSh4cyk7IC8vPT4gdW5kZWZpbmVkXG4gICAgICovXG4gICAgdmFyIGZpbmQgPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2ZpbmQnLCBfeGZpbmQsIGZ1bmN0aW9uIGZpbmQoZm4sIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGZuKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdFtpZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgbGlzdCB3aGljaCBtYXRjaGVzIHRoZVxuICAgICAqIHByZWRpY2F0ZSwgb3IgYC0xYCBpZiBubyBlbGVtZW50IG1hdGNoZXMuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZmluZEluZGV4YCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4xXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBlbGVtZW50IGlzIHRoZVxuICAgICAqIGRlc2lyZWQgb25lLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGZvdW5kLCBvciBgLTFgLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgeHMgPSBbe2E6IDF9LCB7YTogMn0sIHthOiAzfV07XG4gICAgICogICAgICBSLmZpbmRJbmRleChSLnByb3BFcSgnYScsIDIpKSh4cyk7IC8vPT4gMVxuICAgICAqICAgICAgUi5maW5kSW5kZXgoUi5wcm9wRXEoJ2EnLCA0KSkoeHMpOyAvLz0+IC0xXG4gICAgICovXG4gICAgdmFyIGZpbmRJbmRleCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZmluZEluZGV4JywgX3hmaW5kSW5kZXgsIGZ1bmN0aW9uIGZpbmRJbmRleChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoZm4obGlzdFtpZHhdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBsaXN0IHdoaWNoIG1hdGNoZXMgdGhlIHByZWRpY2F0ZSwgb3JcbiAgICAgKiBgdW5kZWZpbmVkYCBpZiBubyBlbGVtZW50IG1hdGNoZXMuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZmluZExhc3RgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjFcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IGEgfCB1bmRlZmluZWRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBlbGVtZW50IGlzIHRoZVxuICAgICAqIGRlc2lyZWQgb25lLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIGVsZW1lbnQgZm91bmQsIG9yIGB1bmRlZmluZWRgLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgeHMgPSBbe2E6IDEsIGI6IDB9LCB7YToxLCBiOiAxfV07XG4gICAgICogICAgICBSLmZpbmRMYXN0KFIucHJvcEVxKCdhJywgMSkpKHhzKTsgLy89PiB7YTogMSwgYjogMX1cbiAgICAgKiAgICAgIFIuZmluZExhc3QoUi5wcm9wRXEoJ2EnLCA0KSkoeHMpOyAvLz0+IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHZhciBmaW5kTGFzdCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZmluZExhc3QnLCBfeGZpbmRMYXN0LCBmdW5jdGlvbiBmaW5kTGFzdChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICB3aGlsZSAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIGlmIChmbihsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RbaWR4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICB9XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgbGlzdCB3aGljaCBtYXRjaGVzIHRoZVxuICAgICAqIHByZWRpY2F0ZSwgb3IgYC0xYCBpZiBubyBlbGVtZW50IG1hdGNoZXMuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZmluZExhc3RJbmRleGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMVxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiB1c2VkIHRvIGRldGVybWluZSBpZiB0aGUgZWxlbWVudCBpcyB0aGVcbiAgICAgKiBkZXNpcmVkIG9uZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgZWxlbWVudCBmb3VuZCwgb3IgYC0xYC5cbiAgICAgKiBAc2VlIFIudHJhbnNkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHhzID0gW3thOiAxLCBiOiAwfSwge2E6MSwgYjogMX1dO1xuICAgICAqICAgICAgUi5maW5kTGFzdEluZGV4KFIucHJvcEVxKCdhJywgMSkpKHhzKTsgLy89PiAxXG4gICAgICogICAgICBSLmZpbmRMYXN0SW5kZXgoUi5wcm9wRXEoJ2EnLCA0KSkoeHMpOyAvLz0+IC0xXG4gICAgICovXG4gICAgdmFyIGZpbmRMYXN0SW5kZXggPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2ZpbmRMYXN0SW5kZXgnLCBfeGZpbmRMYXN0SW5kZXgsIGZ1bmN0aW9uIGZpbmRMYXN0SW5kZXgoZm4sIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IGxpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgd2hpbGUgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICBpZiAoZm4obGlzdFtpZHhdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZSBvdmVyIGFuIGlucHV0IGBsaXN0YCwgY2FsbGluZyBhIHByb3ZpZGVkIGZ1bmN0aW9uIGBmbmAgZm9yIGVhY2hcbiAgICAgKiBlbGVtZW50IGluIHRoZSBsaXN0LlxuICAgICAqXG4gICAgICogYGZuYCByZWNlaXZlcyBvbmUgYXJndW1lbnQ6ICoodmFsdWUpKi5cbiAgICAgKlxuICAgICAqIE5vdGU6IGBSLmZvckVhY2hgIGRvZXMgbm90IHNraXAgZGVsZXRlZCBvciB1bmFzc2lnbmVkIGluZGljZXMgKHNwYXJzZVxuICAgICAqIGFycmF5cyksIHVubGlrZSB0aGUgbmF0aXZlIGBBcnJheS5wcm90b3R5cGUuZm9yRWFjaGAgbWV0aG9kLiBGb3IgbW9yZVxuICAgICAqIGRldGFpbHMgb24gdGhpcyBiZWhhdmlvciwgc2VlOlxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2ZvckVhY2gjRGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIEFsc28gbm90ZSB0aGF0LCB1bmxpa2UgYEFycmF5LnByb3RvdHlwZS5mb3JFYWNoYCwgUmFtZGEncyBgZm9yRWFjaGAgcmV0dXJuc1xuICAgICAqIHRoZSBvcmlnaW5hbCBhcnJheS4gSW4gc29tZSBsaWJyYXJpZXMgdGhpcyBmdW5jdGlvbiBpcyBuYW1lZCBgZWFjaGAuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZm9yRWFjaGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMVxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiAqKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGludm9rZS4gUmVjZWl2ZXMgb25lIGFyZ3VtZW50LCBgdmFsdWVgLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgb3JpZ2luYWwgbGlzdC5cbiAgICAgKiBAc2VlIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgcHJpbnRYUGx1c0ZpdmUgPSB4ID0+IGNvbnNvbGUubG9nKHggKyA1KTtcbiAgICAgKiAgICAgIFIuZm9yRWFjaChwcmludFhQbHVzRml2ZSwgWzEsIDIsIDNdKTsgLy89PiBbMSwgMiwgM11cbiAgICAgKiAgICAgIC8vLT4gNlxuICAgICAqICAgICAgLy8tPiA3XG4gICAgICogICAgICAvLy0+IDhcbiAgICAgKi9cbiAgICB2YXIgZm9yRWFjaCA9IF9jdXJyeTIoX2NoZWNrRm9yTWV0aG9kKCdmb3JFYWNoJywgZnVuY3Rpb24gZm9yRWFjaChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBmbihsaXN0W2lkeF0pO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgb3V0IG9mIGEgbGlzdCBrZXktdmFsdWUgcGFpcnMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbW2ssdl1dIC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhaXJzIEFuIGFycmF5IG9mIHR3by1lbGVtZW50IGFycmF5cyB0aGF0IHdpbGwgYmUgdGhlIGtleXMgYW5kIHZhbHVlcyBvZiB0aGUgb3V0cHV0IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBvYmplY3QgbWFkZSBieSBwYWlyaW5nIHVwIGBrZXlzYCBhbmQgYHZhbHVlc2AuXG4gICAgICogQHNlZSBSLnRvUGFpcnMsIFIucGFpclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZnJvbVBhaXJzKFtbJ2EnLCAxXSwgWydiJywgMl0sICBbJ2MnLCAzXV0pOyAvLz0+IHthOiAxLCBiOiAyLCBjOiAzfVxuICAgICAqL1xuICAgIHZhciBmcm9tUGFpcnMgPSBfY3VycnkxKGZ1bmN0aW9uIGZyb21QYWlycyhwYWlycykge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IHBhaXJzLmxlbmd0aDtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoX2lzQXJyYXkocGFpcnNbaWR4XSkgJiYgcGFpcnNbaWR4XS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvdXRbcGFpcnNbaWR4XVswXV0gPSBwYWlyc1tpZHhdWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgbGlzdCBhbmQgcmV0dXJucyBhIGxpc3Qgb2YgbGlzdHMgd2hlcmUgZWFjaCBzdWJsaXN0J3MgZWxlbWVudHMgYXJlXG4gICAgICogYWxsIFwiZXF1YWxcIiBhY2NvcmRpbmcgdG8gdGhlIHByb3ZpZGVkIGVxdWFsaXR5IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhLCBhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBbW2FdXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHR3byBnaXZlbiAoYWRqYWNlbnQpXG4gICAgICogICAgICAgIGVsZW1lbnRzIHNob3VsZCBiZSBpbiB0aGUgc2FtZSBncm91cFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGdyb3VwLiBBbHNvIGFjY2VwdHMgYSBzdHJpbmcsIHdoaWNoIHdpbGwgYmVcbiAgICAgKiAgICAgICAgdHJlYXRlZCBhcyBhIGxpc3Qgb2YgY2hhcmFjdGVycy5cbiAgICAgKiBAcmV0dXJuIHtMaXN0fSBBIGxpc3QgdGhhdCBjb250YWlucyBzdWJsaXN0cyBvZiBlcXVhbCBlbGVtZW50cyxcbiAgICAgKiAgICAgICAgIHdob3NlIGNvbmNhdGVuYXRpb25zIGlzIGVxdWFsIHRvIHRoZSBvcmlnaW5hbCBsaXN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICBncm91cFdpdGgoUi5lcXVhbHMsIFswLCAxLCAxLCAyLCAzLCA1LCA4LCAxMywgMjFdKVxuICAgICAqICAgIC8vIFtbMF0sIFsxLCAxXSwgWzIsIDMsIDUsIDgsIDEzLCAyMV1dXG4gICAgICpcbiAgICAgKiAgICBncm91cFdpdGgoKGEsIGIpID0+IGEgJSAyID09PSBiICUgMiwgWzAsIDEsIDEsIDIsIDMsIDUsIDgsIDEzLCAyMV0pXG4gICAgICogICAgLy8gW1swXSwgWzEsIDFdLCBbMl0sIFszLCA1XSwgWzhdLCBbMTMsIDIxXV1cbiAgICAgKlxuICAgICAqICAgIFIuZ3JvdXBXaXRoKFIuZXFCeShpc1Zvd2VsKSwgJ2Flc3Rpb3UnKVxuICAgICAqICAgIC8vIFsnYWUnLCAnc3QnLCAnaW91J11cbiAgICAgKi9cbiAgICB2YXIgZ3JvdXBXaXRoID0gX2N1cnJ5MihmdW5jdGlvbiAoZm4sIGxpc3QpIHtcbiAgICAgICAgdmFyIHJlcyA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICB2YXIgbmV4dGlkeCA9IGlkeCArIDE7XG4gICAgICAgICAgICB3aGlsZSAobmV4dGlkeCA8IGxlbiAmJiBmbihsaXN0W2lkeF0sIGxpc3RbbmV4dGlkeF0pKSB7XG4gICAgICAgICAgICAgICAgbmV4dGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnB1c2gobGlzdC5zbGljZShpZHgsIG5leHRpZHgpKTtcbiAgICAgICAgICAgIGlkeCA9IG5leHRpZHg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBncmVhdGVyIHRoYW4gdGhlIHNlY29uZDsgYGZhbHNlYFxuICAgICAqIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBPcmQgYSA9PiBhIC0+IGEgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn0gYVxuICAgICAqIEBwYXJhbSB7Kn0gYlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQHNlZSBSLmx0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5ndCgyLCAxKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmd0KDIsIDIpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmd0KDIsIDMpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmd0KCdhJywgJ3onKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5ndCgneicsICdhJyk7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBndCA9IF9jdXJyeTIoZnVuY3Rpb24gZ3QoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA+IGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzZWNvbmQ7XG4gICAgICogYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgT3JkIGEgPT4gYSAtPiBhIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBiXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIubHRlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5ndGUoMiwgMSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5ndGUoMiwgMik7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5ndGUoMiwgMyk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuZ3RlKCdhJywgJ3onKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5ndGUoJ3onLCAnYScpOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgZ3RlID0gX2N1cnJ5MihmdW5jdGlvbiBndGUoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA+PSBiO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCBhbiBvYmplY3QgaGFzIGFuIG93biBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZVxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC43LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBzIC0+IHtzOiB4fSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3AgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIGNoZWNrIGZvci5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gV2hldGhlciB0aGUgcHJvcGVydHkgZXhpc3RzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBoYXNOYW1lID0gUi5oYXMoJ25hbWUnKTtcbiAgICAgKiAgICAgIGhhc05hbWUoe25hbWU6ICdhbGljZSd9KTsgICAvLz0+IHRydWVcbiAgICAgKiAgICAgIGhhc05hbWUoe25hbWU6ICdib2InfSk7ICAgICAvLz0+IHRydWVcbiAgICAgKiAgICAgIGhhc05hbWUoe30pOyAgICAgICAgICAgICAgICAvLz0+IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBwb2ludCA9IHt4OiAwLCB5OiAwfTtcbiAgICAgKiAgICAgIHZhciBwb2ludEhhcyA9IFIuaGFzKFIuX18sIHBvaW50KTtcbiAgICAgKiAgICAgIHBvaW50SGFzKCd4Jyk7ICAvLz0+IHRydWVcbiAgICAgKiAgICAgIHBvaW50SGFzKCd5Jyk7ICAvLz0+IHRydWVcbiAgICAgKiAgICAgIHBvaW50SGFzKCd6Jyk7ICAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGhhcyA9IF9jdXJyeTIoX2hhcyk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IGFuIG9iamVjdCBvciBpdHMgcHJvdG90eXBlIGNoYWluIGhhcyBhIHByb3BlcnR5IHdpdGhcbiAgICAgKiB0aGUgc3BlY2lmaWVkIG5hbWVcbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNy4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgcyAtPiB7czogeH0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBjaGVjayBmb3IuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb3BlcnR5IGV4aXN0cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBmdW5jdGlvbiBSZWN0YW5nbGUod2lkdGgsIGhlaWdodCkge1xuICAgICAqICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICogICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAqICAgICAgfVxuICAgICAqICAgICAgUmVjdGFuZ2xlLnByb3RvdHlwZS5hcmVhID0gZnVuY3Rpb24oKSB7XG4gICAgICogICAgICAgIHJldHVybiB0aGlzLndpZHRoICogdGhpcy5oZWlnaHQ7XG4gICAgICogICAgICB9O1xuICAgICAqXG4gICAgICogICAgICB2YXIgc3F1YXJlID0gbmV3IFJlY3RhbmdsZSgyLCAyKTtcbiAgICAgKiAgICAgIFIuaGFzSW4oJ3dpZHRoJywgc3F1YXJlKTsgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5oYXNJbignYXJlYScsIHNxdWFyZSk7ICAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgaGFzSW4gPSBfY3VycnkyKGZ1bmN0aW9uIGhhc0luKHByb3AsIG9iaikge1xuICAgICAgICByZXR1cm4gcHJvcCBpbiBvYmo7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgaXRzIGFyZ3VtZW50cyBhcmUgaWRlbnRpY2FsLCBmYWxzZSBvdGhlcndpc2UuIFZhbHVlcyBhcmVcbiAgICAgKiBpZGVudGljYWwgaWYgdGhleSByZWZlcmVuY2UgdGhlIHNhbWUgbWVtb3J5LiBgTmFOYCBpcyBpZGVudGljYWwgdG8gYE5hTmA7XG4gICAgICogYDBgIGFuZCBgLTBgIGFyZSBub3QgaWRlbnRpY2FsLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBhIC0+IGEgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn0gYVxuICAgICAqIEBwYXJhbSB7Kn0gYlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG8gPSB7fTtcbiAgICAgKiAgICAgIFIuaWRlbnRpY2FsKG8sIG8pOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaWRlbnRpY2FsKDEsIDEpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaWRlbnRpY2FsKDEsICcxJyk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaWRlbnRpY2FsKFtdLCBbXSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaWRlbnRpY2FsKDAsIC0wKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pZGVudGljYWwoTmFOLCBOYU4pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICAvLyBTYW1lVmFsdWUgYWxnb3JpdGhtXG4gICAgLy8gU3RlcHMgMS01LCA3LTEwXG4gICAgLy8gU3RlcHMgNi5iLTYuZTogKzAgIT0gLTBcbiAgICAvLyBTdGVwIDYuYTogTmFOID09IE5hTlxuICAgIHZhciBpZGVudGljYWwgPSBfY3VycnkyKGZ1bmN0aW9uIGlkZW50aWNhbChhLCBiKSB7XG4gICAgICAgIC8vIFNhbWVWYWx1ZSBhbGdvcml0aG1cbiAgICAgICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgICAgIC8vIFN0ZXBzIDEtNSwgNy0xMFxuICAgICAgICAgICAgLy8gU3RlcHMgNi5iLTYuZTogKzAgIT0gLTBcbiAgICAgICAgICAgIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09PSAxIC8gYjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFN0ZXAgNi5hOiBOYU4gPT0gTmFOXG4gICAgICAgICAgICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgZG9lcyBub3RoaW5nIGJ1dCByZXR1cm4gdGhlIHBhcmFtZXRlciBzdXBwbGllZCB0byBpdC4gR29vZFxuICAgICAqIGFzIGEgZGVmYXVsdCBvciBwbGFjZWhvbGRlciBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBhIC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IHggVGhlIHZhbHVlIHRvIHJldHVybi5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgaW5wdXQgdmFsdWUsIGB4YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmlkZW50aXR5KDEpOyAvLz0+IDFcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG9iaiA9IHt9O1xuICAgICAqICAgICAgUi5pZGVudGl0eShvYmopID09PSBvYmo7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBpZGVudGl0eSA9IF9jdXJyeTEoX2lkZW50aXR5KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgcHJvY2VzcyBlaXRoZXIgdGhlIGBvblRydWVgIG9yIHRoZSBgb25GYWxzZWBcbiAgICAgKiBmdW5jdGlvbiBkZXBlbmRpbmcgdXBvbiB0aGUgcmVzdWx0IG9mIHRoZSBgY29uZGl0aW9uYCBwcmVkaWNhdGUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjguMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgKCouLi4gLT4gQm9vbGVhbikgLT4gKCouLi4gLT4gKikgLT4gKCouLi4gLT4gKikgLT4gKCouLi4gLT4gKilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gQSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvblRydWUgQSBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgYGNvbmRpdGlvbmAgZXZhbHVhdGVzIHRvIGEgdHJ1dGh5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uRmFsc2UgQSBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgYGNvbmRpdGlvbmAgZXZhbHVhdGVzIHRvIGEgZmFsc3kgdmFsdWUuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3IHVuYXJ5IGZ1bmN0aW9uIHRoYXQgd2lsbCBwcm9jZXNzIGVpdGhlciB0aGUgYG9uVHJ1ZWAgb3IgdGhlIGBvbkZhbHNlYFxuICAgICAqICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZXBlbmRpbmcgdXBvbiB0aGUgcmVzdWx0IG9mIHRoZSBgY29uZGl0aW9uYCBwcmVkaWNhdGUuXG4gICAgICogQHNlZSBSLnVubGVzcywgUi53aGVuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGluY0NvdW50ID0gUi5pZkVsc2UoXG4gICAgICogICAgICAgIFIuaGFzKCdjb3VudCcpLFxuICAgICAqICAgICAgICBSLm92ZXIoUi5sZW5zUHJvcCgnY291bnQnKSwgUi5pbmMpLFxuICAgICAqICAgICAgICBSLmFzc29jKCdjb3VudCcsIDEpXG4gICAgICogICAgICApO1xuICAgICAqICAgICAgaW5jQ291bnQoe30pOyAgICAgICAgICAgLy89PiB7IGNvdW50OiAxIH1cbiAgICAgKiAgICAgIGluY0NvdW50KHsgY291bnQ6IDEgfSk7IC8vPT4geyBjb3VudDogMiB9XG4gICAgICovXG4gICAgdmFyIGlmRWxzZSA9IF9jdXJyeTMoZnVuY3Rpb24gaWZFbHNlKGNvbmRpdGlvbiwgb25UcnVlLCBvbkZhbHNlKSB7XG4gICAgICAgIHJldHVybiBjdXJyeU4oTWF0aC5tYXgoY29uZGl0aW9uLmxlbmd0aCwgb25UcnVlLmxlbmd0aCwgb25GYWxzZS5sZW5ndGgpLCBmdW5jdGlvbiBfaWZFbHNlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbmRpdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpID8gb25UcnVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBvbkZhbHNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50cyBpdHMgYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICogQHNlZSBSLmRlY1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuaW5jKDQyKTsgLy89PiA0M1xuICAgICAqL1xuICAgIHZhciBpbmMgPSBhZGQoMSk7XG5cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIHRoZSBzdXBwbGllZCBlbGVtZW50IGludG8gdGhlIGxpc3QsIGF0IGluZGV4IGBpbmRleGAuIF9Ob3RlIHRoYXRcbiAgICAgKiB0aGlzIGlzIG5vdCBkZXN0cnVjdGl2ZV86IGl0IHJldHVybnMgYSBjb3B5IG9mIHRoZSBsaXN0IHdpdGggdGhlIGNoYW5nZXMuXG4gICAgICogPHNtYWxsPk5vIGxpc3RzIGhhdmUgYmVlbiBoYXJtZWQgaW4gdGhlIGFwcGxpY2F0aW9uIG9mIHRoaXMgZnVuY3Rpb24uPC9zbWFsbD5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4yXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBhIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggVGhlIHBvc2l0aW9uIHRvIGluc2VydCB0aGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7Kn0gZWx0IFRoZSBlbGVtZW50IHRvIGluc2VydCBpbnRvIHRoZSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaW5zZXJ0IGludG9cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgQXJyYXkgd2l0aCBgZWx0YCBpbnNlcnRlZCBhdCBgaW5kZXhgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuaW5zZXJ0KDIsICd4JywgWzEsMiwzLDRdKTsgLy89PiBbMSwyLCd4JywzLDRdXG4gICAgICovXG4gICAgdmFyIGluc2VydCA9IF9jdXJyeTMoZnVuY3Rpb24gaW5zZXJ0KGlkeCwgZWx0LCBsaXN0KSB7XG4gICAgICAgIGlkeCA9IGlkeCA8IGxpc3QubGVuZ3RoICYmIGlkeCA+PSAwID8gaWR4IDogbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBfc2xpY2UobGlzdCk7XG4gICAgICAgIHJlc3VsdC5zcGxpY2UoaWR4LCAwLCBlbHQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyB0aGUgc3ViLWxpc3QgaW50byB0aGUgbGlzdCwgYXQgaW5kZXggYGluZGV4YC4gX05vdGUgdGhhdCB0aGlzIGlzIG5vdFxuICAgICAqIGRlc3RydWN0aXZlXzogaXQgcmV0dXJucyBhIGNvcHkgb2YgdGhlIGxpc3Qgd2l0aCB0aGUgY2hhbmdlcy5cbiAgICAgKiA8c21hbGw+Tm8gbGlzdHMgaGF2ZSBiZWVuIGhhcm1lZCBpbiB0aGUgYXBwbGljYXRpb24gb2YgdGhpcyBmdW5jdGlvbi48L3NtYWxsPlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IFRoZSBwb3NpdGlvbiB0byBpbnNlcnQgdGhlIHN1Yi1saXN0XG4gICAgICogQHBhcmFtIHtBcnJheX0gZWx0cyBUaGUgc3ViLWxpc3QgdG8gaW5zZXJ0IGludG8gdGhlIEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpbnNlcnQgdGhlIHN1Yi1saXN0IGludG9cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgQXJyYXkgd2l0aCBgZWx0c2AgaW5zZXJ0ZWQgc3RhcnRpbmcgYXQgYGluZGV4YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmluc2VydEFsbCgyLCBbJ3gnLCd5JywneiddLCBbMSwyLDMsNF0pOyAvLz0+IFsxLDIsJ3gnLCd5JywneicsMyw0XVxuICAgICAqL1xuICAgIHZhciBpbnNlcnRBbGwgPSBfY3VycnkzKGZ1bmN0aW9uIGluc2VydEFsbChpZHgsIGVsdHMsIGxpc3QpIHtcbiAgICAgICAgaWR4ID0gaWR4IDwgbGlzdC5sZW5ndGggJiYgaWR4ID49IDAgPyBpZHggOiBsaXN0Lmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIF9jb25jYXQoX2NvbmNhdChfc2xpY2UobGlzdCwgMCwgaWR4KSwgZWx0cyksIF9zbGljZShsaXN0LCBpZHgpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbGlzdCB3aXRoIHRoZSBzZXBhcmF0b3IgaW50ZXJwb3NlZCBiZXR3ZWVuIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGludGVyc3BlcnNlYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0geyp9IHNlcGFyYXRvciBUaGUgZWxlbWVudCB0byBhZGQgdG8gdGhlIGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBiZSBpbnRlcnBvc2VkLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbmV3IGxpc3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pbnRlcnNwZXJzZSgnbicsIFsnYmEnLCAnYScsICdhJ10pOyAvLz0+IFsnYmEnLCAnbicsICdhJywgJ24nLCAnYSddXG4gICAgICovXG4gICAgdmFyIGludGVyc3BlcnNlID0gX2N1cnJ5MihfY2hlY2tGb3JNZXRob2QoJ2ludGVyc3BlcnNlJywgZnVuY3Rpb24gaW50ZXJzcGVyc2Uoc2VwYXJhdG9yLCBsaXN0KSB7XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGlkeCA9PT0gbGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGxpc3RbaWR4XSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGxpc3RbaWR4XSwgc2VwYXJhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogU2VlIGlmIGFuIG9iamVjdCAoYHZhbGApIGlzIGFuIGluc3RhbmNlIG9mIHRoZSBzdXBwbGllZCBjb25zdHJ1Y3Rvci4gVGhpc1xuICAgICAqIGZ1bmN0aW9uIHdpbGwgY2hlY2sgdXAgdGhlIGluaGVyaXRhbmNlIGNoYWluLCBpZiBhbnkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBUeXBlXG4gICAgICogQHNpZyAoKiAtPiB7Kn0pIC0+IGEgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjdG9yIEEgY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pcyhPYmplY3QsIHt9KTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzKE51bWJlciwgMSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pcyhPYmplY3QsIDEpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmlzKFN0cmluZywgJ3MnKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzKFN0cmluZywgbmV3IFN0cmluZygnJykpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaXMoT2JqZWN0LCBuZXcgU3RyaW5nKCcnKSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pcyhPYmplY3QsICdzJyk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaXMoTnVtYmVyLCB7fSk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgaXMgPSBfY3VycnkyKGZ1bmN0aW9uIGlzKEN0b3IsIHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsICE9IG51bGwgJiYgdmFsLmNvbnN0cnVjdG9yID09PSBDdG9yIHx8IHZhbCBpbnN0YW5jZW9mIEN0b3I7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyB3aGV0aGVyIG9yIG5vdCBhbiBvYmplY3QgaXMgc2ltaWxhciB0byBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNS4wXG4gICAgICogQGNhdGVnb3J5IFR5cGVcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKiAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSB4IFRoZSBvYmplY3QgdG8gdGVzdC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgYHhgIGhhcyBhIG51bWVyaWMgbGVuZ3RoIHByb3BlcnR5IGFuZCBleHRyZW1lIGluZGljZXMgZGVmaW5lZDsgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pc0FycmF5TGlrZShbXSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pc0FycmF5TGlrZSh0cnVlKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pc0FycmF5TGlrZSh7fSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaXNBcnJheUxpa2Uoe2xlbmd0aDogMTB9KTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pc0FycmF5TGlrZSh7MDogJ3plcm8nLCA5OiAnbmluZScsIGxlbmd0aDogMTB9KTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGlzQXJyYXlMaWtlID0gX2N1cnJ5MShmdW5jdGlvbiBpc0FycmF5TGlrZSh4KSB7XG4gICAgICAgIGlmIChfaXNBcnJheSh4KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF4KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB4ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh4IGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHgubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXgubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHguaGFzT3duUHJvcGVydHkoMCkgJiYgeC5oYXNPd25Qcm9wZXJ0eSh4Lmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgaW5wdXQgdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgVHlwZVxuICAgICAqIEBzaWcgKiAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSB4IFRoZSB2YWx1ZSB0byB0ZXN0LlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBgeGAgaXMgYHVuZGVmaW5lZGAgb3IgYG51bGxgLCBvdGhlcndpc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmlzTmlsKG51bGwpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaXNOaWwodW5kZWZpbmVkKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzTmlsKDApOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmlzTmlsKFtdKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBpc05pbCA9IF9jdXJyeTEoZnVuY3Rpb24gaXNOaWwoeCkge1xuICAgICAgICByZXR1cm4geCA9PSBudWxsO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3QgY29udGFpbmluZyB0aGUgbmFtZXMgb2YgYWxsIHRoZSBlbnVtZXJhYmxlIG93biBwcm9wZXJ0aWVzIG9mXG4gICAgICogdGhlIHN1cHBsaWVkIG9iamVjdC5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIG9yZGVyIG9mIHRoZSBvdXRwdXQgYXJyYXkgaXMgbm90IGd1YXJhbnRlZWQgdG8gYmUgY29uc2lzdGVudFxuICAgICAqIGFjcm9zcyBkaWZmZXJlbnQgSlMgcGxhdGZvcm1zLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7azogdn0gLT4gW2tdXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGV4dHJhY3QgcHJvcGVydGllcyBmcm9tXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIHRoZSBvYmplY3QncyBvd24gcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmtleXMoe2E6IDEsIGI6IDIsIGM6IDN9KTsgLy89PiBbJ2EnLCAnYicsICdjJ11cbiAgICAgKi9cbiAgICAvLyBjb3ZlciBJRSA8IDkga2V5cyBpc3N1ZXNcbiAgICAvLyBTYWZhcmkgYnVnXG4gICAgdmFyIGtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGNvdmVyIElFIDwgOSBrZXlzIGlzc3Vlc1xuICAgICAgICB2YXIgaGFzRW51bUJ1ZyA9ICF7IHRvU3RyaW5nOiBudWxsIH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7XG4gICAgICAgIHZhciBub25FbnVtZXJhYmxlUHJvcHMgPSBbXG4gICAgICAgICAgICAnY29uc3RydWN0b3InLFxuICAgICAgICAgICAgJ3ZhbHVlT2YnLFxuICAgICAgICAgICAgJ2lzUHJvdG90eXBlT2YnLFxuICAgICAgICAgICAgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICAgICAgICAgICAnaGFzT3duUHJvcGVydHknLFxuICAgICAgICAgICAgJ3RvTG9jYWxlU3RyaW5nJ1xuICAgICAgICBdO1xuICAgICAgICAvLyBTYWZhcmkgYnVnXG4gICAgICAgIHZhciBoYXNBcmdzRW51bUJ1ZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHMucHJvcGVydHlJc0VudW1lcmFibGUoJ2xlbmd0aCcpO1xuICAgICAgICB9KCk7XG4gICAgICAgIHZhciBjb250YWlucyA9IGZ1bmN0aW9uIGNvbnRhaW5zKGxpc3QsIGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RbaWR4XSA9PT0gaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0eXBlb2YgT2JqZWN0LmtleXMgPT09ICdmdW5jdGlvbicgJiYgIWhhc0FyZ3NFbnVtQnVnID8gX2N1cnJ5MShmdW5jdGlvbiBrZXlzKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdChvYmopICE9PSBvYmogPyBbXSA6IE9iamVjdC5rZXlzKG9iaik7XG4gICAgICAgIH0pIDogX2N1cnJ5MShmdW5jdGlvbiBrZXlzKG9iaikge1xuICAgICAgICAgICAgaWYgKE9iamVjdChvYmopICE9PSBvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJvcCwgbklkeDtcbiAgICAgICAgICAgIHZhciBrcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGNoZWNrQXJnc0xlbmd0aCA9IGhhc0FyZ3NFbnVtQnVnICYmIF9pc0FyZ3VtZW50cyhvYmopO1xuICAgICAgICAgICAgZm9yIChwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChfaGFzKHByb3AsIG9iaikgJiYgKCFjaGVja0FyZ3NMZW5ndGggfHwgcHJvcCAhPT0gJ2xlbmd0aCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtzW2tzLmxlbmd0aF0gPSBwcm9wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNFbnVtQnVnKSB7XG4gICAgICAgICAgICAgICAgbklkeCA9IG5vbkVudW1lcmFibGVQcm9wcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIHdoaWxlIChuSWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcCA9IG5vbkVudW1lcmFibGVQcm9wc1tuSWR4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9oYXMocHJvcCwgb2JqKSAmJiAhY29udGFpbnMoa3MsIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrc1trcy5sZW5ndGhdID0gcHJvcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuSWR4IC09IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtzO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBjb250YWluaW5nIHRoZSBuYW1lcyBvZiBhbGwgdGhlIHByb3BlcnRpZXMgb2YgdGhlIHN1cHBsaWVkXG4gICAgICogb2JqZWN0LCBpbmNsdWRpbmcgcHJvdG90eXBlIHByb3BlcnRpZXMuXG4gICAgICogTm90ZSB0aGF0IHRoZSBvcmRlciBvZiB0aGUgb3V0cHV0IGFycmF5IGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGNvbnNpc3RlbnRcbiAgICAgKiBhY3Jvc3MgZGlmZmVyZW50IEpTIHBsYXRmb3Jtcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge2s6IHZ9IC0+IFtrXVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBleHRyYWN0IHByb3BlcnRpZXMgZnJvbVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiB0aGUgb2JqZWN0J3Mgb3duIGFuZCBwcm90b3R5cGUgcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgRiA9IGZ1bmN0aW9uKCkgeyB0aGlzLnggPSAnWCc7IH07XG4gICAgICogICAgICBGLnByb3RvdHlwZS55ID0gJ1knO1xuICAgICAqICAgICAgdmFyIGYgPSBuZXcgRigpO1xuICAgICAqICAgICAgUi5rZXlzSW4oZik7IC8vPT4gWyd4JywgJ3knXVxuICAgICAqL1xuICAgIHZhciBrZXlzSW4gPSBfY3VycnkxKGZ1bmN0aW9uIGtleXNJbihvYmopIHtcbiAgICAgICAgdmFyIHByb3A7XG4gICAgICAgIHZhciBrcyA9IFtdO1xuICAgICAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBrc1trcy5sZW5ndGhdID0gcHJvcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga3M7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIGFycmF5IGJ5IHJldHVybmluZyBgbGlzdC5sZW5ndGhgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgbGVuZ3RoIG9mIHRoZSBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmxlbmd0aChbXSk7IC8vPT4gMFxuICAgICAqICAgICAgUi5sZW5ndGgoWzEsIDIsIDNdKTsgLy89PiAzXG4gICAgICovXG4gICAgdmFyIGxlbmd0aCA9IF9jdXJyeTEoZnVuY3Rpb24gbGVuZ3RoKGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIGxpc3QgIT0gbnVsbCAmJiBpcyhOdW1iZXIsIGxpc3QubGVuZ3RoKSA/IGxpc3QubGVuZ3RoIDogTmFOO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzIGxlc3MgdGhhbiB0aGUgc2Vjb25kOyBgZmFsc2VgXG4gICAgICogb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBhID0+IGEgLT4gYSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSBhXG4gICAgICogQHBhcmFtIHsqfSBiXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIuZ3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmx0KDIsIDEpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmx0KDIsIDIpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmx0KDIsIDMpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIubHQoJ2EnLCAneicpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIubHQoJ3onLCAnYScpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGx0ID0gX2N1cnJ5MihmdW5jdGlvbiBsdChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIDwgYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNlY29uZDtcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBPcmQgYSA9PiBhIC0+IGEgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5ndGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmx0ZSgyLCAxKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5sdGUoMiwgMik7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5sdGUoMiwgMyk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5sdGUoJ2EnLCAneicpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIubHRlKCd6JywgJ2EnKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBsdGUgPSBfY3VycnkyKGZ1bmN0aW9uIGx0ZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIDw9IGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFwQWNjdW0gZnVuY3Rpb24gYmVoYXZlcyBsaWtlIGEgY29tYmluYXRpb24gb2YgbWFwIGFuZCByZWR1Y2U7IGl0XG4gICAgICogYXBwbGllcyBhIGZ1bmN0aW9uIHRvIGVhY2ggZWxlbWVudCBvZiBhIGxpc3QsIHBhc3NpbmcgYW4gYWNjdW11bGF0aW5nXG4gICAgICogcGFyYW1ldGVyIGZyb20gbGVmdCB0byByaWdodCwgYW5kIHJldHVybmluZyBhIGZpbmFsIHZhbHVlIG9mIHRoaXNcbiAgICAgKiBhY2N1bXVsYXRvciB0b2dldGhlciB3aXRoIHRoZSBuZXcgbGlzdC5cbiAgICAgKlxuICAgICAqIFRoZSBpdGVyYXRvciBmdW5jdGlvbiByZWNlaXZlcyB0d28gYXJndW1lbnRzLCAqYWNjKiBhbmQgKnZhbHVlKiwgYW5kIHNob3VsZFxuICAgICAqIHJldHVybiBhIHR1cGxlICpbYWNjLCB2YWx1ZV0qLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMC4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhY2MgLT4geCAtPiAoYWNjLCB5KSkgLT4gYWNjIC0+IFt4XSAtPiAoYWNjLCBbeV0pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBldmVyeSBlbGVtZW50IG9mIHRoZSBpbnB1dCBgbGlzdGAuXG4gICAgICogQHBhcmFtIHsqfSBhY2MgVGhlIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBmaW5hbCwgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQHNlZSBSLmFkZEluZGV4XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGRpZ2l0cyA9IFsnMScsICcyJywgJzMnLCAnNCddO1xuICAgICAqICAgICAgdmFyIGFwcGVuZGVyID0gKGEsIGIpID0+IFthICsgYiwgYSArIGJdO1xuICAgICAqXG4gICAgICogICAgICBSLm1hcEFjY3VtKGFwcGVuZGVyLCAwLCBkaWdpdHMpOyAvLz0+IFsnMDEyMzQnLCBbJzAxJywgJzAxMicsICcwMTIzJywgJzAxMjM0J11dXG4gICAgICovXG4gICAgdmFyIG1hcEFjY3VtID0gX2N1cnJ5MyhmdW5jdGlvbiBtYXBBY2N1bShmbiwgYWNjLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIHR1cGxlID0gW2FjY107XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHR1cGxlID0gZm4odHVwbGVbMF0sIGxpc3RbaWR4XSk7XG4gICAgICAgICAgICByZXN1bHRbaWR4XSA9IHR1cGxlWzFdO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHR1cGxlWzBdLFxuICAgICAgICAgICAgcmVzdWx0XG4gICAgICAgIF07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFwQWNjdW1SaWdodCBmdW5jdGlvbiBiZWhhdmVzIGxpa2UgYSBjb21iaW5hdGlvbiBvZiBtYXAgYW5kIHJlZHVjZTsgaXRcbiAgICAgKiBhcHBsaWVzIGEgZnVuY3Rpb24gdG8gZWFjaCBlbGVtZW50IG9mIGEgbGlzdCwgcGFzc2luZyBhbiBhY2N1bXVsYXRpbmdcbiAgICAgKiBwYXJhbWV0ZXIgZnJvbSByaWdodCB0byBsZWZ0LCBhbmQgcmV0dXJuaW5nIGEgZmluYWwgdmFsdWUgb2YgdGhpc1xuICAgICAqIGFjY3VtdWxhdG9yIHRvZ2V0aGVyIHdpdGggdGhlIG5ldyBsaXN0LlxuICAgICAqXG4gICAgICogU2ltaWxhciB0byBgbWFwQWNjdW1gLCBleGNlcHQgbW92ZXMgdGhyb3VnaCB0aGUgaW5wdXQgbGlzdCBmcm9tIHRoZSByaWdodCB0b1xuICAgICAqIHRoZSBsZWZ0LlxuICAgICAqXG4gICAgICogVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIHJlY2VpdmVzIHR3byBhcmd1bWVudHMsICphY2MqIGFuZCAqdmFsdWUqLCBhbmQgc2hvdWxkXG4gICAgICogcmV0dXJuIGEgdHVwbGUgKlthY2MsIHZhbHVlXSouXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGFjYyAtPiB4IC0+IChhY2MsIHkpKSAtPiBhY2MgLT4gW3hdIC0+IChhY2MsIFt5XSlcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGV2ZXJ5IGVsZW1lbnQgb2YgdGhlIGlucHV0IGBsaXN0YC5cbiAgICAgKiBAcGFyYW0geyp9IGFjYyBUaGUgYWNjdW11bGF0b3IgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGZpbmFsLCBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAc2VlIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZGlnaXRzID0gWycxJywgJzInLCAnMycsICc0J107XG4gICAgICogICAgICB2YXIgYXBwZW5kID0gKGEsIGIpID0+IFthICsgYiwgYSArIGJdO1xuICAgICAqXG4gICAgICogICAgICBSLm1hcEFjY3VtUmlnaHQoYXBwZW5kLCAwLCBkaWdpdHMpOyAvLz0+IFsnMDQzMjEnLCBbJzA0MzIxJywgJzA0MzInLCAnMDQzJywgJzA0J11dXG4gICAgICovXG4gICAgdmFyIG1hcEFjY3VtUmlnaHQgPSBfY3VycnkzKGZ1bmN0aW9uIG1hcEFjY3VtUmlnaHQoZm4sIGFjYywgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHZhciB0dXBsZSA9IFthY2NdO1xuICAgICAgICB3aGlsZSAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHR1cGxlID0gZm4odHVwbGVbMF0sIGxpc3RbaWR4XSk7XG4gICAgICAgICAgICByZXN1bHRbaWR4XSA9IHR1cGxlWzFdO1xuICAgICAgICAgICAgaWR4IC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHR1cGxlWzBdLFxuICAgICAgICAgICAgcmVzdWx0XG4gICAgICAgIF07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhZ2FpbnN0IGEgU3RyaW5nLiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiB3aWxsXG4gICAgICogcmV0dXJuIGFuIGVtcHR5IGFycmF5IHdoZW4gdGhlcmUgYXJlIG5vIG1hdGNoZXMuIFRoaXMgZGlmZmVycyBmcm9tXG4gICAgICogW2BTdHJpbmcucHJvdG90eXBlLm1hdGNoYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL21hdGNoKVxuICAgICAqIHdoaWNoIHJldHVybnMgYG51bGxgIHdoZW4gdGhlcmUgYXJlIG5vIG1hdGNoZXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAc2lnIFJlZ0V4cCAtPiBTdHJpbmcgLT4gW1N0cmluZyB8IFVuZGVmaW5lZF1cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gcnggQSByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIG1hdGNoIGFnYWluc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGxpc3Qgb2YgbWF0Y2hlcyBvciBlbXB0eSBhcnJheS5cbiAgICAgKiBAc2VlIFIudGVzdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubWF0Y2goLyhbYS16XWEpL2csICdiYW5hbmFzJyk7IC8vPT4gWydiYScsICduYScsICduYSddXG4gICAgICogICAgICBSLm1hdGNoKC9hLywgJ2InKTsgLy89PiBbXVxuICAgICAqICAgICAgUi5tYXRjaCgvYS8sIG51bGwpOyAvLz0+IFR5cGVFcnJvcjogbnVsbCBkb2VzIG5vdCBoYXZlIGEgbWV0aG9kIG5hbWVkIFwibWF0Y2hcIlxuICAgICAqL1xuICAgIHZhciBtYXRjaCA9IF9jdXJyeTIoZnVuY3Rpb24gbWF0Y2gocngsIHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLm1hdGNoKHJ4KSB8fCBbXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIG1hdGhNb2QgYmVoYXZlcyBsaWtlIHRoZSBtb2R1bG8gb3BlcmF0b3Igc2hvdWxkIG1hdGhlbWF0aWNhbGx5LCB1bmxpa2UgdGhlXG4gICAgICogYCVgIG9wZXJhdG9yIChhbmQgYnkgZXh0ZW5zaW9uLCBSLm1vZHVsbykuIFNvIHdoaWxlIFwiLTE3ICUgNVwiIGlzIC0yLFxuICAgICAqIG1hdGhNb2QoLTE3LCA1KSBpcyAzLiBtYXRoTW9kIHJlcXVpcmVzIEludGVnZXIgYXJndW1lbnRzLCBhbmQgcmV0dXJucyBOYU5cbiAgICAgKiB3aGVuIHRoZSBtb2R1bHVzIGlzIHplcm8gb3IgbmVnYXRpdmUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBtIFRoZSBkaXZpZGVuZC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcCB0aGUgbW9kdWx1cy5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSByZXN1bHQgb2YgYGIgbW9kIGFgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubWF0aE1vZCgtMTcsIDUpOyAgLy89PiAzXG4gICAgICogICAgICBSLm1hdGhNb2QoMTcsIDUpOyAgIC8vPT4gMlxuICAgICAqICAgICAgUi5tYXRoTW9kKDE3LCAtNSk7ICAvLz0+IE5hTlxuICAgICAqICAgICAgUi5tYXRoTW9kKDE3LCAwKTsgICAvLz0+IE5hTlxuICAgICAqICAgICAgUi5tYXRoTW9kKDE3LjIsIDUpOyAvLz0+IE5hTlxuICAgICAqICAgICAgUi5tYXRoTW9kKDE3LCA1LjMpOyAvLz0+IE5hTlxuICAgICAqXG4gICAgICogICAgICB2YXIgY2xvY2sgPSBSLm1hdGhNb2QoUi5fXywgMTIpO1xuICAgICAqICAgICAgY2xvY2soMTUpOyAvLz0+IDNcbiAgICAgKiAgICAgIGNsb2NrKDI0KTsgLy89PiAwXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBzZXZlbnRlZW5Nb2QgPSBSLm1hdGhNb2QoMTcpO1xuICAgICAqICAgICAgc2V2ZW50ZWVuTW9kKDMpOyAgLy89PiAyXG4gICAgICogICAgICBzZXZlbnRlZW5Nb2QoNCk7ICAvLz0+IDFcbiAgICAgKiAgICAgIHNldmVudGVlbk1vZCgxMCk7IC8vPT4gN1xuICAgICAqL1xuICAgIHZhciBtYXRoTW9kID0gX2N1cnJ5MihmdW5jdGlvbiBtYXRoTW9kKG0sIHApIHtcbiAgICAgICAgaWYgKCFfaXNJbnRlZ2VyKG0pKSB7XG4gICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICB9XG4gICAgICAgIGlmICghX2lzSW50ZWdlcihwKSB8fCBwIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG0gJSBwICsgcCkgJSBwO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGFyZ2VyIG9mIGl0cyB0d28gYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBhID0+IGEgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHsqfSBhXG4gICAgICogQHBhcmFtIHsqfSBiXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIubWF4QnksIFIubWluXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5tYXgoNzg5LCAxMjMpOyAvLz0+IDc4OVxuICAgICAqICAgICAgUi5tYXgoJ2EnLCAnYicpOyAvLz0+ICdiJ1xuICAgICAqL1xuICAgIHZhciBtYXggPSBfY3VycnkyKGZ1bmN0aW9uIG1heChhLCBiKSB7XG4gICAgICAgIHJldHVybiBiID4gYSA/IGIgOiBhO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBmdW5jdGlvbiBhbmQgdHdvIHZhbHVlcywgYW5kIHJldHVybnMgd2hpY2hldmVyIHZhbHVlIHByb2R1Y2VzIHRoZVxuICAgICAqIGxhcmdlciByZXN1bHQgd2hlbiBwYXNzZWQgdG8gdGhlIHByb3ZpZGVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC44LjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBiID0+IChhIC0+IGIpIC0+IGEgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZlxuICAgICAqIEBwYXJhbSB7Kn0gYVxuICAgICAqIEBwYXJhbSB7Kn0gYlxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLm1heCwgUi5taW5CeVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vICBzcXVhcmUgOjogTnVtYmVyIC0+IE51bWJlclxuICAgICAqICAgICAgdmFyIHNxdWFyZSA9IG4gPT4gbiAqIG47XG4gICAgICpcbiAgICAgKiAgICAgIFIubWF4Qnkoc3F1YXJlLCAtMywgMik7IC8vPT4gLTNcbiAgICAgKlxuICAgICAqICAgICAgUi5yZWR1Y2UoUi5tYXhCeShzcXVhcmUpLCAwLCBbMywgLTUsIDQsIDEsIC0yXSk7IC8vPT4gLTVcbiAgICAgKiAgICAgIFIucmVkdWNlKFIubWF4Qnkoc3F1YXJlKSwgMCwgW10pOyAvLz0+IDBcbiAgICAgKi9cbiAgICB2YXIgbWF4QnkgPSBfY3VycnkzKGZ1bmN0aW9uIG1heEJ5KGYsIGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGYoYikgPiBmKGEpID8gYiA6IGE7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgb2JqZWN0IHdpdGggdGhlIG93biBwcm9wZXJ0aWVzIG9mIHRoZSBmaXJzdCBvYmplY3QgbWVyZ2VkIHdpdGhcbiAgICAgKiB0aGUgb3duIHByb3BlcnRpZXMgb2YgdGhlIHNlY29uZCBvYmplY3QuIElmIGEga2V5IGV4aXN0cyBpbiBib3RoIG9iamVjdHMsXG4gICAgICogdGhlIHZhbHVlIGZyb20gdGhlIHNlY29uZCBvYmplY3Qgd2lsbCBiZSB1c2VkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7azogdn0gLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQHNlZSBSLm1lcmdlV2l0aCwgUi5tZXJnZVdpdGhLZXlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1lcmdlKHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiAxMCB9LCB7ICdhZ2UnOiA0MCB9KTtcbiAgICAgKiAgICAgIC8vPT4geyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH1cbiAgICAgKlxuICAgICAqICAgICAgdmFyIHJlc2V0VG9EZWZhdWx0ID0gUi5tZXJnZShSLl9fLCB7eDogMH0pO1xuICAgICAqICAgICAgcmVzZXRUb0RlZmF1bHQoe3g6IDUsIHk6IDJ9KTsgLy89PiB7eDogMCwgeTogMn1cbiAgICAgKi9cbiAgICB2YXIgbWVyZ2UgPSBfY3VycnkyKGZ1bmN0aW9uIG1lcmdlKGwsIHIpIHtcbiAgICAgICAgcmV0dXJuIF9hc3NpZ24oe30sIGwsIHIpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogTWVyZ2VzIGEgbGlzdCBvZiBvYmplY3RzIHRvZ2V0aGVyIGludG8gb25lIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbe2s6IHZ9XSAtPiB7azogdn1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IEFuIGFycmF5IG9mIG9iamVjdHNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEEgbWVyZ2VkIG9iamVjdC5cbiAgICAgKiBAc2VlIFIucmVkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5tZXJnZUFsbChbe2ZvbzoxfSx7YmFyOjJ9LHtiYXo6M31dKTsgLy89PiB7Zm9vOjEsYmFyOjIsYmF6OjN9XG4gICAgICogICAgICBSLm1lcmdlQWxsKFt7Zm9vOjF9LHtmb286Mn0se2JhcjoyfV0pOyAvLz0+IHtmb286MixiYXI6Mn1cbiAgICAgKi9cbiAgICB2YXIgbWVyZ2VBbGwgPSBfY3VycnkxKGZ1bmN0aW9uIG1lcmdlQWxsKGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIF9hc3NpZ24uYXBwbHkobnVsbCwgW3t9XS5jb25jYXQobGlzdCkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgd2l0aCB0aGUgb3duIHByb3BlcnRpZXMgb2YgdGhlIHR3byBwcm92aWRlZCBvYmplY3RzLiBJZlxuICAgICAqIGEga2V5IGV4aXN0cyBpbiBib3RoIG9iamVjdHMsIHRoZSBwcm92aWRlZCBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSBrZXlcbiAgICAgKiBhbmQgdGhlIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIGtleSBpbiBlYWNoIG9iamVjdCwgd2l0aCB0aGUgcmVzdWx0IGJlaW5nXG4gICAgICogdXNlZCBhcyB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkgaW4gdGhlIHJldHVybmVkIG9iamVjdC4gVGhlIGtleVxuICAgICAqIHdpbGwgYmUgZXhjbHVkZWQgZnJvbSB0aGUgcmV0dXJuZWQgb2JqZWN0IGlmIHRoZSByZXN1bHRpbmcgdmFsdWUgaXNcbiAgICAgKiBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIChTdHJpbmcgLT4gYSAtPiBhIC0+IGEpIC0+IHthfSAtPiB7YX0gLT4ge2F9XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqIEBzZWUgUi5tZXJnZSwgUi5tZXJnZVdpdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBsZXQgY29uY2F0VmFsdWVzID0gKGssIGwsIHIpID0+IGsgPT0gJ3ZhbHVlcycgPyBSLmNvbmNhdChsLCByKSA6IHJcbiAgICAgKiAgICAgIFIubWVyZ2VXaXRoS2V5KGNvbmNhdFZhbHVlcyxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIHsgYTogdHJ1ZSwgdGhpbmc6ICdmb28nLCB2YWx1ZXM6IFsxMCwgMjBdIH0sXG4gICAgICogICAgICAgICAgICAgICAgICAgICB7IGI6IHRydWUsIHRoaW5nOiAnYmFyJywgdmFsdWVzOiBbMTUsIDM1XSB9KTtcbiAgICAgKiAgICAgIC8vPT4geyBhOiB0cnVlLCBiOiB0cnVlLCB0aGluZzogJ2JhcicsIHZhbHVlczogWzEwLCAyMCwgMTUsIDM1XSB9XG4gICAgICovXG4gICAgdmFyIG1lcmdlV2l0aEtleSA9IF9jdXJyeTMoZnVuY3Rpb24gbWVyZ2VXaXRoS2V5KGZuLCBsLCByKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIGs7XG4gICAgICAgIGZvciAoayBpbiBsKSB7XG4gICAgICAgICAgICBpZiAoX2hhcyhrLCBsKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtrXSA9IF9oYXMoaywgcikgPyBmbihrLCBsW2tdLCByW2tdKSA6IGxba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfaGFzKGssIHIpICYmICFfaGFzKGssIHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRba10gPSByW2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzbWFsbGVyIG9mIGl0cyB0d28gYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBhID0+IGEgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHsqfSBhXG4gICAgICogQHBhcmFtIHsqfSBiXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIubWluQnksIFIubWF4XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5taW4oNzg5LCAxMjMpOyAvLz0+IDEyM1xuICAgICAqICAgICAgUi5taW4oJ2EnLCAnYicpOyAvLz0+ICdhJ1xuICAgICAqL1xuICAgIHZhciBtaW4gPSBfY3VycnkyKGZ1bmN0aW9uIG1pbihhLCBiKSB7XG4gICAgICAgIHJldHVybiBiIDwgYSA/IGIgOiBhO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBmdW5jdGlvbiBhbmQgdHdvIHZhbHVlcywgYW5kIHJldHVybnMgd2hpY2hldmVyIHZhbHVlIHByb2R1Y2VzIHRoZVxuICAgICAqIHNtYWxsZXIgcmVzdWx0IHdoZW4gcGFzc2VkIHRvIHRoZSBwcm92aWRlZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOC4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBPcmQgYiA9PiAoYSAtPiBiKSAtPiBhIC0+IGEgLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAgKiBAcGFyYW0geyp9IGFcbiAgICAgKiBAcGFyYW0geyp9IGJcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5taW4sIFIubWF4QnlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyAgc3F1YXJlIDo6IE51bWJlciAtPiBOdW1iZXJcbiAgICAgKiAgICAgIHZhciBzcXVhcmUgPSBuID0+IG4gKiBuO1xuICAgICAqXG4gICAgICogICAgICBSLm1pbkJ5KHNxdWFyZSwgLTMsIDIpOyAvLz0+IDJcbiAgICAgKlxuICAgICAqICAgICAgUi5yZWR1Y2UoUi5taW5CeShzcXVhcmUpLCBJbmZpbml0eSwgWzMsIC01LCA0LCAxLCAtMl0pOyAvLz0+IDFcbiAgICAgKiAgICAgIFIucmVkdWNlKFIubWluQnkoc3F1YXJlKSwgSW5maW5pdHksIFtdKTsgLy89PiBJbmZpbml0eVxuICAgICAqL1xuICAgIHZhciBtaW5CeSA9IF9jdXJyeTMoZnVuY3Rpb24gbWluQnkoZiwgYSwgYikge1xuICAgICAgICByZXR1cm4gZihiKSA8IGYoYSkgPyBiIDogYTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIERpdmlkZXMgdGhlIHNlY29uZCBwYXJhbWV0ZXIgYnkgdGhlIGZpcnN0IGFuZCByZXR1cm5zIHRoZSByZW1haW5kZXIuIE5vdGVcbiAgICAgKiB0aGF0IHRoaXMgZnVuY3Rpb24gcHJlc2VydmVzIHRoZSBKYXZhU2NyaXB0LXN0eWxlIGJlaGF2aW9yIGZvciBtb2R1bG8uIEZvclxuICAgICAqIG1hdGhlbWF0aWNhbCBtb2R1bG8gc2VlIGBtYXRoTW9kYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4xXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGEgVGhlIHZhbHVlIHRvIHRoZSBkaXZpZGUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGIgVGhlIHBzZXVkby1tb2R1bHVzXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgcmVzdWx0IG9mIGBiICUgYWAuXG4gICAgICogQHNlZSBSLm1hdGhNb2RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1vZHVsbygxNywgMyk7IC8vPT4gMlxuICAgICAqICAgICAgLy8gSlMgYmVoYXZpb3I6XG4gICAgICogICAgICBSLm1vZHVsbygtMTcsIDMpOyAvLz0+IC0yXG4gICAgICogICAgICBSLm1vZHVsbygxNywgLTMpOyAvLz0+IDJcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGlzT2RkID0gUi5tb2R1bG8oUi5fXywgMik7XG4gICAgICogICAgICBpc09kZCg0Mik7IC8vPT4gMFxuICAgICAqICAgICAgaXNPZGQoMjEpOyAvLz0+IDFcbiAgICAgKi9cbiAgICB2YXIgbW9kdWxvID0gX2N1cnJ5MihmdW5jdGlvbiBtb2R1bG8oYSwgYikge1xuICAgICAgICByZXR1cm4gYSAlIGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLiBFcXVpdmFsZW50IHRvIGBhICogYmAgYnV0IGN1cnJpZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhIFRoZSBmaXJzdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYiBUaGUgc2Vjb25kIHZhbHVlLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIHJlc3VsdCBvZiBgYSAqIGJgLlxuICAgICAqIEBzZWUgUi5kaXZpZGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZG91YmxlID0gUi5tdWx0aXBseSgyKTtcbiAgICAgKiAgICAgIHZhciB0cmlwbGUgPSBSLm11bHRpcGx5KDMpO1xuICAgICAqICAgICAgZG91YmxlKDMpOyAgICAgICAvLz0+ICA2XG4gICAgICogICAgICB0cmlwbGUoNCk7ICAgICAgIC8vPT4gMTJcbiAgICAgKiAgICAgIFIubXVsdGlwbHkoMiwgNSk7ICAvLz0+IDEwXG4gICAgICovXG4gICAgdmFyIG11bHRpcGx5ID0gX2N1cnJ5MihmdW5jdGlvbiBtdWx0aXBseShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhICogYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFdyYXBzIGEgZnVuY3Rpb24gb2YgYW55IGFyaXR5IChpbmNsdWRpbmcgbnVsbGFyeSkgaW4gYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHNcbiAgICAgKiBleGFjdGx5IGBuYCBwYXJhbWV0ZXJzLiBBbnkgZXh0cmFuZW91cyBwYXJhbWV0ZXJzIHdpbGwgbm90IGJlIHBhc3NlZCB0byB0aGVcbiAgICAgKiBzdXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBOdW1iZXIgLT4gKCogLT4gYSkgLT4gKCogLT4gYSlcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbiBUaGUgZGVzaXJlZCBhcml0eSBvZiB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyBgZm5gLiBUaGUgbmV3IGZ1bmN0aW9uIGlzIGd1YXJhbnRlZWQgdG8gYmUgb2ZcbiAgICAgKiAgICAgICAgIGFyaXR5IGBuYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdGFrZXNUd29BcmdzID0gKGEsIGIpID0+IFthLCBiXTtcbiAgICAgKlxuICAgICAqICAgICAgdGFrZXNUd29BcmdzLmxlbmd0aDsgLy89PiAyXG4gICAgICogICAgICB0YWtlc1R3b0FyZ3MoMSwgMik7IC8vPT4gWzEsIDJdXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB0YWtlc09uZUFyZyA9IFIubkFyeSgxLCB0YWtlc1R3b0FyZ3MpO1xuICAgICAqICAgICAgdGFrZXNPbmVBcmcubGVuZ3RoOyAvLz0+IDFcbiAgICAgKiAgICAgIC8vIE9ubHkgYG5gIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRvIHRoZSB3cmFwcGVkIGZ1bmN0aW9uXG4gICAgICogICAgICB0YWtlc09uZUFyZygxLCAyKTsgLy89PiBbMSwgdW5kZWZpbmVkXVxuICAgICAqL1xuICAgIHZhciBuQXJ5ID0gX2N1cnJ5MihmdW5jdGlvbiBuQXJ5KG4sIGZuKSB7XG4gICAgICAgIHN3aXRjaCAobikge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIsIGEzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExLCBhMiwgYTMsIGE0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIsIGEzLCBhNCwgYTUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIsIGEzLCBhNCwgYTUsIGE2KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3LCBhOCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIsIGEzLCBhNCwgYTUsIGE2LCBhNywgYTgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3LCBhOCwgYTkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNiwgYTcsIGE4LCBhOSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJzdCBhcmd1bWVudCB0byBuQXJ5IG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlciBubyBncmVhdGVyIHRoYW4gdGVuJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE5lZ2F0ZXMgaXRzIGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubmVnYXRlKDQyKTsgLy89PiAtNDJcbiAgICAgKi9cbiAgICB2YXIgbmVnYXRlID0gX2N1cnJ5MShmdW5jdGlvbiBuZWdhdGUobikge1xuICAgICAgICByZXR1cm4gLW47XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBubyBlbGVtZW50cyBvZiB0aGUgbGlzdCBtYXRjaCB0aGUgcHJlZGljYXRlLCBgZmFsc2VgXG4gICAgICogb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGFueWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgcHJlZGljYXRlIGlzIG5vdCBzYXRpc2ZpZWQgYnkgZXZlcnkgZWxlbWVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQHNlZSBSLmFsbCwgUi5hbnlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNFdmVuID0gbiA9PiBuICUgMiA9PT0gMDtcbiAgICAgKlxuICAgICAqICAgICAgUi5ub25lKGlzRXZlbiwgWzEsIDMsIDUsIDcsIDksIDExXSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5ub25lKGlzRXZlbiwgWzEsIDMsIDUsIDcsIDgsIDExXSk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgbm9uZSA9IF9jdXJyeTIoX2NvbXBsZW1lbnQoX2Rpc3BhdGNoYWJsZSgnYW55JywgX3hhbnksIGFueSkpKTtcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBgIWAgb2YgaXRzIGFyZ3VtZW50LiBJdCB3aWxsIHJldHVybiBgdHJ1ZWAgd2hlblxuICAgICAqIHBhc3NlZCBmYWxzZS15IHZhbHVlLCBhbmQgYGZhbHNlYCB3aGVuIHBhc3NlZCBhIHRydXRoLXkgb25lLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnICogLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn0gYSBhbnkgdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0aGUgbG9naWNhbCBpbnZlcnNlIG9mIHBhc3NlZCBhcmd1bWVudC5cbiAgICAgKiBAc2VlIFIuY29tcGxlbWVudFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubm90KHRydWUpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLm5vdChmYWxzZSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5ub3QoMCk7ID0+IHRydWVcbiAgICAgKiAgICAgIFIubm90KDEpOyA9PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBub3QgPSBfY3VycnkxKGZ1bmN0aW9uIG5vdChhKSB7XG4gICAgICAgIHJldHVybiAhYTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG50aCBlbGVtZW50IG9mIHRoZSBnaXZlbiBsaXN0IG9yIHN0cmluZy4gSWYgbiBpcyBuZWdhdGl2ZSB0aGVcbiAgICAgKiBlbGVtZW50IGF0IGluZGV4IGxlbmd0aCArIG4gaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IGEgfCBVbmRlZmluZWRcbiAgICAgKiBAc2lnIE51bWJlciAtPiBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldFxuICAgICAqIEBwYXJhbSB7Kn0gbGlzdFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGxpc3QgPSBbJ2ZvbycsICdiYXInLCAnYmF6JywgJ3F1dXgnXTtcbiAgICAgKiAgICAgIFIubnRoKDEsIGxpc3QpOyAvLz0+ICdiYXInXG4gICAgICogICAgICBSLm50aCgtMSwgbGlzdCk7IC8vPT4gJ3F1dXgnXG4gICAgICogICAgICBSLm50aCgtOTksIGxpc3QpOyAvLz0+IHVuZGVmaW5lZFxuICAgICAqXG4gICAgICogICAgICBSLm50aCgyLCAnYWJjJyk7IC8vPT4gJ2MnXG4gICAgICogICAgICBSLm50aCgzLCAnYWJjJyk7IC8vPT4gJydcbiAgICAgKi9cbiAgICB2YXIgbnRoID0gX2N1cnJ5MihmdW5jdGlvbiBudGgob2Zmc2V0LCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSBvZmZzZXQgPCAwID8gbGlzdC5sZW5ndGggKyBvZmZzZXQgOiBvZmZzZXQ7XG4gICAgICAgIHJldHVybiBfaXNTdHJpbmcobGlzdCkgPyBsaXN0LmNoYXJBdChpZHgpIDogbGlzdFtpZHhdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgaXRzIG50aCBhcmd1bWVudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBOdW1iZXIgLT4gKi4uLiAtPiAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm50aEFyZygxKSgnYScsICdiJywgJ2MnKTsgLy89PiAnYidcbiAgICAgKiAgICAgIFIubnRoQXJnKC0xKSgnYScsICdiJywgJ2MnKTsgLy89PiAnYydcbiAgICAgKi9cbiAgICB2YXIgbnRoQXJnID0gX2N1cnJ5MShmdW5jdGlvbiBudGhBcmcobikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG50aChuLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29udGFpbmluZyBhIHNpbmdsZSBrZXk6dmFsdWUgcGFpci5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFN0cmluZyAtPiBhIC0+IHtTdHJpbmc6YX1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogQHBhcmFtIHsqfSB2YWxcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQHNlZSBSLnBhaXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbWF0Y2hQaHJhc2VzID0gUi5jb21wb3NlKFxuICAgICAqICAgICAgICBSLm9iak9mKCdtdXN0JyksXG4gICAgICogICAgICAgIFIubWFwKFIub2JqT2YoJ21hdGNoX3BocmFzZScpKVxuICAgICAqICAgICAgKTtcbiAgICAgKiAgICAgIG1hdGNoUGhyYXNlcyhbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IHttdXN0OiBbe21hdGNoX3BocmFzZTogJ2Zvbyd9LCB7bWF0Y2hfcGhyYXNlOiAnYmFyJ30sIHttYXRjaF9waHJhc2U6ICdiYXonfV19XG4gICAgICovXG4gICAgdmFyIG9iak9mID0gX2N1cnJ5MihmdW5jdGlvbiBvYmpPZihrZXksIHZhbCkge1xuICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgIG9ialtrZXldID0gdmFsO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHNpbmdsZXRvbiBhcnJheSBjb250YWluaW5nIHRoZSB2YWx1ZSBwcm92aWRlZC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhpcyBgb2ZgIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBFUzYgYG9mYDsgU2VlXG4gICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvb2ZcbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBhIC0+IFthXVxuICAgICAqIEBwYXJhbSB7Kn0geCBhbnkgdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgd3JhcHBpbmcgYHhgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIub2YobnVsbCk7IC8vPT4gW251bGxdXG4gICAgICogICAgICBSLm9mKFs0Ml0pOyAvLz0+IFtbNDJdXVxuICAgICAqL1xuICAgIHZhciBvZiA9IF9jdXJyeTEoX29mKTtcblxuICAgIC8qKlxuICAgICAqIEFjY2VwdHMgYSBmdW5jdGlvbiBgZm5gIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBndWFyZHMgaW52b2NhdGlvbiBvZlxuICAgICAqIGBmbmAgc3VjaCB0aGF0IGBmbmAgY2FuIG9ubHkgZXZlciBiZSBjYWxsZWQgb25jZSwgbm8gbWF0dGVyIGhvdyBtYW55IHRpbWVzXG4gICAgICogdGhlIHJldHVybmVkIGZ1bmN0aW9uIGlzIGludm9rZWQuIFRoZSBmaXJzdCB2YWx1ZSBjYWxjdWxhdGVkIGlzIHJldHVybmVkIGluXG4gICAgICogc3Vic2VxdWVudCBpbnZvY2F0aW9ucy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoYS4uLiAtPiBiKSAtPiAoYS4uLiAtPiBiKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwIGluIGEgY2FsbC1vbmx5LW9uY2Ugd3JhcHBlci5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIHdyYXBwZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGFkZE9uZU9uY2UgPSBSLm9uY2UoeCA9PiB4ICsgMSk7XG4gICAgICogICAgICBhZGRPbmVPbmNlKDEwKTsgLy89PiAxMVxuICAgICAqICAgICAgYWRkT25lT25jZShhZGRPbmVPbmNlKDUwKSk7IC8vPT4gMTFcbiAgICAgKi9cbiAgICB2YXIgb25jZSA9IF9jdXJyeTEoZnVuY3Rpb24gb25jZShmbikge1xuICAgICAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHJldHVybiBfYXJpdHkoZm4ubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICByZXN1bHQgPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBvbmUgb3IgYm90aCBvZiBpdHMgYXJndW1lbnRzIGFyZSBgdHJ1ZWAuIFJldHVybnMgYGZhbHNlYFxuICAgICAqIGlmIGJvdGggYXJndW1lbnRzIGFyZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnICogLT4gKiAtPiAqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBhIEEgYm9vbGVhbiB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYiBBIGJvb2xlYW4gdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgb25lIG9yIGJvdGggYXJndW1lbnRzIGFyZSBgdHJ1ZWAsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gICAgICogQHNlZSBSLmVpdGhlclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIub3IodHJ1ZSwgdHJ1ZSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5vcih0cnVlLCBmYWxzZSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5vcihmYWxzZSwgdHJ1ZSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5vcihmYWxzZSwgZmFsc2UpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIG9yID0gX2N1cnJ5MihmdW5jdGlvbiBvcihhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIHx8IGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgXCJzZXR0aW5nXCIgdGhlIHBvcnRpb24gb2YgdGhlIGdpdmVuIGRhdGEgc3RydWN0dXJlXG4gICAgICogZm9jdXNlZCBieSB0aGUgZ2l2ZW4gbGVucyB0byB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBnaXZlbiBmdW5jdGlvbiB0b1xuICAgICAqIHRoZSBmb2N1c2VkIHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEB0eXBlZGVmbiBMZW5zIHMgYSA9IEZ1bmN0b3IgZiA9PiAoYSAtPiBmIGEpIC0+IHMgLT4gZiBzXG4gICAgICogQHNpZyBMZW5zIHMgYSAtPiAoYSAtPiBhKSAtPiBzIC0+IHNcbiAgICAgKiBAcGFyYW0ge0xlbnN9IGxlbnNcbiAgICAgKiBAcGFyYW0geyp9IHZcbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5wcm9wLCBSLmxlbnNJbmRleCwgUi5sZW5zUHJvcFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBoZWFkTGVucyA9IFIubGVuc0luZGV4KDApO1xuICAgICAqXG4gICAgICogICAgICBSLm92ZXIoaGVhZExlbnMsIFIudG9VcHBlciwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ0ZPTycsICdiYXInLCAnYmF6J11cbiAgICAgKi9cbiAgICAvLyBgSWRlbnRpdHlgIGlzIGEgZnVuY3RvciB0aGF0IGhvbGRzIGEgc2luZ2xlIHZhbHVlLCB3aGVyZSBgbWFwYCBzaW1wbHlcbiAgICAvLyB0cmFuc2Zvcm1zIHRoZSBoZWxkIHZhbHVlIHdpdGggdGhlIHByb3ZpZGVkIGZ1bmN0aW9uLlxuICAgIC8vIFRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgZ2V0dGVyIGZ1bmN0aW9uIGlzIGZpcnN0IHRyYW5zZm9ybWVkIHdpdGggYGZgLFxuICAgIC8vIHRoZW4gc2V0IGFzIHRoZSB2YWx1ZSBvZiBhbiBgSWRlbnRpdHlgLiBUaGlzIGlzIHRoZW4gbWFwcGVkIG92ZXIgd2l0aCB0aGVcbiAgICAvLyBzZXR0ZXIgZnVuY3Rpb24gb2YgdGhlIGxlbnMuXG4gICAgdmFyIG92ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGBJZGVudGl0eWAgaXMgYSBmdW5jdG9yIHRoYXQgaG9sZHMgYSBzaW5nbGUgdmFsdWUsIHdoZXJlIGBtYXBgIHNpbXBseVxuICAgICAgICAvLyB0cmFuc2Zvcm1zIHRoZSBoZWxkIHZhbHVlIHdpdGggdGhlIHByb3ZpZGVkIGZ1bmN0aW9uLlxuICAgICAgICB2YXIgSWRlbnRpdHkgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogeCxcbiAgICAgICAgICAgICAgICBtYXA6IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJZGVudGl0eShmKHgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MyhmdW5jdGlvbiBvdmVyKGxlbnMsIGYsIHgpIHtcbiAgICAgICAgICAgIC8vIFRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgZ2V0dGVyIGZ1bmN0aW9uIGlzIGZpcnN0IHRyYW5zZm9ybWVkIHdpdGggYGZgLFxuICAgICAgICAgICAgLy8gdGhlbiBzZXQgYXMgdGhlIHZhbHVlIG9mIGFuIGBJZGVudGl0eWAuIFRoaXMgaXMgdGhlbiBtYXBwZWQgb3ZlciB3aXRoIHRoZVxuICAgICAgICAgICAgLy8gc2V0dGVyIGZ1bmN0aW9uIG9mIHRoZSBsZW5zLlxuICAgICAgICAgICAgcmV0dXJuIGxlbnMoZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSWRlbnRpdHkoZih5KSk7XG4gICAgICAgICAgICB9KSh4KS52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgdHdvIGFyZ3VtZW50cywgYGZzdGAgYW5kIGBzbmRgLCBhbmQgcmV0dXJucyBgW2ZzdCwgc25kXWAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE4LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgYSAtPiBiIC0+IChhLGIpXG4gICAgICogQHBhcmFtIHsqfSBmc3RcbiAgICAgKiBAcGFyYW0geyp9IHNuZFxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqIEBzZWUgUi5vYmpPZiwgUi5vZlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucGFpcignZm9vJywgJ2JhcicpOyAvLz0+IFsnZm9vJywgJ2JhciddXG4gICAgICovXG4gICAgdmFyIHBhaXIgPSBfY3VycnkyKGZ1bmN0aW9uIHBhaXIoZnN0LCBzbmQpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGZzdCxcbiAgICAgICAgICAgIHNuZFxuICAgICAgICBdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgdGhlIHZhbHVlIGF0IGEgZ2l2ZW4gcGF0aC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgW1N0cmluZ10gLT4ge2s6IHZ9IC0+IHYgfCBVbmRlZmluZWRcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXRoIFRoZSBwYXRoIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcmV0cmlldmUgdGhlIG5lc3RlZCBwcm9wZXJ0eSBmcm9tLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBkYXRhIGF0IGBwYXRoYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnBhdGgoWydhJywgJ2InXSwge2E6IHtiOiAyfX0pOyAvLz0+IDJcbiAgICAgKiAgICAgIFIucGF0aChbJ2EnLCAnYiddLCB7Yzoge2I6IDJ9fSk7IC8vPT4gdW5kZWZpbmVkXG4gICAgICovXG4gICAgdmFyIHBhdGggPSBfY3VycnkyKGZ1bmN0aW9uIHBhdGgocGF0aHMsIG9iaikge1xuICAgICAgICB2YXIgdmFsID0gb2JqO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IHBhdGhzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsID0gdmFsW3BhdGhzW2lkeF1dO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnaXZlbiwgbm9uLW51bGwgb2JqZWN0IGhhcyBhIHZhbHVlIGF0IHRoZSBnaXZlbiBwYXRoLCByZXR1cm5zIHRoZVxuICAgICAqIHZhbHVlIGF0IHRoYXQgcGF0aC4gT3RoZXJ3aXNlIHJldHVybnMgdGhlIHByb3ZpZGVkIGRlZmF1bHQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE4LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBhIC0+IFtTdHJpbmddIC0+IE9iamVjdCAtPiBhXG4gICAgICogQHBhcmFtIHsqfSBkIFRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHAgVGhlIHBhdGggdG8gdXNlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byByZXRyaWV2ZSB0aGUgbmVzdGVkIHByb3BlcnR5IGZyb20uXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGRhdGEgYXQgYHBhdGhgIG9mIHRoZSBzdXBwbGllZCBvYmplY3Qgb3IgdGhlIGRlZmF1bHQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wYXRoT3IoJ04vQScsIFsnYScsICdiJ10sIHthOiB7YjogMn19KTsgLy89PiAyXG4gICAgICogICAgICBSLnBhdGhPcignTi9BJywgWydhJywgJ2InXSwge2M6IHtiOiAyfX0pOyAvLz0+IFwiTi9BXCJcbiAgICAgKi9cbiAgICB2YXIgcGF0aE9yID0gX2N1cnJ5MyhmdW5jdGlvbiBwYXRoT3IoZCwgcCwgb2JqKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VG8oZCwgcGF0aChwLCBvYmopKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzcGVjaWZpZWQgb2JqZWN0IHByb3BlcnR5IGF0IGdpdmVuIHBhdGggc2F0aXNmaWVzIHRoZVxuICAgICAqIGdpdmVuIHByZWRpY2F0ZTsgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFtTdHJpbmddIC0+IE9iamVjdCAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByb3BQYXRoXG4gICAgICogQHBhcmFtIHsqfSBvYmpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5wcm9wU2F0aXNmaWVzLCBSLnBhdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnBhdGhTYXRpc2ZpZXMoeSA9PiB5ID4gMCwgWyd4JywgJ3knXSwge3g6IHt5OiAyfX0pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgcGF0aFNhdGlzZmllcyA9IF9jdXJyeTMoZnVuY3Rpb24gcGF0aFNhdGlzZmllcyhwcmVkLCBwcm9wUGF0aCwgb2JqKSB7XG4gICAgICAgIHJldHVybiBwcm9wUGF0aC5sZW5ndGggPiAwICYmIHByZWQocGF0aChwcm9wUGF0aCwgb2JqKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcGFydGlhbCBjb3B5IG9mIGFuIG9iamVjdCBjb250YWluaW5nIG9ubHkgdGhlIGtleXMgc3BlY2lmaWVkLiBJZlxuICAgICAqIHRoZSBrZXkgZG9lcyBub3QgZXhpc3QsIHRoZSBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBba10gLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG5hbWVzIGFuIGFycmF5IG9mIFN0cmluZyBwcm9wZXJ0eSBuYW1lcyB0byBjb3B5IG9udG8gYSBuZXcgb2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGNvcHkgZnJvbVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQSBuZXcgb2JqZWN0IHdpdGggb25seSBwcm9wZXJ0aWVzIGZyb20gYG5hbWVzYCBvbiBpdC5cbiAgICAgKiBAc2VlIFIub21pdCwgUi5wcm9wc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucGljayhbJ2EnLCAnZCddLCB7YTogMSwgYjogMiwgYzogMywgZDogNH0pOyAvLz0+IHthOiAxLCBkOiA0fVxuICAgICAqICAgICAgUi5waWNrKFsnYScsICdlJywgJ2YnXSwge2E6IDEsIGI6IDIsIGM6IDMsIGQ6IDR9KTsgLy89PiB7YTogMX1cbiAgICAgKi9cbiAgICB2YXIgcGljayA9IF9jdXJyeTIoZnVuY3Rpb24gcGljayhuYW1lcywgb2JqKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBuYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChuYW1lc1tpZHhdIGluIG9iaikge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtuYW1lc1tpZHhdXSA9IG9ialtuYW1lc1tpZHhdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBTaW1pbGFyIHRvIGBwaWNrYCBleGNlcHQgdGhhdCB0aGlzIG9uZSBpbmNsdWRlcyBhIGBrZXk6IHVuZGVmaW5lZGAgcGFpciBmb3JcbiAgICAgKiBwcm9wZXJ0aWVzIHRoYXQgZG9uJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFtrXSAtPiB7azogdn0gLT4ge2s6IHZ9XG4gICAgICogQHBhcmFtIHtBcnJheX0gbmFtZXMgYW4gYXJyYXkgb2YgU3RyaW5nIHByb3BlcnR5IG5hbWVzIHRvIGNvcHkgb250byBhIG5ldyBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gY29weSBmcm9tXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBIG5ldyBvYmplY3Qgd2l0aCBvbmx5IHByb3BlcnRpZXMgZnJvbSBgbmFtZXNgIG9uIGl0LlxuICAgICAqIEBzZWUgUi5waWNrXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5waWNrQWxsKFsnYScsICdkJ10sIHthOiAxLCBiOiAyLCBjOiAzLCBkOiA0fSk7IC8vPT4ge2E6IDEsIGQ6IDR9XG4gICAgICogICAgICBSLnBpY2tBbGwoWydhJywgJ2UnLCAnZiddLCB7YTogMSwgYjogMiwgYzogMywgZDogNH0pOyAvLz0+IHthOiAxLCBlOiB1bmRlZmluZWQsIGY6IHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB2YXIgcGlja0FsbCA9IF9jdXJyeTIoZnVuY3Rpb24gcGlja0FsbChuYW1lcywgb2JqKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBuYW1lcy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gbmFtZXNbaWR4XTtcbiAgICAgICAgICAgIHJlc3VsdFtuYW1lXSA9IG9ialtuYW1lXTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcGFydGlhbCBjb3B5IG9mIGFuIG9iamVjdCBjb250YWluaW5nIG9ubHkgdGhlIGtleXMgdGhhdCBzYXRpc2Z5XG4gICAgICogdGhlIHN1cHBsaWVkIHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgKHYsIGsgLT4gQm9vbGVhbikgLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgQSBwcmVkaWNhdGUgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90IGEga2V5XG4gICAgICogICAgICAgIHNob3VsZCBiZSBpbmNsdWRlZCBvbiB0aGUgb3V0cHV0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gY29weSBmcm9tXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBIG5ldyBvYmplY3Qgd2l0aCBvbmx5IHByb3BlcnRpZXMgdGhhdCBzYXRpc2Z5IGBwcmVkYFxuICAgICAqICAgICAgICAgb24gaXQuXG4gICAgICogQHNlZSBSLnBpY2ssIFIuZmlsdGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGlzVXBwZXJDYXNlID0gKHZhbCwga2V5KSA9PiBrZXkudG9VcHBlckNhc2UoKSA9PT0ga2V5O1xuICAgICAqICAgICAgUi5waWNrQnkoaXNVcHBlckNhc2UsIHthOiAxLCBiOiAyLCBBOiAzLCBCOiA0fSk7IC8vPT4ge0E6IDMsIEI6IDR9XG4gICAgICovXG4gICAgdmFyIHBpY2tCeSA9IF9jdXJyeTIoZnVuY3Rpb24gcGlja0J5KHRlc3QsIG9iaikge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAodGVzdChvYmpbcHJvcF0sIHByb3AsIG9iaikpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCB3aXRoIHRoZSBnaXZlbiBlbGVtZW50IGF0IHRoZSBmcm9udCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICogY29udGVudHMgb2YgdGhlIGxpc3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0geyp9IGVsIFRoZSBpdGVtIHRvIGFkZCB0byB0aGUgaGVhZCBvZiB0aGUgb3V0cHV0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gYWRkIHRvIHRoZSB0YWlsIG9mIHRoZSBvdXRwdXQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgYXJyYXkuXG4gICAgICogQHNlZSBSLmFwcGVuZFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucHJlcGVuZCgnZmVlJywgWydmaScsICdmbycsICdmdW0nXSk7IC8vPT4gWydmZWUnLCAnZmknLCAnZm8nLCAnZnVtJ11cbiAgICAgKi9cbiAgICB2YXIgcHJlcGVuZCA9IF9jdXJyeTIoZnVuY3Rpb24gcHJlcGVuZChlbCwgbGlzdCkge1xuICAgICAgICByZXR1cm4gX2NvbmNhdChbZWxdLCBsaXN0KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdoZW4gc3VwcGxpZWQgYW4gb2JqZWN0IHJldHVybnMgdGhlIGluZGljYXRlZFxuICAgICAqIHByb3BlcnR5IG9mIHRoYXQgb2JqZWN0LCBpZiBpdCBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHMgLT4ge3M6IGF9IC0+IGEgfCBVbmRlZmluZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcCBUaGUgcHJvcGVydHkgbmFtZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBxdWVyeVxuICAgICAqIEByZXR1cm4geyp9IFRoZSB2YWx1ZSBhdCBgb2JqLnBgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucHJvcCgneCcsIHt4OiAxMDB9KTsgLy89PiAxMDBcbiAgICAgKiAgICAgIFIucHJvcCgneCcsIHt9KTsgLy89PiB1bmRlZmluZWRcbiAgICAgKi9cbiAgICB2YXIgcHJvcCA9IF9jdXJyeTIoZnVuY3Rpb24gcHJvcChwLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIG9ialtwXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnaXZlbiwgbm9uLW51bGwgb2JqZWN0IGhhcyBhbiBvd24gcHJvcGVydHkgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUsXG4gICAgICogcmV0dXJucyB0aGUgdmFsdWUgb2YgdGhhdCBwcm9wZXJ0eS4gT3RoZXJ3aXNlIHJldHVybnMgdGhlIHByb3ZpZGVkIGRlZmF1bHRcbiAgICAgKiB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgYSAtPiBTdHJpbmcgLT4gT2JqZWN0IC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IHZhbCBUaGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcCBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcmV0dXJuLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgdmFsdWUgb2YgZ2l2ZW4gcHJvcGVydHkgb2YgdGhlIHN1cHBsaWVkIG9iamVjdCBvciB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYWxpY2UgPSB7XG4gICAgICogICAgICAgIG5hbWU6ICdBTElDRScsXG4gICAgICogICAgICAgIGFnZTogMTAxXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgdmFyIGZhdm9yaXRlID0gUi5wcm9wKCdmYXZvcml0ZUxpYnJhcnknKTtcbiAgICAgKiAgICAgIHZhciBmYXZvcml0ZVdpdGhEZWZhdWx0ID0gUi5wcm9wT3IoJ1JhbWRhJywgJ2Zhdm9yaXRlTGlicmFyeScpO1xuICAgICAqXG4gICAgICogICAgICBmYXZvcml0ZShhbGljZSk7ICAvLz0+IHVuZGVmaW5lZFxuICAgICAqICAgICAgZmF2b3JpdGVXaXRoRGVmYXVsdChhbGljZSk7ICAvLz0+ICdSYW1kYSdcbiAgICAgKi9cbiAgICB2YXIgcHJvcE9yID0gX2N1cnJ5MyhmdW5jdGlvbiBwcm9wT3IodmFsLCBwLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIF9oYXMocCwgb2JqKSA/IG9ialtwXSA6IHZhbDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzcGVjaWZpZWQgb2JqZWN0IHByb3BlcnR5IHNhdGlzZmllcyB0aGUgZ2l2ZW5cbiAgICAgKiBwcmVkaWNhdGU7IGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBTdHJpbmcgLT4ge1N0cmluZzogYX0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIucHJvcEVxLCBSLnByb3BJc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucHJvcFNhdGlzZmllcyh4ID0+IHggPiAwLCAneCcsIHt4OiAxLCB5OiAyfSk7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBwcm9wU2F0aXNmaWVzID0gX2N1cnJ5MyhmdW5jdGlvbiBwcm9wU2F0aXNmaWVzKHByZWQsIG5hbWUsIG9iaikge1xuICAgICAgICByZXR1cm4gcHJlZChvYmpbbmFtZV0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQWN0cyBhcyBtdWx0aXBsZSBgcHJvcGA6IGFycmF5IG9mIGtleXMgaW4sIGFycmF5IG9mIHZhbHVlcyBvdXQuIFByZXNlcnZlc1xuICAgICAqIG9yZGVyLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBba10gLT4ge2s6IHZ9IC0+IFt2XVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBmZXRjaFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBxdWVyeVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgY29ycmVzcG9uZGluZyB2YWx1ZXMgb3IgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wcm9wcyhbJ3gnLCAneSddLCB7eDogMSwgeTogMn0pOyAvLz0+IFsxLCAyXVxuICAgICAqICAgICAgUi5wcm9wcyhbJ2MnLCAnYScsICdiJ10sIHtiOiAyLCBhOiAxfSk7IC8vPT4gW3VuZGVmaW5lZCwgMSwgMl1cbiAgICAgKlxuICAgICAqICAgICAgdmFyIGZ1bGxOYW1lID0gUi5jb21wb3NlKFIuam9pbignICcpLCBSLnByb3BzKFsnZmlyc3QnLCAnbGFzdCddKSk7XG4gICAgICogICAgICBmdWxsTmFtZSh7bGFzdDogJ0J1bGxldC1Ub290aCcsIGFnZTogMzMsIGZpcnN0OiAnVG9ueSd9KTsgLy89PiAnVG9ueSBCdWxsZXQtVG9vdGgnXG4gICAgICovXG4gICAgdmFyIHByb3BzID0gX2N1cnJ5MihmdW5jdGlvbiBwcm9wcyhwcywgb2JqKSB7XG4gICAgICAgIHZhciBsZW4gPSBwcy5sZW5ndGg7XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIG91dFtpZHhdID0gb2JqW3BzW2lkeF1dO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIG51bWJlcnMgZnJvbSBgZnJvbWAgKGluY2x1c2l2ZSkgdG8gYHRvYCAoZXhjbHVzaXZlKS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gW051bWJlcl1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZnJvbSBUaGUgZmlyc3QgbnVtYmVyIGluIHRoZSBsaXN0LlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0byBPbmUgbW9yZSB0aGFuIHRoZSBsYXN0IG51bWJlciBpbiB0aGUgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGxpc3Qgb2YgbnVtYmVycyBpbiB0dGhlIHNldCBgW2EsIGIpYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnJhbmdlKDEsIDUpOyAgICAvLz0+IFsxLCAyLCAzLCA0XVxuICAgICAqICAgICAgUi5yYW5nZSg1MCwgNTMpOyAgLy89PiBbNTAsIDUxLCA1Ml1cbiAgICAgKi9cbiAgICB2YXIgcmFuZ2UgPSBfY3VycnkyKGZ1bmN0aW9uIHJhbmdlKGZyb20sIHRvKSB7XG4gICAgICAgIGlmICghKF9pc051bWJlcihmcm9tKSAmJiBfaXNOdW1iZXIodG8pKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm90aCBhcmd1bWVudHMgdG8gcmFuZ2UgbXVzdCBiZSBudW1iZXJzJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB2YXIgbiA9IGZyb207XG4gICAgICAgIHdoaWxlIChuIDwgdG8pIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG4pO1xuICAgICAgICAgICAgbiArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2luZ2xlIGl0ZW0gYnkgaXRlcmF0aW5nIHRocm91Z2ggdGhlIGxpc3QsIHN1Y2Nlc3NpdmVseSBjYWxsaW5nXG4gICAgICogdGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIGFuZCBwYXNzaW5nIGl0IGFuIGFjY3VtdWxhdG9yIHZhbHVlIGFuZCB0aGUgY3VycmVudFxuICAgICAqIHZhbHVlIGZyb20gdGhlIGFycmF5LCBhbmQgdGhlbiBwYXNzaW5nIHRoZSByZXN1bHQgdG8gdGhlIG5leHQgY2FsbC5cbiAgICAgKlxuICAgICAqIFNpbWlsYXIgdG8gYHJlZHVjZWAsIGV4Y2VwdCBtb3ZlcyB0aHJvdWdoIHRoZSBpbnB1dCBsaXN0IGZyb20gdGhlIHJpZ2h0IHRvXG4gICAgICogdGhlIGxlZnQuXG4gICAgICpcbiAgICAgKiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24gcmVjZWl2ZXMgdHdvIHZhbHVlczogKihhY2MsIHZhbHVlKSpcbiAgICAgKlxuICAgICAqIE5vdGU6IGBSLnJlZHVjZVJpZ2h0YCBkb2VzIG5vdCBza2lwIGRlbGV0ZWQgb3IgdW5hc3NpZ25lZCBpbmRpY2VzIChzcGFyc2VcbiAgICAgKiBhcnJheXMpLCB1bmxpa2UgdGhlIG5hdGl2ZSBgQXJyYXkucHJvdG90eXBlLnJlZHVjZWAgbWV0aG9kLiBGb3IgbW9yZSBkZXRhaWxzXG4gICAgICogb24gdGhpcyBiZWhhdmlvciwgc2VlOlxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L3JlZHVjZVJpZ2h0I0Rlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSxiIC0+IGEpIC0+IGEgLT4gW2JdIC0+IGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24uIFJlY2VpdmVzIHR3byB2YWx1ZXMsIHRoZSBhY2N1bXVsYXRvciBhbmQgdGhlXG4gICAgICogICAgICAgIGN1cnJlbnQgZWxlbWVudCBmcm9tIHRoZSBhcnJheS5cbiAgICAgKiBAcGFyYW0geyp9IGFjYyBUaGUgYWNjdW11bGF0b3IgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGZpbmFsLCBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAc2VlIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgcGFpcnMgPSBbIFsnYScsIDFdLCBbJ2InLCAyXSwgWydjJywgM10gXTtcbiAgICAgKiAgICAgIHZhciBmbGF0dGVuUGFpcnMgPSAoYWNjLCBwYWlyKSA9PiBhY2MuY29uY2F0KHBhaXIpO1xuICAgICAqXG4gICAgICogICAgICBSLnJlZHVjZVJpZ2h0KGZsYXR0ZW5QYWlycywgW10sIHBhaXJzKTsgLy89PiBbICdjJywgMywgJ2InLCAyLCAnYScsIDEgXVxuICAgICAqL1xuICAgIHZhciByZWR1Y2VSaWdodCA9IF9jdXJyeTMoZnVuY3Rpb24gcmVkdWNlUmlnaHQoZm4sIGFjYywgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICB3aGlsZSAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIGFjYyA9IGZuKGFjYywgbGlzdFtpZHhdKTtcbiAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmFsdWUgd3JhcHBlZCB0byBpbmRpY2F0ZSB0aGF0IGl0IGlzIHRoZSBmaW5hbCB2YWx1ZSBvZiB0aGUgcmVkdWNlXG4gICAgICogYW5kIHRyYW5zZHVjZSBmdW5jdGlvbnMuIFRoZSByZXR1cm5lZCB2YWx1ZSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIGJsYWNrXG4gICAgICogYm94OiB0aGUgaW50ZXJuYWwgc3RydWN0dXJlIGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIHN0YWJsZS5cbiAgICAgKlxuICAgICAqIE5vdGU6IHRoaXMgb3B0aW1pemF0aW9uIGlzIHVuYXZhaWxhYmxlIHRvIGZ1bmN0aW9ucyBub3QgZXhwbGljaXRseSBsaXN0ZWRcbiAgICAgKiBhYm92ZS4gRm9yIGluc3RhbmNlLCBpdCBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSByZWR1Y2VSaWdodC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTUuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+ICpcbiAgICAgKiBAcGFyYW0geyp9IHggVGhlIGZpbmFsIHZhbHVlIG9mIHRoZSByZWR1Y2UuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHdyYXBwZWQgdmFsdWUuXG4gICAgICogQHNlZSBSLnJlZHVjZSwgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnJlZHVjZShcbiAgICAgKiAgICAgICAgUi5waXBlKFIuYWRkLCBSLndoZW4oUi5ndGUoUi5fXywgMTApLCBSLnJlZHVjZWQpKSxcbiAgICAgKiAgICAgICAgMCxcbiAgICAgKiAgICAgICAgWzEsIDIsIDMsIDQsIDVdKSAvLyAxMFxuICAgICAqL1xuICAgIHZhciByZWR1Y2VkID0gX2N1cnJ5MShfcmVkdWNlZCk7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzdWItbGlzdCBvZiBgbGlzdGAgc3RhcnRpbmcgYXQgaW5kZXggYHN0YXJ0YCBhbmQgY29udGFpbmluZ1xuICAgICAqIGBjb3VudGAgZWxlbWVudHMuIF9Ob3RlIHRoYXQgdGhpcyBpcyBub3QgZGVzdHJ1Y3RpdmVfOiBpdCByZXR1cm5zIGEgY29weSBvZlxuICAgICAqIHRoZSBsaXN0IHdpdGggdGhlIGNoYW5nZXMuXG4gICAgICogPHNtYWxsPk5vIGxpc3RzIGhhdmUgYmVlbiBoYXJtZWQgaW4gdGhlIGFwcGxpY2F0aW9uIG9mIHRoaXMgZnVuY3Rpb24uPC9zbWFsbD5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4yXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCBUaGUgcG9zaXRpb24gdG8gc3RhcnQgcmVtb3ZpbmcgZWxlbWVudHNcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byByZW1vdmVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIHJlbW92ZSBmcm9tXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgbmV3IEFycmF5IHdpdGggYGNvdW50YCBlbGVtZW50cyBmcm9tIGBzdGFydGAgcmVtb3ZlZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnJlbW92ZSgyLCAzLCBbMSwyLDMsNCw1LDYsNyw4XSk7IC8vPT4gWzEsMiw2LDcsOF1cbiAgICAgKi9cbiAgICB2YXIgcmVtb3ZlID0gX2N1cnJ5MyhmdW5jdGlvbiByZW1vdmUoc3RhcnQsIGNvdW50LCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfY29uY2F0KF9zbGljZShsaXN0LCAwLCBNYXRoLm1pbihzdGFydCwgbGlzdC5sZW5ndGgpKSwgX3NsaWNlKGxpc3QsIE1hdGgubWluKGxpc3QubGVuZ3RoLCBzdGFydCArIGNvdW50KSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZSBhIHN1YnN0cmluZyBvciByZWdleCBtYXRjaCBpbiBhIHN0cmluZyB3aXRoIGEgcmVwbGFjZW1lbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjcuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAc2lnIFJlZ0V4cHxTdHJpbmcgLT4gU3RyaW5nIC0+IFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge1JlZ0V4cHxTdHJpbmd9IHBhdHRlcm4gQSByZWd1bGFyIGV4cHJlc3Npb24gb3IgYSBzdWJzdHJpbmcgdG8gbWF0Y2guXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcGxhY2VtZW50IFRoZSBzdHJpbmcgdG8gcmVwbGFjZSB0aGUgbWF0Y2hlcyB3aXRoLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byBkbyB0aGUgc2VhcmNoIGFuZCByZXBsYWNlbWVudCBpbi5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSByZXN1bHQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5yZXBsYWNlKCdmb28nLCAnYmFyJywgJ2ZvbyBmb28gZm9vJyk7IC8vPT4gJ2JhciBmb28gZm9vJ1xuICAgICAqICAgICAgUi5yZXBsYWNlKC9mb28vLCAnYmFyJywgJ2ZvbyBmb28gZm9vJyk7IC8vPT4gJ2JhciBmb28gZm9vJ1xuICAgICAqXG4gICAgICogICAgICAvLyBVc2UgdGhlIFwiZ1wiIChnbG9iYWwpIGZsYWcgdG8gcmVwbGFjZSBhbGwgb2NjdXJyZW5jZXM6XG4gICAgICogICAgICBSLnJlcGxhY2UoL2Zvby9nLCAnYmFyJywgJ2ZvbyBmb28gZm9vJyk7IC8vPT4gJ2JhciBiYXIgYmFyJ1xuICAgICAqL1xuICAgIHZhciByZXBsYWNlID0gX2N1cnJ5MyhmdW5jdGlvbiByZXBsYWNlKHJlZ2V4LCByZXBsYWNlbWVudCwgc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZShyZWdleCwgcmVwbGFjZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IG9yIHN0cmluZyB3aXRoIHRoZSBlbGVtZW50cyBvciBjaGFyYWN0ZXJzIGluIHJldmVyc2VcbiAgICAgKiBvcmRlci5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gbGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5fFN0cmluZ31cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnJldmVyc2UoWzEsIDIsIDNdKTsgIC8vPT4gWzMsIDIsIDFdXG4gICAgICogICAgICBSLnJldmVyc2UoWzEsIDJdKTsgICAgIC8vPT4gWzIsIDFdXG4gICAgICogICAgICBSLnJldmVyc2UoWzFdKTsgICAgICAgIC8vPT4gWzFdXG4gICAgICogICAgICBSLnJldmVyc2UoW10pOyAgICAgICAgIC8vPT4gW11cbiAgICAgKlxuICAgICAqICAgICAgUi5yZXZlcnNlKCdhYmMnKTsgICAgICAvLz0+ICdjYmEnXG4gICAgICogICAgICBSLnJldmVyc2UoJ2FiJyk7ICAgICAgIC8vPT4gJ2JhJ1xuICAgICAqICAgICAgUi5yZXZlcnNlKCdhJyk7ICAgICAgICAvLz0+ICdhJ1xuICAgICAqICAgICAgUi5yZXZlcnNlKCcnKTsgICAgICAgICAvLz0+ICcnXG4gICAgICovXG4gICAgdmFyIHJldmVyc2UgPSBfY3VycnkxKGZ1bmN0aW9uIHJldmVyc2UobGlzdCkge1xuICAgICAgICByZXR1cm4gX2lzU3RyaW5nKGxpc3QpID8gbGlzdC5zcGxpdCgnJykucmV2ZXJzZSgpLmpvaW4oJycpIDogX3NsaWNlKGxpc3QpLnJldmVyc2UoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNjYW4gaXMgc2ltaWxhciB0byByZWR1Y2UsIGJ1dCByZXR1cm5zIGEgbGlzdCBvZiBzdWNjZXNzaXZlbHkgcmVkdWNlZCB2YWx1ZXNcbiAgICAgKiBmcm9tIHRoZSBsZWZ0XG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEsYiAtPiBhKSAtPiBhIC0+IFtiXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24uIFJlY2VpdmVzIHR3byB2YWx1ZXMsIHRoZSBhY2N1bXVsYXRvciBhbmQgdGhlXG4gICAgICogICAgICAgIGN1cnJlbnQgZWxlbWVudCBmcm9tIHRoZSBhcnJheVxuICAgICAqIEBwYXJhbSB7Kn0gYWNjIFRoZSBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBsaXN0IG9mIGFsbCBpbnRlcm1lZGlhdGVseSByZWR1Y2VkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbnVtYmVycyA9IFsxLCAyLCAzLCA0XTtcbiAgICAgKiAgICAgIHZhciBmYWN0b3JpYWxzID0gUi5zY2FuKFIubXVsdGlwbHksIDEsIG51bWJlcnMpOyAvLz0+IFsxLCAxLCAyLCA2LCAyNF1cbiAgICAgKi9cbiAgICB2YXIgc2NhbiA9IF9jdXJyeTMoZnVuY3Rpb24gc2NhbihmbiwgYWNjLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBbYWNjXTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgYWNjID0gZm4oYWNjLCBsaXN0W2lkeF0pO1xuICAgICAgICAgICAgcmVzdWx0W2lkeCArIDFdID0gYWNjO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdCBvZiBcInNldHRpbmdcIiB0aGUgcG9ydGlvbiBvZiB0aGUgZ2l2ZW4gZGF0YSBzdHJ1Y3R1cmVcbiAgICAgKiBmb2N1c2VkIGJ5IHRoZSBnaXZlbiBsZW5zIHRvIHRoZSBnaXZlbiB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAdHlwZWRlZm4gTGVucyBzIGEgPSBGdW5jdG9yIGYgPT4gKGEgLT4gZiBhKSAtPiBzIC0+IGYgc1xuICAgICAqIEBzaWcgTGVucyBzIGEgLT4gYSAtPiBzIC0+IHNcbiAgICAgKiBAcGFyYW0ge0xlbnN9IGxlbnNcbiAgICAgKiBAcGFyYW0geyp9IHZcbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5wcm9wLCBSLmxlbnNJbmRleCwgUi5sZW5zUHJvcFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB4TGVucyA9IFIubGVuc1Byb3AoJ3gnKTtcbiAgICAgKlxuICAgICAqICAgICAgUi5zZXQoeExlbnMsIDQsIHt4OiAxLCB5OiAyfSk7ICAvLz0+IHt4OiA0LCB5OiAyfVxuICAgICAqICAgICAgUi5zZXQoeExlbnMsIDgsIHt4OiAxLCB5OiAyfSk7ICAvLz0+IHt4OiA4LCB5OiAyfVxuICAgICAqL1xuICAgIHZhciBzZXQgPSBfY3VycnkzKGZ1bmN0aW9uIHNldChsZW5zLCB2LCB4KSB7XG4gICAgICAgIHJldHVybiBvdmVyKGxlbnMsIGFsd2F5cyh2KSwgeCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gbGlzdCBvciBzdHJpbmcgKG9yIG9iamVjdCB3aXRoIGEgYHNsaWNlYFxuICAgICAqIG1ldGhvZCkgZnJvbSBgZnJvbUluZGV4YCAoaW5jbHVzaXZlKSB0byBgdG9JbmRleGAgKGV4Y2x1c2l2ZSkuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgc2xpY2VgIG1ldGhvZCBvZiB0aGUgdGhpcmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuNFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBmcm9tSW5kZXggVGhlIHN0YXJ0IGluZGV4IChpbmNsdXNpdmUpLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0b0luZGV4IFRoZSBlbmQgaW5kZXggKGV4Y2x1c2l2ZSkuXG4gICAgICogQHBhcmFtIHsqfSBsaXN0XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnNsaWNlKDEsIDMsIFsnYScsICdiJywgJ2MnLCAnZCddKTsgICAgICAgIC8vPT4gWydiJywgJ2MnXVxuICAgICAqICAgICAgUi5zbGljZSgxLCBJbmZpbml0eSwgWydhJywgJ2InLCAnYycsICdkJ10pOyAvLz0+IFsnYicsICdjJywgJ2QnXVxuICAgICAqICAgICAgUi5zbGljZSgwLCAtMSwgWydhJywgJ2InLCAnYycsICdkJ10pOyAgICAgICAvLz0+IFsnYScsICdiJywgJ2MnXVxuICAgICAqICAgICAgUi5zbGljZSgtMywgLTEsIFsnYScsICdiJywgJ2MnLCAnZCddKTsgICAgICAvLz0+IFsnYicsICdjJ11cbiAgICAgKiAgICAgIFIuc2xpY2UoMCwgMywgJ3JhbWRhJyk7ICAgICAgICAgICAgICAgICAgICAgLy89PiAncmFtJ1xuICAgICAqL1xuICAgIHZhciBzbGljZSA9IF9jdXJyeTMoX2NoZWNrRm9yTWV0aG9kKCdzbGljZScsIGZ1bmN0aW9uIHNsaWNlKGZyb21JbmRleCwgdG9JbmRleCwgbGlzdCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobGlzdCwgZnJvbUluZGV4LCB0b0luZGV4KTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgbGlzdCwgc29ydGVkIGFjY29yZGluZyB0byB0aGUgY29tcGFyYXRvciBmdW5jdGlvbixcbiAgICAgKiB3aGljaCBzaG91bGQgYWNjZXB0IHR3byB2YWx1ZXMgYXQgYSB0aW1lIGFuZCByZXR1cm4gYSBuZWdhdGl2ZSBudW1iZXIgaWYgdGhlXG4gICAgICogZmlyc3QgdmFsdWUgaXMgc21hbGxlciwgYSBwb3NpdGl2ZSBudW1iZXIgaWYgaXQncyBsYXJnZXIsIGFuZCB6ZXJvIGlmIHRoZXlcbiAgICAgKiBhcmUgZXF1YWwuIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBpcyBhICoqY29weSoqIG9mIHRoZSBsaXN0LiBJdCBkb2VzIG5vdFxuICAgICAqIG1vZGlmeSB0aGUgb3JpZ2luYWwuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSxhIC0+IE51bWJlcikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmF0b3IgQSBzb3J0aW5nIGZ1bmN0aW9uIDo6IGEgLT4gYiAtPiBJbnRcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIHNvcnRcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gYSBuZXcgYXJyYXkgd2l0aCBpdHMgZWxlbWVudHMgc29ydGVkIGJ5IHRoZSBjb21wYXJhdG9yIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBkaWZmID0gZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYSAtIGI7IH07XG4gICAgICogICAgICBSLnNvcnQoZGlmZiwgWzQsMiw3LDVdKTsgLy89PiBbMiwgNCwgNSwgN11cbiAgICAgKi9cbiAgICB2YXIgc29ydCA9IF9jdXJyeTIoZnVuY3Rpb24gc29ydChjb21wYXJhdG9yLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCkuc29ydChjb21wYXJhdG9yKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNvcnRzIHRoZSBsaXN0IGFjY29yZGluZyB0byB0aGUgc3VwcGxpZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgT3JkIGIgPT4gKGEgLT4gYikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBzb3J0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBsaXN0IHNvcnRlZCBieSB0aGUga2V5cyBnZW5lcmF0ZWQgYnkgYGZuYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgc29ydEJ5Rmlyc3RJdGVtID0gUi5zb3J0QnkoUi5wcm9wKDApKTtcbiAgICAgKiAgICAgIHZhciBzb3J0QnlOYW1lQ2FzZUluc2Vuc2l0aXZlID0gUi5zb3J0QnkoUi5jb21wb3NlKFIudG9Mb3dlciwgUi5wcm9wKCduYW1lJykpKTtcbiAgICAgKiAgICAgIHZhciBwYWlycyA9IFtbLTEsIDFdLCBbLTIsIDJdLCBbLTMsIDNdXTtcbiAgICAgKiAgICAgIHNvcnRCeUZpcnN0SXRlbShwYWlycyk7IC8vPT4gW1stMywgM10sIFstMiwgMl0sIFstMSwgMV1dXG4gICAgICogICAgICB2YXIgYWxpY2UgPSB7XG4gICAgICogICAgICAgIG5hbWU6ICdBTElDRScsXG4gICAgICogICAgICAgIGFnZTogMTAxXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgdmFyIGJvYiA9IHtcbiAgICAgKiAgICAgICAgbmFtZTogJ0JvYicsXG4gICAgICogICAgICAgIGFnZTogLTEwXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgdmFyIGNsYXJhID0ge1xuICAgICAqICAgICAgICBuYW1lOiAnY2xhcmEnLFxuICAgICAqICAgICAgICBhZ2U6IDMxNC4xNTlcbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICB2YXIgcGVvcGxlID0gW2NsYXJhLCBib2IsIGFsaWNlXTtcbiAgICAgKiAgICAgIHNvcnRCeU5hbWVDYXNlSW5zZW5zaXRpdmUocGVvcGxlKTsgLy89PiBbYWxpY2UsIGJvYiwgY2xhcmFdXG4gICAgICovXG4gICAgdmFyIHNvcnRCeSA9IF9jdXJyeTIoZnVuY3Rpb24gc29ydEJ5KGZuLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgdmFyIGFhID0gZm4oYSk7XG4gICAgICAgICAgICB2YXIgYmIgPSBmbihiKTtcbiAgICAgICAgICAgIHJldHVybiBhYSA8IGJiID8gLTEgOiBhYSA+IGJiID8gMSA6IDA7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGEgZ2l2ZW4gbGlzdCBvciBzdHJpbmcgYXQgYSBnaXZlbiBpbmRleC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IFtbYV0sIFthXV1cbiAgICAgKiBAc2lnIE51bWJlciAtPiBTdHJpbmcgLT4gW1N0cmluZywgU3RyaW5nXVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBUaGUgaW5kZXggd2hlcmUgdGhlIGFycmF5L3N0cmluZyBpcyBzcGxpdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gYXJyYXkgVGhlIGFycmF5L3N0cmluZyB0byBiZSBzcGxpdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnNwbGl0QXQoMSwgWzEsIDIsIDNdKTsgICAgICAgICAgLy89PiBbWzFdLCBbMiwgM11dXG4gICAgICogICAgICBSLnNwbGl0QXQoNSwgJ2hlbGxvIHdvcmxkJyk7ICAgICAgLy89PiBbJ2hlbGxvJywgJyB3b3JsZCddXG4gICAgICogICAgICBSLnNwbGl0QXQoLTEsICdmb29iYXInKTsgICAgICAgICAgLy89PiBbJ2Zvb2JhJywgJ3InXVxuICAgICAqL1xuICAgIHZhciBzcGxpdEF0ID0gX2N1cnJ5MihmdW5jdGlvbiBzcGxpdEF0KGluZGV4LCBhcnJheSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgc2xpY2UoMCwgaW5kZXgsIGFycmF5KSxcbiAgICAgICAgICAgIHNsaWNlKGluZGV4LCBsZW5ndGgoYXJyYXkpLCBhcnJheSlcbiAgICAgICAgXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNwbGl0cyBhIGNvbGxlY3Rpb24gaW50byBzbGljZXMgb2YgdGhlIHNwZWNpZmllZCBsZW5ndGguXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE2LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbW2FdXVxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFN0cmluZyAtPiBbU3RyaW5nXVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuc3BsaXRFdmVyeSgzLCBbMSwgMiwgMywgNCwgNSwgNiwgN10pOyAvLz0+IFtbMSwgMiwgM10sIFs0LCA1LCA2XSwgWzddXVxuICAgICAqICAgICAgUi5zcGxpdEV2ZXJ5KDMsICdmb29iYXJiYXonKTsgLy89PiBbJ2ZvbycsICdiYXInLCAnYmF6J11cbiAgICAgKi9cbiAgICB2YXIgc3BsaXRFdmVyeSA9IF9jdXJyeTIoZnVuY3Rpb24gc3BsaXRFdmVyeShuLCBsaXN0KSB7XG4gICAgICAgIGlmIChuIDw9IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmlyc3QgYXJndW1lbnQgdG8gc3BsaXRFdmVyeSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcicpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goc2xpY2UoaWR4LCBpZHggKz0gbiwgbGlzdCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGxpc3QgYW5kIGEgcHJlZGljYXRlIGFuZCByZXR1cm5zIGEgcGFpciBvZiBsaXN0cyB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgKlxuICAgICAqICAtIHRoZSByZXN1bHQgb2YgY29uY2F0ZW5hdGluZyB0aGUgdHdvIG91dHB1dCBsaXN0cyBpcyBlcXVpdmFsZW50IHRvIHRoZSBpbnB1dCBsaXN0O1xuICAgICAqICAtIG5vbmUgb2YgdGhlIGVsZW1lbnRzIG9mIHRoZSBmaXJzdCBvdXRwdXQgbGlzdCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZTsgYW5kXG4gICAgICogIC0gaWYgdGhlIHNlY29uZCBvdXRwdXQgbGlzdCBpcyBub24tZW1wdHksIGl0cyBmaXJzdCBlbGVtZW50IHNhdGlzZmllcyB0aGUgcHJlZGljYXRlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBbW2FdLCBbYV1dXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBUaGUgcHJlZGljYXRlIHRoYXQgZGV0ZXJtaW5lcyB3aGVyZSB0aGUgYXJyYXkgaXMgc3BsaXQuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gYmUgc3BsaXQuXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5zcGxpdFdoZW4oUi5lcXVhbHMoMiksIFsxLCAyLCAzLCAxLCAyLCAzXSk7ICAgLy89PiBbWzFdLCBbMiwgMywgMSwgMiwgM11dXG4gICAgICovXG4gICAgdmFyIHNwbGl0V2hlbiA9IF9jdXJyeTIoZnVuY3Rpb24gc3BsaXRXaGVuKHByZWQsIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIHByZWZpeCA9IFtdO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuICYmICFwcmVkKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgIHByZWZpeC5wdXNoKGxpc3RbaWR4XSk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgcHJlZml4LFxuICAgICAgICAgICAgX3NsaWNlKGxpc3QsIGlkeClcbiAgICAgICAgXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFN1YnRyYWN0cyBpdHMgc2Vjb25kIGFyZ3VtZW50IGZyb20gaXRzIGZpcnN0IGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IE51bWJlciAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYSBUaGUgZmlyc3QgdmFsdWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGIgVGhlIHNlY29uZCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSByZXN1bHQgb2YgYGEgLSBiYC5cbiAgICAgKiBAc2VlIFIuYWRkXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5zdWJ0cmFjdCgxMCwgOCk7IC8vPT4gMlxuICAgICAqXG4gICAgICogICAgICB2YXIgbWludXM1ID0gUi5zdWJ0cmFjdChSLl9fLCA1KTtcbiAgICAgKiAgICAgIG1pbnVzNSgxNyk7IC8vPT4gMTJcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGNvbXBsZW1lbnRhcnlBbmdsZSA9IFIuc3VidHJhY3QoOTApO1xuICAgICAqICAgICAgY29tcGxlbWVudGFyeUFuZ2xlKDMwKTsgLy89PiA2MFxuICAgICAqICAgICAgY29tcGxlbWVudGFyeUFuZ2xlKDcyKTsgLy89PiAxOFxuICAgICAqL1xuICAgIHZhciBzdWJ0cmFjdCA9IF9jdXJyeTIoZnVuY3Rpb24gc3VidHJhY3QoYSwgYikge1xuICAgICAgICByZXR1cm4gTnVtYmVyKGEpIC0gTnVtYmVyKGIpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgYnV0IHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBnaXZlbiBsaXN0IG9yIHN0cmluZyAob3Igb2JqZWN0XG4gICAgICogd2l0aCBhIGB0YWlsYCBtZXRob2QpLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYHNsaWNlYCBtZXRob2Qgb2YgdGhlIGZpcnN0IGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFthXVxuICAgICAqIEBzaWcgU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7Kn0gbGlzdFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLmhlYWQsIFIuaW5pdCwgUi5sYXN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50YWlsKFsxLCAyLCAzXSk7ICAvLz0+IFsyLCAzXVxuICAgICAqICAgICAgUi50YWlsKFsxLCAyXSk7ICAgICAvLz0+IFsyXVxuICAgICAqICAgICAgUi50YWlsKFsxXSk7ICAgICAgICAvLz0+IFtdXG4gICAgICogICAgICBSLnRhaWwoW10pOyAgICAgICAgIC8vPT4gW11cbiAgICAgKlxuICAgICAqICAgICAgUi50YWlsKCdhYmMnKTsgIC8vPT4gJ2JjJ1xuICAgICAqICAgICAgUi50YWlsKCdhYicpOyAgIC8vPT4gJ2InXG4gICAgICogICAgICBSLnRhaWwoJ2EnKTsgICAgLy89PiAnJ1xuICAgICAqICAgICAgUi50YWlsKCcnKTsgICAgIC8vPT4gJydcbiAgICAgKi9cbiAgICB2YXIgdGFpbCA9IF9jaGVja0Zvck1ldGhvZCgndGFpbCcsIHNsaWNlKDEsIEluZmluaXR5KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBgbmAgZWxlbWVudHMgb2YgdGhlIGdpdmVuIGxpc3QsIHN0cmluZywgb3JcbiAgICAgKiB0cmFuc2R1Y2VyL3RyYW5zZm9ybWVyIChvciBvYmplY3Qgd2l0aCBhIGB0YWtlYCBtZXRob2QpLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYHRha2VgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIE51bWJlciAtPiBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgKiBAcGFyYW0geyp9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5kcm9wXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50YWtlKDEsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nXVxuICAgICAqICAgICAgUi50YWtlKDIsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nLCAnYmFyJ11cbiAgICAgKiAgICAgIFIudGFrZSgzLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnZm9vJywgJ2JhcicsICdiYXonXVxuICAgICAqICAgICAgUi50YWtlKDQsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nLCAnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLnRha2UoMywgJ3JhbWRhJyk7ICAgICAgICAgICAgICAgLy89PiAncmFtJ1xuICAgICAqXG4gICAgICogICAgICB2YXIgcGVyc29ubmVsID0gW1xuICAgICAqICAgICAgICAnRGF2ZSBCcnViZWNrJyxcbiAgICAgKiAgICAgICAgJ1BhdWwgRGVzbW9uZCcsXG4gICAgICogICAgICAgICdFdWdlbmUgV3JpZ2h0JyxcbiAgICAgKiAgICAgICAgJ0pvZSBNb3JlbGxvJyxcbiAgICAgKiAgICAgICAgJ0dlcnJ5IE11bGxpZ2FuJyxcbiAgICAgKiAgICAgICAgJ0JvYiBCYXRlcycsXG4gICAgICogICAgICAgICdKb2UgRG9kZ2UnLFxuICAgICAqICAgICAgICAnUm9uIENyb3R0eSdcbiAgICAgKiAgICAgIF07XG4gICAgICpcbiAgICAgKiAgICAgIHZhciB0YWtlRml2ZSA9IFIudGFrZSg1KTtcbiAgICAgKiAgICAgIHRha2VGaXZlKHBlcnNvbm5lbCk7XG4gICAgICogICAgICAvLz0+IFsnRGF2ZSBCcnViZWNrJywgJ1BhdWwgRGVzbW9uZCcsICdFdWdlbmUgV3JpZ2h0JywgJ0pvZSBNb3JlbGxvJywgJ0dlcnJ5IE11bGxpZ2FuJ11cbiAgICAgKi9cbiAgICB2YXIgdGFrZSA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgndGFrZScsIF94dGFrZSwgZnVuY3Rpb24gdGFrZShuLCB4cykge1xuICAgICAgICByZXR1cm4gc2xpY2UoMCwgbiA8IDAgPyBJbmZpbml0eSA6IG4sIHhzKTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3QgY29udGFpbmluZyB0aGUgbGFzdCBgbmAgZWxlbWVudHMgb2YgYSBnaXZlbiBsaXN0LCBwYXNzaW5nXG4gICAgICogZWFjaCB2YWx1ZSB0byB0aGUgc3VwcGxpZWQgcHJlZGljYXRlIGZ1bmN0aW9uLCBhbmQgdGVybWluYXRpbmcgd2hlbiB0aGVcbiAgICAgKiBwcmVkaWNhdGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLiBFeGNsdWRlcyB0aGUgZWxlbWVudCB0aGF0IGNhdXNlZCB0aGVcbiAgICAgKiBwcmVkaWNhdGUgZnVuY3Rpb24gdG8gZmFpbC4gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiBpcyBwYXNzZWQgb25lIGFyZ3VtZW50OlxuICAgICAqICoodmFsdWUpKi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBhcnJheS5cbiAgICAgKiBAc2VlIFIuZHJvcExhc3RXaGlsZSwgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBpc05vdE9uZSA9IHggPT4geCAhPT0gMTtcbiAgICAgKlxuICAgICAqICAgICAgUi50YWtlTGFzdFdoaWxlKGlzTm90T25lLCBbMSwgMiwgMywgNF0pOyAvLz0+IFsyLCAzLCA0XVxuICAgICAqL1xuICAgIHZhciB0YWtlTGFzdFdoaWxlID0gX2N1cnJ5MihmdW5jdGlvbiB0YWtlTGFzdFdoaWxlKGZuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSBsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlIChpZHggPj0gMCAmJiBmbihsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3NsaWNlKGxpc3QsIGlkeCArIDEsIEluZmluaXR5KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBmaXJzdCBgbmAgZWxlbWVudHMgb2YgYSBnaXZlbiBsaXN0LFxuICAgICAqIHBhc3NpbmcgZWFjaCB2YWx1ZSB0byB0aGUgc3VwcGxpZWQgcHJlZGljYXRlIGZ1bmN0aW9uLCBhbmQgdGVybWluYXRpbmcgd2hlblxuICAgICAqIHRoZSBwcmVkaWNhdGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLiBFeGNsdWRlcyB0aGUgZWxlbWVudCB0aGF0IGNhdXNlZCB0aGVcbiAgICAgKiBwcmVkaWNhdGUgZnVuY3Rpb24gdG8gZmFpbC4gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiBpcyBwYXNzZWQgb25lIGFyZ3VtZW50OlxuICAgICAqICoodmFsdWUpKi5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGB0YWtlV2hpbGVgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgYXJyYXkuXG4gICAgICogQHNlZSBSLmRyb3BXaGlsZSwgUi50cmFuc2R1Y2UsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNOb3RGb3VyID0geCA9PiB4ICE9PSA0O1xuICAgICAqXG4gICAgICogICAgICBSLnRha2VXaGlsZShpc05vdEZvdXIsIFsxLCAyLCAzLCA0LCAzLCAyLCAxXSk7IC8vPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgdmFyIHRha2VXaGlsZSA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgndGFrZVdoaWxlJywgX3h0YWtlV2hpbGUsIGZ1bmN0aW9uIHRha2VXaGlsZShmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuICYmIGZuKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCwgMCwgaWR4KTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIHRoZSBzdXBwbGllZCBvYmplY3QsIHRoZW4gcmV0dXJucyB0aGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIChhIC0+ICopIC0+IGEgLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdpdGggYHhgLiBUaGUgcmV0dXJuIHZhbHVlIG9mIGBmbmAgd2lsbCBiZSB0aHJvd24gYXdheS5cbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcmV0dXJuIHsqfSBgeGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHNheVggPSB4ID0+IGNvbnNvbGUubG9nKCd4IGlzICcgKyB4KTtcbiAgICAgKiAgICAgIFIudGFwKHNheVgsIDEwMCk7IC8vPT4gMTAwXG4gICAgICogICAgICAvLy0+ICd4IGlzIDEwMCdcbiAgICAgKi9cbiAgICB2YXIgdGFwID0gX2N1cnJ5MihmdW5jdGlvbiB0YXAoZm4sIHgpIHtcbiAgICAgICAgZm4oeCk7XG4gICAgICAgIHJldHVybiB4O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbHMgYW4gaW5wdXQgZnVuY3Rpb24gYG5gIHRpbWVzLCByZXR1cm5pbmcgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgcmVzdWx0c1xuICAgICAqIG9mIHRob3NlIGZ1bmN0aW9uIGNhbGxzLlxuICAgICAqXG4gICAgICogYGZuYCBpcyBwYXNzZWQgb25lIGFyZ3VtZW50OiBUaGUgY3VycmVudCB2YWx1ZSBvZiBgbmAsIHdoaWNoIGJlZ2lucyBhdCBgMGBcbiAgICAgKiBhbmQgaXMgZ3JhZHVhbGx5IGluY3JlbWVudGVkIHRvIGBuIC0gMWAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIuM1xuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoTnVtYmVyIC0+IGEpIC0+IE51bWJlciAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLiBQYXNzZWQgb25lIGFyZ3VtZW50LCB0aGUgY3VycmVudCB2YWx1ZSBvZiBgbmAuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG4gQSB2YWx1ZSBiZXR3ZWVuIGAwYCBhbmQgYG4gLSAxYC4gSW5jcmVtZW50cyBhZnRlciBlYWNoIGZ1bmN0aW9uIGNhbGwuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIHJldHVybiB2YWx1ZXMgb2YgYWxsIGNhbGxzIHRvIGBmbmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50aW1lcyhSLmlkZW50aXR5LCA1KTsgLy89PiBbMCwgMSwgMiwgMywgNF1cbiAgICAgKi9cbiAgICB2YXIgdGltZXMgPSBfY3VycnkyKGZ1bmN0aW9uIHRpbWVzKGZuLCBuKSB7XG4gICAgICAgIHZhciBsZW4gPSBOdW1iZXIobik7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGlzdDtcbiAgICAgICAgaWYgKGxlbiA8IDAgfHwgaXNOYU4obGVuKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ24gbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBsaXN0ID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGxpc3RbaWR4XSA9IGZuKGlkeCk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlzdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGFuIG9iamVjdCBpbnRvIGFuIGFycmF5IG9mIGtleSwgdmFsdWUgYXJyYXlzLiBPbmx5IHRoZSBvYmplY3Qnc1xuICAgICAqIG93biBwcm9wZXJ0aWVzIGFyZSB1c2VkLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgb3JkZXIgb2YgdGhlIG91dHB1dCBhcnJheSBpcyBub3QgZ3VhcmFudGVlZCB0byBiZSBjb25zaXN0ZW50XG4gICAgICogYWNyb3NzIGRpZmZlcmVudCBKUyBwbGF0Zm9ybXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjQuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtTdHJpbmc6ICp9IC0+IFtbU3RyaW5nLCpdXVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBleHRyYWN0IGZyb21cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgb2Yga2V5LCB2YWx1ZSBhcnJheXMgZnJvbSB0aGUgb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMuXG4gICAgICogQHNlZSBSLmZyb21QYWlyc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudG9QYWlycyh7YTogMSwgYjogMiwgYzogM30pOyAvLz0+IFtbJ2EnLCAxXSwgWydiJywgMl0sIFsnYycsIDNdXVxuICAgICAqL1xuICAgIHZhciB0b1BhaXJzID0gX2N1cnJ5MShmdW5jdGlvbiB0b1BhaXJzKG9iaikge1xuICAgICAgICB2YXIgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChfaGFzKHByb3AsIG9iaikpIHtcbiAgICAgICAgICAgICAgICBwYWlyc1twYWlycy5sZW5ndGhdID0gW1xuICAgICAgICAgICAgICAgICAgICBwcm9wLFxuICAgICAgICAgICAgICAgICAgICBvYmpbcHJvcF1cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYWlycztcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGFuIG9iamVjdCBpbnRvIGFuIGFycmF5IG9mIGtleSwgdmFsdWUgYXJyYXlzLiBUaGUgb2JqZWN0J3Mgb3duXG4gICAgICogcHJvcGVydGllcyBhbmQgcHJvdG90eXBlIHByb3BlcnRpZXMgYXJlIHVzZWQuIE5vdGUgdGhhdCB0aGUgb3JkZXIgb2YgdGhlXG4gICAgICogb3V0cHV0IGFycmF5IGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGNvbnNpc3RlbnQgYWNyb3NzIGRpZmZlcmVudCBKU1xuICAgICAqIHBsYXRmb3Jtcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge1N0cmluZzogKn0gLT4gW1tTdHJpbmcsKl1dXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGV4dHJhY3QgZnJvbVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiBrZXksIHZhbHVlIGFycmF5cyBmcm9tIHRoZSBvYmplY3QncyBvd25cbiAgICAgKiAgICAgICAgIGFuZCBwcm90b3R5cGUgcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgRiA9IGZ1bmN0aW9uKCkgeyB0aGlzLnggPSAnWCc7IH07XG4gICAgICogICAgICBGLnByb3RvdHlwZS55ID0gJ1knO1xuICAgICAqICAgICAgdmFyIGYgPSBuZXcgRigpO1xuICAgICAqICAgICAgUi50b1BhaXJzSW4oZik7IC8vPT4gW1sneCcsJ1gnXSwgWyd5JywnWSddXVxuICAgICAqL1xuICAgIHZhciB0b1BhaXJzSW4gPSBfY3VycnkxKGZ1bmN0aW9uIHRvUGFpcnNJbihvYmopIHtcbiAgICAgICAgdmFyIHBhaXJzID0gW107XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBwYWlyc1twYWlycy5sZW5ndGhdID0gW1xuICAgICAgICAgICAgICAgIHByb3AsXG4gICAgICAgICAgICAgICAgb2JqW3Byb3BdXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYWlycztcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRyYW5zcG9zZXMgdGhlIHJvd3MgYW5kIGNvbHVtbnMgb2YgYSAyRCBsaXN0LlxuICAgICAqIFdoZW4gcGFzc2VkIGEgbGlzdCBvZiBgbmAgbGlzdHMgb2YgbGVuZ3RoIGB4YCxcbiAgICAgKiByZXR1cm5zIGEgbGlzdCBvZiBgeGAgbGlzdHMgb2YgbGVuZ3RoIGBuYC5cbiAgICAgKlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFtbYV1dIC0+IFtbYV1dXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBBIDJEIGxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSAyRCBsaXN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50cmFuc3Bvc2UoW1sxLCAnYSddLCBbMiwgJ2InXSwgWzMsICdjJ11dKSAvLz0+IFtbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnXV1cbiAgICAgKiAgICAgIFIudHJhbnNwb3NlKFtbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnXV0pIC8vPT4gW1sxLCAnYSddLCBbMiwgJ2InXSwgWzMsICdjJ11dXG4gICAgICpcbiAgICAgKiBJZiBzb21lIG9mIHRoZSByb3dzIGFyZSBzaG9ydGVyIHRoYW4gdGhlIGZvbGxvd2luZyByb3dzLCB0aGVpciBlbGVtZW50cyBhcmUgc2tpcHBlZDpcbiAgICAgKlxuICAgICAqICAgICAgUi50cmFuc3Bvc2UoW1sxMCwgMTFdLCBbMjBdLCBbXSwgWzMwLCAzMSwgMzJdXSkgLy89PiBbWzEwLCAyMCwgMzBdLCBbMTEsIDMxXSwgWzMyXV1cbiAgICAgKi9cbiAgICB2YXIgdHJhbnNwb3NlID0gX2N1cnJ5MShmdW5jdGlvbiB0cmFuc3Bvc2Uob3V0ZXJsaXN0KSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB3aGlsZSAoaSA8IG91dGVybGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBpbm5lcmxpc3QgPSBvdXRlcmxpc3RbaV07XG4gICAgICAgICAgICB2YXIgaiA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaiA8IGlubmVybGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdFtqXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2pdID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5wdXNoKGlubmVybGlzdFtqXSk7XG4gICAgICAgICAgICAgICAgaiArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIChzdHJpcHMpIHdoaXRlc3BhY2UgZnJvbSBib3RoIGVuZHMgb2YgdGhlIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNi4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBzaWcgU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byB0cmltLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gVHJpbW1lZCB2ZXJzaW9uIG9mIGBzdHJgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudHJpbSgnICAgeHl6ICAnKTsgLy89PiAneHl6J1xuICAgICAqICAgICAgUi5tYXAoUi50cmltLCBSLnNwbGl0KCcsJywgJ3gsIHksIHonKSk7IC8vPT4gWyd4JywgJ3knLCAneiddXG4gICAgICovXG4gICAgdmFyIHRyaW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3cyA9ICdcXHRcXG5cXHgwQlxcZlxcciBcXHhBMFxcdTE2ODBcXHUxODBFXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwMycgKyAnXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwQVxcdTIwMkZcXHUyMDVGXFx1MzAwMFxcdTIwMjgnICsgJ1xcdTIwMjlcXHVGRUZGJztcbiAgICAgICAgdmFyIHplcm9XaWR0aCA9ICdcXHUyMDBCJztcbiAgICAgICAgdmFyIGhhc1Byb3RvVHJpbSA9IHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLnRyaW0gPT09ICdmdW5jdGlvbic7XG4gICAgICAgIGlmICghaGFzUHJvdG9UcmltIHx8ICh3cy50cmltKCkgfHwgIXplcm9XaWR0aC50cmltKCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gX2N1cnJ5MShmdW5jdGlvbiB0cmltKHN0cikge1xuICAgICAgICAgICAgICAgIHZhciBiZWdpblJ4ID0gbmV3IFJlZ0V4cCgnXlsnICsgd3MgKyAnXVsnICsgd3MgKyAnXSonKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kUnggPSBuZXcgUmVnRXhwKCdbJyArIHdzICsgJ11bJyArIHdzICsgJ10qJCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZShiZWdpblJ4LCAnJykucmVwbGFjZShlbmRSeCwgJycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX2N1cnJ5MShmdW5jdGlvbiB0cmltKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHIudHJpbSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBgdHJ5Q2F0Y2hgIHRha2VzIHR3byBmdW5jdGlvbnMsIGEgYHRyeWVyYCBhbmQgYSBgY2F0Y2hlcmAuIFRoZSByZXR1cm5lZFxuICAgICAqIGZ1bmN0aW9uIGV2YWx1YXRlcyB0aGUgYHRyeWVyYDsgaWYgaXQgZG9lcyBub3QgdGhyb3csIGl0IHNpbXBseSByZXR1cm5zIHRoZVxuICAgICAqIHJlc3VsdC4gSWYgdGhlIGB0cnllcmAgKmRvZXMqIHRocm93LCB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gZXZhbHVhdGVzIHRoZVxuICAgICAqIGBjYXRjaGVyYCBmdW5jdGlvbiBhbmQgcmV0dXJucyBpdHMgcmVzdWx0LiBOb3RlIHRoYXQgZm9yIGVmZmVjdGl2ZVxuICAgICAqIGNvbXBvc2l0aW9uIHdpdGggdGhpcyBmdW5jdGlvbiwgYm90aCB0aGUgYHRyeWVyYCBhbmQgYGNhdGNoZXJgIGZ1bmN0aW9uc1xuICAgICAqIG11c3QgcmV0dXJuIHRoZSBzYW1lIHR5cGUgb2YgcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMjAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKC4uLnggLT4gYSkgLT4gKChlLCAuLi54KSAtPiBhKSAtPiAoLi4ueCAtPiBhKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHRyeWVyIFRoZSBmdW5jdGlvbiB0aGF0IG1heSB0aHJvdy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYXRjaGVyIFRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXZhbHVhdGVkIGlmIGB0cnllcmAgdGhyb3dzLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB0aGF0IHdpbGwgY2F0Y2ggZXhjZXB0aW9ucyBhbmQgc2VuZCB0aGVuIHRvIHRoZSBjYXRjaGVyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudHJ5Q2F0Y2goUi5wcm9wKCd4JyksIFIuRiwge3g6IHRydWV9KTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLnRyeUNhdGNoKFIucHJvcCgneCcpLCBSLkYsIG51bGwpOyAgICAgIC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgdHJ5Q2F0Y2ggPSBfY3VycnkyKGZ1bmN0aW9uIF90cnlDYXRjaCh0cnllciwgY2F0Y2hlcikge1xuICAgICAgICByZXR1cm4gX2FyaXR5KHRyeWVyLmxlbmd0aCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ5ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2F0Y2hlci5hcHBseSh0aGlzLCBfY29uY2F0KFtlXSwgYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogR2l2ZXMgYSBzaW5nbGUtd29yZCBzdHJpbmcgZGVzY3JpcHRpb24gb2YgdGhlIChuYXRpdmUpIHR5cGUgb2YgYSB2YWx1ZSxcbiAgICAgKiByZXR1cm5pbmcgc3VjaCBhbnN3ZXJzIGFzICdPYmplY3QnLCAnTnVtYmVyJywgJ0FycmF5Jywgb3IgJ051bGwnLiBEb2VzIG5vdFxuICAgICAqIGF0dGVtcHQgdG8gZGlzdGluZ3Vpc2ggdXNlciBPYmplY3QgdHlwZXMgYW55IGZ1cnRoZXIsIHJlcG9ydGluZyB0aGVtIGFsbCBhc1xuICAgICAqICdPYmplY3QnLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC44LjBcbiAgICAgKiBAY2F0ZWdvcnkgVHlwZVxuICAgICAqIEBzaWcgKCogLT4geyp9KSAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnR5cGUoe30pOyAvLz0+IFwiT2JqZWN0XCJcbiAgICAgKiAgICAgIFIudHlwZSgxKTsgLy89PiBcIk51bWJlclwiXG4gICAgICogICAgICBSLnR5cGUoZmFsc2UpOyAvLz0+IFwiQm9vbGVhblwiXG4gICAgICogICAgICBSLnR5cGUoJ3MnKTsgLy89PiBcIlN0cmluZ1wiXG4gICAgICogICAgICBSLnR5cGUobnVsbCk7IC8vPT4gXCJOdWxsXCJcbiAgICAgKiAgICAgIFIudHlwZShbXSk7IC8vPT4gXCJBcnJheVwiXG4gICAgICogICAgICBSLnR5cGUoL1tBLXpdLyk7IC8vPT4gXCJSZWdFeHBcIlxuICAgICAqL1xuICAgIHZhciB0eXBlID0gX2N1cnJ5MShmdW5jdGlvbiB0eXBlKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsID09PSBudWxsID8gJ051bGwnIDogdmFsID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpLnNsaWNlKDgsIC0xKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgZnVuY3Rpb24gYGZuYCwgd2hpY2ggdGFrZXMgYSBzaW5nbGUgYXJyYXkgYXJndW1lbnQsIGFuZCByZXR1cm5zIGFcbiAgICAgKiBmdW5jdGlvbiB3aGljaDpcbiAgICAgKlxuICAgICAqICAgLSB0YWtlcyBhbnkgbnVtYmVyIG9mIHBvc2l0aW9uYWwgYXJndW1lbnRzO1xuICAgICAqICAgLSBwYXNzZXMgdGhlc2UgYXJndW1lbnRzIHRvIGBmbmAgYXMgYW4gYXJyYXk7IGFuZFxuICAgICAqICAgLSByZXR1cm5zIHRoZSByZXN1bHQuXG4gICAgICpcbiAgICAgKiBJbiBvdGhlciB3b3JkcywgUi51bmFwcGx5IGRlcml2ZXMgYSB2YXJpYWRpYyBmdW5jdGlvbiBmcm9tIGEgZnVuY3Rpb24gd2hpY2hcbiAgICAgKiB0YWtlcyBhbiBhcnJheS4gUi51bmFwcGx5IGlzIHRoZSBpbnZlcnNlIG9mIFIuYXBwbHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjguMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKFsqLi4uXSAtPiBhKSAtPiAoKi4uLiAtPiBhKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLmFwcGx5XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi51bmFwcGx5KEpTT04uc3RyaW5naWZ5KSgxLCAyLCAzKTsgLy89PiAnWzEsMiwzXSdcbiAgICAgKi9cbiAgICB2YXIgdW5hcHBseSA9IF9jdXJyeTEoZnVuY3Rpb24gdW5hcHBseShmbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZuKF9zbGljZShhcmd1bWVudHMpKTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFdyYXBzIGEgZnVuY3Rpb24gb2YgYW55IGFyaXR5IChpbmNsdWRpbmcgbnVsbGFyeSkgaW4gYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHNcbiAgICAgKiBleGFjdGx5IDEgcGFyYW1ldGVyLiBBbnkgZXh0cmFuZW91cyBwYXJhbWV0ZXJzIHdpbGwgbm90IGJlIHBhc3NlZCB0byB0aGVcbiAgICAgKiBzdXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKiAtPiBiKSAtPiAoYSAtPiBiKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyBgZm5gLiBUaGUgbmV3IGZ1bmN0aW9uIGlzIGd1YXJhbnRlZWQgdG8gYmUgb2ZcbiAgICAgKiAgICAgICAgIGFyaXR5IDEuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRha2VzVHdvQXJncyA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgKiAgICAgICAgcmV0dXJuIFthLCBiXTtcbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICB0YWtlc1R3b0FyZ3MubGVuZ3RoOyAvLz0+IDJcbiAgICAgKiAgICAgIHRha2VzVHdvQXJncygxLCAyKTsgLy89PiBbMSwgMl1cbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRha2VzT25lQXJnID0gUi51bmFyeSh0YWtlc1R3b0FyZ3MpO1xuICAgICAqICAgICAgdGFrZXNPbmVBcmcubGVuZ3RoOyAvLz0+IDFcbiAgICAgKiAgICAgIC8vIE9ubHkgMSBhcmd1bWVudCBpcyBwYXNzZWQgdG8gdGhlIHdyYXBwZWQgZnVuY3Rpb25cbiAgICAgKiAgICAgIHRha2VzT25lQXJnKDEsIDIpOyAvLz0+IFsxLCB1bmRlZmluZWRdXG4gICAgICovXG4gICAgdmFyIHVuYXJ5ID0gX2N1cnJ5MShmdW5jdGlvbiB1bmFyeShmbikge1xuICAgICAgICByZXR1cm4gbkFyeSgxLCBmbik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gb2YgYXJpdHkgYG5gIGZyb20gYSAobWFudWFsbHkpIGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIE51bWJlciAtPiAoYSAtPiBiKSAtPiAoYSAtPiBjKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGggVGhlIGFyaXR5IGZvciB0aGUgcmV0dXJuZWQgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHVuY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBzZWUgUi5jdXJyeVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBhZGRGb3VyID0gYSA9PiBiID0+IGMgPT4gZCA9PiBhICsgYiArIGMgKyBkO1xuICAgICAqXG4gICAgICogICAgICB2YXIgdW5jdXJyaWVkQWRkRm91ciA9IFIudW5jdXJyeU4oNCwgYWRkRm91cik7XG4gICAgICogICAgICB1bmN1cnJpZWRBZGRGb3VyKDEsIDIsIDMsIDQpOyAvLz0+IDEwXG4gICAgICovXG4gICAgdmFyIHVuY3VycnlOID0gX2N1cnJ5MihmdW5jdGlvbiB1bmN1cnJ5TihkZXB0aCwgZm4pIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5TihkZXB0aCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnREZXB0aCA9IDE7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBmbjtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgdmFyIGVuZElkeDtcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50RGVwdGggPD0gZGVwdGggJiYgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgZW5kSWR4ID0gY3VycmVudERlcHRoID09PSBkZXB0aCA/IGFyZ3VtZW50cy5sZW5ndGggOiBpZHggKyB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5hcHBseSh0aGlzLCBfc2xpY2UoYXJndW1lbnRzLCBpZHgsIGVuZElkeCkpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnREZXB0aCArPSAxO1xuICAgICAgICAgICAgICAgIGlkeCA9IGVuZElkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYSBsaXN0IGZyb20gYSBzZWVkIHZhbHVlLiBBY2NlcHRzIGFuIGl0ZXJhdG9yIGZ1bmN0aW9uLCB3aGljaCByZXR1cm5zXG4gICAgICogZWl0aGVyIGZhbHNlIHRvIHN0b3AgaXRlcmF0aW9uIG9yIGFuIGFycmF5IG9mIGxlbmd0aCAyIGNvbnRhaW5pbmcgdGhlIHZhbHVlXG4gICAgICogdG8gYWRkIHRvIHRoZSByZXN1bHRpbmcgbGlzdCBhbmQgdGhlIHNlZWQgdG8gYmUgdXNlZCBpbiB0aGUgbmV4dCBjYWxsIHRvIHRoZVxuICAgICAqIGl0ZXJhdG9yIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIHJlY2VpdmVzIG9uZSBhcmd1bWVudDogKihzZWVkKSouXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gW2JdKSAtPiAqIC0+IFtiXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBpdGVyYXRvciBmdW5jdGlvbi4gcmVjZWl2ZXMgb25lIGFyZ3VtZW50LCBgc2VlZGAsIGFuZCByZXR1cm5zXG4gICAgICogICAgICAgIGVpdGhlciBmYWxzZSB0byBxdWl0IGl0ZXJhdGlvbiBvciBhbiBhcnJheSBvZiBsZW5ndGggdHdvIHRvIHByb2NlZWQuIFRoZSBlbGVtZW50XG4gICAgICogICAgICAgIGF0IGluZGV4IDAgb2YgdGhpcyBhcnJheSB3aWxsIGJlIGFkZGVkIHRvIHRoZSByZXN1bHRpbmcgYXJyYXksIGFuZCB0aGUgZWxlbWVudFxuICAgICAqICAgICAgICBhdCBpbmRleCAxIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBuZXh0IGNhbGwgdG8gYGZuYC5cbiAgICAgKiBAcGFyYW0geyp9IHNlZWQgVGhlIHNlZWQgdmFsdWUuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBmaW5hbCBsaXN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmID0gbiA9PiBuID4gNTAgPyBmYWxzZSA6IFstbiwgbiArIDEwXTtcbiAgICAgKiAgICAgIFIudW5mb2xkKGYsIDEwKTsgLy89PiBbLTEwLCAtMjAsIC0zMCwgLTQwLCAtNTBdXG4gICAgICovXG4gICAgdmFyIHVuZm9sZCA9IF9jdXJyeTIoZnVuY3Rpb24gdW5mb2xkKGZuLCBzZWVkKSB7XG4gICAgICAgIHZhciBwYWlyID0gZm4oc2VlZCk7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgd2hpbGUgKHBhaXIgJiYgcGFpci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IHBhaXJbMF07XG4gICAgICAgICAgICBwYWlyID0gZm4ocGFpclsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIG9ubHkgb25lIGNvcHkgb2YgZWFjaCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbFxuICAgICAqIGxpc3QsIGJhc2VkIHVwb24gdGhlIHZhbHVlIHJldHVybmVkIGJ5IGFwcGx5aW5nIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgdG9cbiAgICAgKiB0d28gbGlzdCBlbGVtZW50cy4gUHJlZmVycyB0aGUgZmlyc3QgaXRlbSBpZiB0d28gaXRlbXMgY29tcGFyZSBlcXVhbCBiYXNlZFxuICAgICAqIG9uIHRoZSBwcmVkaWNhdGUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSwgYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSB1c2VkIHRvIHRlc3Qgd2hldGhlciB0d28gaXRlbXMgYXJlIGVxdWFsLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBvZiB1bmlxdWUgaXRlbXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHN0ckVxID0gUi5lcUJ5KFN0cmluZyk7XG4gICAgICogICAgICBSLnVuaXFXaXRoKHN0ckVxKShbMSwgJzEnLCAyLCAxXSk7IC8vPT4gWzEsIDJdXG4gICAgICogICAgICBSLnVuaXFXaXRoKHN0ckVxKShbe30sIHt9XSk7ICAgICAgIC8vPT4gW3t9XVxuICAgICAqICAgICAgUi51bmlxV2l0aChzdHJFcSkoWzEsICcxJywgMV0pOyAgICAvLz0+IFsxXVxuICAgICAqICAgICAgUi51bmlxV2l0aChzdHJFcSkoWycxJywgMSwgMV0pOyAgICAvLz0+IFsnMSddXG4gICAgICovXG4gICAgdmFyIHVuaXFXaXRoID0gX2N1cnJ5MihmdW5jdGlvbiB1bmlxV2l0aChwcmVkLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGl0ZW07XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGl0ZW0gPSBsaXN0W2lkeF07XG4gICAgICAgICAgICBpZiAoIV9jb250YWluc1dpdGgocHJlZCwgaXRlbSwgcmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGVzdHMgdGhlIGZpbmFsIGFyZ3VtZW50IGJ5IHBhc3NpbmcgaXQgdG8gdGhlIGdpdmVuIHByZWRpY2F0ZSBmdW5jdGlvbi4gSWZcbiAgICAgKiB0aGUgcHJlZGljYXRlIGlzIG5vdCBzYXRpc2ZpZWQsIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgcmVzdWx0IG9mXG4gICAgICogY2FsbGluZyB0aGUgYHdoZW5GYWxzZUZuYCBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50LiBJZiB0aGUgcHJlZGljYXRlXG4gICAgICogaXMgc2F0aXNmaWVkLCB0aGUgYXJndW1lbnQgaXMgcmV0dXJuZWQgYXMgaXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE4LjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IChhIC0+IGEpIC0+IGEgLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgICAgICAgIEEgcHJlZGljYXRlIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gd2hlbkZhbHNlRm4gQSBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgYHByZWRgIGV2YWx1YXRlc1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgZmFsc3kgdmFsdWUuXG4gICAgICogQHBhcmFtIHsqfSAgICAgICAgeCAgICAgICAgICAgQW4gb2JqZWN0IHRvIHRlc3Qgd2l0aCB0aGUgYHByZWRgIGZ1bmN0aW9uIGFuZFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MgdG8gYHdoZW5GYWxzZUZuYCBpZiBuZWNlc3NhcnkuXG4gICAgICogQHJldHVybiB7Kn0gRWl0aGVyIGB4YCBvciB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGB4YCB0byBgd2hlbkZhbHNlRm5gLlxuICAgICAqIEBzZWUgUi5pZkVsc2UsIFIud2hlblxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIGNvZXJjZUFycmF5IDo6IChhfFthXSkgLT4gW2FdXG4gICAgICogICAgICB2YXIgY29lcmNlQXJyYXkgPSBSLnVubGVzcyhSLmlzQXJyYXlMaWtlLCBSLm9mKTtcbiAgICAgKiAgICAgIGNvZXJjZUFycmF5KFsxLCAyLCAzXSk7IC8vPT4gWzEsIDIsIDNdXG4gICAgICogICAgICBjb2VyY2VBcnJheSgxKTsgICAgICAgICAvLz0+IFsxXVxuICAgICAqL1xuICAgIHZhciB1bmxlc3MgPSBfY3VycnkzKGZ1bmN0aW9uIHVubGVzcyhwcmVkLCB3aGVuRmFsc2VGbiwgeCkge1xuICAgICAgICByZXR1cm4gcHJlZCh4KSA/IHggOiB3aGVuRmFsc2VGbih4KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgcHJlZGljYXRlLCBhIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uLCBhbmQgYW4gaW5pdGlhbCB2YWx1ZSxcbiAgICAgKiBhbmQgcmV0dXJucyBhIHZhbHVlIG9mIHRoZSBzYW1lIHR5cGUgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogSXQgZG9lcyBzbyBieSBhcHBseWluZyB0aGUgdHJhbnNmb3JtYXRpb24gdW50aWwgdGhlIHByZWRpY2F0ZSBpcyBzYXRpc2ZpZWQsXG4gICAgICogYXQgd2hpY2ggcG9pbnQgaXQgcmV0dXJucyB0aGUgc2F0aXNmYWN0b3J5IHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yMC4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiAoYSAtPiBhKSAtPiBhIC0+IGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIEEgcHJlZGljYXRlIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHsqfSBpbml0IEluaXRpYWwgdmFsdWVcbiAgICAgKiBAcmV0dXJuIHsqfSBGaW5hbCB2YWx1ZSB0aGF0IHNhdGlzZmllcyBwcmVkaWNhdGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnVudGlsKFIuZ3QoUi5fXywgMTAwKSwgUi5tdWx0aXBseSgyKSkoMSkgLy8gPT4gMTI4XG4gICAgICovXG4gICAgdmFyIHVudGlsID0gX2N1cnJ5MyhmdW5jdGlvbiB1bnRpbChwcmVkLCBmbiwgaW5pdCkge1xuICAgICAgICB2YXIgdmFsID0gaW5pdDtcbiAgICAgICAgd2hpbGUgKCFwcmVkKHZhbCkpIHtcbiAgICAgICAgICAgIHZhbCA9IGZuKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgY29weSBvZiB0aGUgYXJyYXkgd2l0aCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXhcbiAgICAgKiByZXBsYWNlZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gYSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGlkeCBUaGUgaW5kZXggdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSB7Kn0geCBUaGUgdmFsdWUgdG8gZXhpc3QgYXQgdGhlIGdpdmVuIGluZGV4IG9mIHRoZSByZXR1cm5lZCBhcnJheS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fEFyZ3VtZW50c30gbGlzdCBUaGUgc291cmNlIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGJlIHVwZGF0ZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgY29weSBvZiBgbGlzdGAgd2l0aCB0aGUgdmFsdWUgYXQgaW5kZXggYGlkeGAgcmVwbGFjZWQgd2l0aCBgeGAuXG4gICAgICogQHNlZSBSLmFkanVzdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudXBkYXRlKDEsIDExLCBbMCwgMSwgMl0pOyAgICAgLy89PiBbMCwgMTEsIDJdXG4gICAgICogICAgICBSLnVwZGF0ZSgxKSgxMSkoWzAsIDEsIDJdKTsgICAgIC8vPT4gWzAsIDExLCAyXVxuICAgICAqL1xuICAgIHZhciB1cGRhdGUgPSBfY3VycnkzKGZ1bmN0aW9uIHVwZGF0ZShpZHgsIHgsIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIGFkanVzdChhbHdheXMoeCksIGlkeCwgbGlzdCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBY2NlcHRzIGEgZnVuY3Rpb24gYGZuYCBhbmQgYSBsaXN0IG9mIHRyYW5zZm9ybWVyIGZ1bmN0aW9ucyBhbmQgcmV0dXJucyBhXG4gICAgICogbmV3IGN1cnJpZWQgZnVuY3Rpb24uIFdoZW4gdGhlIG5ldyBmdW5jdGlvbiBpcyBpbnZva2VkLCBpdCBjYWxscyB0aGVcbiAgICAgKiBmdW5jdGlvbiBgZm5gIHdpdGggcGFyYW1ldGVycyBjb25zaXN0aW5nIG9mIHRoZSByZXN1bHQgb2YgY2FsbGluZyBlYWNoXG4gICAgICogc3VwcGxpZWQgaGFuZGxlciBvbiBzdWNjZXNzaXZlIGFyZ3VtZW50cyB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogSWYgbW9yZSBhcmd1bWVudHMgYXJlIHBhc3NlZCB0byB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gdGhhbiB0cmFuc2Zvcm1lclxuICAgICAqIGZ1bmN0aW9ucywgdGhvc2UgYXJndW1lbnRzIGFyZSBwYXNzZWQgZGlyZWN0bHkgdG8gYGZuYCBhcyBhZGRpdGlvbmFsXG4gICAgICogcGFyYW1ldGVycy4gSWYgeW91IGV4cGVjdCBhZGRpdGlvbmFsIGFyZ3VtZW50cyB0aGF0IGRvbid0IG5lZWQgdG8gYmVcbiAgICAgKiB0cmFuc2Zvcm1lZCwgYWx0aG91Z2ggeW91IGNhbiBpZ25vcmUgdGhlbSwgaXQncyBiZXN0IHRvIHBhc3MgYW4gaWRlbnRpdHlcbiAgICAgKiBmdW5jdGlvbiBzbyB0aGF0IHRoZSBuZXcgZnVuY3Rpb24gcmVwb3J0cyB0aGUgY29ycmVjdCBhcml0eS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoeDEgLT4geDIgLT4gLi4uIC0+IHopIC0+IFsoYSAtPiB4MSksIChiIC0+IHgyKSwgLi4uXSAtPiAoYSAtPiBiIC0+IC4uLiAtPiB6KVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHRyYW5zZm9ybWVycyBBIGxpc3Qgb2YgdHJhbnNmb3JtZXIgZnVuY3Rpb25zXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudXNlV2l0aChNYXRoLnBvdywgW1IuaWRlbnRpdHksIFIuaWRlbnRpdHldKSgzLCA0KTsgLy89PiA4MVxuICAgICAqICAgICAgUi51c2VXaXRoKE1hdGgucG93LCBbUi5pZGVudGl0eSwgUi5pZGVudGl0eV0pKDMpKDQpOyAvLz0+IDgxXG4gICAgICogICAgICBSLnVzZVdpdGgoTWF0aC5wb3csIFtSLmRlYywgUi5pbmNdKSgzLCA0KTsgLy89PiAzMlxuICAgICAqICAgICAgUi51c2VXaXRoKE1hdGgucG93LCBbUi5kZWMsIFIuaW5jXSkoMykoNCk7IC8vPT4gMzJcbiAgICAgKi9cbiAgICB2YXIgdXNlV2l0aCA9IF9jdXJyeTIoZnVuY3Rpb24gdXNlV2l0aChmbiwgdHJhbnNmb3JtZXJzKSB7XG4gICAgICAgIHJldHVybiBjdXJyeU4odHJhbnNmb3JtZXJzLmxlbmd0aCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IHRyYW5zZm9ybWVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2godHJhbnNmb3JtZXJzW2lkeF0uY2FsbCh0aGlzLCBhcmd1bWVudHNbaWR4XSkpO1xuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KF9zbGljZShhcmd1bWVudHMsIHRyYW5zZm9ybWVycy5sZW5ndGgpKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2YgYWxsIHRoZSBlbnVtZXJhYmxlIG93biBwcm9wZXJ0aWVzIG9mIHRoZSBzdXBwbGllZCBvYmplY3QuXG4gICAgICogTm90ZSB0aGF0IHRoZSBvcmRlciBvZiB0aGUgb3V0cHV0IGFycmF5IGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBkaWZmZXJlbnRcbiAgICAgKiBKUyBwbGF0Zm9ybXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtrOiB2fSAtPiBbdl1cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gZXh0cmFjdCB2YWx1ZXMgZnJvbVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiB0aGUgdmFsdWVzIG9mIHRoZSBvYmplY3QncyBvd24gcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnZhbHVlcyh7YTogMSwgYjogMiwgYzogM30pOyAvLz0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIHZhciB2YWx1ZXMgPSBfY3VycnkxKGZ1bmN0aW9uIHZhbHVlcyhvYmopIHtcbiAgICAgICAgdmFyIHByb3BzID0ga2V5cyhvYmopO1xuICAgICAgICB2YXIgbGVuID0gcHJvcHMubGVuZ3RoO1xuICAgICAgICB2YXIgdmFscyA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgdmFsc1tpZHhdID0gb2JqW3Byb3BzW2lkeF1dO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHM7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhbGwgdGhlIHByb3BlcnRpZXMsIGluY2x1ZGluZyBwcm90b3R5cGUgcHJvcGVydGllcywgb2YgdGhlXG4gICAgICogc3VwcGxpZWQgb2JqZWN0LlxuICAgICAqIE5vdGUgdGhhdCB0aGUgb3JkZXIgb2YgdGhlIG91dHB1dCBhcnJheSBpcyBub3QgZ3VhcmFudGVlZCB0byBiZSBjb25zaXN0ZW50XG4gICAgICogYWNyb3NzIGRpZmZlcmVudCBKUyBwbGF0Zm9ybXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtrOiB2fSAtPiBbdl1cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gZXh0cmFjdCB2YWx1ZXMgZnJvbVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiB0aGUgdmFsdWVzIG9mIHRoZSBvYmplY3QncyBvd24gYW5kIHByb3RvdHlwZSBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBGID0gZnVuY3Rpb24oKSB7IHRoaXMueCA9ICdYJzsgfTtcbiAgICAgKiAgICAgIEYucHJvdG90eXBlLnkgPSAnWSc7XG4gICAgICogICAgICB2YXIgZiA9IG5ldyBGKCk7XG4gICAgICogICAgICBSLnZhbHVlc0luKGYpOyAvLz0+IFsnWCcsICdZJ11cbiAgICAgKi9cbiAgICB2YXIgdmFsdWVzSW4gPSBfY3VycnkxKGZ1bmN0aW9uIHZhbHVlc0luKG9iaikge1xuICAgICAgICB2YXIgcHJvcDtcbiAgICAgICAgdmFyIHZzID0gW107XG4gICAgICAgIGZvciAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIHZzW3ZzLmxlbmd0aF0gPSBvYmpbcHJvcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZzO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFwidmlld1wiIG9mIHRoZSBnaXZlbiBkYXRhIHN0cnVjdHVyZSwgZGV0ZXJtaW5lZCBieSB0aGUgZ2l2ZW4gbGVucy5cbiAgICAgKiBUaGUgbGVucydzIGZvY3VzIGRldGVybWluZXMgd2hpY2ggcG9ydGlvbiBvZiB0aGUgZGF0YSBzdHJ1Y3R1cmUgaXMgdmlzaWJsZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAdHlwZWRlZm4gTGVucyBzIGEgPSBGdW5jdG9yIGYgPT4gKGEgLT4gZiBhKSAtPiBzIC0+IGYgc1xuICAgICAqIEBzaWcgTGVucyBzIGEgLT4gcyAtPiBhXG4gICAgICogQHBhcmFtIHtMZW5zfSBsZW5zXG4gICAgICogQHBhcmFtIHsqfSB4XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIucHJvcCwgUi5sZW5zSW5kZXgsIFIubGVuc1Byb3BcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgeExlbnMgPSBSLmxlbnNQcm9wKCd4Jyk7XG4gICAgICpcbiAgICAgKiAgICAgIFIudmlldyh4TGVucywge3g6IDEsIHk6IDJ9KTsgIC8vPT4gMVxuICAgICAqICAgICAgUi52aWV3KHhMZW5zLCB7eDogNCwgeTogMn0pOyAgLy89PiA0XG4gICAgICovXG4gICAgLy8gYENvbnN0YCBpcyBhIGZ1bmN0b3IgdGhhdCBlZmZlY3RpdmVseSBpZ25vcmVzIHRoZSBmdW5jdGlvbiBnaXZlbiB0byBgbWFwYC5cbiAgICAvLyBVc2luZyBgQ29uc3RgIGVmZmVjdGl2ZWx5IGlnbm9yZXMgdGhlIHNldHRlciBmdW5jdGlvbiBvZiB0aGUgYGxlbnNgLFxuICAgIC8vIGxlYXZpbmcgdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBnZXR0ZXIgZnVuY3Rpb24gdW5tb2RpZmllZC5cbiAgICB2YXIgdmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gYENvbnN0YCBpcyBhIGZ1bmN0b3IgdGhhdCBlZmZlY3RpdmVseSBpZ25vcmVzIHRoZSBmdW5jdGlvbiBnaXZlbiB0byBgbWFwYC5cbiAgICAgICAgdmFyIENvbnN0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHgsXG4gICAgICAgICAgICAgICAgbWFwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIHZpZXcobGVucywgeCkge1xuICAgICAgICAgICAgLy8gVXNpbmcgYENvbnN0YCBlZmZlY3RpdmVseSBpZ25vcmVzIHRoZSBzZXR0ZXIgZnVuY3Rpb24gb2YgdGhlIGBsZW5zYCxcbiAgICAgICAgICAgIC8vIGxlYXZpbmcgdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBnZXR0ZXIgZnVuY3Rpb24gdW5tb2RpZmllZC5cbiAgICAgICAgICAgIHJldHVybiBsZW5zKENvbnN0KSh4KS52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogVGVzdHMgdGhlIGZpbmFsIGFyZ3VtZW50IGJ5IHBhc3NpbmcgaXQgdG8gdGhlIGdpdmVuIHByZWRpY2F0ZSBmdW5jdGlvbi4gSWZcbiAgICAgKiB0aGUgcHJlZGljYXRlIGlzIHNhdGlzZmllZCwgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAqIHRoZSBgd2hlblRydWVGbmAgZnVuY3Rpb24gd2l0aCB0aGUgc2FtZSBhcmd1bWVudC4gSWYgdGhlIHByZWRpY2F0ZSBpcyBub3RcbiAgICAgKiBzYXRpc2ZpZWQsIHRoZSBhcmd1bWVudCBpcyByZXR1cm5lZCBhcyBpcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gKGEgLT4gYSkgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCAgICAgICBBIHByZWRpY2F0ZSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHdoZW5UcnVlRm4gQSBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgYGNvbmRpdGlvbmBcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9ICAgICAgICB4ICAgICAgICAgIEFuIG9iamVjdCB0byB0ZXN0IHdpdGggdGhlIGBwcmVkYCBmdW5jdGlvbiBhbmRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MgdG8gYHdoZW5UcnVlRm5gIGlmIG5lY2Vzc2FyeS5cbiAgICAgKiBAcmV0dXJuIHsqfSBFaXRoZXIgYHhgIG9yIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYHhgIHRvIGB3aGVuVHJ1ZUZuYC5cbiAgICAgKiBAc2VlIFIuaWZFbHNlLCBSLnVubGVzc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIHRydW5jYXRlIDo6IFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiAgICAgIHZhciB0cnVuY2F0ZSA9IFIud2hlbihcbiAgICAgKiAgICAgICAgUi5wcm9wU2F0aXNmaWVzKFIuZ3QoUi5fXywgMTApLCAnbGVuZ3RoJyksXG4gICAgICogICAgICAgIFIucGlwZShSLnRha2UoMTApLCBSLmFwcGVuZCgn4oCmJyksIFIuam9pbignJykpXG4gICAgICogICAgICApO1xuICAgICAqICAgICAgdHJ1bmNhdGUoJzEyMzQ1Jyk7ICAgICAgICAgLy89PiAnMTIzNDUnXG4gICAgICogICAgICB0cnVuY2F0ZSgnMDEyMzQ1Njc4OUFCQycpOyAvLz0+ICcwMTIzNDU2Nzg54oCmJ1xuICAgICAqL1xuICAgIHZhciB3aGVuID0gX2N1cnJ5MyhmdW5jdGlvbiB3aGVuKHByZWQsIHdoZW5UcnVlRm4sIHgpIHtcbiAgICAgICAgcmV0dXJuIHByZWQoeCkgPyB3aGVuVHJ1ZUZuKHgpIDogeDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgc3BlYyBvYmplY3QgYW5kIGEgdGVzdCBvYmplY3Q7IHJldHVybnMgdHJ1ZSBpZiB0aGUgdGVzdCBzYXRpc2ZpZXNcbiAgICAgKiB0aGUgc3BlYy4gRWFjaCBvZiB0aGUgc3BlYydzIG93biBwcm9wZXJ0aWVzIG11c3QgYmUgYSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAgICogRWFjaCBwcmVkaWNhdGUgaXMgYXBwbGllZCB0byB0aGUgdmFsdWUgb2YgdGhlIGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgb2YgdGhlXG4gICAgICogdGVzdCBvYmplY3QuIGB3aGVyZWAgcmV0dXJucyB0cnVlIGlmIGFsbCB0aGUgcHJlZGljYXRlcyByZXR1cm4gdHJ1ZSwgZmFsc2VcbiAgICAgKiBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBgd2hlcmVgIGlzIHdlbGwgc3VpdGVkIHRvIGRlY2xhcmF0aXZlbHkgZXhwcmVzc2luZyBjb25zdHJhaW50cyBmb3Igb3RoZXJcbiAgICAgKiBmdW5jdGlvbnMgc3VjaCBhcyBgZmlsdGVyYCBhbmQgYGZpbmRgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjFcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7U3RyaW5nOiAoKiAtPiBCb29sZWFuKX0gLT4ge1N0cmluZzogKn0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzcGVjXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRlc3RPYmpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIHByZWQgOjogT2JqZWN0IC0+IEJvb2xlYW5cbiAgICAgKiAgICAgIHZhciBwcmVkID0gUi53aGVyZSh7XG4gICAgICogICAgICAgIGE6IFIuZXF1YWxzKCdmb28nKSxcbiAgICAgKiAgICAgICAgYjogUi5jb21wbGVtZW50KFIuZXF1YWxzKCdiYXInKSksXG4gICAgICogICAgICAgIHg6IFIuZ3QoXywgMTApLFxuICAgICAqICAgICAgICB5OiBSLmx0KF8sIDIwKVxuICAgICAqICAgICAgfSk7XG4gICAgICpcbiAgICAgKiAgICAgIHByZWQoe2E6ICdmb28nLCBiOiAneHh4JywgeDogMTEsIHk6IDE5fSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgcHJlZCh7YTogJ3h4eCcsIGI6ICd4eHgnLCB4OiAxMSwgeTogMTl9KTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgcHJlZCh7YTogJ2ZvbycsIGI6ICdiYXInLCB4OiAxMSwgeTogMTl9KTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgcHJlZCh7YTogJ2ZvbycsIGI6ICd4eHgnLCB4OiAxMCwgeTogMTl9KTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgcHJlZCh7YTogJ2ZvbycsIGI6ICd4eHgnLCB4OiAxMSwgeTogMjB9KTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciB3aGVyZSA9IF9jdXJyeTIoZnVuY3Rpb24gd2hlcmUoc3BlYywgdGVzdE9iaikge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHNwZWMpIHtcbiAgICAgICAgICAgIGlmIChfaGFzKHByb3AsIHNwZWMpICYmICFzcGVjW3Byb3BdKHRlc3RPYmpbcHJvcF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogV3JhcCBhIGZ1bmN0aW9uIGluc2lkZSBhbm90aGVyIHRvIGFsbG93IHlvdSB0byBtYWtlIGFkanVzdG1lbnRzIHRvIHRoZVxuICAgICAqIHBhcmFtZXRlcnMsIG9yIGRvIG90aGVyIHByb2Nlc3NpbmcgZWl0aGVyIGJlZm9yZSB0aGUgaW50ZXJuYWwgZnVuY3Rpb24gaXNcbiAgICAgKiBjYWxsZWQgb3Igd2l0aCBpdHMgcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoYS4uLiAtPiBiKSAtPiAoKGEuLi4gLT4gYikgLT4gYS4uLiAtPiBjKSAtPiAoYS4uLiAtPiBjKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHdyYXBwZXIgVGhlIHdyYXBwZXIgZnVuY3Rpb24uXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBncmVldCA9IG5hbWUgPT4gJ0hlbGxvICcgKyBuYW1lO1xuICAgICAqXG4gICAgICogICAgICB2YXIgc2hvdXRlZEdyZWV0ID0gUi53cmFwKGdyZWV0LCAoZ3IsIG5hbWUpID0+IGdyKG5hbWUpLnRvVXBwZXJDYXNlKCkpO1xuICAgICAqXG4gICAgICogICAgICBzaG91dGVkR3JlZXQoXCJLYXRoeVwiKTsgLy89PiBcIkhFTExPIEtBVEhZXCJcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHNob3J0ZW5lZEdyZWV0ID0gUi53cmFwKGdyZWV0LCBmdW5jdGlvbihnciwgbmFtZSkge1xuICAgICAqICAgICAgICByZXR1cm4gZ3IobmFtZS5zdWJzdHJpbmcoMCwgMykpO1xuICAgICAqICAgICAgfSk7XG4gICAgICogICAgICBzaG9ydGVuZWRHcmVldChcIlJvYmVydFwiKTsgLy89PiBcIkhlbGxvIFJvYlwiXG4gICAgICovXG4gICAgdmFyIHdyYXAgPSBfY3VycnkyKGZ1bmN0aW9uIHdyYXAoZm4sIHdyYXBwZXIpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5Tihmbi5sZW5ndGgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB3cmFwcGVyLmFwcGx5KHRoaXMsIF9jb25jYXQoW2ZuXSwgYXJndW1lbnRzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBsaXN0IG91dCBvZiB0aGUgdHdvIHN1cHBsaWVkIGJ5IGNyZWF0aW5nIGVhY2ggcG9zc2libGUgcGFpclxuICAgICAqIGZyb20gdGhlIGxpc3RzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFtiXSAtPiBbW2EsYl1dXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXMgVGhlIGZpcnN0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gYnMgVGhlIHNlY29uZCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBtYWRlIGJ5IGNvbWJpbmluZyBlYWNoIHBvc3NpYmxlIHBhaXIgZnJvbVxuICAgICAqICAgICAgICAgYGFzYCBhbmQgYGJzYCBpbnRvIHBhaXJzIChgW2EsIGJdYCkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi54cHJvZChbMSwgMl0sIFsnYScsICdiJ10pOyAvLz0+IFtbMSwgJ2EnXSwgWzEsICdiJ10sIFsyLCAnYSddLCBbMiwgJ2InXV1cbiAgICAgKi9cbiAgICAvLyA9IHhwcm9kV2l0aChwcmVwZW5kKTsgKHRha2VzIGFib3V0IDMgdGltZXMgYXMgbG9uZy4uLilcbiAgICB2YXIgeHByb2QgPSBfY3VycnkyKGZ1bmN0aW9uIHhwcm9kKGEsIGIpIHtcbiAgICAgICAgLy8gPSB4cHJvZFdpdGgocHJlcGVuZCk7ICh0YWtlcyBhYm91dCAzIHRpbWVzIGFzIGxvbmcuLi4pXG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgaWxlbiA9IGEubGVuZ3RoO1xuICAgICAgICB2YXIgajtcbiAgICAgICAgdmFyIGpsZW4gPSBiLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB3aGlsZSAoaWR4IDwgaWxlbikge1xuICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaiA8IGpsZW4pIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSBbXG4gICAgICAgICAgICAgICAgICAgIGFbaWR4XSxcbiAgICAgICAgICAgICAgICAgICAgYltqXVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgaiArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbGlzdCBvdXQgb2YgdGhlIHR3byBzdXBwbGllZCBieSBwYWlyaW5nIHVwIGVxdWFsbHktcG9zaXRpb25lZFxuICAgICAqIGl0ZW1zIGZyb20gYm90aCBsaXN0cy4gVGhlIHJldHVybmVkIGxpc3QgaXMgdHJ1bmNhdGVkIHRvIHRoZSBsZW5ndGggb2YgdGhlXG4gICAgICogc2hvcnRlciBvZiB0aGUgdHdvIGlucHV0IGxpc3RzLlxuICAgICAqIE5vdGU6IGB6aXBgIGlzIGVxdWl2YWxlbnQgdG8gYHppcFdpdGgoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gW2EsIGJdIH0pYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYl0gLT4gW1thLGJdXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MiBUaGUgc2Vjb25kIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBtYWRlIGJ5IHBhaXJpbmcgdXAgc2FtZS1pbmRleGVkIGVsZW1lbnRzIG9mIGBsaXN0MWAgYW5kIGBsaXN0MmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi56aXAoWzEsIDIsIDNdLCBbJ2EnLCAnYicsICdjJ10pOyAvLz0+IFtbMSwgJ2EnXSwgWzIsICdiJ10sIFszLCAnYyddXVxuICAgICAqL1xuICAgIHZhciB6aXAgPSBfY3VycnkyKGZ1bmN0aW9uIHppcChhLCBiKSB7XG4gICAgICAgIHZhciBydiA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHJ2W2lkeF0gPSBbXG4gICAgICAgICAgICAgICAgYVtpZHhdLFxuICAgICAgICAgICAgICAgIGJbaWR4XVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgb2JqZWN0IG91dCBvZiBhIGxpc3Qgb2Yga2V5cyBhbmQgYSBsaXN0IG9mIHZhbHVlcy5cbiAgICAgKiBLZXkvdmFsdWUgcGFpcmluZyBpcyB0cnVuY2F0ZWQgdG8gdGhlIGxlbmd0aCBvZiB0aGUgc2hvcnRlciBvZiB0aGUgdHdvIGxpc3RzLlxuICAgICAqIE5vdGU6IGB6aXBPYmpgIGlzIGVxdWl2YWxlbnQgdG8gYHBpcGUoemlwV2l0aChwYWlyKSwgZnJvbVBhaXJzKWAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbU3RyaW5nXSAtPiBbKl0gLT4ge1N0cmluZzogKn1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBrZXlzIFRoZSBhcnJheSB0aGF0IHdpbGwgYmUgcHJvcGVydGllcyBvbiB0aGUgb3V0cHV0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgVGhlIGxpc3Qgb2YgdmFsdWVzIG9uIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIG9iamVjdCBtYWRlIGJ5IHBhaXJpbmcgdXAgc2FtZS1pbmRleGVkIGVsZW1lbnRzIG9mIGBrZXlzYCBhbmQgYHZhbHVlc2AuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi56aXBPYmooWydhJywgJ2InLCAnYyddLCBbMSwgMiwgM10pOyAvLz0+IHthOiAxLCBiOiAyLCBjOiAzfVxuICAgICAqL1xuICAgIHZhciB6aXBPYmogPSBfY3VycnkyKGZ1bmN0aW9uIHppcE9iaihrZXlzLCB2YWx1ZXMpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBNYXRoLm1pbihrZXlzLmxlbmd0aCwgdmFsdWVzLmxlbmd0aCk7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgb3V0W2tleXNbaWR4XV0gPSB2YWx1ZXNbaWR4XTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGxpc3Qgb3V0IG9mIHRoZSB0d28gc3VwcGxpZWQgYnkgYXBwbHlpbmcgdGhlIGZ1bmN0aW9uIHRvIGVhY2hcbiAgICAgKiBlcXVhbGx5LXBvc2l0aW9uZWQgcGFpciBpbiB0aGUgbGlzdHMuIFRoZSByZXR1cm5lZCBsaXN0IGlzIHRydW5jYXRlZCB0byB0aGVcbiAgICAgKiBsZW5ndGggb2YgdGhlIHNob3J0ZXIgb2YgdGhlIHR3byBpbnB1dCBsaXN0cy5cbiAgICAgKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSxiIC0+IGMpIC0+IFthXSAtPiBbYl0gLT4gW2NdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHVzZWQgdG8gY29tYmluZSB0aGUgdHdvIGVsZW1lbnRzIGludG8gb25lIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MiBUaGUgc2Vjb25kIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBtYWRlIGJ5IGNvbWJpbmluZyBzYW1lLWluZGV4ZWQgZWxlbWVudHMgb2YgYGxpc3QxYCBhbmQgYGxpc3QyYFxuICAgICAqICAgICAgICAgdXNpbmcgYGZuYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZiA9ICh4LCB5KSA9PiB7XG4gICAgICogICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIFIuemlwV2l0aChmLCBbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnXSk7XG4gICAgICogICAgICAvLz0+IFtmKDEsICdhJyksIGYoMiwgJ2InKSwgZigzLCAnYycpXVxuICAgICAqL1xuICAgIHZhciB6aXBXaXRoID0gX2N1cnJ5MyhmdW5jdGlvbiB6aXBXaXRoKGZuLCBhLCBiKSB7XG4gICAgICAgIHZhciBydiA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHJ2W2lkeF0gPSBmbihhW2lkeF0sIGJbaWR4XSk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgYWx3YXlzIHJldHVybnMgYGZhbHNlYC4gQW55IHBhc3NlZCBpbiBwYXJhbWV0ZXJzIGFyZSBpZ25vcmVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICogLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn1cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5hbHdheXMsIFIuVFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuRigpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIEYgPSBhbHdheXMoZmFsc2UpO1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGFsd2F5cyByZXR1cm5zIGB0cnVlYC4gQW55IHBhc3NlZCBpbiBwYXJhbWV0ZXJzIGFyZSBpZ25vcmVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICogLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn1cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5hbHdheXMsIFIuRlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuVCgpOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgVCA9IGFsd2F5cyh0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIENvcGllcyBhbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGJlIGNvcGllZFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHJlZkZyb20gQXJyYXkgY29udGFpbmluZyB0aGUgc291cmNlIHJlZmVyZW5jZXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSByZWZUbyBBcnJheSBjb250YWluaW5nIHRoZSBjb3BpZWQgc291cmNlIHJlZmVyZW5jZXNcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZXAgV2hldGhlciBvciBub3QgdG8gcGVyZm9ybSBkZWVwIGNsb25pbmcuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGNvcGllZCB2YWx1ZS5cbiAgICAgKi9cbiAgICB2YXIgX2Nsb25lID0gZnVuY3Rpb24gX2Nsb25lKHZhbHVlLCByZWZGcm9tLCByZWZUbywgZGVlcCkge1xuICAgICAgICB2YXIgY29weSA9IGZ1bmN0aW9uIGNvcHkoY29waWVkVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSByZWZGcm9tLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gcmVmRnJvbVtpZHhdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWZUb1tpZHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlZkZyb21baWR4ICsgMV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJlZlRvW2lkeCArIDFdID0gY29waWVkVmFsdWU7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb3BpZWRWYWx1ZVtrZXldID0gZGVlcCA/IF9jbG9uZSh2YWx1ZVtrZXldLCByZWZGcm9tLCByZWZUbywgdHJ1ZSkgOiB2YWx1ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvcGllZFZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBzd2l0Y2ggKHR5cGUodmFsdWUpKSB7XG4gICAgICAgIGNhc2UgJ09iamVjdCc6XG4gICAgICAgICAgICByZXR1cm4gY29weSh7fSk7XG4gICAgICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgICAgICAgIHJldHVybiBjb3B5KFtdKTtcbiAgICAgICAgY2FzZSAnRGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUodmFsdWUudmFsdWVPZigpKTtcbiAgICAgICAgY2FzZSAnUmVnRXhwJzpcbiAgICAgICAgICAgIHJldHVybiBfY2xvbmVSZWdFeHAodmFsdWUpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBfY3JlYXRlUGFydGlhbEFwcGxpY2F0b3IgPSBmdW5jdGlvbiBfY3JlYXRlUGFydGlhbEFwcGxpY2F0b3IoY29uY2F0KSB7XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIChmbiwgYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIF9hcml0eShNYXRoLm1heCgwLCBmbi5sZW5ndGggLSBhcmdzLmxlbmd0aCksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgY29uY2F0KGFyZ3MsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgX2Ryb3BMYXN0ID0gZnVuY3Rpb24gZHJvcExhc3QobiwgeHMpIHtcbiAgICAgICAgcmV0dXJuIHRha2UobiA8IHhzLmxlbmd0aCA/IHhzLmxlbmd0aCAtIG4gOiAwLCB4cyk7XG4gICAgfTtcblxuICAgIC8vIFZhbHVlcyBvZiBvdGhlciB0eXBlcyBhcmUgb25seSBlcXVhbCBpZiBpZGVudGljYWwuXG4gICAgdmFyIF9lcXVhbHMgPSBmdW5jdGlvbiBfZXF1YWxzKGEsIGIsIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICAgIGlmIChpZGVudGljYWwoYSwgYikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlKGEpICE9PSB0eXBlKGIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGEuZXF1YWxzID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBiLmVxdWFscyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhLmVxdWFscyA9PT0gJ2Z1bmN0aW9uJyAmJiBhLmVxdWFscyhiKSAmJiB0eXBlb2YgYi5lcXVhbHMgPT09ICdmdW5jdGlvbicgJiYgYi5lcXVhbHMoYSk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0eXBlKGEpKSB7XG4gICAgICAgIGNhc2UgJ0FyZ3VtZW50cyc6XG4gICAgICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgICAgY2FzZSAnT2JqZWN0JzpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYS5jb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiBfZnVuY3Rpb25OYW1lKGEuY29uc3RydWN0b3IpID09PSAnUHJvbWlzZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYSA9PT0gYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdCb29sZWFuJzpcbiAgICAgICAgY2FzZSAnTnVtYmVyJzpcbiAgICAgICAgY2FzZSAnU3RyaW5nJzpcbiAgICAgICAgICAgIGlmICghKHR5cGVvZiBhID09PSB0eXBlb2YgYiAmJiBpZGVudGljYWwoYS52YWx1ZU9mKCksIGIudmFsdWVPZigpKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRGF0ZSc6XG4gICAgICAgICAgICBpZiAoIWlkZW50aWNhbChhLnZhbHVlT2YoKSwgYi52YWx1ZU9mKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Vycm9yJzpcbiAgICAgICAgICAgIHJldHVybiBhLm5hbWUgPT09IGIubmFtZSAmJiBhLm1lc3NhZ2UgPT09IGIubWVzc2FnZTtcbiAgICAgICAgY2FzZSAnUmVnRXhwJzpcbiAgICAgICAgICAgIGlmICghKGEuc291cmNlID09PSBiLnNvdXJjZSAmJiBhLmdsb2JhbCA9PT0gYi5nbG9iYWwgJiYgYS5pZ25vcmVDYXNlID09PSBiLmlnbm9yZUNhc2UgJiYgYS5tdWx0aWxpbmUgPT09IGIubXVsdGlsaW5lICYmIGEuc3RpY2t5ID09PSBiLnN0aWNreSAmJiBhLnVuaWNvZGUgPT09IGIudW5pY29kZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFwJzpcbiAgICAgICAgY2FzZSAnU2V0JzpcbiAgICAgICAgICAgIGlmICghX2VxdWFscyhfYXJyYXlGcm9tSXRlcmF0b3IoYS5lbnRyaWVzKCkpLCBfYXJyYXlGcm9tSXRlcmF0b3IoYi5lbnRyaWVzKCkpLCBzdGFja0EsIHN0YWNrQikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnSW50OEFycmF5JzpcbiAgICAgICAgY2FzZSAnVWludDhBcnJheSc6XG4gICAgICAgIGNhc2UgJ1VpbnQ4Q2xhbXBlZEFycmF5JzpcbiAgICAgICAgY2FzZSAnSW50MTZBcnJheSc6XG4gICAgICAgIGNhc2UgJ1VpbnQxNkFycmF5JzpcbiAgICAgICAgY2FzZSAnSW50MzJBcnJheSc6XG4gICAgICAgIGNhc2UgJ1VpbnQzMkFycmF5JzpcbiAgICAgICAgY2FzZSAnRmxvYXQzMkFycmF5JzpcbiAgICAgICAgY2FzZSAnRmxvYXQ2NEFycmF5JzpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdBcnJheUJ1ZmZlcic6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIFZhbHVlcyBvZiBvdGhlciB0eXBlcyBhcmUgb25seSBlcXVhbCBpZiBpZGVudGljYWwuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGtleXNBID0ga2V5cyhhKTtcbiAgICAgICAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5cyhiKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaWR4ID0gc3RhY2tBLmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlIChpZHggPj0gMCkge1xuICAgICAgICAgICAgaWYgKHN0YWNrQVtpZHhdID09PSBhKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YWNrQltpZHhdID09PSBiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4IC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgc3RhY2tBLnB1c2goYSk7XG4gICAgICAgIHN0YWNrQi5wdXNoKGIpO1xuICAgICAgICBpZHggPSBrZXlzQS5sZW5ndGggLSAxO1xuICAgICAgICB3aGlsZSAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzQVtpZHhdO1xuICAgICAgICAgICAgaWYgKCEoX2hhcyhrZXksIGIpICYmIF9lcXVhbHMoYltrZXldLCBhW2tleV0sIHN0YWNrQSwgc3RhY2tCKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgfVxuICAgICAgICBzdGFja0EucG9wKCk7XG4gICAgICAgIHN0YWNrQi5wb3AoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGBfbWFrZUZsYXRgIGlzIGEgaGVscGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIG9uZS1sZXZlbCBvciBmdWxseSByZWN1cnNpdmVcbiAgICAgKiBmdW5jdGlvbiBiYXNlZCBvbiB0aGUgZmxhZyBwYXNzZWQgaW4uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHZhciBfbWFrZUZsYXQgPSBmdW5jdGlvbiBfbWFrZUZsYXQocmVjdXJzaXZlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBmbGF0dChsaXN0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUsIGpsZW4sIGo7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBpbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaWR4IDwgaWxlbikge1xuICAgICAgICAgICAgICAgIGlmIChpc0FycmF5TGlrZShsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmVjdXJzaXZlID8gZmxhdHQobGlzdFtpZHhdKSA6IGxpc3RbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGpsZW4gPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgamxlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gdmFsdWVbal07XG4gICAgICAgICAgICAgICAgICAgICAgICBqICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSBsaXN0W2lkeF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIF9yZWR1Y2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIF9hcnJheVJlZHVjZSh4ZiwgYWNjLCBsaXN0KSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICBhY2MgPSB4ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShhY2MsIGxpc3RbaWR4XSk7XG4gICAgICAgICAgICAgICAgaWYgKGFjYyAmJiBhY2NbJ0BAdHJhbnNkdWNlci9yZWR1Y2VkJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjID0gYWNjWydAQHRyYW5zZHVjZXIvdmFsdWUnXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10oYWNjKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBfaXRlcmFibGVSZWR1Y2UoeGYsIGFjYywgaXRlcikge1xuICAgICAgICAgICAgdmFyIHN0ZXAgPSBpdGVyLm5leHQoKTtcbiAgICAgICAgICAgIHdoaWxlICghc3RlcC5kb25lKSB7XG4gICAgICAgICAgICAgICAgYWNjID0geGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10oYWNjLCBzdGVwLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoYWNjICYmIGFjY1snQEB0cmFuc2R1Y2VyL3JlZHVjZWQnXSkge1xuICAgICAgICAgICAgICAgICAgICBhY2MgPSBhY2NbJ0BAdHJhbnNkdWNlci92YWx1ZSddO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RlcCA9IGl0ZXIubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10oYWNjKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBfbWV0aG9kUmVkdWNlKHhmLCBhY2MsIG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIHhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ob2JqLnJlZHVjZShiaW5kKHhmWydAQHRyYW5zZHVjZXIvc3RlcCddLCB4ZiksIGFjYykpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzeW1JdGVyYXRvciA9IHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnID8gU3ltYm9sLml0ZXJhdG9yIDogJ0BAaXRlcmF0b3InO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX3JlZHVjZShmbiwgYWNjLCBsaXN0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgZm4gPSBfeHdyYXAoZm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQXJyYXlMaWtlKGxpc3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9hcnJheVJlZHVjZShmbiwgYWNjLCBsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdC5yZWR1Y2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX21ldGhvZFJlZHVjZShmbiwgYWNjLCBsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaXN0W3N5bUl0ZXJhdG9yXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pdGVyYWJsZVJlZHVjZShmbiwgYWNjLCBsaXN0W3N5bUl0ZXJhdG9yXSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdC5uZXh0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pdGVyYWJsZVJlZHVjZShmbiwgYWNjLCBsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3JlZHVjZTogbGlzdCBtdXN0IGJlIGFycmF5IG9yIGl0ZXJhYmxlJyk7XG4gICAgICAgIH07XG4gICAgfSgpO1xuXG4gICAgdmFyIF9zdGVwQ2F0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3N0ZXBDYXRBcnJheSA9IHtcbiAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvaW5pdCc6IEFycmF5LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24gKHhzLCB4KSB7XG4gICAgICAgICAgICAgICAgeHMucHVzaCh4KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geHM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBfaWRlbnRpdHlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIF9zdGVwQ2F0U3RyaW5nID0ge1xuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9pbml0JzogU3RyaW5nLFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYSArIGI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBfaWRlbnRpdHlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIF9zdGVwQ2F0T2JqZWN0ID0ge1xuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9pbml0JzogT2JqZWN0LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2Fzc2lnbihyZXN1bHQsIGlzQXJyYXlMaWtlKGlucHV0KSA/IG9iak9mKGlucHV0WzBdLCBpbnB1dFsxXSkgOiBpbnB1dCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBfaWRlbnRpdHlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9zdGVwQ2F0KG9iaikge1xuICAgICAgICAgICAgaWYgKF9pc1RyYW5zZm9ybWVyKG9iaikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3N0ZXBDYXRBcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfc3RlcENhdFN0cmluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfc3RlcENhdE9iamVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNyZWF0ZSB0cmFuc2Zvcm1lciBmb3IgJyArIG9iaik7XG4gICAgICAgIH07XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZHJvcExhc3RXaGlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWERyb3BMYXN0V2hpbGUoZm4sIHhmKSB7XG4gICAgICAgICAgICB0aGlzLmYgPSBmbjtcbiAgICAgICAgICAgIHRoaXMucmV0YWluZWQgPSBbXTtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgfVxuICAgICAgICBYRHJvcExhc3RXaGlsZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhEcm9wTGFzdFdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5yZXRhaW5lZCA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFhEcm9wTGFzdFdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mKGlucHV0KSA/IHRoaXMucmV0YWluKHJlc3VsdCwgaW5wdXQpIDogdGhpcy5mbHVzaChyZXN1bHQsIGlucHV0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWERyb3BMYXN0V2hpbGUucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IF9yZWR1Y2UodGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSwgcmVzdWx0LCB0aGlzLnJldGFpbmVkKTtcbiAgICAgICAgICAgIHRoaXMucmV0YWluZWQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpO1xuICAgICAgICB9O1xuICAgICAgICBYRHJvcExhc3RXaGlsZS5wcm90b3R5cGUucmV0YWluID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMucmV0YWluZWQucHVzaChpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGRyb3BMYXN0V2hpbGUoZm4sIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhEcm9wTGFzdFdoaWxlKGZuLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGdyb3VwQnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhHcm91cEJ5KGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICAgICAgdGhpcy5pbnB1dHMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBYR3JvdXBCeS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhHcm91cEJ5LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgdmFyIGtleTtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIHRoaXMuaW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9oYXMoa2V5LCB0aGlzLmlucHV0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRoaXMuaW5wdXRzW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0WydAQHRyYW5zZHVjZXIvcmVkdWNlZCddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbJ0BAdHJhbnNkdWNlci92YWx1ZSddO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlucHV0cyA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFhHcm91cEJ5LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5mKGlucHV0KTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzW2tleV0gPSB0aGlzLmlucHV0c1trZXldIHx8IFtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgW11cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICB0aGlzLmlucHV0c1trZXldWzFdID0gYXBwZW5kKGlucHV0LCB0aGlzLmlucHV0c1trZXldWzFdKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94Z3JvdXBCeShmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYR3JvdXBCeShmLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbGlzdCBpdGVyYXRpb24gZnVuY3Rpb24gZnJvbSBhbiBleGlzdGluZyBvbmUgYnkgYWRkaW5nIHR3byBuZXdcbiAgICAgKiBwYXJhbWV0ZXJzIHRvIGl0cyBjYWxsYmFjayBmdW5jdGlvbjogdGhlIGN1cnJlbnQgaW5kZXgsIGFuZCB0aGUgZW50aXJlIGxpc3QuXG4gICAgICpcbiAgICAgKiBUaGlzIHdvdWxkIHR1cm4sIGZvciBpbnN0YW5jZSwgUmFtZGEncyBzaW1wbGUgYG1hcGAgZnVuY3Rpb24gaW50byBvbmUgdGhhdFxuICAgICAqIG1vcmUgY2xvc2VseSByZXNlbWJsZXMgYEFycmF5LnByb3RvdHlwZS5tYXBgLiBOb3RlIHRoYXQgdGhpcyB3aWxsIG9ubHkgd29ya1xuICAgICAqIGZvciBmdW5jdGlvbnMgaW4gd2hpY2ggdGhlIGl0ZXJhdGlvbiBjYWxsYmFjayBmdW5jdGlvbiBpcyB0aGUgZmlyc3RcbiAgICAgKiBwYXJhbWV0ZXIsIGFuZCB3aGVyZSB0aGUgbGlzdCBpcyB0aGUgbGFzdCBwYXJhbWV0ZXIuIChUaGlzIGxhdHRlciBtaWdodCBiZVxuICAgICAqIHVuaW1wb3J0YW50IGlmIHRoZSBsaXN0IHBhcmFtZXRlciBpcyBub3QgdXNlZC4pXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE1LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKChhIC4uLiAtPiBiKSAuLi4gLT4gW2FdIC0+ICopIC0+IChhIC4uLiwgSW50LCBbYV0gLT4gYikgLi4uIC0+IFthXSAtPiAqKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEEgbGlzdCBpdGVyYXRpb24gZnVuY3Rpb24gdGhhdCBkb2VzIG5vdCBwYXNzIGluZGV4IG9yIGxpc3QgdG8gaXRzIGNhbGxiYWNrXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEFuIGFsdGVyZWQgbGlzdCBpdGVyYXRpb24gZnVuY3Rpb24gdGhhdCBwYXNzZXMgKGl0ZW0sIGluZGV4LCBsaXN0KSB0byBpdHMgY2FsbGJhY2tcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbWFwSW5kZXhlZCA9IFIuYWRkSW5kZXgoUi5tYXApO1xuICAgICAqICAgICAgbWFwSW5kZXhlZCgodmFsLCBpZHgpID0+IGlkeCArICctJyArIHZhbCwgWydmJywgJ28nLCAnbycsICdiJywgJ2EnLCAnciddKTtcbiAgICAgKiAgICAgIC8vPT4gWycwLWYnLCAnMS1vJywgJzItbycsICczLWInLCAnNC1hJywgJzUtciddXG4gICAgICovXG4gICAgdmFyIGFkZEluZGV4ID0gX2N1cnJ5MShmdW5jdGlvbiBhZGRJbmRleChmbikge1xuICAgICAgICByZXR1cm4gY3VycnlOKGZuLmxlbmd0aCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICB2YXIgb3JpZ0ZuID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgdmFyIGxpc3QgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBfc2xpY2UoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGFyZ3NbMF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG9yaWdGbi5hcHBseSh0aGlzLCBfY29uY2F0KGFyZ3VtZW50cywgW1xuICAgICAgICAgICAgICAgICAgICBpZHgsXG4gICAgICAgICAgICAgICAgICAgIGxpc3RcbiAgICAgICAgICAgICAgICBdKSk7XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogV3JhcHMgYSBmdW5jdGlvbiBvZiBhbnkgYXJpdHkgKGluY2x1ZGluZyBudWxsYXJ5KSBpbiBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0c1xuICAgICAqIGV4YWN0bHkgMiBwYXJhbWV0ZXJzLiBBbnkgZXh0cmFuZW91cyBwYXJhbWV0ZXJzIHdpbGwgbm90IGJlIHBhc3NlZCB0byB0aGVcbiAgICAgKiBzdXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKiAtPiBjKSAtPiAoYSwgYiAtPiBjKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyBgZm5gLiBUaGUgbmV3IGZ1bmN0aW9uIGlzIGd1YXJhbnRlZWQgdG8gYmUgb2ZcbiAgICAgKiAgICAgICAgIGFyaXR5IDIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRha2VzVGhyZWVBcmdzID0gZnVuY3Rpb24oYSwgYiwgYykge1xuICAgICAqICAgICAgICByZXR1cm4gW2EsIGIsIGNdO1xuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIHRha2VzVGhyZWVBcmdzLmxlbmd0aDsgLy89PiAzXG4gICAgICogICAgICB0YWtlc1RocmVlQXJncygxLCAyLCAzKTsgLy89PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRha2VzVHdvQXJncyA9IFIuYmluYXJ5KHRha2VzVGhyZWVBcmdzKTtcbiAgICAgKiAgICAgIHRha2VzVHdvQXJncy5sZW5ndGg7IC8vPT4gMlxuICAgICAqICAgICAgLy8gT25seSAyIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRvIHRoZSB3cmFwcGVkIGZ1bmN0aW9uXG4gICAgICogICAgICB0YWtlc1R3b0FyZ3MoMSwgMiwgMyk7IC8vPT4gWzEsIDIsIHVuZGVmaW5lZF1cbiAgICAgKi9cbiAgICB2YXIgYmluYXJ5ID0gX2N1cnJ5MShmdW5jdGlvbiBiaW5hcnkoZm4pIHtcbiAgICAgICAgcmV0dXJuIG5BcnkoMiwgZm4pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiB0aGUgdmFsdWUgd2hpY2ggbWF5IGNvbnRhaW4gKG5lc3RlZCkgYEFycmF5YHMgYW5kXG4gICAgICogYE9iamVjdGBzLCBgTnVtYmVyYHMsIGBTdHJpbmdgcywgYEJvb2xlYW5gcyBhbmQgYERhdGVgcy4gYEZ1bmN0aW9uYHMgYXJlIG5vdFxuICAgICAqIGNvcGllZCwgYnV0IGFzc2lnbmVkIGJ5IHRoZWlyIHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gYSBgY2xvbmVgIG1ldGhvZCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7Kn0gLT4geyp9XG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgb2JqZWN0IG9yIGFycmF5IHRvIGNsb25lXG4gICAgICogQHJldHVybiB7Kn0gQSBuZXcgb2JqZWN0IG9yIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBvYmplY3RzID0gW3t9LCB7fSwge31dO1xuICAgICAqICAgICAgdmFyIG9iamVjdHNDbG9uZSA9IFIuY2xvbmUob2JqZWN0cyk7XG4gICAgICogICAgICBvYmplY3RzWzBdID09PSBvYmplY3RzQ2xvbmVbMF07IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgY2xvbmUgPSBfY3VycnkxKGZ1bmN0aW9uIGNsb25lKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZS5jbG9uZSA9PT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLmNsb25lKCkgOiBfY2xvbmUodmFsdWUsIFtdLCBbXSwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY3VycmllZCBlcXVpdmFsZW50IG9mIHRoZSBwcm92aWRlZCBmdW5jdGlvbi4gVGhlIGN1cnJpZWQgZnVuY3Rpb25cbiAgICAgKiBoYXMgdHdvIHVudXN1YWwgY2FwYWJpbGl0aWVzLiBGaXJzdCwgaXRzIGFyZ3VtZW50cyBuZWVkbid0IGJlIHByb3ZpZGVkIG9uZVxuICAgICAqIGF0IGEgdGltZS4gSWYgYGZgIGlzIGEgdGVybmFyeSBmdW5jdGlvbiBhbmQgYGdgIGlzIGBSLmN1cnJ5KGYpYCwgdGhlXG4gICAgICogZm9sbG93aW5nIGFyZSBlcXVpdmFsZW50OlxuICAgICAqXG4gICAgICogICAtIGBnKDEpKDIpKDMpYFxuICAgICAqICAgLSBgZygxKSgyLCAzKWBcbiAgICAgKiAgIC0gYGcoMSwgMikoMylgXG4gICAgICogICAtIGBnKDEsIDIsIDMpYFxuICAgICAqXG4gICAgICogU2Vjb25kbHksIHRoZSBzcGVjaWFsIHBsYWNlaG9sZGVyIHZhbHVlIGBSLl9fYCBtYXkgYmUgdXNlZCB0byBzcGVjaWZ5XG4gICAgICogXCJnYXBzXCIsIGFsbG93aW5nIHBhcnRpYWwgYXBwbGljYXRpb24gb2YgYW55IGNvbWJpbmF0aW9uIG9mIGFyZ3VtZW50cyxcbiAgICAgKiByZWdhcmRsZXNzIG9mIHRoZWlyIHBvc2l0aW9ucy4gSWYgYGdgIGlzIGFzIGFib3ZlIGFuZCBgX2AgaXMgYFIuX19gLCB0aGVcbiAgICAgKiBmb2xsb3dpbmcgYXJlIGVxdWl2YWxlbnQ6XG4gICAgICpcbiAgICAgKiAgIC0gYGcoMSwgMiwgMylgXG4gICAgICogICAtIGBnKF8sIDIsIDMpKDEpYFxuICAgICAqICAgLSBgZyhfLCBfLCAzKSgxKSgyKWBcbiAgICAgKiAgIC0gYGcoXywgXywgMykoMSwgMilgXG4gICAgICogICAtIGBnKF8sIDIpKDEpKDMpYFxuICAgICAqICAgLSBgZyhfLCAyKSgxLCAzKWBcbiAgICAgKiAgIC0gYGcoXywgMikoXywgMykoMSlgXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCogLT4gYSkgLT4gKCogLT4gYSlcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3LCBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBzZWUgUi5jdXJyeU5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYWRkRm91ck51bWJlcnMgPSAoYSwgYiwgYywgZCkgPT4gYSArIGIgKyBjICsgZDtcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGN1cnJpZWRBZGRGb3VyTnVtYmVycyA9IFIuY3VycnkoYWRkRm91ck51bWJlcnMpO1xuICAgICAqICAgICAgdmFyIGYgPSBjdXJyaWVkQWRkRm91ck51bWJlcnMoMSwgMik7XG4gICAgICogICAgICB2YXIgZyA9IGYoMyk7XG4gICAgICogICAgICBnKDQpOyAvLz0+IDEwXG4gICAgICovXG4gICAgdmFyIGN1cnJ5ID0gX2N1cnJ5MShmdW5jdGlvbiBjdXJyeShmbikge1xuICAgICAgICByZXR1cm4gY3VycnlOKGZuLmxlbmd0aCwgZm4pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgYnV0IHRoZSBmaXJzdCBgbmAgZWxlbWVudHMgb2YgdGhlIGdpdmVuIGxpc3QsIHN0cmluZywgb3JcbiAgICAgKiB0cmFuc2R1Y2VyL3RyYW5zZm9ybWVyIChvciBvYmplY3Qgd2l0aCBhIGBkcm9wYCBtZXRob2QpLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGRyb3BgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIE51bWJlciAtPiBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgKiBAcGFyYW0geyp9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi50YWtlLCBSLnRyYW5zZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZHJvcCgxLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLmRyb3AoMiwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ2JheiddXG4gICAgICogICAgICBSLmRyb3AoMywgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbXVxuICAgICAqICAgICAgUi5kcm9wKDQsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gW11cbiAgICAgKiAgICAgIFIuZHJvcCgzLCAncmFtZGEnKTsgICAgICAgICAgICAgICAvLz0+ICdkYSdcbiAgICAgKi9cbiAgICB2YXIgZHJvcCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZHJvcCcsIF94ZHJvcCwgZnVuY3Rpb24gZHJvcChuLCB4cykge1xuICAgICAgICByZXR1cm4gc2xpY2UoTWF0aC5tYXgoMCwgbiksIEluZmluaXR5LCB4cyk7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3QgY29udGFpbmluZyBhbGwgYnV0IHRoZSBsYXN0IGBuYCBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gYGxpc3RgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBbYV0gLT4gW2FdXG4gICAgICogQHNpZyBOdW1iZXIgLT4gU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgb2YgYHhzYCB0byBza2lwLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHhzIFRoZSBjb2xsZWN0aW9uIHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqIEBzZWUgUi50YWtlTGFzdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZHJvcExhc3QoMSwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ2ZvbycsICdiYXInXVxuICAgICAqICAgICAgUi5kcm9wTGFzdCgyLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnZm9vJ11cbiAgICAgKiAgICAgIFIuZHJvcExhc3QoMywgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbXVxuICAgICAqICAgICAgUi5kcm9wTGFzdCg0LCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFtdXG4gICAgICogICAgICBSLmRyb3BMYXN0KDMsICdyYW1kYScpOyAgICAgICAgICAgICAgIC8vPT4gJ3JhJ1xuICAgICAqL1xuICAgIHZhciBkcm9wTGFzdCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZHJvcExhc3QnLCBfeGRyb3BMYXN0LCBfZHJvcExhc3QpKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIGFsbCBidXQgbGFzdCB0aGVgbmAgZWxlbWVudHMgb2YgYSBnaXZlbiBsaXN0LFxuICAgICAqIHBhc3NpbmcgZWFjaCB2YWx1ZSBmcm9tIHRoZSByaWdodCB0byB0aGUgc3VwcGxpZWQgcHJlZGljYXRlIGZ1bmN0aW9uLFxuICAgICAqIHNraXBwaW5nIGVsZW1lbnRzIHdoaWxlIHRoZSBwcmVkaWNhdGUgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAuIFRoZSBwcmVkaWNhdGVcbiAgICAgKiBmdW5jdGlvbiBpcyBwYXNzZWQgb25lIGFyZ3VtZW50OiAodmFsdWUpKi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBhcnJheS5cbiAgICAgKiBAc2VlIFIudGFrZUxhc3RXaGlsZSwgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBsdGVUaHJlZSA9IHggPT4geCA8PSAzO1xuICAgICAqXG4gICAgICogICAgICBSLmRyb3BMYXN0V2hpbGUobHRlVGhyZWUsIFsxLCAyLCAzLCA0LCAzLCAyLCAxXSk7IC8vPT4gWzEsIDIsIDMsIDRdXG4gICAgICovXG4gICAgdmFyIGRyb3BMYXN0V2hpbGUgPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2Ryb3BMYXN0V2hpbGUnLCBfeGRyb3BMYXN0V2hpbGUsIF9kcm9wTGFzdFdoaWxlKSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBpdHMgYXJndW1lbnRzIGFyZSBlcXVpdmFsZW50LCBgZmFsc2VgIG90aGVyd2lzZS4gSGFuZGxlc1xuICAgICAqIGN5Y2xpY2FsIGRhdGEgc3RydWN0dXJlcy5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgc3ltbWV0cmljYWxseSB0byB0aGUgYGVxdWFsc2AgbWV0aG9kcyBvZiBib3RoIGFyZ3VtZW50cywgaWZcbiAgICAgKiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBhIC0+IGIgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn0gYVxuICAgICAqIEBwYXJhbSB7Kn0gYlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5lcXVhbHMoMSwgMSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5lcXVhbHMoMSwgJzEnKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5lcXVhbHMoWzEsIDIsIDNdLCBbMSwgMiwgM10pOyAvLz0+IHRydWVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGEgPSB7fTsgYS52ID0gYTtcbiAgICAgKiAgICAgIHZhciBiID0ge307IGIudiA9IGI7XG4gICAgICogICAgICBSLmVxdWFscyhhLCBiKTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGVxdWFscyA9IF9jdXJyeTIoZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIF9lcXVhbHMoYSwgYiwgW10sIFtdKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgcHJlZGljYXRlIGFuZCBhIFwiZmlsdGVyYWJsZVwiLCBhbmQgcmV0dXJucyBhIG5ldyBmaWx0ZXJhYmxlIG9mIHRoZVxuICAgICAqIHNhbWUgdHlwZSBjb250YWluaW5nIHRoZSBtZW1iZXJzIG9mIHRoZSBnaXZlbiBmaWx0ZXJhYmxlIHdoaWNoIHNhdGlzZnkgdGhlXG4gICAgICogZ2l2ZW4gcHJlZGljYXRlLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGZpbHRlcmAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBGaWx0ZXJhYmxlIGYgPT4gKGEgLT4gQm9vbGVhbikgLT4gZiBhIC0+IGYgYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJhYmxlXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQHNlZSBSLnJlamVjdCwgUi50cmFuc2R1Y2UsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNFdmVuID0gbiA9PiBuICUgMiA9PT0gMDtcbiAgICAgKlxuICAgICAqICAgICAgUi5maWx0ZXIoaXNFdmVuLCBbMSwgMiwgMywgNF0pOyAvLz0+IFsyLCA0XVxuICAgICAqXG4gICAgICogICAgICBSLmZpbHRlcihpc0V2ZW4sIHthOiAxLCBiOiAyLCBjOiAzLCBkOiA0fSk7IC8vPT4ge2I6IDIsIGQ6IDR9XG4gICAgICovXG4gICAgLy8gZWxzZVxuICAgIHZhciBmaWx0ZXIgPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2ZpbHRlcicsIF94ZmlsdGVyLCBmdW5jdGlvbiAocHJlZCwgZmlsdGVyYWJsZSkge1xuICAgICAgICByZXR1cm4gX2lzT2JqZWN0KGZpbHRlcmFibGUpID8gX3JlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICAgICAgICAgIGlmIChwcmVkKGZpbHRlcmFibGVba2V5XSkpIHtcbiAgICAgICAgICAgICAgICBhY2Nba2V5XSA9IGZpbHRlcmFibGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9LCBrZXlzKGZpbHRlcmFibGUpKSA6IC8vIGVsc2VcbiAgICAgICAgX2ZpbHRlcihwcmVkLCBmaWx0ZXJhYmxlKTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3QgYnkgcHVsbGluZyBldmVyeSBpdGVtIG91dCBvZiBpdCAoYW5kIGFsbCBpdHMgc3ViLWFycmF5cylcbiAgICAgKiBhbmQgcHV0dGluZyB0aGVtIGluIGEgbmV3IGFycmF5LCBkZXB0aC1maXJzdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYl1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGZsYXR0ZW5lZCBsaXN0LlxuICAgICAqIEBzZWUgUi51bm5lc3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmZsYXR0ZW4oWzEsIDIsIFszLCA0XSwgNSwgWzYsIFs3LCA4LCBbOSwgWzEwLCAxMV0sIDEyXV1dXSk7XG4gICAgICogICAgICAvLz0+IFsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEyXVxuICAgICAqL1xuICAgIHZhciBmbGF0dGVuID0gX2N1cnJ5MShfbWFrZUZsYXQodHJ1ZSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBmdW5jdGlvbiBtdWNoIGxpa2UgdGhlIHN1cHBsaWVkIG9uZSwgZXhjZXB0IHRoYXQgdGhlIGZpcnN0IHR3b1xuICAgICAqIGFyZ3VtZW50cycgb3JkZXIgaXMgcmV2ZXJzZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKGEgLT4gYiAtPiBjIC0+IC4uLiAtPiB6KSAtPiAoYiAtPiBhIC0+IGMgLT4gLi4uIC0+IHopXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGludm9rZSB3aXRoIGl0cyBmaXJzdCB0d28gcGFyYW1ldGVycyByZXZlcnNlZC5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgcmVzdWx0IG9mIGludm9raW5nIGBmbmAgd2l0aCBpdHMgZmlyc3QgdHdvIHBhcmFtZXRlcnMnIG9yZGVyIHJldmVyc2VkLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtZXJnZVRocmVlID0gKGEsIGIsIGMpID0+IFtdLmNvbmNhdChhLCBiLCBjKTtcbiAgICAgKlxuICAgICAqICAgICAgbWVyZ2VUaHJlZSgxLCAyLCAzKTsgLy89PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqICAgICAgUi5mbGlwKG1lcmdlVGhyZWUpKDEsIDIsIDMpOyAvLz0+IFsyLCAxLCAzXVxuICAgICAqL1xuICAgIHZhciBmbGlwID0gX2N1cnJ5MShmdW5jdGlvbiBmbGlwKGZuKSB7XG4gICAgICAgIHJldHVybiBjdXJyeShmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBfc2xpY2UoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGFyZ3NbMF0gPSBiO1xuICAgICAgICAgICAgYXJnc1sxXSA9IGE7XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgZ2l2ZW4gbGlzdCBvciBzdHJpbmcuIEluIHNvbWUgbGlicmFyaWVzXG4gICAgICogdGhpcyBmdW5jdGlvbiBpcyBuYW1lZCBgZmlyc3RgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IGEgfCBVbmRlZmluZWRcbiAgICAgKiBAc2lnIFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gbGlzdFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLnRhaWwsIFIuaW5pdCwgUi5sYXN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5oZWFkKFsnZmknLCAnZm8nLCAnZnVtJ10pOyAvLz0+ICdmaSdcbiAgICAgKiAgICAgIFIuaGVhZChbXSk7IC8vPT4gdW5kZWZpbmVkXG4gICAgICpcbiAgICAgKiAgICAgIFIuaGVhZCgnYWJjJyk7IC8vPT4gJ2EnXG4gICAgICogICAgICBSLmhlYWQoJycpOyAvLz0+ICcnXG4gICAgICovXG4gICAgdmFyIGhlYWQgPSBudGgoMCk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgZ2l2ZW4gbGlzdCBvciBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gW2FdXG4gICAgICogQHNpZyBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHsqfSBsaXN0XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIubGFzdCwgUi5oZWFkLCBSLnRhaWxcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmluaXQoWzEsIDIsIDNdKTsgIC8vPT4gWzEsIDJdXG4gICAgICogICAgICBSLmluaXQoWzEsIDJdKTsgICAgIC8vPT4gWzFdXG4gICAgICogICAgICBSLmluaXQoWzFdKTsgICAgICAgIC8vPT4gW11cbiAgICAgKiAgICAgIFIuaW5pdChbXSk7ICAgICAgICAgLy89PiBbXVxuICAgICAqXG4gICAgICogICAgICBSLmluaXQoJ2FiYycpOyAgLy89PiAnYWInXG4gICAgICogICAgICBSLmluaXQoJ2FiJyk7ICAgLy89PiAnYSdcbiAgICAgKiAgICAgIFIuaW5pdCgnYScpOyAgICAvLz0+ICcnXG4gICAgICogICAgICBSLmluaXQoJycpOyAgICAgLy89PiAnJ1xuICAgICAqL1xuICAgIHZhciBpbml0ID0gc2xpY2UoMCwgLTEpO1xuXG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdHdvIGxpc3RzIGludG8gYSBzZXQgKGkuZS4gbm8gZHVwbGljYXRlcykgY29tcG9zZWQgb2YgdGhvc2VcbiAgICAgKiBlbGVtZW50cyBjb21tb24gdG8gYm90aCBsaXN0cy4gRHVwbGljYXRpb24gaXMgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gdGhlXG4gICAgICogdmFsdWUgcmV0dXJuZWQgYnkgYXBwbHlpbmcgdGhlIHN1cHBsaWVkIHByZWRpY2F0ZSB0byB0d28gbGlzdCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyAoYSAtPiBhIC0+IEJvb2xlYW4pIC0+IFsqXSAtPiBbKl0gLT4gWypdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IGRldGVybWluZXMgd2hldGhlclxuICAgICAqICAgICAgICB0aGUgdHdvIHN1cHBsaWVkIGVsZW1lbnRzIGFyZSBlcXVhbC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MSBPbmUgbGlzdCBvZiBpdGVtcyB0byBjb21wYXJlXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDIgQSBzZWNvbmQgbGlzdCBvZiBpdGVtcyB0byBjb21wYXJlXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgbmV3IGxpc3QgY29udGFpbmluZyB0aG9zZSBlbGVtZW50cyBjb21tb24gdG8gYm90aCBsaXN0cy5cbiAgICAgKiBAc2VlIFIuaW50ZXJzZWN0aW9uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGJ1ZmZhbG9TcHJpbmdmaWVsZCA9IFtcbiAgICAgKiAgICAgICAge2lkOiA4MjQsIG5hbWU6ICdSaWNoaWUgRnVyYXknfSxcbiAgICAgKiAgICAgICAge2lkOiA5NTYsIG5hbWU6ICdEZXdleSBNYXJ0aW4nfSxcbiAgICAgKiAgICAgICAge2lkOiAzMTMsIG5hbWU6ICdCcnVjZSBQYWxtZXInfSxcbiAgICAgKiAgICAgICAge2lkOiA0NTYsIG5hbWU6ICdTdGVwaGVuIFN0aWxscyd9LFxuICAgICAqICAgICAgICB7aWQ6IDE3NywgbmFtZTogJ05laWwgWW91bmcnfVxuICAgICAqICAgICAgXTtcbiAgICAgKiAgICAgIHZhciBjc255ID0gW1xuICAgICAqICAgICAgICB7aWQ6IDIwNCwgbmFtZTogJ0RhdmlkIENyb3NieSd9LFxuICAgICAqICAgICAgICB7aWQ6IDQ1NiwgbmFtZTogJ1N0ZXBoZW4gU3RpbGxzJ30sXG4gICAgICogICAgICAgIHtpZDogNTM5LCBuYW1lOiAnR3JhaGFtIE5hc2gnfSxcbiAgICAgKiAgICAgICAge2lkOiAxNzcsIG5hbWU6ICdOZWlsIFlvdW5nJ31cbiAgICAgKiAgICAgIF07XG4gICAgICpcbiAgICAgKiAgICAgIFIuaW50ZXJzZWN0aW9uV2l0aChSLmVxQnkoUi5wcm9wKCdpZCcpKSwgYnVmZmFsb1NwcmluZ2ZpZWxkLCBjc255KTtcbiAgICAgKiAgICAgIC8vPT4gW3tpZDogNDU2LCBuYW1lOiAnU3RlcGhlbiBTdGlsbHMnfSwge2lkOiAxNzcsIG5hbWU6ICdOZWlsIFlvdW5nJ31dXG4gICAgICovXG4gICAgdmFyIGludGVyc2VjdGlvbldpdGggPSBfY3VycnkzKGZ1bmN0aW9uIGludGVyc2VjdGlvbldpdGgocHJlZCwgbGlzdDEsIGxpc3QyKSB7XG4gICAgICAgIHZhciBsb29rdXBMaXN0LCBmaWx0ZXJlZExpc3Q7XG4gICAgICAgIGlmIChsaXN0MS5sZW5ndGggPiBsaXN0Mi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxvb2t1cExpc3QgPSBsaXN0MTtcbiAgICAgICAgICAgIGZpbHRlcmVkTGlzdCA9IGxpc3QyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9va3VwTGlzdCA9IGxpc3QyO1xuICAgICAgICAgICAgZmlsdGVyZWRMaXN0ID0gbGlzdDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBmaWx0ZXJlZExpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoX2NvbnRhaW5zV2l0aChwcmVkLCBmaWx0ZXJlZExpc3RbaWR4XSwgbG9va3VwTGlzdCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzW3Jlc3VsdHMubGVuZ3RoXSA9IGZpbHRlcmVkTGlzdFtpZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuaXFXaXRoKHByZWQsIHJlc3VsdHMpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtcyB0aGUgaXRlbXMgb2YgdGhlIGxpc3Qgd2l0aCB0aGUgdHJhbnNkdWNlciBhbmQgYXBwZW5kcyB0aGVcbiAgICAgKiB0cmFuc2Zvcm1lZCBpdGVtcyB0byB0aGUgYWNjdW11bGF0b3IgdXNpbmcgYW4gYXBwcm9wcmlhdGUgaXRlcmF0b3IgZnVuY3Rpb25cbiAgICAgKiBiYXNlZCBvbiB0aGUgYWNjdW11bGF0b3IgdHlwZS5cbiAgICAgKlxuICAgICAqIFRoZSBhY2N1bXVsYXRvciBjYW4gYmUgYW4gYXJyYXksIHN0cmluZywgb2JqZWN0IG9yIGEgdHJhbnNmb3JtZXIuIEl0ZXJhdGVkXG4gICAgICogaXRlbXMgd2lsbCBiZSBhcHBlbmRlZCB0byBhcnJheXMgYW5kIGNvbmNhdGVuYXRlZCB0byBzdHJpbmdzLiBPYmplY3RzIHdpbGxcbiAgICAgKiBiZSBtZXJnZWQgZGlyZWN0bHkgb3IgMi1pdGVtIGFycmF5cyB3aWxsIGJlIG1lcmdlZCBhcyBrZXksIHZhbHVlIHBhaXJzLlxuICAgICAqXG4gICAgICogVGhlIGFjY3VtdWxhdG9yIGNhbiBhbHNvIGJlIGEgdHJhbnNmb3JtZXIgb2JqZWN0IHRoYXQgcHJvdmlkZXMgYSAyLWFyaXR5XG4gICAgICogcmVkdWNpbmcgaXRlcmF0b3IgZnVuY3Rpb24sIHN0ZXAsIDAtYXJpdHkgaW5pdGlhbCB2YWx1ZSBmdW5jdGlvbiwgaW5pdCwgYW5kXG4gICAgICogMS1hcml0eSByZXN1bHQgZXh0cmFjdGlvbiBmdW5jdGlvbiByZXN1bHQuIFRoZSBzdGVwIGZ1bmN0aW9uIGlzIHVzZWQgYXMgdGhlXG4gICAgICogaXRlcmF0b3IgZnVuY3Rpb24gaW4gcmVkdWNlLiBUaGUgcmVzdWx0IGZ1bmN0aW9uIGlzIHVzZWQgdG8gY29udmVydCB0aGVcbiAgICAgKiBmaW5hbCBhY2N1bXVsYXRvciBpbnRvIHRoZSByZXR1cm4gdHlwZSBhbmQgaW4gbW9zdCBjYXNlcyBpcyBSLmlkZW50aXR5LiBUaGVcbiAgICAgKiBpbml0IGZ1bmN0aW9uIGlzIHVzZWQgdG8gcHJvdmlkZSB0aGUgaW5pdGlhbCBhY2N1bXVsYXRvci5cbiAgICAgKlxuICAgICAqIFRoZSBpdGVyYXRpb24gaXMgcGVyZm9ybWVkIHdpdGggUi5yZWR1Y2UgYWZ0ZXIgaW5pdGlhbGl6aW5nIHRoZSB0cmFuc2R1Y2VyLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGEgLT4gKGIgLT4gYikgLT4gW2NdIC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IGFjYyBUaGUgaW5pdGlhbCBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB4ZiBUaGUgdHJhbnNkdWNlciBmdW5jdGlvbi4gUmVjZWl2ZXMgYSB0cmFuc2Zvcm1lciBhbmQgcmV0dXJucyBhIHRyYW5zZm9ybWVyLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBmaW5hbCwgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG51bWJlcnMgPSBbMSwgMiwgMywgNF07XG4gICAgICogICAgICB2YXIgdHJhbnNkdWNlciA9IFIuY29tcG9zZShSLm1hcChSLmFkZCgxKSksIFIudGFrZSgyKSk7XG4gICAgICpcbiAgICAgKiAgICAgIFIuaW50byhbXSwgdHJhbnNkdWNlciwgbnVtYmVycyk7IC8vPT4gWzIsIDNdXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBpbnRvQXJyYXkgPSBSLmludG8oW10pO1xuICAgICAqICAgICAgaW50b0FycmF5KHRyYW5zZHVjZXIsIG51bWJlcnMpOyAvLz0+IFsyLCAzXVxuICAgICAqL1xuICAgIHZhciBpbnRvID0gX2N1cnJ5MyhmdW5jdGlvbiBpbnRvKGFjYywgeGYsIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIF9pc1RyYW5zZm9ybWVyKGFjYykgPyBfcmVkdWNlKHhmKGFjYyksIGFjY1snQEB0cmFuc2R1Y2VyL2luaXQnXSgpLCBsaXN0KSA6IF9yZWR1Y2UoeGYoX3N0ZXBDYXQoYWNjKSksIF9jbG9uZShhY2MsIFtdLCBbXSwgZmFsc2UpLCBsaXN0KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNhbWUgYXMgUi5pbnZlcnRPYmosIGhvd2V2ZXIgdGhpcyBhY2NvdW50cyBmb3Igb2JqZWN0cyB3aXRoIGR1cGxpY2F0ZSB2YWx1ZXNcbiAgICAgKiBieSBwdXR0aW5nIHRoZSB2YWx1ZXMgaW50byBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge3M6IHh9IC0+IHt4OiBbIHMsIC4uLiBdfVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCBvciBhcnJheSB0byBpbnZlcnRcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IG91dCBBIG5ldyBvYmplY3Qgd2l0aCBrZXlzXG4gICAgICogaW4gYW4gYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHJhY2VSZXN1bHRzQnlGaXJzdE5hbWUgPSB7XG4gICAgICogICAgICAgIGZpcnN0OiAnYWxpY2UnLFxuICAgICAqICAgICAgICBzZWNvbmQ6ICdqYWtlJyxcbiAgICAgKiAgICAgICAgdGhpcmQ6ICdhbGljZScsXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgUi5pbnZlcnQocmFjZVJlc3VsdHNCeUZpcnN0TmFtZSk7XG4gICAgICogICAgICAvLz0+IHsgJ2FsaWNlJzogWydmaXJzdCcsICd0aGlyZCddLCAnamFrZSc6WydzZWNvbmQnXSB9XG4gICAgICovXG4gICAgdmFyIGludmVydCA9IF9jdXJyeTEoZnVuY3Rpb24gaW52ZXJ0KG9iaikge1xuICAgICAgICB2YXIgcHJvcHMgPSBrZXlzKG9iaik7XG4gICAgICAgIHZhciBsZW4gPSBwcm9wcy5sZW5ndGg7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBwcm9wc1tpZHhdO1xuICAgICAgICAgICAgdmFyIHZhbCA9IG9ialtrZXldO1xuICAgICAgICAgICAgdmFyIGxpc3QgPSBfaGFzKHZhbCwgb3V0KSA/IG91dFt2YWxdIDogb3V0W3ZhbF0gPSBbXTtcbiAgICAgICAgICAgIGxpc3RbbGlzdC5sZW5ndGhdID0ga2V5O1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggdGhlIGtleXMgb2YgdGhlIGdpdmVuIG9iamVjdCBhcyB2YWx1ZXMsIGFuZCB0aGVcbiAgICAgKiB2YWx1ZXMgb2YgdGhlIGdpdmVuIG9iamVjdCwgd2hpY2ggYXJlIGNvZXJjZWQgdG8gc3RyaW5ncywgYXMga2V5cy4gTm90ZVxuICAgICAqIHRoYXQgdGhlIGxhc3Qga2V5IGZvdW5kIGlzIHByZWZlcnJlZCB3aGVuIGhhbmRsaW5nIHRoZSBzYW1lIHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7czogeH0gLT4ge3g6IHN9XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IG9yIGFycmF5IHRvIGludmVydFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gb3V0IEEgbmV3IG9iamVjdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciByYWNlUmVzdWx0cyA9IHtcbiAgICAgKiAgICAgICAgZmlyc3Q6ICdhbGljZScsXG4gICAgICogICAgICAgIHNlY29uZDogJ2pha2UnXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgUi5pbnZlcnRPYmoocmFjZVJlc3VsdHMpO1xuICAgICAqICAgICAgLy89PiB7ICdhbGljZSc6ICdmaXJzdCcsICdqYWtlJzonc2Vjb25kJyB9XG4gICAgICpcbiAgICAgKiAgICAgIC8vIEFsdGVybmF0aXZlbHk6XG4gICAgICogICAgICB2YXIgcmFjZVJlc3VsdHMgPSBbJ2FsaWNlJywgJ2pha2UnXTtcbiAgICAgKiAgICAgIFIuaW52ZXJ0T2JqKHJhY2VSZXN1bHRzKTtcbiAgICAgKiAgICAgIC8vPT4geyAnYWxpY2UnOiAnMCcsICdqYWtlJzonMScgfVxuICAgICAqL1xuICAgIHZhciBpbnZlcnRPYmogPSBfY3VycnkxKGZ1bmN0aW9uIGludmVydE9iaihvYmopIHtcbiAgICAgICAgdmFyIHByb3BzID0ga2V5cyhvYmopO1xuICAgICAgICB2YXIgbGVuID0gcHJvcHMubGVuZ3RoO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gcHJvcHNbaWR4XTtcbiAgICAgICAgICAgIG91dFtvYmpba2V5XV0gPSBrZXk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGl0cyB0eXBlJ3MgZW1wdHkgdmFsdWU7IGBmYWxzZWBcbiAgICAgKiBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgYSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSB4XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIuZW1wdHlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmlzRW1wdHkoWzEsIDIsIDNdKTsgICAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmlzRW1wdHkoW10pOyAgICAgICAgICAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaXNFbXB0eSgnJyk7ICAgICAgICAgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pc0VtcHR5KG51bGwpOyAgICAgICAgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pc0VtcHR5KHt9KTsgICAgICAgICAgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzRW1wdHkoe2xlbmd0aDogMH0pOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGlzRW1wdHkgPSBfY3VycnkxKGZ1bmN0aW9uIGlzRW1wdHkoeCkge1xuICAgICAgICByZXR1cm4geCAhPSBudWxsICYmIGVxdWFscyh4LCBlbXB0eSh4KSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGdpdmVuIGxpc3Qgb3Igc3RyaW5nLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjRcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IGEgfCBVbmRlZmluZWRcbiAgICAgKiBAc2lnIFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0geyp9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5pbml0LCBSLmhlYWQsIFIudGFpbFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubGFzdChbJ2ZpJywgJ2ZvJywgJ2Z1bSddKTsgLy89PiAnZnVtJ1xuICAgICAqICAgICAgUi5sYXN0KFtdKTsgLy89PiB1bmRlZmluZWRcbiAgICAgKlxuICAgICAqICAgICAgUi5sYXN0KCdhYmMnKTsgLy89PiAnYydcbiAgICAgKiAgICAgIFIubGFzdCgnJyk7IC8vPT4gJydcbiAgICAgKi9cbiAgICB2YXIgbGFzdCA9IG50aCgtMSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGFzdCBvY2N1cnJlbmNlIG9mIGFuIGl0ZW0gaW4gYW4gYXJyYXksIG9yIC0xIGlmXG4gICAgICogdGhlIGl0ZW0gaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhcnJheS4gYFIuZXF1YWxzYCBpcyB1c2VkIHRvIGRldGVybWluZVxuICAgICAqIGVxdWFsaXR5LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgYSAtPiBbYV0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHsqfSB0YXJnZXQgVGhlIGl0ZW0gdG8gZmluZC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB4cyBUaGUgYXJyYXkgdG8gc2VhcmNoIGluLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gdGhlIGluZGV4IG9mIHRoZSB0YXJnZXQsIG9yIC0xIGlmIHRoZSB0YXJnZXQgaXMgbm90IGZvdW5kLlxuICAgICAqIEBzZWUgUi5pbmRleE9mXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5sYXN0SW5kZXhPZigzLCBbLTEsMywzLDAsMSwyLDMsNF0pOyAvLz0+IDZcbiAgICAgKiAgICAgIFIubGFzdEluZGV4T2YoMTAsIFsxLDIsMyw0XSk7IC8vPT4gLTFcbiAgICAgKi9cbiAgICB2YXIgbGFzdEluZGV4T2YgPSBfY3VycnkyKGZ1bmN0aW9uIGxhc3RJbmRleE9mKHRhcmdldCwgeHMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4cy5sYXN0SW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJyAmJiAhX2lzQXJyYXkoeHMpKSB7XG4gICAgICAgICAgICByZXR1cm4geHMubGFzdEluZGV4T2YodGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpZHggPSB4cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVxdWFscyh4c1tpZHhdLCB0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGZ1bmN0aW9uIGFuZFxuICAgICAqIGEgW2Z1bmN0b3JdKGh0dHBzOi8vZ2l0aHViLmNvbS9mYW50YXN5bGFuZC9mYW50YXN5LWxhbmQjZnVuY3RvciksXG4gICAgICogYXBwbGllcyB0aGUgZnVuY3Rpb24gdG8gZWFjaCBvZiB0aGUgZnVuY3RvcidzIHZhbHVlcywgYW5kIHJldHVybnNcbiAgICAgKiBhIGZ1bmN0b3Igb2YgdGhlIHNhbWUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBSYW1kYSBwcm92aWRlcyBzdWl0YWJsZSBgbWFwYCBpbXBsZW1lbnRhdGlvbnMgZm9yIGBBcnJheWAgYW5kIGBPYmplY3RgLFxuICAgICAqIHNvIHRoaXMgZnVuY3Rpb24gbWF5IGJlIGFwcGxpZWQgdG8gYFsxLCAyLCAzXWAgb3IgYHt4OiAxLCB5OiAyLCB6OiAzfWAuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgbWFwYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEFsc28gdHJlYXRzIGZ1bmN0aW9ucyBhcyBmdW5jdG9ycyBhbmQgd2lsbCBjb21wb3NlIHRoZW0gdG9nZXRoZXIuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBGdW5jdG9yIGYgPT4gKGEgLT4gYikgLT4gZiBhIC0+IGYgYlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gZXZlcnkgZWxlbWVudCBvZiB0aGUgaW5wdXQgYGxpc3RgLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gYmUgaXRlcmF0ZWQgb3Zlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIG5ldyBsaXN0LlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2UsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZG91YmxlID0geCA9PiB4ICogMjtcbiAgICAgKlxuICAgICAqICAgICAgUi5tYXAoZG91YmxlLCBbMSwgMiwgM10pOyAvLz0+IFsyLCA0LCA2XVxuICAgICAqXG4gICAgICogICAgICBSLm1hcChkb3VibGUsIHt4OiAxLCB5OiAyLCB6OiAzfSk7IC8vPT4ge3g6IDIsIHk6IDQsIHo6IDZ9XG4gICAgICovXG4gICAgdmFyIG1hcCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnbWFwJywgX3htYXAsIGZ1bmN0aW9uIG1hcChmbiwgZnVuY3Rvcikge1xuICAgICAgICBzd2l0Y2ggKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmdW5jdG9yKSkge1xuICAgICAgICBjYXNlICdbb2JqZWN0IEZ1bmN0aW9uXSc6XG4gICAgICAgICAgICByZXR1cm4gY3VycnlOKGZ1bmN0b3IubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgZnVuY3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlICdbb2JqZWN0IE9iamVjdF0nOlxuICAgICAgICAgICAgcmV0dXJuIF9yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XG4gICAgICAgICAgICAgICAgYWNjW2tleV0gPSBmbihmdW5jdG9yW2tleV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9LCB7fSwga2V5cyhmdW5jdG9yKSk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gX21hcChmbiwgZnVuY3Rvcik7XG4gICAgICAgIH1cbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBBbiBPYmplY3Qtc3BlY2lmaWMgdmVyc2lvbiBvZiBgbWFwYC4gVGhlIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gdGhyZWVcbiAgICAgKiBhcmd1bWVudHM6ICoodmFsdWUsIGtleSwgb2JqKSouIElmIG9ubHkgdGhlIHZhbHVlIGlzIHNpZ25pZmljYW50LCB1c2VcbiAgICAgKiBgbWFwYCBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyAoKCosIFN0cmluZywgT2JqZWN0KSAtPiAqKSAtPiBPYmplY3QgLT4gT2JqZWN0XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqIEBzZWUgUi5tYXBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdmFsdWVzID0geyB4OiAxLCB5OiAyLCB6OiAzIH07XG4gICAgICogICAgICB2YXIgcHJlcGVuZEtleUFuZERvdWJsZSA9IChudW0sIGtleSwgb2JqKSA9PiBrZXkgKyAobnVtICogMik7XG4gICAgICpcbiAgICAgKiAgICAgIFIubWFwT2JqSW5kZXhlZChwcmVwZW5kS2V5QW5kRG91YmxlLCB2YWx1ZXMpOyAvLz0+IHsgeDogJ3gyJywgeTogJ3k0JywgejogJ3o2JyB9XG4gICAgICovXG4gICAgdmFyIG1hcE9iakluZGV4ZWQgPSBfY3VycnkyKGZ1bmN0aW9uIG1hcE9iakluZGV4ZWQoZm4sIG9iaikge1xuICAgICAgICByZXR1cm4gX3JlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICAgICAgICAgIGFjY1trZXldID0gZm4ob2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9LCBrZXlzKG9iaikpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgd2l0aCB0aGUgb3duIHByb3BlcnRpZXMgb2YgdGhlIHR3byBwcm92aWRlZCBvYmplY3RzLiBJZlxuICAgICAqIGEga2V5IGV4aXN0cyBpbiBib3RoIG9iamVjdHMsIHRoZSBwcm92aWRlZCBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSB2YWx1ZXNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIGtleSBpbiBlYWNoIG9iamVjdCwgd2l0aCB0aGUgcmVzdWx0IGJlaW5nIHVzZWQgYXMgdGhlXG4gICAgICogdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkgaW4gdGhlIHJldHVybmVkIG9iamVjdC4gVGhlIGtleSB3aWxsIGJlXG4gICAgICogZXhjbHVkZWQgZnJvbSB0aGUgcmV0dXJuZWQgb2JqZWN0IGlmIHRoZSByZXN1bHRpbmcgdmFsdWUgaXMgYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyAoYSAtPiBhIC0+IGEpIC0+IHthfSAtPiB7YX0gLT4ge2F9XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqIEBzZWUgUi5tZXJnZSwgUi5tZXJnZVdpdGhLZXlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1lcmdlV2l0aChSLmNvbmNhdCxcbiAgICAgKiAgICAgICAgICAgICAgICAgIHsgYTogdHJ1ZSwgdmFsdWVzOiBbMTAsIDIwXSB9LFxuICAgICAqICAgICAgICAgICAgICAgICAgeyBiOiB0cnVlLCB2YWx1ZXM6IFsxNSwgMzVdIH0pO1xuICAgICAqICAgICAgLy89PiB7IGE6IHRydWUsIGI6IHRydWUsIHZhbHVlczogWzEwLCAyMCwgMTUsIDM1XSB9XG4gICAgICovXG4gICAgdmFyIG1lcmdlV2l0aCA9IF9jdXJyeTMoZnVuY3Rpb24gbWVyZ2VXaXRoKGZuLCBsLCByKSB7XG4gICAgICAgIHJldHVybiBtZXJnZVdpdGhLZXkoZnVuY3Rpb24gKF8sIF9sLCBfcikge1xuICAgICAgICAgICAgcmV0dXJuIGZuKF9sLCBfcik7XG4gICAgICAgIH0sIGwsIHIpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBmdW5jdGlvbiBgZmAgYW5kIGEgbGlzdCBvZiBhcmd1bWVudHMsIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gYGdgLlxuICAgICAqIFdoZW4gYXBwbGllZCwgYGdgIHJldHVybnMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBgZmAgdG8gdGhlIGFyZ3VtZW50c1xuICAgICAqIHByb3ZpZGVkIGluaXRpYWxseSBmb2xsb3dlZCBieSB0aGUgYXJndW1lbnRzIHByb3ZpZGVkIHRvIGBnYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKChhLCBiLCBjLCAuLi4sIG4pIC0+IHgpIC0+IFthLCBiLCBjLCAuLi5dIC0+ICgoZCwgZSwgZiwgLi4uLCBuKSAtPiB4KVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLnBhcnRpYWxSaWdodFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtdWx0aXBseSA9IChhLCBiKSA9PiBhICogYjtcbiAgICAgKiAgICAgIHZhciBkb3VibGUgPSBSLnBhcnRpYWwobXVsdGlwbHksIFsyXSk7XG4gICAgICogICAgICBkb3VibGUoMik7IC8vPT4gNFxuICAgICAqXG4gICAgICogICAgICB2YXIgZ3JlZXQgPSAoc2FsdXRhdGlvbiwgdGl0bGUsIGZpcnN0TmFtZSwgbGFzdE5hbWUpID0+XG4gICAgICogICAgICAgIHNhbHV0YXRpb24gKyAnLCAnICsgdGl0bGUgKyAnICcgKyBmaXJzdE5hbWUgKyAnICcgKyBsYXN0TmFtZSArICchJztcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHNheUhlbGxvID0gUi5wYXJ0aWFsKGdyZWV0LCBbJ0hlbGxvJ10pO1xuICAgICAqICAgICAgdmFyIHNheUhlbGxvVG9NcyA9IFIucGFydGlhbChzYXlIZWxsbywgWydNcy4nXSk7XG4gICAgICogICAgICBzYXlIZWxsb1RvTXMoJ0phbmUnLCAnSm9uZXMnKTsgLy89PiAnSGVsbG8sIE1zLiBKYW5lIEpvbmVzISdcbiAgICAgKi9cbiAgICB2YXIgcGFydGlhbCA9IF9jcmVhdGVQYXJ0aWFsQXBwbGljYXRvcihfY29uY2F0KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgZnVuY3Rpb24gYGZgIGFuZCBhIGxpc3Qgb2YgYXJndW1lbnRzLCBhbmQgcmV0dXJucyBhIGZ1bmN0aW9uIGBnYC5cbiAgICAgKiBXaGVuIGFwcGxpZWQsIGBnYCByZXR1cm5zIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYGZgIHRvIHRoZSBhcmd1bWVudHNcbiAgICAgKiBwcm92aWRlZCB0byBgZ2AgZm9sbG93ZWQgYnkgdGhlIGFyZ3VtZW50cyBwcm92aWRlZCBpbml0aWFsbHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgoYSwgYiwgYywgLi4uLCBuKSAtPiB4KSAtPiBbZCwgZSwgZiwgLi4uLCBuXSAtPiAoKGEsIGIsIGMsIC4uLikgLT4geClcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJnc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBzZWUgUi5wYXJ0aWFsXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGdyZWV0ID0gKHNhbHV0YXRpb24sIHRpdGxlLCBmaXJzdE5hbWUsIGxhc3ROYW1lKSA9PlxuICAgICAqICAgICAgICBzYWx1dGF0aW9uICsgJywgJyArIHRpdGxlICsgJyAnICsgZmlyc3ROYW1lICsgJyAnICsgbGFzdE5hbWUgKyAnISc7XG4gICAgICpcbiAgICAgKiAgICAgIHZhciBncmVldE1zSmFuZUpvbmVzID0gUi5wYXJ0aWFsUmlnaHQoZ3JlZXQsIFsnTXMuJywgJ0phbmUnLCAnSm9uZXMnXSk7XG4gICAgICpcbiAgICAgKiAgICAgIGdyZWV0TXNKYW5lSm9uZXMoJ0hlbGxvJyk7IC8vPT4gJ0hlbGxvLCBNcy4gSmFuZSBKb25lcyEnXG4gICAgICovXG4gICAgdmFyIHBhcnRpYWxSaWdodCA9IF9jcmVhdGVQYXJ0aWFsQXBwbGljYXRvcihmbGlwKF9jb25jYXQpKTtcblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hldGhlciBhIG5lc3RlZCBwYXRoIG9uIGFuIG9iamVjdCBoYXMgYSBzcGVjaWZpYyB2YWx1ZSwgaW5cbiAgICAgKiBgUi5lcXVhbHNgIHRlcm1zLiBNb3N0IGxpa2VseSB1c2VkIHRvIGZpbHRlciBhIGxpc3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjcuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgW1N0cmluZ10gLT4gKiAtPiB7U3RyaW5nOiAqfSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtBcnJheX0gcGF0aCBUaGUgcGF0aCBvZiB0aGUgbmVzdGVkIHByb3BlcnR5IHRvIHVzZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byBjb21wYXJlIHRoZSBuZXN0ZWQgcHJvcGVydHkgd2l0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBjaGVjayB0aGUgbmVzdGVkIHByb3BlcnR5IGluXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSB2YWx1ZSBlcXVhbHMgdGhlIG5lc3RlZCBvYmplY3QgcHJvcGVydHksXG4gICAgICogICAgICAgICBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdXNlcjEgPSB7IGFkZHJlc3M6IHsgemlwQ29kZTogOTAyMTAgfSB9O1xuICAgICAqICAgICAgdmFyIHVzZXIyID0geyBhZGRyZXNzOiB7IHppcENvZGU6IDU1NTU1IH0gfTtcbiAgICAgKiAgICAgIHZhciB1c2VyMyA9IHsgbmFtZTogJ0JvYicgfTtcbiAgICAgKiAgICAgIHZhciB1c2VycyA9IFsgdXNlcjEsIHVzZXIyLCB1c2VyMyBdO1xuICAgICAqICAgICAgdmFyIGlzRmFtb3VzID0gUi5wYXRoRXEoWydhZGRyZXNzJywgJ3ppcENvZGUnXSwgOTAyMTApO1xuICAgICAqICAgICAgUi5maWx0ZXIoaXNGYW1vdXMsIHVzZXJzKTsgLy89PiBbIHVzZXIxIF1cbiAgICAgKi9cbiAgICB2YXIgcGF0aEVxID0gX2N1cnJ5MyhmdW5jdGlvbiBwYXRoRXEoX3BhdGgsIHZhbCwgb2JqKSB7XG4gICAgICAgIHJldHVybiBlcXVhbHMocGF0aChfcGF0aCwgb2JqKSwgdmFsKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBieSBwbHVja2luZyB0aGUgc2FtZSBuYW1lZCBwcm9wZXJ0eSBvZmYgYWxsIG9iamVjdHMgaW5cbiAgICAgKiB0aGUgbGlzdCBzdXBwbGllZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGsgLT4gW3trOiB2fV0gLT4gW3ZdXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBrZXkgVGhlIGtleSBuYW1lIHRvIHBsdWNrIG9mZiBvZiBlYWNoIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGxpc3Qgb2YgdmFsdWVzIGZvciB0aGUgZ2l2ZW4ga2V5LlxuICAgICAqIEBzZWUgUi5wcm9wc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucGx1Y2soJ2EnKShbe2E6IDF9LCB7YTogMn1dKTsgLy89PiBbMSwgMl1cbiAgICAgKiAgICAgIFIucGx1Y2soMCkoW1sxLCAyXSwgWzMsIDRdXSk7ICAgLy89PiBbMSwgM11cbiAgICAgKi9cbiAgICB2YXIgcGx1Y2sgPSBfY3VycnkyKGZ1bmN0aW9uIHBsdWNrKHAsIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIG1hcChwcm9wKHApLCBsaXN0KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJlYXNvbmFibGUgYW5hbG9nIHRvIFNRTCBgc2VsZWN0YCBzdGF0ZW1lbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIFtrXSAtPiBbe2s6IHZ9XSAtPiBbe2s6IHZ9XVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBwcm9qZWN0XG4gICAgICogQHBhcmFtIHtBcnJheX0gb2JqcyBUaGUgb2JqZWN0cyB0byBxdWVyeVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiBvYmplY3RzIHdpdGgganVzdCB0aGUgYHByb3BzYCBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBhYmJ5ID0ge25hbWU6ICdBYmJ5JywgYWdlOiA3LCBoYWlyOiAnYmxvbmQnLCBncmFkZTogMn07XG4gICAgICogICAgICB2YXIgZnJlZCA9IHtuYW1lOiAnRnJlZCcsIGFnZTogMTIsIGhhaXI6ICdicm93bicsIGdyYWRlOiA3fTtcbiAgICAgKiAgICAgIHZhciBraWRzID0gW2FiYnksIGZyZWRdO1xuICAgICAqICAgICAgUi5wcm9qZWN0KFsnbmFtZScsICdncmFkZSddLCBraWRzKTsgLy89PiBbe25hbWU6ICdBYmJ5JywgZ3JhZGU6IDJ9LCB7bmFtZTogJ0ZyZWQnLCBncmFkZTogN31dXG4gICAgICovXG4gICAgLy8gcGFzc2luZyBgaWRlbnRpdHlgIGdpdmVzIGNvcnJlY3QgYXJpdHlcbiAgICB2YXIgcHJvamVjdCA9IHVzZVdpdGgoX21hcCwgW1xuICAgICAgICBwaWNrQWxsLFxuICAgICAgICBpZGVudGl0eVxuICAgIF0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHNwZWNpZmllZCBvYmplY3QgcHJvcGVydHkgaXMgZXF1YWwsIGluIGBSLmVxdWFsc2BcbiAgICAgKiB0ZXJtcywgdG8gdGhlIGdpdmVuIHZhbHVlOyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBTdHJpbmcgLT4gYSAtPiBPYmplY3QgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHsqfSB2YWxcbiAgICAgKiBAcGFyYW0geyp9IG9ialxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQHNlZSBSLmVxdWFscywgUi5wcm9wU2F0aXNmaWVzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGFiYnkgPSB7bmFtZTogJ0FiYnknLCBhZ2U6IDcsIGhhaXI6ICdibG9uZCd9O1xuICAgICAqICAgICAgdmFyIGZyZWQgPSB7bmFtZTogJ0ZyZWQnLCBhZ2U6IDEyLCBoYWlyOiAnYnJvd24nfTtcbiAgICAgKiAgICAgIHZhciBydXN0eSA9IHtuYW1lOiAnUnVzdHknLCBhZ2U6IDEwLCBoYWlyOiAnYnJvd24nfTtcbiAgICAgKiAgICAgIHZhciBhbG9pcyA9IHtuYW1lOiAnQWxvaXMnLCBhZ2U6IDE1LCBkaXNwb3NpdGlvbjogJ3N1cmx5J307XG4gICAgICogICAgICB2YXIga2lkcyA9IFthYmJ5LCBmcmVkLCBydXN0eSwgYWxvaXNdO1xuICAgICAqICAgICAgdmFyIGhhc0Jyb3duSGFpciA9IFIucHJvcEVxKCdoYWlyJywgJ2Jyb3duJyk7XG4gICAgICogICAgICBSLmZpbHRlcihoYXNCcm93bkhhaXIsIGtpZHMpOyAvLz0+IFtmcmVkLCBydXN0eV1cbiAgICAgKi9cbiAgICB2YXIgcHJvcEVxID0gX2N1cnJ5MyhmdW5jdGlvbiBwcm9wRXEobmFtZSwgdmFsLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIHByb3BTYXRpc2ZpZXMoZXF1YWxzKHZhbCksIG5hbWUsIG9iaik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3BlY2lmaWVkIG9iamVjdCBwcm9wZXJ0eSBpcyBvZiB0aGUgZ2l2ZW4gdHlwZTtcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBUeXBlXG4gICAgICogQHNpZyBUeXBlIC0+IFN0cmluZyAtPiBPYmplY3QgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHR5cGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIuaXMsIFIucHJvcFNhdGlzZmllc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucHJvcElzKE51bWJlciwgJ3gnLCB7eDogMSwgeTogMn0pOyAgLy89PiB0cnVlXG4gICAgICogICAgICBSLnByb3BJcyhOdW1iZXIsICd4Jywge3g6ICdmb28nfSk7ICAgIC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIucHJvcElzKE51bWJlciwgJ3gnLCB7fSk7ICAgICAgICAgICAgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBwcm9wSXMgPSBfY3VycnkzKGZ1bmN0aW9uIHByb3BJcyh0eXBlLCBuYW1lLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIHByb3BTYXRpc2ZpZXMoaXModHlwZSksIG5hbWUsIG9iaik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2luZ2xlIGl0ZW0gYnkgaXRlcmF0aW5nIHRocm91Z2ggdGhlIGxpc3QsIHN1Y2Nlc3NpdmVseSBjYWxsaW5nXG4gICAgICogdGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIGFuZCBwYXNzaW5nIGl0IGFuIGFjY3VtdWxhdG9yIHZhbHVlIGFuZCB0aGUgY3VycmVudFxuICAgICAqIHZhbHVlIGZyb20gdGhlIGFycmF5LCBhbmQgdGhlbiBwYXNzaW5nIHRoZSByZXN1bHQgdG8gdGhlIG5leHQgY2FsbC5cbiAgICAgKlxuICAgICAqIFRoZSBpdGVyYXRvciBmdW5jdGlvbiByZWNlaXZlcyB0d28gdmFsdWVzOiAqKGFjYywgdmFsdWUpKi4gSXQgbWF5IHVzZVxuICAgICAqIGBSLnJlZHVjZWRgIHRvIHNob3J0Y3V0IHRoZSBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBOb3RlOiBgUi5yZWR1Y2VgIGRvZXMgbm90IHNraXAgZGVsZXRlZCBvciB1bmFzc2lnbmVkIGluZGljZXMgKHNwYXJzZVxuICAgICAqIGFycmF5cyksIHVubGlrZSB0aGUgbmF0aXZlIGBBcnJheS5wcm90b3R5cGUucmVkdWNlYCBtZXRob2QuIEZvciBtb3JlIGRldGFpbHNcbiAgICAgKiBvbiB0aGlzIGJlaGF2aW9yLCBzZWU6XG4gICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvcmVkdWNlI0Rlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgcmVkdWNlYCBtZXRob2Qgb2YgdGhlIHRoaXJkIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKChhLCBiKSAtPiBhKSAtPiBhIC0+IFtiXSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uLiBSZWNlaXZlcyB0d28gdmFsdWVzLCB0aGUgYWNjdW11bGF0b3IgYW5kIHRoZVxuICAgICAqICAgICAgICBjdXJyZW50IGVsZW1lbnQgZnJvbSB0aGUgYXJyYXkuXG4gICAgICogQHBhcmFtIHsqfSBhY2MgVGhlIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBmaW5hbCwgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQHNlZSBSLnJlZHVjZWQsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbnVtYmVycyA9IFsxLCAyLCAzXTtcbiAgICAgKiAgICAgIHZhciBhZGQgPSAoYSwgYikgPT4gYSArIGI7XG4gICAgICpcbiAgICAgKiAgICAgIFIucmVkdWNlKGFkZCwgMTAsIG51bWJlcnMpOyAvLz0+IDE2XG4gICAgICovXG4gICAgdmFyIHJlZHVjZSA9IF9jdXJyeTMoX3JlZHVjZSk7XG5cbiAgICAvKipcbiAgICAgKiBHcm91cHMgdGhlIGVsZW1lbnRzIG9mIHRoZSBsaXN0IGFjY29yZGluZyB0byB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgKiB0aGUgU3RyaW5nLXJldHVybmluZyBmdW5jdGlvbiBga2V5Rm5gIG9uIGVhY2ggZWxlbWVudCBhbmQgcmVkdWNlcyB0aGUgZWxlbWVudHNcbiAgICAgKiBvZiBlYWNoIGdyb3VwIHRvIGEgc2luZ2xlIHZhbHVlIHZpYSB0aGUgcmVkdWNlciBmdW5jdGlvbiBgdmFsdWVGbmAuXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2ljYWxseSBhIG1vcmUgZ2VuZXJhbCBgZ3JvdXBCeWAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKChhLCBiKSAtPiBhKSAtPiBhIC0+IChiIC0+IFN0cmluZykgLT4gW2JdIC0+IHtTdHJpbmc6IGF9XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gdmFsdWVGbiBUaGUgZnVuY3Rpb24gdGhhdCByZWR1Y2VzIHRoZSBlbGVtZW50cyBvZiBlYWNoIGdyb3VwIHRvIGEgc2luZ2xlXG4gICAgICogICAgICAgIHZhbHVlLiBSZWNlaXZlcyB0d28gdmFsdWVzLCBhY2N1bXVsYXRvciBmb3IgYSBwYXJ0aWN1bGFyIGdyb3VwIGFuZCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7Kn0gYWNjIFRoZSAoaW5pdGlhbCkgYWNjdW11bGF0b3IgdmFsdWUgZm9yIGVhY2ggZ3JvdXAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5Rm4gVGhlIGZ1bmN0aW9uIHRoYXQgbWFwcyB0aGUgbGlzdCdzIGVsZW1lbnQgaW50byBhIGtleS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBncm91cC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBvdXRwdXQgb2YgYGtleUZuYCBmb3Iga2V5cywgbWFwcGVkIHRvIHRoZSBvdXRwdXQgb2ZcbiAgICAgKiAgICAgICAgIGB2YWx1ZUZuYCBmb3IgZWxlbWVudHMgd2hpY2ggcHJvZHVjZWQgdGhhdCBrZXkgd2hlbiBwYXNzZWQgdG8gYGtleUZuYC5cbiAgICAgKiBAc2VlIFIuZ3JvdXBCeSwgUi5yZWR1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgcmVkdWNlVG9OYW1lc0J5ID0gUi5yZWR1Y2VCeSgoYWNjLCBzdHVkZW50KSA9PiBhY2MuY29uY2F0KHN0dWRlbnQubmFtZSksIFtdKTtcbiAgICAgKiAgICAgIHZhciBuYW1lc0J5R3JhZGUgPSByZWR1Y2VUb05hbWVzQnkoZnVuY3Rpb24oc3R1ZGVudCkge1xuICAgICAqICAgICAgICB2YXIgc2NvcmUgPSBzdHVkZW50LnNjb3JlO1xuICAgICAqICAgICAgICByZXR1cm4gc2NvcmUgPCA2NSA/ICdGJyA6XG4gICAgICogICAgICAgICAgICAgICBzY29yZSA8IDcwID8gJ0QnIDpcbiAgICAgKiAgICAgICAgICAgICAgIHNjb3JlIDwgODAgPyAnQycgOlxuICAgICAqICAgICAgICAgICAgICAgc2NvcmUgPCA5MCA/ICdCJyA6ICdBJztcbiAgICAgKiAgICAgIH0pO1xuICAgICAqICAgICAgdmFyIHN0dWRlbnRzID0gW3tuYW1lOiAnTHVjeScsIHNjb3JlOiA5Mn0sXG4gICAgICogICAgICAgICAgICAgICAgICAgICAge25hbWU6ICdEcmV3Jywgc2NvcmU6IDg1fSxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAvLyAuLi5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ0JhcnQnLCBzY29yZTogNjJ9XTtcbiAgICAgKiAgICAgIG5hbWVzQnlHcmFkZShzdHVkZW50cyk7XG4gICAgICogICAgICAvLyB7XG4gICAgICogICAgICAvLyAgICdBJzogWydMdWN5J10sXG4gICAgICogICAgICAvLyAgICdCJzogWydEcmV3J11cbiAgICAgKiAgICAgIC8vICAgLy8gLi4uLFxuICAgICAqICAgICAgLy8gICAnRic6IFsnQmFydCddXG4gICAgICogICAgICAvLyB9XG4gICAgICovXG4gICAgdmFyIHJlZHVjZUJ5ID0gX2N1cnJ5Tig0LCBbXSwgZnVuY3Rpb24gcmVkdWNlQnkodmFsdWVGbiwgdmFsdWVBY2MsIGtleUZuLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfcmVkdWNlKGZ1bmN0aW9uIChhY2MsIGVsdCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleUZuKGVsdCk7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IHZhbHVlRm4oX2hhcyhrZXksIGFjYykgPyBhY2Nba2V5XSA6IHZhbHVlQWNjLCBlbHQpO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30sIGxpc3QpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNvbXBsZW1lbnQgb2YgYGZpbHRlcmAuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBGaWx0ZXJhYmxlIGYgPT4gKGEgLT4gQm9vbGVhbikgLT4gZiBhIC0+IGYgYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJhYmxlXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQHNlZSBSLmZpbHRlciwgUi50cmFuc2R1Y2UsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNPZGQgPSAobikgPT4gbiAlIDIgPT09IDE7XG4gICAgICpcbiAgICAgKiAgICAgIFIucmVqZWN0KGlzT2RkLCBbMSwgMiwgMywgNF0pOyAvLz0+IFsyLCA0XVxuICAgICAqXG4gICAgICogICAgICBSLnJlamVjdChpc09kZCwge2E6IDEsIGI6IDIsIGM6IDMsIGQ6IDR9KTsgLy89PiB7YjogMiwgZDogNH1cbiAgICAgKi9cbiAgICB2YXIgcmVqZWN0ID0gX2N1cnJ5MihmdW5jdGlvbiByZWplY3QocHJlZCwgZmlsdGVyYWJsZSkge1xuICAgICAgICByZXR1cm4gZmlsdGVyKF9jb21wbGVtZW50KHByZWQpLCBmaWx0ZXJhYmxlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmaXhlZCBsaXN0IG9mIHNpemUgYG5gIGNvbnRhaW5pbmcgYSBzcGVjaWZpZWQgaWRlbnRpY2FsIHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjFcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgYSAtPiBuIC0+IFthXVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHJlcGVhdC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbiBUaGUgZGVzaXJlZCBzaXplIG9mIHRoZSBvdXRwdXQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgYXJyYXkgY29udGFpbmluZyBgbmAgYHZhbHVlYHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5yZXBlYXQoJ2hpJywgNSk7IC8vPT4gWydoaScsICdoaScsICdoaScsICdoaScsICdoaSddXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgKiAgICAgIHZhciByZXBlYXRlZE9ianMgPSBSLnJlcGVhdChvYmosIDUpOyAvLz0+IFt7fSwge30sIHt9LCB7fSwge31dXG4gICAgICogICAgICByZXBlYXRlZE9ianNbMF0gPT09IHJlcGVhdGVkT2Jqc1sxXTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIHJlcGVhdCA9IF9jdXJyeTIoZnVuY3Rpb24gcmVwZWF0KHZhbHVlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aW1lcyhhbHdheXModmFsdWUpLCBuKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgdG9nZXRoZXIgYWxsIHRoZSBlbGVtZW50cyBvZiBhIGxpc3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBbTnVtYmVyXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IEFuIGFycmF5IG9mIG51bWJlcnNcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBzdW0gb2YgYWxsIHRoZSBudW1iZXJzIGluIHRoZSBsaXN0LlxuICAgICAqIEBzZWUgUi5yZWR1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnN1bShbMiw0LDYsOCwxMDAsMV0pOyAvLz0+IDEyMVxuICAgICAqL1xuICAgIHZhciBzdW0gPSByZWR1Y2UoYWRkLCAwKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBsYXN0IGBuYCBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gbGlzdC5cbiAgICAgKiBJZiBgbiA+IGxpc3QubGVuZ3RoYCwgcmV0dXJucyBhIGxpc3Qgb2YgYGxpc3QubGVuZ3RoYCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IFthXVxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbiBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJldHVybi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB4cyBUaGUgY29sbGVjdGlvbiB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiBAc2VlIFIuZHJvcExhc3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnRha2VMYXN0KDEsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydiYXonXVxuICAgICAqICAgICAgUi50YWtlTGFzdCgyLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLnRha2VMYXN0KDMsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nLCAnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLnRha2VMYXN0KDQsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nLCAnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLnRha2VMYXN0KDMsICdyYW1kYScpOyAgICAgICAgICAgICAgIC8vPT4gJ21kYSdcbiAgICAgKi9cbiAgICB2YXIgdGFrZUxhc3QgPSBfY3VycnkyKGZ1bmN0aW9uIHRha2VMYXN0KG4sIHhzKSB7XG4gICAgICAgIHJldHVybiBkcm9wKG4gPj0gMCA/IHhzLmxlbmd0aCAtIG4gOiAwLCB4cyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIHRyYW5zZHVjZXIgdXNpbmcgc3VwcGxpZWQgaXRlcmF0b3IgZnVuY3Rpb24uIFJldHVybnMgYSBzaW5nbGVcbiAgICAgKiBpdGVtIGJ5IGl0ZXJhdGluZyB0aHJvdWdoIHRoZSBsaXN0LCBzdWNjZXNzaXZlbHkgY2FsbGluZyB0aGUgdHJhbnNmb3JtZWRcbiAgICAgKiBpdGVyYXRvciBmdW5jdGlvbiBhbmQgcGFzc2luZyBpdCBhbiBhY2N1bXVsYXRvciB2YWx1ZSBhbmQgdGhlIGN1cnJlbnQgdmFsdWVcbiAgICAgKiBmcm9tIHRoZSBhcnJheSwgYW5kIHRoZW4gcGFzc2luZyB0aGUgcmVzdWx0IHRvIHRoZSBuZXh0IGNhbGwuXG4gICAgICpcbiAgICAgKiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24gcmVjZWl2ZXMgdHdvIHZhbHVlczogKihhY2MsIHZhbHVlKSouIEl0IHdpbGwgYmVcbiAgICAgKiB3cmFwcGVkIGFzIGEgdHJhbnNmb3JtZXIgdG8gaW5pdGlhbGl6ZSB0aGUgdHJhbnNkdWNlci4gQSB0cmFuc2Zvcm1lciBjYW4gYmVcbiAgICAgKiBwYXNzZWQgZGlyZWN0bHkgaW4gcGxhY2Ugb2YgYW4gaXRlcmF0b3IgZnVuY3Rpb24uIEluIGJvdGggY2FzZXMsIGl0ZXJhdGlvblxuICAgICAqIG1heSBiZSBzdG9wcGVkIGVhcmx5IHdpdGggdGhlIGBSLnJlZHVjZWRgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQSB0cmFuc2R1Y2VyIGlzIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIGEgdHJhbnNmb3JtZXIgYW5kIHJldHVybnMgYVxuICAgICAqIHRyYW5zZm9ybWVyIGFuZCBjYW4gYmUgY29tcG9zZWQgZGlyZWN0bHkuXG4gICAgICpcbiAgICAgKiBBIHRyYW5zZm9ybWVyIGlzIGFuIGFuIG9iamVjdCB0aGF0IHByb3ZpZGVzIGEgMi1hcml0eSByZWR1Y2luZyBpdGVyYXRvclxuICAgICAqIGZ1bmN0aW9uLCBzdGVwLCAwLWFyaXR5IGluaXRpYWwgdmFsdWUgZnVuY3Rpb24sIGluaXQsIGFuZCAxLWFyaXR5IHJlc3VsdFxuICAgICAqIGV4dHJhY3Rpb24gZnVuY3Rpb24sIHJlc3VsdC4gVGhlIHN0ZXAgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgaXRlcmF0b3JcbiAgICAgKiBmdW5jdGlvbiBpbiByZWR1Y2UuIFRoZSByZXN1bHQgZnVuY3Rpb24gaXMgdXNlZCB0byBjb252ZXJ0IHRoZSBmaW5hbFxuICAgICAqIGFjY3VtdWxhdG9yIGludG8gdGhlIHJldHVybiB0eXBlIGFuZCBpbiBtb3N0IGNhc2VzIGlzIFIuaWRlbnRpdHkuIFRoZSBpbml0XG4gICAgICogZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBhbiBpbml0aWFsIGFjY3VtdWxhdG9yLCBidXQgaXMgaWdub3JlZCBieVxuICAgICAqIHRyYW5zZHVjZS5cbiAgICAgKlxuICAgICAqIFRoZSBpdGVyYXRpb24gaXMgcGVyZm9ybWVkIHdpdGggUi5yZWR1Y2UgYWZ0ZXIgaW5pdGlhbGl6aW5nIHRoZSB0cmFuc2R1Y2VyLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChjIC0+IGMpIC0+IChhLGIgLT4gYSkgLT4gYSAtPiBbYl0gLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHhmIFRoZSB0cmFuc2R1Y2VyIGZ1bmN0aW9uLiBSZWNlaXZlcyBhIHRyYW5zZm9ybWVyIGFuZCByZXR1cm5zIGEgdHJhbnNmb3JtZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uLiBSZWNlaXZlcyB0d28gdmFsdWVzLCB0aGUgYWNjdW11bGF0b3IgYW5kIHRoZVxuICAgICAqICAgICAgICBjdXJyZW50IGVsZW1lbnQgZnJvbSB0aGUgYXJyYXkuIFdyYXBwZWQgYXMgdHJhbnNmb3JtZXIsIGlmIG5lY2Vzc2FyeSwgYW5kIHVzZWQgdG9cbiAgICAgKiAgICAgICAgaW5pdGlhbGl6ZSB0aGUgdHJhbnNkdWNlclxuICAgICAqIEBwYXJhbSB7Kn0gYWNjIFRoZSBpbml0aWFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBmaW5hbCwgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQHNlZSBSLnJlZHVjZSwgUi5yZWR1Y2VkLCBSLmludG9cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbnVtYmVycyA9IFsxLCAyLCAzLCA0XTtcbiAgICAgKiAgICAgIHZhciB0cmFuc2R1Y2VyID0gUi5jb21wb3NlKFIubWFwKFIuYWRkKDEpKSwgUi50YWtlKDIpKTtcbiAgICAgKlxuICAgICAqICAgICAgUi50cmFuc2R1Y2UodHJhbnNkdWNlciwgUi5mbGlwKFIuYXBwZW5kKSwgW10sIG51bWJlcnMpOyAvLz0+IFsyLCAzXVxuICAgICAqL1xuICAgIHZhciB0cmFuc2R1Y2UgPSBjdXJyeU4oNCwgZnVuY3Rpb24gdHJhbnNkdWNlKHhmLCBmbiwgYWNjLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfcmVkdWNlKHhmKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyA/IF94d3JhcChmbikgOiBmbiksIGFjYywgbGlzdCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDb21iaW5lcyB0d28gbGlzdHMgaW50byBhIHNldCAoaS5lLiBubyBkdXBsaWNhdGVzKSBjb21wb3NlZCBvZiB0aGUgZWxlbWVudHNcbiAgICAgKiBvZiBlYWNoIGxpc3QuIER1cGxpY2F0aW9uIGlzIGRldGVybWluZWQgYWNjb3JkaW5nIHRvIHRoZSB2YWx1ZSByZXR1cm5lZCBieVxuICAgICAqIGFwcGx5aW5nIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgdG8gdHdvIGxpc3QgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgKGEgLT4gYSAtPiBCb29sZWFuKSAtPiBbKl0gLT4gWypdIC0+IFsqXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgQSBwcmVkaWNhdGUgdXNlZCB0byB0ZXN0IHdoZXRoZXIgdHdvIGl0ZW1zIGFyZSBlcXVhbC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MSBUaGUgZmlyc3QgbGlzdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MiBUaGUgc2Vjb25kIGxpc3QuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBmaXJzdCBhbmQgc2Vjb25kIGxpc3RzIGNvbmNhdGVuYXRlZCwgd2l0aFxuICAgICAqICAgICAgICAgZHVwbGljYXRlcyByZW1vdmVkLlxuICAgICAqIEBzZWUgUi51bmlvblxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBsMSA9IFt7YTogMX0sIHthOiAyfV07XG4gICAgICogICAgICB2YXIgbDIgPSBbe2E6IDF9LCB7YTogNH1dO1xuICAgICAqICAgICAgUi51bmlvbldpdGgoUi5lcUJ5KFIucHJvcCgnYScpKSwgbDEsIGwyKTsgLy89PiBbe2E6IDF9LCB7YTogMn0sIHthOiA0fV1cbiAgICAgKi9cbiAgICB2YXIgdW5pb25XaXRoID0gX2N1cnJ5MyhmdW5jdGlvbiB1bmlvbldpdGgocHJlZCwgbGlzdDEsIGxpc3QyKSB7XG4gICAgICAgIHJldHVybiB1bmlxV2l0aChwcmVkLCBfY29uY2F0KGxpc3QxLCBsaXN0MikpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBzcGVjIG9iamVjdCBhbmQgYSB0ZXN0IG9iamVjdDsgcmV0dXJucyB0cnVlIGlmIHRoZSB0ZXN0IHNhdGlzZmllc1xuICAgICAqIHRoZSBzcGVjLCBmYWxzZSBvdGhlcndpc2UuIEFuIG9iamVjdCBzYXRpc2ZpZXMgdGhlIHNwZWMgaWYsIGZvciBlYWNoIG9mIHRoZVxuICAgICAqIHNwZWMncyBvd24gcHJvcGVydGllcywgYWNjZXNzaW5nIHRoYXQgcHJvcGVydHkgb2YgdGhlIG9iamVjdCBnaXZlcyB0aGUgc2FtZVxuICAgICAqIHZhbHVlIChpbiBgUi5lcXVhbHNgIHRlcm1zKSBhcyBhY2Nlc3NpbmcgdGhhdCBwcm9wZXJ0eSBvZiB0aGUgc3BlYy5cbiAgICAgKlxuICAgICAqIGB3aGVyZUVxYCBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIFtgd2hlcmVgXSgjd2hlcmUpLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge1N0cmluZzogKn0gLT4ge1N0cmluZzogKn0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzcGVjXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRlc3RPYmpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi53aGVyZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIHByZWQgOjogT2JqZWN0IC0+IEJvb2xlYW5cbiAgICAgKiAgICAgIHZhciBwcmVkID0gUi53aGVyZUVxKHthOiAxLCBiOiAyfSk7XG4gICAgICpcbiAgICAgKiAgICAgIHByZWQoe2E6IDF9KTsgICAgICAgICAgICAgIC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIHByZWQoe2E6IDEsIGI6IDJ9KTsgICAgICAgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgcHJlZCh7YTogMSwgYjogMiwgYzogM30pOyAgLy89PiB0cnVlXG4gICAgICogICAgICBwcmVkKHthOiAxLCBiOiAxfSk7ICAgICAgICAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIHdoZXJlRXEgPSBfY3VycnkyKGZ1bmN0aW9uIHdoZXJlRXEoc3BlYywgdGVzdE9iaikge1xuICAgICAgICByZXR1cm4gd2hlcmUobWFwKGVxdWFscywgc3BlYyksIHRlc3RPYmopO1xuICAgIH0pO1xuXG4gICAgdmFyIF9mbGF0Q2F0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJlc2VydmluZ1JlZHVjZWQgPSBmdW5jdGlvbiAoeGYpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9pbml0JzogX3hmQmFzZS5pbml0LFxuICAgICAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvcmVzdWx0JzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IHhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0WydAQHRyYW5zZHVjZXIvcmVkdWNlZCddID8gX2ZvcmNlUmVkdWNlZChyZXQpIDogcmV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfeGNhdCh4Zikge1xuICAgICAgICAgICAgdmFyIHJ4ZiA9IHByZXNlcnZpbmdSZWR1Y2VkKHhmKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9pbml0JzogX3hmQmFzZS5pbml0LFxuICAgICAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvcmVzdWx0JzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvc3RlcCc6IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXNBcnJheUxpa2UoaW5wdXQpID8gX3JlZHVjZShyeGYsIHJlc3VsdCwgW2lucHV0XSkgOiBfcmVkdWNlKHJ4ZiwgcmVzdWx0LCBpbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICAvLyBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiBkb2Vzbid0IGV4aXN0IGJlbG93IElFOVxuICAgIC8vIG1hbnVhbGx5IGNyYXdsIHRoZSBsaXN0IHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gKzAgYW5kIC0wXG4gICAgLy8gTmFOXG4gICAgLy8gbm9uLXplcm8gbnVtYmVycyBjYW4gdXRpbGlzZSBTZXRcbiAgICAvLyBhbGwgdGhlc2UgdHlwZXMgY2FuIHV0aWxpc2UgU2V0XG4gICAgLy8gbnVsbCBjYW4gdXRpbGlzZSBTZXRcbiAgICAvLyBhbnl0aGluZyBlbHNlIG5vdCBjb3ZlcmVkIGFib3ZlLCBkZWZlciB0byBSLmVxdWFsc1xuICAgIHZhciBfaW5kZXhPZiA9IGZ1bmN0aW9uIF9pbmRleE9mKGxpc3QsIGEsIGlkeCkge1xuICAgICAgICB2YXIgaW5mLCBpdGVtO1xuICAgICAgICAvLyBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiBkb2Vzbid0IGV4aXN0IGJlbG93IElFOVxuICAgICAgICBpZiAodHlwZW9mIGxpc3QuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgYSkge1xuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICBpZiAoYSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYW51YWxseSBjcmF3bCB0aGUgbGlzdCB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuICswIGFuZCAtMFxuICAgICAgICAgICAgICAgICAgICBpbmYgPSAxIC8gYTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbGlzdFtpZHhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gPT09IDAgJiYgMSAvIGl0ZW0gPT09IGluZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhICE9PSBhKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5hTlxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaWR4IDwgbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBsaXN0W2lkeF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdudW1iZXInICYmIGl0ZW0gIT09IGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWR4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBub24temVybyBudW1iZXJzIGNhbiB1dGlsaXNlIFNldFxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0LmluZGV4T2YoYSwgaWR4KTtcbiAgICAgICAgICAgIC8vIGFsbCB0aGVzZSB0eXBlcyBjYW4gdXRpbGlzZSBTZXRcbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3QuaW5kZXhPZihhLCBpZHgpO1xuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAoYSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBudWxsIGNhbiB1dGlsaXNlIFNldFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGlzdC5pbmRleE9mKGEsIGlkeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGFueXRoaW5nIGVsc2Ugbm90IGNvdmVyZWQgYWJvdmUsIGRlZmVyIHRvIFIuZXF1YWxzXG4gICAgICAgIHdoaWxlIChpZHggPCBsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGVxdWFscyhsaXN0W2lkeF0sIGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuXG4gICAgdmFyIF94Y2hhaW4gPSBfY3VycnkyKGZ1bmN0aW9uIF94Y2hhaW4oZiwgeGYpIHtcbiAgICAgICAgcmV0dXJuIG1hcChmLCBfZmxhdENhdCh4ZikpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBsaXN0IG9mIHByZWRpY2F0ZXMgYW5kIHJldHVybnMgYSBwcmVkaWNhdGUgdGhhdCByZXR1cm5zIHRydWUgZm9yIGFcbiAgICAgKiBnaXZlbiBsaXN0IG9mIGFyZ3VtZW50cyBpZiBldmVyeSBvbmUgb2YgdGhlIHByb3ZpZGVkIHByZWRpY2F0ZXMgaXMgc2F0aXNmaWVkXG4gICAgICogYnkgdGhvc2UgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogVGhlIGZ1bmN0aW9uIHJldHVybmVkIGlzIGEgY3VycmllZCBmdW5jdGlvbiB3aG9zZSBhcml0eSBtYXRjaGVzIHRoYXQgb2YgdGhlXG4gICAgICogaGlnaGVzdC1hcml0eSBwcmVkaWNhdGUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgWygqLi4uIC0+IEJvb2xlYW4pXSAtPiAoKi4uLiAtPiBCb29sZWFuKVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByZWRzXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLmFueVBhc3NcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNRdWVlbiA9IFIucHJvcEVxKCdyYW5rJywgJ1EnKTtcbiAgICAgKiAgICAgIHZhciBpc1NwYWRlID0gUi5wcm9wRXEoJ3N1aXQnLCAn4pmg77iOJyk7XG4gICAgICogICAgICB2YXIgaXNRdWVlbk9mU3BhZGVzID0gUi5hbGxQYXNzKFtpc1F1ZWVuLCBpc1NwYWRlXSk7XG4gICAgICpcbiAgICAgKiAgICAgIGlzUXVlZW5PZlNwYWRlcyh7cmFuazogJ1EnLCBzdWl0OiAn4pmj77iOJ30pOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBpc1F1ZWVuT2ZTcGFkZXMoe3Jhbms6ICdRJywgc3VpdDogJ+KZoO+4jid9KTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGFsbFBhc3MgPSBfY3VycnkxKGZ1bmN0aW9uIGFsbFBhc3MocHJlZHMpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5TihyZWR1Y2UobWF4LCAwLCBwbHVjaygnbGVuZ3RoJywgcHJlZHMpKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICB2YXIgbGVuID0gcHJlZHMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgICAgIGlmICghcHJlZHNbaWR4XS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgYXJlIHVuaXF1ZSwgaW4gYFIuZXF1YWxzYCB0ZXJtcywgb3RoZXJ3aXNlXG4gICAgICogYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgYXJlIHVuaXF1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIHYwLjIwLjBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmFsbFVuaXEoWycxJywgMV0pOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuYWxsVW5pcShbMSwgMV0pOyAgIC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuYWxsVW5pcShbWzQyXSwgWzQyXV0pOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGFsbFVuaXEgPSBfY3VycnkxKGZ1bmN0aW9uIGFsbFVuaXEobGlzdCkge1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoX2luZGV4T2YobGlzdCwgbGlzdFtpZHhdLCBpZHggKyAxKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGxpc3Qgb2YgcHJlZGljYXRlcyBhbmQgcmV0dXJucyBhIHByZWRpY2F0ZSB0aGF0IHJldHVybnMgdHJ1ZSBmb3IgYVxuICAgICAqIGdpdmVuIGxpc3Qgb2YgYXJndW1lbnRzIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgcHJvdmlkZWQgcHJlZGljYXRlcyBpc1xuICAgICAqIHNhdGlzZmllZCBieSB0aG9zZSBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBUaGUgZnVuY3Rpb24gcmV0dXJuZWQgaXMgYSBjdXJyaWVkIGZ1bmN0aW9uIHdob3NlIGFyaXR5IG1hdGNoZXMgdGhhdCBvZiB0aGVcbiAgICAgKiBoaWdoZXN0LWFyaXR5IHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyBbKCouLi4gLT4gQm9vbGVhbildIC0+ICgqLi4uIC0+IEJvb2xlYW4pXG4gICAgICogQHBhcmFtIHtBcnJheX0gcHJlZHNcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIuYWxsUGFzc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBndGUgPSBSLmFueVBhc3MoW1IuZ3QsIFIuZXF1YWxzXSk7XG4gICAgICpcbiAgICAgKiAgICAgIGd0ZSgzLCAyKTsgLy89PiB0cnVlXG4gICAgICogICAgICBndGUoMiwgMik7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgZ3RlKDIsIDMpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGFueVBhc3MgPSBfY3VycnkxKGZ1bmN0aW9uIGFueVBhc3MocHJlZHMpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5TihyZWR1Y2UobWF4LCAwLCBwbHVjaygnbGVuZ3RoJywgcHJlZHMpKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICB2YXIgbGVuID0gcHJlZHMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgICAgIGlmIChwcmVkc1tpZHhdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIGFwIGFwcGxpZXMgYSBsaXN0IG9mIGZ1bmN0aW9ucyB0byBhIGxpc3Qgb2YgdmFsdWVzLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGFwYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC4gQWxzb1xuICAgICAqIHRyZWF0cyBmdW5jdGlvbnMgYXMgYXBwbGljYXRpdmVzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIFtmXSAtPiBbYV0gLT4gW2YgYV1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmbnMgQW4gYXJyYXkgb2YgZnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheX0gdnMgQW4gYXJyYXkgb2YgdmFsdWVzXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIHJlc3VsdHMgb2YgYXBwbHlpbmcgZWFjaCBvZiBgZm5zYCB0byBhbGwgb2YgYHZzYCBpbiB0dXJuLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYXAoW1IubXVsdGlwbHkoMiksIFIuYWRkKDMpXSwgWzEsMiwzXSk7IC8vPT4gWzIsIDQsIDYsIDQsIDUsIDZdXG4gICAgICovXG4gICAgLy8gZWxzZVxuICAgIHZhciBhcCA9IF9jdXJyeTIoZnVuY3Rpb24gYXAoYXBwbGljYXRpdmUsIGZuKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgYXBwbGljYXRpdmUuYXAgPT09ICdmdW5jdGlvbicgPyBhcHBsaWNhdGl2ZS5hcChmbikgOiB0eXBlb2YgYXBwbGljYXRpdmUgPT09ICdmdW5jdGlvbicgPyBjdXJyeU4oTWF0aC5tYXgoYXBwbGljYXRpdmUubGVuZ3RoLCBmbi5sZW5ndGgpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwbGljYXRpdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKShmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgICAgfSkgOiAvLyBlbHNlXG4gICAgICAgIF9yZWR1Y2UoZnVuY3Rpb24gKGFjYywgZikge1xuICAgICAgICAgICAgcmV0dXJuIF9jb25jYXQoYWNjLCBtYXAoZiwgZm4pKTtcbiAgICAgICAgfSwgW10sIGFwcGxpY2F0aXZlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgc3BlYyBvYmplY3QgcmVjdXJzaXZlbHkgbWFwcGluZyBwcm9wZXJ0aWVzIHRvIGZ1bmN0aW9ucywgY3JlYXRlcyBhXG4gICAgICogZnVuY3Rpb24gcHJvZHVjaW5nIGFuIG9iamVjdCBvZiB0aGUgc2FtZSBzdHJ1Y3R1cmUsIGJ5IG1hcHBpbmcgZWFjaCBwcm9wZXJ0eVxuICAgICAqIHRvIHRoZSByZXN1bHQgb2YgY2FsbGluZyBpdHMgYXNzb2NpYXRlZCBmdW5jdGlvbiB3aXRoIHRoZSBzdXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIwLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIHtrOiAoKGEsIGIsIC4uLiwgbSkgLT4gdil9IC0+ICgoYSwgYiwgLi4uLCBtKSAtPiB7azogdn0pXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNwZWMgYW4gb2JqZWN0IHJlY3Vyc2l2ZWx5IG1hcHBpbmcgcHJvcGVydGllcyB0byBmdW5jdGlvbnMgZm9yXG4gICAgICogICAgICAgIHByb2R1Y2luZyB0aGUgdmFsdWVzIGZvciB0aGVzZSBwcm9wZXJ0aWVzLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBvYmplY3Qgb2YgdGhlIHNhbWUgc3RydWN0dXJlXG4gICAgICogYXMgYHNwZWMnLCB3aXRoIGVhY2ggcHJvcGVydHkgc2V0IHRvIHRoZSB2YWx1ZSByZXR1cm5lZCBieSBjYWxsaW5nIGl0c1xuICAgICAqIGFzc29jaWF0ZWQgZnVuY3Rpb24gd2l0aCB0aGUgc3VwcGxpZWQgYXJndW1lbnRzLlxuICAgICAqIEBzZWUgUi5qdXh0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGdldE1ldHJpY3MgPSBSLmFwcGx5U3BlYyh7XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bTogUi5hZGQsXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lc3RlZDogeyBtdWw6IFIubXVsdGlwbHkgfVxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgKiAgICAgIGdldE1ldHJpY3MoMiwgNCk7IC8vID0+IHsgc3VtOiA2LCBuZXN0ZWQ6IHsgbXVsOiA4IH0gfVxuICAgICAqL1xuICAgIHZhciBhcHBseVNwZWMgPSBfY3VycnkxKGZ1bmN0aW9uIGFwcGx5U3BlYyhzcGVjKSB7XG4gICAgICAgIHNwZWMgPSBtYXAoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdiA9PSAnZnVuY3Rpb24nID8gdiA6IGFwcGx5U3BlYyh2KTtcbiAgICAgICAgfSwgc3BlYyk7XG4gICAgICAgIHJldHVybiBjdXJyeU4ocmVkdWNlKG1heCwgMCwgcGx1Y2soJ2xlbmd0aCcsIHZhbHVlcyhzcGVjKSkpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIHJldHVybiBtYXAoZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwbHkoZiwgYXJncyk7XG4gICAgICAgICAgICB9LCBzcGVjKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgY2FsbGluZyBpdHMgZmlyc3QgYXJndW1lbnQgd2l0aCB0aGUgcmVtYWluaW5nXG4gICAgICogYXJndW1lbnRzLiBUaGlzIGlzIG9jY2FzaW9uYWxseSB1c2VmdWwgYXMgYSBjb252ZXJnaW5nIGZ1bmN0aW9uIGZvclxuICAgICAqIGBSLmNvbnZlcmdlYDogdGhlIGxlZnQgYnJhbmNoIGNhbiBwcm9kdWNlIGEgZnVuY3Rpb24gd2hpbGUgdGhlIHJpZ2h0IGJyYW5jaFxuICAgICAqIHByb2R1Y2VzIGEgdmFsdWUgdG8gYmUgcGFzc2VkIHRvIHRoYXQgZnVuY3Rpb24gYXMgYW4gYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCouLi4gLT4gYSksKi4uLiAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIHRoZSByZW1haW5pbmcgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyBBbnkgbnVtYmVyIG9mIHBvc2l0aW9uYWwgYXJndW1lbnRzLlxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLmFwcGx5XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGluZGVudE4gPSBSLnBpcGUoUi50aW1lcyhSLmFsd2F5cygnICcpKSxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIFIuam9pbignJyksXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBSLnJlcGxhY2UoL14oPyEkKS9nbSkpO1xuICAgICAqXG4gICAgICogICAgICB2YXIgZm9ybWF0ID0gUi5jb252ZXJnZShSLmNhbGwsIFtcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLnBpcGUoUi5wcm9wKCdpbmRlbnQnKSwgaW5kZW50TiksXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUi5wcm9wKCd2YWx1ZScpXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgKlxuICAgICAqICAgICAgZm9ybWF0KHtpbmRlbnQ6IDIsIHZhbHVlOiAnZm9vXFxuYmFyXFxuYmF6XFxuJ30pOyAvLz0+ICcgIGZvb1xcbiAgYmFyXFxuICBiYXpcXG4nXG4gICAgICovXG4gICAgdmFyIGNhbGwgPSBjdXJyeShmdW5jdGlvbiBjYWxsKGZuKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBfc2xpY2UoYXJndW1lbnRzLCAxKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBgY2hhaW5gIG1hcHMgYSBmdW5jdGlvbiBvdmVyIGEgbGlzdCBhbmQgY29uY2F0ZW5hdGVzIHRoZSByZXN1bHRzLiBgY2hhaW5gXG4gICAgICogaXMgYWxzbyBrbm93biBhcyBgZmxhdE1hcGAgaW4gc29tZSBsaWJyYXJpZXNcbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBjaGFpbmAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBbYl0pIC0+IFthXSAtPiBbYl1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZHVwbGljYXRlID0gbiA9PiBbbiwgbl07XG4gICAgICogICAgICBSLmNoYWluKGR1cGxpY2F0ZSwgWzEsIDIsIDNdKTsgLy89PiBbMSwgMSwgMiwgMiwgMywgM11cbiAgICAgKi9cbiAgICB2YXIgY2hhaW4gPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2NoYWluJywgX3hjaGFpbiwgZnVuY3Rpb24gY2hhaW4oZm4sIG1vbmFkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbW9uYWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vbmFkLmNhbGwodGhpcywgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9tYWtlRmxhdChmYWxzZSkobWFwKGZuLCBtb25hZCkpO1xuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiwgYGZuYCwgd2hpY2ggZW5jYXBzdWxhdGVzIGlmL2Vsc2UtaWYvZWxzZSBsb2dpYy5cbiAgICAgKiBgUi5jb25kYCB0YWtlcyBhIGxpc3Qgb2YgW3ByZWRpY2F0ZSwgdHJhbnNmb3JtXSBwYWlycy4gQWxsIG9mIHRoZSBhcmd1bWVudHNcbiAgICAgKiB0byBgZm5gIGFyZSBhcHBsaWVkIHRvIGVhY2ggb2YgdGhlIHByZWRpY2F0ZXMgaW4gdHVybiB1bnRpbCBvbmUgcmV0dXJucyBhXG4gICAgICogXCJ0cnV0aHlcIiB2YWx1ZSwgYXQgd2hpY2ggcG9pbnQgYGZuYCByZXR1cm5zIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgaXRzXG4gICAgICogYXJndW1lbnRzIHRvIHRoZSBjb3JyZXNwb25kaW5nIHRyYW5zZm9ybWVyLiBJZiBub25lIG9mIHRoZSBwcmVkaWNhdGVzXG4gICAgICogbWF0Y2hlcywgYGZuYCByZXR1cm5zIHVuZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNi4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyBbWygqLi4uIC0+IEJvb2xlYW4pLCgqLi4uIC0+ICopXV0gLT4gKCouLi4gLT4gKilcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYWlyc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmbiA9IFIuY29uZChbXG4gICAgICogICAgICAgIFtSLmVxdWFscygwKSwgICBSLmFsd2F5cygnd2F0ZXIgZnJlZXplcyBhdCAwwrBDJyldLFxuICAgICAqICAgICAgICBbUi5lcXVhbHMoMTAwKSwgUi5hbHdheXMoJ3dhdGVyIGJvaWxzIGF0IDEwMMKwQycpXSxcbiAgICAgKiAgICAgICAgW1IuVCwgICAgICAgICAgIHRlbXAgPT4gJ25vdGhpbmcgc3BlY2lhbCBoYXBwZW5zIGF0ICcgKyB0ZW1wICsgJ8KwQyddXG4gICAgICogICAgICBdKTtcbiAgICAgKiAgICAgIGZuKDApOyAvLz0+ICd3YXRlciBmcmVlemVzIGF0IDDCsEMnXG4gICAgICogICAgICBmbig1MCk7IC8vPT4gJ25vdGhpbmcgc3BlY2lhbCBoYXBwZW5zIGF0IDUwwrBDJ1xuICAgICAqICAgICAgZm4oMTAwKTsgLy89PiAnd2F0ZXIgYm9pbHMgYXQgMTAwwrBDJ1xuICAgICAqL1xuICAgIHZhciBjb25kID0gX2N1cnJ5MShmdW5jdGlvbiBjb25kKHBhaXJzKSB7XG4gICAgICAgIHZhciBhcml0eSA9IHJlZHVjZShtYXgsIDAsIG1hcChmdW5jdGlvbiAocGFpcikge1xuICAgICAgICAgICAgcmV0dXJuIHBhaXJbMF0ubGVuZ3RoO1xuICAgICAgICB9LCBwYWlycykpO1xuICAgICAgICByZXR1cm4gX2FyaXR5KGFyaXR5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpZHggPCBwYWlycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFpcnNbaWR4XVswXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYWlyc1tpZHhdWzFdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFdyYXBzIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gaW5zaWRlIGEgY3VycmllZCBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWRcbiAgICAgKiB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cyBhbmQgcmV0dXJucyB0aGUgc2FtZSB0eXBlLiBUaGUgYXJpdHkgb2YgdGhlIGZ1bmN0aW9uXG4gICAgICogcmV0dXJuZWQgaXMgc3BlY2lmaWVkIHRvIGFsbG93IHVzaW5nIHZhcmlhZGljIGNvbnN0cnVjdG9yIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBOdW1iZXIgLT4gKCogLT4geyp9KSAtPiAoKiAtPiB7Kn0pXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG4gVGhlIGFyaXR5IG9mIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBGbiBUaGUgY29uc3RydWN0b3IgZnVuY3Rpb24gdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSB3cmFwcGVkLCBjdXJyaWVkIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIFZhcmlhZGljIGNvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gICAgICogICAgICB2YXIgV2lkZ2V0ID0gKCkgPT4ge1xuICAgICAqICAgICAgICB0aGlzLmNoaWxkcmVuID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgKiAgICAgICAgLy8gLi4uXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgV2lkZ2V0LnByb3RvdHlwZSA9IHtcbiAgICAgKiAgICAgICAgLy8gLi4uXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgdmFyIGFsbENvbmZpZ3MgPSBbXG4gICAgICogICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgXTtcbiAgICAgKiAgICAgIFIubWFwKFIuY29uc3RydWN0TigxLCBXaWRnZXQpLCBhbGxDb25maWdzKTsgLy8gYSBsaXN0IG9mIFdpZGdldHNcbiAgICAgKi9cbiAgICB2YXIgY29uc3RydWN0TiA9IF9jdXJyeTIoZnVuY3Rpb24gY29uc3RydWN0TihuLCBGbikge1xuICAgICAgICBpZiAobiA+IDEwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnN0cnVjdG9yIHdpdGggZ3JlYXRlciB0aGFuIHRlbiBhcmd1bWVudHMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobiA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXJyeShuQXJ5KG4sIGZ1bmN0aW9uICgkMCwgJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCAkOSkge1xuICAgICAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCk7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEpO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm4oJDAsICQxLCAkMik7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMyk7XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMywgJDQpO1xuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm4oJDAsICQxLCAkMiwgJDMsICQ0LCAkNSk7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMywgJDQsICQ1LCAkNik7XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcpO1xuICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm4oJDAsICQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICQ3LCAkOCk7XG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm4oJDAsICQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICQ3LCAkOCwgJDkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBY2NlcHRzIGEgY29udmVyZ2luZyBmdW5jdGlvbiBhbmQgYSBsaXN0IG9mIGJyYW5jaGluZyBmdW5jdGlvbnMgYW5kIHJldHVybnNcbiAgICAgKiBhIG5ldyBmdW5jdGlvbi4gV2hlbiBpbnZva2VkLCB0aGlzIG5ldyBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHNvbWVcbiAgICAgKiBhcmd1bWVudHMsIGVhY2ggYnJhbmNoaW5nIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gdGhvc2Ugc2FtZSBhcmd1bWVudHMuIFRoZVxuICAgICAqIHJlc3VsdHMgb2YgZWFjaCBicmFuY2hpbmcgZnVuY3Rpb24gYXJlIHBhc3NlZCBhcyBhcmd1bWVudHMgdG8gdGhlIGNvbnZlcmdpbmdcbiAgICAgKiBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSByZXR1cm4gdmFsdWUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjQuMlxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKHgxIC0+IHgyIC0+IC4uLiAtPiB6KSAtPiBbKGEgLT4gYiAtPiAuLi4gLT4geDEpLCAoYSAtPiBiIC0+IC4uLiAtPiB4MiksIC4uLl0gLT4gKGEgLT4gYiAtPiAuLi4gLT4geilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhZnRlciBBIGZ1bmN0aW9uLiBgYWZ0ZXJgIHdpbGwgYmUgaW52b2tlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWVzIG9mXG4gICAgICogICAgICAgIGBmbjFgIGFuZCBgZm4yYCBhcyBpdHMgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZ1bmN0aW9ucyBBIGxpc3Qgb2YgZnVuY3Rpb25zLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYWRkID0gKGEsIGIpID0+IGEgKyBiO1xuICAgICAqICAgICAgdmFyIG11bHRpcGx5ID0gKGEsIGIpID0+IGEgKiBiO1xuICAgICAqICAgICAgdmFyIHN1YnRyYWN0ID0gKGEsIGIpID0+IGEgLSBiO1xuICAgICAqXG4gICAgICogICAgICAvL+KJhSBtdWx0aXBseSggYWRkKDEsIDIpLCBzdWJ0cmFjdCgxLCAyKSApO1xuICAgICAqICAgICAgUi5jb252ZXJnZShtdWx0aXBseSwgW2FkZCwgc3VidHJhY3RdKSgxLCAyKTsgLy89PiAtM1xuICAgICAqXG4gICAgICogICAgICB2YXIgYWRkMyA9IChhLCBiLCBjKSA9PiBhICsgYiArIGM7XG4gICAgICogICAgICBSLmNvbnZlcmdlKGFkZDMsIFttdWx0aXBseSwgYWRkLCBzdWJ0cmFjdF0pKDEsIDIpOyAvLz0+IDRcbiAgICAgKi9cbiAgICB2YXIgY29udmVyZ2UgPSBfY3VycnkyKGZ1bmN0aW9uIGNvbnZlcmdlKGFmdGVyLCBmbnMpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5TihyZWR1Y2UobWF4LCAwLCBwbHVjaygnbGVuZ3RoJywgZm5zKSksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIGFmdGVyLmFwcGx5KGNvbnRleHQsIF9tYXAoZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgfSwgZm5zKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ291bnRzIHRoZSBlbGVtZW50cyBvZiBhIGxpc3QgYWNjb3JkaW5nIHRvIGhvdyBtYW55IG1hdGNoIGVhY2ggdmFsdWUgb2YgYVxuICAgICAqIGtleSBnZW5lcmF0ZWQgYnkgdGhlIHN1cHBsaWVkIGZ1bmN0aW9uLiBSZXR1cm5zIGFuIG9iamVjdCBtYXBwaW5nIHRoZSBrZXlzXG4gICAgICogcHJvZHVjZWQgYnkgYGZuYCB0byB0aGUgbnVtYmVyIG9mIG9jY3VycmVuY2VzIGluIHRoZSBsaXN0LiBOb3RlIHRoYXQgYWxsXG4gICAgICoga2V5cyBhcmUgY29lcmNlZCB0byBzdHJpbmdzIGJlY2F1c2Ugb2YgaG93IEphdmFTY3JpcHQgb2JqZWN0cyB3b3JrLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIChhIC0+IFN0cmluZykgLT4gW2FdIC0+IHsqfVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB1c2VkIHRvIG1hcCB2YWx1ZXMgdG8ga2V5cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIGNvdW50IGVsZW1lbnRzIGZyb20uXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBbiBvYmplY3QgbWFwcGluZyBrZXlzIHRvIG51bWJlciBvZiBvY2N1cnJlbmNlcyBpbiB0aGUgbGlzdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbnVtYmVycyA9IFsxLjAsIDEuMSwgMS4yLCAyLjAsIDMuMCwgMi4yXTtcbiAgICAgKiAgICAgIHZhciBsZXR0ZXJzID0gUi5zcGxpdCgnJywgJ2FiY0FCQ2FhYUJCYycpO1xuICAgICAqICAgICAgUi5jb3VudEJ5KE1hdGguZmxvb3IpKG51bWJlcnMpOyAgICAvLz0+IHsnMSc6IDMsICcyJzogMiwgJzMnOiAxfVxuICAgICAqICAgICAgUi5jb3VudEJ5KFIudG9Mb3dlcikobGV0dGVycyk7ICAgLy89PiB7J2EnOiA1LCAnYic6IDQsICdjJzogM31cbiAgICAgKi9cbiAgICB2YXIgY291bnRCeSA9IHJlZHVjZUJ5KGZ1bmN0aW9uIChhY2MsIGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIGFjYyArIDE7XG4gICAgfSwgMCk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3Qgd2l0aG91dCBhbnkgY29uc2VjdXRpdmVseSByZXBlYXRpbmcgZWxlbWVudHMuIEVxdWFsaXR5IGlzXG4gICAgICogZGV0ZXJtaW5lZCBieSBhcHBseWluZyB0aGUgc3VwcGxpZWQgcHJlZGljYXRlIHR3byBjb25zZWN1dGl2ZSBlbGVtZW50cy4gVGhlXG4gICAgICogZmlyc3QgZWxlbWVudCBpbiBhIHNlcmllcyBvZiBlcXVhbCBlbGVtZW50IGlzIHRoZSBvbmUgYmVpbmcgcHJlc2VydmVkLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGRyb3BSZXBlYXRzV2l0aGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEsIGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgQSBwcmVkaWNhdGUgdXNlZCB0byB0ZXN0IHdoZXRoZXIgdHdvIGl0ZW1zIGFyZSBlcXVhbC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gYGxpc3RgIHdpdGhvdXQgcmVwZWF0aW5nIGVsZW1lbnRzLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbCA9IFsxLCAtMSwgMSwgMywgNCwgLTQsIC00LCAtNSwgNSwgMywgM107XG4gICAgICogICAgICBSLmRyb3BSZXBlYXRzV2l0aChSLmVxQnkoTWF0aC5hYnMpLCBsKTsgLy89PiBbMSwgMywgNCwgLTUsIDNdXG4gICAgICovXG4gICAgdmFyIGRyb3BSZXBlYXRzV2l0aCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZHJvcFJlcGVhdHNXaXRoJywgX3hkcm9wUmVwZWF0c1dpdGgsIGZ1bmN0aW9uIGRyb3BSZXBlYXRzV2l0aChwcmVkLCBsaXN0KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDE7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiAhPT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0WzBdID0gbGlzdFswXTtcbiAgICAgICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXByZWQobGFzdChyZXN1bHQpLCBsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IGxpc3RbaWR4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGZ1bmN0aW9uIGFuZCB0d28gdmFsdWVzIGluIGl0cyBkb21haW4gYW5kIHJldHVybnMgYHRydWVgIGlmIHRoZVxuICAgICAqIHZhbHVlcyBtYXAgdG8gdGhlIHNhbWUgdmFsdWUgaW4gdGhlIGNvZG9tYWluOyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgKGEgLT4gYikgLT4gYSAtPiBhIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG4gICAgICogQHBhcmFtIHsqfSB4XG4gICAgICogQHBhcmFtIHsqfSB5XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmVxQnkoTWF0aC5hYnMsIDUsIC01KTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGVxQnkgPSBfY3VycnkzKGZ1bmN0aW9uIGVxQnkoZiwgeCwgeSkge1xuICAgICAgICByZXR1cm4gZXF1YWxzKGYoeCksIGYoeSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmVwb3J0cyB3aGV0aGVyIHR3byBvYmplY3RzIGhhdmUgdGhlIHNhbWUgdmFsdWUsIGluIGBSLmVxdWFsc2AgdGVybXMsIGZvclxuICAgICAqIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkuIFVzZWZ1bCBhcyBhIGN1cnJpZWQgcHJlZGljYXRlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBrIC0+IHtrOiB2fSAtPiB7azogdn0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBjb21wYXJlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iajFcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqMlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbzEgPSB7IGE6IDEsIGI6IDIsIGM6IDMsIGQ6IDQgfTtcbiAgICAgKiAgICAgIHZhciBvMiA9IHsgYTogMTAsIGI6IDIwLCBjOiAzLCBkOiA0MCB9O1xuICAgICAqICAgICAgUi5lcVByb3BzKCdhJywgbzEsIG8yKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5lcVByb3BzKCdjJywgbzEsIG8yKTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGVxUHJvcHMgPSBfY3VycnkzKGZ1bmN0aW9uIGVxUHJvcHMocHJvcCwgb2JqMSwgb2JqMikge1xuICAgICAgICByZXR1cm4gZXF1YWxzKG9iajFbcHJvcF0sIG9iajJbcHJvcF0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGEgbGlzdCBpbnRvIHN1Yi1saXN0cyBzdG9yZWQgaW4gYW4gb2JqZWN0LCBiYXNlZCBvbiB0aGUgcmVzdWx0IG9mXG4gICAgICogY2FsbGluZyBhIFN0cmluZy1yZXR1cm5pbmcgZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlXG4gICAgICogcmVzdWx0cyBhY2NvcmRpbmcgdG8gdmFsdWVzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGdyb3VwQnlgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gU3RyaW5nKSAtPiBbYV0gLT4ge1N0cmluZzogW2FdfVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIDo6IGEgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gZ3JvdXBcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBvdXRwdXQgb2YgYGZuYCBmb3Iga2V5cywgbWFwcGVkIHRvIGFycmF5cyBvZiBlbGVtZW50c1xuICAgICAqICAgICAgICAgdGhhdCBwcm9kdWNlZCB0aGF0IGtleSB3aGVuIHBhc3NlZCB0byBgZm5gLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYnlHcmFkZSA9IFIuZ3JvdXBCeShmdW5jdGlvbihzdHVkZW50KSB7XG4gICAgICogICAgICAgIHZhciBzY29yZSA9IHN0dWRlbnQuc2NvcmU7XG4gICAgICogICAgICAgIHJldHVybiBzY29yZSA8IDY1ID8gJ0YnIDpcbiAgICAgKiAgICAgICAgICAgICAgIHNjb3JlIDwgNzAgPyAnRCcgOlxuICAgICAqICAgICAgICAgICAgICAgc2NvcmUgPCA4MCA/ICdDJyA6XG4gICAgICogICAgICAgICAgICAgICBzY29yZSA8IDkwID8gJ0InIDogJ0EnO1xuICAgICAqICAgICAgfSk7XG4gICAgICogICAgICB2YXIgc3R1ZGVudHMgPSBbe25hbWU6ICdBYmJ5Jywgc2NvcmU6IDg0fSxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ0VkZHknLCBzY29yZTogNTh9LFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnSmFjaycsIHNjb3JlOiA2OX1dO1xuICAgICAqICAgICAgYnlHcmFkZShzdHVkZW50cyk7XG4gICAgICogICAgICAvLyB7XG4gICAgICogICAgICAvLyAgICdBJzogW3tuYW1lOiAnRGlhbm5lJywgc2NvcmU6IDk5fV0sXG4gICAgICogICAgICAvLyAgICdCJzogW3tuYW1lOiAnQWJieScsIHNjb3JlOiA4NH1dXG4gICAgICogICAgICAvLyAgIC8vIC4uLixcbiAgICAgKiAgICAgIC8vICAgJ0YnOiBbe25hbWU6ICdFZGR5Jywgc2NvcmU6IDU4fV1cbiAgICAgKiAgICAgIC8vIH1cbiAgICAgKi9cbiAgICB2YXIgZ3JvdXBCeSA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZ3JvdXBCeScsIF94Z3JvdXBCeSwgcmVkdWNlQnkoZnVuY3Rpb24gKGFjYywgaXRlbSkge1xuICAgICAgICBpZiAoYWNjID09IG51bGwpIHtcbiAgICAgICAgICAgIGFjYyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGFjYy5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIG51bGwpKSk7XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGZ1bmN0aW9uIHRoYXQgZ2VuZXJhdGVzIGEga2V5LCB0dXJucyBhIGxpc3Qgb2Ygb2JqZWN0cyBpbnRvIGFuXG4gICAgICogb2JqZWN0IGluZGV4aW5nIHRoZSBvYmplY3RzIGJ5IHRoZSBnaXZlbiBrZXkuIE5vdGUgdGhhdCBpZiBtdWx0aXBsZVxuICAgICAqIG9iamVjdHMgZ2VuZXJhdGUgdGhlIHNhbWUgdmFsdWUgZm9yIHRoZSBpbmRleGluZyBrZXkgb25seSB0aGUgbGFzdCB2YWx1ZVxuICAgICAqIHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIGdlbmVyYXRlZCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gU3RyaW5nKSAtPiBbe2s6IHZ9XSAtPiB7azoge2s6IHZ9fVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIDo6IGEgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IG9mIG9iamVjdHMgdG8gaW5kZXhcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIG9iamVjdCBpbmRleGluZyBlYWNoIGFycmF5IGVsZW1lbnQgYnkgdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBsaXN0ID0gW3tpZDogJ3h5eicsIHRpdGxlOiAnQSd9LCB7aWQ6ICdhYmMnLCB0aXRsZTogJ0InfV07XG4gICAgICogICAgICBSLmluZGV4QnkoUi5wcm9wKCdpZCcpLCBsaXN0KTtcbiAgICAgKiAgICAgIC8vPT4ge2FiYzoge2lkOiAnYWJjJywgdGl0bGU6ICdCJ30sIHh5ejoge2lkOiAneHl6JywgdGl0bGU6ICdBJ319XG4gICAgICovXG4gICAgdmFyIGluZGV4QnkgPSByZWR1Y2VCeShmdW5jdGlvbiAoYWNjLCBlbGVtKSB7XG4gICAgICAgIHJldHVybiBlbGVtO1xuICAgIH0sIG51bGwpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gaXRlbSBpbiBhbiBhcnJheSwgb3IgLTFcbiAgICAgKiBpZiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LiBgUi5lcXVhbHNgIGlzIHVzZWQgdG8gZGV0ZXJtaW5lXG4gICAgICogZXF1YWxpdHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+IFthXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0geyp9IHRhcmdldCBUaGUgaXRlbSB0byBmaW5kLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHhzIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gICAgICogQHJldHVybiB7TnVtYmVyfSB0aGUgaW5kZXggb2YgdGhlIHRhcmdldCwgb3IgLTEgaWYgdGhlIHRhcmdldCBpcyBub3QgZm91bmQuXG4gICAgICogQHNlZSBSLmxhc3RJbmRleE9mXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pbmRleE9mKDMsIFsxLDIsMyw0XSk7IC8vPT4gMlxuICAgICAqICAgICAgUi5pbmRleE9mKDEwLCBbMSwyLDMsNF0pOyAvLz0+IC0xXG4gICAgICovXG4gICAgdmFyIGluZGV4T2YgPSBfY3VycnkyKGZ1bmN0aW9uIGluZGV4T2YodGFyZ2V0LCB4cykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHhzLmluZGV4T2YgPT09ICdmdW5jdGlvbicgJiYgIV9pc0FycmF5KHhzKSA/IHhzLmluZGV4T2YodGFyZ2V0KSA6IF9pbmRleE9mKHhzLCB0YXJnZXQsIDApO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICoganV4dCBhcHBsaWVzIGEgbGlzdCBvZiBmdW5jdGlvbnMgdG8gYSBsaXN0IG9mIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgWyhhLCBiLCAuLi4sIG0pIC0+IG5dIC0+ICgoYSwgYiwgLi4uLCBtKSAtPiBbbl0pXG4gICAgICogQHBhcmFtIHtBcnJheX0gZm5zIEFuIGFycmF5IG9mIGZ1bmN0aW9uc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGxpc3Qgb2YgdmFsdWVzIGFmdGVyIGFwcGx5aW5nIGVhY2ggb2YgdGhlIG9yaWdpbmFsIGBmbnNgIHRvIGl0cyBwYXJhbWV0ZXJzLlxuICAgICAqIEBzZWUgUi5hcHBseVNwZWNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgcmFuZ2UgPSBSLmp1eHQoW01hdGgubWluLCBNYXRoLm1heF0pO1xuICAgICAqICAgICAgcmFuZ2UoMywgNCwgOSwgLTMpOyAvLz0+IFstMywgOV1cbiAgICAgKi9cbiAgICB2YXIganV4dCA9IF9jdXJyeTEoZnVuY3Rpb24ganV4dChmbnMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnZlcmdlKF9hcnJheU9mLCBmbnMpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxlbnMgZm9yIHRoZSBnaXZlbiBnZXR0ZXIgYW5kIHNldHRlciBmdW5jdGlvbnMuIFRoZSBnZXR0ZXIgXCJnZXRzXCJcbiAgICAgKiB0aGUgdmFsdWUgb2YgdGhlIGZvY3VzOyB0aGUgc2V0dGVyIFwic2V0c1wiIHRoZSB2YWx1ZSBvZiB0aGUgZm9jdXMuIFRoZSBzZXR0ZXJcbiAgICAgKiBzaG91bGQgbm90IG11dGF0ZSB0aGUgZGF0YSBzdHJ1Y3R1cmUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjguMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAdHlwZWRlZm4gTGVucyBzIGEgPSBGdW5jdG9yIGYgPT4gKGEgLT4gZiBhKSAtPiBzIC0+IGYgc1xuICAgICAqIEBzaWcgKHMgLT4gYSkgLT4gKChhLCBzKSAtPiBzKSAtPiBMZW5zIHMgYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGdldHRlclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNldHRlclxuICAgICAqIEByZXR1cm4ge0xlbnN9XG4gICAgICogQHNlZSBSLnZpZXcsIFIuc2V0LCBSLm92ZXIsIFIubGVuc0luZGV4LCBSLmxlbnNQcm9wXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHhMZW5zID0gUi5sZW5zKFIucHJvcCgneCcpLCBSLmFzc29jKCd4JykpO1xuICAgICAqXG4gICAgICogICAgICBSLnZpZXcoeExlbnMsIHt4OiAxLCB5OiAyfSk7ICAgICAgICAgICAgLy89PiAxXG4gICAgICogICAgICBSLnNldCh4TGVucywgNCwge3g6IDEsIHk6IDJ9KTsgICAgICAgICAgLy89PiB7eDogNCwgeTogMn1cbiAgICAgKiAgICAgIFIub3Zlcih4TGVucywgUi5uZWdhdGUsIHt4OiAxLCB5OiAyfSk7ICAvLz0+IHt4OiAtMSwgeTogMn1cbiAgICAgKi9cbiAgICB2YXIgbGVucyA9IF9jdXJyeTIoZnVuY3Rpb24gbGVucyhnZXR0ZXIsIHNldHRlcikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRvRnVuY3RvckZuKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXAoZnVuY3Rpb24gKGZvY3VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXR0ZXIoZm9jdXMsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgfSwgdG9GdW5jdG9yRm4oZ2V0dGVyKHRhcmdldCkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGVucyB3aG9zZSBmb2N1cyBpcyB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEB0eXBlZGVmbiBMZW5zIHMgYSA9IEZ1bmN0b3IgZiA9PiAoYSAtPiBmIGEpIC0+IHMgLT4gZiBzXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTGVucyBzIGFcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgICAqIEByZXR1cm4ge0xlbnN9XG4gICAgICogQHNlZSBSLnZpZXcsIFIuc2V0LCBSLm92ZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaGVhZExlbnMgPSBSLmxlbnNJbmRleCgwKTtcbiAgICAgKlxuICAgICAqICAgICAgUi52aWV3KGhlYWRMZW5zLCBbJ2EnLCAnYicsICdjJ10pOyAgICAgICAgICAgIC8vPT4gJ2EnXG4gICAgICogICAgICBSLnNldChoZWFkTGVucywgJ3gnLCBbJ2EnLCAnYicsICdjJ10pOyAgICAgICAgLy89PiBbJ3gnLCAnYicsICdjJ11cbiAgICAgKiAgICAgIFIub3ZlcihoZWFkTGVucywgUi50b1VwcGVyLCBbJ2EnLCAnYicsICdjJ10pOyAvLz0+IFsnQScsICdiJywgJ2MnXVxuICAgICAqL1xuICAgIHZhciBsZW5zSW5kZXggPSBfY3VycnkxKGZ1bmN0aW9uIGxlbnNJbmRleChuKSB7XG4gICAgICAgIHJldHVybiBsZW5zKG50aChuKSwgdXBkYXRlKG4pKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsZW5zIHdob3NlIGZvY3VzIGlzIHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAdHlwZWRlZm4gTGVucyBzIGEgPSBGdW5jdG9yIGYgPT4gKGEgLT4gZiBhKSAtPiBzIC0+IGYgc1xuICAgICAqIEBzaWcgW1N0cmluZ10gLT4gTGVucyBzIGFcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXRoIFRoZSBwYXRoIHRvIHVzZS5cbiAgICAgKiBAcmV0dXJuIHtMZW5zfVxuICAgICAqIEBzZWUgUi52aWV3LCBSLnNldCwgUi5vdmVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHh5TGVucyA9IFIubGVuc1BhdGgoWyd4JywgJ3knXSk7XG4gICAgICpcbiAgICAgKiAgICAgIFIudmlldyh4eUxlbnMsIHt4OiB7eTogMiwgejogM319KTsgICAgICAgICAgICAvLz0+IDJcbiAgICAgKiAgICAgIFIuc2V0KHh5TGVucywgNCwge3g6IHt5OiAyLCB6OiAzfX0pOyAgICAgICAgICAvLz0+IHt4OiB7eTogNCwgejogM319XG4gICAgICogICAgICBSLm92ZXIoeHlMZW5zLCBSLm5lZ2F0ZSwge3g6IHt5OiAyLCB6OiAzfX0pOyAgLy89PiB7eDoge3k6IC0yLCB6OiAzfX1cbiAgICAgKi9cbiAgICB2YXIgbGVuc1BhdGggPSBfY3VycnkxKGZ1bmN0aW9uIGxlbnNQYXRoKHApIHtcbiAgICAgICAgcmV0dXJuIGxlbnMocGF0aChwKSwgYXNzb2NQYXRoKHApKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsZW5zIHdob3NlIGZvY3VzIGlzIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHR5cGVkZWZuIExlbnMgcyBhID0gRnVuY3RvciBmID0+IChhIC0+IGYgYSkgLT4gcyAtPiBmIHNcbiAgICAgKiBAc2lnIFN0cmluZyAtPiBMZW5zIHMgYVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrXG4gICAgICogQHJldHVybiB7TGVuc31cbiAgICAgKiBAc2VlIFIudmlldywgUi5zZXQsIFIub3ZlclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB4TGVucyA9IFIubGVuc1Byb3AoJ3gnKTtcbiAgICAgKlxuICAgICAqICAgICAgUi52aWV3KHhMZW5zLCB7eDogMSwgeTogMn0pOyAgICAgICAgICAgIC8vPT4gMVxuICAgICAqICAgICAgUi5zZXQoeExlbnMsIDQsIHt4OiAxLCB5OiAyfSk7ICAgICAgICAgIC8vPT4ge3g6IDQsIHk6IDJ9XG4gICAgICogICAgICBSLm92ZXIoeExlbnMsIFIubmVnYXRlLCB7eDogMSwgeTogMn0pOyAgLy89PiB7eDogLTEsIHk6IDJ9XG4gICAgICovXG4gICAgdmFyIGxlbnNQcm9wID0gX2N1cnJ5MShmdW5jdGlvbiBsZW5zUHJvcChrKSB7XG4gICAgICAgIHJldHVybiBsZW5zKHByb3AoayksIGFzc29jKGspKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFwibGlmdHNcIiBhIGZ1bmN0aW9uIHRvIGJlIHRoZSBzcGVjaWZpZWQgYXJpdHksIHNvIHRoYXQgaXQgbWF5IFwibWFwIG92ZXJcIiB0aGF0XG4gICAgICogbWFueSBsaXN0cywgRnVuY3Rpb25zIG9yIG90aGVyIG9iamVjdHMgdGhhdCBzYXRpc2Z5IHRoZSBbRmFudGFzeUxhbmQgQXBwbHkgc3BlY10oaHR0cHM6Ly9naXRodWIuY29tL2ZhbnRhc3lsYW5kL2ZhbnRhc3ktbGFuZCNhcHBseSkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjcuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgTnVtYmVyIC0+ICgqLi4uIC0+ICopIC0+IChbKl0uLi4gLT4gWypdKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBsaWZ0IGludG8gaGlnaGVyIGNvbnRleHRcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGxpZnRlZCBmdW5jdGlvbi5cbiAgICAgKiBAc2VlIFIubGlmdCwgUi5hcFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtYWRkMyA9IFIubGlmdE4oMywgUi5jdXJyeU4oMywgKC4uLmFyZ3MpID0+IFIuc3VtKGFyZ3MpKSk7XG4gICAgICogICAgICBtYWRkMyhbMSwyLDNdLCBbMSwyLDNdLCBbMV0pOyAvLz0+IFszLCA0LCA1LCA0LCA1LCA2LCA1LCA2LCA3XVxuICAgICAqL1xuICAgIHZhciBsaWZ0TiA9IF9jdXJyeTIoZnVuY3Rpb24gbGlmdE4oYXJpdHksIGZuKSB7XG4gICAgICAgIHZhciBsaWZ0ZWQgPSBjdXJyeU4oYXJpdHksIGZuKTtcbiAgICAgICAgcmV0dXJuIGN1cnJ5Tihhcml0eSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWR1Y2UoYXAsIG1hcChsaWZ0ZWQsIGFyZ3VtZW50c1swXSksIF9zbGljZShhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtZWFuIG9mIHRoZSBnaXZlbiBsaXN0IG9mIG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgW051bWJlcl0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdFxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1lYW4oWzIsIDcsIDldKTsgLy89PiA2XG4gICAgICogICAgICBSLm1lYW4oW10pOyAvLz0+IE5hTlxuICAgICAqL1xuICAgIHZhciBtZWFuID0gX2N1cnJ5MShmdW5jdGlvbiBtZWFuKGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIHN1bShsaXN0KSAvIGxpc3QubGVuZ3RoO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWVkaWFuIG9mIHRoZSBnaXZlbiBsaXN0IG9mIG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgW051bWJlcl0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdFxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1lZGlhbihbMiwgOSwgN10pOyAvLz0+IDdcbiAgICAgKiAgICAgIFIubWVkaWFuKFs3LCAyLCAxMCwgOV0pOyAvLz0+IDhcbiAgICAgKiAgICAgIFIubWVkaWFuKFtdKTsgLy89PiBOYU5cbiAgICAgKi9cbiAgICB2YXIgbWVkaWFuID0gX2N1cnJ5MShmdW5jdGlvbiBtZWRpYW4obGlzdCkge1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpZHRoID0gMiAtIGxlbiAlIDI7XG4gICAgICAgIHZhciBpZHggPSAobGVuIC0gd2lkdGgpIC8gMjtcbiAgICAgICAgcmV0dXJuIG1lYW4oX3NsaWNlKGxpc3QpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDtcbiAgICAgICAgfSkuc2xpY2UoaWR4LCBpZHggKyB3aWR0aCkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBwcmVkaWNhdGUgYW5kIGEgbGlzdCBvciBvdGhlciBcImZpbHRlcmFibGVcIiBvYmplY3QgYW5kIHJldHVybnMgdGhlXG4gICAgICogcGFpciBvZiBmaWx0ZXJhYmxlIG9iamVjdHMgb2YgdGhlIHNhbWUgdHlwZSBvZiBlbGVtZW50cyB3aGljaCBkbyBhbmQgZG8gbm90XG4gICAgICogc2F0aXNmeSwgdGhlIHByZWRpY2F0ZSwgcmVzcGVjdGl2ZWx5LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjRcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgRmlsdGVyYWJsZSBmID0+IChhIC0+IEJvb2xlYW4pIC0+IGYgYSAtPiBbZiBhLCBmIGFdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSB0byBkZXRlcm1pbmUgd2hpY2ggc2lkZSB0aGUgZWxlbWVudCBiZWxvbmdzIHRvLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcmFibGUgdGhlIGxpc3QgKG9yIG90aGVyIGZpbHRlcmFibGUpIHRvIHBhcnRpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXksIGNvbnRhaW5pbmcgZmlyc3QgdGhlIHN1YnNldCBvZiBlbGVtZW50cyB0aGF0IHNhdGlzZnkgdGhlXG4gICAgICogICAgICAgICBwcmVkaWNhdGUsIGFuZCBzZWNvbmQgdGhlIHN1YnNldCBvZiBlbGVtZW50cyB0aGF0IGRvIG5vdCBzYXRpc2Z5LlxuICAgICAqIEBzZWUgUi5maWx0ZXIsIFIucmVqZWN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wYXJ0aXRpb24oUi5jb250YWlucygncycpLCBbJ3NzcycsICd0dHQnLCAnZm9vJywgJ2JhcnMnXSk7XG4gICAgICogICAgICAvLyA9PiBbIFsgJ3NzcycsICdiYXJzJyBdLCAgWyAndHR0JywgJ2ZvbycgXSBdXG4gICAgICpcbiAgICAgKiAgICAgIFIucGFydGl0aW9uKFIuY29udGFpbnMoJ3MnKSwgeyBhOiAnc3NzJywgYjogJ3R0dCcsIGZvbzogJ2JhcnMnIH0pO1xuICAgICAqICAgICAgLy8gPT4gWyB7IGE6ICdzc3MnLCBmb286ICdiYXJzJyB9LCB7IGI6ICd0dHQnIH0gIF1cbiAgICAgKi9cbiAgICB2YXIgcGFydGl0aW9uID0ganV4dChbXG4gICAgICAgIGZpbHRlcixcbiAgICAgICAgcmVqZWN0XG4gICAgXSk7XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBsZWZ0LXRvLXJpZ2h0IGZ1bmN0aW9uIGNvbXBvc2l0aW9uLiBUaGUgbGVmdG1vc3QgZnVuY3Rpb24gbWF5IGhhdmVcbiAgICAgKiBhbnkgYXJpdHk7IHRoZSByZW1haW5pbmcgZnVuY3Rpb25zIG11c3QgYmUgdW5hcnkuXG4gICAgICpcbiAgICAgKiBJbiBzb21lIGxpYnJhcmllcyB0aGlzIGZ1bmN0aW9uIGlzIG5hbWVkIGBzZXF1ZW5jZWAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhlIHJlc3VsdCBvZiBwaXBlIGlzIG5vdCBhdXRvbWF0aWNhbGx5IGN1cnJpZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCgoYSwgYiwgLi4uLCBuKSAtPiBvKSwgKG8gLT4gcCksIC4uLiwgKHggLT4geSksICh5IC0+IHopKSAtPiAoKGEsIGIsIC4uLiwgbikgLT4geilcbiAgICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBmdW5jdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIuY29tcG9zZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmID0gUi5waXBlKE1hdGgucG93LCBSLm5lZ2F0ZSwgUi5pbmMpO1xuICAgICAqXG4gICAgICogICAgICBmKDMsIDQpOyAvLyAtKDNeNCkgKyAxXG4gICAgICovXG4gICAgdmFyIHBpcGUgPSBmdW5jdGlvbiBwaXBlKCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwaXBlIHJlcXVpcmVzIGF0IGxlYXN0IG9uZSBhcmd1bWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfYXJpdHkoYXJndW1lbnRzWzBdLmxlbmd0aCwgcmVkdWNlKF9waXBlLCBhcmd1bWVudHNbMF0sIHRhaWwoYXJndW1lbnRzKSkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBsZWZ0LXRvLXJpZ2h0IGNvbXBvc2l0aW9uIG9mIG9uZSBvciBtb3JlIFByb21pc2UtcmV0dXJuaW5nXG4gICAgICogZnVuY3Rpb25zLiBUaGUgbGVmdG1vc3QgZnVuY3Rpb24gbWF5IGhhdmUgYW55IGFyaXR5OyB0aGUgcmVtYWluaW5nIGZ1bmN0aW9uc1xuICAgICAqIG11c3QgYmUgdW5hcnkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgoYSAtPiBQcm9taXNlIGIpLCAoYiAtPiBQcm9taXNlIGMpLCAuLi4sICh5IC0+IFByb21pc2UgeikpIC0+IChhIC0+IFByb21pc2UgeilcbiAgICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBmdW5jdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIuY29tcG9zZVBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyAgZm9sbG93ZXJzRm9yVXNlciA6OiBTdHJpbmcgLT4gUHJvbWlzZSBbVXNlcl1cbiAgICAgKiAgICAgIHZhciBmb2xsb3dlcnNGb3JVc2VyID0gUi5waXBlUChkYi5nZXRVc2VyQnlJZCwgZGIuZ2V0Rm9sbG93ZXJzKTtcbiAgICAgKi9cbiAgICB2YXIgcGlwZVAgPSBmdW5jdGlvbiBwaXBlUCgpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGlwZVAgcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGFyZ3VtZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9hcml0eShhcmd1bWVudHNbMF0ubGVuZ3RoLCByZWR1Y2UoX3BpcGVQLCBhcmd1bWVudHNbMF0sIHRhaWwoYXJndW1lbnRzKSkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBsaWVzIHRvZ2V0aGVyIGFsbCB0aGUgZWxlbWVudHMgb2YgYSBsaXN0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgW051bWJlcl0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBBbiBhcnJheSBvZiBudW1iZXJzXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgcHJvZHVjdCBvZiBhbGwgdGhlIG51bWJlcnMgaW4gdGhlIGxpc3QuXG4gICAgICogQHNlZSBSLnJlZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucHJvZHVjdChbMiw0LDYsOCwxMDAsMV0pOyAvLz0+IDM4NDAwXG4gICAgICovXG4gICAgdmFyIHByb2R1Y3QgPSByZWR1Y2UobXVsdGlwbHksIDEpO1xuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtcyBhIFtUcmF2ZXJzYWJsZV0oaHR0cHM6Ly9naXRodWIuY29tL2ZhbnRhc3lsYW5kL2ZhbnRhc3ktbGFuZCN0cmF2ZXJzYWJsZSlcbiAgICAgKiBvZiBbQXBwbGljYXRpdmVdKGh0dHBzOi8vZ2l0aHViLmNvbS9mYW50YXN5bGFuZC9mYW50YXN5LWxhbmQjYXBwbGljYXRpdmUpIGludG8gYW5cbiAgICAgKiBBcHBsaWNhdGl2ZSBvZiBUcmF2ZXJzYWJsZS5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBzZXF1ZW5jZWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKEFwcGxpY2F0aXZlIGYsIFRyYXZlcnNhYmxlIHQpID0+IChhIC0+IGYgYSkgLT4gdCAoZiBhKSAtPiBmICh0IGEpXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2ZcbiAgICAgKiBAcGFyYW0geyp9IHRyYXZlcnNhYmxlXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIudHJhdmVyc2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnNlcXVlbmNlKE1heWJlLm9mLCBbSnVzdCgxKSwgSnVzdCgyKSwgSnVzdCgzKV0pOyAgIC8vPT4gSnVzdChbMSwgMiwgM10pXG4gICAgICogICAgICBSLnNlcXVlbmNlKE1heWJlLm9mLCBbSnVzdCgxKSwgSnVzdCgyKSwgTm90aGluZygpXSk7IC8vPT4gTm90aGluZygpXG4gICAgICpcbiAgICAgKiAgICAgIFIuc2VxdWVuY2UoUi5vZiwgSnVzdChbMSwgMiwgM10pKTsgLy89PiBbSnVzdCgxKSwgSnVzdCgyKSwgSnVzdCgzKV1cbiAgICAgKiAgICAgIFIuc2VxdWVuY2UoUi5vZiwgTm90aGluZygpKTsgICAgICAgLy89PiBbTm90aGluZygpXVxuICAgICAqL1xuICAgIHZhciBzZXF1ZW5jZSA9IF9jdXJyeTIoZnVuY3Rpb24gc2VxdWVuY2Uob2YsIHRyYXZlcnNhYmxlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdHJhdmVyc2FibGUuc2VxdWVuY2UgPT09ICdmdW5jdGlvbicgPyB0cmF2ZXJzYWJsZS5zZXF1ZW5jZShvZikgOiByZWR1Y2VSaWdodChmdW5jdGlvbiAoYWNjLCB4KSB7XG4gICAgICAgICAgICByZXR1cm4gYXAobWFwKHByZXBlbmQsIHgpLCBhY2MpO1xuICAgICAgICB9LCBvZihbXSksIHRyYXZlcnNhYmxlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE1hcHMgYW4gW0FwcGxpY2F0aXZlXShodHRwczovL2dpdGh1Yi5jb20vZmFudGFzeWxhbmQvZmFudGFzeS1sYW5kI2FwcGxpY2F0aXZlKS1yZXR1cm5pbmdcbiAgICAgKiBmdW5jdGlvbiBvdmVyIGEgW1RyYXZlcnNhYmxlXShodHRwczovL2dpdGh1Yi5jb20vZmFudGFzeWxhbmQvZmFudGFzeS1sYW5kI3RyYXZlcnNhYmxlKSxcbiAgICAgKiB0aGVuIHVzZXMgW2BzZXF1ZW5jZWBdKCNzZXF1ZW5jZSkgdG8gdHJhbnNmb3JtIHRoZSByZXN1bHRpbmcgVHJhdmVyc2FibGUgb2YgQXBwbGljYXRpdmVcbiAgICAgKiBpbnRvIGFuIEFwcGxpY2F0aXZlIG9mIFRyYXZlcnNhYmxlLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYHNlcXVlbmNlYCBtZXRob2Qgb2YgdGhlIHRoaXJkIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChBcHBsaWNhdGl2ZSBmLCBUcmF2ZXJzYWJsZSB0KSA9PiAoYSAtPiBmIGEpIC0+IChhIC0+IGYgYikgLT4gdCBhIC0+IGYgKHQgYilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvZlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAgKiBAcGFyYW0geyp9IHRyYXZlcnNhYmxlXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIuc2VxdWVuY2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyBSZXR1cm5zIGBOb3RoaW5nYCBpZiB0aGUgZ2l2ZW4gZGl2aXNvciBpcyBgMGBcbiAgICAgKiAgICAgIHNhZmVEaXYgPSBuID0+IGQgPT4gZCA9PT0gMCA/IE5vdGhpbmcoKSA6IEp1c3QobiAvIGQpXG4gICAgICpcbiAgICAgKiAgICAgIFIudHJhdmVyc2UoTWF5YmUub2YsIHNhZmVEaXYoMTApLCBbMiwgNCwgNV0pOyAvLz0+IEp1c3QoWzUsIDIuNSwgMl0pXG4gICAgICogICAgICBSLnRyYXZlcnNlKE1heWJlLm9mLCBzYWZlRGl2KDEwKSwgWzIsIDAsIDVdKTsgLy89PiBOb3RoaW5nXG4gICAgICovXG4gICAgdmFyIHRyYXZlcnNlID0gX2N1cnJ5MyhmdW5jdGlvbiB0cmF2ZXJzZShvZiwgZiwgdHJhdmVyc2FibGUpIHtcbiAgICAgICAgcmV0dXJuIHNlcXVlbmNlKG9mLCBtYXAoZiwgdHJhdmVyc2FibGUpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNob3J0aGFuZCBmb3IgYFIuY2hhaW4oUi5pZGVudGl0eSlgLCB3aGljaCByZW1vdmVzIG9uZSBsZXZlbCBvZiBuZXN0aW5nIGZyb21cbiAgICAgKiBhbnkgW0NoYWluXShodHRwczovL2dpdGh1Yi5jb20vZmFudGFzeWxhbmQvZmFudGFzeS1sYW5kI2NoYWluKS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIENoYWluIGMgPT4gYyAoYyBhKSAtPiBjIGFcbiAgICAgKiBAcGFyYW0geyp9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5mbGF0dGVuLCBSLmNoYWluXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi51bm5lc3QoWzEsIFsyXSwgW1szXV1dKTsgLy89PiBbMSwgMiwgWzNdXVxuICAgICAqICAgICAgUi51bm5lc3QoW1sxLCAyXSwgWzMsIDRdLCBbNSwgNl1dKTsgLy89PiBbMSwgMiwgMywgNCwgNSwgNl1cbiAgICAgKi9cbiAgICB2YXIgdW5uZXN0ID0gY2hhaW4oX2lkZW50aXR5KTtcblxuICAgIHZhciBfY29udGFpbnMgPSBmdW5jdGlvbiBfY29udGFpbnMoYSwgbGlzdCkge1xuICAgICAgICByZXR1cm4gX2luZGV4T2YobGlzdCwgYSwgMCkgPj0gMDtcbiAgICB9O1xuXG4gICAgLy8gIG1hcFBhaXJzIDo6IChPYmplY3QsIFtTdHJpbmddKSAtPiBbU3RyaW5nXVxuICAgIHZhciBfdG9TdHJpbmcgPSBmdW5jdGlvbiBfdG9TdHJpbmcoeCwgc2Vlbikge1xuICAgICAgICB2YXIgcmVjdXIgPSBmdW5jdGlvbiByZWN1cih5KSB7XG4gICAgICAgICAgICB2YXIgeHMgPSBzZWVuLmNvbmNhdChbeF0pO1xuICAgICAgICAgICAgcmV0dXJuIF9jb250YWlucyh5LCB4cykgPyAnPENpcmN1bGFyPicgOiBfdG9TdHJpbmcoeSwgeHMpO1xuICAgICAgICB9O1xuICAgICAgICAvLyAgbWFwUGFpcnMgOjogKE9iamVjdCwgW1N0cmluZ10pIC0+IFtTdHJpbmddXG4gICAgICAgIHZhciBtYXBQYWlycyA9IGZ1bmN0aW9uIChvYmosIGtleXMpIHtcbiAgICAgICAgICAgIHJldHVybiBfbWFwKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9xdW90ZShrKSArICc6ICcgKyByZWN1cihvYmpba10pO1xuICAgICAgICAgICAgfSwga2V5cy5zbGljZSgpLnNvcnQoKSk7XG4gICAgICAgIH07XG4gICAgICAgIHN3aXRjaCAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpKSB7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQXJndW1lbnRzXSc6XG4gICAgICAgICAgICByZXR1cm4gJyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgnICsgX21hcChyZWN1ciwgeCkuam9pbignLCAnKSArICcpKSc7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQXJyYXldJzpcbiAgICAgICAgICAgIHJldHVybiAnWycgKyBfbWFwKHJlY3VyLCB4KS5jb25jYXQobWFwUGFpcnMoeCwgcmVqZWN0KGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC9eXFxkKyQvLnRlc3Qoayk7XG4gICAgICAgICAgICB9LCBrZXlzKHgpKSkpLmpvaW4oJywgJykgKyAnXSc7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnb2JqZWN0JyA/ICduZXcgQm9vbGVhbignICsgcmVjdXIoeC52YWx1ZU9mKCkpICsgJyknIDogeC50b1N0cmluZygpO1xuICAgICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcbiAgICAgICAgICAgIHJldHVybiAnbmV3IERhdGUoJyArIChpc05hTih4LnZhbHVlT2YoKSkgPyByZWN1cihOYU4pIDogX3F1b3RlKF90b0lTT1N0cmluZyh4KSkpICsgJyknO1xuICAgICAgICBjYXNlICdbb2JqZWN0IE51bGxdJzpcbiAgICAgICAgICAgIHJldHVybiAnbnVsbCc7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnID8gJ25ldyBOdW1iZXIoJyArIHJlY3VyKHgudmFsdWVPZigpKSArICcpJyA6IDEgLyB4ID09PSAtSW5maW5pdHkgPyAnLTAnIDogeC50b1N0cmluZygxMCk7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnID8gJ25ldyBTdHJpbmcoJyArIHJlY3VyKHgudmFsdWVPZigpKSArICcpJyA6IF9xdW90ZSh4KTtcbiAgICAgICAgY2FzZSAnW29iamVjdCBVbmRlZmluZWRdJzpcbiAgICAgICAgICAgIHJldHVybiAndW5kZWZpbmVkJztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeC50b1N0cmluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHZhciByZXByID0geC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGlmIChyZXByICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVwcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJ3snICsgbWFwUGFpcnMoeCwga2V5cyh4KSkuam9pbignLCAnKSArICd9JztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyByaWdodC10by1sZWZ0IGZ1bmN0aW9uIGNvbXBvc2l0aW9uLiBUaGUgcmlnaHRtb3N0IGZ1bmN0aW9uIG1heSBoYXZlXG4gICAgICogYW55IGFyaXR5OyB0aGUgcmVtYWluaW5nIGZ1bmN0aW9ucyBtdXN0IGJlIHVuYXJ5LlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoZSByZXN1bHQgb2YgY29tcG9zZSBpcyBub3QgYXV0b21hdGljYWxseSBjdXJyaWVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgoeSAtPiB6KSwgKHggLT4geSksIC4uLiwgKG8gLT4gcCksICgoYSwgYiwgLi4uLCBuKSAtPiBvKSkgLT4gKChhLCBiLCAuLi4sIG4pIC0+IHopXG4gICAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gZnVuY3Rpb25zXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLnBpcGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZiA9IFIuY29tcG9zZShSLmluYywgUi5uZWdhdGUsIE1hdGgucG93KTtcbiAgICAgKlxuICAgICAqICAgICAgZigzLCA0KTsgLy8gLSgzXjQpICsgMVxuICAgICAqL1xuICAgIHZhciBjb21wb3NlID0gZnVuY3Rpb24gY29tcG9zZSgpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY29tcG9zZSByZXF1aXJlcyBhdCBsZWFzdCBvbmUgYXJndW1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZS5hcHBseSh0aGlzLCByZXZlcnNlKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByaWdodC10by1sZWZ0IEtsZWlzbGkgY29tcG9zaXRpb24gb2YgdGhlIHByb3ZpZGVkIGZ1bmN0aW9ucyxcbiAgICAgKiBlYWNoIG9mIHdoaWNoIG11c3QgcmV0dXJuIGEgdmFsdWUgb2YgYSB0eXBlIHN1cHBvcnRlZCBieSBbYGNoYWluYF0oI2NoYWluKS5cbiAgICAgKlxuICAgICAqIGBSLmNvbXBvc2VLKGgsIGcsIGYpYCBpcyBlcXVpdmFsZW50IHRvIGBSLmNvbXBvc2UoUi5jaGFpbihoKSwgUi5jaGFpbihnKSwgUi5jaGFpbihmKSlgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBDaGFpbiBtID0+ICgoeSAtPiBtIHopLCAoeCAtPiBtIHkpLCAuLi4sIChhIC0+IG0gYikpIC0+IChtIGEgLT4gbSB6KVxuICAgICAqIEBwYXJhbSB7Li4uRnVuY3Rpb259XG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLnBpcGVLXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgLy8gIHBhcnNlSnNvbiA6OiBTdHJpbmcgLT4gTWF5YmUgKlxuICAgICAqICAgICAgLy8gIGdldCA6OiBTdHJpbmcgLT4gT2JqZWN0IC0+IE1heWJlICpcbiAgICAgKlxuICAgICAqICAgICAgLy8gIGdldFN0YXRlQ29kZSA6OiBNYXliZSBTdHJpbmcgLT4gTWF5YmUgU3RyaW5nXG4gICAgICogICAgICB2YXIgZ2V0U3RhdGVDb2RlID0gUi5jb21wb3NlSyhcbiAgICAgKiAgICAgICAgUi5jb21wb3NlKE1heWJlLm9mLCBSLnRvVXBwZXIpLFxuICAgICAqICAgICAgICBnZXQoJ3N0YXRlJyksXG4gICAgICogICAgICAgIGdldCgnYWRkcmVzcycpLFxuICAgICAqICAgICAgICBnZXQoJ3VzZXInKSxcbiAgICAgKiAgICAgICAgcGFyc2VKc29uXG4gICAgICogICAgICApO1xuICAgICAqXG4gICAgICogICAgICBnZXRTdGF0ZUNvZGUoTWF5YmUub2YoJ3tcInVzZXJcIjp7XCJhZGRyZXNzXCI6e1wic3RhdGVcIjpcIm55XCJ9fX0nKSk7XG4gICAgICogICAgICAvLz0+IEp1c3QoJ05ZJylcbiAgICAgKiAgICAgIGdldFN0YXRlQ29kZShNYXliZS5vZignW0ludmFsaWQgSlNPTl0nKSk7XG4gICAgICogICAgICAvLz0+IE5vdGhpbmcoKVxuICAgICAqL1xuICAgIHZhciBjb21wb3NlSyA9IGZ1bmN0aW9uIGNvbXBvc2VLKCkge1xuICAgICAgICByZXR1cm4gY29tcG9zZS5hcHBseSh0aGlzLCBwcmVwZW5kKGlkZW50aXR5LCBtYXAoY2hhaW4sIGFyZ3VtZW50cykpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgcmlnaHQtdG8tbGVmdCBjb21wb3NpdGlvbiBvZiBvbmUgb3IgbW9yZSBQcm9taXNlLXJldHVybmluZ1xuICAgICAqIGZ1bmN0aW9ucy4gVGhlIHJpZ2h0bW9zdCBmdW5jdGlvbiBtYXkgaGF2ZSBhbnkgYXJpdHk7IHRoZSByZW1haW5pbmdcbiAgICAgKiBmdW5jdGlvbnMgbXVzdCBiZSB1bmFyeS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCh5IC0+IFByb21pc2UgeiksICh4IC0+IFByb21pc2UgeSksIC4uLiwgKGEgLT4gUHJvbWlzZSBiKSkgLT4gKGEgLT4gUHJvbWlzZSB6KVxuICAgICAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IGZ1bmN0aW9uc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBzZWUgUi5waXBlUFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vICBmb2xsb3dlcnNGb3JVc2VyIDo6IFN0cmluZyAtPiBQcm9taXNlIFtVc2VyXVxuICAgICAqICAgICAgdmFyIGZvbGxvd2Vyc0ZvclVzZXIgPSBSLmNvbXBvc2VQKGRiLmdldEZvbGxvd2VycywgZGIuZ2V0VXNlckJ5SWQpO1xuICAgICAqL1xuICAgIHZhciBjb21wb3NlUCA9IGZ1bmN0aW9uIGNvbXBvc2VQKCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb21wb3NlUCByZXF1aXJlcyBhdCBsZWFzdCBvbmUgYXJndW1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZVAuYXBwbHkodGhpcywgcmV2ZXJzZShhcmd1bWVudHMpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogV3JhcHMgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBpbnNpZGUgYSBjdXJyaWVkIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZFxuICAgICAqIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFuZCByZXR1cm5zIHRoZSBzYW1lIHR5cGUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCogLT4geyp9KSAtPiAoKiAtPiB7Kn0pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gRm4gVGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIHdyYXAuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgd3JhcHBlZCwgY3VycmllZCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyBDb25zdHJ1Y3RvciBmdW5jdGlvblxuICAgICAqICAgICAgdmFyIFdpZGdldCA9IGNvbmZpZyA9PiB7XG4gICAgICogICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIFdpZGdldC5wcm90b3R5cGUgPSB7XG4gICAgICogICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIHZhciBhbGxDb25maWdzID0gW1xuICAgICAqICAgICAgICAvLyAuLi5cbiAgICAgKiAgICAgIF07XG4gICAgICogICAgICBSLm1hcChSLmNvbnN0cnVjdChXaWRnZXQpLCBhbGxDb25maWdzKTsgLy8gYSBsaXN0IG9mIFdpZGdldHNcbiAgICAgKi9cbiAgICB2YXIgY29uc3RydWN0ID0gX2N1cnJ5MShmdW5jdGlvbiBjb25zdHJ1Y3QoRm4pIHtcbiAgICAgICAgcmV0dXJuIGNvbnN0cnVjdE4oRm4ubGVuZ3RoLCBGbik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3BlY2lmaWVkIHZhbHVlIGlzIGVxdWFsLCBpbiBgUi5lcXVhbHNgIHRlcm1zLCB0byBhdFxuICAgICAqIGxlYXN0IG9uZSBlbGVtZW50IG9mIHRoZSBnaXZlbiBsaXN0OyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGEgLT4gW2FdIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgaXRlbSB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBpdGVtIGlzIGluIHRoZSBsaXN0LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAc2VlIFIuYW55XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5jb250YWlucygzLCBbMSwgMiwgM10pOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuY29udGFpbnMoNCwgWzEsIDIsIDNdKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5jb250YWlucyhbNDJdLCBbWzQyXV0pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgY29udGFpbnMgPSBfY3VycnkyKF9jb250YWlucyk7XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgc2V0IChpLmUuIG5vIGR1cGxpY2F0ZXMpIG9mIGFsbCBlbGVtZW50cyBpbiB0aGUgZmlyc3QgbGlzdCBub3RcbiAgICAgKiBjb250YWluZWQgaW4gdGhlIHNlY29uZCBsaXN0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIFsqXSAtPiBbKl0gLT4gWypdXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDEgVGhlIGZpcnN0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDIgVGhlIHNlY29uZCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgZWxlbWVudHMgaW4gYGxpc3QxYCB0aGF0IGFyZSBub3QgaW4gYGxpc3QyYC5cbiAgICAgKiBAc2VlIFIuZGlmZmVyZW5jZVdpdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmRpZmZlcmVuY2UoWzEsMiwzLDRdLCBbNyw2LDUsNCwzXSk7IC8vPT4gWzEsMl1cbiAgICAgKiAgICAgIFIuZGlmZmVyZW5jZShbNyw2LDUsNCwzXSwgWzEsMiwzLDRdKTsgLy89PiBbNyw2LDVdXG4gICAgICovXG4gICAgdmFyIGRpZmZlcmVuY2UgPSBfY3VycnkyKGZ1bmN0aW9uIGRpZmZlcmVuY2UoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgZmlyc3RMZW4gPSBmaXJzdC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpZHggPCBmaXJzdExlbikge1xuICAgICAgICAgICAgaWYgKCFfY29udGFpbnMoZmlyc3RbaWR4XSwgc2Vjb25kKSAmJiAhX2NvbnRhaW5zKGZpcnN0W2lkeF0sIG91dCkpIHtcbiAgICAgICAgICAgICAgICBvdXRbb3V0Lmxlbmd0aF0gPSBmaXJzdFtpZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCB3aXRob3V0IGFueSBjb25zZWN1dGl2ZWx5IHJlcGVhdGluZyBlbGVtZW50cy4gYFIuZXF1YWxzYFxuICAgICAqIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGVxdWFsaXR5LlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGRyb3BSZXBlYXRzYCBtZXRob2Qgb2YgdGhlIGZpcnN0IGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNC4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gYGxpc3RgIHdpdGhvdXQgcmVwZWF0aW5nIGVsZW1lbnRzLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgIFIuZHJvcFJlcGVhdHMoWzEsIDEsIDEsIDIsIDMsIDQsIDQsIDIsIDJdKTsgLy89PiBbMSwgMiwgMywgNCwgMl1cbiAgICAgKi9cbiAgICB2YXIgZHJvcFJlcGVhdHMgPSBfY3VycnkxKF9kaXNwYXRjaGFibGUoJ2Ryb3BSZXBlYXRzJywgX3hkcm9wUmVwZWF0c1dpdGgoZXF1YWxzKSwgZHJvcFJlcGVhdHNXaXRoKGVxdWFscykpKTtcblxuICAgIC8qKlxuICAgICAqIFwibGlmdHNcIiBhIGZ1bmN0aW9uIG9mIGFyaXR5ID4gMSBzbyB0aGF0IGl0IG1heSBcIm1hcCBvdmVyXCIgYSBsaXN0LCBGdW5jdGlvbiBvciBvdGhlclxuICAgICAqIG9iamVjdCB0aGF0IHNhdGlzZmllcyB0aGUgW0ZhbnRhc3lMYW5kIEFwcGx5IHNwZWNdKGh0dHBzOi8vZ2l0aHViLmNvbS9mYW50YXN5bGFuZC9mYW50YXN5LWxhbmQjYXBwbHkpLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC43LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgqLi4uIC0+ICopIC0+IChbKl0uLi4gLT4gWypdKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBsaWZ0IGludG8gaGlnaGVyIGNvbnRleHRcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGxpZnRlZCBmdW5jdGlvbi5cbiAgICAgKiBAc2VlIFIubGlmdE5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbWFkZDMgPSBSLmxpZnQoUi5jdXJyeSgoYSwgYiwgYykgPT4gYSArIGIgKyBjKSk7XG4gICAgICpcbiAgICAgKiAgICAgIG1hZGQzKFsxLDIsM10sIFsxLDIsM10sIFsxXSk7IC8vPT4gWzMsIDQsIDUsIDQsIDUsIDYsIDUsIDYsIDddXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtYWRkNSA9IFIubGlmdChSLmN1cnJ5KChhLCBiLCBjLCBkLCBlKSA9PiBhICsgYiArIGMgKyBkICsgZSkpO1xuICAgICAqXG4gICAgICogICAgICBtYWRkNShbMSwyXSwgWzNdLCBbNCwgNV0sIFs2XSwgWzcsIDhdKTsgLy89PiBbMjEsIDIyLCAyMiwgMjMsIDIyLCAyMywgMjMsIDI0XVxuICAgICAqL1xuICAgIHZhciBsaWZ0ID0gX2N1cnJ5MShmdW5jdGlvbiBsaWZ0KGZuKSB7XG4gICAgICAgIHJldHVybiBsaWZ0Tihmbi5sZW5ndGgsIGZuKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwYXJ0aWFsIGNvcHkgb2YgYW4gb2JqZWN0IG9taXR0aW5nIHRoZSBrZXlzIHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgW1N0cmluZ10gLT4ge1N0cmluZzogKn0gLT4ge1N0cmluZzogKn1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBuYW1lcyBhbiBhcnJheSBvZiBTdHJpbmcgcHJvcGVydHkgbmFtZXMgdG8gb21pdCBmcm9tIHRoZSBuZXcgb2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGNvcHkgZnJvbVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQSBuZXcgb2JqZWN0IHdpdGggcHJvcGVydGllcyBmcm9tIGBuYW1lc2Agbm90IG9uIGl0LlxuICAgICAqIEBzZWUgUi5waWNrXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5vbWl0KFsnYScsICdkJ10sIHthOiAxLCBiOiAyLCBjOiAzLCBkOiA0fSk7IC8vPT4ge2I6IDIsIGM6IDN9XG4gICAgICovXG4gICAgdmFyIG9taXQgPSBfY3VycnkyKGZ1bmN0aW9uIG9taXQobmFtZXMsIG9iaikge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAoIV9jb250YWlucyhwcm9wLCBuYW1lcykpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxlZnQtdG8tcmlnaHQgS2xlaXNsaSBjb21wb3NpdGlvbiBvZiB0aGUgcHJvdmlkZWQgZnVuY3Rpb25zLFxuICAgICAqIGVhY2ggb2Ygd2hpY2ggbXVzdCByZXR1cm4gYSB2YWx1ZSBvZiBhIHR5cGUgc3VwcG9ydGVkIGJ5IFtgY2hhaW5gXSgjY2hhaW4pLlxuICAgICAqXG4gICAgICogYFIucGlwZUsoZiwgZywgaClgIGlzIGVxdWl2YWxlbnQgdG8gYFIucGlwZShSLmNoYWluKGYpLCBSLmNoYWluKGcpLCBSLmNoYWluKGgpKWAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE2LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIENoYWluIG0gPT4gKChhIC0+IG0gYiksIChiIC0+IG0gYyksIC4uLiwgKHkgLT4gbSB6KSkgLT4gKG0gYSAtPiBtIHopXG4gICAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn1cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIuY29tcG9zZUtcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyAgcGFyc2VKc29uIDo6IFN0cmluZyAtPiBNYXliZSAqXG4gICAgICogICAgICAvLyAgZ2V0IDo6IFN0cmluZyAtPiBPYmplY3QgLT4gTWF5YmUgKlxuICAgICAqXG4gICAgICogICAgICAvLyAgZ2V0U3RhdGVDb2RlIDo6IE1heWJlIFN0cmluZyAtPiBNYXliZSBTdHJpbmdcbiAgICAgKiAgICAgIHZhciBnZXRTdGF0ZUNvZGUgPSBSLnBpcGVLKFxuICAgICAqICAgICAgICBwYXJzZUpzb24sXG4gICAgICogICAgICAgIGdldCgndXNlcicpLFxuICAgICAqICAgICAgICBnZXQoJ2FkZHJlc3MnKSxcbiAgICAgKiAgICAgICAgZ2V0KCdzdGF0ZScpLFxuICAgICAqICAgICAgICBSLmNvbXBvc2UoTWF5YmUub2YsIFIudG9VcHBlcilcbiAgICAgKiAgICAgICk7XG4gICAgICpcbiAgICAgKiAgICAgIGdldFN0YXRlQ29kZShNYXliZS5vZigne1widXNlclwiOntcImFkZHJlc3NcIjp7XCJzdGF0ZVwiOlwibnlcIn19fScpKTtcbiAgICAgKiAgICAgIC8vPT4gSnVzdCgnTlknKVxuICAgICAqICAgICAgZ2V0U3RhdGVDb2RlKE1heWJlLm9mKCdbSW52YWxpZCBKU09OXScpKTtcbiAgICAgKiAgICAgIC8vPT4gTm90aGluZygpXG4gICAgICovXG4gICAgdmFyIHBpcGVLID0gZnVuY3Rpb24gcGlwZUsoKSB7XG4gICAgICAgIHJldHVybiBjb21wb3NlSy5hcHBseSh0aGlzLCByZXZlcnNlKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHZhbHVlLiBgZXZhbGAnaW5nIHRoZSBvdXRwdXRcbiAgICAgKiBzaG91bGQgcmVzdWx0IGluIGEgdmFsdWUgZXF1aXZhbGVudCB0byB0aGUgaW5wdXQgdmFsdWUuIE1hbnkgb2YgdGhlIGJ1aWx0LWluXG4gICAgICogYHRvU3RyaW5nYCBtZXRob2RzIGRvIG5vdCBzYXRpc2Z5IHRoaXMgcmVxdWlyZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYW4gYFtvYmplY3QgT2JqZWN0XWAgd2l0aCBhIGB0b1N0cmluZ2AgbWV0aG9kIG90aGVyXG4gICAgICogdGhhbiBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AsIHRoaXMgbWV0aG9kIGlzIGludm9rZWQgd2l0aCBubyBhcmd1bWVudHNcbiAgICAgKiB0byBwcm9kdWNlIHRoZSByZXR1cm4gdmFsdWUuIFRoaXMgbWVhbnMgdXNlci1kZWZpbmVkIGNvbnN0cnVjdG9yIGZ1bmN0aW9uc1xuICAgICAqIGNhbiBwcm92aWRlIGEgc3VpdGFibGUgYHRvU3RyaW5nYCBtZXRob2QuIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogICAgIGZ1bmN0aW9uIFBvaW50KHgsIHkpIHtcbiAgICAgKiAgICAgICB0aGlzLnggPSB4O1xuICAgICAqICAgICAgIHRoaXMueSA9IHk7XG4gICAgICogICAgIH1cbiAgICAgKlxuICAgICAqICAgICBQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICByZXR1cm4gJ25ldyBQb2ludCgnICsgdGhpcy54ICsgJywgJyArIHRoaXMueSArICcpJztcbiAgICAgKiAgICAgfTtcbiAgICAgKlxuICAgICAqICAgICBSLnRvU3RyaW5nKG5ldyBQb2ludCgxLCAyKSk7IC8vPT4gJ25ldyBQb2ludCgxLCAyKSdcbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAc2lnICogLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWxcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50b1N0cmluZyg0Mik7IC8vPT4gJzQyJ1xuICAgICAqICAgICAgUi50b1N0cmluZygnYWJjJyk7IC8vPT4gJ1wiYWJjXCInXG4gICAgICogICAgICBSLnRvU3RyaW5nKFsxLCAyLCAzXSk7IC8vPT4gJ1sxLCAyLCAzXSdcbiAgICAgKiAgICAgIFIudG9TdHJpbmcoe2ZvbzogMSwgYmFyOiAyLCBiYXo6IDN9KTsgLy89PiAne1wiYmFyXCI6IDIsIFwiYmF6XCI6IDMsIFwiZm9vXCI6IDF9J1xuICAgICAqICAgICAgUi50b1N0cmluZyhuZXcgRGF0ZSgnMjAwMS0wMi0wM1QwNDowNTowNlonKSk7IC8vPT4gJ25ldyBEYXRlKFwiMjAwMS0wMi0wM1QwNDowNTowNi4wMDBaXCIpJ1xuICAgICAqL1xuICAgIHZhciB0b1N0cmluZyA9IF9jdXJyeTEoZnVuY3Rpb24gdG9TdHJpbmcodmFsKSB7XG4gICAgICAgIHJldHVybiBfdG9TdHJpbmcodmFsLCBbXSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3Qgd2l0aG91dCB2YWx1ZXMgaW4gdGhlIGZpcnN0IGFyZ3VtZW50LlxuICAgICAqIGBSLmVxdWFsc2AgaXMgdXNlZCB0byBkZXRlcm1pbmUgZXF1YWxpdHkuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MSBUaGUgdmFsdWVzIHRvIGJlIHJlbW92ZWQgZnJvbSBgbGlzdDJgLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBhcnJheSB0byByZW1vdmUgdmFsdWVzIGZyb20uXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBuZXcgYXJyYXkgd2l0aG91dCB2YWx1ZXMgaW4gYGxpc3QxYC5cbiAgICAgKiBAc2VlIFIudHJhbnNkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi53aXRob3V0KFsxLCAyXSwgWzEsIDIsIDEsIDMsIDRdKTsgLy89PiBbMywgNF1cbiAgICAgKi9cbiAgICB2YXIgd2l0aG91dCA9IF9jdXJyeTIoZnVuY3Rpb24gKHhzLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiByZWplY3QoZmxpcChfY29udGFpbnMpKHhzKSwgbGlzdCk7XG4gICAgfSk7XG5cbiAgICAvLyBBIHNpbXBsZSBTZXQgdHlwZSB0aGF0IGhvbm91cnMgUi5lcXVhbHMgc2VtYW50aWNzXG4gICAgLyogZ2xvYmFscyBTZXQgKi9cbiAgICAvKipcbiAgICAgICAqIENvbWJpbmVzIHRoZSBsb2dpYyBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBpdGVtIGlzIGEgbWVtYmVyIG9mIHRoZSBzZXQgYW5kXG4gICAgICAgKiBmb3IgYWRkaW5nIGEgbmV3IGl0ZW0gdG8gdGhlIHNldC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gaXRlbSAgICAgICBUaGUgaXRlbSB0byBjaGVjayBvciBhZGQgdG8gdGhlIFNldCBpbnN0YW5jZS5cbiAgICAgICAqIEBwYXJhbSBzaG91bGRBZGQgIElmIHRydWUsIHRoZSBpdGVtIHdpbGwgYmUgYWRkZWQgdG8gdGhlIHNldCBpZiBpdCBkb2Vzbid0XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICBhbHJlYWR5IGV4aXN0LlxuICAgICAgICogQHBhcmFtIHNldCAgICAgICAgVGhlIHNldCBpbnN0YW5jZSB0byBjaGVjayBvciBhZGQgdG8uXG4gICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGVuIHNob3VsZEFkZCBpcyB0cnVlLCB0aGlzIHdpbGwgcmV0dXJuIHRydWUgd2hlbiBhIG5ld1xuICAgICAgICogICAgICAgICAgICAgICAgICAgaXRlbSB3YXMgYWRkZWQgb3RoZXJ3aXNlIGZhbHNlLiBXaGVuIHNob3VsZEFkZCBpcyBmYWxzZSxcbiAgICAgICAqICAgICAgICAgICAgICAgICAgIHRoaXMgd2lsbCByZXR1cm4gdHJ1ZSBpZiB0aGUgaXRlbSBhbHJlYWR5IGV4aXN0cywgb3RoZXJ3aXNlXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICBmYWxzZS5cbiAgICAgICAqL1xuICAgIC8vIGRpc3Rpbmd1aXNoIGJldHdlZW4gKzAgYW5kIC0wXG4gICAgLy8gdGhlc2UgdHlwZXMgY2FuIGFsbCB1dGlsaXNlIFNldFxuICAgIC8vIHNldC5faXRlbXNbJ2Jvb2xlYW4nXSBob2xkcyBhIHR3byBlbGVtZW50IGFycmF5XG4gICAgLy8gcmVwcmVzZW50aW5nIFsgZmFsc2VFeGlzdHMsIHRydWVFeGlzdHMgXVxuICAgIC8vIGNvbXBhcmUgZnVuY3Rpb25zIGZvciByZWZlcmVuY2UgZXF1YWxpdHlcbiAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgLy8gcmVkdWNlIHRoZSBzZWFyY2ggc2l6ZSBvZiBoZXRlcm9nZW5lb3VzIHNldHMgYnkgY3JlYXRpbmcgYnVja2V0c1xuICAgIC8vIGZvciBlYWNoIHR5cGUuXG4gICAgLy8gc2NhbiB0aHJvdWdoIGFsbCBwcmV2aW91c2x5IGFwcGxpZWQgaXRlbXNcbiAgICB2YXIgX1NldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gX1NldCgpIHtcbiAgICAgICAgICAgIC8qIGdsb2JhbHMgU2V0ICovXG4gICAgICAgICAgICB0aGlzLl9uYXRpdmVTZXQgPSB0eXBlb2YgU2V0ID09PSAnZnVuY3Rpb24nID8gbmV3IFNldCgpIDogbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBoYXNPckFkZChpdGVtLCB0cnVlLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgX1NldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBoYXNPckFkZChpdGVtLCBmYWxzZSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICogQ29tYmluZXMgdGhlIGxvZ2ljIGZvciBjaGVja2luZyB3aGV0aGVyIGFuIGl0ZW0gaXMgYSBtZW1iZXIgb2YgdGhlIHNldCBhbmRcbiAgICAgICAqIGZvciBhZGRpbmcgYSBuZXcgaXRlbSB0byB0aGUgc2V0LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSBpdGVtICAgICAgIFRoZSBpdGVtIHRvIGNoZWNrIG9yIGFkZCB0byB0aGUgU2V0IGluc3RhbmNlLlxuICAgICAgICogQHBhcmFtIHNob3VsZEFkZCAgSWYgdHJ1ZSwgdGhlIGl0ZW0gd2lsbCBiZSBhZGRlZCB0byB0aGUgc2V0IGlmIGl0IGRvZXNuJ3RcbiAgICAgICAqICAgICAgICAgICAgICAgICAgIGFscmVhZHkgZXhpc3QuXG4gICAgICAgKiBAcGFyYW0gc2V0ICAgICAgICBUaGUgc2V0IGluc3RhbmNlIHRvIGNoZWNrIG9yIGFkZCB0by5cbiAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZW4gc2hvdWxkQWRkIGlzIHRydWUsIHRoaXMgd2lsbCByZXR1cm4gdHJ1ZSB3aGVuIGEgbmV3XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICBpdGVtIHdhcyBhZGRlZCBvdGhlcndpc2UgZmFsc2UuIFdoZW4gc2hvdWxkQWRkIGlzIGZhbHNlLFxuICAgICAgICogICAgICAgICAgICAgICAgICAgdGhpcyB3aWxsIHJldHVybiB0cnVlIGlmIHRoZSBpdGVtIGFscmVhZHkgZXhpc3RzLCBvdGhlcndpc2VcbiAgICAgICAqICAgICAgICAgICAgICAgICAgIGZhbHNlLlxuICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGhhc09yQWRkKGl0ZW0sIHNob3VsZEFkZCwgc2V0KSB7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiBpdGVtO1xuICAgICAgICAgICAgdmFyIHByZXZTaXplLCBuZXdTaXplO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAvLyBkaXN0aW5ndWlzaCBiZXR3ZWVuICswIGFuZCAtMFxuICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSAwICYmICFzZXQuX2l0ZW1zWyctMCddICYmIDEgLyBpdGVtID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1snLTAnXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdGhlc2UgdHlwZXMgY2FuIGFsbCB1dGlsaXNlIFNldFxuICAgICAgICAgICAgICAgIGlmIChzZXQuX25hdGl2ZVNldCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2U2l6ZSA9IHNldC5fbmF0aXZlU2V0LnNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQuX25hdGl2ZVNldC5hZGQoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTaXplID0gc2V0Ll9uYXRpdmVTZXQuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdTaXplID4gcHJldlNpemU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0Ll9uYXRpdmVTZXQuaGFzKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZSBpbiBzZXQuX2l0ZW1zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zW3R5cGVdW2l0ZW1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbSBpbiBzZXQuX2l0ZW1zW3R5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zW3R5cGVdW2l0ZW1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgICAgICAvLyBzZXQuX2l0ZW1zWydib29sZWFuJ10gaG9sZHMgYSB0d28gZWxlbWVudCBhcnJheVxuICAgICAgICAgICAgICAgIC8vIHJlcHJlc2VudGluZyBbIGZhbHNlRXhpc3RzLCB0cnVlRXhpc3RzIF1cbiAgICAgICAgICAgICAgICBpZiAodHlwZSBpbiBzZXQuX2l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiSWR4ID0gaXRlbSA/IDEgOiAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0Ll9pdGVtc1t0eXBlXVtiSWR4XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1t0eXBlXVtiSWR4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1t0eXBlXSA9IGl0ZW0gPyBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgXSA6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgICAgICAgIC8vIGNvbXBhcmUgZnVuY3Rpb25zIGZvciByZWZlcmVuY2UgZXF1YWxpdHlcbiAgICAgICAgICAgICAgICBpZiAoc2V0Ll9uYXRpdmVTZXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNpemUgPSBzZXQuX25hdGl2ZVNldC5zaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9uYXRpdmVTZXQuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2l6ZSA9IHNldC5fbmF0aXZlU2V0LnNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3U2l6ZSA+IHByZXZTaXplO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldC5fbmF0aXZlU2V0LmhhcyhpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHR5cGUgaW4gc2V0Ll9pdGVtcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zW3R5cGVdID0gW2l0ZW1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIV9jb250YWlucyhpdGVtLCBzZXQuX2l0ZW1zW3R5cGVdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV0ucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICFzaG91bGRBZGQ7XG4gICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGlmIChzZXQuX2l0ZW1zW3R5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNldC5faXRlbXNbJ251bGwnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbJ251bGwnXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gcmVkdWNlIHRoZSBzZWFyY2ggc2l6ZSBvZiBoZXRlcm9nZW5lb3VzIHNldHMgYnkgY3JlYXRpbmcgYnVja2V0c1xuICAgICAgICAgICAgICAgIC8vIGZvciBlYWNoIHR5cGUuXG4gICAgICAgICAgICAgICAgdHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoISh0eXBlIGluIHNldC5faXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV0gPSBbaXRlbV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gc2NhbiB0aHJvdWdoIGFsbCBwcmV2aW91c2x5IGFwcGxpZWQgaXRlbXNcbiAgICAgICAgICAgICAgICBpZiAoIV9jb250YWlucyhpdGVtLCBzZXQuX2l0ZW1zW3R5cGVdKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zW3R5cGVdLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICFzaG91bGRBZGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9TZXQ7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB3cmFwcGluZyBjYWxscyB0byB0aGUgdHdvIGZ1bmN0aW9ucyBpbiBhbiBgJiZgIG9wZXJhdGlvbixcbiAgICAgKiByZXR1cm5pbmcgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QgZnVuY3Rpb24gaWYgaXQgaXMgZmFsc2UteSBhbmQgdGhlIHJlc3VsdFxuICAgICAqIG9mIHRoZSBzZWNvbmQgZnVuY3Rpb24gb3RoZXJ3aXNlLiBOb3RlIHRoYXQgdGhpcyBpcyBzaG9ydC1jaXJjdWl0ZWQsXG4gICAgICogbWVhbmluZyB0aGF0IHRoZSBzZWNvbmQgZnVuY3Rpb24gd2lsbCBub3QgYmUgaW52b2tlZCBpZiB0aGUgZmlyc3QgcmV0dXJucyBhXG4gICAgICogZmFsc2UteSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEluIGFkZGl0aW9uIHRvIGZ1bmN0aW9ucywgYFIuYm90aGAgYWxzbyBhY2NlcHRzIGFueSBmYW50YXN5LWxhbmQgY29tcGF0aWJsZVxuICAgICAqIGFwcGxpY2F0aXZlIGZ1bmN0b3IuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnICgqLi4uIC0+IEJvb2xlYW4pIC0+ICgqLi4uIC0+IEJvb2xlYW4pIC0+ICgqLi4uIC0+IEJvb2xlYW4pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZiBhIHByZWRpY2F0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGcgYW5vdGhlciBwcmVkaWNhdGVcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgaXRzIGFyZ3VtZW50cyB0byBgZmAgYW5kIGBnYCBhbmQgYCYmYHMgdGhlaXIgb3V0cHV0cyB0b2dldGhlci5cbiAgICAgKiBAc2VlIFIuYW5kXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGd0MTAgPSB4ID0+IHggPiAxMDtcbiAgICAgKiAgICAgIHZhciBldmVuID0geCA9PiB4ICUgMiA9PT0gMDtcbiAgICAgKiAgICAgIHZhciBmID0gUi5ib3RoKGd0MTAsIGV2ZW4pO1xuICAgICAqICAgICAgZigxMDApOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIGYoMTAxKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBib3RoID0gX2N1cnJ5MihmdW5jdGlvbiBib3RoKGYsIGcpIHtcbiAgICAgICAgcmV0dXJuIF9pc0Z1bmN0aW9uKGYpID8gZnVuY3Rpb24gX2JvdGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpICYmIGcuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSA6IGxpZnQoYW5kKShmLCBnKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgZnVuY3Rpb24gYGZgIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gYGdgIHN1Y2ggdGhhdDpcbiAgICAgKlxuICAgICAqICAgLSBhcHBseWluZyBgZ2AgdG8gemVybyBvciBtb3JlIGFyZ3VtZW50cyB3aWxsIGdpdmUgX190cnVlX18gaWYgYXBwbHlpbmdcbiAgICAgKiAgICAgdGhlIHNhbWUgYXJndW1lbnRzIHRvIGBmYCBnaXZlcyBhIGxvZ2ljYWwgX19mYWxzZV9fIHZhbHVlOyBhbmRcbiAgICAgKlxuICAgICAqICAgLSBhcHBseWluZyBgZ2AgdG8gemVybyBvciBtb3JlIGFyZ3VtZW50cyB3aWxsIGdpdmUgX19mYWxzZV9fIGlmIGFwcGx5aW5nXG4gICAgICogICAgIHRoZSBzYW1lIGFyZ3VtZW50cyB0byBgZmAgZ2l2ZXMgYSBsb2dpY2FsIF9fdHJ1ZV9fIHZhbHVlLlxuICAgICAqXG4gICAgICogYFIuY29tcGxlbWVudGAgd2lsbCB3b3JrIG9uIGFsbCBvdGhlciBmdW5jdG9ycyBhcyB3ZWxsLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMi4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyAoKi4uLiAtPiAqKSAtPiAoKi4uLiAtPiBCb29sZWFuKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIubm90XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGlzRXZlbiA9IG4gPT4gbiAlIDIgPT09IDA7XG4gICAgICogICAgICB2YXIgaXNPZGQgPSBSLmNvbXBsZW1lbnQoaXNFdmVuKTtcbiAgICAgKiAgICAgIGlzT2RkKDIxKTsgLy89PiB0cnVlXG4gICAgICogICAgICBpc09kZCg0Mik7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgY29tcGxlbWVudCA9IGxpZnQobm90KTtcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gd3JhcHBpbmcgY2FsbHMgdG8gdGhlIHR3byBmdW5jdGlvbnMgaW4gYW4gYHx8YCBvcGVyYXRpb24sXG4gICAgICogcmV0dXJuaW5nIHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0IGZ1bmN0aW9uIGlmIGl0IGlzIHRydXRoLXkgYW5kIHRoZSByZXN1bHRcbiAgICAgKiBvZiB0aGUgc2Vjb25kIGZ1bmN0aW9uIG90aGVyd2lzZS4gTm90ZSB0aGF0IHRoaXMgaXMgc2hvcnQtY2lyY3VpdGVkLFxuICAgICAqIG1lYW5pbmcgdGhhdCB0aGUgc2Vjb25kIGZ1bmN0aW9uIHdpbGwgbm90IGJlIGludm9rZWQgaWYgdGhlIGZpcnN0IHJldHVybnMgYVxuICAgICAqIHRydXRoLXkgdmFsdWUuXG4gICAgICpcbiAgICAgKiBJbiBhZGRpdGlvbiB0byBmdW5jdGlvbnMsIGBSLmVpdGhlcmAgYWxzbyBhY2NlcHRzIGFueSBmYW50YXN5LWxhbmQgY29tcGF0aWJsZVxuICAgICAqIGFwcGxpY2F0aXZlIGZ1bmN0b3IuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnICgqLi4uIC0+IEJvb2xlYW4pIC0+ICgqLi4uIC0+IEJvb2xlYW4pIC0+ICgqLi4uIC0+IEJvb2xlYW4pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZiBhIHByZWRpY2F0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGcgYW5vdGhlciBwcmVkaWNhdGVcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgaXRzIGFyZ3VtZW50cyB0byBgZmAgYW5kIGBnYCBhbmQgYHx8YHMgdGhlaXIgb3V0cHV0cyB0b2dldGhlci5cbiAgICAgKiBAc2VlIFIub3JcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZ3QxMCA9IHggPT4geCA+IDEwO1xuICAgICAqICAgICAgdmFyIGV2ZW4gPSB4ID0+IHggJSAyID09PSAwO1xuICAgICAqICAgICAgdmFyIGYgPSBSLmVpdGhlcihndDEwLCBldmVuKTtcbiAgICAgKiAgICAgIGYoMTAxKTsgLy89PiB0cnVlXG4gICAgICogICAgICBmKDgpOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgZWl0aGVyID0gX2N1cnJ5MihmdW5jdGlvbiBlaXRoZXIoZiwgZykge1xuICAgICAgICByZXR1cm4gX2lzRnVuY3Rpb24oZikgPyBmdW5jdGlvbiBfZWl0aGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCBnLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gOiBsaWZ0KG9yKShmLCBnKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFR1cm5zIGEgbmFtZWQgbWV0aG9kIHdpdGggYSBzcGVjaWZpZWQgYXJpdHkgaW50byBhIGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gICAgICogY2FsbGVkIGRpcmVjdGx5IHN1cHBsaWVkIHdpdGggYXJndW1lbnRzIGFuZCBhIHRhcmdldCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBUaGUgcmV0dXJuZWQgZnVuY3Rpb24gaXMgY3VycmllZCBhbmQgYWNjZXB0cyBgYXJpdHkgKyAxYCBwYXJhbWV0ZXJzIHdoZXJlXG4gICAgICogdGhlIGZpbmFsIHBhcmFtZXRlciBpcyB0aGUgdGFyZ2V0IG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBOdW1iZXIgLT4gU3RyaW5nIC0+IChhIC0+IGIgLT4gLi4uIC0+IG4gLT4gT2JqZWN0IC0+ICopXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGFyaXR5IE51bWJlciBvZiBhcmd1bWVudHMgdGhlIHJldHVybmVkIGZ1bmN0aW9uIHNob3VsZCB0YWtlXG4gICAgICogICAgICAgIGJlZm9yZSB0aGUgdGFyZ2V0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIE5hbWUgb2YgdGhlIG1ldGhvZCB0byBjYWxsLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBzbGljZUZyb20gPSBSLmludm9rZXIoMSwgJ3NsaWNlJyk7XG4gICAgICogICAgICBzbGljZUZyb20oNiwgJ2FiY2RlZmdoaWprbG0nKTsgLy89PiAnZ2hpamtsbSdcbiAgICAgKiAgICAgIHZhciBzbGljZUZyb202ID0gUi5pbnZva2VyKDIsICdzbGljZScpKDYpO1xuICAgICAqICAgICAgc2xpY2VGcm9tNig4LCAnYWJjZGVmZ2hpamtsbScpOyAvLz0+ICdnaCdcbiAgICAgKi9cbiAgICB2YXIgaW52b2tlciA9IF9jdXJyeTIoZnVuY3Rpb24gaW52b2tlcihhcml0eSwgbWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBjdXJyeU4oYXJpdHkgKyAxLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gYXJndW1lbnRzW2FyaXR5XTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgIT0gbnVsbCAmJiBpcyhGdW5jdGlvbiwgdGFyZ2V0W21ldGhvZF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFttZXRob2RdLmFwcGx5KHRhcmdldCwgX3NsaWNlKGFyZ3VtZW50cywgMCwgYXJpdHkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IodG9TdHJpbmcodGFyZ2V0KSArICcgZG9lcyBub3QgaGF2ZSBhIG1ldGhvZCBuYW1lZCBcIicgKyBtZXRob2QgKyAnXCInKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIG1hZGUgYnkgaW5zZXJ0aW5nIHRoZSBgc2VwYXJhdG9yYCBiZXR3ZWVuIGVhY2ggZWxlbWVudCBhbmRcbiAgICAgKiBjb25jYXRlbmF0aW5nIGFsbCB0aGUgZWxlbWVudHMgaW50byBhIHNpbmdsZSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBTdHJpbmcgLT4gW2FdIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gc2VwYXJhdG9yIFRoZSBzdHJpbmcgdXNlZCB0byBzZXBhcmF0ZSB0aGUgZWxlbWVudHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0geHMgVGhlIGVsZW1lbnRzIHRvIGpvaW4gaW50byBhIHN0cmluZy5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIG1hZGUgYnkgY29uY2F0ZW5hdGluZyBgeHNgIHdpdGggYHNlcGFyYXRvcmAuXG4gICAgICogQHNlZSBSLnNwbGl0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHNwYWNlciA9IFIuam9pbignICcpO1xuICAgICAqICAgICAgc3BhY2VyKFsnYScsIDIsIDMuNF0pOyAgIC8vPT4gJ2EgMiAzLjQnXG4gICAgICogICAgICBSLmpvaW4oJ3wnLCBbMSwgMiwgM10pOyAgICAvLz0+ICcxfDJ8MydcbiAgICAgKi9cbiAgICB2YXIgam9pbiA9IGludm9rZXIoMSwgJ2pvaW4nKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZnVuY3Rpb24gdGhhdCwgd2hlbiBpbnZva2VkLCBjYWNoZXMgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGBmbmBcbiAgICAgKiBmb3IgYSBnaXZlbiBhcmd1bWVudCBzZXQgYW5kIHJldHVybnMgdGhlIHJlc3VsdC4gU3Vic2VxdWVudCBjYWxscyB0byB0aGVcbiAgICAgKiBtZW1vaXplZCBgZm5gIHdpdGggdGhlIHNhbWUgYXJndW1lbnQgc2V0IHdpbGwgbm90IHJlc3VsdCBpbiBhbiBhZGRpdGlvbmFsXG4gICAgICogY2FsbCB0byBgZm5gOyBpbnN0ZWFkLCB0aGUgY2FjaGVkIHJlc3VsdCBmb3IgdGhhdCBzZXQgb2YgYXJndW1lbnRzIHdpbGwgYmVcbiAgICAgKiByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKi4uLiAtPiBhKSAtPiAoKi4uLiAtPiBhKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtZW1vaXplLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBNZW1vaXplZCB2ZXJzaW9uIG9mIGBmbmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgKiAgICAgIHZhciBmYWN0b3JpYWwgPSBSLm1lbW9pemUobiA9PiB7XG4gICAgICogICAgICAgIGNvdW50ICs9IDE7XG4gICAgICogICAgICAgIHJldHVybiBSLnByb2R1Y3QoUi5yYW5nZSgxLCBuICsgMSkpO1xuICAgICAqICAgICAgfSk7XG4gICAgICogICAgICBmYWN0b3JpYWwoNSk7IC8vPT4gMTIwXG4gICAgICogICAgICBmYWN0b3JpYWwoNSk7IC8vPT4gMTIwXG4gICAgICogICAgICBmYWN0b3JpYWwoNSk7IC8vPT4gMTIwXG4gICAgICogICAgICBjb3VudDsgLy89PiAxXG4gICAgICovXG4gICAgdmFyIG1lbW9pemUgPSBfY3VycnkxKGZ1bmN0aW9uIG1lbW9pemUoZm4pIHtcbiAgICAgICAgdmFyIGNhY2hlID0ge307XG4gICAgICAgIHJldHVybiBfYXJpdHkoZm4ubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gdG9TdHJpbmcoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmICghX2hhcyhrZXksIGNhY2hlKSkge1xuICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlW2tleV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGEgc3RyaW5nIGludG8gYW4gYXJyYXkgb2Ygc3RyaW5ncyBiYXNlZCBvbiB0aGUgZ2l2ZW5cbiAgICAgKiBzZXBhcmF0b3IuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAc2lnIChTdHJpbmcgfCBSZWdFeHApIC0+IFN0cmluZyAtPiBbU3RyaW5nXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gc2VwIFRoZSBwYXR0ZXJuLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBzZXBhcmF0ZSBpbnRvIGFuIGFycmF5LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgYXJyYXkgb2Ygc3RyaW5ncyBmcm9tIGBzdHJgIHNlcGFyYXRlZCBieSBgc3RyYC5cbiAgICAgKiBAc2VlIFIuam9pblxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBwYXRoQ29tcG9uZW50cyA9IFIuc3BsaXQoJy8nKTtcbiAgICAgKiAgICAgIFIudGFpbChwYXRoQ29tcG9uZW50cygnL3Vzci9sb2NhbC9iaW4vbm9kZScpKTsgLy89PiBbJ3VzcicsICdsb2NhbCcsICdiaW4nLCAnbm9kZSddXG4gICAgICpcbiAgICAgKiAgICAgIFIuc3BsaXQoJy4nLCAnYS5iLmMueHl6LmQnKTsgLy89PiBbJ2EnLCAnYicsICdjJywgJ3h5eicsICdkJ11cbiAgICAgKi9cbiAgICB2YXIgc3BsaXQgPSBpbnZva2VyKDEsICdzcGxpdCcpO1xuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gc3RyaW5nIG1hdGNoZXMgYSBnaXZlbiByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHNpZyBSZWdFeHAgLT4gU3RyaW5nIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gcGF0dGVyblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5tYXRjaFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudGVzdCgvXngvLCAneHl6Jyk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi50ZXN0KC9eeS8sICd4eXonKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciB0ZXN0ID0gX2N1cnJ5MihmdW5jdGlvbiB0ZXN0KHBhdHRlcm4sIHN0cikge1xuICAgICAgICBpZiAoIV9pc1JlZ0V4cChwYXR0ZXJuKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXFx1MjAxOHRlc3RcXHUyMDE5IHJlcXVpcmVzIGEgdmFsdWUgb2YgdHlwZSBSZWdFeHAgYXMgaXRzIGZpcnN0IGFyZ3VtZW50OyByZWNlaXZlZCAnICsgdG9TdHJpbmcocGF0dGVybikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfY2xvbmVSZWdFeHAocGF0dGVybikudGVzdChzdHIpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxvd2VyIGNhc2UgdmVyc2lvbiBvZiBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBzaWcgU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBsb3dlciBjYXNlLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGxvd2VyIGNhc2UgdmVyc2lvbiBvZiBgc3RyYC5cbiAgICAgKiBAc2VlIFIudG9VcHBlclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudG9Mb3dlcignWFlaJyk7IC8vPT4gJ3h5eidcbiAgICAgKi9cbiAgICB2YXIgdG9Mb3dlciA9IGludm9rZXIoMCwgJ3RvTG93ZXJDYXNlJyk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdXBwZXIgY2FzZSB2ZXJzaW9uIG9mIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHNpZyBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIHVwcGVyIGNhc2UuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgdXBwZXIgY2FzZSB2ZXJzaW9uIG9mIGBzdHJgLlxuICAgICAqIEBzZWUgUi50b0xvd2VyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50b1VwcGVyKCdhYmMnKTsgLy89PiAnQUJDJ1xuICAgICAqL1xuICAgIHZhciB0b1VwcGVyID0gaW52b2tlcigwLCAndG9VcHBlckNhc2UnKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIG9ubHkgb25lIGNvcHkgb2YgZWFjaCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbFxuICAgICAqIGxpc3QsIGJhc2VkIHVwb24gdGhlIHZhbHVlIHJldHVybmVkIGJ5IGFwcGx5aW5nIHRoZSBzdXBwbGllZCBmdW5jdGlvbiB0b1xuICAgICAqIGVhY2ggbGlzdCBlbGVtZW50LiBQcmVmZXJzIHRoZSBmaXJzdCBpdGVtIGlmIHRoZSBzdXBwbGllZCBmdW5jdGlvbiBwcm9kdWNlc1xuICAgICAqIHRoZSBzYW1lIHZhbHVlIG9uIHR3byBpdGVtcy4gYFIuZXF1YWxzYCBpcyB1c2VkIGZvciBjb21wYXJpc29uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IGIpIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBBIGZ1bmN0aW9uIHVzZWQgdG8gcHJvZHVjZSBhIHZhbHVlIHRvIHVzZSBkdXJpbmcgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBsaXN0IG9mIHVuaXF1ZSBpdGVtcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnVuaXFCeShNYXRoLmFicywgWy0xLCAtNSwgMiwgMTAsIDEsIDJdKTsgLy89PiBbLTEsIC01LCAyLCAxMF1cbiAgICAgKi9cbiAgICB2YXIgdW5pcUJ5ID0gX2N1cnJ5MihmdW5jdGlvbiB1bmlxQnkoZm4sIGxpc3QpIHtcbiAgICAgICAgdmFyIHNldCA9IG5ldyBfU2V0KCk7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBhcHBsaWVkSXRlbSwgaXRlbTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICBpdGVtID0gbGlzdFtpZHhdO1xuICAgICAgICAgICAgYXBwbGllZEl0ZW0gPSBmbihpdGVtKTtcbiAgICAgICAgICAgIGlmIChzZXQuYWRkKGFwcGxpZWRJdGVtKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdCBvZiBjb25jYXRlbmF0aW5nIHRoZSBnaXZlbiBsaXN0cyBvciBzdHJpbmdzLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGNvbmNhdGAgbWV0aG9kIG9mIHRoZSBmaXJzdCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHNpZyBTdHJpbmcgLT4gU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBhXG4gICAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGJcbiAgICAgKiBAcmV0dXJuIHtBcnJheXxTdHJpbmd9XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmNvbmNhdChbXSwgW10pOyAvLz0+IFtdXG4gICAgICogICAgICBSLmNvbmNhdChbNCwgNSwgNl0sIFsxLCAyLCAzXSk7IC8vPT4gWzQsIDUsIDYsIDEsIDIsIDNdXG4gICAgICogICAgICBSLmNvbmNhdCgnQUJDJywgJ0RFRicpOyAvLyAnQUJDREVGJ1xuICAgICAqL1xuICAgIHZhciBjb25jYXQgPSBmbGlwKGludm9rZXIoMSwgJ2NvbmNhdCcpKTtcblxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBzZXQgKGkuZS4gbm8gZHVwbGljYXRlcykgb2YgYWxsIGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0aGUgZmlyc3Qgb3JcbiAgICAgKiBzZWNvbmQgbGlzdCwgYnV0IG5vdCBib3RoLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBbKl0gLT4gWypdIC0+IFsqXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBzZWNvbmQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGVsZW1lbnRzIGluIGBsaXN0MWAgb3IgYGxpc3QyYCwgYnV0IG5vdCBib3RoLlxuICAgICAqIEBzZWUgUi5zeW1tZXRyaWNEaWZmZXJlbmNlV2l0aFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuc3ltbWV0cmljRGlmZmVyZW5jZShbMSwyLDMsNF0sIFs3LDYsNSw0LDNdKTsgLy89PiBbMSwyLDcsNiw1XVxuICAgICAqICAgICAgUi5zeW1tZXRyaWNEaWZmZXJlbmNlKFs3LDYsNSw0LDNdLCBbMSwyLDMsNF0pOyAvLz0+IFs3LDYsNSwxLDJdXG4gICAgICovXG4gICAgdmFyIHN5bW1ldHJpY0RpZmZlcmVuY2UgPSBfY3VycnkyKGZ1bmN0aW9uIHN5bW1ldHJpY0RpZmZlcmVuY2UobGlzdDEsIGxpc3QyKSB7XG4gICAgICAgIHJldHVybiBjb25jYXQoZGlmZmVyZW5jZShsaXN0MSwgbGlzdDIpLCBkaWZmZXJlbmNlKGxpc3QyLCBsaXN0MSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIHNldCAoaS5lLiBubyBkdXBsaWNhdGVzKSBvZiBhbGwgZWxlbWVudHMgY29udGFpbmVkIGluIHRoZSBmaXJzdCBvclxuICAgICAqIHNlY29uZCBsaXN0LCBidXQgbm90IGJvdGguIER1cGxpY2F0aW9uIGlzIGRldGVybWluZWQgYWNjb3JkaW5nIHRvIHRoZSB2YWx1ZVxuICAgICAqIHJldHVybmVkIGJ5IGFwcGx5aW5nIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgdG8gdHdvIGxpc3QgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIChhIC0+IGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIEEgcHJlZGljYXRlIHVzZWQgdG8gdGVzdCB3aGV0aGVyIHR3byBpdGVtcyBhcmUgZXF1YWwuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDEgVGhlIGZpcnN0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDIgVGhlIHNlY29uZCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgZWxlbWVudHMgaW4gYGxpc3QxYCBvciBgbGlzdDJgLCBidXQgbm90IGJvdGguXG4gICAgICogQHNlZSBSLnN5bW1ldHJpY0RpZmZlcmVuY2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZXFBID0gUi5lcUJ5KFIucHJvcCgnYScpKTtcbiAgICAgKiAgICAgIHZhciBsMSA9IFt7YTogMX0sIHthOiAyfSwge2E6IDN9LCB7YTogNH1dO1xuICAgICAqICAgICAgdmFyIGwyID0gW3thOiAzfSwge2E6IDR9LCB7YTogNX0sIHthOiA2fV07XG4gICAgICogICAgICBSLnN5bW1ldHJpY0RpZmZlcmVuY2VXaXRoKGVxQSwgbDEsIGwyKTsgLy89PiBbe2E6IDF9LCB7YTogMn0sIHthOiA1fSwge2E6IDZ9XVxuICAgICAqL1xuICAgIHZhciBzeW1tZXRyaWNEaWZmZXJlbmNlV2l0aCA9IF9jdXJyeTMoZnVuY3Rpb24gc3ltbWV0cmljRGlmZmVyZW5jZVdpdGgocHJlZCwgbGlzdDEsIGxpc3QyKSB7XG4gICAgICAgIHJldHVybiBjb25jYXQoZGlmZmVyZW5jZVdpdGgocHJlZCwgbGlzdDEsIGxpc3QyKSwgZGlmZmVyZW5jZVdpdGgocHJlZCwgbGlzdDIsIGxpc3QxKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3QgY29udGFpbmluZyBvbmx5IG9uZSBjb3B5IG9mIGVhY2ggZWxlbWVudCBpbiB0aGUgb3JpZ2luYWxcbiAgICAgKiBsaXN0LiBgUi5lcXVhbHNgIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGVxdWFsaXR5LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBvZiB1bmlxdWUgaXRlbXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi51bmlxKFsxLCAxLCAyLCAxXSk7IC8vPT4gWzEsIDJdXG4gICAgICogICAgICBSLnVuaXEoWzEsICcxJ10pOyAgICAgLy89PiBbMSwgJzEnXVxuICAgICAqICAgICAgUi51bmlxKFtbNDJdLCBbNDJdXSk7IC8vPT4gW1s0Ml1dXG4gICAgICovXG4gICAgdmFyIHVuaXEgPSB1bmlxQnkoaWRlbnRpdHkpO1xuXG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdHdvIGxpc3RzIGludG8gYSBzZXQgKGkuZS4gbm8gZHVwbGljYXRlcykgY29tcG9zZWQgb2YgdGhvc2VcbiAgICAgKiBlbGVtZW50cyBjb21tb24gdG8gYm90aCBsaXN0cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBbKl0gLT4gWypdIC0+IFsqXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBzZWNvbmQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGxpc3Qgb2YgZWxlbWVudHMgZm91bmQgaW4gYm90aCBgbGlzdDFgIGFuZCBgbGlzdDJgLlxuICAgICAqIEBzZWUgUi5pbnRlcnNlY3Rpb25XaXRoXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pbnRlcnNlY3Rpb24oWzEsMiwzLDRdLCBbNyw2LDUsNCwzXSk7IC8vPT4gWzQsIDNdXG4gICAgICovXG4gICAgdmFyIGludGVyc2VjdGlvbiA9IF9jdXJyeTIoZnVuY3Rpb24gaW50ZXJzZWN0aW9uKGxpc3QxLCBsaXN0Mikge1xuICAgICAgICB2YXIgbG9va3VwTGlzdCwgZmlsdGVyZWRMaXN0O1xuICAgICAgICBpZiAobGlzdDEubGVuZ3RoID4gbGlzdDIubGVuZ3RoKSB7XG4gICAgICAgICAgICBsb29rdXBMaXN0ID0gbGlzdDE7XG4gICAgICAgICAgICBmaWx0ZXJlZExpc3QgPSBsaXN0MjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvb2t1cExpc3QgPSBsaXN0MjtcbiAgICAgICAgICAgIGZpbHRlcmVkTGlzdCA9IGxpc3QxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmlxKF9maWx0ZXIoZmxpcChfY29udGFpbnMpKGxvb2t1cExpc3QpLCBmaWx0ZXJlZExpc3QpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbWJpbmVzIHR3byBsaXN0cyBpbnRvIGEgc2V0IChpLmUuIG5vIGR1cGxpY2F0ZXMpIGNvbXBvc2VkIG9mIHRoZSBlbGVtZW50c1xuICAgICAqIG9mIGVhY2ggbGlzdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBbKl0gLT4gWypdIC0+IFsqXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFzIFRoZSBmaXJzdCBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGJzIFRoZSBzZWNvbmQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGZpcnN0IGFuZCBzZWNvbmQgbGlzdHMgY29uY2F0ZW5hdGVkLCB3aXRoXG4gICAgICogICAgICAgICBkdXBsaWNhdGVzIHJlbW92ZWQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi51bmlvbihbMSwgMiwgM10sIFsyLCAzLCA0XSk7IC8vPT4gWzEsIDIsIDMsIDRdXG4gICAgICovXG4gICAgdmFyIHVuaW9uID0gX2N1cnJ5Mihjb21wb3NlKHVuaXEsIF9jb25jYXQpKTtcblxuICAgIHZhciBSID0ge1xuICAgICAgICBGOiBGLFxuICAgICAgICBUOiBULFxuICAgICAgICBfXzogX18sXG4gICAgICAgIGFkZDogYWRkLFxuICAgICAgICBhZGRJbmRleDogYWRkSW5kZXgsXG4gICAgICAgIGFkanVzdDogYWRqdXN0LFxuICAgICAgICBhbGw6IGFsbCxcbiAgICAgICAgYWxsUGFzczogYWxsUGFzcyxcbiAgICAgICAgYWxsVW5pcTogYWxsVW5pcSxcbiAgICAgICAgYWx3YXlzOiBhbHdheXMsXG4gICAgICAgIGFuZDogYW5kLFxuICAgICAgICBhbnk6IGFueSxcbiAgICAgICAgYW55UGFzczogYW55UGFzcyxcbiAgICAgICAgYXA6IGFwLFxuICAgICAgICBhcGVydHVyZTogYXBlcnR1cmUsXG4gICAgICAgIGFwcGVuZDogYXBwZW5kLFxuICAgICAgICBhcHBseTogYXBwbHksXG4gICAgICAgIGFwcGx5U3BlYzogYXBwbHlTcGVjLFxuICAgICAgICBhc3NvYzogYXNzb2MsXG4gICAgICAgIGFzc29jUGF0aDogYXNzb2NQYXRoLFxuICAgICAgICBiaW5hcnk6IGJpbmFyeSxcbiAgICAgICAgYmluZDogYmluZCxcbiAgICAgICAgYm90aDogYm90aCxcbiAgICAgICAgY2FsbDogY2FsbCxcbiAgICAgICAgY2hhaW46IGNoYWluLFxuICAgICAgICBjbGFtcDogY2xhbXAsXG4gICAgICAgIGNsb25lOiBjbG9uZSxcbiAgICAgICAgY29tcGFyYXRvcjogY29tcGFyYXRvcixcbiAgICAgICAgY29tcGxlbWVudDogY29tcGxlbWVudCxcbiAgICAgICAgY29tcG9zZTogY29tcG9zZSxcbiAgICAgICAgY29tcG9zZUs6IGNvbXBvc2VLLFxuICAgICAgICBjb21wb3NlUDogY29tcG9zZVAsXG4gICAgICAgIGNvbmNhdDogY29uY2F0LFxuICAgICAgICBjb25kOiBjb25kLFxuICAgICAgICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdCxcbiAgICAgICAgY29uc3RydWN0TjogY29uc3RydWN0TixcbiAgICAgICAgY29udGFpbnM6IGNvbnRhaW5zLFxuICAgICAgICBjb252ZXJnZTogY29udmVyZ2UsXG4gICAgICAgIGNvdW50Qnk6IGNvdW50QnksXG4gICAgICAgIGN1cnJ5OiBjdXJyeSxcbiAgICAgICAgY3VycnlOOiBjdXJyeU4sXG4gICAgICAgIGRlYzogZGVjLFxuICAgICAgICBkZWZhdWx0VG86IGRlZmF1bHRUbyxcbiAgICAgICAgZGlmZmVyZW5jZTogZGlmZmVyZW5jZSxcbiAgICAgICAgZGlmZmVyZW5jZVdpdGg6IGRpZmZlcmVuY2VXaXRoLFxuICAgICAgICBkaXNzb2M6IGRpc3NvYyxcbiAgICAgICAgZGlzc29jUGF0aDogZGlzc29jUGF0aCxcbiAgICAgICAgZGl2aWRlOiBkaXZpZGUsXG4gICAgICAgIGRyb3A6IGRyb3AsXG4gICAgICAgIGRyb3BMYXN0OiBkcm9wTGFzdCxcbiAgICAgICAgZHJvcExhc3RXaGlsZTogZHJvcExhc3RXaGlsZSxcbiAgICAgICAgZHJvcFJlcGVhdHM6IGRyb3BSZXBlYXRzLFxuICAgICAgICBkcm9wUmVwZWF0c1dpdGg6IGRyb3BSZXBlYXRzV2l0aCxcbiAgICAgICAgZHJvcFdoaWxlOiBkcm9wV2hpbGUsXG4gICAgICAgIGVpdGhlcjogZWl0aGVyLFxuICAgICAgICBlbXB0eTogZW1wdHksXG4gICAgICAgIGVxQnk6IGVxQnksXG4gICAgICAgIGVxUHJvcHM6IGVxUHJvcHMsXG4gICAgICAgIGVxdWFsczogZXF1YWxzLFxuICAgICAgICBldm9sdmU6IGV2b2x2ZSxcbiAgICAgICAgZmlsdGVyOiBmaWx0ZXIsXG4gICAgICAgIGZpbmQ6IGZpbmQsXG4gICAgICAgIGZpbmRJbmRleDogZmluZEluZGV4LFxuICAgICAgICBmaW5kTGFzdDogZmluZExhc3QsXG4gICAgICAgIGZpbmRMYXN0SW5kZXg6IGZpbmRMYXN0SW5kZXgsXG4gICAgICAgIGZsYXR0ZW46IGZsYXR0ZW4sXG4gICAgICAgIGZsaXA6IGZsaXAsXG4gICAgICAgIGZvckVhY2g6IGZvckVhY2gsXG4gICAgICAgIGZyb21QYWlyczogZnJvbVBhaXJzLFxuICAgICAgICBncm91cEJ5OiBncm91cEJ5LFxuICAgICAgICBncm91cFdpdGg6IGdyb3VwV2l0aCxcbiAgICAgICAgZ3Q6IGd0LFxuICAgICAgICBndGU6IGd0ZSxcbiAgICAgICAgaGFzOiBoYXMsXG4gICAgICAgIGhhc0luOiBoYXNJbixcbiAgICAgICAgaGVhZDogaGVhZCxcbiAgICAgICAgaWRlbnRpY2FsOiBpZGVudGljYWwsXG4gICAgICAgIGlkZW50aXR5OiBpZGVudGl0eSxcbiAgICAgICAgaWZFbHNlOiBpZkVsc2UsXG4gICAgICAgIGluYzogaW5jLFxuICAgICAgICBpbmRleEJ5OiBpbmRleEJ5LFxuICAgICAgICBpbmRleE9mOiBpbmRleE9mLFxuICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICBpbnNlcnQ6IGluc2VydCxcbiAgICAgICAgaW5zZXJ0QWxsOiBpbnNlcnRBbGwsXG4gICAgICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uLFxuICAgICAgICBpbnRlcnNlY3Rpb25XaXRoOiBpbnRlcnNlY3Rpb25XaXRoLFxuICAgICAgICBpbnRlcnNwZXJzZTogaW50ZXJzcGVyc2UsXG4gICAgICAgIGludG86IGludG8sXG4gICAgICAgIGludmVydDogaW52ZXJ0LFxuICAgICAgICBpbnZlcnRPYmo6IGludmVydE9iaixcbiAgICAgICAgaW52b2tlcjogaW52b2tlcixcbiAgICAgICAgaXM6IGlzLFxuICAgICAgICBpc0FycmF5TGlrZTogaXNBcnJheUxpa2UsXG4gICAgICAgIGlzRW1wdHk6IGlzRW1wdHksXG4gICAgICAgIGlzTmlsOiBpc05pbCxcbiAgICAgICAgam9pbjogam9pbixcbiAgICAgICAganV4dDoganV4dCxcbiAgICAgICAga2V5czoga2V5cyxcbiAgICAgICAga2V5c0luOiBrZXlzSW4sXG4gICAgICAgIGxhc3Q6IGxhc3QsXG4gICAgICAgIGxhc3RJbmRleE9mOiBsYXN0SW5kZXhPZixcbiAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAgICAgIGxlbnM6IGxlbnMsXG4gICAgICAgIGxlbnNJbmRleDogbGVuc0luZGV4LFxuICAgICAgICBsZW5zUGF0aDogbGVuc1BhdGgsXG4gICAgICAgIGxlbnNQcm9wOiBsZW5zUHJvcCxcbiAgICAgICAgbGlmdDogbGlmdCxcbiAgICAgICAgbGlmdE46IGxpZnROLFxuICAgICAgICBsdDogbHQsXG4gICAgICAgIGx0ZTogbHRlLFxuICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgbWFwQWNjdW06IG1hcEFjY3VtLFxuICAgICAgICBtYXBBY2N1bVJpZ2h0OiBtYXBBY2N1bVJpZ2h0LFxuICAgICAgICBtYXBPYmpJbmRleGVkOiBtYXBPYmpJbmRleGVkLFxuICAgICAgICBtYXRjaDogbWF0Y2gsXG4gICAgICAgIG1hdGhNb2Q6IG1hdGhNb2QsXG4gICAgICAgIG1heDogbWF4LFxuICAgICAgICBtYXhCeTogbWF4QnksXG4gICAgICAgIG1lYW46IG1lYW4sXG4gICAgICAgIG1lZGlhbjogbWVkaWFuLFxuICAgICAgICBtZW1vaXplOiBtZW1vaXplLFxuICAgICAgICBtZXJnZTogbWVyZ2UsXG4gICAgICAgIG1lcmdlQWxsOiBtZXJnZUFsbCxcbiAgICAgICAgbWVyZ2VXaXRoOiBtZXJnZVdpdGgsXG4gICAgICAgIG1lcmdlV2l0aEtleTogbWVyZ2VXaXRoS2V5LFxuICAgICAgICBtaW46IG1pbixcbiAgICAgICAgbWluQnk6IG1pbkJ5LFxuICAgICAgICBtb2R1bG86IG1vZHVsbyxcbiAgICAgICAgbXVsdGlwbHk6IG11bHRpcGx5LFxuICAgICAgICBuQXJ5OiBuQXJ5LFxuICAgICAgICBuZWdhdGU6IG5lZ2F0ZSxcbiAgICAgICAgbm9uZTogbm9uZSxcbiAgICAgICAgbm90OiBub3QsXG4gICAgICAgIG50aDogbnRoLFxuICAgICAgICBudGhBcmc6IG50aEFyZyxcbiAgICAgICAgb2JqT2Y6IG9iak9mLFxuICAgICAgICBvZjogb2YsXG4gICAgICAgIG9taXQ6IG9taXQsXG4gICAgICAgIG9uY2U6IG9uY2UsXG4gICAgICAgIG9yOiBvcixcbiAgICAgICAgb3Zlcjogb3ZlcixcbiAgICAgICAgcGFpcjogcGFpcixcbiAgICAgICAgcGFydGlhbDogcGFydGlhbCxcbiAgICAgICAgcGFydGlhbFJpZ2h0OiBwYXJ0aWFsUmlnaHQsXG4gICAgICAgIHBhcnRpdGlvbjogcGFydGl0aW9uLFxuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBwYXRoRXE6IHBhdGhFcSxcbiAgICAgICAgcGF0aE9yOiBwYXRoT3IsXG4gICAgICAgIHBhdGhTYXRpc2ZpZXM6IHBhdGhTYXRpc2ZpZXMsXG4gICAgICAgIHBpY2s6IHBpY2ssXG4gICAgICAgIHBpY2tBbGw6IHBpY2tBbGwsXG4gICAgICAgIHBpY2tCeTogcGlja0J5LFxuICAgICAgICBwaXBlOiBwaXBlLFxuICAgICAgICBwaXBlSzogcGlwZUssXG4gICAgICAgIHBpcGVQOiBwaXBlUCxcbiAgICAgICAgcGx1Y2s6IHBsdWNrLFxuICAgICAgICBwcmVwZW5kOiBwcmVwZW5kLFxuICAgICAgICBwcm9kdWN0OiBwcm9kdWN0LFxuICAgICAgICBwcm9qZWN0OiBwcm9qZWN0LFxuICAgICAgICBwcm9wOiBwcm9wLFxuICAgICAgICBwcm9wRXE6IHByb3BFcSxcbiAgICAgICAgcHJvcElzOiBwcm9wSXMsXG4gICAgICAgIHByb3BPcjogcHJvcE9yLFxuICAgICAgICBwcm9wU2F0aXNmaWVzOiBwcm9wU2F0aXNmaWVzLFxuICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgIHJhbmdlOiByYW5nZSxcbiAgICAgICAgcmVkdWNlOiByZWR1Y2UsXG4gICAgICAgIHJlZHVjZUJ5OiByZWR1Y2VCeSxcbiAgICAgICAgcmVkdWNlUmlnaHQ6IHJlZHVjZVJpZ2h0LFxuICAgICAgICByZWR1Y2VkOiByZWR1Y2VkLFxuICAgICAgICByZWplY3Q6IHJlamVjdCxcbiAgICAgICAgcmVtb3ZlOiByZW1vdmUsXG4gICAgICAgIHJlcGVhdDogcmVwZWF0LFxuICAgICAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgICAgICByZXZlcnNlOiByZXZlcnNlLFxuICAgICAgICBzY2FuOiBzY2FuLFxuICAgICAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgICAgIHNldDogc2V0LFxuICAgICAgICBzbGljZTogc2xpY2UsXG4gICAgICAgIHNvcnQ6IHNvcnQsXG4gICAgICAgIHNvcnRCeTogc29ydEJ5LFxuICAgICAgICBzcGxpdDogc3BsaXQsXG4gICAgICAgIHNwbGl0QXQ6IHNwbGl0QXQsXG4gICAgICAgIHNwbGl0RXZlcnk6IHNwbGl0RXZlcnksXG4gICAgICAgIHNwbGl0V2hlbjogc3BsaXRXaGVuLFxuICAgICAgICBzdWJ0cmFjdDogc3VidHJhY3QsXG4gICAgICAgIHN1bTogc3VtLFxuICAgICAgICBzeW1tZXRyaWNEaWZmZXJlbmNlOiBzeW1tZXRyaWNEaWZmZXJlbmNlLFxuICAgICAgICBzeW1tZXRyaWNEaWZmZXJlbmNlV2l0aDogc3ltbWV0cmljRGlmZmVyZW5jZVdpdGgsXG4gICAgICAgIHRhaWw6IHRhaWwsXG4gICAgICAgIHRha2U6IHRha2UsXG4gICAgICAgIHRha2VMYXN0OiB0YWtlTGFzdCxcbiAgICAgICAgdGFrZUxhc3RXaGlsZTogdGFrZUxhc3RXaGlsZSxcbiAgICAgICAgdGFrZVdoaWxlOiB0YWtlV2hpbGUsXG4gICAgICAgIHRhcDogdGFwLFxuICAgICAgICB0ZXN0OiB0ZXN0LFxuICAgICAgICB0aW1lczogdGltZXMsXG4gICAgICAgIHRvTG93ZXI6IHRvTG93ZXIsXG4gICAgICAgIHRvUGFpcnM6IHRvUGFpcnMsXG4gICAgICAgIHRvUGFpcnNJbjogdG9QYWlyc0luLFxuICAgICAgICB0b1N0cmluZzogdG9TdHJpbmcsXG4gICAgICAgIHRvVXBwZXI6IHRvVXBwZXIsXG4gICAgICAgIHRyYW5zZHVjZTogdHJhbnNkdWNlLFxuICAgICAgICB0cmFuc3Bvc2U6IHRyYW5zcG9zZSxcbiAgICAgICAgdHJhdmVyc2U6IHRyYXZlcnNlLFxuICAgICAgICB0cmltOiB0cmltLFxuICAgICAgICB0cnlDYXRjaDogdHJ5Q2F0Y2gsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIHVuYXBwbHk6IHVuYXBwbHksXG4gICAgICAgIHVuYXJ5OiB1bmFyeSxcbiAgICAgICAgdW5jdXJyeU46IHVuY3VycnlOLFxuICAgICAgICB1bmZvbGQ6IHVuZm9sZCxcbiAgICAgICAgdW5pb246IHVuaW9uLFxuICAgICAgICB1bmlvbldpdGg6IHVuaW9uV2l0aCxcbiAgICAgICAgdW5pcTogdW5pcSxcbiAgICAgICAgdW5pcUJ5OiB1bmlxQnksXG4gICAgICAgIHVuaXFXaXRoOiB1bmlxV2l0aCxcbiAgICAgICAgdW5sZXNzOiB1bmxlc3MsXG4gICAgICAgIHVubmVzdDogdW5uZXN0LFxuICAgICAgICB1bnRpbDogdW50aWwsXG4gICAgICAgIHVwZGF0ZTogdXBkYXRlLFxuICAgICAgICB1c2VXaXRoOiB1c2VXaXRoLFxuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICAgICAgdmFsdWVzSW46IHZhbHVlc0luLFxuICAgICAgICB2aWV3OiB2aWV3LFxuICAgICAgICB3aGVuOiB3aGVuLFxuICAgICAgICB3aGVyZTogd2hlcmUsXG4gICAgICAgIHdoZXJlRXE6IHdoZXJlRXEsXG4gICAgICAgIHdpdGhvdXQ6IHdpdGhvdXQsXG4gICAgICAgIHdyYXA6IHdyYXAsXG4gICAgICAgIHhwcm9kOiB4cHJvZCxcbiAgICAgICAgemlwOiB6aXAsXG4gICAgICAgIHppcE9iajogemlwT2JqLFxuICAgICAgICB6aXBXaXRoOiB6aXBXaXRoXG4gICAgfTtcbiAgLyogZXNsaW50LWVudiBhbWQgKi9cblxuICAvKiBURVNUX0VOVFJZX1BPSU5UICovXG5cbiAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gUjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7IHJldHVybiBSOyB9KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLlIgPSBSO1xuICB9XG5cbn0uY2FsbCh0aGlzKSk7XG4iXX0=
